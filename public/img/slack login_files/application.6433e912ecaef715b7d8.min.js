(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],Array(30).concat([function(e,t,a){"use strict";a.d(t,"d",function(){return l});a.d(t,"c",function(){return s});a.d(t,"b",function(){return o});a.d(t,"e",function(){return n});a.d(t,"a",function(){return i});a.d(t,"f",function(){return r});var n={CANADA:"Canada",UNITED_KINGDOM:"United Kingdom",UNITED_KINGDOM_UK:"United Kingdom (UK)",UNITED_STATES:"United States"};var r={COMPANY_NAME_IS_REQUIRED:"company_name_is_required",STREET_IS_REQUIRED:"street_is_required",CITY_IS_REQUIRED:"city_is_required",POSTAL_CODE_IS_REQUIRED:"postal_code_is_required",ZIP_CODE_IS_REQUIRED:"zip_code_is_required",REGION_IS_REQUIRED:"region_is_required",STATE_IS_REQUIRED:"state_is_required",COUNTRY_IS_REQUIRED:"country_is_required",VAT_ID_IS_REQUIRED:"vat_id_is_required",STREET_INVALID_CHARACTERS:"street_invalid_characters",CITY_INVALID_CHARACTERS:"city_invalid_characters",REGION_INVALID_CHARACTERS:"region_invalid_characters",STATE_INVALID_CHARACTERS:"state_invalid_characters",POSTAL_CODE_INVALID_CHARACTERS:"postal_code_invalid_characters",ZIP_CODE_INVALID_CHARACTERS:"zip_code_invalid_characters",VAT_ID_INVALID_CHARACTERS:"vat_id_invalid_characters",ABN_ID_INVALID_CHARACTERS:"abn_id_invalid_characters",US_ZIP_CODE_INVALID_FORMAT:"us_zip_code_invalid_format",CANADA_POSTAL_CODE_INVALID_FORMAT:"canada_zip_code_invalid_format",ZIP_CODE_INVALID_API_ERROR:"zipcode_invalid_api_error",VAT_ID_INVALID_API_ERROR:"vat_id_invalid_api_error",VAT_ID_INPUT_ERROR:"vat_input_error",VAT_ID_INVALID_FORMAT:"vat_id_invalid_format",API_ERROR:"api_error",ABN_ID_INVALID_LENGTH:"abn_id_invalid_length",ADDRESS_INPUT_ERROR:"address_input_error",ERROR_UPDATING_BILLING_ADDRESS:"error_updating_billing_address",NO_PERMS:"no_perms",INVALID_AUTH:"invalid_auth",DEFAULT_ERROR:"default_error"};var i={ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX:/^[a-zA-Z\xc0-\xff0-9-'-/.\s]+$/i,ALPHA_NUMERIC_WITH_DASH_REGEX:/^[A-Z0-9-\-\s]+$/i,ABN_ID_REGEX:/^(\d *?){11}$/i,US_POSTAL_CODE_FORMAT_REGEX:/(^\d{5}$)|(^\d{5}-{0,1}\d{4}$)/i,CANADA_POSTAL_CODE_FORMAT_REGEX:/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1} *\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1}\d{1}$/i};var o={COMPANY_NAME:"companyName",STREET:"street",SUITE:"suite",CITY:"city",REGION:"region",POSTAL_CODE:"postalCode",COUNTRY:"country",IS_BUSINESS_PURCHASE:"isBusinessPurchase",IS_VAT_AVAILABLE:"isVatIdAvailable",VAT_ID:"vatId",ABN_ID:"abnId"};var s={COMPANY_NAME:"",STREET:"",SUITE:"",CITY:"",REGION:"",POSTAL_CODE:"",COUNTRY:"",IS_BUSINESS_PURCHASE:true,IS_VAT_AVAILABLE:true,VAT_ID:"",ABN_ID:""};var l={COMPANY_NAME:83,STREET:83,SUITE:83,CITY:150,REGION:100,POSTAL_CODE:15,VAT_ID:15,ABN_ID:14}},,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"interfaceModes",function(){return h});a.d(t,"setTabOnly",function(){return v});a.d(t,"setInterfaceIsVisibleOnly",function(){return g});a.d(t,"setLoadingModule",function(){return b});a.d(t,"setPageForModule",function(){return _});a.d(t,"MODULE_ERROR_STATE",function(){return y});a.d(t,"setErrorForAllModules",function(){return O});a.d(t,"setErrorForModule",function(){return w});a.d(t,"setStateForModule",function(){return E});a.d(t,"setScrollPosition",function(){return C});a.d(t,"setDefaultTab",function(){return j});a.d(t,"resetScrollPosition",function(){return S});a.d(t,"setSessionTimeoutId",function(){return I});a.d(t,"setLastOpenMethod",function(){return T});a.d(t,"setInterfaceMode",function(){return N});a.d(t,"reset",function(){return A});a.d(t,"setFocusedViaTabKey",function(){return R});a.d(t,"toggleDebugInfoVisible",function(){return M});a.d(t,"getInterfaceMode",function(){return D});a.d(t,"getTab",function(){return F});a.d(t,"getVisible",function(){return L});a.d(t,"getModuleState",function(){return B});a.d(t,"getScrollPosition",function(){return U});a.d(t,"getSessionTimeoutId",function(){return q});a.d(t,"getLastOpenMethod",function(){return G});a.d(t,"wasFocusedViaTabKey",function(){return H});a.d(t,"getIsDebugInfoVisible",function(){return W});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(2);var d=a.n(u);var p=a(699);var f;var m=Object(c["a"])("Set the interfaceMode field (see setInterfaceMode thunk for general usage)");m.propTypes={interfaceMode:l.a.oneOf(["EDIT","SEARCH_RESULTS"]).isRequired};var h={EDIT:"EDIT",SEARCH_RESULTS:"SEARCH_RESULTS"};var v=Object(c["a"])("Set the currently active tab field in Search (use setTab instead for components)");v.propTypes={tab:l.a.string.isRequired};var g=Object(c["a"])("Set the field representing whether or not Search is visible");g.propTypes={visible:l.a.bool.isRequired};var b=Object(c["a"])("Set the loading state of a specific module");b.propTypes={moduleType:l.a.string.isRequired,loading:l.a.bool.isRequired};var _=Object(c["a"])("Set the pagination state for a specific module");_.propTypes={moduleType:l.a.string.isRequired,page:l.a.number.isRequired};var y={None:"none",Timeout:"timeout",RenderErrorCaught:"renderErrorCaught",Unknown:"unknown",NoQuery:"noQuery"};var k=l.a.oneOf(Object(u["values"])(y));var O=Object(c["a"])("Set the error state for all modules");O.propTypes={error:k.isRequired,loading:l.a.bool.isRequired};var w=Object(c["a"])("Set the error state for a specific module");w.propTypes={moduleType:l.a.string.isRequired,error:k.isRequired,loading:l.a.bool.isRequired};var E=Object(c["a"])("Set the entire UI state for a specific module");E.propTypes={moduleType:l.a.string.isRequired,moduleState:l.a.shape({error:k.isRequired,loading:l.a.bool.isRequired,page:l.a.number.isRequired}).isRequired};var C=Object(c["a"])("Set the last scroll position for all of the search tabs");C.propTypes=l.a.shape({all:l.a.number,messages:l.a.number,files:l.a.number});var j=Object(c["a"])("Set the currently active tab field in Search to the default tab (use setTab instead for components)",{});j.propTypes=null;var S=Object(c["a"])("Reset the scroll position for all of the search tabs to zero");S.propTypes=null;var I=Object(c["a"])("Sets the ID associated with the search session clear timer");I.propTypes={sessionTimeoutId:l.a.number};var T=Object(c["a"])("Sets the lastOpenMethod field, which tracks how the search interface was opened");T.propTypes={lastOpenMethod:l.a.string};var N=Object(c["e"])("Set the interface mode",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.interfaceMode;var r=t();var i=r&&r.searchUi&&r.searchUi.interfaceMode===n;var o=r&&r.searchUi&&r.searchUi.visible;if(i)return;e(m({interfaceMode:n}));o&&n===h.EDIT&&e(Object(p["startQuerySession"])())});N.propTypes={interfaceMode:l.a.oneOf(["EDIT","SEARCH_RESULTS"]).isRequired};var A=Object(c["a"])("Reset search ui redux state");A.propTypes={};var R=Object(c["a"])("Set whether or not the input was focused via the tab key");R.propTypes={wasFocusedViaTabKey:l.a.bool.isRequired};var M=Object(c["a"])("Toggle debug display of solr info");M.propTypes=null;var x={interfaceMode:"EDIT",tab:"messages",visible:false,requestQuery:null,modules:{},scrollPosition:{all:0,messages:0,files:0},sessionTimeoutId:null,lastOpenMethod:null,focusedViaTabKey:false,isDebugInfoVisible:false};var P=Object(c["c"])((f={},r()(f,A,function(){return x}),r()(f,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.interfaceMode;return o()({},e,{interfaceMode:a})}),r()(f,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.tab;return o()({},e,{tab:a})}),r()(f,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.visible;return o()({},e,{visible:a})}),r()(f,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.moduleType,n=t.loading;return o()({},e,{modules:o()({},e.modules,r()({},a,o()({},e.modules[a],{loading:n})))})}),r()(f,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.moduleType,n=t.page;return o()({},e,{modules:o()({},e.modules,r()({},a,o()({},e.modules[a],{page:n})))})}),r()(f,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.error,n=t.loading;return o()({},e,{modules:Object(u["mapValues"])(e.modules,function(e){return o()({},e,{error:a,loading:n})})})}),r()(f,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.moduleType,n=t.error,i=t.loading;return o()({},e,{modules:o()({},e.modules,r()({},a,o()({},e.modules[a],{error:n,loading:i})))})}),r()(f,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.moduleType,n=t.moduleState;return o()({},e,{modules:o()({},e.modules,r()({},a,o()({},e.modules[a],n)))})}),r()(f,j,function(e){return o()({},e,{tab:x.tab})}),r()(f,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.scrollPosition;return o()({},e,{scrollPosition:a})}),r()(f,S,function(e){return o()({},e,{scrollPosition:x.scrollPosition})}),r()(f,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.sessionTimeoutId;return o()({},e,{sessionTimeoutId:a})}),r()(f,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.lastOpenMethod;return o()({},e,{lastOpenMethod:a})}),r()(f,R,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.wasFocusedViaTabKey;return o()({},e,{focusedViaTabKey:a})}),r()(f,M,function(e){return o()({},e,{isDebugInfoVisible:!e.isDebugInfoVisible})}),f),x);t["default"]=P;var D=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.interfaceMode});var F=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.tab});var L=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.visible});var B=Object(c["d"])(function(e,t){return e&&e.searchUi&&e.searchUi.modules&&e.searchUi.modules[t]});var U=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.scrollPosition});var q=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.sessionTimeoutId});var G=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.lastOpenMethod});var H=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.focusedViaTabKey});var W=Object(c["d"])(function(e){return e&&e.searchUi&&e.searchUi.isDebugInfoVisible})},,,,,,,,,,function(e,t,a){"use strict";a.d(t,"f",function(){return i});a.d(t,"e",function(){return o});a.d(t,"c",function(){return s});a.d(t,"d",function(){return l});a.d(t,"a",function(){return c});a.d(t,"b",function(){return u});var n=a(10);var r=new n["b"]("search");var i={HAS:"has",TYPE:"type",FROM:"from",TO:"to",IN:"in",BEFORE:"before",DURING:"during",ON:"on",AFTER:"after"};var o={has:r.t("has"),type:r.t("type"),from:r.t("from"),to:r.t("to"),in:r.t("in"),before:r.t("before"),during:r.t("during"),on:r.t("on"),after:r.t("after")};var s={STAR:"star",PIN:"pin",LINK:"link",REACTION:"reaction"};var l={star:r.t("star"),pin:r.t("pin"),link:r.t("link"),reaction:r.t("reaction")};var c={FILTER_IN:"filter-in",FILTER_FROM:"filter-from",FILTER_TO:"filter-to",FILTER_BEFORE:"filter-before",FILTER_DURING:"filter-during",FILTER_ON:"filter-on",FILTER_AFTER:"filter-after",FILTER_HAS:"filter-has",FILTER_TYPE:"filter-type",MEMBER:"member",STRING:"string",PHRASE:"phrase",API:"api-suggestion",UNKNOWN:"unknown"};var u={CHANNEL_NAVIGATION:"channel-navigation",EXPERT_CHANNEL_NAVIGATION:"expert-channel-navigation",FILE_NAVIGATION:"file-navigation",MPIM_NAVIGATION:"mpim-navigation",QUERY:"query",QUERY_HISTORY:"query-history",QUERY_USER:"query-user",TEAM_NAVIGATION:"team-navigation",UNKNOWN:"unknown",USER_NAVIGATION:"user-navigation",VIEW_NAVIGATION:"view-navigation"}},,,,function(e,t,a){"use strict";a.d(t,"b",function(){return o});var n=a(2);var r=a.n(n);window.TSM={interop:{}};function i(e,t){if(r.a.has(window.TSM,e))throw new Error("exportToLegacy: there is already something at "+e+"; we cannot overwrite it");if(!e||0!==e.indexOf("interop"))throw new Error("exportToLegacy: Name "+e+' must start with "interop".');r.a.set(window.TSM,e,t)}t["a"]=i;function o(e){return function(t){return TS.redux.dispatch(e(t)).then(function(e){return{ok:true,request_id:e.request_id,args:e.args,method:t.method,data:e}}).catch(function(e){throw e})}}},,function(e,t,a){"use strict";var n=a(57);var r=a(2);var i=a(17);var o=a(102);var s=a(23);var l=a(79);var c=a(13);var u=Object(c["c"])("TS.ms.msg_handlers",function(){return{}});var d=u;var p=a(11);var f=a(504);var m=a(107);var h=a(184);var v=a(185);var g=a(9);var b=a.n(g);var _=a(26);var y=a(19);var k=a(33);var O=a(162);var w=a(50);var E=a(203);var C=a(135);var j=a(257);var S=a(311);var I=a(12);var T=a(1108);var N=a(1109);var A=a(1110);var R=a(1111);var M=a(160);var x=a(131);var P=a(36);var D=a(241);var F=a(601);var L=void 0;var B=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a,i,o){var s,l,c,u,d,f,m;return regeneratorRuntime.wrap(function e(h){while(1)switch(h.prev=h.next){case 0:if(!Object(p["isFeatureEnabled"])(i(),"feature_modern_files_info")){h.next=5;break}h.next=3;return Object(n["resolve"])(Object(k["a"])(a,q({fileIds:t,reason:o})));case 3:s=h.sent;return h.abrupt("return",Object(r["keyBy"])(s,"id"));case 5:if(!(1===t.length)){h.next=12;break}l=t[0];c=null;h.next=10;return Object(n["resolve"])(G(l,c,o));case 10:u=h.sent;return h.abrupt("return",b()({},l,u));case 12:h.next=14;return Object(n["resolve"])(H(t));case 14:d=h.sent;f=d.data;m={};f.files.forEach(function(e){m[e.id]=e});return h.abrupt("return",m);case 19:case"end":return h.stop()}},e,this)}));return function t(a,n,r,i){return e.apply(this,arguments)}}();var U=Ce;var q=S["e"];var G=x["f"];var H=x["h"];var W=y["getActiveChannel"];var V=y["getChannelById"];var z=x["i"];var Q=_["hasMemberWithId"];var K=f["a"];var Y=f["b"];var J=x["m"];var Z=E["getOrFetchMemberCounts"];var X=100;var $=["file_deleted","file_private","message","file_comment_added","file_comment_deleted","file_comment_edited","file_public","file_private","file_change","file_shared","file_unshared","star_removed"];var ee=["member_joined_channel"];var te=["channel_joined","group_joined","mpim_joined","dnd_updated","dnd_updated_user","manual_presence_change","member_left_channel","presence_change","status_change","subteam_created","subteam_updated","user_removed_from_team","user_change","channel_created","channel_deleted"];var ae=function e(t,a){var n=pe(a)||{},r=n.objectWithFile;if(!r)return;r.file=t;a._file_attached=true};var ne=function e(t,a,n){if(!a)return true;if(Y()&&K(a))return false;var r=Object(p["getCurrentUserId"])(n());if("file_created"===t.type&&t.user_id===r)return Object(p["isFeatureEnabled"])(n(),"feature_less_file_preprocess_fetching");return!z(a)};function re(e,t){var a=W(t());if(!a)return true;return!Object(I["isIm"])(a)&&!Object(I["isMpim"])(a)&&e!==a.id}function ie(e){var t=e.type;if($.indexOf(t)>=0)return true;return false}function oe(e){return Object(p["isFeatureEnabled"])(e,"feature_less_preprocess_fetching")}function se(e){var t=e.type;return ee.indexOf(t)>=0}function le(e){var t=e.type;return te.indexOf(t)>=0}var ce=function e(t,a){var n=[];U(function(e){if(ie(e))return;var t=pe(e)||{},r=t.fileId;r&&n.indexOf(r)<0&&!ne(e,r,a)&&n.push(r)},t);return n};var ue=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a,r,i){var o;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return Object(n["resolve"])(B(t,a,r,i));case 2:o=s.sent;U(function(e){if(ie(e))return;var t=pe(e)||{},a=t.fileId;a&&o[a]&&!ne(e,a,r)&&ae(o[a],e)},a);case 4:case"end":return s.stop()}},e,L)}));return function t(a,n,r,i){return e.apply(this,arguments)}}();var de=function e(t,a){var n=pe(t)||{},r=n.objectWithFile,i=n.fileId;r&&r.file&&J(r.file);if(!i)return Promise.resolve();var o=a();if(ie(t,a))return Promise.resolve();if(t._file_attached)return Promise.resolve();if(ne(t,i,a)){t._should_dispatch=false;return Promise.resolve()}var l=Object(s["getTeamId"])(o);var c=ce(l,a).slice(0,X);if(!c.length)return Promise.resolve();var u=t.subtype?"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type;return ue(c,l,a,u).catch(function(){t._should_dispatch=false})};function pe(e){if(e.file&&e.file.id)return{objectWithFile:e,fileId:e.file.id};if(e.file_id)return{objectWithFile:e,fileId:e.file_id};if(e.item){if(e.item.file&&e.item.file.id)return{objectWithFile:e.item,fileId:e.item.file.id};if(e.item.file_id)return{objectWithFile:e.item,fileId:e.item.file_id}}return null}function fe(e,t,a){if("message"!==e.type||!e.text)return Promise.resolve();var n=P["atHereRegExp"].test(e.text)||P["atChannelRegExp"].test(e.text)||P["atEveryoneRegExp"].test(e.text)||P["atGroupRegExp"].test(e.text);if(!n)return Promise.resolve();var i=false;var o=V(a(),e.channel,i);if(!o)return Promise.resolve();var s=t(Z({channelId:o.id}));return s.promise?s.promise.catch(r["noop"]):Promise.resolve()}var me=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a){var i,o,l,c,u,d,p,f,m,h,v,g,b,_,E;return regeneratorRuntime.wrap(function e(S){while(1)switch(S.prev=S.next){case 0:if(!(false===t._should_dispatch)){S.next=2;break}return S.abrupt("return");case 2:i=a();o=function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return k["a"].apply(void 0,[Object(s["getTeamId"])(i)].concat(a))};l=oe(i);c=l||se(t);u=t.subtype?"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type;if(!l){S.next=13;break}if(!(Object(r["isString"])(t.channel)&&Object(M["a"])(t.channel)&&!Object(y["hasChannelWithId"])(i,t.channel))){S.next=11;break}S.next=11;return Object(n["resolve"])(o(Object(C["c"])({ids:[t.channel],reason:u})).catch(r["noop"]));case 11:S.next=25;break;case 13:d=Object(A["a"])(t);p=Object(N["a"])(t);f=Object(T["a"])(t);m=c?[]:Object(R["a"])(t);h=d.filter(function(e){return!Object(y["hasChannelWithId"])(i,e)});v=p.filter(function(e){return!Q(i,e)});g=f.filter(function(e){return!Object(O["hasBotWithId"])(i,e)});b=m.filter(function(e){return!Object(w["hasTeamWithId"])(i,e)});_=!!(h.length||v.length||g.length||b.length);E=_?Promise.join(Object(D["e"])(h,u).catch(r["noop"]),o(Object(j["a"])({ids:v,reason:"ensureModelObsArePresent"})).catch(r["noop"]),Object(O["ensureBotsArePresent"])(i,o,g).catch(r["noop"]),Object(F["b"])(b,u).catch(r["noop"])):Promise.resolve();S.next=25;return Object(n["resolve"])(E.catch(r["noop"]));case 25:S.next=27;return Object(n["resolve"])(fe(t,o,a).then(r["noop"]));case 27:case"end":return S.stop()}},e,L)}));return function t(a,n){return e.apply(this,arguments)}}();var he=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:if(!le(t)){i.next=2;break}return i.abrupt("return");case 2:r=a();if(!("user_typing"===t.type&&!Q(r,t.user)&&re(t.channel,a))){i.next=6;break}t._should_dispatch=false;return i.abrupt("return");case 6:i.prev=6;i.next=9;return Object(n["resolve"])(de(t,a));case 9:i.next=11;return Object(n["resolve"])(me(t,a));case 11:i.next=15;break;case 13:i.prev=13;i.t0=i["catch"](6);case 15:case"end":return i.stop()}},e,L,[[6,13]])}));return function t(a,n){return e.apply(this,arguments)}}();var ve=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return Object(n["resolve"])(he(t,a));case 2:r=false!==t._should_dispatch;delete t._should_dispatch;return i.abrupt("return",r);case 5:case"end":return i.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}();var ge={NO_FETCH_MISSING_FILE_TYPES:$,NO_FETCH_MISSING_OBJECT_TYPES:te,canIgnoreUserTypingMessage:re,getFileInfoFromMessage:pe,maybeEnsureMemberCount:fe,canSkipObjectFetchForMessage:le};Object.defineProperty(ge,"applyFunctionToPendingMessagesForTeam",{get:function e(){return U},set:function e(t){U=t}});Object.defineProperty(ge,"attachFileObjectToMessage",{get:function e(){return ae},set:function e(t){ae=t}});Object.defineProperty(ge,"canIgnoreFileMessage",{get:function e(){return ne},set:function e(t){ne=t}});Object.defineProperty(ge,"ensureDataIsPresent",{get:function e(){return he},set:function e(t){he=t}});Object.defineProperty(ge,"ensureFilesInMessageArePresent",{get:function e(){return de},set:function e(t){de=t}});Object.defineProperty(ge,"ensureModelObsInMessageArePresent",{get:function e(){return me},set:function e(t){me=t}});Object.defineProperty(ge,"fetchAndAttachFilesForMessagesInQueue",{get:function e(){return ue},set:function e(t){ue=t}});Object.defineProperty(ge,"fetchFilesById",{get:function e(){return q},set:function e(t){q=t}});Object.defineProperty(ge,"fetchFileInfoRaw",{get:function e(){return G},set:function e(t){G=t}});Object.defineProperty(ge,"fetchMultipleFilesRaw",{get:function e(){return H},set:function e(t){H=t}});Object.defineProperty(ge,"getActiveChannel",{get:function e(){return W},set:function e(t){W=t}});Object.defineProperty(ge,"getFileById",{get:function e(){return z},set:function e(t){z=t}});Object.defineProperty(ge,"getFileIdsToFetchFromQueue",{get:function e(){return ce},set:function e(t){ce=t}});Object.defineProperty(ge,"hasMemberWithId",{get:function e(){return Q},set:function e(t){Q=t}});Object.defineProperty(ge,"getChannelById",{get:function e(){return V},set:function e(t){V=t}});Object.defineProperty(ge,"isFileRelevantToPost",{get:function e(){return K},set:function e(t){K=t}});Object.defineProperty(ge,"isOnPostPage",{get:function e(){return Y},set:function e(t){Y=t}});Object.defineProperty(ge,"maybePruneChannels",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty(ge,"getOrFetchMemberCounts",{get:function e(){return Z},set:function e(t){Z=t}});a.d(t,"a",function(){return we});a.d(t,"b",function(){return Ee});a.d(t,"c",function(){return Ce});a.d(t,"d",function(){return je});a.d(t,"e",function(){return Se});a.d(t,"f",function(){return Ae});a.d(t,"g",function(){return Re});var be=void 0;var _e=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a,r){var o,s,c,u,d,p;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:o={};s=3e4;c=Object(l["promiseToHaveOpenWebSocket"])(r());u=c.then(function(){return Promise.delay(s,o)});d=c.then(function(){return ve(t,r)});a.next=7;return Object(n["resolve"])(Promise.race([d,u]));case 7:p=a.sent;if(!(p===o)){a.next=11;break}Object(i["a"])({getState:r}).warn("Preprocessing message of type "+t.type+" took too long; continue to process queue");return a.abrupt("return",true);case 11:return a.abrupt("return",p);case 12:case"end":return a.stop()}},e,this)}));return function t(a,n,r){return e.apply(this,arguments)}}();var ye={};var ke={};var Oe={};function we(e,t){if(ke[e]){var a=Object(h["a"])()||Object(v["a"])();var n=a?"addRtmErrorHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmErrorHandler: a handler is already registered for "+e;throw new Error(n)}ke[e]=t}function Ee(e,t){if(ye[e]){var a=Object(h["a"])()||Object(v["a"])();var n=a?"addRtmHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmHandler: a handler is already registered for "+e;throw new Error(n)}ye[e]=t}function Ce(e,t){if(!Oe[t])return;Oe[t].forEach(function(t){return e(t)})}function je(){return ye}function Se(){return Oe}var Ie=function e(t,a,n){if(Me(n))return;var r=t.type;if(ye[r])try{ye[r](t,a,n)}catch(e){if(Object(m["a"])()){var i=n();var o=Object(s["getTeamId"])(i);window.slackDebug.setLastError&&window.slackDebug.setLastError(o,new Error("Error processing "+r+": "+e.message))}throw e}var l=d();l[t.type]&&l[t.type](t)};var Te=["T024BE7LD","T5J7PJ5PT","T5JRYUBHS","T5MTH4ARY","T5KK65FCP","T34263EUF","T5J4Q04QG","T5J7PM517","T5JN7LJ7M","T5PMP2708","T1ZPW1JUE","T57U8DUG7","T20M0MB9P"];var Ne=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a,l){var c,u,d,p;return regeneratorRuntime.wrap(function e(f){while(1)switch(f.prev=f.next){case 0:if(!(!t||!t.length)){f.next=2;break}return f.abrupt("return",Promise.resolve());case 2:c=t[0];f.prev=3;f.next=6;return Object(n["resolve"])(_e(c,a,l));case 6:u=f.sent;u&&Ie(c,a,l);f.next=16;break;case 10:f.prev=10;f.t0=f["catch"](3);Object(i["a"])({getState:l}).error("Error while processing "+c.type+" event",f.t0);d=l();p=Object(s["getTeamId"])(d);if(Object(r["includes"])(Te,p)){console.error(f.t0);Object(o["a"])(f.t0,"TINYSPECK: Error while processing "+c.type+" event")}case 16:f.prev=16;t.shift();return f.finish(16);case 19:return f.abrupt("return",t.length?Ne(t,a,l):Promise.resolve());case 20:case"end":return f.stop()}},e,be,[[3,10,16,19]])}));return function t(a,n,r){return e.apply(this,arguments)}}();function Ae(e,t,a){var n=a();var r=Object(s["getTeamId"])(n);Oe[r]=Oe[r]||[];Oe[r].push(e);1===Oe[r].length&&Ne(Oe[r],t,a)}function Re(e,t,a){if(!ke[e]){Object(o["a"])(new Error("Unexpected start error: "+e),JSON.stringify({error:e,host:window.location.hostname,path:window.location.pathname}),"flannel_start_error");return}ke[e](e,t,a)}function Me(e){var t=e();return Object(p["isWebApp"])(t)&&!Object(p["processRtmStream"])(t)&&!Object(f["b"])()}var xe={shouldIgnoreRtmStream:Me};Object.defineProperty(xe,"dispatchMessageToHandlers",{get:function e(){return Ie},set:function e(t){Ie=t}});Object.defineProperty(xe,"errorHandlers",{get:function e(){return ke},set:function e(t){ke=t}});Object.defineProperty(xe,"handleNextMessageFromQueue",{get:function e(){return Ne},set:function e(t){Ne=t}});Object.defineProperty(xe,"handlers",{get:function e(){return ye},set:function e(t){ye=t}});Object.defineProperty(xe,"pendingMessages",{get:function e(){return Oe},set:function e(t){Oe=t}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(2);var u=a(4);var d=a(180);var p=a(37);var f=a(268);var m=a(624);var h=a(314);var v=a(736);var g=a(868);function b(e,t){var a=Object(c["trim"])(t);a=Object(g["a"])(a,{shouldRenderEmojiAsText:true});return Object(v["b"])(e,a)}var _=a(280);var y=a(186);var k=a(17);var O=a(699);a.d(t,"requestPropType",function(){return I});a.d(t,"responsePropType",function(){return A});a.d(t,"setEditableRequestQueryInternal",function(){return R});a.d(t,"setEditableRequestQueryFilterOnly",function(){return M});a.d(t,"getEditableRequestQuery",function(){return x});a.d(t,"getRequestQuery",function(){return P});a.d(t,"clearResponse",function(){return D});a.d(t,"setRequestFromEditableRequest",function(){return L});a.d(t,"getEditableRequestQueryFilter",function(){return B});a.d(t,"setEditableRequestChannelObjects",function(){return U});a.d(t,"resetEditableRequest",function(){return q});a.d(t,"setResponse",function(){return G});a.d(t,"appendResponse",function(){return H});a.d(t,"setFilterSuggestions",function(){return W});a.d(t,"clearFilterSuggestions",function(){return V});a.d(t,"setLastFetchAllRequestId",function(){return z});a.d(t,"setEditableRequestQueryThenRequest",function(){return K});a.d(t,"toggleEditableRequestQueryFilterFromItem",function(){return Y});a.d(t,"toggleEditableRequestQueryFilterInItem",function(){return J});a.d(t,"setEditableRequestQueryFilterBefore",function(){return Z});a.d(t,"setEditableRequestQueryFilterAfter",function(){return X});a.d(t,"setEditableRequestQueryFilterFileType",function(){return $});a.d(t,"reset",function(){return ee});a.d(t,"resetSearchAfterUnknownUIError",function(){return te});a.d(t,"getEditableRequest",function(){return oe});a.d(t,"getEditableRequestQueryFilterHistory",function(){return se});a.d(t,"getEditableRequestQueryFilterFrom",function(){return le});a.d(t,"getEditableRequestQueryFilterIn",function(){return ce});a.d(t,"getEditableRequestQueryFilterAfter",function(){return ue});a.d(t,"getEditableRequestQueryFilterBefore",function(){return de});a.d(t,"getEditableRequestChannelObjects",function(){return pe});a.d(t,"getEditableRequestQueryFilterFileType",function(){return fe});a.d(t,"getRequest",function(){return me});a.d(t,"getPreviousRequest",function(){return he});a.d(t,"getPreviousRequestQuery",function(){return ve});a.d(t,"getResponse",function(){return ge});a.d(t,"getResponseModule",function(){return be});a.d(t,"getResponseQuery",function(){return _e});a.d(t,"getLastFetchAllRequestId",function(){return ye});a.d(t,"getFilterSuggestions",function(){return ke});a.d(t,"getRequestIdForModule",function(){return Oe});var w;var E="IMPROVED_SEARCH";function C(e,t){var a=Object(u["a"])(e);a.propTypes=t;return a}var j=l.a.shape({from:l.a.arrayOf(l.a.string).isRequired,in:l.a.arrayOf(l.a.string).isRequired,after:l.a.string,before:l.a.string});var S={query:l.a.string.isRequired,queryFilter:j.isRequired,channelObjects:l.a.object,requestInstanceId:l.a.string};var I=l.a.shape(S);var T=l.a.shape({pagination:l.a.shape({page:l.a.number.isRequired,first:l.a.number,last:l.a.number,page_count:l.a.number,per_page:l.a.number,total_count:l.a.number}).isRequired,items:l.a.arrayOf(l.a.shape({channel:l.a.shape({id:l.a.string}),iid:l.a.string,messages:l.a.arrayOf(l.a.shape({ts:l.a.string,text:l.a.string,permalink:l.a.string,user:l.a.string}))})).isRequired,filters:l.a.oneOfType([l.a.shape({from:l.a.arrayOf(l.a.string),in:l.a.arrayOf(l.a.string),after:l.a.string,before:l.a.string}),l.a.array]),query:l.a.string,request_id:l.a.string});var N={query:l.a.string.isRequired,module:l.a.string.isRequired,result:T.isRequired};var A=l.a.shape(N);var R=C("Set the query string for the editable request query",{query:l.a.string.isRequired});var M=C("Set the query filter object on the editable request",{queryFilter:j.isRequired});var x=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.query});var P=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.request&&e.searchResults.request.query});var D=C("Remove results modules for the search",{});var F=C("Promote the editable request to become the request",{});var L=Object(u["e"])("Set a request from the editable request",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.fetchSuggestions,r=void 0===n||n;e(F());var i=P(t());Object(k["a"])({getState:t}).info(E,"Starting new search");e(D());var o=e(Object(_["a"])({query:i,fetchSuggestions:r}));e(Object(p["setInterfaceMode"])({interfaceMode:p["interfaceModes"].SEARCH_RESULTS}));i&&e(Object(_["i"])({query:i}));return o});L.propTypes={fetchSuggestions:l.a.bool};var B=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter});var U=C("Set the map of channel objects we need in order to render the channel filter.",{channels:l.a.object.isRequired});var q=C("Reset the editable request",{});var G=C("Set the search results",N);var H=C("Adds to the search results",{module:l.a.string.isRequired,result:T.isRequired});var W=Object(u["a"])("Set the suggestions for the current search query");W.propTypes={suggestions:l.a.shape({from:l.a.arrayOf(l.a.string),in:l.a.arrayOf(l.a.string)})};var V=Object(u["a"])("Clear the suggestions for the current search query");V.propTypes=null;var z=Object(u["a"])("Set the request ID for the current fetchAllSearchResults call");z.propTypes={id:l.a.string.isRequired};var Q=Object(u["e"])("Set the query filter object on the editable request and update the query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.queryFilter;var r=t();var i=Object(m["c"])(r,x(r),n);var o=Object(c["trim"])(i.toTextyString());var s=Object(c["trim"])(i.toString());e(Object(O["startQuerySession"])());e(R({query:s}));e(Object(d["setSearchInputBoxDisplayQuery"])({displayQuery:o}));e(M({queryFilter:n}));return e(L({fetchSuggestions:false}))});Q.propTypes={queryFilter:j};var K=Object(u["e"])("Set the query in the request which is being edited",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.query;var r=t();e(D());e(Object(p["resetScrollPosition"])());e(Object(p["setLoadingModule"])({moduleType:y["a"].relevantMessages,loading:true}));e(Object(p["setLoadingModule"])({moduleType:y["a"].recentMessages,loading:true}));e(Object(p["setLoadingModule"])({moduleType:"files",loading:true}));var i=Object(m["b"])(r,n);e(M({queryFilter:i}));return b(r,n).then(function(t){e(R({query:t}));return e(L({fetchSuggestions:true}))})});K.propTypes={query:l.a.string.isRequired};var Y=Object(u["e"])("Update a `from` filters for the search",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.memberId;var r=t();var i=B(r);var s=i&&i.from||[];Object(c["includes"])(s,n)?s=s.filter(function(e){return e!==n}):s.push(n);return e(Q({queryFilter:o()({},i,{from:s})}))});Y.propTypes={memberId:l.a.string.isRequired};var J=Object(u["e"])("Update a `in` filters for the search",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId;var r=t();var i=B(r);var s=i&&i.in||[];Object(c["includes"])(s,n)?s=s.filter(function(e){return e!==n}):s.push(n);return e(Q({queryFilter:o()({},i,{in:s})}))});J.propTypes={channelId:l.a.string.isRequired};var Z=Object(u["e"])("Set the (possibly undefined) before filter date string on the editable request",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.dateString;return e(Q({queryFilter:o()({},B(t()),{before:n})}))});Z.propTypes={dateString:l.a.string};var X=Object(u["e"])("Set the (possibly undefined) before filter date string on the editable request",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.dateString;return e(Q({queryFilter:o()({},B(t()),{after:n})}))});X.propTypes={dateString:l.a.string};var $=Object(u["e"])("Update the file type for the search",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.fileType;return e(Q({queryFilter:o()({},B(t()),{fileType:n})}))});$.propTypes={fileType:l.a.string.isRequired};var ee=Object(u["a"])("Reset search result redux state");ee.propTypes={};var te=Object(u["e"])("Reset all search related redux and displays an error message after an error is caught in the view",function(e){e(Object(f["reset"])());e(Object(d["reset"])());e(ee());e(Object(p["reset"])());e(Object(p["setErrorForAllModules"])({error:p["MODULE_ERROR_STATE"].RenderErrorCaught,loading:false}));e(Object(p["setInterfaceIsVisibleOnly"])({visible:true}));e(Object(p["setInterfaceMode"])({interfaceMode:p["interfaceModes"].SEARCH_RESULTS}))});te.propTypes={};var ae={previousRequest:void 0,request:void 0,editableRequest:{query:"",queryFilter:{from:[],in:[],after:void 0,before:void 0},queryFilterHistory:{from:[],in:[],fileType:void 0},channelObjects:{}},suggestions:{from:[],in:[]},response:void 0,lastFetchAllRequestId:""};var ne=Object(u["c"])((w={},r()(w,ee,function(){return ae}),r()(w,R,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.query;return o()({},e,{editableRequest:o()({},e.editableRequest,{query:a})})}),r()(w,M,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.queryFilter;return o()({},e,{editableRequest:o()({},e.editableRequest,{queryFilter:a,queryFilterHistory:o()({},e.editableRequest.queryFilterHistory,{from:Object(c["uniq"])(Object(c["concat"])(e.editableRequest.queryFilterHistory.from||[],a.from||[])),in:Object(c["uniq"])(Object(c["concat"])(e.editableRequest.queryFilterHistory.in||[],a.in||[]))})}),suggestions:o()({},e.suggestions,{from:Object(c["uniq"])(Object(c["concat"])(e.suggestions&&e.suggestions.from||[],a.from||[])),in:Object(c["uniq"])(Object(c["concat"])(e.suggestions&&e.suggestions.in||[],a.in||[]))})})}),r()(w,U,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels;return o()({},e,{editableRequest:o()({},e.editableRequest,{channelObjects:a})})}),r()(w,q,function(e){return o()({},e,{editableRequest:o()({},ae.editableRequest,{queryFilter:{from:[],in:[],before:void 0,after:void 0,fileType:void 0},queryFilterHistory:{from:[],in:[]}}),suggestions:{from:[],in:[]}})}),r()(w,F,function(e){return o()({},e,{previousRequest:e&&e.request,request:o()({},e.editableRequest,{requestInstanceId:Object(h["a"])()})})}),r()(w,G,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.query,n=t.module,i=t.result;return o()({},e,{response:o()({},e.response||{},{query:a,results:o()({},e.response&&e.response.results||{},r()({},n,o()({},i,{items:r()({},i.pagination.page,i.items),requestIds:{1:i.request_id}}))),filters:i.filters?i.filters:{}})})}),r()(w,H,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.module,n=t.result,i=t.page;return o()({},e,{response:o()({},e.response||{},{results:o()({},e.response&&e.response.results||{},r()({},a,o()({},e.response&&e.response.results&&e.response.results[a]||{},{items:o()({},e.response.results[a].items,r()({},n.pagination.page,n.items)),pagination:ie(e.response.results[a].pagination,n.pagination),requestIds:o()({},e.response.results[a].requestIds,r()({},i,n.request_id))})))})})}),r()(w,D,function(e){return o()({},e,{response:ae.response})}),r()(w,W,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.suggestions;return o()({},e,{suggestions:a})}),r()(w,V,function(e){return o()({},e,{suggestions:ae.suggestions})}),r()(w,z,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.id;return o()({},e,{lastFetchAllRequestId:a})}),w),ae);var re=t["default"]=ne;function ie(e,t){return o()({},e,{last:t.last,total_count:t.total_count})}var oe=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest});var se=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilterHistory});var le=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.from});var ce=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.in});var ue=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.after});var de=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.before});var pe=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.channelObjects});var fe=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.fileType});var me=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.request});var he=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.previousRequest});var ve=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.previousRequest&&e.searchResults.previousRequest.query});var ge=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.response});var be=Object(u["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.module;return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.results&&e.searchResults.response.results[a]});var _e=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.query});var ye=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.lastFetchAllRequestId});var ke=Object(u["d"])(function(e){return e&&e.searchResults&&e.searchResults.suggestions});var Oe=Object(u["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.module,n=t.page,r=void 0===n?1:n;return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.results&&e.searchResults.response.results[a]&&e.searchResults.response.results[a].requestIds&&e.searchResults.response.results[a].requestIds[r]})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(2);var r=a(26);var i=a(12);var o=a(19);var s=a(78);var l=a(16);var c=a(263);var u=a(797);var d=a(351);var p=a(1114);var f=a(5);var m=a.n(f);var h=a(7);var v=a.n(h);var g=a(8);var b=a.n(g);var _=a(117);var y=a(700);var k=function(e){b()(t,e);function t(){m()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Promise.resolve({emojiMap:Object(_["b"])(),searchMap:Object(n["keyBy"])(Object(_["b"])(),"name_with_colons")})},3e5))}return t}(y["a"]);var O=new k;var w=a(47);var E=a(63);a.d(t,"g",function(){return j});a.d(t,"j",function(){return S});a.d(t,"i",function(){return I});a.d(t,"h",function(){return N});a.d(t,"d",function(){return A});a.d(t,"e",function(){return R});a.d(t,"a",function(){return M});a.d(t,"b",function(){return x});a.d(t,"f",function(){return P});a.d(t,"c",function(){return D});function C(e){return Object(E["a"])()||"modern_searcher"===Object(d["getGroupForUser"])(e,"sli_search_modern_searcher")}function j(e,t,a,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var o=function e(t){return!t.deleted&&!(t.model_ob.is_mpim&&t.model_ob.is_archived)&&!(t.model_ob.is_group&&t.model_ob.is_archived)};if(C(t))return e(Object(u["a"])({query:a,options:Object(n["assign"])({entities:{members:{includeSlackbot:true,includeTeambot:true,includeSelf:true,includeDeleted:true},channels:{includeArchived:false,includeMpims:true,includeFromAnotherTeam:false,searchPreviousNames:false},views:false,teams:false},allowEmptyQuery:true,sort:{frecency:true},returnMetadata:true,tiered:false,limit:r},i)})).then(function(e){return e.map(function(e){var t=e.item,a=e.frecencyScore;return{model_ob:t,score:a}}).filter(o)});return Object(c["a"])(a,{members:{include_slackbot:true,include_self:true,include_deleted:true},channels:{include_archived:!!(i.entities&&i.entities.channels&&i.entities.channels.includeArchived)},enterprise_channels:i.legacy&&i.legacy.enterprise_channels||false,groups:true,mpims:true,all_mpims:true,limit:r,sort:{allow_empty_query:true,search_previous_channel_names:!!(i.entities&&i.entities.channels&&i.entities.channels.searchPreviousNames)},tiered:!!i.tiered,views:!!(i.entities&&i.entities.views),teams:!!(i.entities&&i.entities.teams)}).then(function(e){return Object(n["filter"])(e,o)})}function S(e,t,a,r){if(C(t))return e(Object(u["a"])({query:a,options:{entities:{members:{includeSlackbot:true,includeTeambot:true,includeSelf:true,includeDeleted:true}},allowEmptyQuery:true,sort:{frecency:true},returnMetadata:true,limit:r}})).then(function(e){return e.filter(function(e){return!e.item.deleted}).map(function(e){var t=e.item,a=e.frecencyScore;return{model_ob:t,score:a}})});return Object(c["a"])(a,{members:{include_slackbot:true,include_self:true,include_deleted:true},limit:r,sort:{allow_empty_query:true}}).then(function(e){return Object(n["filter"])(e,function(e){return!e.deleted})})}function I(e,t,a){var r=t?t.toLowerCase():"";var i=function e(t,a){return(t||"").toLowerCase().includes(a.toLowerCase())};return Promise.resolve(Object(n["map"])(Object(n["filter"])(Object.values(Object(s["getAllFiles"])(e)||{}).slice(0,512),function(e){return e.mimetype&&!e.mimetype.startsWith("image")&&i(e.title,r)}).slice(0,a),function(e){return{model_ob:e,score:1}}))}function T(e,t){return O.get().then(function(a){return Object(p["a"])({searchQuery:e,searchMap:a.searchMap,emojiMap:a.emojiMap}).slice(0,t).map(function(e){return{score:49,model_ob:e.name_with_colons,canLog:false}})})}function N(e,t){return Promise.resolve(Object(n["filter"])(Object(n["values"])(w["c"]),function(t){return Object(n["startsWith"])(t,e)||Object(n["startsWith"])(w["d"][t],e)}).slice(0,t).map(function(e){return{model_ob:e,score:50,canLog:true}}))}function A(e,t){var a=Object(r["getMemberById"])(e,t);if(!a||a.isNonExistent)return null;return a}function R(e,t){return Object(r["getMemberByName"])(e,t)}function M(e,t){return Object(o["getChannelById"])(e,t)}function x(e,t){return Object(o["getChannelByName"])(e,t)}function P(e,t){return Object(l["getPrefCompliantMemberNameById"])(e,t)}function D(e,t){return Object(i["getChannelType"])(e,t)}},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return r});a.d(t,"a",function(){return i});var n=a(13);var r=Object(n["c"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(n["c"])("TS.enterprise.actions.actions",function(){return null})},,function(e,t,a){"use strict";a.r(t);var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(4);var l=a(200);var c=a(172);var u=a(0);var d=a.n(u);var p=a(25);var f=a(22);var m=Object(f["a"])("Fetch Available Plans",function(e,t,a){return e(Object(p["a"])({method:"retail.plans",args:a})).then(function(e){return Object(c["f"])(e.plans)})});m.propTypes=d.a.object;var h=Object(f["a"])("Fetch Available Plans",function(e,t,a){var n=a.productId,r=a.country,i=a.postalCode,s=a.street,l=a.isBusinessPurchase,u=a.isInvoice,d=a.numInvoiceSeats,f=a.isFinalReview;var m={product_id:n,is_final_review:f};f||(m=o()({},m,{country:r,street1:s,zip:i,is_business:l}));u&&(m=o()({},m,{requested_invoice_seats:d}));return e(Object(p["a"])({method:"retail.cost",args:m})).then(function(e){return Object(c["e"])(e.plan_cost)})});h.propTypes={productId:d.a.string,country:d.a.string,postalCode:d.a.string,isBusinessPurchase:d.a.bool,isInvoice:d.a.bool,numInvoiceSeats:d.a.number,isFinalReview:d.a.bool};var v=a(339);var g={EXPIRED_COST_REQUEST:"EXPIRED_COST_REQUEST"};var b=Object(s["a"])("Switch currently active plan");b.propTypes=d.a.object;var _=Object(s["a"])("Successfully fetched available plans");_.propTypes=d.a.object;var y=Object(s["a"])("Successfully fetched cost for current plan");y.propTypes=d.a.object;var k=Object(s["a"])("Received an API error");k.propTypes=null;var O=Object(s["a"])("Plans and cost data loaded");O.propTypes=null;var w=Object(s["a"])("Set Plan Level");w.propTypes=d.a.string;var E=Object(s["a"])("Set Payment Method");E.propTypes=d.a.string;var C=Object(s["a"])("Update Is Plans Data Loading");C.propTypes=d.a.object;var j=Object(s["a"])("Update Is Cost Data Loading");j.propTypes=d.a.object;var S=0;function I(e){return function(t,a){return new Promise(function(n,r){var i=a();var s=Object(l["p"])(i);var c=Object(v["b"])(i);var u=Object(l["g"])(i);t(j({isCostDataLoading:true}));var d=parseInt(Object(v["m"])(i).numberOfUsers,10)||0;var p=e.isFinalReview||false;var f=Object(l["x"])(i,s,c,u,d);if(f&&!p)window.setTimeout(function(){var e=Object(l["A"])(i,s,c,u,d);t(y({activePlanCost:e,companyAddress:c,isInvoice:u,numInvoiceSeats:d}));t(j({isCostDataLoading:false}));n()},250);else{var m=c.country,b=c.street,_=c.postalCode,O=c.isBusinessPurchase;var w={productId:s,country:m,postalCode:_,street:b,isBusinessPurchase:O,isInvoice:u,numInvoiceSeats:d,isFinalReview:p};var E=S+1;S=E;t(h(w)).then(function(e){if(S===E){t(j({isCostDataLoading:false}));t(y(o()({},e,{companyAddress:c,isInvoice:u,numInvoiceSeats:d})));n()}else r(new Error(g.EXPIRED_COST_REQUEST))}).catch(function(){return t(k())})}})}}function T(e){return function(t,a){t(C({isPlansDataLoading:true}));var n=Object(v["c"])(a());t(m({country:n})).then(function(a){Promise.all([t(_(a)),t(I(e)),t(C({isPlansDataLoading:false}))]).then(function(){return t(O())}).catch(function(e){e.message!==g.EXPIRED_COST_REQUEST&&t(k())})}).catch(function(){return t(k())})}}T.propTypes={country:d.a.string};var N=function e(t,a,n){if(a===n)return;t(I({isFinalReview:false}))};var A=Object(s["e"])("Async thunk to change active plan initiated",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=Object(l["p"])(t());e(b(a));var r=Object(l["p"])(t());N(e,n,r)});A.propTypes={term:d.a.string,currency:d.a.string};function R(e){return function(t,a){var n=Object(l["p"])(a());t(w(e));var r=Object(l["p"])(a());N(t,n,r)}}function M(e){return function(t,a){var n=Object(l["p"])(a());t(E(e));var r=Object(l["p"])(a());N(t,n,r)}}var x;var P={activeCurrency:null,activeTerm:c["c"].yearly,activePlanLevel:null,activePaymentMethod:c["a"].CREDIT_CARD,apiError:false,availablePlans:{},activePlanCost:{},cachedCost:{},isPlansAndCostDataLoaded:false,isPlansDataLoading:false,isCostDataLoading:false};var D=Object(s["c"])((x={},r()(x,b,function(e,t){if(t.currency){var a=Object(l["b"])(e).includes(t.currency);if(!a)return e}else if(t.term&&!t.term===c["c"].monthly&&!t.term===c["c"].monthly)return e;var n=t.currency?t.currency:e.activeCurrency;var r=t.term?t.term:e.activeTerm;return o()({},e,{activeCurrency:n,activeTerm:r})}),r()(x,_,function(e,t){var a=Object.keys(t.availablePlans)[0];var n=o()({},e,{activeCurrency:a,availablePlans:o()({},t.availablePlans),apiError:false});return n}),r()(x,y,function(e,t){var a=t.activePlanCost,n=t.companyAddress,i=t.isInvoice,s=t.numInvoiceSeats;var l=Object(c["d"])(a.id,n,i,s);var u=o()({},e,{activePlanCost:o()({},e.activePlanCost,t.activePlanCost),cachedCost:o()({},e.cachedCost,r()({},l,t.activePlanCost)),apiError:false});return u}),r()(x,k,function(e){var t=o()({},e,{apiError:true});return t}),r()(x,O,function(e){var t=o()({},e,{isPlansAndCostDataLoaded:true});return t}),r()(x,w,function(e,t){var a=o()({},e,{activePlanLevel:t});return a}),r()(x,E,function(e,t){var a=o()({},e,{activePaymentMethod:t});return a}),r()(x,C,function(e,t){var a=o()({},e,{isPlansDataLoading:t.isPlansDataLoading});return a}),r()(x,j,function(e,t){var a=o()({},e,{isCostDataLoading:t.isCostDataLoading});return a}),x),P);var F=D;a.d(t,"getActivePlan",function(){return l["a"]});a.d(t,"getAvailableCurrencies",function(){return l["b"]});a.d(t,"selectAvailableCurrencies",function(){return l["q"]});a.d(t,"selectActiveProductId",function(){return l["p"]});a.d(t,"selectActivePlanCostPerTerm",function(){return l["j"]});a.d(t,"selectActivePlanLevel",function(){return l["l"]});a.d(t,"selectActivePlanTerm",function(){return l["o"]});a.d(t,"selectActivePlanPaymentMethod",function(){return l["n"]});a.d(t,"selectActivePlanIsYearly",function(){return l["k"]});a.d(t,"selectActivePlanMonthsCount",function(){return l["m"]});a.d(t,"selectActiveCurrency",function(){return l["i"]});a.d(t,"getTermPlanForActiveCurrency",function(){return l["d"]});a.d(t,"selectCostPerTermForYearlyPlan",function(){return l["t"]});a.d(t,"selectCostPerTermForMonthlyPlan",function(){return l["s"]});a.d(t,"selectIsPlansAndCostDataLoaded",function(){return l["y"]});a.d(t,"selectIsPlansOrCostDataLoading",function(){return l["z"]});a.d(t,"selectBillableActiveUsers",function(){return l["r"]});a.d(t,"selectPaidSeats",function(){return l["D"]});a.d(t,"isZeroRealActiveUsers",function(){return l["h"]});a.d(t,"selectInactiveUsers",function(){return l["w"]});a.d(t,"selectTotalUsers",function(){return l["K"]});a.d(t,"selectSubtotal",function(){return l["E"]});a.d(t,"selectTax",function(){return l["F"]});a.d(t,"selectCreditsApplied",function(){return l["u"]});a.d(t,"selectCurrentTeamCredits",function(){return l["v"]});a.d(t,"selectTeamCreditsRemaining",function(){return l["G"]});a.d(t,"selectTotalRecurring",function(){return l["I"]});a.d(t,"selectTotalDueToday",function(){return l["H"]});a.d(t,"selectTotalRecurringTax",function(){return l["J"]});a.d(t,"getQuotedTermEndDate",function(){return l["c"]});a.d(t,"selectIsCostAvailableForPlan",function(){return l["x"]});a.d(t,"selectLocalCostForCurrentPlan",function(){return l["A"]});a.d(t,"selectMinInvoiceSeats",function(){return l["C"]});a.d(t,"selectMaxInvoiceSeats",function(){return l["B"]});a.d(t,"isAPIError",function(){return l["e"]});a.d(t,"isCostValid",function(){return l["f"]});a.d(t,"isInvoiceActivePaymentMethod",function(){return l["g"]});a.d(t,"switchPlans",function(){return b});a.d(t,"plansFetchSuccess",function(){return _});a.d(t,"costFetchSuccess",function(){return y});a.d(t,"setErrorState",function(){return k});a.d(t,"plansAndCostDataLoaded",function(){return O});a.d(t,"setPlanLevel",function(){return w});a.d(t,"setPaymentMethod",function(){return E});a.d(t,"updateIsPlansDataLoading",function(){return C});a.d(t,"updateIsCostDataLoading",function(){return j});a.d(t,"fetchCostForCurrentPlan",function(){return I});a.d(t,"fetchPlansAndCostData",function(){return T});a.d(t,"changeActivePlan",function(){return A});a.d(t,"updatePlanLevel",function(){return R});a.d(t,"updateActivePlanPaymentMethod",function(){return M});var L=t["default"]=F},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});a.d(t,"b",function(){return r});var n;(function(e){e[e["NONE"]=0]="NONE";e[e["NO_MENTIONS"]=1]="NO_MENTIONS";e[e["BAD_ARGUMENTS"]=2]="BAD_ARGUMENTS";e[e["NO_DISPLAY_OVERRIDE"]=3]="NO_DISPLAY_OVERRIDE";e[e["NO_NOTIFICATIONS_OVERRIDE"]=4]="NO_NOTIFICATIONS_OVERRIDE";e[e["REPLY_MESSAGE"]=5]="REPLY_MESSAGE";e[e["NOT_REPLY_MESSAGE"]=6]="NOT_REPLY_MESSAGE";e[e["JOIN_LEAVE_MESSAGE"]=7]="JOIN_LEAVE_MESSAGE";e[e["BOT_MESSAGE"]=8]="BOT_MESSAGE";e[e["APP_MESSAGE"]=9]="APP_MESSAGE";e[e["FROM_CURRENT_USER"]=10]="FROM_CURRENT_USER";e[e["MUTED_CHANNEL"]=11]="MUTED_CHANNEL";e[e["USER_IN_DND"]=12]="USER_IN_DND";e[e["SILENT_PREFERENCE"]=13]="SILENT_PREFERENCE";e[e["PERMISSION_DENIED"]=14]="PERMISSION_DENIED";e[e["ACTIVE_VIEW_VISIBLE"]=15]="ACTIVE_VIEW_VISIBLE";e[e["LESS_RELEVANT_ORG_TEAM"]=16]="LESS_RELEVANT_ORG_TEAM";e[e["OVERSIZED_MENTION"]=17]="OVERSIZED_MENTION";e[e["REDUNDANT_SOCKET_EVENT"]=18]="REDUNDANT_SOCKET_EVENT";e[e["ALREADY_SEEN_REPLY"]=19]="ALREADY_SEEN_REPLY";e[e["ALREADY_SHOWN"]=20]="ALREADY_SHOWN"})(n||(n={}));function r(e,t,a){var r=t||"missing model";switch(e){case n.BAD_ARGUMENTS:return"Missing message or model object";case n.NO_DISPLAY_OVERRIDE:return"'no_display' was set on the notification";case n.NO_NOTIFICATIONS_OVERRIDE:return"'no_notifications' was set on the notification";case n.JOIN_LEAVE_MESSAGE:return"The message was a join or leave message";case n.BOT_MESSAGE:return"The message was a bot message without a mention";case n.APP_MESSAGE:return"The message was an app message without a mention";case n.FROM_CURRENT_USER:return"The message is from the current user";case n.MUTED_CHANNEL:return"Channel ("+r+") is muted";case n.USER_IN_DND:return"The user is in Do Not Disturb";case n.SILENT_PREFERENCE:return"The user has their notification preference set to 'nothing'";case n.PERMISSION_DENIED:return"The user did not grant permission to show notifications";case n.ACTIVE_VIEW_VISIBLE:return"The window is focused and the notifying channel ("+r+") is visible";case n.LESS_RELEVANT_ORG_TEAM:return"Shared channel ("+r+") is in a less recently selected org team";case n.OVERSIZED_MENTION:return"Over-sized channel mention in channel ("+r+")";case n.REDUNDANT_SOCKET_EVENT:return"Message ("+a+") is greater than latest in store, treating as duplicate";case n.ALREADY_SEEN_REPLY:return"Message ("+a+") is less than or equal to the 'last_read' in the thread";case n.ALREADY_SHOWN:return"Message ("+a+") has already shown a notification";default:return null}}},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return l});a.d(t,"b",function(){return u});a.d(t,"a",function(){return d});a.d(t,"e",function(){return p});a.d(t,"f",function(){return m});a.d(t,"d",function(){return h});var n=a(9);var r=a.n(n);var i=a(2);var o=a.n(i);var s={vat:"vat",sales_tax:"sales_tax"};var l={monthly:"monthly",yearly:"yearly"};var c={monthly:1,yearly:12};var u={standard:{id:"std",name:"standard"},plus:{id:"plus",name:"plus"}};var d={CREDIT_CARD:"creditCard",INVOICE:"invoice"};var p=function e(t){var a=Object(i["isEmpty"])(t.tax)?{}:{value:t.tax.sales_tax_amt,type:t.tax.is_vat?s.vat:s.sales_tax};var n=t.credits?{currentCredits:t.credits.total_credits,creditsRemaining:t.credits.credits_remaining,creditsApplied:t.credits.credits_applied}:{};var r=t.billable_users?{billableActiveUsers:t.billable_users.billable_active_users,inactiveUsers:t.billable_users.inactive_users,zeroActiveUsers:t.billable_users.zero_active_users}:{};var o={id:t.product_id,subtotal:t.subtotal,billableUsers:r,tax:a,credits:n,totalRecurring:t.total_recurring,totalRecurringTax:t.recurring_tax_amt,totalDueToday:t.total_due_today,quotedTermEnd:t.quoted_term_end,paidSeats:t.paid_seats};return{activePlanCost:o}};var f=function e(t){var a="12m"===t.term?l.yearly:l.monthly;var n="12m"===t.term?c.yearly:c.monthly;return{id:t.product_id,term:a,currency:t.currency,level:t.level,lengthOfTermInMonths:n,costPerMonth:t.cost_per_m,costPerTerm:t.cost_per_term,isInvoice:t.is_inv||false,maxInvoiceSeats:t.max_invoice_seats,minInvoiceSeats:t.min_invoice_seats}};var m=function e(t){var a={};Object.keys(t).forEach(function(e){var n,i,o,s,c;var p=t[e];a[e]=(c={},r()(c,u.standard.id,(i={},r()(i,d.CREDIT_CARD,(n={},r()(n,l.monthly,f(p.std_m)),r()(n,l.yearly,f(p.std_y)),n)),r()(i,d.INVOICE,r()({},l.yearly,f(p.inv_std_y))),i)),r()(c,u.plus.id,(s={},r()(s,d.CREDIT_CARD,(o={},r()(o,l.monthly,f(p.plus_m)),r()(o,l.yearly,f(p.plus_y)),o)),r()(s,d.INVOICE,r()({},l.yearly,f(p.inv_plus_y))),s)),c)});return{availablePlans:a}};var h=function e(t,a,n,r){var i=a.country,o=a.street,s=a.postalCode,l=a.isBusinessPurchase;return[t,i,o,s,l,n,r].join("-")}},,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setSearchInputBoxDisplayQuery",function(){return h});a.d(t,"getSearchInputBoxUserQuery",function(){return b});a.d(t,"getSearchInputBoxDisplayQuery",function(){return _});a.d(t,"setSearchInputBoxUserQuery",function(){return y});a.d(t,"searchInputChanged",function(){return k});a.d(t,"reset",function(){return O});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(268);var d=a(736);var p=a(37);var f=a(3267);var m;var h=Object(c["a"])("Set the search input box display query");h.propTypes={displayQuery:l.a.string.isRequired};var v=Object(c["a"])("Set the user query associated with the search input box without any side effects");v.propTypes={userQuery:l.a.string.isRequired};var g=Object(c["a"])("Set the user query and display query associated with the search input box without any side effects");g.propTypes={userQuery:l.a.string.isRequired,displayQuery:l.a.string.isRequired};var b=Object(c["d"])(function(e){return e&&e.searchInputBox&&e.searchInputBox.userQuery});var _=Object(c["d"])(function(e){return e&&e.searchInputBox&&e.searchInputBox.displayQuery});var y=Object(c["e"])("Set the user query and display query associated with the search input box from a user query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.textyString;var r=t();var i=Object(d["c"])(r,n);e(g({displayQuery:n,userQuery:i}));e(Object(p["setInterfaceMode"])({interfaceMode:p["interfaceModes"].EDIT}));e(Object(u["setSearchAutocompleteEchoQuery"])({requestQuery:i}));e(Object(u["setSearchAutocompleteSelection"])({selectedIndex:i?0:null}))});y.propTypes={textyString:l.a.string.isRequired};var k=Object(c["e"])("The search input has changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.textyString;var r=t();if(n!==_(r)){Object(f["a"])(r)&&!Object(u["isSearchAutocompleteOpen"])(r)&&e(Object(u["openSearchAutocomplete"])());e(y({textyString:n}))}});k.propTypes={textyString:l.a.string.isRequired};var O=Object(c["a"])("Reset search input box redux state");O.propTypes={};var w={displayQuery:"",userQuery:""};var E=Object(c["c"])((m={},r()(m,O,function(){return w}),r()(m,h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.displayQuery;return o()({},e,{displayQuery:a})}),r()(m,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.userQuery;return o()({},e,{userQuery:a,displayQuery:a})}),r()(m,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.userQuery,n=t.displayQuery;return o()({},e,{userQuery:a,displayQuery:n})}),m),w);t["default"]=E},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return v});a.d(t,"c",function(){return g});a.d(t,"b",function(){return b});var n=a(3);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(4);var l=a(670);var c=a(795);var u=a(796);var d=a(21);var p=a(240);var f=a(17);var m="IMPROVED_SEARCH";var h="search_sort";var v={relevantMessages:"relevantMessages",recentMessages:"recentMessages"};var g=Object(s["e"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.messageSort;Object(f["a"])({getState:t}).info(m,"Set message sort method. messageSort: "+n);e(Object(p["c"])({pref:h,value:n}));var i=t();e(Object(u["a"])(r()({method:"set_sort_"+(n===v.relevantMessages?"score":"timestamp"),request_id:Object(l["a"])(i)},Object(c["a"])(i))))});g.propTypes={method:o.a.string};function b(e){var t=Object(d["getUserPref"])(e,h);"timestamp"===t&&(t=v.recentMessages);"score"===t&&(t=v.relevantMessages);return t||v.relevantMessages}},,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return s});a.d(t,"b",function(){return c});a.d(t,"q",function(){return u});a.d(t,"p",function(){return d});a.d(t,"j",function(){return p});a.d(t,"l",function(){return f});a.d(t,"o",function(){return m});a.d(t,"n",function(){return h});a.d(t,"k",function(){return v});a.d(t,"m",function(){return g});a.d(t,"i",function(){return b});a.d(t,"d",function(){return _});a.d(t,"t",function(){return y});a.d(t,"s",function(){return k});a.d(t,"y",function(){return O});a.d(t,"z",function(){return w});a.d(t,"r",function(){return C});a.d(t,"D",function(){return j});a.d(t,"h",function(){return S});a.d(t,"w",function(){return I});a.d(t,"K",function(){return T});a.d(t,"E",function(){return N});a.d(t,"F",function(){return A});a.d(t,"u",function(){return R});a.d(t,"v",function(){return M});a.d(t,"G",function(){return x});a.d(t,"I",function(){return P});a.d(t,"H",function(){return D});a.d(t,"J",function(){return F});a.d(t,"c",function(){return L});a.d(t,"x",function(){return U});a.d(t,"A",function(){return q});a.d(t,"C",function(){return G});a.d(t,"B",function(){return H});a.d(t,"e",function(){return W});a.d(t,"f",function(){return V});a.d(t,"g",function(){return z});var n=a(4);var r=a(2);var i=a.n(r);var o=a(172);var s=function e(t){if(!t||!t.availablePlans)return null;var a=t.availablePlans;var n=t.activeCurrency;var r=t.activeTerm;var i=t.activePlanLevel;var s=t.activePaymentMethod;s===o["a"].INVOICE&&r===o["c"].monthly&&(s=o["a"].CREDIT_CARD);if(!a[n]||!a[n][i]||!a[n][i][s]||!a[n][i][s][r])return null;return a[n][i][s][r]};var l=Object(n["d"])(function(e){if(!e||!e.pricingPlans)return null;return s(e.pricingPlans)});var c=function e(t){if(!t||!t.availablePlans)return[];return Object.keys(t.availablePlans)};var u=Object(n["d"])(function(e){if(!e||!e.pricingPlans)return[];return c(e.pricingPlans)});var d=Object(n["d"])(function(e){var t=l(e);if(!t||!t.id)return"";return t.id});var p=Object(n["d"])(function(e){var t=l(e);if(!t||!t.costPerTerm)return null;return t.costPerTerm});var f=Object(n["d"])(function(e){var t=l(e);if(!t||!t.level)return"";return t.level});var m=Object(n["d"])(function(e){var t=l(e);if(!t||!t.term)return"";return t.term});var h=Object(n["d"])(function(e){var t=l(e);if(!t)return null;return t.isInvoice?o["a"].INVOICE:o["a"].CREDIT_CARD});var v=Object(n["d"])(function(e){var t=l(e);if(!t||!t.term)return null;return t.term===o["c"].yearly});var g=Object(n["d"])(function(e){var t=l(e);if(!t||!t.lengthOfTermInMonths)return null;return t.lengthOfTermInMonths});var b=Object(n["d"])(function(e){var t=l(e);if(!t||!t.currency)return"";return t.currency});var _=function e(t,a){if(!t||!t.availablePlans)return null;var n=t.availablePlans;var r=t.activeCurrency;var i=t.activePlanLevel;var o=t.activePaymentMethod;if(!n[r]||!n[r][i]||!n[r][i][o])return null;return n[r][i][o][a]};var y=Object(n["d"])(function(e){if(!e||!e.pricingPlans)return null;var t=_(e.pricingPlans,o["c"].yearly);if(!t)return null;return t.costPerTerm});var k=Object(n["d"])(function(e){if(!e||!e.pricingPlans)return null;var t=_(e.pricingPlans,o["c"].monthly);if(!t)return null;return t.costPerTerm});var O=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansAndCostDataLoaded};var w=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansDataLoading||t.pricingPlans.isCostDataLoading};var E=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.activePlanCost)return null;return t.pricingPlans.activePlanCost};var C=Object(n["d"])(function(e){var t=E(e);if(!t||!t.billableUsers)return null;return t.billableUsers.billableActiveUsers});var j=Object(n["d"])(function(e){var t=E(e);if(!t||!t.paidSeats)return null;return t.paidSeats});var S=Object(n["d"])(function(e){var t=E(e);if(!t||!t.billableUsers)return null;return t.billableUsers.zeroActiveUsers});var I=Object(n["d"])(function(e){var t=E(e);if(!t||!t.billableUsers)return null;return t.billableUsers.inactiveUsers});var T=Object(n["d"])(function(e){var t=E(e);if(!t||!t.billableUsers)return null;var a=S(e)?0:C(e);return a+I(e)});var N=Object(n["d"])(function(e){var t=E(e);if(!t)return null;return t.subtotal});var A=Object(n["d"])(function(e){var t=E(e);if(!t||Object(r["isEmpty"])(t.tax))return null;return t.tax});var R=Object(n["d"])(function(e){var t=E(e);if(!t||!t.credits)return null;return t.credits.creditsApplied});var M=Object(n["d"])(function(e){var t=E(e);if(!t||!t.credits)return null;return t.credits.currentCredits});var x=Object(n["d"])(function(e){var t=E(e);if(!t||!t.credits)return null;return t.credits.creditsRemaining});var P=Object(n["d"])(function(e){var t=E(e);if(!t)return null;return t.totalRecurring});var D=Object(n["d"])(function(e){var t=E(e);if(!t)return null;return t.totalDueToday});var F=Object(n["d"])(function(e){var t=E(e);if(!t)return null;return t.totalRecurringTax});var L=Object(n["d"])(function(e){var t=E(e);if(!t)return null;return t.quotedTermEnd});var B=function e(t){if(!t||!t.cachedCost)return null;return t.cachedCost};var U=Object(n["d"])(function(e,t,a,n,r){if(!e||!e.pricingPlans)return null;var i=B(e.pricingPlans);var s=Object(o["d"])(t,a,n,r);if(!i||!i[s])return false;return true});var q=Object(n["d"])(function(e,t,a,n,r){if(!e||!e.pricingPlans)return null;var i=B(e.pricingPlans);var s=Object(o["d"])(t,a,n,r);if(!i||!i[s])return null;return i[s]});var G=Object(n["d"])(function(e){var t=l(e);if(!t||!t.isInvoice)return null;var a=C(e);if(a>t.minInvoiceSeats)return a;return t.minInvoiceSeats});var H=Object(n["d"])(function(e){var t=l(e);if(!t||!t.isInvoice)return null;return t.maxInvoiceSeats});var W=Object(n["d"])(function(e){return e&&e.pricingPlans&&e.pricingPlans.apiError});var V=Object(n["d"])(function(e){if(!e||!e.pricingPlans)return false;if(W(e))return false;var t=d(e);var a=E(e);return t===a});var z=Object(n["d"])(function(e){var t=l(e);if(!t)return false;return t.isInvoice||false})},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(9);var o=a.n(i);var s=a(2);var l=a(4);var c=a(317);var u=a(30);var d=a(172);var p=a(0);var f=a.n(p);var m=a(25);var h=a(22);var v=Object(h["a"])("Fetch States and Countries",function(e){return e(Object(m["a"])({method:"payments.billing.addresses.locations"})).then(function(e){if(Object(s["includes"])(Object(s["keys"])(e.vat_countries),u["e"].UNITED_KINGDOM)){e.vat_countries[u["e"].UNITED_KINGDOM_UK]=e.vat_countries[u["e"].UNITED_KINGDOM];delete e.vat_countries[u["e"].UNITED_KINGDOM]}return{countries:e.countries||[],usStates:e.us_states||{},canadaStates:e.canada_states||{},vatCountries:e.vat_countries||{},abnCountries:e.abn_countries||{},taxableZipcodes:e.taxable_zipcodes||[]}})});var g=Object(h["a"])("Fetch Company Address",function(e){return e(Object(m["a"])({method:"payments.billing.addresses.get"})).then(function(e){var t=u["c"].COMPANY_NAME,a=u["c"].STREET,n=u["c"].SUITE,r=u["c"].CITY,i=u["c"].REGION,o=u["c"].POSTAL_CODE,s=u["c"].COUNTRY,l=u["c"].IS_BUSINESS_PURCHASE,c=u["c"].IS_VAT_AVAILABLE,d=u["c"].VAT_ID,p=u["c"].ABN_ID;var f=null===e.is_business?l:e.is_business;var m=null===e.waiting_for_vat?c:!e.waiting_for_vat;return{companyName:e.company_name||t,street:e.street1||a,suite:e.street2||n,city:e.city||r,postalCode:e.zip||o,region:e.state||i,country:e.country||s,isBusinessPurchase:f,isVatIdAvailable:m,vatId:e.vat_id||d,abnId:e.abn_id||p}})});var b=Object(h["a"])("Validate and Persist Company Address",function(e,t,a){var n={abn_id:a.abnId,city:a.city,company_name:a.companyName,country:a.country,is_business:a.isBusinessPurchase,state:a.region,street1:a.street,street2:a.suite,vat_id:a.vatId,waiting_for_vat:!a.isVatIdAvailable,zip:a.postalCode};return e(Object(m["a"])({method:"payments.billing.addresses.validateAndSet",args:n})).then(function(e){return e})});b.propTypes=f.a.object;var _=Object(h["a"])("Submit information from the payment form to the server to complete the purchase of a paid Slack plan",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.tokenId,r=a.productId,i=a.isNewCreditCard;return e(Object(m["a"])({method:"payments.checkout.charge",args:{stripe_token:n,product_id:r,is_new_card:i}})).then(function(e){return e}).catch(function(e){throw e})});_.propTypes={tokenId:f.a.string,productId:f.a.string,isNewCreditCard:f.a.bool};var y=Object(h["a"])("Submit information from the checkout invoice form to the server to complete the purchase of a paid Slack plan via invoice",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.numUsers,r=a.productId,i=a.billingContacts,o=a.purchaseOrderNumber;return e(Object(m["a"])({method:"payments.checkout.createInvoice",args:{num_users:n,product_id:r,billing_contacts:i,po_number:o}})).then(function(e){return e}).catch(function(e){throw e})});y.propTypes={numUsers:f.a.string,productId:f.a.string,billingContacts:f.a.string,purchaseOrderNumber:f.a.string};var k=Object(h["a"])("Fetch Stripe Customer",function(e,t,a){return e(Object(m["a"])({method:"payments.stripe.getCustomer",args:{country:a}})).then(function(e){return e})});k.propTypes=f.a.string;var O=Object(h["a"])("Fetch Self User Data",function(e){return e(Object(m["a"])({method:"users.info",args:{self:true}})).then(function(e){return e})});var w=Object(h["a"])("Checks If User Can Access Checkout",function(e){return e(Object(m["a"])({method:"payments.checkout.canShowCheckoutV2"})).then(function(e){return e})});var E=a(11);var C=a(460);var j=a(718);var S=a(200);var I=a(339);var T=f.a.shape({companyName:f.a.string,street:f.a.string,suite:f.a.string,city:f.a.string,postalCode:f.a.string,region:f.a.string,country:f.a.string,isBusinessPurchase:f.a.bool,isVatIdAvailable:f.a.bool,vatId:f.a.string,abnId:f.a.string,validationErrors:f.a.object,isValidationActive:f.a.bool});var N=Object(l["a"])("Checkout Address Form Data Loaded");N.propTypes=f.a.object;var A=Object(l["a"])("Update Company Address Field");A.propTypes=f.a.object;var R=Object(l["a"])("Company Address Validated");R.propTypes=f.a.object;var M=Object(l["a"])("Company Address Form Field Validated");M.propTypes=f.a.object;var x=Object(l["a"])("Clear Company Address Form Field Validation Errors");x.propTypes=f.a.object;var P=Object(l["a"])("Credit Card Data Changed");P.propTypes=f.a.object;var D=Object(l["a"])("Credit Card Token Created");D.propTypes=f.a.object;var F=Object(l["a"])("Toggles if Credit Card Token is being created or not");F.propTypes=f.a.bool;var L=Object(l["a"])("Upgrade Response Received");L.propTypes=f.a.object;var B=Object(l["a"])("Stripe Customer Data Loaded");B.propTypes=f.a.object;var U=Object(l["a"])("Update Stripe API Key");U.propTypes=f.a.object;var q=Object(l["a"])("Update Invoice Data Field");q.propTypes=f.a.object;var G=Object(l["a"])("Invoice Data Validated");G.propTypes=f.a.object;var H=Object(l["a"])("Invoice Form Field Validated");H.propTypes=f.a.object;var W=Object(l["a"])("Update Credit Card Selected");W.propTypes=f.a.object;var V=Object(l["a"])("Update Credit Card Form Error");V.propTypes=f.a.object;var z=Object(l["a"])("Clear Any Existing Credit Card Form Error");z.propTypes=null;var Q=Object(l["a"])("Clear Any Existing Payment Status or Errors");Q.propTypes=null;var K=Object(l["a"])("Self User Data Loaded");K.propTypes=f.a.object;var Y=Object(l["a"])("Update Is Processing Payment");Y.propTypes=f.a.object;var J=Object(l["a"])("Update Payment Method Selected");J.propTypes=f.a.string;var Z=Object(l["a"])("Update Show App Disconnect Dialog");Z.propTypes=f.a.object;var X=Object(l["a"])("Update Active Checkout Step");X.propTypes=f.a.object;function $(){return function(e){Promise.all([e(v()),e(g())]).then(function(t){e(N({statesAndCountries:t[0],companyAddress:t[1]}))})}}function ee(e){return function(t,a){return new Promise(function(n){var r=Object(E["isFeatureEnabled"])(a(),"feature_checkout_flow_translations");var i=Object(I["e"])(a());var o=Object(C["g"])(e.companyAddress,r,i.vatCountries);if(!Object(s["isEmpty"])(o)){t(R(o));n({isCheckoutFormValid:false});return}t(R(o));t(b(e.companyAddress)).then(function(){n({isCheckoutFormValid:true})}).catch(function(e){var a=e.data||{};var i=a.response_code;var o=a.error;var l=a.format_valid;var c=Object(C["a"])(i,o,l,r);if(!Object(s["isEmpty"])(c)){t(R(c));n({isCheckoutFormValid:false})}})})}}ee.propTypes={companyAddress:T};function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{companyAddress:{},field:null},t=e.companyAddress,a=e.field;return function(e,n){var r=Object(E["isFeatureEnabled"])(n(),"feature_checkout_flow_translations");var i=Object(I["e"])(n());var o=Object(C["h"])(t,a,i.vatCountries,r);e(M({error:o,field:a}))}}te.propTypes={companyAddress:T,field:f.a.string};function ae(e){return function(t,a){t(A(e));var n=Object(I["b"])(a());n.isValidationActive&&Object(s["has"])(e,"country")&&t(ee({companyAddress:Object(I["b"])(a())}))}}ae.propTypes=f.a.object;function ne(e){return function(t){t(Y({isProcessingPayment:true}));t(_(e)).then(function(e){return t(L(e))}).catch(function(e){t(L(e.data))})}}ne.propTypes=f.a.object;function re(e){return function(t){return t(k(e)).then(function(e){var a=e.stripe_customer;var n={};a&&!Object(s["isEmpty"])(a.sources_payable)&&(n=Object(s["pickBy"])(a.sources_payable,function(e,t){return!a.sources_payable[t].is_bank_account}));t(B({stripeApiKey:e.stripe_api_publishable_key,sourcesPayable:n}))})}}re.propTypes={country:f.a.string};function ie(e){return function(t,a){var n=a();var r=Object(E["isFeatureEnabled"])(n,"feature_checkout_flow_translations");var i=Object(I["m"])(n);var o=Object(S["C"])(n);var s=Object(S["B"])(n);var l=Object(j["e"])(i,e,o,s,r);t(H({error:l,field:e}))}}j["e"].propTypes={field:f.a.string};function oe(e){return function(t,a){return new Promise(function(n){var r=a();var i=Object(E["isFeatureEnabled"])(r,"feature_checkout_flow_translations");var o=Object(S["C"])(r);var l=Object(S["B"])(r);var c=Object(j["d"])(e,o,l,i);t(G(c));n({isInvoiceFormValid:Object(s["isEmpty"])(c)})})}}oe.propTypes={invoiceData:f.a.object};function se(e){return function(t){t(Y({isProcessingPayment:true}));var a=e.billingContacts;var n=r()({},e,{billingContacts:Object(j["c"])(a)});t(y(n)).then(function(e){return t(L(e))})}}se.propTypes=f.a.object;function le(){return function(e){e(O()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.user;return e(K(a))})}}var ce=a(3464);var ue,de;var pe={countries:[],usStates:{},canadaStates:{},vatCountries:{},abnCountries:{},stripeApiKey:null,sourcesPayable:{},user:null};var fe={companyName:u["c"].COMPANY_NAME,street:u["c"].STREET,suite:u["c"].SUITE,city:u["c"].CITY,postalCode:u["c"].POSTAL_CODE,region:u["c"].REGION,country:u["c"].COUNTRY,isBusinessPurchase:u["c"].IS_BUSINESS_PURCHASE,isVatIdAvailable:u["c"].IS_VAT_AVAILABLE,vatId:u["c"].VAT_ID,abnId:u["c"].ABN_ID,validationErrors:{},isValidationActive:false};var me={code:"",message:"",type:""};var he={elementType:"",complete:false,empty:true,error:me};var ve=(ue={cardName:he},o()(ue,c["c"].CARD_NUMBER,he),o()(ue,c["c"].CARD_EXPIRY,he),o()(ue,c["c"].CARD_CVC,he),o()(ue,c["c"].POSTAL_CODE,he),o()(ue,"token",{}),o()(ue,"tokenError",me),o()(ue,"formError",me),o()(ue,"useExistingCreditCard",false),ue);var ge={ok:false,error:"",msg:"",isProcessingPayment:false};var be={numberOfUsers:"",additionalBillingContacts:"",purchaseOrderNumber:"",validationErrors:{}};var _e={config:pe,companyAddress:fe,isCheckoutAddressFormDataLoaded:false,creditCardData:ve,isCreatingCreditCardToken:false,paymentStatus:ge,invoiceData:be,paymentMethodSelected:d["a"].CREDIT_CARD,isAppDisconnectedDialogShown:false,activeCheckoutStep:ce["a"].calculator};var ye=Object(l["c"])((de={},o()(de,N,function(e,t){var a=r()({},e,{config:r()({},e.config,{countries:t.statesAndCountries.countries,usStates:t.statesAndCountries.usStates,canadaStates:t.statesAndCountries.canadaStates,vatCountries:t.statesAndCountries.vatCountries,abnCountries:t.statesAndCountries.abnCountries}),companyAddress:r()({},e.companyAddress,{companyName:t.companyAddress.companyName,street:t.companyAddress.street,suite:t.companyAddress.suite,city:t.companyAddress.city,postalCode:t.companyAddress.postalCode,region:t.companyAddress.region,country:t.companyAddress.country,isBusinessPurchase:t.companyAddress.isBusinessPurchase,isVatIdAvailable:t.companyAddress.isVatIdAvailable,vatId:t.companyAddress.vatId,abnId:t.companyAddress.abnId}),isCheckoutAddressFormDataLoaded:true});return a}),o()(de,A,function(e,t){var a=r()({},e,{companyAddress:r()({},e.companyAddress,t)});return a}),o()(de,R,function(e,t){var a=r()({},e,{companyAddress:r()({},e.companyAddress,{validationErrors:t,isValidationActive:true})});return a}),o()(de,M,function(e,t){var a=r()({},e,{companyAddress:r()({},e.companyAddress,{validationErrors:r()({},e.companyAddress.validationErrors,o()({},t.field,t.error))})});return a}),o()(de,x,function(e,t){var a=r()({},e,{companyAddress:r()({},e.companyAddress,{validationErrors:r()({},e.companyAddress.validationErrors,o()({},t.field,null))})});return a}),o()(de,P,function(e,t){var a=r()({},e,{creditCardData:r()({},e.creditCardData,o()({},t.elementType,t))});if("cardName"!==t.elementType){a.creditCardData.token=null;a.creditCardData.tokenError=null}return a}),o()(de,z,function(e){var t=r()({},e,{creditCardData:r()({},e.creditCardData,{formError:me})});return t}),o()(de,V,function(e,t){var a=r()({},e,{creditCardData:r()({},e.creditCardData,{formError:t})});return a}),o()(de,D,function(e,t){var a=r()({},e,{creditCardData:r()({},e.creditCardData,{token:t.token,tokenError:t.error})});return a}),o()(de,F,function(e,t){var a=r()({},e,{isCreatingCreditCardToken:t});return a}),o()(de,L,function(e,t){var a=r()({},e,{paymentStatus:r()({},e.paymentStatus,{ok:t.ok,error:t.error,msg:t.msg,isProcessingPayment:false})});return a}),o()(de,Q,function(e){var t=r()({},e,{paymentStatus:ge});return t}),o()(de,Y,function(e,t){var a=r()({},e,{paymentStatus:r()({},e.paymentStatus,{isProcessingPayment:t.isProcessingPayment})});return a}),o()(de,B,function(e,t){var a=r()({},e,{config:r()({},e.config,{stripeApiKey:t.stripeApiKey,sourcesPayable:Object(s["isEmpty"])(t.sourcesPayable)?{}:t.sourcesPayable}),creditCardData:r()({},e.creditCardData,{useExistingCreditCard:!Object(s["isEmpty"])(t.sourcesPayable)})});return a}),o()(de,U,function(e,t){var a=r()({},e,{config:r()({},e.config,{stripeApiKey:t.stripeApiKey}),creditCardData:r()({},e.creditCardData,{token:null,tokenError:null})});return a}),o()(de,W,function(e,t){var a=t.creditCardId!==c["a"];var n=r()({},e,{creditCardData:r()({},e.creditCardData,{useExistingCreditCard:a,token:{id:t.creditCardId,card:{last4:t.creditCardLast4,brand:t.creditCardBrand}}})});return n}),o()(de,q,function(e,t){var a=r()({},e,{invoiceData:r()({},e.invoiceData,t.data,{validationErrors:r()({},e.invoiceData.validationErrors,o()({},t.field,null))})});return a}),o()(de,G,function(e,t){var a=r()({},e,{invoiceData:r()({},e.invoiceData,{validationErrors:t})});return a}),o()(de,H,function(e,t){var a=r()({},e,{invoiceData:r()({},e.invoiceData,{validationErrors:r()({},e.invoiceData.validationErrors,o()({},t.field,t.error))})});return a}),o()(de,K,function(e,t){var a=r()({},e,{config:r()({},e.config,{user:t})});return a}),o()(de,J,function(e,t){var a=r()({},e,{paymentMethodSelected:t});return a}),o()(de,Z,function(e,t){var a=r()({},e,{isAppDisconnectedDialogShown:t.isAppDisconnectedDialogShown});return a}),o()(de,X,function(e,t){var a=r()({},e,{activeCheckoutStep:t.activeCheckoutStep});return a}),de),_e);var ke=ye;a.d(t,"getCompanyAddress",function(){return I["b"]});a.d(t,"getCompanyAddressCountry",function(){return I["c"]});a.d(t,"getCompanyAddressPostalCode",function(){return I["d"]});a.d(t,"getConfig",function(){return I["e"]});a.d(t,"isCheckoutAddressFormDataLoaded",function(){return I["o"]});a.d(t,"getCreditCardData",function(){return I["g"]});a.d(t,"getCreditCardToken",function(){return I["j"]});a.d(t,"getCreditCardTokenId",function(){return I["l"]});a.d(t,"getCreditCardBrandForReview",function(){return I["f"]});a.d(t,"getCreditCardLastFourForReview",function(){return I["i"]});a.d(t,"getCreditCardFormError",function(){return I["h"]});a.d(t,"getCreditCardTokenError",function(){return I["k"]});a.d(t,"isCreatingCreditCardToken",function(){return I["p"]});a.d(t,"didUpgradeSucceed",function(){return I["a"]});a.d(t,"getUpgradeError",function(){return I["n"]});a.d(t,"selectIsProcessingPayment",function(){return I["s"]});a.d(t,"selectStripeApiKey",function(){return I["w"]});a.d(t,"selectSourcesPayable",function(){return I["v"]});a.d(t,"selectIsSelfUserOwner",function(){return I["t"]});a.d(t,"getInvoiceData",function(){return I["m"]});a.d(t,"selectPaymentMethodSelected",function(){return I["u"]});a.d(t,"selectIsAppDisconnectedDialogShown",function(){return I["r"]});a.d(t,"selectActiveCheckoutStep",function(){return I["q"]});a.d(t,"checkoutAddressFormDataLoaded",function(){return N});a.d(t,"updateCompanyAddressField",function(){return A});a.d(t,"companyAddressValidated",function(){return R});a.d(t,"companyAddressFormFieldValidated",function(){return M});a.d(t,"clearCompanyAddressFormFieldValidationErrors",function(){return x});a.d(t,"handleCreditCardFormChange",function(){return P});a.d(t,"updateCreditCardTokenData",function(){return D});a.d(t,"updateIsCreatingCreditCardToken",function(){return F});a.d(t,"onUpgradeResponseReceived",function(){return L});a.d(t,"stripeCustomerDataLoaded",function(){return B});a.d(t,"updateStripeApiKey",function(){return U});a.d(t,"updateInvoiceDataField",function(){return q});a.d(t,"invoiceDataValidated",function(){return G});a.d(t,"invoiceDataFieldValidated",function(){return H});a.d(t,"updateCreditCardSelected",function(){return W});a.d(t,"updateCreditCardFormError",function(){return V});a.d(t,"clearCreditCardFormError",function(){return z});a.d(t,"clearPaymentStatus",function(){return Q});a.d(t,"selfUserDataLoaded",function(){return K});a.d(t,"updateIsProcessingPayment",function(){return Y});a.d(t,"updatePaymentMethodSelected",function(){return J});a.d(t,"updateIsAppDisconnectedDialogShown",function(){return Z});a.d(t,"updateActiveCheckoutStep",function(){return X});a.d(t,"loadCheckoutAddressFormData",function(){return $});a.d(t,"validateCheckoutForm",function(){return ee});a.d(t,"validateCompanyAddressFormField",function(){return te});a.d(t,"updateCompanyAddress",function(){return ae});a.d(t,"submitPaymentForUpgrade",function(){return ne});a.d(t,"loadStripeCustomerData",function(){return re});a.d(t,"validateInvoiceFormField",function(){return ie});a.d(t,"validateInvoiceForm",function(){return oe});a.d(t,"createInvoiceForUpgrade",function(){return se});a.d(t,"loadSelfUserData",function(){return le});var Oe=t["default"]=ke},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});a.d(t,"b",function(){return r});a.d(t,"c",function(){return n});var n={NUMBER_OF_USERS_IS_REQUIRED:"number_of_users_is_required",PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS:"invalid_po_number",NUMBER_OF_USERS_INVALID_CHARACTERS:"invalid_number_of_users",NUMBER_OF_USERS_INVALID_MIN_ALLOWED:"invalid_min_number_of_users",NUMBER_OF_USERS_INVALID_MAX_ALLOWED:"invalid_max_number_of_users"};var r={NUMERIC_WITH_MIN_MAX_LENGTH_REGEX:/^\d{1,20}$/,NUMERIC_REGEX:/^\d+$/};var i={NUMBER_OF_USERS:"numberOfUsers",ADDITIONAL_BILLING_CONTACTS:"additionalBillingContacts",PURCHASE_ORDER_NUMBER:"purchaseOrderNumber"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setSearchAutocompleteSuggestions",function(){return f});a.d(t,"getSearchAutocompleteSuggestions",function(){return m});a.d(t,"openSearchAutocomplete",function(){return h});a.d(t,"closeSearchAutocomplete",function(){return v});a.d(t,"setSearchAutocompleteMode",function(){return g});a.d(t,"searchAutocompleteModes",function(){return b});a.d(t,"setSearchAutocompleteEchoQuery",function(){return _});a.d(t,"setSearchAutocompleteSelection",function(){return k});a.d(t,"reset",function(){return O});a.d(t,"getSearchAutocompleteSelectedIndex",function(){return C});a.d(t,"getSearchAutocompleteMode",function(){return j});a.d(t,"isSearchAutocompleteOpen",function(){return S});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(180);var d=a(747);var p;var f=Object(c["a"])("Set the list of autocomplete suggestions");f.propTypes={suggestions:l.a.arrayOf(l.a.shape({score:l.a.number,type:l.a.string,featureVector:l.a.string})).isRequired};var m=Object(c["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.suggestions});var h=Object(c["a"])("Open Search Autocomplete popover");h.propTypes={};var v=Object(c["a"])("Close Search Autocomplete popover");v.propTypes={};var g=Object(c["a"])("Set the search autocomplete mode");var b={OMNI:"OMNI",NAVIGATION:"NAVIGATION"};g.propTypes={autocompleteMode:l.a.oneOf([b.OMNI,b.NAVIGATION])};var _=Object(c["e"])("Set the first (0th) item in the autocomplete list as an echo of the given query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.requestQuery;var r=t();e(f({suggestions:Object(d["b"])(r,m(r),n)}))});_.propTypes={requestQuery:l.a.string.isRequired};var y=Object(c["a"])("Set the index of the selected autocomplete suggestion");y.propTypes={selectedIndex:l.a.number};var k=Object(c["e"])("Set the selected autocomplete item, keeping the display text in sync",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.selectedIndex,r=a.setText;var i=t();e(y({selectedIndex:n}));if(r){var o=i&&i.searchAutocomplete&&i.searchAutocomplete.suggestions||[];var s=o[n];s&&s.is_type_query_completion&&e(Object(u["setSearchInputBoxDisplayQuery"])({displayQuery:s.suggestion_replacement}))}});k.propTypes={selectedIndex:l.a.number,setText:l.a.bool};var O=Object(c["a"])("Reset search autocomplete redux state");O.propTypes={};var w={suggestions:[],selectedIndex:null,searchAutocompleteMode:b.OMNI,isSearchAutocompleteOpen:false};var E=Object(c["c"])((p={},r()(p,O,function(){return w}),r()(p,f,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.suggestions;return o()({},e,{suggestions:a})}),r()(p,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.selectedIndex;return o()({},e,{selectedIndex:a})}),r()(p,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.searchAutocompleteMode;return o()({},e,{searchAutocompleteMode:a})}),r()(p,h,function(e){return o()({},e,{isSearchAutocompleteOpen:true})}),r()(p,v,function(e){return o()({},e,{isSearchAutocompleteOpen:false})}),p),w);t["default"]=E;var C=Object(c["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.selectedIndex});var j=Object(c["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.searchAutocompleteMode});var S=Object(c["d"])(function(e){return!!(e&&e.searchAutocomplete&&e.searchAutocomplete.isSearchAutocompleteOpen)})},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"d",function(){return D});a.d(t,"h",function(){return F});a.d(t,"f",function(){return L});a.d(t,"e",function(){return B});a.d(t,"i",function(){return U});a.d(t,"g",function(){return q});a.d(t,"a",function(){return G});a.d(t,"c",function(){return H});a.d(t,"b",function(){return Q});var n=a(3);var r=a.n(n);var i=a(32);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(25);var p=a(17);var f=a(314);var m=a(4);var h=a(37);var v=a(699);var g=a(90);var b=a(268);var _=a(11);var y=a(23);var k=a(94);var O=a(373);var w=a(69);var E=a(747);var C=a(746);var j=a(736);var S=a(12);var I=a(21);var T=a(446);var N=a(186);var A=a(180);var R="IMPROVED_SEARCH";var M=2;var x=1e4;var P=Object(m["b"])("Fetch search data for a specific module (messages, files, etc.)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.module,i=a.query,s=a.page,l=void 0===s?1:s,c=o()(a,["module","query","page"]);Object(T["g"])(n,c&&c.sort||"unknown",l);var u=e(Object(v["getQuerySessionId"])());var p=e(Object(v["getSearchSessionId"])());return e(Object(d["a"])({method:"search.modules",args:r()({module:n,query:i,page:l,client_req_id:u,search_session_id:p,extracts:1,highlight:1,max_extract_len:200,extra_message_data:1,no_user_profile:1},c)})).timeout(x).then(function(e){Object(T["h"])(n,c&&c.sort||"unknown",l);return e})});P.propTypes={module:l.a.string.isRequired,query:l.a.string.isRequired,page:l.a.number};var D=Object(m["b"])("Fetch the user's recent search history for use in the blank slate UI.",function(e,t,a){var n=a.query,r=a.limit;return e(Object(d["a"])({method:"search.autocomplete",args:{query:n,limit:r}}))});D.propTypes={query:l.a.string.isRequired,limit:l.a.number.isRequired};var F=Object(m["b"])("Precache visibility filters for this user before they kick off a search",function(e,t){var a=t();var n=Object(_["pageNeedsEnterprise"])(a);var r=Object(_["getFromBootData"])(a,"enterprise_api_token");var i=n&&r?{enterprise_token:r}:{};return e(Object(d["a"])({method:"search.precache",args:i}))});F.propTypes={};var L=Object(m["b"])("Retrieve search autocomplete query suggestions.",function(e,t,a){var n=a.limit,r=a.version,i=a.returnExperts,o=a.batchMin,s=void 0===o?0:o,l=a.batches,c=void 0===l?10:l;return e(Object(d["a"])({method:"search.autocomplete.querySuggestions",args:{limit:n,version:r,return_experts:i?1:0,new_scale:true,query_batch_min:s,query_batches:c}}))});L.propTypes={limit:l.a.number.isRequired,version:l.a.string.isRequired,returnExperts:l.a.bool.isRequired,batchMin:l.a.number,batches:l.a.number};var B=Object(m["b"])("Retrieve search autocomplete file suggestions.",function(e,t,a){var n=a.limit,r=a.version;return e(Object(d["a"])({method:"search.autocomplete.fileSuggestions",args:{limit:n,version:r}}))});B.propTypes={limit:l.a.number.isRequired,version:l.a.string.isRequired};var U=Object(m["b"])("Save a search query to the user's search query history",function(e,t,a){var n=a.query;return e(Object(d["a"])({method:"search.save",args:{terms:n}})).catch(function(e){return Object(p["a"])({getState:t}).error(e)}).finally(function(){var e=t();var a=Object(y["getTeamId"])(e);var n=Object(C["a"])(a);n.flushAll()})});U.propTypes={query:l.a.string.isRequired};var q=Object(m["b"])("Delete a search query from the user's search query history.",function(e,t,a){var n=a.terms,r=a.searchSessionId,i=a.querySessionId;return e(Object(d["a"])({method:"search.delete",args:{terms:n,search_session_id:r,client_request_id:i}})).catch(function(e){return Object(p["a"])({getState:t}).error(e)}).finally(function(){var e=t();var a=Object(y["getTeamId"])(e);var n=Object(C["a"])(a);n.flushAll()})});q.propTypes={terms:l.a.string.isRequired,searchSessionId:l.a.string.isRequired,querySessionId:l.a.string.isRequired};var G=Object(m["e"])("Fetch page 1 of all search results for a given query and filters",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.query,i=a.fetchSuggestions,o=void 0!==i&&i;if(""===n.trim()){e(Object(g["setLastFetchAllRequestId"])({id:""}));e(Object(h["setErrorForModule"])({moduleType:N["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].NoQuery,loading:false}));e(Object(h["setErrorForModule"])({moduleType:N["a"].recentMessages,error:h["MODULE_ERROR_STATE"].NoQuery,loading:false}));e(Object(h["setErrorForModule"])({moduleType:"files",error:h["MODULE_ERROR_STATE"].NoQuery,loading:false}));return}var s=t();var l=Object(p["a"])({state:s});l.info(R,"Fetching all search results");var u=Object(f["a"])();e(Object(g["setLastFetchAllRequestId"])({id:u}));e(Object(h["resetScrollPosition"])());e(Object(h["setStateForModule"])({moduleType:N["a"].relevantMessages,moduleState:{loading:true,page:1,error:h["MODULE_ERROR_STATE"].None}}));e(Object(h["setStateForModule"])({moduleType:N["a"].recentMessages,moduleState:{loading:true,page:1,error:h["MODULE_ERROR_STATE"].None}}));e(Object(h["setStateForModule"])({moduleType:"files",moduleState:{loading:true,page:1,error:h["MODULE_ERROR_STATE"].None}}));if(o){e(Object(g["clearFilterSuggestions"])());e(Object(h["setLoadingModule"])({moduleType:"suggestions",loading:true}))}e(P(r()({module:"messages",query:n,sort:"score"},K(s)))).then(function(a){if(Y(t(),u)){Object(p["a"])({getState:t}).info(R,"Relevant message results loaded successfully");var n=t();e(Object(g["setResponse"])({query:a.query,module:N["a"].relevantMessages,result:a}));e(Object(g["setEditableRequestQueryFilterOnly"])({queryFilter:Z(n,a.filters)}));e(Object(h["setLoadingModule"])({moduleType:N["a"].relevantMessages,loading:false}));e(Object(O["a"])({files:W(a.items)}));if(o){var i=J(n,a.filter_suggestions);Object(c["isEmpty"])(i.channelObjects)||e(Object(g["setEditableRequestChannelObjects"])({channels:r()({},Object(g["getEditableRequestChannelObjects"])(n),i.channelObjects)}));e(Object(g["setFilterSuggestions"])({suggestions:Object(c["omit"])(i,"channelObjects")}));e(Object(h["setLoadingModule"])({moduleType:"suggestions",loading:false}))}}}).catch(Promise.TimeoutError,function(){Object(p["a"])({getState:t}).warn(R,"Relevant message results timed out");e(Object(h["setErrorForModule"])({moduleType:N["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(a){Object(p["a"])({getState:t}).warn(R,"Relevant message results threw an error while loading");l.error(a);e(Object(h["setErrorForModule"])({moduleType:N["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))});e(P(r()({module:"messages",query:n,sort:"timestamp"},K(s)))).then(function(a){if(Y(t(),u)){Object(p["a"])({getState:t}).info(R,"Recent message results loaded successfully");e(Object(g["setResponse"])({query:a.query,module:N["a"].recentMessages,result:a}));e(Object(g["setEditableRequestQueryFilterOnly"])({queryFilter:Z(s,a.filters)}));e(Object(h["setLoadingModule"])({moduleType:N["a"].recentMessages,loading:false}));e(Object(O["a"])({files:W(a.items)}))}}).catch(Promise.TimeoutError,function(){Object(p["a"])({getState:t}).warn(R,"Recent message results timed out");e(Object(h["setErrorForModule"])({moduleType:N["a"].recentMessages,error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(a){Object(p["a"])({getState:t}).warn(R,"Recent message results threw an error while loading");l.error(a);e(Object(h["setErrorForModule"])({moduleType:N["a"].recentMessages,error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))});e(P(r()({module:"files",query:n},K(s)))).then(function(a){if(Y(t(),u)){Object(p["a"])({getState:t}).info(R,"Files results loaded successfully");e(Object(g["setResponse"])({query:a.query,module:"files",result:a}));e(Object(g["setEditableRequestQueryFilterOnly"])({queryFilter:Z(s,a.filters)}));e(Object(h["setLoadingModule"])({moduleType:"files",loading:false}));a&&a.items&&a.items.length&&e(Object(O["a"])({files:V(a.items)}))}}).catch(Promise.TimeoutError,function(){l.warn(R,"Files results timed out");e(Object(h["setErrorForModule"])({moduleType:"files",error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(a){Object(p["a"])({getState:t}).warn(R,"Files results threw an error while loading");l.error(a);e(Object(h["setErrorForModule"])({moduleType:"files",error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))})});G.propTypes={query:l.a.string.isRequired};var H=Object(m["e"])("fetch search results by module",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.module,i=a.query,s=a.page,l=void 0===s?1:s,c=o()(a,["module","query","page"]);var u=t();var d=Object(p["a"])({state:u});e(Object(h["setStateForModule"])({moduleType:n,moduleState:{loading:true,page:l,error:h["MODULE_ERROR_STATE"].None}}));e(P(r()({module:c&&c.apiModule||n,query:i,page:l},K(u),c))).then(function(t){if(1===l){e(Object(g["setResponse"])({query:t.query,module:n,result:t}));e(Object(g["setEditableRequestQueryFilterOnly"])({queryFilter:Z(u,t.filters)}))}else e(Object(g["appendResponse"])({module:n,result:t,page:l}));e(Object(h["setLoadingModule"])({moduleType:n,loading:false}));"files"===n&&t&&t.items&&t.items.length?e(Object(O["a"])({files:V(t.items)})):"messages"===n&&e(Object(O["a"])({files:W(t.items)}))}).catch(Promise.TimeoutError,function(){Object(p["a"])({getState:t}).warn(R,"Search timed out");e(Object(h["setErrorForModule"])({moduleType:n,error:h["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(a){Object(p["a"])({getState:t}).warn(R,"Error caught while loading");d.error(a);e(Object(h["setErrorForModule"])({moduleType:N["a"].relevantMessages,error:h["MODULE_ERROR_STATE"].Unknown,loading:false}))})});H.propTypes={module:l.a.string,query:l.a.string.isRequired,page:l.a.number};function W(e){var t=[];e.forEach(function(e){e.messages.forEach(function(e){e.files&&e.files.length&&e.files.forEach(function(e){return t.push(e)})})});return V(t)}function V(e){return e.map(function(e){return Object(c["omit"])(e,["search_name","search_title","iid","search_preview"])})}var z=5;var Q=Object(m["e"])("Fetch the list of suggestions from search autocomplete",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.query;var r=t();Object(T["c"])();return Object(E["c"])(e,r,n,z,Object(E["a"])(r)).then(function(a){Object(T["d"])();var n=t();var i=Object(A["getSearchInputBoxDisplayQuery"])(n);var o=Object(j["c"])(n,i);var s=Object(E["b"])(n,a,o);e(Object(b["setSearchAutocompleteSuggestions"])({suggestions:s}));var l=Object(b["getSearchAutocompleteSelectedIndex"])(r);null!==l&&void 0!==l||E["c"]&&E["c"][0]&&E["c"][0].is_type_navigational&&e(Object(b["setSearchAutocompleteSelection"])({selectedIndex:0,setText:false}))})});Q.propTypes={query:l.a.string.isRequired};function K(e){var t=Object(_["pageNeedsEnterprise"])(e);var a=Object(g["getRequest"])(e)||{},n=a.queryFilterHistory;var r={max_filter_suggestions:10,request_context:JSON.stringify({active_cid:Object(w["getPrimaryView"])(e),recent_filter_in:n.in,recent_filter_from:n.from})};if(t){r.enterprise_token=Object(_["getFromBootData"])(e,"enterprise_api_token");r.team=Object(y["getTeamId"])(e)}return r}function Y(e,t){return Object(g["getLastFetchAllRequestId"])(e)===t}function J(e,t){var a=Object(y["getTeamId"])(e);var n=Object(c["split"])(Object(I["getUserPref"])(e,"search_exclude_channels")||"",",");var i=Object(g["getRequest"])(e)||{},o=i.queryFilter,s=i.queryFilterHistory;var l=o||{from:[],in:[]},u=l.from,d=l.in;var p=Object(k["f"])(e,Object(w["getPrimaryView"])(e));var f=Object(S["getMemberIdFromIm"])(p)||p&&p.id;var m=Object(_["getCurrentUserId"])(e);var h=Object(c["chain"])([]).concat(m).concat(Object(c["chain"])(t.from).filter(function(e){return!e.checked&&e.id!==m}).map("id").take(M).value()).concat(s.from).concat(u).uniq().value();var v=Object(c["chain"])([]).concat(f||[]).concat(Object(c["chain"])(t.in).filter(function(e){return!e.checked&&e.id!==f}).map(function(e){if(Object(S["isIm"])(e.channel))return r()({},e,{id:Object(S["getMemberIdFromIm"])(e.channel)});return e}).take(M).map("id").value()).concat(s.in||[]).concat(d||[]).concat(Object(c["chain"])(t.in).filter(function(e){return e.checked}).map(function(e){return Object(S["isIm"])(e)?Object(S["getMemberIdFromIm"])(e.channel):e.id}).value()).uniq().difference(n).value();var b={};Object(_["pageNeedsEnterprise"])(e)&&t.in.forEach(function(e){if(Object(S["isIm"])(e))return;e.channel.teams&&-1===e.channel.teams.indexOf(a)&&(b[e.channel.id]=e.channel)});return{from:h,in:v,channelObjects:b}}function Z(e,t){return{from:t.from||[],in:t.in&&Object.values(t.in)||[],before:t.before||void 0,after:t.after||void 0,fileType:t.file_types&&t.file_types[0]||void 0}}},,function(e,t,a){"use strict";a.d(t,"g",function(){return N});a.d(t,"a",function(){return R});a.d(t,"e",function(){return P});a.d(t,"f",function(){return F});a.d(t,"d",function(){return L});a.d(t,"h",function(){return B});a.d(t,"c",function(){return U});a.d(t,"b",function(){return q});a.d(t,"i",function(){return G});var n=a(7);var r=a.n(n);var i=a(97);var o=a.n(i);var s=a(8);var l=a.n(s);var c=a(5);var u=a.n(c);var d=a(6);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(12);var v=a(47);var g=a(129);var b=a(885);var _=a(160);var y=a(143);var k=a(10);var O=a(658);var w=a(506);var E=a(886);var C=new k["b"]("search");var j={January:C.t("January"),February:C.t("February"),March:C.t("March"),April:C.t("April"),May:C.t("May"),June:C.t("June"),July:C.t("July"),August:C.t("August"),September:C.t("September"),October:C.t("October"),November:C.t("November"),December:C.t("December")};var S={today:C.t("Today"),yesterday:C.t("Yesterday")};var I={};Object(f["each"])(v["e"],function(e,t){I[e.toLocaleLowerCase()]=t;I[t.toLocaleLowerCase()]=t});var T=function e(t){return I[(t||"").toLocaleLowerCase()]};var N=function(){function e(){u()(this,e)}p()(e,[{key:"toString",value:function e(){return""}},{key:"toHtml",value:function e(){return G(Object(y["a"])(this.toString()))}},{key:"toTextyString",value:function e(){return this.toString()}},{key:"toMap",value:function e(t){return{string:this.toString(t)}}},{key:"getRawIdAndNameForXwsChannelWorkaround",value:function e(){return{id:this._id,name:this._name}}},{key:"type",get:function e(){return v["a"].UNKNOWN}},{key:"logId",get:function e(){return""}}],[{key:"tokenListFromString",value:function e(t,a){var n=a.replace(/[\r\n]+/g," ");var r=new RegExp('^\\s*(("([^"]*)")|([^\\s:]+:(([^<>\\s]+)|(<[^>]+>)))|(@[^\\s]+|<[^>]+>)|([^\\s]+))(.*)$');var i=10;var o=[];var s=n;var l=r.exec(s);while(null!==l){var c=l[3];var u=l[4];var d=l[8];var p=l[9];if(l[i]&&s.length===l[i].length)break;s=l[i];if(c)o.push({is_phrase:true,string:c});else if(d)o.push({is_member:true,string:d});else if(u)o.push({is_filter:true,string:u});else if(p){var m=o.length>0?o.slice(-1)[0]:null;m&&m.is_word?m.string=m.string+" "+p:o.push({is_word:true,string:p})}l=r.exec(s)}var h=Object(f["map"])(o,function(e){if(e.is_phrase)return new M(e.string);if(e.is_filter){var a=e.string.indexOf(":");var n=T(e.string.substring(0,a));var r=e.string.substring(a+1);var i=v["e"][n]+":"+r;switch(n){case"in":return P.fromString(t,i);case"from":return F.fromString(t,i,v["f"].FROM);case"to":return F.fromString(t,i,v["f"].TO);case"has":return L.fromString(i);case"type":return B.fromString(i);case"before":return U.fromString(i,v["f"].BEFORE);case"during":return U.fromString(i,v["f"].DURING);case"on":return U.fromString(i,v["f"].ON);case"after":return U.fromString(i,v["f"].AFTER);default:break}}else if(e.is_member)return D.fromString(t,e.string);return new A(e.string)});return h}}]);return e}();var A=function(e){l()(t,e);function t(e){u()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.string=e;return a}p()(t,[{key:"toString",value:function e(){return this.string?this.string:""}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_string:true,html:this.toHtml()})}},{key:"type",get:function e(){return v["a"].STRING}},{key:"logId",get:function e(){return Object(E["a"])(this.string)}}]);return t}(N);var R=function(e){l()(t,e);function t(e,a){u()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._querySuggestionScore=e;n.string=a;return n}p()(t,[{key:"querySuggestionScore",get:function e(){return this._querySuggestionScore}},{key:"type",get:function e(){return v["a"].API}}]);return t}(A);var M=function(e){l()(t,e);function t(e){u()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.phrase=e;return a}p()(t,[{key:"toString",value:function e(){return'"'+this.phrase+'"'}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_phrase:true,phrase:this.phrase})}},{key:"type",get:function e(){return v["a"].PHRASE}},{key:"logId",get:function e(){return Object(E["a"])(this.phrase)}}]);return t}(N);var x=function(e){l()(t,e);function t(e){u()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._frecencyScore=e;return a}p()(t,[{key:"frecencyScore",get:function e(){return this._frecencyScore}}]);return t}(N);var P=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.state=a;o._id=n;o._name=i;return o}p()(t,[{key:"toString",value:function e(){return this._toStringInternal({formatChannel:function e(t,a){return v["e"].in+":<#"+t+"|"+a+">"},formatMpim:function e(t){return v["e"].in+":<#"+t.id+">"},formatMember:function e(t){return v["e"].in+":<@"+t+">"}})}},{key:"toTextyString",value:function e(){var t=this;return this._toStringInternal({formatChannel:function e(t,a){return v["e"].in+":#"+a},formatMpim:function e(a){var n=Object(O["b"])(t.state,a);return v["e"].in+":"+n},formatMember:function e(t,a){return v["e"].in+":<@"+t+"|@"+a+">"}})}},{key:"_toStringInternal",value:function e(t){var a=t.formatChannel,n=t.formatMpim,r=t.formatMember;var i=Object(w["a"])(this.state);var o=this._id?Object(b["a"])(i,this._id)||Object(g["a"])(i,this._id):Object(b["b"])(i,this._name)||Object(g["b"])(i,this._name);if(o&&Object(g["c"])(o)&&!Object(h["isUnknownOrNonExistent"])(o)&&!Object(h["isIm"])(o)){if(Object(h["isMpim"])(o))return n(o);var s=Object(h["getDisplayNameForChannel"])(i,o,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}).replace(/^#/,"");return a(o.id,s)}if(this._name&&Object(_["a"])(this._id))return a(this._id,this._name);var l=this._id?Object(g["d"])(i,this._id):Object(g["e"])(i,this._name);if(l){var c=Object(g["f"])(i,l.id);return r(l.id,c)}if(this._id){var u=Object(g["f"])(i,this._id);return r(this._id,u)}return v["e"].in+":"+this._name}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_in_filter:true,string:this.toString(),channel:this.channelOrNull,fallbackChannelName:this._name,user:this.memberOrNull})}},{key:"type",get:function e(){return v["a"].FILTER_IN}},{key:"entityId",get:function e(){if(this._id)return this._id;var t=this.channelOrNull;if(t)return t.id;var a=this.memberOrNull;if(a)return a.id;return null}},{key:"channelOrNull",get:function e(){var t=Object(w["a"])(this.state);return this._id?Object(g["a"])(t,this._id)||Object(b["a"])(t,this._id):Object(g["b"])(t,this._name)||Object(b["b"])(t,this._name)}},{key:"memberOrNull",get:function e(){var t=Object(w["a"])(this.state);return this._id?Object(g["d"])(t,this._id):Object(g["e"])(t,this._name)}},{key:"logId",get:function e(){return this._id}}],[{key:"fromString",value:function e(a,n){var r=new RegExp("^("+v["e"].in+"|in):((<[@#]?([A-Z0-9a-z]+)(\\|[\\s]?([#@]?([^>]+)))?>)|([#@]?([^\\s]+)))$").exec(n);if(r&&r[4]&&(Object(g["a"])(a,r[4])||Object(g["d"])(a,r[4])||Object(b["a"])(a,r[4])))return new t(1,a,r[4],r[6]);if(r&&r[9]&&(Object(g["b"])(a,r[9])||Object(g["e"])(a,r[9])||Object(b["b"])(a,r[9])))return new t(1,a,null,r[9]);if(r&&r[2]&&(Object(g["b"])(a,r[2])||Object(b["b"])(a,r[2])))return new t(1,a,null,r[2]);if(r&&r[8])return new t(1,a,null,r[8]);return new A(n)}}]);return t}(x);var D=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.state=a;o._id=n;o._name=i;return o}p()(t,[{key:"toString",value:function e(){if(!this._id)return"@"+this._name;return"<@"+this._id+">"}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_member:true,user:this.memberOrNull})}},{key:"toTextyString",value:function e(){var t=Object(w["a"])(this.state);if(!this._id){var a=Object(g["e"])(t,this._name);if(a){var n=Object(g["f"])(t,a.id);return"<@"+a.id+"|@"+n+">"}return"@"+this._name}var r=Object(g["f"])(t,this._id);return"<@"+this._id+"|@"+r+">"}},{key:"type",get:function e(){return v["a"].MEMBER}},{key:"entityId",get:function e(){var t=Object(w["a"])(this.state);if(this._id)return this._id;var a=Object(g["e"])(t,this._name);return a?a.id:null}},{key:"memberOrNull",get:function e(){var t=Object(w["a"])(this.state);return this._id?Object(g["d"])(t,this._id):Object(g["e"])(t,this._name)}},{key:"logId",get:function e(){return this.entityId}}],[{key:"fromString",value:function e(t,a){var n=new RegExp("^((<@?([^\\s|>]+)(\\|[\\s]?@?([^>]+))?>)|(@?([^\\s]+)))$").exec(a);var r=void 0;n&&n[3]&&(r=Object(g["d"])(t,n[3]));!r&&n&&n[7]&&(r=Object(g["e"])(t,n[7]));if(r)return new this(1,t,r.id,r.name);return new A(a)}}]);return t}(x);var F=function(e){l()(t,e);function t(e,a,n,i,o){u()(this,t);var s=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,n,i));s.cleanModifierType=[v["f"].FROM,v["f"].TO].includes(o)?o:"";return s}p()(t,[{key:"toString",value:function e(){return this.modifierName+":"+o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this)}},{key:"toMap",value:function e(a){var n={};n["is_type_"+this.cleanModifierType+"_filter"]=true;return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_member_filter:true,modifier:this.cleanModifierType,modifier_name:this.modifierName},n)}},{key:"toTextyString",value:function e(){return this.modifierName+":"+o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toTextyString",this).call(this)}},{key:"type",get:function e(){switch(this.cleanModifierType){case v["f"].FROM:return v["a"].FILTER_FROM;case v["f"].TO:return v["a"].FILTER_TO;default:return v["a"].UNKNOWN}}},{key:"modifierName",get:function e(){return v["e"][this.cleanModifierType]}}],[{key:"fromString",value:function e(t,a,n){var r=[v["f"].FROM,v["f"].TO].includes(n)?n:"";var i=v["e"][r];var o=new RegExp("^("+i+"|"+r+"):((<@?([^\\s|>]+)(\\|@?([^>]+))?>)|(@?([^\\s]+)))$").exec(a);var s=void 0;o&&o[4]&&(s=Object(g["d"])(t,o[4]));!s&&o&&o[8]&&(s=Object(g["e"])(t,o[8]));if(s)return new this(1,t,s.id,s.name,r);return new A(a)}}]);return t}(D);var L=function(e){l()(t,e);function t(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.thing=e;n.canLog=a;return n}p()(t,[{key:"toString",value:function e(){return v["e"].has+":"+this.thingName}},{key:"thingHtml",value:function e(){return G(Object(y["a"])(this.thingName))}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_has_filter:true,thingHtml:this.thingHtml(),thing:this.thingName})}},{key:"type",get:function e(){return v["a"].FILTER_HAS}},{key:"thingName",get:function e(){return v["d"][this.thing]?v["d"][this.thing]:this.thing}},{key:"logId",get:function e(){if(true===this.canLog)return this.thingName;return""}}],[{key:"fromString",value:function e(a){var n=new RegExp("("+v["e"].has+"|has):([^\\s]+)").exec(a);if(n&&n[2])return new t(n[2],false);return new A(a)}}]);return t}(N);var B=function(e){l()(t,e);function t(e){u()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._fileType=e;return a}p()(t,[{key:"toString",value:function e(){return v["e"].type+":"+this.fileType}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_type_filter:true,file_type:this.fileType})}},{key:"type",get:function e(){return v["a"].FILTER_TYPE}},{key:"fileType",get:function e(){return this._fileType}},{key:"logId",get:function e(){return this.fileType}}],[{key:"fromString",value:function e(a){var n=new RegExp("("+v["e"].type+"|type):([^\\s]+)").exec(a);if(n&&n[2])return new t(n[2]);return new A(a)}}]);return t}(N);var U=function(e){l()(t,e);function t(e,a){u()(this,t);var n=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.dateString=e;n.cleanModifierType=[v["f"].BEFORE,v["f"].DURING,v["f"].ON,v["f"].AFTER].includes(a)?a:"";return n}p()(t,[{key:"toString",value:function e(){return this.modifierName+":"+this.dateString}},{key:"toMap",value:function e(a){var n={};n["is_"+this.dateString]=true;var r=j[this.dateString]||S[this.dateString]||this.dateString;return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_date_filter:true,date_string:this.dateString,date_string_normalized:r,modifier:this.cleanModifierType,modifier_name:this.modifierName},n)}},{key:"type",get:function e(){switch(this.cleanModifierType){case"before":return v["a"].FILTER_BEFORE;case"during":return v["a"].FILTER_DURING;case"on":return v["a"].FILTER_ON;case"after":return v["a"].FILTER_AFTER;default:return v["a"].UNKNOWN}}},{key:"modifierName",get:function e(){return v["e"][this.cleanModifierType]}},{key:"logId",get:function e(){return this.dateString}}],[{key:"fromString",value:function e(a,n){var r=[v["f"].BEFORE,v["f"].DURING,v["f"].ON,v["f"].AFTER].includes(n)?n:"";var i=v["e"][r];var o=new RegExp("("+r+"|"+i+"):([^\\s]+)");var s=o.exec(a);if(s&&s[2])return new t(s[2],r);return new A(a)}}]);return t}(N);var q=function(){function e(t){u()(this,e);this.date=t}p()(e,[{key:"suggestionsPromise",value:function e(t,a,n){return Promise.resolve(this.suggestions(t,a,n))}},{key:"suggestions",value:function e(t,a,n){return Object(f["chain"])([this.suggestionsRelativeDates(t,a,n),this.suggestionsMonths(t,a,n),this.suggestionsYears(t,a,n)]).flatten().sortBy(function(e){return-e.score}).slice(0,a).value()}},{key:"suggestionsRelativeDates",value:function e(t,a,n){var r=[S.yesterday];n!==v["f"].AFTER&&r.push(S.today);return Object(f["chain"])(r).filter(function(e){return Object(f["startsWith"])(e.toLowerCase(),t.toLowerCase())}).slice(0,a).map(function(e,t){return{model_ob:e,score:.95-.01*t}}).value()}},{key:"suggestionsMonths",value:function e(t,a,n){if(n===v["f"].ON)return[];return Object(f["chain"])(this.orderedMonthNames()).filter(function(e){return Object(f["startsWith"])(e.toLowerCase(),t.toLowerCase())}).slice(0,a).map(function(e,t){return{model_ob:e,score:(12-t)/12}}).value()}},{key:"suggestionsYears",value:function e(t,a,n){if(n===v["f"].ON)return[];var r=n===v["f"].AFTER?this.date.getYear()-1:this.date.getYear();var i=1900+r;return Object(f["chain"])(Object(f["range"])(i,i-5,-1)).filter(function(e){return Object(f["startsWith"])(e.toString(),t)}).slice(0,a).map(function(e,t){return{model_ob:e.toString(),score:(a-t)/a}}).value()}},{key:"monthNameFromInt",value:function e(t){return[j.January,j.February,j.March,j.April,j.May,j.June,j.July,j.August,j.September,j.October,j.November,j.December][t]}},{key:"orderedMonthNames",value:function e(){var t=this;return Object(f["map"])(Object(f["range"])(0,12),function(e){return t.monthNameFromInt((t.date.getMonth()-e+12)%12)})}}]);return e}();function G(e){return Object(y["c"])(e,null,{no_linking:true,do_specials:true,do_inline_imgs:false,no_jumbomoji:true,no_highlights:true,token_overrides:{"<CODE:START>":"`","<CODE:END>":"`","<B:START>":"*","<B:END>":"*","<I:START>":"_","<I:END>":"_","<STRIKE:START>":"~","<STRIKE:END>":"~","<QUOTE:START>":">","<QUOTE:END>":""}})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return i});a.d(t,"c",function(){return n});a.d(t,"a",function(){return r});var n={CARD_NUMBER:"cardNumber",CARD_EXPIRY:"cardExpiry",CARD_CVC:"cardCvc",POSTAL_CODE:"postalCode"};var r="new_credit_card_id";var i=9},,,function(e,t,a){"use strict";var n=a(7);var r=a.n(n);var i=a(97);var o=a.n(i);var s=a(8);var l=a.n(s);var c=a(5);var u=a.n(c);var d=a(6);var p=a.n(d);var f=a(2);var m=a(658);var h=a(790);var v=a(2964);var g=a(21);var b=a(47);function _(e){return O.fromSuggestion(e)}var y={testing:{frecency:.01,type_navigation_user:4,type_navigation_channel:4},e1_lr:{frecency:.7387,type_navigation_user:.1258,file_suggestion_score:.0405,active_token_string:.0097,active_token_member:3e-4,active_token_phrase:-0,active_token_filter_on:-2e-4,query_suggestion_score_v2:-3e-4,active_token_filter_has:-7e-4,type_navigation_file:-8e-4,active_token_filter_during:-.0013,active_token_filter_after:-.0014,active_token_filter_before:-.0014,active_token_filter_in:-.0015,active_token_filter_to:-.0058,type_navigation_channel:-.0107,active_token_filter_from:-.0227,active_token_query_suggestion:-.023,type_query:-.0482,type_navigation_mpim:-.0661,type_navigation_expert_channel:-.1,bm25_score:1e-4},e2_unified:{frecency:1.1233,type_navigation_channel:-.0209,type_navigation_file:-7e-4,type_navigation_mpim:-.0676,type_navigation_user:-.9167,type_query:1.0322,active_token_filter_in:3e-4,active_token_filter_from:1.0586,active_token_filter_to:-.0065,active_token_filter_before:-.0014,active_token_filter_during:-.0011,active_token_filter_on:-1e-4,active_token_filter_after:-.001,active_token_filter_has:-6e-4,active_token_member:3e-4,active_token_string:.0079,active_token_phrase:0,string_exact_match:1e-4,string_exact_prefix_match:-.0105,string_normal_match:-3e-4,string_normal_prefix_match:-.0047,string_same_number_words:-.0082,excess_string_length:.0828,active_token_query_suggestion:-.0244,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0},e3_unified:{frecency:.1119,type_navigation_channel:-.0044,type_navigation_file:-.0036,type_navigation_mpim:-.0466,type_navigation_user:.0979,type_query:-.0432,active_token_filter_in:2e-4,active_token_filter_from:-.0151,active_token_filter_to:-.001,active_token_filter_before:-.0014,active_token_filter_during:-8e-4,active_token_filter_on:-2e-4,active_token_filter_after:-.001,active_token_filter_has:-7e-4,active_token_member:0,active_token_string:.014,active_token_phrase:0,string_exact_match:-1e-4,string_exact_prefix_match:-.0228,string_normal_match:-.001,string_normal_prefix_match:-.02,string_same_number_words:-.0158,excess_string_length:-.005,active_token_query_suggestion:-.0374,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0},omni_switcher_1:{frecency:.1119,type_navigation_channel:-.0044,type_navigation_file:-.0036,type_navigation_mpim:-.0466,type_navigation_user:.0979,type_query:-.0432,active_token_filter_in:2e-4,active_token_filter_from:-.0151,active_token_filter_to:-.001,active_token_filter_before:-.0014,active_token_filter_during:-8e-4,active_token_filter_on:-2e-4,active_token_filter_after:-.001,active_token_filter_has:-7e-4,active_token_member:0,active_token_string:.014,active_token_phrase:0,string_exact_match:-1e-4,string_exact_prefix_match:-.0228,string_normal_match:-.001,string_normal_prefix_match:-.02,string_same_number_words:-.0158,excess_string_length:-.005,active_token_query_suggestion:-.0374,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0,type_navigation_team:1,type_navigation_view:1,type_user_query:4},search_switcher_1:{frecency:1}};var k=function(){function e(t){u()(this,e);this.featureList=t}p()(e,[{key:"weightForFeature",value:function e(t,a){return 1}},{key:"score",value:function e(t){var a=this;return Object(f["reduce"])(this.featureList,function(e,n){return e+a.weightForFeature(n,t)*n.numericValue},0)}},{key:"featuresVersion",get:function e(){return"0"}},{key:"serialized",get:function e(){var t=Object(f["join"])(Object(f["map"])(this.featureList,function(e){return e.serialized}),",");return this.featuresVersion+":"+t}}]);return e}();var O=function(e){l()(t,e);function t(e){u()(this,t);var a=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));window.AutocompleteModelWeightsMap=y;return a}p()(t,[{key:"weightForFeature",value:function e(t,a){return y[a][t.name]?y[a][t.name]:0}},{key:"featuresVersion",get:function e(){return"v6"}}],[{key:"fromSuggestion",value:function e(t){return new this([new T(t),new E("query_suggestion_score"),new S("type_navigation_channel",b["b"].CHANNEL_NAVIGATION,t),new S("type_navigation_file",b["b"].FILE_NAVIGATION,t),new S("type_navigation_mpim",b["b"].MPIM_NAVIGATION,t),new S("type_navigation_user",b["b"].USER_NAVIGATION,t),new S("type_query",b["b"].QUERY,t),new S("type_query_history",b["b"].QUERY_HISTORY,t),new I("active_token_filter_in",b["a"].FILTER_IN,t),new I("active_token_filter_from",b["a"].FILTER_FROM,t),new I("active_token_filter_to",b["a"].FILTER_TO,t),new I("active_token_filter_before",b["a"].FILTER_BEFORE,t),new I("active_token_filter_during",b["a"].FILTER_DURING,t),new I("active_token_filter_on",b["a"].FILTER_ON,t),new I("active_token_filter_after",b["a"].FILTER_AFTER,t),new I("active_token_filter_has",b["a"].FILTER_HAS,t),new I("active_token_member",b["a"].MEMBER,t),new I("active_token_string",b["a"].STRING,t),new I("active_token_phrase",b["a"].PHRASE,t),new x("string_exact_match",t,P),new x("string_exact_prefix_match",t,D),new x("string_normal_match",t,F),new x("string_normal_prefix_match",t,L),new x("string_same_number_words",t,B),new M("excess_string_length",t,U),new C(t),new A(t),new I("active_token_query_suggestion",b["a"].API,t),new N(t),new S("type_navigation_expert_channel",b["b"].EXPERT_CHANNEL_NAVIGATION,t),new R(t),new S("type_navigation_team",b["b"].TEAM_NAVIGATION,t),new S("type_navigation_view",b["b"].VIEW_NAVIGATION,t),new S("type_user_query",b["b"].QUERY_USER,t)])}}]);return t}(k);var w=function(){function e(t,a){u()(this,e);this._name=t;this._valueOrNull=a}p()(e,[{key:"name",get:function e(){return this._name}},{key:"numericValue",get:function e(){var t=parseFloat(this._valueOrNull);if(null===this._valueOrNull||isNaN(t))return 0;return t}},{key:"stringValue",get:function e(){if(null===this._valueOrNull||void 0===this._valueOrNull)return"";return this._valueOrNull.toString()}},{key:"serialized",get:function e(){return this.stringValue}}]);return e}();var E=function(e){l()(t,e);function t(e){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null))}return t}(w);var C=function(e){l()(t,e);function t(e){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"id",e.logId))}return t}(w);var j=function(e){l()(t,e);function t(e,a){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a?1:0))}p()(t,[{key:"serialized",get:function e(){if(!this._valueOrNull)return"";return"1"}}]);return t}(w);var S=function(e){l()(t,e);function t(e,a,n){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.type===a))}return t}(j);var I=function(e){l()(t,e);function t(e,a,n){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.lastSuggestionToken&&n.lastSuggestionToken.type===a))}return t}(j);var T=function(e){l()(t,e);function t(e){u()(this,t);var a=null;e.type===b["b"].QUERY?a=e.lastSuggestionToken&&"number"===typeof e.lastSuggestionToken.frecencyScore?e.lastSuggestionToken.frecencyScore:null:e.type!==b["b"].CHANNEL_NAVIGATION&&e.type!==b["b"].MPIM_NAVIGATION&&e.type!==b["b"].USER_NAVIGATION&&e.type!==b["b"].TEAM_NAVIGATION&&e.type!==b["b"].VIEW_NAVIGATION||(a=e.frecencyScore);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"frecency",a))}return t}(w);var N=function(e){l()(t,e);function t(e){u()(this,t);var a=null;a=e.type===b["b"].QUERY&&e.lastSuggestionToken&&e.lastSuggestionToken.type===b["a"].API?e.lastSuggestionToken.querySuggestionScore:e.querySuggestionScore||a;return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"query_suggestion_score_v2",a))}return t}(w);var A=function(e){l()(t,e);function t(e){u()(this,t);var a=null;e.type===b["b"].FILE_NAVIGATION&&(a=e.rawScore);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"file_suggestion_score",a))}return t}(w);var R=function(e){l()(t,e);function t(e){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"bm25_score",e.bm25Score||null))}return t}(w);var M=function(e){l()(t,e);function t(e,a,n){u()(this,t);var i=t.textOrNullFromSuggestion(a);if(!i){var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null));return r()(o)}var s=t.clean(a.query);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n(i,s)))}p()(t,null,[{key:"clean",value:function e(t){return String(t)}},{key:"normalized",value:function e(a){return t.clean(a).toLowerCase().replace(/[^a-z0-9]/g," ").replace(/\s+/g," ")}},{key:"lastSuggestionTokenString",value:function e(a){return a&&a.lastSuggestionToken?t.clean(a.lastSuggestionToken.toString()):""}},{key:"textOrNullFromSuggestion",value:function e(a){if(t.isActiveTokenStringLike(a))return t.lastSuggestionTokenString(a);if(a.type===b["b"].FILE_NAVIGATION)return a.toString();return null}},{key:"isActiveTokenStringLike",value:function e(t){if(!t.lastSuggestionToken)return false;return t.lastSuggestionToken.type===b["a"].STRING||t.lastSuggestionToken.type===b["a"].PHRASE||t.lastSuggestionToken.type===b["a"].API}}]);return t}(w);var x=function(e){l()(t,e);function t(e,a,n){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,function(e,t){return n(e,t)?1:0}))}p()(t,[{key:"serialized",get:function e(){if(!this._valueOrNull)return"";return"1"}}]);return t}(M);function P(e,t){return e===t}function D(e,t){return Object(f["startsWith"])(e,t)}function F(e,t){return M.normalized(e)===M.normalized(t)}function L(e,t){return Object(f["startsWith"])(M.normalized(e),M.normalized(t))}function B(e,t){return Object(f["words"])(e).length+Object(f["endsWith"])(e," ")===Object(f["words"])(t).length}function U(e,t){return Math.max(0,e.length-t.length)}var q=a(282);var G=a(886);a.d(t,"f",function(){return W});a.d(t,"h",function(){return V});a.d(t,"e",function(){return z});a.d(t,"a",function(){return K});a.d(t,"b",function(){return Y});a.d(t,"i",function(){return J});a.d(t,"d",function(){return Z});a.d(t,"c",function(){return X});a.d(t,"g",function(){return $});a.d(t,"j",function(){return ee});var H=function(){function e(t){u()(this,e);this.state=t}p()(e,[{key:"toMap",value:function e(t){return{score:this.score(t),type:this.type,featureVector:this.featureVector.serialized}}},{key:"score",value:function e(t){return this.featureVector.score(t)}},{key:"toString",value:function e(){return""}},{key:"toTextyString",value:function e(){return Object(v["a"])(this.toString(),Object(g["getUserHighlightWords"])(this.state))}},{key:"featureVector",get:function e(){return _(this)}},{key:"type",get:function e(){return b["b"].UNKNOWN}},{key:"logId",get:function e(){return""}}]);return e}();var W=function(e){l()(t,e);function t(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];u()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i._query=a;i.suggestionTokenList=n;return i}p()(t,[{key:"withQuerySuggestionToken",value:function e(a){return new t(this.state,"",this.suggestionTokenList.concat([a]))}},{key:"toMap",value:function e(a){var n=this.toTextyString();var r=this.toString();return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_query_completion:true,suggestion_replacement:n,suggestion_replacement_for_request:r,token_list:Object(f["map"])(this.suggestionTokenList,function(e){return e.toMap(a)}),key:n})}},{key:"toString",value:function e(){return Object(f["join"])(Object(f["map"])(this.suggestionTokenList,function(e){return e.toString()})," ")}},{key:"toHtml",value:function e(){return Object(f["join"])(Object(f["map"])(this.suggestionTokenList,function(e){return e.toHtml()})," ")}},{key:"toTextyString",value:function e(){return Object(f["join"])(Object(f["map"])(this.suggestionTokenList,function(e){return e.toTextyString()})," ")}},{key:"type",get:function e(){return b["b"].QUERY}},{key:"query",get:function e(){return this._query}},{key:"lastSuggestionToken",get:function e(){return!this.suggestionTokenList||this.suggestionTokenList.length<1?null:this.suggestionTokenList[this.suggestionTokenList.length-1]}},{key:"logId",get:function e(){return this.lastSuggestionToken?this.lastSuggestionToken.logId:""}}],[{key:"fromString",value:function e(t,a){var n=q["g"].tokenListFromString(t,a);return new this(t,"",n)}}]);return t}(H);var V=function(e){l()(t,e);function t(){u()(this,t);return r()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"type",get:function e(){return b["b"].QUERY_USER}}]);return t}(W);var z=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,q["g"].tokenListFromString(e,n)));o.index=i;o.exact_string=n;return o}p()(t,[{key:"score",value:function e(t){return 50-this.index}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_query_history:true,exact_string:this.exact_string,deletable:true})}},{key:"type",get:function e(){return b["b"].QUERY_HISTORY}},{key:"logId",get:function e(){return Object(G["a"])(this.exact_string)}}]);return t}(W);var Q=function(e){l()(t,e);function t(e,a,n){u()(this,t);var i=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i._frecencyScore=a;i._query=n;return i}p()(t,[{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_navigational:true})}},{key:"frecencyScore",get:function e(){return this._frecencyScore}},{key:"query",get:function e(){return this._query}},{key:"logId",get:function e(){return""}}]);return t}(H);var K=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));o.channel=n;return o}p()(t,[{key:"toString",value:function e(){return"<#"+this.channel.id+"|"+this.channel.name+">"}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_channel:true,channel:this.channel,key:this.channel.id,id:this.channel.id})}},{key:"type",get:function e(){return b["b"].CHANNEL_NAVIGATION}},{key:"logId",get:function e(){return""+this.channel.id}}]);return t}(Q);var Y=function(e){l()(t,e);function t(e,a,n,i,o){u()(this,t);var s=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null,i,o));s._querySuggestionScore=a;s._bm25Score=n;return s}p()(t,[{key:"type",get:function e(){return b["b"].EXPERT_CHANNEL_NAVIGATION}},{key:"querySuggestionScore",get:function e(){return this._querySuggestionScore}},{key:"bm25Score",get:function e(){return this._bm25Score}}]);return t}(K);var J=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));o.user=n;return o}p()(t,[{key:"getUser",value:function e(){return this.user}},{key:"toString",value:function e(){var t=this.user.profile.real_name||this.user.profile.display_name||this.user.name;return"<@"+this.user.id+"|@"+t+">"}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_user:true,user:this.user,key:this.user.id,id:this.user.id})}},{key:"type",get:function e(){return b["b"].USER_NAVIGATION}},{key:"logId",get:function e(){return""+this.user.id}}]);return t}(Q);var Z=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));o.mpim=n;return o}p()(t,[{key:"toString",value:function e(){var t=Object(m["b"])(this.state,this.mpim);return"<#"+this.mpim.id+"|"+t+">"}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_mpim:true,mpim:this.mpim,key:this.mpim.id,id:this.mpim.id})}},{key:"type",get:function e(){return b["b"].MPIM_NAVIGATION}},{key:"logId",get:function e(){return""+this.mpim.id}}]);return t}(Q);var X=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,i));o.file=n;o._rawScore=a;return o}p()(t,[{key:"toString",value:function e(){return this.file.title}},{key:"toHtml",value:function e(){return Object(q["i"])(this.toString())}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_file:true,file:this.file,type:this.fileType,html:this.toHtml(),fileTypeDescription:this.fileTypeDescription,key:this.file.id,id:this.file.id})}},{key:"rawScore",get:function e(){return this._rawScore}},{key:"type",get:function e(){return b["b"].FILE_NAVIGATION}},{key:"fileId",get:function e(){return this.file.id}},{key:"fileType",get:function e(){return this.file.highlight_type||this.file.filetype}},{key:"fileTypeDescription",get:function e(){return this.file.is_external?Object(h["a"])(this.file):this.file.pretty_type}},{key:"logId",get:function e(){return""+this.file.id}}]);return t}(Q);var $=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));o.model=n;o._rawScore=a;return o}p()(t,[{key:"toString",value:function e(){return this.model.name}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_team:true,team:this.model,key:this.model.id,id:this.model.id})}},{key:"type",get:function e(){return b["b"].TEAM_NAVIGATION}},{key:"logId",get:function e(){return""+this.model.id}}]);return t}(Q);var ee=function(e){l()(t,e);function t(e,a,n,i){u()(this,t);var o=r()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));o.model=n;o._rawScore=a;return o}p()(t,[{key:"toString",value:function e(){return this.model.name}},{key:"toMap",value:function e(a){return Object(f["assignIn"])(o()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,a),{is_type_view:true,view:this.model,key:this.model.id,id:this.model.id})}},{key:"type",get:function e(){return b["b"].VIEW_NAVIGATION}},{key:"logId",get:function e(){return""+this.model.id}}]);return t}(Q)},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return r});a.d(t,"c",function(){return i});a.d(t,"d",function(){return o});a.d(t,"e",function(){return s});a.d(t,"o",function(){return l});a.d(t,"g",function(){return c});a.d(t,"j",function(){return u});a.d(t,"l",function(){return d});a.d(t,"f",function(){return p});a.d(t,"i",function(){return f});a.d(t,"h",function(){return m});a.d(t,"k",function(){return h});a.d(t,"p",function(){return v});a.d(t,"a",function(){return b});a.d(t,"n",function(){return _});a.d(t,"s",function(){return y});a.d(t,"w",function(){return k});a.d(t,"v",function(){return O});a.d(t,"t",function(){return w});a.d(t,"m",function(){return E});a.d(t,"u",function(){return C});a.d(t,"r",function(){return j});a.d(t,"q",function(){return S});var n=a(4);var r=Object(n["d"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.companyAddress)return null;return e.checkoutFlow.companyAddress});var i=Object(n["d"])(function(e){var t=r(e);if(!t)return null;return t.country});var o=Object(n["d"])(function(e){var t=r(e);if(!t)return null;return t.postalCode});var s=Object(n["d"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.config)return null;return e.checkoutFlow.config});var l=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isCheckoutAddressFormDataLoaded});var c=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.creditCardData});var u=Object(n["d"])(function(e){var t=c(e);if(!t)return null;return t.token});var d=Object(n["d"])(function(e){var t=u(e);if(!t)return null;return t.id});var p=Object(n["d"])(function(e){var t=u(e);if(!t||!t.card)return null;return t.card.brand});var f=Object(n["d"])(function(e){var t=u(e);if(!t||!t.card)return null;return t.card.last4});var m=Object(n["d"])(function(e){var t=c(e);if(!t)return null;return t.formError});var h=Object(n["d"])(function(e){var t=c(e);if(!t)return null;return t.tokenError});var v=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return false;return e.checkoutFlow.isCreatingCreditCardToken});var g=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentStatus});var b=Object(n["d"])(function(e){var t=g(e);if(!t)return false;return true===t.ok&&!t.error});var _=Object(n["d"])(function(e){var t=g(e);if(!t)return"";if(t.error&&t.msg)return t.msg;return t.error});var y=Object(n["d"])(function(e){var t=g(e);if(!t)return false;return t.isProcessingPayment});var k=Object(n["d"])(function(e){var t=s(e);if(!t)return null;return t.stripeApiKey});var O=Object(n["d"])(function(e){var t=s(e);if(!t)return null;return t.sourcesPayable});var w=Object(n["d"])(function(e){var t=s(e);if(!t||!t.user)return false;return t.user.is_owner});var E=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.invoiceData});var C=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentMethodSelected});var j=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isAppDisconnectedDialogShown});var S=Object(n["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.activeCheckoutStep})},,,,,,,,,,,function(e,t,a){"use strict";var n=a(2);var r=a(11);var i=a(493);var o=a(69);var s=a(21);var l=a(312);var c=a(428);var u=a(19);var d=a(895);var p=a(23);var f=a(206);var m=a(12);var h=a(36);var v=a(207);var g=a(75);var b=a(153);var _=a(471);var y=a(13);var k=Object(y["c"])("TS.mentions.maybeUpdateMentions");var O=a(708);var w=a(794);var E=a(617);a.d(t,"a",function(){return C});a.d(t,"i",function(){return S});a.d(t,"k",function(){return I});a.d(t,"j",function(){return T});a.d(t,"b",function(){return A});a.d(t,"h",function(){return M});a.d(t,"c",function(){return G});a.d(t,"d",function(){return H});a.d(t,"e",function(){return W});a.d(t,"f",function(){return V});a.d(t,"g",function(){return z});var C=g["isDesktop"]||window.Notification||window.webkitNotifications;var j=["channel_leave","channel_join","group_leave","group_join"];function S(e,t,a){if(!t||!a)return b["a"].BAD_ARGUMENTS;if(t.no_display)return b["a"].NO_DISPLAY_OVERRIDE;if(Object(h["isReply"])(t))return b["a"].REPLY_MESSAGE;if(t.subtype&&-1!==j.indexOf(t.subtype))return b["a"].JOIN_LEAVE_MESSAGE;var n=G(e,a.id);if("nothing"===n)return b["a"].SILENT_PREFERENCE;var o=Object(O["a"])(a);var s=Object(r["getCurrentUserId"])(e);var l=N(e,t,o);if("bot_message"===t.subtype&&"everything"!==n&&!l)return b["a"].BOT_MESSAGE;if(Object(r["isFeatureEnabled"])(e,"feature_wta_notifications")&&Object(h["isAppMessage"])(e,t)&&"everything"!==n&&!l)return b["a"].APP_MESSAGE;var c=Object(h["canCountAsUnreadForCurrentUser"])(t,s);var u=l&&c;var d=Object(O["b"])(a.id);!c||Object(f["isWindowFocused"])(e)||Object(r["isFeatureEnabled"])(e,"feature_incremental_unread_counts")||x(u,d);if(!A())return b["a"].PERMISSION_DENIED;if(!u&&"everything"!==n)return b["a"].NO_MENTIONS;if(P(e,t,a))return b["a"].ACTIVE_VIEW_VISIBLE;if(Object(h["isFromCurrentUser"])(t,s))return b["a"].FROM_CURRENT_USER;if(t.no_notifications)return b["a"].NO_NOTIFICATIONS_OVERRIDE;if(d)return b["a"].MUTED_CHANNEL;if(Object(i["getCurrentMemberDnd"])(e)&&!t._ignore_dnd)return b["a"].USER_IN_DND;if(Object(m["shouldSuppressOrgChannel"])(e,a))return b["a"].LESS_RELEVANT_ORG_TEAM;if(F(e,t,a))return b["a"].OVERSIZED_MENTION;return b["a"].NONE}function I(e,t,a){if(!t||!a)return b["a"].BAD_ARGUMENTS;if(t.no_display)return b["a"].NO_DISPLAY_OVERRIDE;if(Object(h["isReply"])(t))return b["a"].REPLY_MESSAGE;Object(f["isWindowFocused"])(e)||Object(r["isFeatureEnabled"])(e,"feature_incremental_unread_counts")||x(true);if("nothing"===W(e,a.id))return b["a"].SILENT_PREFERENCE;if(!A())return b["a"].PERMISSION_DENIED;if(P(e,t,a))return b["a"].ACTIVE_VIEW_VISIBLE;if(Object(h["isFromCurrentUser"])(t,Object(r["getCurrentUserId"])(e)))return b["a"].FROM_CURRENT_USER;if(t.no_notifications)return b["a"].NO_NOTIFICATIONS_OVERRIDE;if(Object(i["getCurrentMemberDnd"])(e)&&!t._ignore_dnd)return b["a"].USER_IN_DND;if(Object(m["shouldSuppressOrgChannel"])(e,a))return b["a"].LESS_RELEVANT_ORG_TEAM;return b["a"].NONE}function T(e,t){if(!t||!t.channel)return b["a"].BAD_ARGUMENTS;var a=false;var n=Object(u["getChannelById"])(e,t.channel,a);if(!n||Object(m["isNonExistent"])(n)||Object(m["isFromAnotherTeam"])(n))return b["a"].BAD_ARGUMENTS;var i=t.msg,o=t.thread_ts;var s={ts:i,thread_ts:o};if(!Object(h["isReply"])(s))return b["a"].NOT_REPLY_MESSAGE;if(Object(m["shouldSuppressOrgChannel"])(e,n))return b["a"].LESS_RELEVANT_ORG_TEAM;if(D(e,t,n))return b["a"].ACTIVE_VIEW_VISIBLE;var l=Object(d["getMaxTimestamp"])(e);if(!l||i>l)return b["a"].REDUNDANT_SOCKET_EVENT;var p=void 0;p=Object(r["isFeatureEnabled"])(e,"feature_react_threads")?Object(c["getSubscriptionState"])(e,{channelId:n.id,ts:o,fetchIfMissing:false}):Object(w["c"])(n.id,o);var f=p?p.last_read||p.lastRead:null;if(f&&f>=i)return b["a"].ALREADY_SEEN_REPLY;return b["a"].NONE}function N(e,t,a){var n=false;var i=Object(h["isAppMessage"])(e,t);var o=Object(r["isFeatureEnabled"])(e,"feature_wta_notifications");if(a){var c={ignoreHighlightWords:Object(h["shouldIgnoreHighlightWords"])(t,i,o),ignoreAtEveryoneMentions:false,ignoreAtChannelMentions:false,ignoreAtHereMentions:"away"===Object(l["getCurrentMemberPresence"])(e)};n=Object(h["containsMention"])(t,Object(r["getCurrentUserId"])(e),Object(s["getUserHighlightWords"])(e),Object(p["getTeamId"])(e),c);n&&k()}else{var u={ignoreHighlightWords:Object(h["shouldIgnoreHighlightWords"])(t,i,o),ignoreAtEveryoneMentions:true,ignoreAtChannelMentions:true,ignoreAtHereMentions:true};n=Object(h["containsMention"])(t,Object(r["getCurrentUserId"])(e),Object(s["getUserHighlightWords"])(e),Object(p["getTeamId"])(e),u);n&&k()}return n}function A(){if(!C)return false;if(g["isDesktop"])return true;return"granted"===M()}function R(){if(!C)return false;if(A())return false;if("denied"===M())return false;return true}function M(){if(g["isDesktop"]||!C)return"na";if(window.Notification)return window.Notification.permission;return"na"}function x(e,t){e&&-1===document.title.indexOf("!")?document.title="! "+document.title:t||-1!==document.title.indexOf("*")||(document.title="* "+document.title)}function P(e,t,a){if(!Object(f["isWindowFocused"])(e))return false;if(Object(h["containsAtCommand"])(t.text))return false;var n=Object(o["getPrimaryView"])(e);return a.id===n&&!t._hidden_reply&&!Object(_["b"])()}function D(e,t,a){if(!Object(f["isWindowFocused"])(e))return false;if(Object(h["containsAtCommand"])(t.text))return false;if(Object(r["isFeatureEnabled"])(e,"feature_react_threads")){var i=Object(o["getSecondaryView"])(e);if("convo"!==i)return false;var s=Object(o["getFlexParams"])(e);var l=Object(v["decodeThreadKey"])(Object(n["first"])(s)),c=l.channelId,u=l.threadTs;return t.thread_ts&&a.id===c&&t.thread_ts===u}return t.thread_ts&&a.id===Object(E["a"])()&&t.thread_ts===Object(E["b"])()}function F(e,t,a){if(!Object(r["pageNeedsEnterprise"])(e))return false;if(Object(h["canMsgMentionChannelIfMention"])({state:e,text:t.text,channelId:a.id,userId:t.user}))return false;return true}function L(e,t){if("desktop"!==t&&"mobile"!==t)throw new Error("Platform must be desktop or mobile: "+t);return Object(s["getNotificationsGlobalPref"])(e,"global_"+t)}function B(e,t){if("desktop"!==t&&"mobile"!==t)throw new Error("Platform must be desktop or mobile: "+t);if(Object(r["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")){var a=Object(s["getNotificationsGlobalPref"])(e,"global_mpdm_"+t);if(!a){var n=L(e,t);if("nothing"===n)return"nothing";return"everything"}return a}return Object(s["getNotificationsGlobalPref"])(e,"global_"+t)}function U(e,t,a){var n=false;var r=Object(u["getChannelById"])(e,t,n);if(!r||Object(m["isNonExistent"])(r)||Object(m["isFromAnotherTeam"])(r))return null;if(Object(m["isMpim"])(r)||Object(m["isIm"])(r))return B(e,a);return L(e,a)}function q(e,t,a){if("desktop"!==a&&"mobile"!==a)throw new Error("Platform must be desktop or mobile: "+a);var n=false;var r=Object(u["getChannelById"])(e,t,n);if(!r||Object(m["isNonExistent"])(r)||Object(m["isFromAnotherTeam"])(r))return null;if(Object(m["isIm"])(r))throw new Error("IMs do not have a calculated notification setting");var i=Object(s["getNotificationsChannelPref"])(e,t,a);if(i)return i;return U(e,t,a)}function G(e,t){return q(e,t,"desktop")}function H(e,t){return q(e,t,"mobile")}function W(e,t){return U(e,t,"desktop")}function V(e,t){return U(e,t,"mobile")}function z(){var e=A();var t=null;if(!e){var a=M();t="denied"===a?"not_allowed":"default"===a?"not_yet_allowed":"impossible"}return{notificationsEnabled:e,notificationDisabledType:t}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(32);var o=a.n(i);var s=a(24);var l=a.n(s);var c=a(5);var u=a.n(c);var d=a(6);var p=a.n(d);var f=a(7);var m=a.n(f);var h=a(8);var v=a.n(h);var g=a(1);var b=a.n(g);var _=a(0);var y=a.n(_);var k=a(14);var O=a(2);var w=a(29);var E=a(164);var C=a(54);var j=a(31);var S=a(11);var I=a(10);var T=a(4);var N=a(498);var A=a(3472);var R=a(72);var M=Object(T["e"])("Record a frecency event for some message action + maybe a query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.action,r=a.query,i=void 0===r?"":r;var o=n.frecencyId;Object(S["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor")?e(Object(A["c"])({id:o,text:i})):Object(N["c"])({id:o},i)});M.propTypes={action:R["a"].MessageAction.isRequired,query:y.a.string};var x=M;var P=a(70);var D=a(44);var F=a(36);var L=a(284);var B=new I["b"]("message");var U={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var q=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");if(!Object(F["canAddReaction"])(r,i))return null;return{id:P["SLACK_ACTION_IDS"].addReaction,name:B.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(L["f"])("add_reaction"),uiElement:w["o"].ADD_REACTION_BUTTON}});q.propTypes=U;var G=q;var H=a(78);var W=a(94);var V=new I["b"]("message");var z={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var Q=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var o=i?null:r.file;if(Object(H["isFileAuthorExternal"])(e,o))return null;var s=Object(W["f"])(e,n);if(!Object(F["canReplyOrComment"])(e,{message:r,channel:s}))return null;var l=V.t("Start a thread");var c=w["o"].START_A_THREAD_BUTTON;if(o&&!i)l=V.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"});else if(Object(F["isThreadBroadcast"])(r)||Object(F["getReplyCount"])(r)){l=V.t("Reply to thread");c=w["o"].REPLY_TO_THREAD_BUTTON}return{id:P["SLACK_ACTION_IDS"].comment,name:l,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(L["f"])("thread_reply"),uiElement:c}});Q.propTypes=z;var K=Q;var Y=new I["b"]("message");var J={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var Z=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;var i=Object(W["f"])(e,n);if(!Object(F["canCopyLink"])(e,{message:r,channel:i}))return null;return{id:P["SLACK_ACTION_IDS"].copyLink,name:Y.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(L["f"])("copy_link"),uiElement:w["o"].COPY_LINK_BUTTON}});Z.propTypes=J;var X=Z;var $=new I["b"]("message");var ee={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var te=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId,r=t.messageContainerType;var i=Object(D["getMessageByTimestamp"])(e,n,a);if(!i)return null;var o=Object(W["f"])(e,n);if(!Object(F["canDeleteMessage"])(e,{message:i,channel:o,messageContainerType:r}))return null;return{id:P["SLACK_ACTION_IDS"].deleteMessage,name:$.t("Delete message"),iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(L["f"])("delete"),uiElement:w["o"].DELETE_MESSAGE_BUTTON}});te.propTypes=ee;var ae=te;var ne=a(21);var re=new I["b"]("message");var ie={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var oe=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;var i=Object(W["f"])(e,n);var o=Object(S["getCurrentUserId"])(e);var s=Object(ne["getTeamPref"])(e,"msg_edit_window_mins");if(!Object(F["canEditMessage"])(o,r,i,s))return null;return{id:P["SLACK_ACTION_IDS"].editMessage,name:re.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(L["f"])("edit"),uiElement:w["o"].EDIT_MESSAGE_BUTTON}});oe.propTypes=ie;var se=oe;var le=a(19);var ce=new I["b"]("message");var ue=new I["b"]("messages_action_items");var de={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,allUnreads:y.a.string.isRequired};var pe=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId,r=t.allUnreads;var i=Object(D["getMessageByTimestamp"])(e,n,a);if(!i)return null;var o=Object(le["getChannelById"])(e,n);if(!Object(F["canMarkUnread"])(e,{message:i,channel:o}))return null;return{id:P["SLACK_ACTION_IDS"].markUnread,name:r?ue.t("Mark above as read"):ce.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(L["f"])("mark_unread"),uiElement:w["o"].MARK_UNREAD_BUTTON}});pe.propTypes=de;var fe=pe;var me=a(272);var he=a(12);var ve=a(1101);var ge={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var be=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;var i=Object(le["getChannelById"])(e,n);if(!Object(F["canPin"])(e,{message:r,channel:i}))return null;var o=Object(me["c"])(r,i);var s=Object(he["getDisplayName"])(i);var l=Object(he["getChannelType"])(i);var c=o?w["o"].PIN_TO_THIS_CONVERSATION_BUTTON:w["o"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;return{id:P["SLACK_ACTION_IDS"].pin,name:Object(ve["a"])(o,s,l),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(L["f"])(o?"unpin":"pin"),uiElement:c}});be.propTypes=ge;var _e=be;var ye=a(684);var ke=a(1430);var Oe=Object(j["b"])("Add a reminder for a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.time,r=a.channelId,i=a.ts;var o=Object(D["getMessageByTimestamp"])(t(),r,i);return e(Object(ke["a"])({time:n,message_channel:r,message_ts:i,respond_in_channel:Object(F["reminderShouldRespondInChannel"])(o)}))});Oe.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired,time:y.a.string.isRequired};var we=Oe;var Ee=new I["b"]("message");var Ce={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,time:y.a.string.isRequired,remind:y.a.func.isRequired,clogger:y.a.object.isRequired};var je=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);return a}p()(t,[{key:"onSelected",value:function e(){var t=this.props,a=t.remind,n=t.ts,r=t.channelId,i=t.time,o=t.clogger;a({ts:n,channelId:r,time:i});o.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].CLICK,step:w["p"].MORE_ACTIONS_MENU,ui_element:w["o"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.remind,n=t.ts,i=t.channelId,s=t.time,l=o()(t,["remind","ts","channelId","time"]);return b.a.createElement(C["b"],r()({},l,{onSelected:this.onSelected}))}}]);return t}(g["PureComponent"]);je.displayName="RemindMenuItem";var Se=function e(t){return{clogger:Object(E["a"])({state:t})}};var Ie={remind:we};var Te=Object(k["connect"])(Se,Ie)(je);var Ne=Object(C["h"])(Te);var Ae={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,renderLegacySubmenu:y.a.bool};var Re={renderLegacySubmenu:true};var Me=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(a);return a}p()(t,[{key:"renderSubmenu",value:function e(t){var a=this.props,n=a.channelId,i=a.ts;var o={channelId:n,ts:i};return b.a.createElement(C["f"],r()({},t,{width:"auto"}),b.a.createElement(Ne,r()({},o,{label:Ee.t("in 20 minutes"),time:"in 20 minutes"})),b.a.createElement(Ne,r()({},o,{label:Ee.t("in 1 hour"),time:"in 1 hour"})),b.a.createElement(Ne,r()({},o,{label:Ee.t("in 3 hours"),time:"in 3 hours"})),b.a.createElement(Ne,r()({},o,{label:Ee.t("Tomorrow"),time:"Tomorrow"})),b.a.createElement(Ne,r()({},o,{label:Ee.t("Next Week"),time:"Next Week"})))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.ts,i=o()(t,["channelId","ts"]);return b.a.createElement(ye["a"],r()({},i,{renderSubmenu:this.renderSubmenu}))}}]);return t}(g["PureComponent"]);Me.displayName="Remind";Me.defaultProps=Re;var xe=Object(ye["c"])(Me);var Pe=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;var i=Object(le["getChannelById"])(e,n);if(!Object(F["canAddReminder"])(e,{message:r,channel:i}))return null;return b.a.createElement(xe,{key:"remind_submenu",label:Ee.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(L["f"])("remind"),ts:a,channelId:n,renderLegacySubmenu:true})});var De=Pe;var Fe=new I["b"]("message");var Le={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var Be=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId,r=t.messageContainerType;var i=Object(D["getMessageByTimestamp"])(e,n,a);if(!i)return null;var o=Object(W["f"])(e,n);if(!Object(F["canRemoveBroadcast"])(e,{message:i,channel:o,messageContainerType:r}))return null;var s=Object(he["isPublicChannel"])(o)||Object(he["isPrivateChannel"])(o)?Fe.t("Remove from channel"):Fe.t("Remove from conversation");return{id:P["SLACK_ACTION_IDS"].removeBroadcast,name:s,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(L["f"])("remove"),uiElement:w["o"].REMOVE_FROM_CONVERSATION_BUTTON}});Be.propTypes=Le;var Ue=Be;var qe=new I["b"]("message");var Ge={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var He=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var i=Object(D["getMessageByTimestamp"])(e,n,a);if(!i)return null;if(!Object(F["canBeShared"])(i,r))return null;var o=Object(F["isShareableFileMsg"])(i)?qe.t("Share file \u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):qe.t("Share message \u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:P["SLACK_ACTION_IDS"].shareMessage,name:o,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(L["f"])("share"),uiElement:w["o"].SHARE_MESSAGE_BUTTON}});He.propTypes=Ge;var We=He;var Ve=new I["b"]("message");var ze={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var Qe=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);if(!r)return null;if(!Object(F["canStar"])(r))return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var o=Object(F["getFileIdFromMessage"])(r,i);var s=Object(F["isStarred"])(r);var l=s?Ve.t("Unstar message"):Ve.t("Star message");if(Object(F["isFileComment"])(r)){var c=o||Object(O["first"])(r.files);var u=r.comment&&Object(H["getFileCommentById"])(e,c,r.comment.id);u&&(l=s?Ve.t("Unstar file comment"):Ve.t("Star file comment"))}else if(o){s=Object(F["isStarred"])(r,Object(H["getFileById"])(e,o),null);l=s?Ve.t("Unstar file"):Ve.t("Star file")}var d=s?w["o"].UNSTAR_MESSAGE_BUTTON:w["o"].STAR_MESSAGE_BUTTON;return{id:P["SLACK_ACTION_IDS"].star,name:l,iconType:s?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(L["f"])(s?"unstar":"star"),uiElement:d}});Qe.propTypes=ze;var Ke=Qe;var Ye=a(428);var Je=a(794);var Ze=new I["b"]("message");var Xe=Object(T["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId;var r=Object(D["getMessageByTimestamp"])(e,n,a);var i=Object(le["getChannelById"])(e,n);var o=Object(he["isArchived"])(i);var s=Object(Ye["getIsSubscribed"])(e,{ts:a,channelId:n});var l=o&&s;if(Object(S["isFeatureEnabled"])(e,"feature_modernize_get_msg_actions")){if(!Object(F["canReplyOrComment"])(e,{message:r,channel:i,ignoreMembership:l}))return null}else if(!Object(Je["a"])(i,r,l))return null;var c=Object(ne["getUserPref"])(e,"threads_everything");var u=Object(F["getReplyCount"])(r);var d=Ze.t("Follow message");var p=Ze.t("You\u2019ll be notified about any replies");var f=w["o"].FOLLOW_MESSAGE_BUTTON;var m=Object(S["isFeatureEnabled"])(e,"feature_threads_copy_change");var h=void 0;var v=Object(Ye["getIsSubscriptionLoading"])(e,{ts:a,channelId:n});if(v){d=Ze.t("Loading \u2026");p=""}else if(s){if(u){d=Ze.t("Unfollow thread");h=m?Ze.t("This will be removed from Threads"):Ze.t("This will be removed from All Threads");p=c?Ze.t("You won\u2019t be notified about new replies"):h}else{d=Ze.t("Unfollow message");h=m?Ze.t("Replies will be excluded from Threads"):Ze.t("Replies will be excluded from All Threads");p=c?Ze.t("You won\u2019t be notified about replies"):h}f=w["o"].UNFOLLOW_MESSAGE_BUTTON}else if(u){d=Ze.t("Follow thread");h=m?Ze.t("New replies will appear in Threads"):Ze.t("New replies will appear in All Threads");p=c?Ze.t("You\u2019ll be notified about new replies"):h}else{d=Ze.t("Follow message");h=m?Ze.t("Any replies will show up in Threads"):Ze.t("Any replies will show up in All Threads");p=c?Ze.t("You\u2019ll be notified about any replies"):h}return{id:P["SLACK_ACTION_IDS"].subscribe,name:d,description:p,isLoading:v,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(L["f"])(s?"thread_unfollow":"thread_follow"),uiElement:f}});Xe.propTypes={ts:y.a.string.isRequired,channelId:y.a.string.isRequired};var $e=Xe;function et(e){return r()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:w["o"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(L["e"])(e))}var tt=a(1157);function at(e,t){if(!e)return false;var a=Object(tt["a"])(e.name);if(!a)return false;var n=Object(tt["a"])(e.description);var r=t.split(/\s+/);return Object(O["every"])(r,function(e){return Object(O["includes"])(a,e)||Object(O["includes"])(n,e)})}var nt=a(315);var rt=new I["b"]("app_actions");var it=function e(t,a){return[G(t,a),K(t,a),X(t,a),ae(t,a),se(t,a),fe(t,a),_e(t,a),Ue(t,a),We(t,a),Ke(t,a),$e(t,a)]};var ot=function e(t){return r()({},t,{danger:false,description:rt.t("Slack")})};var st=function e(t){return{id:t.frecencyId,action:t}};var lt=Object(T["e"])("Search message actions (app + Slack) in Redux store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.query,r=void 0===n?"":n,i=o()(a,["query"]);var s=t();var c=Object(nt["selectMessageActions"])(s),u=c.actions;var d=it(s,i).filter(function(e){return e&&!e.isLoading});var p=[].concat(l()(d.map(ot)),l()(u.map(et)));p=p.filter(function(e){return at(e,Object(tt["a"])(r))});p=Object(A["d"])(s,{query:r,list:p.map(st)});p=p.map(function(e){return e.action});return p});lt.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired,messageContainerType:y.a.oneOf(Object(O["values"])(P["MESSAGE_CONTAINERS"])),query:y.a.string};var ct=Object(T["e"])("Search message actions (app + Slack), returns as Promise",function(e,t,a){var n=e(lt(a));return Promise.resolve(n)});ct.propTypes=lt.propTypes;var ut=ct;var dt=a(610);var pt=a(17);var ft=a(454);var mt=a(323);var ht=function e(t,a,n){var r=a.channelId,i=a.ts;return n(function(e,a){var n=a();var o=Object(D["getMessageByTimestamp"])(n,r,i);var s=Object(H["getFileFromMsg"])(n,o);var l=Object(mt["b"])(o,s);return Object(ft["a"])({e:t,rxn_key:l})})};var vt=ht;var gt=a(150);var bt=Object(j["b"])("Comment on a message or file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.ts;var i=t();var o=Object(D["getMessageByTimestamp"])(i,n,r);var s=Object(S["isFeatureEnabled"])(i,"feature_file_threads");var l=Object(F["getFileIdFromMessage"])(o,s);if(l&&!s)e(Object(gt["c"])({fileId:l}));else{var c=o.thread_ts||r;e(Object(gt["g"])({channelId:n,threadTs:c}))}});bt.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired};var _t=bt;var yt=a(50);var kt=a(361);var Ot=Object(j["b"])("Copy link to message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.ts;var i=t();var o=Object(D["getMessageByTimestamp"])(i,n,r);var s=o.thread_ts;var l=Object(yt["getCurrentTeam"])(i);var c=l&&l.domain;var u=Object(H["getFileFromMsg"])(i,o);var d=u&&!Object(F["isFileComment"])(o)?u.permalink:Object(F["constructAbsoluteMsgPermalink"])({teamDomain:c,channelId:n,ts:r,threadTs:s});Object(kt["writeText"])(d)});Ot.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired};var wt=Ot;var Et=a(1168);var Ct=a(77);var jt=Object(j["b"])("Delete message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.ts,i=a.rollup;var o=b.a.createElement(Et["a"],{channelId:n,ts:r,rollup:i});Promise.resolve().then(function(){return e(Object(Ct["openModal"])({element:o}))})});jt.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired};var St=jt;var It=a(1169);var Tt=Object(j["b"])("Remove message broadcast",function(e,t,a){var n=b.a.createElement(It["a"],a);Promise.resolve().then(function(){return e(Object(Ct["openModal"])({element:n}))})});Tt.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired};var Nt=Tt;var At=a(969);var Rt=a(1431);var Mt=Object(j["b"])("Copy link to message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.ts;var i=t();var o=Object(W["f"])(i,n);var s=Object(D["getMessageByTimestamp"])(i,n,r);var l=Object(S["isFeatureEnabled"])(i,"feature_file_threads");var c=Object(F["getFileIdFromMessage"])(s,l);c&&Object(F["isFileComment"])(s)?Object(At["a"])(c,false,false,o,true):Object(Rt["a"])(r,o)});Mt.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired};var xt=Mt;var Pt=a(787);var Dt=function e(t,a,n,r){var i=n.ts,o=n.channelId,s=n.rollup;var l=Object(pt["b"])();if(a.appId)return r(Object(nt["runMessageAction"])({actionId:a.id,appId:a.appId,messageTs:i,channelId:o}));switch(a.id){case P["SLACK_ACTION_IDS"].addReaction:return vt(t,n,r);case P["SLACK_ACTION_IDS"].comment:return r(_t({ts:i,channelId:o}));case P["SLACK_ACTION_IDS"].copyLink:return r(wt({ts:i,channelId:o}));case P["SLACK_ACTION_IDS"].deleteMessage:return r(St({ts:i,channelId:o,rollup:s}));case P["SLACK_ACTION_IDS"].editMessage:l.warn("Edit message is an unhandled case");return null;case P["SLACK_ACTION_IDS"].markUnread:return r(Object(le["setUnreadPoint"])({channelId:o,unreadTs:i}));case P["SLACK_ACTION_IDS"].pin:return r(Object(dt["togglePin"])({ts:i,channelId:o}));case P["SLACK_ACTION_IDS"].remind:l.warn("Remind is an unhandled case");return null;case P["SLACK_ACTION_IDS"].removeBroadcast:return r(Nt({ts:i,channelId:o}));case P["SLACK_ACTION_IDS"].shareMessage:return r(xt({ts:i,channelId:o}));case P["SLACK_ACTION_IDS"].star:return r(Object(Pt["b"])({ts:i,channelId:o}));case P["SLACK_ACTION_IDS"].subscribe:return r(Object(Ye["toggleThreadSubscription"])({ts:i,channelId:o}));default:l.warn("Unknown action type "+a.id);return null}};var Ft=Dt;var Lt=a(103);var Bt=a(92);var Ut=a(475);var qt=a(9);var Gt=a.n(qt);var Ht=a(15);var Wt=a.n(Ht);var Vt=a(888);var zt=a(18);var Qt=a(108);var Kt=a(247);var Yt=a(421);var Jt=56;var Zt={action:R["a"].MessageAction.isRequired,className:y.a.string,pillarClassName:y.a.string,app:R["a"].maybeUnknown(R["a"].App)};var Xt={className:"",pillarClassName:"",app:void 0};var $t=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(a,["renderEnter","renderIcon","renderIconMaybe"]);return a}p()(t,[{key:"renderIcon",value:function e(){var t=this.props,a=t.action,n=t.app;var r=n&&n.icons||a.iconSet;if(r){var i=Jt;var o=Object(Yt["a"])({icons:r},i);return b.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}if(a.iconType)return b.a.createElement(zt["b"],{type:a.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return b.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"renderEnter",value:function e(){var t=this.props,a=t.className,n=t.pillarClassName;var r=Wt()(a,"c-menu_item__enter",Gt()({},n+"__enter",n));return b.a.createElement(zt["a"],{type:"enter",className:r,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function e(){var t;var a=this.props,n=a.action,r=a.app,i=a.className,o=a.pillarClassName;var s=Wt()(i,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":n.danger},Gt()(t,""+o,o),Gt()(t,o+"--danger",n.danger&&o),t));var l=r&&r.name||n.description;!l&&r&&(l=b.a.createElement(Vt["a"],{type:Object(Qt["d"])(r)?"unknown":"non-existent"}));return b.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},b.a.createElement("div",{className:s,"data-qa":n["data-qa"],key:n.id,id:n.id},this.renderIconMaybe(this.renderIcon()),b.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},n.label||n.name,b.a.createElement("div",{className:"c-menu_item__description"},l)),this.renderEnter()))}}]);return t}(g["PureComponent"]);$t.displayName="AppActionsDialogItem";$t.defaultProps=Xt;var ea=function e(t,a){var n=a.action;return{app:n&&n.appId&&Object(Kt["getAppById"])(t,n.appId)}};var ta=Object(k["connect"])(ea)($t);var aa=a(104);var na=a(791);var ra=a(226);var ia=a(87);var oa=a(173);var sa=a(735);var la=a(682);var ca=a(665);var ua=a(2220);var da={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,channel:y.a.object.isRequired,theme:y.a.string,hasAdHocSender:y.a.bool,userId:y.a.string,username:y.a.string,botId:y.a.string,text:y.a.string.isRequired,attachments:y.a.arrayOf(y.a.object)};var pa={className:null,theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,fileIds:[],attachments:[],unfurlLinkCache:null};var fa=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={gradient:false};a.renderAttachment=a.renderAttachment.bind(a);return a}p()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(aa["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderText",value:function e(){var t=this.props.text;return b.a.createElement(ia["a"],{text:t})}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.userId,n=t.hasAdHocSender,r=t.botId;return b.a.createElement(oa["b"],{className:"p-app_actions_pillow__avatar",userId:a,isAdHocMember:n,botId:r,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return b.a.createElement(sa["b"],{timestamp:t,relative:false,full:true})}},{key:"renderAttachment",value:function e(t,a){var n=this.props,i=n.ts,o=n.channelId;return b.a.createElement(la["a"],r()({key:a},Object(ra["b"])(t),{messageTs:i,activeChannelId:o,showDelete:false}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return b.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return b.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return b.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,n=t.botId,r=t.username,i=t.theme,o=t.channel;return b.a.createElement("div",{className:"p-app_actions_pillow__content_header"},b.a.createElement(ca["a"],{userId:a,botId:n,username:r,channelName:Object(he["getDisplayName"])(o),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"render",value:function e(){var t=this.props.theme;var a=Wt()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return b.a.createElement("div",{className:a,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),b.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),b.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderText(),this.renderAttachments(),b.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(g["PureComponent"]);fa.displayName="AppActionsPillow";fa.defaultProps=pa;var ma=function e(t,a){var n=a.ts,r=a.channelId;var i=Object(D["getMessageByTimestamp"])(t,r,n);var o=Object(le["getChannelById"])(t,r);var s=Object(F["getMessageMemberId"])(i);var l=Object(F["getMsgSenderEntity"])(t,i),c=l.botId,u=l.username;return{channel:o,userId:s,username:u,botId:c,theme:Object(ne["getUserMessagesTheme"])(t),hasAdHocSender:Object(na["a"])(i),text:i.text,attachments:i.attachments}};var ha=Object(k["connect"])(ma)(fa);var va=a(2222);var ga=new I["b"]("app_actions");var ba=64;var _a="/apps/collection/actions?utm_source=overflow&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var ya={channelId:y.a.string.isRequired,onClose:y.a.func,ts:y.a.string.isRequired,onSelectAction:y.a.func,handleMessageAction:y.a.func.isRequired,searchMessageActions:y.a.func.isRequired,recordMessageActionFrecencyEvent:y.a.func.isRequired,closeModal:y.a.func.isRequired,clogger:y.a.object.isRequired};var ka={appActions:[],onClose:O["noop"],onSelectAction:O["noop"],featureAppActionsFeRefactor:false};var Oa=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={filterQuery:"",isLoading:true,isError:false,actions:[]};a.initClogged=false;Object(O["bindAll"])(a,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]);a.searchActionsDebounced=Object(O["debounce"])(a.searchActions,200,{leading:true});return a}p()(t,[{key:"componentDidMount",value:function e(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function e(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var t=this.props.clogger;t.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].IMPRESSION,step:w["p"].MESSAGE_ACTION_DIALOG,ui_element:w["o"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.state.actions.length}}});this.initClogged=true}}},{key:"componentWillUnmount",value:function e(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].CLICK,step:w["p"].MESSAGE_ACTION_DIALOG,ui_element:w["o"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.state.actions.length}}})}},{key:"onSelectAction",value:function e(t,a){var n=this.props,r=n.ts,i=n.channelId,o=n.closeModal,s=n.handleMessageAction,e=n.onSelectAction,l=n.clogger;o();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:r,channelId:i});c||s(t,a,{ts:r,channelId:i});this.props.recordMessageActionFrecencyEvent({action:a,query:this.state.filterQuery});var u={ui_context:{action:w["m"].CLICK,step:w["p"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId&&(u.platform={app_id:a.appId,action_id:a.id});l.track(w["h"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){this.setState(function(){return{filterQuery:t}},this.searchActionsDebounced)}},{key:"searchActions",value:function e(){var t=this;var a=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(e){t.activePromise===a&&t.setState(function(){return{actions:e,isError:false,isLoading:false}})}).catch(function(){t.setState(function(){return{isError:true,isLoading:false}})});this.activePromise=a}},{key:"handleSelectEvent",value:function e(t,a,n){this.onSelectAction(n,a.props.action)}},{key:"renderTitle",value:function e(t){return b.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},b.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,n=t.ts;return b.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},b.a.createElement(ha,{channelId:a,ts:n}))}},{key:"renderLoading",value:function e(){return b.a.createElement("div",{className:"p-app_actions_dialog__loader"},b.a.createElement(Bt["a"],null))}},{key:"renderSingleAction",value:function e(t){var a=b.a.createElement(ta,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderSelect",value:function e(){var t=ga.t("Search message actions\u2026");return b.a.createElement(Ut["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(O["map"])(this.state.actions,this.renderSingleAction),optionsRowHeight:ba})}},{key:"render",value:function e(){var t=this.state.isLoading;var a=ga.t("Get more message actions");var n=ga.t("Use an action");return b.a.createElement(Lt["a"],{contentLabel:n,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:_a,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(g["PureComponent"]);Oa.displayName="AppActionsDialog";Oa.defaultProps=ka;function wa(e){return{clogger:Object(E["a"])({state:e})}}var Ea=function e(t){return{closeModal:function e(){return t(Object(Ct["closeModal"])())},handleMessageAction:function e(){for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return Ft.apply(void 0,n.concat([t]))},searchMessageActions:function e(){return t(ut.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function e(a){return t(x(a))}}};var Ca=Object(k["connect"])(wa,Ea)(Oa);var ja=nt["selectMessageActions"];var Sa=new I["b"]("app_actions");var Ia=64;var Ta="/apps/collection/actions?utm_source=overflow&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var Na={channelId:y.a.string.isRequired,onClose:y.a.func,ts:y.a.string.isRequired,onSelectAction:y.a.func,slackActions:y.a.arrayOf(R["a"].MessageAction).isRequired,appActions:y.a.arrayOf(R["a"].AppActionMenuItem),isLoading:y.a.bool.isRequired,onLoad:y.a.func.isRequired,handleMessageAction:y.a.func.isRequired,closeModal:y.a.func.isRequired,clogger:y.a.object.isRequired};var Aa={appActions:[],onClose:O["noop"],onSelectAction:O["noop"]};var Ra=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={filterQuery:"",normalizedFilterQuery:""};Object(O["bindAll"])(a,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]);return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].IMPRESSION,step:w["p"].MESSAGE_ACTION_DIALOG,ui_element:w["o"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.props.appActions.length}}});this.props.onLoad()}},{key:"shouldComponentUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,n=t.ts,r=t.isLoading;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.normalizedFilterQuery;if(this.state.normalizedFilterQuery!==o)return true;if(this.props.isLoading&&!r)return true;if(this.props.channelId!==a)return true;if(this.props.ts!==n)return true;return false}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].CLICK,step:w["p"].MESSAGE_ACTION_DIALOG,ui_element:w["o"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.props.appActions.length}}})}},{key:"onSelectAction",value:function e(t,a){var n=this.props,r=n.ts,i=n.channelId,o=n.closeModal,s=n.handleMessageAction,e=n.onSelectAction,l=n.clogger;o();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:r,channelId:i});c||s(t,a,{ts:r,channelId:i});Object(L["b"])(a,this.state.normalizedFilterQuery);var u={ui_context:{action:w["m"].CLICK,step:w["p"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId&&(u.platform={app_id:a.appId,action_id:a.id});l.track(w["h"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){var a=Object(tt["a"])(t);this.setState(function(){return{filterQuery:t,normalizedFilterQuery:a}})}},{key:"getActions",value:function e(){var t=[].concat(l()(Object(O["map"])(this.props.slackActions,this.formatSlackAction)),l()(Object(O["map"])(this.props.appActions,et)));t=Object(O["filter"])(t,this.filterAction);t=Object(L["c"])(t,this.state.normalizedFilterQuery);return t}},{key:"handleSelectEvent",value:function e(t,a,n){this.onSelectAction(n,a.props.action)}},{key:"filterAction",value:function e(t){return at(t,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function e(t){return r()({},t,{danger:false,description:Sa.t("Slack")})}},{key:"renderTitle",value:function e(t){return b.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},b.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,n=t.ts;return b.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},b.a.createElement(ha,{channelId:a,ts:n}))}},{key:"renderLoading",value:function e(){return b.a.createElement("div",{className:"p-app_actions_dialog__loader"},b.a.createElement(Bt["a"],null))}},{key:"renderSingleAction",value:function e(t){var a=b.a.createElement(ta,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderSelect",value:function e(){var t=Sa.t("Search message actions\u2026");return b.a.createElement(Ut["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(O["map"])(this.getActions(),this.renderSingleAction),optionsRowHeight:Ia})}},{key:"render",value:function e(){var t=this.props.isLoading;var a=Sa.t("Get more message actions");var n=Sa.t("Use an action");return b.a.createElement(Lt["a"],{contentLabel:n,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Ta,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(g["Component"]);Ra.displayName="AppActionsDialog";Ra.defaultProps=Aa;function Ma(e,t){var a=ja(e),n=a.loading,r=a.actions;var i=Object(O["filter"])([G(e,t),K(e,t),X(e,t),ae(e,t),se(e,t),fe(e,t),_e(e,t),Ue(e,t),We(e,t),Ke(e,t),$e(e,t)]);var o=!!(n||Object(O["find"])(i,"isLoading"));return{slackActions:i,appActions:r,isLoading:o,clogger:Object(E["a"])({state:e})}}var xa=function e(t){return{closeModal:function e(){return t(Object(Ct["closeModal"])())},onLoad:function e(){return t(Object(nt["ensureFresh"])())},handleMessageAction:function e(){for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return Ft.apply(void 0,n.concat([t]))}}};var Pa={};Object.defineProperty(Pa,"selectMessageActions",{get:function e(){return ja},set:function e(t){ja=t}});var Da=Object(k["connect"])(Ma,xa)(Ra);var Fa=function e(t){var a=t.featureAppActionsFeRefactor,n=o()(t,["featureAppActionsFeRefactor"]);if(a)return b.a.createElement(Ca,n);return b.a.createElement(Da,n)};Fa.displayName="AppActionsSwitcher";var La=function e(t){return{featureAppActionsFeRefactor:Object(S["isFeatureEnabled"])(t,"feature_app_actions_fe_refactor")}};var Ba=Object(k["connect"])(La)(Fa);var Ua=Object(j["b"])("Open app actions dialog",function(e,t,a){var n=b.a.createElement(Ba,a);e(Object(Ct["openModal"])({element:n}))});Ua.propTypes={channelId:y.a.string.isRequired,ts:y.a.string.isRequired,onSelectAction:y.a.func.isRequired};var qa=Ua;var Ga=new I["b"]("message");var Ha=3;var Wa="/apps/collection/actions?utm_source=messagemenu&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var Va={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,onSelectAction:y.a.func.isRequired,hasActions:y.a.bool.isRequired,hasOverflow:y.a.bool.isRequired,browseAppActions:y.a.func.isRequired,clogger:y.a.object.isRequired};var za=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);a.state={hasActions:e.hasActions};return a}p()(t,[{key:"onSelected",value:function e(t){var a=this.props,n=a.ts,r=a.channelId,i=a.onSelectAction,o=a.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:n,channelId:r,onSelectAction:i}):t&&"click"!==t.type&&window.open(Wa,"_blank");o.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].CLICK,step:w["p"].MORE_ACTIONS_MENU,ui_element:w["o"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.ts,n=t.channelId,i=t.onSelectAction,s=t.hasActions,l=t.browseAppActions,c=o()(t,["ts","channelId","onSelectAction","hasActions","browseAppActions"]);var u=this.state.hasActions?Ga.t("More message actions\u2026"):Ga.t("Add a message action\u2026");return b.a.createElement(C["b"],r()({},c,{label:u,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:Wa}))}}]);return t}(g["Component"]);za.displayName="BrowseAppActions";var Qa=function e(t){var a=Object(nt["selectMessageActions"])(t),n=a.actions,r=a.loading;var i=n.length;return{hasActions:r||!!i,hasOverflow:r||i>Ha,clogger:Object(E["a"])({state:t})}};var Ka=function e(t){return{browseAppActions:function e(){return t(qa.apply(void 0,arguments))}}};var Ya=Object(C["h"])(Object(k["connect"])(Qa,Ka)(za));var Ja=a(448);var Za=a(16);var Xa=56;var $a=40;var en={type:y.a.oneOf(Object(O["values"])(Ja["a"])),action:R["a"].MessageAction.isRequired,onSelected:y.a.func.isRequired,app:R["a"].maybeUnknown(R["a"].App)};var tn={type:Ja["a"].default,app:void 0};var an=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);return a}p()(t,[{key:"onSelected",value:function e(t){var a=this.props,n=a.action,e=a.onSelected;e(t,n)}},{key:"renderIcon",value:function e(){var t=this.props,a=t.action,n=t.app,r=t.type;var i=n&&n.icons||a.iconSet;if(i){var o=r===Ja["a"].compactItem?$a:Xa;var s=Object(Yt["a"])({icons:i},o);return b.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:s})}if(a.iconType)return b.a.createElement(zt["b"],{type:a.iconType});return null}},{key:"render",value:function e(){var t=this.props,a=t.action,n=t.app,i=t.onSelected,s=t.type,l=o()(t,["action","app","onSelected","type"]);var c=n&&n.name||a.description;!c&&n&&(c=b.a.createElement(Vt["a"],{type:Object(Qt["d"])(n)?"unknown":"non-existent"}));return b.a.createElement(C["b"],r()({type:s,label:a.label||a.name,description:c,icon:this.renderIcon(),danger:a.danger,onSelected:this.onSelected,"data-qa":a["data-qa"]},l))}}]);return t}(g["PureComponent"]);an.displayName="MessageActionMenuItem";an.defaultProps=tn;var nn=function e(t,a){var n=a.action;return{app:n&&n.appId&&Object(Kt["getAppById"])(t,n.appId)}};var rn=Object(k["connect"])(nn)(an);var on=Object(C["h"])(rn);var sn=a(2224);var ln=3;var cn={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,rollup:R["a"].Rollup(),messageContainerType:y.a.oneOf(Object(O["values"])(P["MESSAGE_CONTAINERS"])),onSelectAction:y.a.func,onMenuItemSelected:y.a.func,onLoad:y.a.func,slackActions:y.a.arrayOf(y.a.oneOfType([R["a"].MessageAction,y.a.node])).isRequired,canRunAppAction:y.a.bool,appActions:y.a.array,handleMessageAction:y.a.func.isRequired,recordMessageActionFrecencyEvent:y.a.func.isRequired,clogger:y.a.object.isRequired};var un={messageContainerType:P["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:O["noop"],onMenuItemSelected:O["noop"],onLoad:O["noop"],canRunAppAction:false,appActions:[],runAppAction:O["noop"],rollup:void 0};var dn=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={appActions:e.appActions};Object(O["bindAll"])(a,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return a}p()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad();var t=this.props.clogger;t.track(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].IMPRESSION,step:w["p"].MORE_ACTIONS_MENU,ui_element:w["o"].MORE_ACTIONS_MENU},platform:{app_actions_showing:Math.min(this.state.appActions.length,ln)}}})}},{key:"onSelectAction",value:function e(t,a){var n=this.props,r=n.ts,i=n.channelId,o=n.handleMessageAction,e=n.onSelectAction,s=n.rollup,l=n.clogger;var c=e(t,a,{ts:r,channelId:i});c||o(t,a,{ts:r,channelId:i,rollup:s});this.props.recordMessageActionFrecencyEvent({action:a});var u={ui_context:{action:w["m"].CLICK,step:w["p"].MORE_ACTIONS_MENU,ui_element:a.uiElement}};a.appId&&(u.platform={app_id:a.appId,action_id:a.id});l.track(w["h"].MSG_ACTION,{contexts:u})}},{key:"renderAppActions",value:function e(){var t=this.props,a=t.onSelectAction,n=t.ts,r=t.channelId;var i=this.state.appActions;var o=i.slice(0,ln).map(this.renderSingleAppAction);return[].concat(l()(o),[b.a.createElement(Ya,{key:"browse_app_actions",ts:n,channelId:r,onSelectAction:a})])}},{key:"renderSingleAppAction",value:function e(t){var a=et(t);return b.a.createElement(on,{key:a.id,type:Ja["a"].compactItem,action:a,onSelected:this.onSelectAction})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function e(t,a){if(!t)return null;if(b.a.isValidElement(t))return b.a.cloneElement(t,{key:a});var n=Object(O["omit"])(t,["iconType","iconSet"]);return b.a.createElement(on,{key:n.id,className:"p-message_actions_menu__"+n.id,action:n,onSelected:this.onSelectAction})}},{key:"render",value:function e(){var t=this.props,a=t.ts,n=t.channelId,i=t.messageContainerType,s=t.onLoad,l=t.onMenuItemSelected,c=t.onSelectAction,u=t.canRunAppAction,d=t.appActions,p=t.slackActions,f=t.handleMessageAction,m=o()(t,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return b.a.createElement(C["f"],r()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:l,stripTerminalSeparators:true},m),this.renderSlackActions(),b.a.createElement(C["d"],null),u&&this.renderAppActions())}}]);return t}(g["PureComponent"]);dn.displayName="MessageActionsMenu";dn.defaultProps=un;var pn=function e(t,a){var n=a.channelId,i=a.ts;var o=a.messageContainerType||P["MESSAGE_CONTAINERS"].MESSAGE_PANE;var s=Object(D["getMessageByTimestamp"])(t,n,i);var l=Object(S["isFeatureEnabled"])(t,"feature_file_threads");var c=Object(F["canRunAppAction"])(s,l);var u=Object(Za["canRunAppAction"])(t);var d=Object(nt["selectMessageActions"])(t),p=d.actions;var f=u&&c;var m=Object(O["filter"])([$e(t,a),b.a.createElement(C["d"],null),Object(O["includes"])([P["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,P["MESSAGE_CONTAINERS"].THREADS_VIEW,P["MESSAGE_CONTAINERS"].SLI_BRIEFING],o)&&We(t,a),X(t,a),Object(O["includes"])([P["MESSAGE_CONTAINERS"].MESSAGE_PANE,P["MESSAGE_CONTAINERS"].UNREAD_VIEW],o)&&fe(t,r()({},a,{allUnreads:o===P["MESSAGE_CONTAINERS"].UNREAD_VIEW})),De(t,a),_e(t,a),se(t,a),Ue(t,a),ae(t,a)]);return{slackActions:m,appActions:p,canRunAppAction:f,clogger:Object(E["a"])({state:t})}};var fn=function e(t){return{onLoad:function e(){return t(Object(nt["ensureFresh"])())},handleMessageAction:function e(){for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return Ft.apply(void 0,n.concat([t]))},recordMessageActionFrecencyEvent:function e(a){return t(x(a))}}};var mn=Object(k["connect"])(pn,fn)(dn);a.d(t,false,function(){return on});var hn=t["a"]=mn},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return l});a.d(t,"c",function(){return c});a.d(t,"d",function(){return u});a.d(t,"b",function(){return d});a.d(t,"e",function(){return p});a.d(t,"g",function(){return f});a.d(t,"h",function(){return m});a.d(t,"f",function(){return h});var n=a(62);var r="universal_search";var i={autocompleteKeystroke:"autocomplete_keystroke",autocompleteRequest:"autocomplete_request",autocompleteResponse:"autocomplete_response",autocompleteRenderStart:"autocomplete_render_start",searchAccept:"search_accept",searchFilter:"search_filter",searchModuleRequest:"search_module_request",searchModuleResponse:"search_module_response",searchModuleRenderStart:"search_module_render_start"};var o={autocompleteRequestToResponse:"ac_request_to_response",autocompleteKeystrokeToRenderStart:"ac_keystroke_to_render_start",searchAcceptToRenderStart:"search_accept_to_render_start",searchRequestToResponse:"search_request_to_response"};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[r+"_"+e].concat(t||[]).join("_")}function l(){Object(n["e"])(s(i.autocompleteKeystroke))}function c(){Object(n["e"])(s(i.autocompleteRequest))}function u(){Object(n["e"])(s(i.autocompleteResponse));Object(n["g"])(o.autocompleteRequestToResponse,s(i.autocompleteRequest))}function d(){Object(n["e"])(s(i.autocompleteRenderStart));if(!Object(n["d"])(i.autocompleteKeystroke))return;Object(n["g"])(o.autocompleteKeystrokeToRenderStart,s(i.autocompleteKeystroke))}function p(){Object(n["e"])(s(i.searchAccept))}function f(e,t,a){Object(n["e"])(s(i.searchModuleRequest,[e,t,a]))}function m(e,t,a){Object(n["e"])(s(i.searchModuleResponse,[e,t,a]));Object(n["g"])(o.searchRequestToResponse,s(i.searchModuleRequest,[e,t,a]))}function h(e,t,a){Object(n["e"])(s(i.searchModuleRenderStart,[e,t,a]));Object(n["g"])(o.searchAcceptToRenderStart,s(i.searchAccept))}},,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"test",function(){return w});a.d(t,"updateTyping",function(){return E});a.d(t,"clearTyping",function(){return C});a.d(t,"clearTypingCleanupInterval",function(){return j});a.d(t,"bulkClearTyping",function(){return S});a.d(t,"getAllTyping",function(){return R});a.d(t,"getTypingByKey",function(){return M});a.d(t,"getNumberOfRecords",function(){return x});a.d(t,"getTyperIdsInChannel",function(){return P});a.d(t,"removeOldTypingRecords",function(){return D});a.d(t,"memberStartedTyping",function(){return F});a.d(t,"currentUserStartedTyping",function(){return L});a.d(t,"memberEndedTyping",function(){return B});a.d(t,"currentUserEndedTyping",function(){return U});a.d(t,"checkTypingMap",function(){return q});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(32);var l=a.n(s);var c=a(0);var u=a.n(c);var d=a(2);var p=a.n(d);var f=a(4);var m=a(336);var h=a(11);var v=a(79);var g=a(800);var b;var _=v["isConnected"];var y=m["send"];var k=g["b"];var O=g["a"];var w={};Object.defineProperty(w,"isConnected",{get:function e(){return _},set:function e(t){_=t}});Object.defineProperty(w,"send",{get:function e(){return y},set:function e(t){y=t}});Object.defineProperty(w,"legacyMemberTypingStarted",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(w,"legacyMemberTypingEnded",{get:function e(){return O},set:function e(t){O=t}});var E=Object(f["a"])("Update typing timestamp for a given key");E.propTypes={key:u.a.string.isRequired,started:u.a.number.isRequired,model_ob_id:u.a.string.isRequired,member_id:u.a.string.isRequired,member_is_self:u.a.bool};var C=Object(f["a"])("Remove typing activity for a given key");C.propTypes={key:u.a.string.isRequired};var j=Object(f["a"])("Stop the typing cleanup interval because there are no users typing");j.propTypes=null;var S=Object(f["a"])("Remove typing activity for multiple keys");S.propTypes=u.a.arrayOf(u.a.string);var I=5e3;var T=6e3;var N={};var A=Object(f["c"])((b={},r()(b,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=t.key,n=l()(t,["key"]);if(!a)return e;if(e[a])return o()({},e,r()({},a,o()({},e[a],{started:n.started})));return o()({},e,r()({},a,o()({},n)))}),r()(b,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.key;if(!a||!e[a])return e;return p.a.omit(e,a)}),r()(b,S,function(e,t){if(!t||!t.length||!p.a.isArray(t))return e;var a=p.a.omit(e,t);if(Object.keys(a).length===Object.keys(e).length)return e;return a}),b),N);t["default"]=A;var R=Object(f["d"])(function(e){return e&&e.typing});var M=Object(f["d"])(function(e,t){return e&&e.typing&&e.typing[t]});var x=Object(f["d"])(function(e){return e&&e.typing&&Object.keys(e.typing).length});var P=Object(f["d"])(function(e,t){var a=p.a.filter(e&&e.typing,function(e){return e.model_ob_id===t&&!e.member_is_self});return p.a.map(a,"member_id")});var D=Object(f["e"])("remove old typing records",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.now;var r=R(t());var i=p.a.map(r,function(e,t){var a=e.member_is_self?I:T;var r=n-e.started;if(r>=a)return t;return null});i=p.a.compact(i);i.length&&e(S(i))});D.propTypes={now:u.a.number.isRequired};var F=Object(f["e"])("member started typing (also dispatched by currentUserStartedTyping)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.memberId;var i=t();var o=n+"_"+r;var s=Date.now();var l=!M(i,o);e(E({key:o,started:s,model_ob_id:n,member_id:r,member_is_self:Object(h["getCurrentUserId"])(i)===r}));l&&k(n,r)});F.propTypes={channelId:u.a.string.isRequired,memberId:u.a.string.isRequired};var L=Object(f["e"])("logged in user has started typing",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId;var r=t();if(!_(r))return;if(!n)return;var i=Object(h["getCurrentUserId"])(r);var o=n+"_"+i;if(M(r,o))return;var s={type:"typing",channel:n};e(y(s));e(F({channelId:n,memberId:i}))});L.propTypes={channelId:u.a.string.isRequired};var B=Object(f["e"])("member stopped typing (also dispatched by currentUserEndedTyping)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.memberId;var i=n+"_"+r;e(C({key:i}));O(n,r)});B.propTypes={channelId:u.a.string.isRequired,memberId:u.a.string.isRequired};var U=Object(f["e"])("logged in user has stopped typing",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId;if(!n)return;var r=t();var i=Object(h["getCurrentUserId"])(r);e(B({channelId:n,memberId:i}))});U.propTypes={channelId:u.a.string.isRequired};var q=Object(f["e"])("Periodically update the typing map to look for typing records that have expired, and update legacy of the changes",function(e,t){var a=Date.now();var n=0;var r=R(t());e(D({now:a}));var i=R(t());var o=p.a.difference(Object.keys(r),Object.keys(i));o.forEach(function(e){var t=r[e];O(t.model_ob_id,t.member_id)});n=x(t());n<1&&e(j())})},function(e,t,a){"use strict";var n=a(10);var r=a(138);var i=Object(n["o"])();function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments[1];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.displayTrailingZeroes,o=void 0!==n&&n,s=a.currencyDisplay,l=void 0===s?"symbol":s;if(!t)return null;var c={style:"currency",currency:t,currencyDisplay:l};e%100!==0||o||(c.minimumFractionDigits=0);return Object(r["b"])(e,i,c)}var s={};Object.defineProperty(s,"locale",{get:function e(){return i},set:function e(t){i=t}});t["a"]=o},,,function(e,t,a){"use strict";var n=a(4);var r=a(167);var i=a(739);var o=a(798);var s=a(180);var l=a(37);var c=a(242);var u=Object(n["e"])("Close search UI",function(e,t){if(Object(l["wasFocusedViaTabKey"])(t())){var a=window.$&&window.$("#search_terms");a&&Object(c["d"])(a);e(Object(l["setFocusedViaTabKey"])({wasFocusedViaTabKey:false}))}if(!Object(r["b"])(t())){var n=window.$&&window.$("#search_terms");var u=Object(s["getSearchInputBoxDisplayQuery"])(t());if(n&&u)try{Object(c["k"])(n,u)}catch(e){}Object(o["b"])()}e(Object(i["a"])({visible:false}))});u.propTypes={};t["a"]=u},,,,,function(e,t,a){"use strict";a.d(t,"g",function(){return p});a.d(t,"h",function(){return f});a.d(t,"a",function(){return m});a.d(t,"b",function(){return h});a.d(t,"f",function(){return v});a.d(t,"c",function(){return g});a.d(t,"e",function(){return M});a.d(t,"d",function(){return P});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(2);var l=a.n(s);var c=a(10);var u=a(30);var d=new c["b"]("checkout_v2");function p(e,t,a){var n=D(t);if(Object(s["isEmpty"])(n))return{};return o()({},_(e,n),y(e,n,a),k(e,n))}function f(e,t,a,n){var r=null;var i=D(n);if(Object(s["isEmpty"])(i))return r;var o=e.companyName,l=e.street,c=e.city,d=e.country,p=e.postalCode,f=e.region,m=e.vatId,h=e.isBusinessPurchase,v=e.isVatIdAvailable,g=e.abnId;switch(t){case u["b"].COMPANY_NAME:r=j(o,i);break;case u["b"].STREET:r=S(l,i);break;case u["b"].CITY:r=I(c,i);break;case u["b"].COUNTRY:r=T(d,i);break;case u["b"].POSTAL_CODE:r=N(d,p,i);break;case u["b"].REGION:r=A(d,f,i);break;case u["b"].VAT_ID:r=R(d,m,h,v,a,i);break;case u["b"].ABN_ID:r=x(g,i);break;default:}return r}function m(e,t,a,n){var r=D(n);if(Object(s["isEmpty"])(r))return{};var i={};var o=u["f"].DEFAULT_ERROR;"102"===e?o=u["f"].ZIP_CODE_INVALID_API_ERROR:t===u["f"].VAT_ID_INPUT_ERROR?o=a?u["f"].VAT_ID_INVALID_API_ERROR:u["f"].VAT_ID_INVALID_FORMAT:Object(s["has"])(u["f"],t)&&(o=t);switch(o){case u["f"].ZIP_CODE_INVALID_API_ERROR:i.postalCode=w(u["f"].ZIP_CODE_INVALID_API_ERROR,"",r);break;case u["f"].VAT_ID_INVALID_API_ERROR:i.vatId=w(u["f"].VAT_ID_INVALID_API_ERROR,"",r);break;case u["f"].VAT_ID_INVALID_FORMAT:i.vatId=w(u["f"].VAT_ID_INVALID_FORMAT,"",r);break;case u["f"].API_ERROR:case u["f"].ADDRESS_INPUT_ERROR:case u["f"].ERROR_UPDATING_BILLING_ADDRESS:case u["f"].NO_PERMS:case u["f"].INVALID_AUTH:default:i.general=w(u["f"].DEFAULT_ERROR,"",r)}return i}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;return v(e)?d.t("Zip code"):d.t("Postal code")}function v(e){return e===u["e"].UNITED_STATES}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;return b(e)?d.t("State"):d.t("State / Province")}function b(e){return e===u["e"].UNITED_STATES}function _(e,t){var a={};var n=j(e.companyName,t);n&&(a.companyName=n);var r=S(e.street,t);r&&(a.street=r);var i=I(e.city,t);i&&(a.city=i);var o=T(e.country,t);o&&(a.country=o);var s=N(e.country,e.postalCode,t);s&&(a.postalCode=s);var l=A(e.country,e.region,t);l&&(a.region=l);return a}function y(e,t,a){var n={};var r=R(e.country,e.vatId,e.isBusinessPurchase,e.isVatIdAvailable,a,t);r&&(n.vatId=r);return n}function k(e,t){var a={};var n=x(e.abnId,t);n&&(a.abnId=n);return a}function O(e){return e===u["e"].UNITED_STATES||e===u["e"].CANADA}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=arguments[2];var n=a[e]||{};switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:case u["f"].POSTAL_CODE_INVALID_CHARACTERS:case u["f"].POSTAL_CODE_INVALID_API_ERROR:n=E(e,t,a);break;case u["f"].REGION_IS_REQUIRED:case u["f"].REGION_INVALID_CHARACTERS:n=C(e,t,a);break;default:}return n}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=arguments[2];var n=a[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:n=a[u["f"].ZIP_CODE_IS_REQUIRED];break;case u["f"].POSTAL_CODE_INVALID_CHARACTERS:n=a[u["f"].ZIP_CODE_INVALID_CHARACTERS];break;case u["f"].POSTAL_CODE_INVALID_API_ERROR:n=a[u["f"].ZIP_CODE_INVALID_API_ERROR];break;default:}return n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=arguments[2];var n=a[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].REGION_IS_REQUIRED:n=a[u["f"].STATE_IS_REQUIRED];break;case u["f"].REGION_INVALID_CHARACTERS:n=a[u["f"].STATE_INVALID_CHARACTERS];break;default:}return n}function j(e,t){var a=null;e||(a=w(u["f"].COMPANY_NAME_IS_REQUIRED,"",t));return a}function S(e,t){var a=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(a=w(u["f"].STREET_INVALID_CHARACTERS,"",t)):a=w(u["f"].STREET_IS_REQUIRED,"",t);return a}function I(e,t){var a=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(a=w(u["f"].CITY_INVALID_CHARACTERS,"",t)):a=w(u["f"].CITY_IS_REQUIRED,"",t);return a}function T(e,t){var a=null;e||(a=w(u["f"].COUNTRY_IS_REQUIRED,"",t));return a}function N(e,t,a){var n=null;O(e)?t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)?e!==u["e"].UNITED_STATES||u["a"].US_POSTAL_CODE_FORMAT_REGEX.test(t)?e!==u["e"].CANADA||u["a"].CANADA_POSTAL_CODE_FORMAT_REGEX.test(t)||(n=w(u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,e,a)):n=w(u["f"].US_ZIP_CODE_INVALID_FORMAT,e,a):n=w(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,a):n=w(u["f"].POSTAL_CODE_IS_REQUIRED,e,a):t&&!u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)&&(n=w(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,a));return n}function A(e,t,a){var n=null;O(e)&&!t?n=w(u["f"].REGION_IS_REQUIRED,e,a):t&&!u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(t)&&(n=w(u["f"].REGION_INVALID_CHARACTERS,e,a));return n}function R(e,t,a,n,r,i){var o=null;a&&n&&M(e,r)&&(t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)||(o=w(u["f"].VAT_ID_INVALID_CHARACTERS,"",i)):o=w(u["f"].VAT_ID_IS_REQUIRED,"",i));return o}function M(e,t){return Object(s["has"])(t,e)}function x(e,t){var a=null;e&&(11!==e.replace(/\s/g,"").length?a=w(u["f"].ABN_ID_INVALID_LENGTH,"",t):u["a"].ABN_ID_REGEX.test(e)||(a=w(u["f"].ABN_ID_INVALID_CHARACTERS,"",t)));return a}function P(e,t){return Object(s["has"])(t,e)}function D(){var e;var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return{};return e={},r()(e,u["f"].COMPANY_NAME_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a company name.")}),r()(e,u["f"].STREET_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a street address.")}),r()(e,u["f"].CITY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a city.")}),r()(e,u["f"].POSTAL_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a postal code.")}),r()(e,u["f"].ZIP_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a zip code.")}),r()(e,u["f"].REGION_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state / province.")}),r()(e,u["f"].STATE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state.")}),r()(e,u["f"].COUNTRY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your country.")}),r()(e,u["f"].VAT_ID_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a VAT ID.")}),r()(e,u["f"].STREET_INVALID_CHARACTERS,{errorText:d.t("Your street address can\u2019t contain special characters.")}),r()(e,u["f"].CITY_INVALID_CHARACTERS,{errorText:d.t("Your city name can\u2019t contain special characters.")}),r()(e,u["f"].REGION_INVALID_CHARACTERS,{errorText:d.t("Your state / province can\u2019t contain special characters.")}),r()(e,u["f"].STATE_INVALID_CHARACTERS,{errorText:d.t("Your state can\u2019t contain special characters.")}),r()(e,u["f"].POSTAL_CODE_INVALID_CHARACTERS,{errorText:d.t("Your postal code can\u2019t contain special characters.")}),r()(e,u["f"].ZIP_CODE_INVALID_CHARACTERS,{errorText:d.t("Your zip code can\u2019t contain special characters.")}),r()(e,u["f"].VAT_ID_INVALID_CHARACTERS,{errorText:d.t("Your VAT ID can\u2019t contain special characters.")}),r()(e,u["f"].ABN_ID_INVALID_CHARACTERS,{errorText:d.t("Your ABN ID can\u2019t contain special characters.")}),r()(e,u["f"].US_ZIP_CODE_INVALID_FORMAT,{errorText:d.t("Please use a 5- or 9-digit zip code.")}),r()(e,u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,{errorText:d.t("Please use a valid Canadian postal code.")}),r()(e,u["f"].POSTAL_CODE_INVALID_API_ERROR,{errorText:d.t('There\u2019s a problem with your postal code. <a href="https://my.slack.com/help/requests/new">Contact us</a>')}),r()(e,u["f"].ZIP_CODE_INVALID_API_ERROR,{errorText:d.t('There\u2019s a problem with your zip code. <a href="https://my.slack.com/help/requests/new">Contact us</a>')}),r()(e,u["f"].VAT_ID_INVALID_API_ERROR,{errorText:d.t('We could not verify your VAT ID. <a href="https://my.slack.com/help/requests/new">Contact us</a>')}),r()(e,u["f"].VAT_ID_INPUT_ERROR,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),r()(e,u["f"].VAT_ID_INVALID_FORMAT,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),r()(e,u["f"].ABN_ID_INVALID_LENGTH,{errorText:d.t("Your ABN ID should have 11 digits.")}),r()(e,u["f"].DEFAULT_ERROR,{errorText:d.t("Unfortunately, something\u2019s gone wrong.")}),e}},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"d",function(){return i});a.d(t,"b",function(){return l});a.d(t,"a",function(){return c});a.d(t,"c",function(){return u});var n=a(13);var r=Object(n["c"])("TS.validation.firstalphanumeric",function(){return true});var i=Object(n["c"])("TS.validation.required",function(){return true});var o=Object(n["c"])("TS.validation.team_name_with_errors",function(){return true});var s=Object(n["c"])("TS.validation.pattern",function(){return true});var l=Object(n["c"])("TS.validation.isurl",function(){return true});var c=Object(n["c"])("TS.ui.validation.getErrorMessage",function(){return null});var u=Object(n["c"])("TS.ui.validation.maybeConvertNameErrorCode",function(){return null})},,function(e,t,a){"use strict";a.r(t);a.d(t,"updateHasUnreads",function(){return f});a.d(t,"updateHasUnreadThreads",function(){return m});a.d(t,"updateThreadsMentionCount",function(){return h});a.d(t,"updateUnreadThreads",function(){return v});a.d(t,"hasUnreads",function(){return b});a.d(t,"hasUnreadThreads",function(){return _});a.d(t,"getThreadsMentionCount",function(){return y});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(4);var p;var f=Object(d["a"])("Update the all unreads state");f.propTypes=l.a.bool.isRequired;var m=Object(d["a"])("Update the all threads state");m.propTypes=l.a.bool.isRequired;var h=Object(d["a"])("Update the threads mention count");h.propTypes=l.a.number.isRequired;var v=Object(d["a"])("Update all the threads state values");v.propTypes={hasUnreads:l.a.bool.isRequired,mentionCountByChannel:l.a.object.isRequired};var g=Object(d["c"])((p={},r()(p,f,function(e,t){if("boolean"!==typeof t)return e;return o()({},e,{hasUnreads:t})}),r()(p,m,function(e,t){if("boolean"!==typeof t)return e;return o()({},e,{hasUnreadThreads:t})}),r()(p,h,function(e,t){if(!u.a.isInteger(t))return e;return o()({},e,{threadsMentionCount:t})}),r()(p,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.hasUnreads,n=t.mentionCountByChannel;var r=u.a.isArray(n)?{}:n;var i=u.a.sum(u.a.values(r));!a&&i&&(i=0);return o()({},e,{hasUnreadThreads:a,threadsMentionCount:i,threadsMentionCountByChannel:r})}),p),{hasUnreads:false,hasUnreadThreads:false,threadsMentionCount:0,threadsMentionCountByChannel:{}});t["default"]=g;var b=Object(d["d"])(function(e){return e&&e.allUnreads&&e.allUnreads.hasUnreads});var _=Object(d["d"])(function(e){return e&&e.allUnreads&&e.allUnreads.hasUnreadThreads});var y=Object(d["d"])(function(e){return e&&e.allUnreads&&e.allUnreads.threadsMentionCount})},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"uploadStarting",function(){return d});a.d(t,"progressUpdate",function(){return p});a.d(t,"uploadCanceled",function(){return f});a.d(t,"uploadComplete",function(){return m});a.d(t,"uploadQueueEmptied",function(){return h});a.d(t,"IDLE",function(){return v});a.d(t,"UPLOADING",function(){return g});a.d(t,"COMPLETE",function(){return b});a.d(t,"CANCELED",function(){return _});a.d(t,"getFileUploadState",function(){return O});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u;var d=Object(c["a"])("Started uploading a file");d.propTypes={fileName:l.a.string.isRequired,isRetry:l.a.bool.isRequired,cancelable:l.a.bool.isRequired};var p=Object(c["a"])("Update to the file upload % complete");p.propTypes={percentComplete:l.a.number.isRequired};var f=Object(c["a"])("Canceled the file upload");f.propTypes=null;var m=Object(c["a"])("Finished the file upload");m.propTypes=null;var h=Object(c["a"])("Done all uploads");h.propTypes=null;var v=0;var g=1;var b=2;var _=3;var y={status:v,fileName:null,percentComplete:0,cancelable:false,isRetry:false};var k=Object(c["c"])((u={},r()(u,d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fileName,n=t.isRetry,r=t.cancelable;return{status:g,fileName:a,isRetry:n,percentComplete:0,cancelable:r}}),r()(u,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.percentComplete;return o()({},e,{percentComplete:a})}),r()(u,f,function(e){return o()({},e,{status:_})}),r()(u,m,function(e){return o()({},e,{status:b})}),r()(u,h,function(e){return o()({},e,{status:v})}),u),y);t["default"]=k;var O=Object(c["d"])(function(e){return e&&e.fileUpload})},,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(33);var r=a(23);function i(e){return Object(n["c"])(Object(r["getTeamId"])(e))}},,function(e,t,a){"use strict";a.r(t);a.d(t,"setUsersCounts",function(){return u});a.d(t,"getUsersCounts",function(){return p});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=Object(c["a"])("Initialize the raw users counts");u.propTypes=l.a.shape({channels:l.a.array,groups:l.a.array,ims:l.a.array,mpims:l.a.array,threads:l.a.object});var d=Object(c["c"])(r()({},u,function(e,t){return o()({},e,{counts:t})}),{});t["default"]=d;var p=Object(c["d"])(function(e){return e&&e.usersCounts&&e.usersCounts.counts})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"bulkAddStarredItems",function(){return _});a.d(t,"addStarredItem",function(){return y});a.d(t,"removeStarredItem",function(){return k});a.d(t,"updatePageNumber",function(){return O});a.d(t,"setLoadingState",function(){return w});a.d(t,"fetchStarsList",function(){return S});a.d(t,"initialState",function(){return I});a.d(t,"getAllStarredItems",function(){return N});a.d(t,"getCurrentPageNumber",function(){return A});a.d(t,"getTotalPages",function(){return R});a.d(t,"getLoadingState",function(){return M});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(44);var u=a(373);var d=a(986);var p=a(4);var f=a(17);var m=a(959);var h=a(422);var v=a(2);var g=a.n(v);var b;var _=Object(p["a"])("Adds multiple IDs of starred items to array");_.propTypes=l.a.arrayOf(l.a.object).isRequired;var y=Object(p["a"])("Adds ID of single starred items to array");y.propTypes=l.a.object.isRequired;var k=Object(p["a"])("Removes ID single starred item from array");k.propTypes=l.a.object.isRequired;var O=Object(p["a"])("Store current pagination");O.propTypes=l.a.object.isRequired;var w=Object(p["a"])("Sets if stars are loading");w.propTypes=l.a.bool.isRequired;var E={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment",CHANNEL:"channel"};var C=function e(t,a){if(a.type===E.MESSAGE)return{type:a.type,channel:a.channel,ts:a.message.ts};if(a.type===E.FILE)return{type:a.type,id:a.file.id};if(a.type===E.FILE_COMMENT)return{type:a.type,id:a.comment.id,fileId:a.file.id};return{}};var j=function e(t,a){var n=t.ts||t.message&&t.message.ts;return Object(v["filter"])(a,function(e){if(t.type===E.MESSAGE&&e.channel===t.channel&&e.ts===n)return false;if(t.type===E.FILE&&e.id===t.file_id)return false;return true})};var S=Object(p["e"])("Fetch starred items list for user",function(e,t,a){e(w(true));e(Object(m["a"])(a)).then(function(t){var a=Object(v["filter"])(t.items,function(e){return e.type===E.MESSAGE});Object(v["forEach"])(a,function(t){var a=e(Object(h["a"])({imsgs:[t.message],channelId:t.channel}));a.length&&e(Object(c["addMessages"])(a))});var n=Object(v["filter"])(t.items,function(e){return e.type===E.FILE});n=Object(v["map"])(n,function(e){return e.file});n.length&&e(Object(u["a"])({files:n}));var r=Object(v["filter"])(t.items,function(e){return e.type===E.FILE_COMMENT});var i={};r.forEach(function(e){i[e.file.id]=e.file});r.forEach(function(e){var t=e.comment;var a=i[e.file.id];var n=Object(d["a"])(t,a);i[a.id]=n});e(Object(u["a"])({files:Object(v["values"])(i)}));e(_(t.items));e(O(t.paging));e(w(false))}).catch(function(e){Object(f["a"])({getState:t}).error("Error in fetchStarsList: "+JSON.stringify(e));throw e})});S.propTypes={options:l.a.shape({count:l.a.number,page:l.a.number,exclude:l.a.bool,cursor:l.a.string,limit:l.a.number})};var I={starsList:[],currentPage:0,totalPages:0,isLoading:false};var T=Object(p["c"])((b={},r()(b,_,function(e,t){if(!t||!t.length||!Object(v["isArray"])(t))return e;var a=Object(v["filter"])(t,function(e){return e.type!==E.CHANNEL});var n=Object(v["map"])(a,function(t){return C(e,t)});var r=e.starsList.concat(n);var i=Object(v["uniqWith"])(r,v["isEqual"]);var s=o()({},e,{starsList:i});return s}),r()(b,y,function(e,t){if(!t)return e;if(t.type===E.CHANNEL)return e;var a=j(t,e.starsList);var n=C(e,t);a=Object(v["concat"])([n],a);var r=o()({},e,{starsList:a});return r}),r()(b,k,function(e,t){if(!t)return e;var a=j(t,e.starsList);var n=o()({},e,{starsList:a});return n}),r()(b,O,function(e,t){if(!t.page||!t.pages)return e;var a=o()({},e,{currentPage:t.page,totalPages:t.pages});return a}),r()(b,w,function(e,t){var a=o()({},e,{isLoading:t});return a}),b),I);t["default"]=T;var N=Object(p["d"])(function(e){return e&&e.stars&&e.stars.starsList});var A=Object(p["d"])(function(e){return e&&e.stars&&e.stars.currentPage});var R=Object(p["d"])(function(e){return e&&e.stars&&e.stars.totalPages});var M=Object(p["d"])(function(e){return e&&e.stars&&e.stars.isLoading})},,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"addUserGroupIds",function(){return b});a.d(t,"saveScrollmark",function(){return _});a.d(t,"setCursorMark",function(){return y});a.d(t,"setSearchQuery",function(){return k});a.d(t,"getFlexpaneUserGroups",function(){return E});a.d(t,"getScrollmark",function(){return C});a.d(t,"getCursorMark",function(){return j});a.d(t,"getSearchQuery",function(){return S});a.d(t,"listAndUpsertUserGroups",function(){return I});a.d(t,"searchLocalUserGroups",function(){return T});a.d(t,"fetchUserGroupsPost",function(){return N});a.d(t,"fetchDeactivatedUserGroupsPost",function(){return A});var n=a(32);var r=a.n(n);var i=a(9);var o=a.n(i);var s=a(3);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(4);var m=a(797);var h=a(123);var v=a(267);var g;var b=Object(f["a"])("Add user group IDs to the flexpane");b.propTypes=p.a.arrayOf(p.a.string).isRequired;var _=Object(f["a"])("Set the user groups flexpane scroll offset");_.propTypes=p.a.object;var y=Object(f["a"])("Set the cursor mark");y.propTypes=p.a.string;var k=Object(f["a"])("Set the search query");k.propTypes=p.a.string;var O={searchQuery:"",cursorMark:null,scrollmark:null,userGroupIds:[]};var w=Object(f["c"])((g={},o()(g,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{userGroupIds:Object(c["union"])(e.userGroupIds,t)})}),o()(g,_,function(e,t){return l()({},e,{scrollmark:t})}),o()(g,y,function(e,t){return l()({},e,{cursorMark:t})}),o()(g,k,function(e,t){if(t===e.searchQuery)return e;var a=O.userGroupIds,n=O.scrollmark,r=O.cursorMark;return l()({},e,{userGroupIds:a,scrollmark:n,cursorMark:r,searchQuery:t})}),g),O);t["default"]=w;var E=Object(f["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.userGroupIds});var C=Object(f["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.scrollmark});var j=Object(f["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.cursorMark});var S=Object(f["d"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.searchQuery});var I=Object(f["e"])("Fetch and upsert user groups",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.searchQuery,i=void 0===n?"":n,o=a.cursorMark,s=a.includeDeleted,c=r()(a,["searchQuery","cursorMark","includeDeleted"]);var u=l()({query:i,cursor_mark:o,include_deleted:s},c);return e(Object(v["j"])(u)).then(function(t){var a=t.items,n=void 0===a?[]:a,r=t.next_cursor_mark;var i=n.map(function(e){return e.id});e(b(i));e(Object(h["upsertUserGroups"])({userGroups:n}));e(y(r));return t})});I.propTypes={searchQuery:p.a.string,cursorMark:p.a.string,count:p.a.number,reason:p.a.string};var T=Object(f["e"])("Fetch local user groups",function(e,t){var a=t();var n=S(a);var r=Object(m["b"])(l()({},a),{query:n,options:{allowEmptyQuery:true,entities:{userGroups:true}}}).map(function(e){return e.id});e(b(r))});T.propTypes=null;var N=Object(f["e"])("Fetch user groups",function(e,t,a){var n=t();var r=j(n);var i=S(n);return e(I(l()({count:10},a,{cursorMark:r,searchQuery:i,reason:"fetchUserGroupsPost"})))});N.propTypes={searchQuery:p.a.string,count:p.a.number};var A=Object(f["e"])("Fetch deactivated user groups",function(e,t,a){var n=t();var r=j(n);var i=S(n);return e(I(l()({count:10,includeDeleted:2},a,{cursorMark:r,searchQuery:i,reason:"fetchUserGroupsPost"})))});A.propTypes={searchQuery:p.a.string,count:p.a.number}},,function(e,t,a){"use strict";a.d(t,"h",function(){return r});a.d(t,"b",function(){return i});a.d(t,"d",function(){return o});a.d(t,"g",function(){return s});a.d(t,"c",function(){return l});a.d(t,"e",function(){return c});a.d(t,"i",function(){return u});a.d(t,"f",function(){return d});a.d(t,"a",function(){return f});var n=a(13);var r=Object(n["c"])("TS.permissions.members.canRequestSharedChannel",function(){return false});var i=Object(n["c"])("TS.permissions.members.canCreateChannels",function(){return false});var o=Object(n["c"])("TS.permissions.members.canCreateGroups",function(){return false});var s=Object(n["c"])("TS.permissions.members.canPostInModelOb",function(){return false});var l=Object(n["c"])("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return false});var c=Object(n["c"])("TS.permissions.members.canExportMessageHistory",function(){return false});var u=Object(n["c"])("TS.permissions.members.canUserInviteToWorkspace",function(){return false});var d=Object(n["c"])("TS.permissions.members.canManageParticipationInSharedChannelsOpenBeta",function(){return false});var p=Object(n["c"])("TS.permissions.members.canEditUserGroups",function(){return false});var f=Object(n["c"])("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return false})},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return p});a.d(t,"c",function(){return f});a.d(t,"b",function(){return _});var n=a(2);var r=a.n(n);var i=a(35);var o=a.n(i);var s=a(10);var l=a(320);var c=a(47);var u=a(282);var d=new s["b"]("search_menu");var p="YYYY-MM-DD";function f(e,t,a){var n=u["g"].tokenListFromString(e,t);var r=n;r=m(e,r,a.from||[]);r=h(e,r,a.in||[]);r=v(e,r,a.before);r=g(e,r,a.after);r=b(e,r,a.fileType);var i=new l["f"](e,"",r);return i}function m(e,t,a){var r=t;var i=[].concat(a);r=r.filter(function(e){if(e.type!==c["a"].FILTER_FROM)return true;var t=e.entityId;if(t&&Object(n["includes"])(i,t)){i=Object(n["without"])(i,t);return true}return false});r=r.concat(i.map(function(t){return new u["f"](1,e,t,null,c["f"].FROM)}));return r}function h(e,t,a){var r=t;var i=[].concat(a);r=r.filter(function(e){if(e.type!==c["a"].FILTER_IN)return true;var t=e.entityId;if(Object(n["includes"])(i,t)){i=Object(n["without"])(i,t);return true}return false});r=r.concat(i.map(function(t){return new u["e"](1,e,t,null)}));return r}function v(e,t,a){var n=false;var r=t.filter(function(e){if(e.type!==c["a"].FILTER_BEFORE)return true;if(e.dateString===a){n=true;return true}return false});a&&!n&&r.push(new u["c"](a,c["f"].BEFORE));return r}function g(e,t,a){var n=false;var r=t.filter(function(e){if(e.type!==c["a"].FILTER_AFTER)return true;if(e.dateString===a){n=true;return true}return false});a&&!n&&r.push(new u["c"](a,c["f"].AFTER));return r}function b(e,t,a){var n=false;var r=t.filter(function(e){if(e.type!==c["a"].FILTER_TYPE)return true;if(e.fileType===a){n=true;return true}return false});a&&!n&&r.push(new u["h"](a));return r}function _(e,t){var a=u["g"].tokenListFromString(e,t);var n={in:[],from:[],before:void 0,after:void 0,fileType:void 0};a.forEach(function(e){e.type===c["a"].FILTER_FROM?n.from.push(e.entityId):e.type===c["a"].FILTER_IN?n.in.push(e.entityId):e.type===c["a"].FILTER_BEFORE?n.before=y(e.dateString):e.type===c["a"].FILTER_AFTER?n.after=y(e.dateString):e.type===c["a"].FILTER_TYPE&&(n.fileType=e.fileType)});return n}function y(e){if(e.match(/^20[0-9][0-9]$/))return;if(e===d.t("today"))return o()().format(p);if(e===d.t("yesterday"))return o()().subtract(1,"days").format(p);var t=o()(e);if(t.isValid())return t.format(p);return}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setFlexState",function(){return p});a.d(t,"getFlexpaneState",function(){return h});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(116);var d;var p=Object(c["a"])("Setting the flexpane state");p.propTypes={flexName:l.a.string.isRequired,flexExtra:l.a.string,flexExtraType:l.a.string,flexOrigin:l.a.string,flexOriginId:l.a.string};var f={flexName:null,flexExtra:null,flexExtraType:null,flexOrigin:null,flexOriginId:null};var m=Object(c["c"])((d={},r()(d,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.flexName,n=t.flexExtra,r=t.flexExtraType,i=t.flexOrigin,o=t.flexOriginId;return{flexName:a,flexExtra:n,flexExtraType:r,flexOrigin:i,flexOriginId:o}}),r()(d,u["setActiveChannel"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,n=t.prevChannelId;if(a===n)return e;var r=e.flexOrigin;if("channel_page"===r||"group_page"===r||"im_page"===r)return o()({},e,{flexOrigin:null,flexOriginId:null});return e}),d),f);t["default"]=m;var h=Object(c["d"])(function(e){return e&&e.flexpane})},function(e,t,a){"use strict";a.r(t);a.d(t,"setScreenReaderEnabled",function(){return f});a.d(t,"setZoomLevel",function(){return m});a.d(t,"isScreenReaderEnabled",function(){return b});a.d(t,"zoomLevel",function(){return _});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(4);var p;var f=Object(d["a"])("Toggle if a screen reader is enabled");f.propTypes=l.a.bool.isRequired;var m=Object(d["a"])("Update the zoom level");m.propTypes=l.a.number.isRequired;var h={screenReaderEnabled:false,zoomLevel:0};var v=[-3,-2,-1,0,1,2,3];var g=Object(d["c"])((p={},r()(p,f,function(e,t){if("boolean"!==typeof t)return e;if(t===e.screenReaderEnabled)return e;return o()({},e,{screenReaderEnabled:t})}),r()(p,m,function(e,t){if(!Object(c["isInteger"])(t))return e;if(!Object(c["includes"])(v,t))return e;if(t===e.zoomLevel)return e;return o()({},e,{zoomLevel:t})}),p),h);t["default"]=g;var b=Object(d["d"])(function(e){return e&&e.accessibility&&e.accessibility.screenReaderEnabled});var _=Object(d["d"])(function(e){return e&&e.accessibility&&e.accessibility.zoomLevel})},,,,,,,,,,function(e,t,a){"use strict";var n=a(1009);t["a"]=n["a"]},,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(37);var r=a(90);var i=a(186);function o(e){var t=Object(n["getTab"])(e);if("messages"===t){var a=Object(i["b"])(e);var o=Object(n["getModuleState"])(e,a);if(!o)return null;if(!o.loading)return Object(r["getRequestIdForModule"])(e,{module:a,page:o.page})}else if("files"===t){var s=Object(n["getModuleState"])(e,"files");if(!s)return null;if(!s.loading)return Object(r["getRequestIdForModule"])(e,{module:"files",page:s.page})}return null}},,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(97);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(3);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(0);var b=a.n(g);var _=a(2);var y=a.n(_);var k=a(269);var O=a(996);var w=a(783);var E=a(884);var C=400;var j=m()({},O["a"].propTypes,{layout:b.a.instanceOf(E["a"]),loadPre:b.a.func,loadPost:b.a.func,loadAround:b.a.func,itemToScroll:b.a.string,animateOnScroll:b.a.bool});var S=m()({},O["a"].defaultProps,{layout:void 0,loadPre:_["noop"],loadPost:_["noop"],loadAround:_["noop"],itemToScroll:void 0,animateOnScroll:true});var I=function(e){p()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onScroll=a.onScroll.bind(a);a.setHeight=a.setHeight.bind(a);a.layout=e.layout||new E["a"];a.node=null;a.scrollTop=a.layout.setContainerHeight(e.height,0);a.scrollTop=a.layout.setKeys(e.keys,a.scrollTop);var n=a.layout.getBounds(a.scrollTop,a.scrollTop+e.height),i=n.start,o=n.end;var s=a.layout.getTops();a.state=m()({},a.state,{start:i,end:o,tops:s});return a}o()(t,[{key:"componentWillReceiveProps",value:function e(t){this.possiblySetInitialFocus(t);this.scrollToIfNotVisible(t);this.possiblyUpdateInitialActiveItem(t);t.width!==this.props.width&&this.layout.heightCache.invalidate();t.height!==this.props.height&&(this.scrollTop=this.layout.setContainerHeight(t.height,this.getScrollTop()));Object(k["a"])(t.keys,this.props.keys)||(this.scrollTop=this.layout.setKeys(t.keys,this.getScrollTop()));this.relayout()}},{key:"scrollToIfNotVisible",value:function e(t){var a=t.itemToScroll,n=t.animateOnScroll;a&&this.scrollToKey(a,{lazy:true,animate:n})}},{key:"componentDidUpdate",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"componentDidMount",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"onScroll",value:function e(a){this.pendingScrollTop=false;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,a)}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;if(!this.node)return 0;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)}},{key:"setHeight",value:function e(t,a){if(!t)return;if(Math.abs(a-this.layout.getHeight(t))<.5)return;var n=this.getScrollTop();this.scrollTop=this.layout.setHeight(t,a,n);this.relayout()}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var r=n.keys,i=n.height;var o=this.layout.getTotalHeight();var s=this.layout.getTop(r[t]);var l=this.layout.getBottom(r[a-1]);var c=!r.length||o<=i||s<C;var u=!r.length||o<=i||o-l<C;if(c&&u)return n.loadAround();if(c)return n.loadPre();if(u)return n.loadPost();return null}},{key:"renderItem",value:function e(t,a){var n=this.getTop(t);var r=this.layout.getHeight(t);var i=this.layout.getHeightValidity(t);var o=this.state.activeItem===t;var s=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===t;var l=this.state.mouseDownTargetItem===t;var c=this.state.hoveredItem===t;var u=this.props.getAriaLabelForRow;var d=u&&u(a,{hasFocus:o});return v.a.createElement(w["a"],{key:t,id:t,height:r,validity:i,style:{top:n},role:this.props.itemRole,hasFocus:o,hasFocusWithin:s,isMouseDownOnItem:l,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup,ariaLabel:d},this.props.rowRenderer(a,{hasFocus:o,isHovered:c}))}},{key:"render",value:function e(){this.pendingScrollTop=this.scrollTop;this.scrollTop=false;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]);return t}(O["a"]);I.displayName="DynamicList";t["a"]=I;I.propTypes=j;I.defaultProps=S},,,,function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return i});a.d(t,"c",function(){return o});var n=a(13);var r=Object(n["c"])("TS.apps.permissions.areXoxaAppsInstalled",function(){return false});var i=Object(n["c"])("TS.apps.permissions.app_resource_membership_changed_sig.dispatch");var o=Object(n["c"])("TS.apps.permissions.app_wildcard_changed_sig.dispatch")},,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"toggleFolderCollapse",function(){return y});a.d(t,"setFolderCollapse",function(){return k});a.d(t,"setIsRenaming",function(){return O});a.d(t,"renameFolder",function(){return w});a.d(t,"createFolder",function(){return E});a.d(t,"setFolderData",function(){return C});a.d(t,"dragFolderOrChannel",function(){return j});a.d(t,"initializeFolderData",function(){return S});a.d(t,"saveFolderData",function(){return I});a.d(t,"getFolders",function(){return A});a.d(t,"getFolderByName",function(){return R});var n=a(9);var r=a.n(n);var i=a(24);var o=a.n(i);var s=a(3);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(4);var m=a(21);var h=a(240);var v;var g=false;var b="folder_data";var _={list:[],currentlyRenamingFolder:null};var y=Object(f["a"])("Toggle between collapse and showing channels");y.propTypes={name:p.a.string.isRequired};var k=Object(f["a"])("Set collapsed state for all folders");k.propTypes={isCollapsed:p.a.bool.isRequired};var O=Object(f["a"])("Set a folder's renaming state to true");O.propTypes={name:p.a.string.isRequired};var w=Object(f["a"])("Rename a folder");w.propTypes={oldName:p.a.string.isRequired,newName:p.a.string.isRequired};var E=Object(f["a"])("Create a new folder");E.propTypes=null;var C=Object(f["a"])("Set all folder data (from storage)");C.propTypes=p.a.array.isRequired;var j=Object(f["a"])("Drag a folder or channel onto a folder or channel");j.propTypes={src:p.a.object.isRequired,dest:p.a.object};var S=Object(f["e"])("Set Folder Data From LocalStorage",function(e,t){var a=Object(m["getUserPref"])(t(),b);if(!a){g=true;a=localStorage.getItem(b)}var n=void 0;try{n=JSON.parse(a)}catch(e){n=null}n&&0!==n.length||(n=_.list);e(C(n))});S.propTypes=null;var I=Object(f["e"])("Set Folder Data From LocalStorage",function(e,t){var a=t().channelSidebarFolders.list;var n=JSON.stringify(a);g?localStorage.setItem(b,n):e(Object(h["c"])({pref:b,value:n}))});I.propTypes=null;var T=function e(t,a){var n=true;var r=1;var i=void 0;var o=function e(t){return t.name===i};while(n){i=1===r?a:a+" ("+r+")";n=t.list.find(o);r+=1}return i};var N=Object(f["c"])((v={},r()(v,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l()({},e,{list:t})}),r()(v,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name;return l()({},e,{list:e.list.map(function(e){return e.name===a?l()({},e,{isCollapsed:!e.isCollapsed}):e}),currentlyRenamingFolder:null})}),r()(v,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.isCollapsed;return l()({},e,{list:e.list.map(function(e){return l()({},e,{isCollapsed:a})}),currentlyRenamingFolder:null})}),r()(v,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.oldName,n=t.newName;return l()({},e,{list:n?e.list.map(function(t){return t.name===a&&a!==n?l()({},t,{name:T(e,n)}):t}):e.list.filter(function(e){return e.name!==a}),currentlyRenamingFolder:null})}),r()(v,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name;return l()({},e,{currentlyRenamingFolder:a})}),r()(v,E,function(e){return l()({},e,{currentlyRenamingFolder:T(e,"New Collection"),list:[{name:T(e,"New Collection"),isCollapsed:true,channelIds:[]}].concat(o()(e.list))})}),r()(v,j,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.src,n=t.dest;if("channel"===a.type){if(n&&"channel"===n.type&&a.id===n.id)return e;var r=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});var i=-1===r?-1:e.list[r].channelIds.indexOf(a.id);var s=-1;var c=-1;if(n&&"folder"===n.type){s=u.a.findIndex(e.list,{name:n.id});c=0}else if(n&&"channel"===n.type){s=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,n.id)});c=-1===s?-1:e.list[s].channelIds.indexOf(n.id)}if(r===s&&i===c)return e;var d=l()({},e,{list:e.list.map(function(e){return l()({},e,{channelIds:e.channelIds.filter(function(e){return e!==a.id})})})});if(-1===s)return d;return l()({},d,{list:d.list.map(function(e,t){return t!==s?e:l()({},e,{isCollapsed:0!==e.channelIds.length&&e.isCollapsed,channelIds:[].concat(o()(e.channelIds.slice(0,c)),[a.id],o()(e.channelIds.slice(c)))})})})}if("folder"===a.type&&n){var p=void 0;p="folder"===n.type?u.a.findIndex(e.list,{name:n.id}):u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,n.id)});if(-1===p)return e;var f=u.a.findIndex(e.list,{name:a.id});if(f===p)return e;var m=l()({},e,{list:[].concat(o()(e.list.slice(0,f)),o()(e.list.slice(f+1)))});m.list=[].concat(o()(m.list.slice(0,p)),[e.list[f]],o()(m.list.slice(p)));return m}return e}),v),_);t["default"]=N;var A=Object(f["d"])(function(e){return e&&e.channelSidebarFolders&&e.channelSidebarFolders.list});var R=Object(f["d"])(function(e,t){return e&&e.channelSidebarFolders&&l()({},u.a.find(e.channelSidebarFolders.list,{name:t}),{isRenaming:e.channelSidebarFolders.currentlyRenamingFolder===t})})},,,,,function(e,t,a){var n,r,i;false;e.exports=a(1896)()},,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(314);var d=a(164);var p=Object(c["e"])("Clog a query session event using data from redux",function(e,t){var a=e(R());var n=e(A());var r=Object(d["a"])({state:t()});r.track("SEARCH_QUERY_SESSION",{search_session_id:a,client_request_id:n})});p.propTypes=null;var f=p;a.d(t,"SEARCH_SESSION_TIMEOUT_MS",function(){return h});a.d(t,"endQuerySession",function(){return _});a.d(t,"startQuerySession",function(){return y});a.d(t,"endSearchSession",function(){return w});a.d(t,"startSearchSession",function(){return E});a.d(t,"getQuerySessionId",function(){return A});a.d(t,"getSearchSessionId",function(){return R});var m;var h=3e5;var v=Object(c["a"])("Set the timestamp for the query session the current time");v.propTypes={};var g=Object(c["a"])("Sets a new ID for the query session");g.propTypes={querySessionId:l.a.string.isRequired};var b=Object(c["a"])("Destroy a query session ID by emptying it");b.propTypes={};var _=Object(c["e"])("Sets a new ID for the query session",function(e){e(b())});_.propTypes={};var y=Object(c["e"])("Sets a new ID for the query session",function(e){var t=Object(u["a"])();e(g({querySessionId:t}));e(v());e(f());return t});y.propTypes={};var k=Object(c["a"])("Sets a new ID for the search session");k.propTypes={searchSessionId:l.a.string.isRequired};var O=Object(c["a"])("Destroy a search session ID by emptying it");O.propTypes={};var w=Object(c["e"])("Sets a new ID for the search and query sessions",function(e){e(_());e(O())});_.propTypes={};var E=Object(c["e"])("Sets a new ID for the search session",function(e){var t=Object(u["a"])();e(k({searchSessionId:t}));e(y());return t});E.propTypes={};var C={lastEventTimeMs:void 0,querySessionId:void 0,searchSessionId:void 0};var j=Object(c["c"])((m={},r()(m,v,function(e){return o()({},e,{lastEventTimeMs:(new Date).getTime()})}),r()(m,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.querySessionId;return o()({},e,{querySessionId:a})}),r()(m,b,function(e){return o()({},e,{querySessionId:void 0})}),r()(m,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.searchSessionId;return o()({},e,{searchSessionId:a})}),r()(m,O,function(e){return o()({},e,{searchSessionId:void 0})}),m),C);var S=t["default"]=j;var I=Object(c["d"])(function(e){return e&&e.searchSession&&e.searchSession.lastEventTimeMs});var T=Object(c["d"])(function(e){return e&&e.searchSession&&e.searchSession.querySessionId});var N=Object(c["d"])(function(e){return e&&e.searchSession&&e.searchSession.searchSessionId});var A=Object(c["e"])("Get a Query Session ID",function(e,t){var a=t();var n=I(a);var r=T(a);if(!r||!n||(new Date).getTime()-n>h)return e(y());e(v());return r});A.propTypes={};var R=Object(c["e"])("Get a Search Session ID",function(e,t){var a=t();var n=I(a);var r=N(a);if(!r||!n||(new Date).getTime()-n>h)return e(E());e(v());return r});R.propTypes={}},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(2);var l=a.n(s);var c=function(){function e(t,a){r()(this,e);this.call=t;this.timeoutMs=a;this.updateDate=void 0;this.cachedData=void 0;this.pendingPromise=void 0;this.pendingPromiseRequestDate=void 0}o()(e,[{key:"get",value:function e(){if(this._isStaleOrUndefined())return this._callCacheGet();return Promise.resolve(this.cachedData)}},{key:"getStaleWhileRevalidate",value:function e(t){if(this._isStaleOrUndefined()){this._callCacheGet();return Promise.resolve(void 0===this.cachedData?t:this.cachedData)}return Promise.resolve(this.cachedData)}},{key:"flushAll",value:function e(){this.updateDate=void 0;this.cachedData=void 0;this.pendingPromise&&this.pendingPromise.cancel();this.pendingPromise=void 0;this.pendingPromiseRequestDate=void 0}},{key:"onCacheData",value:function e(t){Object(s["noop"])()}},{key:"_isStaleOrUndefined",value:function e(){return void 0===this.updateDate||void 0===this.cachedData||new Date-this.updateDate>this.timeoutMs}},{key:"_callCacheGet",value:function e(){var t=this;if(this.pendingPromise){if(new Date-this.pendingPromiseRequestDate<3e4)return this.pendingPromise;this.pendingPromise.cancel();this.pendingPromiseRequestDate=void 0;this.pendingPromiseRequestDate=void 0}this.pendingPromiseRequestDate=new Date;this.pendingPromise=this.call.apply(this).then(function(e){t.cachedData=e;t.updateDate=new Date;t.pendingPromise=void 0;t.onCacheData(e);return t.cachedData});return this.pendingPromise}}]);return e}()},,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(2);var d=a(21);var p=a(240);var f=a(22);var m=a(25);var h=Object(f["a"])("Fetch the active message pane banner for this team/user, if any",function(e){return e(Object(m["a"])({method:"promo.banner"})).then(function(e){if(!e.message_pane)return{};return{name:e.message_pane.name,data:e.message_pane.data||{}}})});a.d(t,"BANNERS_PREFS",function(){return g});a.d(t,"setMessagePaneBanner",function(){return b});a.d(t,"closeMessagePaneBanner",function(){return _});a.d(t,"getMessagePaneBannerName",function(){return w});a.d(t,"getMessagePaneBannerData",function(){return E});a.d(t,"loadBanner",function(){return C});a.d(t,"closeBanner",function(){return j});var v;var g="growth_all_banners_prefs";var b=Object(c["a"])("Set message pane banner");b.propTypes={name:l.a.string,data:l.a.object};var _=Object(c["a"])("Close message pane banner");_.propTypes=null;var y={name:"",data:{}};var k=Object(c["c"])((v={},r()(v,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name,n=t.data;var r=o()({},e,{name:a,data:n});return r}),r()(v,_,function(){return y}),v),y);var O=t["default"]=k;var w=Object(c["d"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.name});var E=Object(c["d"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.data});var C=Object(c["e"])("Load message pane banner info",function(e){e(h()).then(function(t){Object(u["isEmpty"])(t)||e(b(t))})});var j=Object(c["e"])("Close the message pane banner",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.bannerPrefs;if(!Object(u["isEmpty"])(n)){var r=Object(d["getUserPref"])(t(),g);r=r?JSON.parse(r):{};var i=r[n.countPref]||0;r[n.countPref]=i+1;r[n.tsPref]=Math.round(Date.now()/1e3);var o=JSON.stringify(r);e(Object(p["c"])({pref:g,value:o}))}e(_())});j.propTypes={bannerPrefs:l.a.object}},,,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(15);var g=a.n(v);var b=a(2);var _=a.n(b);var y=a(150);var k=a(121);var O=a(18);var w=a(10);var E=a(2184);var C=a.n(E);var j=new w["b"]("flexpane");var S=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,n=t.className;return p.a.createElement("div",{className:g()("p-flexpane_header",n)},p.a.createElement("div",{className:"p-flexpane_header__children"},a),p.a.createElement(k["a"],{title:j.t("Close Right Sidebar"),ariaLabel:j.t("Close Right Sidebar"),className:"p-flexpane_header__close",onClick:this.props.closeFlexpane},p.a.createElement(O["b"],{type:"times"})))}}]);return t}(d["PureComponent"]);S.displayName="FlexpaneHeader";S.defaultProps={children:null,className:void 0,closeFlexpane:b["noop"]};t["a"]=Object(h["connect"])(null,{closeFlexpane:y["a"]})(S)},,,function(e,t,a){"use strict";var n=a(9);var r=a.n(n);var i=a(2);var o=a(10);var s={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"};var l={EMAIL:new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i"),DOMAIN:new RegExp("^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i")};var c=new o["b"]("email_utility");function u(e,t){var a=d(e);return p(a,t)}function d(e){return e.replace(/\s|\n/g,"").replace(/,$/g,"").split(",")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var a=0;var n=e.length;var r=void 0;var i=void 0;var o=void 0;if(!Array.isArray(e))return{isValid:false,emailArray:e,errorKey:s.INVALID,errorMessage:f(s.INVALID)};if(t&&n>t){i=s.TOO_MANY;o=t>1?m(t):f(s.INVALID);return{isValid:false,emailArray:e,errorKey:i,errorMessage:o}}for(a;a<n;a+=1){r=e[a];a||""!==r?l.EMAIL.test(r)||(i=s.INVALID):i=s.EMPTY;if(i)return{isValid:false,emailArray:e,errorKey:i,errorMessage:f(i)}}return{isValid:true,emailArray:e,errorKey:"",errorMessage:""}}function f(e){var t=void 0;switch(e){case s.EMPTY:t=c.t("Please fill in your email.");break;case s.INVALID:t=c.t("Sorry, but that email is invalid.");break;case s.INVALID_DOMAIN:t=c.t("Sorry, but that isn\u2019t a valid email domain.");break;default:break}return t}function m(e){return c.t("Please make your list shorter \u2014 we can check up to {max_addresses} addresses at a time.",{max_addresses:e})}var h=a(236);a.d(t,"a",function(){return g});a.d(t,"d",function(){return b});a.d(t,"e",function(){return _});a.d(t,"b",function(){return O});a.d(t,"c",function(){return w});var v=new o["b"]("checkout_v2");var g={MINIMUM_BAU_COUNT_ALLOWED:3};function b(e,t,a,n){var r=j(t,a,n);if(Object(i["isEmpty"])(r))return{};var o={};var s=e.numberOfUsers,l=e.additionalBillingContacts,c=e.purchaseOrderNumber;var u=y(c,r);u&&(o.purchaseOrderNumber=u);var d=k(s,t,a,r);d&&(o.numberOfUsers=d);var p=E(l,r);p&&(o.additionalBillingContacts=p);return o}function _(e,t,a,n,r){var o=null;var s=j(a,n,r);if(Object(i["isEmpty"])(s))return o;var l=e.numberOfUsers,c=e.additionalBillingContacts,u=e.purchaseOrderNumber;switch(t){case h["a"].PURCHASE_ORDER_NUMBER:o=y(u,s);break;case h["a"].NUMBER_OF_USERS:o=k(l,a,n,s);break;case h["a"].ADDITIONAL_BILLING_CONTACTS:o=E(c,s);break;default:}return o}function y(e,t){var a=null;e&&!h["b"].NUMERIC_WITH_MIN_MAX_LENGTH_REGEX.test(e)&&(a=C(h["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,t));return a}function k(e,t,a,n){var r=null;e?h["b"].NUMERIC_REGEX.test(e)?e<t?r=C(h["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,n):e>a&&(r=C(h["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,n)):r=C(h["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,n):r=C(h["c"].NUMBER_OF_USERS_IS_REQUIRED,n);return r}function O(e){var t=e.contacts,a=e.delimiter,n=void 0===a?",":a;if(!t)return"";return t.replace(/(?:,|\s|\n)+/g,n)}function w(e){var t=d(e);var a=t.map(function(e){return{email:e}});return JSON.stringify(a)}function E(e,t){var a=null;if(!e)return a;var n=O({contacts:e,delimiter:","});var r=u(n);var i=r.errorKey;if(i){a=C(i,t);a.errorText||(a.errorText=r.errorMessage)}return a}function C(e,t){return t[e]||{}}function j(e,t){var a;var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)return{};return a={},r()(a,h["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,{errorText:v.t("Please enter a valid number between 1 and 20 digits long.")}),r()(a,h["c"].NUMBER_OF_USERS_IS_REQUIRED,{errorText:v.t("You\u2019ll need to include the numbers of members.")}),r()(a,h["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,{errorText:v.t("Please enter a valid number.")}),r()(a,h["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,{errorText:v.t("To pay by invoice, you\u2019ll need at least {minInvoiceSeats} members.",{minInvoiceSeats:e})}),r()(a,h["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,{errorText:v.t("You can only pay by invoice for {maxInvoiceSeats} or fewer members.",{maxInvoiceSeats:t})}),a}},,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setJumperCoachmarkState",function(){return u});a.d(t,"getJumperCoachmarkState",function(){return f});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=Object(c["a"])("Set the jumper button coachmark state");u.propTypes=l.a.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]);var d={selectedItemId:void 0};var p=Object(c["c"])(r()({},u,function(e,t){return o()({},e,{jumperCoachmark:t})}),d);t["default"]=p;var f=Object(c["d"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.jumperCoachmark})},,,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return w});a.d(t,"b",function(){return E});a.d(t,"a",function(){return C});var n=a(57);var r=a.n(n);var i=a(24);var o=a.n(i);var s=a(9);var l=a.n(s);var c=a(3);var u=a.n(c);var d=a(263);var p=a(90);var f=a(33);var m=a(23);var h=a(12);var v=a(160);var g=a(320);var b=a(47);var _=a(129);var y=a(885);var k=a(282);var O=function(){var e=Object(n["coroutine"])(regeneratorRuntime.mark(function e(t,a,r){var i,o;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:i=[];t.replace(a,function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var o=r.apply(void 0,[e].concat(a));i.push(o)});s.next=4;return Object(n["resolve"])(Promise.all(i));case 4:o=s.sent;return s.abrupt("return",t.replace(a,function(){return o.shift()}));case 6:case"end":return s.stop()}},e,this)}));return function t(a,n,r){return e.apply(this,arguments)}}();function w(e,t){var a=Object(p["getEditableRequestQuery"])(e);var n=new RegExp("\\b("+b["e"].in+"|in):(#([^\\s]+))","g");var r=g["f"].fromString(e,a);var i={};r.suggestionTokenList.forEach(function(e){if(e instanceof k["e"]){var t=e.getRawIdAndNameForXwsChannelWorkaround(),a=t.id,n=t.name;if(a&&Object(v["a"])(a)&&n){i[n]||(i[n]=[]);i[n].push({id:a,name:n})}}});var o=t.replace(n,function(e,t,a,n){if(i[n]&&i[n].length>0){var r=i[n].shift(),o=r.id,s=r.name;return t+":<#"+o+"|"+s+">"}return e});return o}function E(e,t){var a=new RegExp("\\b("+b["e"].in+"|in):(#([^\\s]+))","g");var n=Object(p["getEditableRequestChannelObjects"])(e);var r=Object(p["getEditableRequestQueryFilterIn"])(e);var i={};r.forEach(function(t){var a=n[t];if(a){var r=Object(h["getDisplayNameForChannel"])(e,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});i[r]?i[r].push(a):i[r]=[a]}});return O(t,a,function(t,a,n,r){var s=void 0;s=i[r]&&i[r].length>0?i[r].shift():Object(_["b"])(e,n)||Object(y["b"])(e,n);if(s){if(Object(h["isIm"])(s)){var c=Object(h["getMemberIdFromIm"])(s);return Promise.resolve(a+":<@"+c+">")}var v=Object(h["getDisplayNameForChannel"])(e,s,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});return Promise.resolve(a+":<#"+s.id+"|"+v+">")}return Object(d["a"])(n,{limit:150,channels:{include_archived:false},members:{include_self:true,include_org:true,include_slackbot:true,include_deleted:true},mpims:true,groups:true,enterprise_channels:true,sort:{frecency:false}}).then(function(t){var r=Object(m["getTeamId"])(e);var i=Object(f["c"])(r);var s=n&&n.replace("#","");var c=t.find(function(e){return e.name===s});if(!c)return a+":"+n;var d=Object(p["getEditableRequestChannelObjects"])(i)||{};Object(f["a"])(r,Object(p["setEditableRequestChannelObjects"])({channels:u()({},d,l()({},c.id,c))}));var v=Object(p["getEditableRequest"])(i).queryFilter;v.in=Array.from(new Set([].concat(o()(v.in),[c.id])));Object(f["a"])(r,Object(p["setEditableRequestQueryFilterOnly"])({queryFilter:v}));var g=Object(h["getDisplayNameForChannel"])(i,c,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});return a+":<#"+c.id+"|"+g+">"})})}function C(e,t){return t.replace(new RegExp("("+b["e"].in+"|in):(#[^\\s]+)","g"),function(t,a,n){var r=Object(_["b"])(e,n);if(r){var i=Object(h["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});return a+":<#"+r.id+"|"+i+">"}return t})}},,,function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(4);var o=a(180);var s=a(37);var l=a(699);var c=a(90);var u=a(796);var d=a(164);var p=Object(i["e"])("Clog a search close event using data from redux",function(e,t){var a=t();var n=Object(d["a"])({state:a});n.track("SEARCH_CLOSE",{search_session_id:e(Object(l["getSearchSessionId"])()),client_request_id:e(Object(l["getQuerySessionId"])())})});p.propTypes=null;var f=p;var m=a(979);var h=a(17);var v="IMPROVED_SEARCH";var g=Object(i["e"])("Set whether or not Search is visible",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.visible;Object(h["a"])({getState:t}).info(v,n?"Open Search":"Close Search");var r=t();var i=Object(s["getVisible"])(r);e(Object(s["setInterfaceIsVisibleOnly"])({visible:n}));if(Object(o["getSearchInputBoxDisplayQuery"])(r)&&n&&Object(s["getSessionTimeoutId"])(r)){Object(h["a"])({getState:t}).info(v,"Search is opening and session is already active: Clearing timer");clearTimeout(Object(s["getSessionTimeoutId"])(r));e(Object(s["setSessionTimeoutId"])({sessionTimeoutId:null}))}else if(!Object(o["getSearchInputBoxDisplayQuery"])(r)&&n){Object(h["a"])({getState:t}).info(v,"Search is opening without query: Starting new search session");e(Object(l["startSearchSession"])())}else if(Object(o["getSearchInputBoxDisplayQuery"])(r)&&!n){Object(h["a"])({getState:t}).info(v,"Search closing with active query: Starting timeout to clear session");var d=setTimeout(function(){var a=t();if(!Object(s["getVisible"])(a)&&Object(s["getSessionTimeoutId"])(a)===d){e(Object(s["setSessionTimeoutId"])({sessionTimeoutId:null}));e(Object(l["endSearchSession"])());e(Object(c["resetEditableRequest"])());e(Object(o["setSearchInputBoxUserQuery"])({textyString:""}));e(Object(s["setDefaultTab"])());e(Object(s["setInterfaceMode"])({interfaceMode:s["interfaceModes"].EDIT}));e(Object(m["a"])())}},l["SEARCH_SESSION_TIMEOUT_MS"]);e(Object(s["setSessionTimeoutId"])({sessionTimeoutId:d}));i!==n&&e(f())}else if(!Object(o["getSearchInputBoxDisplayQuery"])(r)&&!n){Object(h["a"])({getState:t}).info(v,"Search is closing without query: Clear search session immediately");i!==n&&e(f());e(Object(l["endSearchSession"])())}n?i!==n&&e(Object(u["a"])({})):e(Object(s["setLastOpenMethod"])({lastOpenMethod:null}))});g.propTypes={visible:r.a.bool.isRequired};var b=t["a"]=g},,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(5);var r=a.n(n);var i=a(7);var o=a.n(i);var s=a(8);var l=a.n(s);var c=a(33);var u=a(280);var d=a(700);var p=function(e){l()(t,e);function t(e){r()(this,t);return o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Object(c["a"])(e,Object(u["d"])({query:"",limit:10})).then(function(e){return e.suggestions})},3e5))}return t}(d["a"]);var f={};function m(e){f[e]||(f[e]=new p(e));return f[e]}},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(2);var l=a(26);var c=a(16);var u=a(23);var d=a(282);var p=a(320);var f=a(1116);var m=a(746);var h=a(1117);var v=a(47);var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r()(this,e);this._string=t}o()(e,[{key:"lastUnigramQuery",value:function t(){return new e(this._string.split(/\s+/).slice(-1)[0])}},{key:"lastUnigramPrefixQuery",value:function t(){return new e(Object(s["join"])(this._string.split(/\s+/).slice(0,-1)," "))}},{key:"lastBigramQuery",value:function t(){return new e(Object(s["join"])(this._string.split(/\s+/).slice(-2)," "))}},{key:"lastBigramPrefixQuery",value:function t(){return new e(Object(s["join"])(this._string.split(/\s+/).slice(0,-2)," "))}},{key:"normalQuery",value:function t(){return new e(this._string.toLowerCase())}},{key:"asQuerySuggestion",value:function e(t){return p["f"].fromString(t,this.toString())}},{key:"isModifierMatch",value:function e(t){var a=v["e"][t];return this._string.length>=1&&(Object(s["startsWith"])(t+":",this._string)||Object(s["startsWith"])(t+" ",this._string)||a&&(Object(s["startsWith"])(a+":",this._string)||Object(s["startsWith"])(a+" ",this._string)))||Object(s["startsWith"])(this._string,t)&&(this._string.length<=t.length||":"===this._string[t.length]||" "===this._string[t.length])||a&&Object(s["startsWith"])(this._string,a)&&(this._string.length<=a.length||":"===this._string[a.length]||" "===this._string[a.length])}},{key:"isEmpty",value:function e(){return!this._string}},{key:"toString",value:function e(){return this._string}}]);return e}();var b=a(506);var _=a(129);var y=a(12);var k=a(48);function O(e){return e&&e.is_view}var w=a(17);var E=a(62);var C=a(268);var j=a(19);var S=a(708);var I=a(480);var T=a(3454);var N=a(69);function A(e,t){return Object(N["getPrimaryView"])(e)===t.id}function R(e,t,a){var n=[];var r=[];var i=[];Object(s["forEach"])(t.members,function(t){var a=Object(j["getImByMemberId"])(e,t.id);Object(y["isUnread"])(a)?r.push({model_ob:t,score:0}):a&&Object(s["trim"])(a.last_msg_input)&&!A(e,a)&&!Object(y["isImWithDeletedMember"])(a)&&i.push({model_ob:t,score:0})});Object(s["forEach"])(t.mpims,function(t){Object(y["isUnread"])(t)?r.push({model_ob:t,score:0}):Object(s["trim"])(t.last_msg_input)&&!A(e,t)&&i.push({model_ob:t,score:0})});Object(s["forEach"])(t.groups,function(t){t.unread_highlight_cnt&&t.unread_highlight_cnt>0?r.push({model_ob:t,score:0}):Object(y["isUnread"])(t)&&!Object(S["b"])(t.id)?n.push({model_ob:t,score:0}):!Object(s["trim"])(t.last_msg_input)||A(e,t)||Object(y["isArchived"])(t)||i.push({model_ob:t,score:0})});Object(s["forEach"])(t.channels,function(t){t.unread_highlight_cnt&&t.unread_highlight_cnt>0&&Object(y["isMemberOfChannel"])(t)?r.push({model_ob:t,score:0}):Object(y["isUnread"])(t)&&!Object(S["b"])(t.id)&&Object(y["isMemberOfChannel"])(t)?n.push({model_ob:t,score:0}):Object(s["trim"])(t.last_msg_input)&&!A(e,t)&&!Object(y["isArchived"])(t)&&Object(y["isMemberOfChannel"])(t)&&i.push({model_ob:t,score:0})});var o=Object(T["b"])(T["a"].allThreads);Object(I["getThreadsMentionCount"])(e)>0?r.push({model_ob:o,score:0}):Object(I["hasUnreadThreads"])(e)&&n.push({model_ob:o,score:0});var l=[].concat(r,n,i);if(!l.length&&t.channels.length+t.groups.length<10){Object(s["forEach"])(t.channels,function(e){l.push({model_ob:e,score:0})});Object(s["forEach"])(t.groups,function(e){l.push({model_ob:e,score:0})})}return l.slice(0,a)}var M=a(263);var x=a(3475);var P=a(719);a.d(t,"a",function(){return L});a.d(t,"b",function(){return B});a.d(t,"c",function(){return U});a.d(t,"d",function(){return q});var D="SEARCH";var F=Object(w["b"])();function L(e){if(Object(x["b"])(e))return"omni_switcher_1";if(Object(x["c"])(e)){if(Object(C["getSearchAutocompleteMode"])(e)===C["searchAutocompleteModes"].NAVIGATION)return"search_switcher_1";return"e3_unified"}return"e3_unified"}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=arguments[2];if(!a)return t.filter(function(e){return!e.is_type_user_query});if(Object(C["getSearchAutocompleteMode"])(e)===C["searchAutocompleteModes"].NAVIGATION&&Object(x["c"])(e))return Object(s["uniqBy"])(t.filter(function(e){return!e.is_type_user_query}),function(e){return e.key}).sort(function(e,t){return t.score-e.score});if(Object(x["b"])(e))return Object(s["uniqBy"])([Object(s["assign"])(p["h"].fromString(e,a).toMap(L(e)),{is_type_user_query:true})].concat(t.filter(function(e){return!e.is_type_user_query})),function(e){return e.key}).sort(function(e,t){return t.score-e.score});return Object(s["uniqBy"])([Object(s["assign"])(p["h"].fromString(e,a).toMap(L(e)),{is_type_user_query:true})].concat(t.filter(function(e){return!e.is_type_user_query})),function(e){return e.key})}function U(e,t,a,n,r){return new G(e,t).suggestions(a,n,r)}function q(e){return Promise.all([Object(f["a"])(e).get(),Object(h["a"])(e).get(),Object(m["a"])(e).get()])}var G=function(){function e(t,a){r()(this,e);this.dispatch=t;this.state=a}o()(e,[{key:"combineResponses",value:function e(t,a,n,r){var i=Object(s["chain"])(t).map(function(e){return e.slice(n,a)}).flatten().uniqBy(function(e){return e.toTextyString()}).sortBy(function(e){return-e.score(r)}).map(function(e){return e.toMap(r)}).value();var o=Object(s["chain"])(t).map(function(e){return e.slice(0,n)}).flatten().uniqBy(function(e){return e.toTextyString()}).sortBy(function(e){return-e.score(r)}).map(function(e){return e.toMap(r)}).value();return o.concat(i).slice(0,a)}},{key:"suggestions",value:function e(t,a,n){var r=this;var i=Object(u["getTeamId"])(this.state);var o=new g(t);var s=[];var d=Object(C["getSearchAutocompleteMode"])(this.state)===C["searchAutocompleteModes"].NAVIGATION;if(o.isEmpty())d?s.push(this.suggestionsFromBlankSlateUnreads(o,a,this.state)):s.push(this.suggestionsBlankSlateQueryHistory(i,a));else if(d)s.push(this.suggestionsFromSearcher(o,a,this.state));else{s.push(this.suggestionsInFilter(o,a));s.push(this.suggestionsHasFilter(o,a));s.push(this.suggestionsMemberFilter(o,a,v["f"].FROM));s.push(this.suggestionsMemberFilter(o,a,v["f"].TO));s.push(this.suggestionsDateFilter(o,a,v["f"].BEFORE));s.push(this.suggestionsDateFilter(o,a,v["f"].DURING));s.push(this.suggestionsDateFilter(o,a,v["f"].ON));s.push(this.suggestionsDateFilter(o,a,v["f"].AFTER));s.push(this.suggestionsQueryHistory(i,o,a));s.push(this.suggestionsFiles(o,a,n));var p=Object(b["a"])(this.state);var f=Object(l["getCurrentMember"])(p);if(!Object(c["isRestricted"])(f)&&!Object(c["isUltraRestricted"])(f)&&!f.is_bot){Object(E["e"])("start_autocomplete_query_suggestions");s.push(this.suggestionsQueries(o,a).finally(function(){return Object(E["g"])("autocomplete_query_suggestions","start_autocomplete_query_suggestions")}))}s.push(this.suggestionsFromSearcher(o,a,this.state))}var m=a;return Promise.all(s).then(function(e){return r.combineResponses(e,a,m,n)}).catch(function(e){F.error(D,"suggestions failure",e);return[]})}},{key:"suggestionsBlankSlateQueryHistory",value:function e(t,a){var n=this;var r=Object(m["a"])(t);return r.get().then(function(e){return e.slice(0,a).map(function(e,t){return new p["e"](n.state,"",e,t)})})}},{key:"suggestionsQueryHistory",value:function e(t,a,n){var r=this;var i=Object(m["a"])(t);return i.getStaleWhileRevalidate([]).then(function(e){return Object(s["map"])(Object(s["filter"])(e,function(e){return Object(s["startsWith"])(e.toLowerCase(),a.normalQuery().toString())}).slice(0,n),function(e){return p["f"].fromString(r.state,e)})})}},{key:"suggestionsFromSearcher",value:function e(t,a,n){var r=this;var i={};if(Object(x["a"])(n)){i={tiered:true,entities:{channels:{includeArchived:true,searchPreviousNames:true},views:true,teams:true}};if(Object(P["d"])()){i.legacy={enterprise_channels:{runaway:true,remote_limit:2*a}};i.entities.channels.includeFromAnotherTeam=true;i.entities.channels.runaway=true}}return Object(_["g"])(this.dispatch,this.state,t.toString(),a,i).then(function(e){var n=Object(s["chain"])(e).map(function(e){return r._suggestionFromSearcherResult(e,t)}).filter(function(e){return!!e}).sort(function(e,t){return t.score-e.score}).value();!Object(x["c"])(r.state)&&n[0]&&n[0].type===v["b"].USER_NAVIGATION&&n.push(new p["f"](r.state,t,[new d["f"](n[0].score,r.state,n[0].getUser().id,null,v["f"].FROM)]));return n.slice(0,a)})}},{key:"suggestionsFromBlankSlateUnreads",value:function e(t,a){var n=this;return Object(M["a"])(t.toString(),{members:{include_org:true,include_slackbot:true,include_self:true,include_deleted:true,full_profile_filter:false,org_team_ids:[]},channels:{include_archived:true},groups:{include_archived:false},mpims:true,sort:false,tiered:true}).then(function(e){return R(n.state,e,a)}).then(function(e){return Object(s["chain"])(e).map(function(e){return n._suggestionFromSearcherResult(e,t)}).filter(function(e){return!!e}).sort(function(e,t){return t.score-e.score}).value().slice(0,a)})}},{key:"_suggestionFromSearcherResult",value:function e(t,a){if(Object(c["isMember"])(t.model_ob))return new p["i"](this.state,t.score,t.model_ob,a.toString());if(Object(y["isChannel"])(t.model_ob)||Object(y["isPrivateChannel"])(t.model_ob))return new p["a"](this.state,t.score,t.model_ob,a.toString());if(Object(y["isMpim"])(t.model_ob))return new p["d"](this.state,t.score,t.model_ob,a.toString());if(O(t.model_ob))return new p["j"](this.state,t.score,t.model_ob,a.toString());if(Object(k["isTeam"])(t.model_ob))return new p["g"](this.state,t.score,t.model_ob,a.toString());return null}},{key:"_searchQueries",value:function e(t,a){if(!t)return Promise.resolve([]);var n=Object(u["getTeamId"])(this.state);var r=t.toLowerCase();return Object(f["a"])(n).getStaleWhileRevalidate(void 0).then(function(e){return e?e.search(r,a):[]})}},{key:"suggestionsQueries",value:function e(t,a){var n=this;if(!t)return Promise.resolve([]);return this._searchQueries(t.toString(),a).then(function(e){return e.map(function(e){return new p["f"](n.state,t.toString(),[new d["a"](e[1],e[0])])})})}},{key:"suggestionsExpertChannels",value:function e(t,a){var n=this;if(!t)return Promise.resolve([]);return this._searchQueries(t.toString(),a).then(function(e){var a=Object(b["a"])(n.state);return Object(s["flatMap"])(e,function(e){var n=e[0];if(t.toString()===n||t.toString().search(" ")>=0){var r=e[2]||{};return Object.keys(r).map(function(n){var i=Object(_["a"])(a,n);return new p["b"](a,e[1],r[n],i,t)}).filter(function(e){return e.channel})}return[]})})}},{key:"_searchFiles",value:function e(t,a,n){if(!a)return Promise.resolve([]);var r=a.toLowerCase().replace(/[^a-z0-9\s]/,"").replace(/\s+/," ").trim();var i=r.split(/\s+/).slice(0,-1);var o=r.split(/\s+/).slice(-1)[0];var l=Object(u["getTeamId"])(this.state);var c=Object(h["a"])(l);return c.getStaleWhileRevalidate([]).then(function(e){return Object(s["chain"])(e[r[0]]).filter(function(e){if(i.length<1)return e.normalTitle.includes(r);if(!Object(s["reduce"])(i,function(t,a){return t&&Object(s["includes"])(e.titleTerms,a)},true))return false;return Object(s["filter"])(e.titleTerms,function(e){return Object(s["startsWith"])(e,o)}).length>0}).sort(function(e,t){return t.score-e.score}).slice(0,n).map(function(e){return{model_ob:e,score:e.score}}).value()})}},{key:"suggestionsFiles",value:function e(t,a,n){var r=[];var i=Object(b["a"])(this.state);var o=function e(a){return a.map(function(e){return new p["c"](i,e.score,e.model_ob,t.toString())})};r.push(this._searchFiles(i,t.normalQuery().toString(),a).then(o));r.push(Object(_["i"])(i,t.normalQuery().toString(),a).then(o));return Promise.all(r).then(function(e){return Object(s["chain"])(e).flatten().uniqBy(function(e){return e.fileId}).sortBy(function(e){return-e.score(n)}).slice(0,a).value()})}},{key:"suggestionsFilter",value:function e(t,a,n,r,i){var o=void 0;var l=void 0;if(t.lastUnigramQuery().normalQuery().isModifierMatch(n)){o=t.lastUnigramQuery().toString();l=t.lastUnigramPrefixQuery().asQuerySuggestion(this.state)}else{if(!t.lastBigramQuery().normalQuery().isModifierMatch(n))return Promise.resolve([]);o=t.lastBigramQuery().toString();l=t.lastBigramPrefixQuery().asQuerySuggestion(this.state)}var c=v["e"][n];var u="";Object(s["startsWith"])(o,c+":")||Object(s["startsWith"])(o,c+" ")?u=o.slice(c.length+1):(Object(s["startsWith"])(o,n+":")||Object(s["startsWith"])(o,n+" "))&&(u=o.slice(n.length+1));return r(u,a).then(function(e){return e.map(function(e){return l.withQuerySuggestionToken(i(e))})})}},{key:"suggestionsMemberFilter",value:function e(t,a,n){var r=this;return this.suggestionsFilter(t,a,n,function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return _["j"].apply(void 0,[r.dispatch,r.state].concat(t))},function(e){return new d["f"](e.score,r.state,e.model_ob.id,e.model_ob.profile.real_name||e.model_ob.name||e.model_ob.profile.display_name,n)})}},{key:"suggestionsInFilter",value:function e(t,a){var n=this;return this.suggestionsFilter(t,a,v["f"].IN,function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return _["g"].apply(void 0,[n.dispatch,n.state].concat(t))},function(e){return new d["e"](e.score,n.state,e.model_ob.id,e.model_ob.name)})}},{key:"suggestionsHasFilter",value:function e(t,a){var n=function e(t,a){return Promise.all([Object(_["h"])(t,a)]).then(function(e){return Object(s["flatten"])(e)})};return this.suggestionsFilter(t,a,v["f"].HAS,n,function(e){return new d["d"](e.model_ob,e.canLog)})}},{key:"suggestionsDateFilter",value:function e(t,a,n){var r=new d["b"](new Date);return this.suggestionsFilter(t,a,n,function(e,t){return r.suggestionsPromise(e,t,n)},function(e){return new d["c"](e.model_ob,n)})}}]);return e}();var H=U},,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setChannels",function(){return u});a.d(t,"getChannels",function(){return f});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=Object(c["a"])("Example action to store channels for channel discovery");u.propTypes={channels:l.a.arrayOf(l.a.object)};var d={channels:[]};var p=Object(c["c"])(r()({},u,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels;return o()({},e,{channels:a})}),d);t["default"]=p;var f=Object(c["d"])(function(e){return e&&e.searchChannelsUsers&&e.searchChannelsUsers.channels})},function(e,t,a){"use strict";a.r(t);a.d(t,"setFullyBooted",function(){return d});a.d(t,"isFullyBooted",function(){return m});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(63);var d=Object(c["a"])("Set the app as fully booted");d.propTypes=l.a.bool.isRequired;var p={isFullyBooted:false};var f=Object(c["c"])(r()({},d,function(e,t){return o()({},e,{isFullyBooted:t})}),p);t["default"]=f;var m=Object(c["d"])(function(e){return Object(u["a"])()||e&&e.incrementalBoot&&e.incrementalBoot.isFullyBooted})},,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return fe});a.d(t,"b",function(){return he});var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(15);var v=a.n(h);var g=a(35);var b=a.n(g);var _=a(14);var y=a(2);var k=a.n(y);var O=a(3344);var w=a(77);var E=a(26);var C=a(21);var j=a(11);var S=a(16);var I=a(359);var T=a(824);var N=a(20);var A=a(788);var R=a(472);var M=a(18);var x=a(103);var P=a(177);var D=a(65);var F=a(54);var L=a(479);var B=a(145);var U=a(3288);var q=a(889);var G=a(475);var H=a(240);var W=a(349);var V=a(430);var z=a(900);var Q=a(164);var K=a(29);var Y=a(41);var J=a(121);var Z=a(188);var X=a(23);var $=a(50);var ee=a(48);var te=a(107);var ae=a(3460);var ne=a(1094);var re=a(10);var ie=a(657);var oe=a(143);var se=a(454);var le=a(27);var ce=a(3455);var ue=a(1748);var de=a.n(ue);var pe=new re["b"]("current_status");var fe={TEAM_MENU:"team_menu",TEAM_SITE:"team_site",VIEW_PROFILE:"view_profile"};var me=[K["d"].IN_A_MEETING,K["d"].COMMUTING,K["d"].OUT_SICK,K["d"].VACATIONING,K["d"].WORKING_REMOTELY];var he=100;var ve=94;var ge={emojiMenuPosition:m.a.oneOf(["top","bottom-left"]),inputType:m.a.oneOf(Object.values(fe)),initialText:m.a.string,initialEmoji:m.a.string,initialCanonical:m.a.string,initialExpiration:m.a.number,initialDuration:m.a.oneOf(Object.keys(ce["a"])),updateCurrentMemberProfile:m.a.func.isRequired,currentUserIsAdmin:m.a.bool.isRequired,teamPresets:m.a.arrayOf(m.a.shape({text:m.a.string,emoji:m.a.string,duration:m.a.string})).isRequired,teamName:m.a.string.isRequired,teamUsesCustomizedPresets:m.a.bool,time24:m.a.bool,onSubmit:m.a.func,onCancel:m.a.func,onChange:m.a.func,useDialog:m.a.bool,featureCustomStatusExpiry:m.a.bool,defaultEmoji:m.a.string.isRequired,focusOnMount:m.a.bool,isControlled:m.a.bool,closeModal:m.a.func,seenCustomStatusExpirationBadge:m.a.bool,setUserPrefByApi:m.a.func.isRequired,usedCustomStatusKBShortcut:m.a.bool,openedFromKeyboardShortcut:m.a.bool,clogger:m.a.object.isRequired};var be={emojiMenuPosition:"bottom-left",inputType:fe.TEAM_MENU,initialText:"",initialEmoji:"",initialCanonical:"",initialExpiration:0,initialDuration:void 0,teamUsesCustomizedPresets:false,time24:false,onCancel:y["noop"],onSubmit:y["noop"],onChange:y["noop"],useDialog:false,featureCustomStatusExpiry:false,focusOnMount:false,isControlled:false,closeModal:y["noop"],seenCustomStatusExpirationBadge:false,usedCustomStatusKBShortcut:false,openedFromKeyboardShortcut:false};function _e(e){if(!e)return p.a.createElement("div",{className:"p-custom_status_input__empty_emoji"},p.a.createElement(M["a"],{className:"p-custom_status_input__emoji_circle_icon",type:"circle-fill"}),p.a.createElement(M["a"],{className:"p-custom_status_input__emoji_smile_icon",type:"smile-o"}),p.a.createElement(M["a"],{className:"p-custom_status_input__emoji_happy_icon",type:"happy-smile"}));return p.a.createElement("div",{className:"p-custom_status_input__emoji"},p.a.createElement(B["b"],{text:e,stopAnimations:true,obeyEmojiMode:false,emojiSize:B["a"].MEDIUM}))}_e.displayName="renderEmoji";var ye=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=b()().add(1,"hours");var i=e.initialDuration;if(e.useDialog){var o=e.initialExpiration&&e.initialExpiration%1800===0;if(o){n=b()(1e3*e.initialExpiration);i=ce["a"].custom}a.dialog=p.a.createRef();a.datePicker=p.a.createRef();a.timePicker=p.a.createRef()}var s=n.format("YYYY-MM-DD");var c=n.format("HH:mm");a.state={text:Object(oe["c"])(e.initialText,null,{for_edit:true}),emoji:e.initialEmoji,canonical:e.initialCanonical,customExpirationDate:s,customExpirationTime:Object.keys(T["a"]).find(function(e){return e>=c})||"00:00",duration:i,textyHasFocus:false,userDidSelectEmoji:!!e.initialEmoji,userDidSelectCustomDate:false,selectedPresetIndex:void 0};a.setTextyRef=a.setTextyRef.bind(a);a.onTextChange=a.onTextChange.bind(a);a.onCancel=a.onCancel.bind(a);a.onEmojiChange=a.onEmojiChange.bind(a);a.onEnter=a.onEnter.bind(a);a.onCustomExpirationDateChange=a.onCustomExpirationDateChange.bind(a);a.onCustomExpirationTimeChange=a.onCustomExpirationTimeChange.bind(a);a.onDurationChange=a.onDurationChange.bind(a);a.onSubmit=a.onSubmit.bind(a);a.onClickEmojiMenu=a.onClickEmojiMenu.bind(a);a.onClearIconClick=a.onClearIconClick.bind(a);a.onClearStatusButtonClick=a.onClearStatusButtonClick.bind(a);a.onTextyBlur=a.onTextyBlur.bind(a);a.onTextyFocus=a.onTextyFocus.bind(a);a.setFocusOnTextInput=a.setFocusOnTextInput.bind(a);a.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";t.style.minWidth=a.texty.container.offsetWidth+"px";Object(ie["a"])(t,a.texty.container)},completers:["channels","emoji","members"]},keyboard:{useFormattingCommands:false}};return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.useDialog;if(a&&this.dialog){this.keyCommands=new P["a"](this.dialog.node);this.keyCommands.bindAll([{keys:["command+shift+y"],handler:function e(a){a.preventDefault();t.hasUnsavedChanges()&&t.hasInput()?t.onCancel():t.props.closeModal()}},{keys:["down"],handler:function e(){return t.handleDownArrow()}},{keys:["up"],handler:function e(){return t.handleUpArrow()}}])}}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props,n=a.isControlled,r=a.initialEmoji,i=a.initialText,o=a.initialCanonical,s=a.initialDuration;var l=t.initialEmoji,c=t.initialText,u=t.initialDuration,d=t.initialCanonical;if(r===l&&i===c&&s===u&&o===d)return;if(!n&&this.hasUnsavedChanges())return;var p=Object(oe["c"])(c,null,{for_edit:true});this.texty.value(p);this.setState(function(){return{emoji:l,text:p,duration:u,canonical:d}})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onCancel",value:function e(){var t=this.props,a=t.inputType,n=t.initialEmoji,r=t.initialText,i=t.initialExpiration,o=t.initialCanonical,e=t.onCancel;if(a===fe.TEAM_SITE)return;this.texty.value(r);this.setState(function(){return{text:r,emoji:n,canonical:o,duration:void 0}},function(){return e({emoji:n,text:r,expiration:i})})}},{key:"onEnter",value:function e(){var t=this.props.useDialog;var a=this.state.text;if(this.hasUnsavedChanges()&&a.length<=he){this.onSubmit();t&&this.props.closeModal()}}},{key:"onClearIconClick",value:function e(){var t=this.props.useDialog;this.clearStatus({andSubmit:!t})}},{key:"onClearStatusButtonClick",value:function e(){this.clearStatus({andSubmit:true})}},{key:"onClickEmojiMenu",value:function e(t){var a=this.props.emojiMenuPosition;var n="top"===a?-5:5;Object(se["a"])({e:t,offset_y:n,position:a,callback:this.onEmojiChange,target_bounds:this.texty.container.getBoundingClientRect()})}},{key:"onPresetSelected",value:function e(t){var a=t.emoji,n=t.text,r=t.canonical,i=t.duration,o=void 0===i?ce["a"].all_day:i;var s=this.props.onChange;this.texty.value(n);this.setState(function(){return{emoji:a,text:n,canonical:r,duration:o,userDidSelectEmoji:true}},this.setFocusOnTextInput);s({emoji:a,text:n,canonical:r,duration:o})}},{key:"onTextChange",value:function e(){if(!this.texty)return;var t=this.props,a=t.defaultEmoji,n=t.onChange,r=t.teamPresets;var i=this.state,o=i.text,s=i.emoji,l=i.duration,c=i.userDidSelectEmoji;var u=this.texty.value();if(u===o)return;var d=Object(y["find"])(r,function(e){return u&&u===e.text})||{};var p=d.canonical||"";var f=s;c||(f=u?a:"");var m="undefined"!==typeof l||this.hasInput()?l:ce["a"].all_day;this.setState(function(){return{text:u,emoji:f,canonical:p,duration:m}});n({text:u,emoji:f,canonical:p,duration:m})}},{key:"onEmojiChange",value:function e(t){var a=this.props.onChange;var n=this.state.duration;var r="undefined"!==typeof n||this.hasInput()?n:ce["a"].all_day;this.setState(function(){return{emoji:t,duration:r,userDidSelectEmoji:true}},this.setFocusOnTextInput);a({emoji:t,duration:r})}},{key:"onDurationChange",value:function e(t){var a=this;var n=this.props.onChange;this.setState(function(){return{duration:t}},function(){t===ce["a"].custom&&a.datePicker&&a.datePicker.onTrigger&&a.datePicker.onTrigger()});n({duration:t})}},{key:"onCustomExpirationDateChange",value:function e(t,a){var n=this;var r=this.state.userDidSelectCustomDate;t();this.setState(function(){return{customExpirationDate:a,userDidSelectCustomDate:true}},function(){n.timePicker&&n.timePicker.toggleOpenState&&!r&&n.timePicker.toggleOpenState(true)})}},{key:"onCustomExpirationTimeChange",value:function e(t){this.setState(function(){return{customExpirationTime:t}})}},{key:"onSubmit",value:function e(){var t=this.state,a=t.text,n=t.canonical,r=t.emoji;var i=this.props,o=i.defaultEmoji,s=i.featureCustomStatusExpiry,l=i.inputType,e=i.onSubmit,c=i.seenCustomStatusExpirationBadge;if(l===fe.TEAM_SITE)return false;if(!this.hasUnsavedChanges()||a.length>he)return false;var u={status_text:a,status_text_canonical:n,status_emoji:r,status_expiration:s?this.getExpiration():void 0};this.props.updateCurrentMemberProfile({profile:u});this.clogStatusChange();!c&&u.status_expiration&&this.props.setUserPrefByApi({pref:"seen_custom_status_expiration_badge",value:true});e({text:a,emoji:r||a&&o||void 0,expiration:s?this.getExpiration():void 0});return true}},{key:"onTextyBlur",value:function e(){this.setState(function(){return{textyHasFocus:false}})}},{key:"onTextyFocus",value:function e(){this.setState(function(){return{textyHasFocus:true}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setFocusOnTextInput",value:function e(){this.texty.setCursorAtEnd();this.resetSelectedPresetIndex()}},{key:"getCustomExpiration",value:function e(){var t=this.state,a=t.customExpirationDate,n=t.customExpirationTime;return Math.round(b()(a+" "+n).unix())}},{key:"getExpiration",value:function e(){var t=this.props.initialExpiration;var a=this.state.duration;if(!this.hasInput())return 0;if("undefined"===typeof ce["a"][a])return Math.round(t)||0;switch(ce["a"][a]){case ce["a"].no_expiration:return ce["a"].no_expiration;case ce["a"].all_day:return Math.round((new Date).setHours(23,59,59,0)/1e3);case ce["a"].week:return Math.floor(b()().day("Friday").endOf("day").valueOf()/1e3);case ce["a"].custom:return this.getCustomExpiration();default:return Math.round(Date.now()/1e3+ce["a"][a])}}},{key:"getDurationPickerOptions",value:function e(){var t=this;var a=this.props,n=a.inputType,r=a.useDialog;var i=r&&n!==fe.TEAM_SITE?Object.keys(ce["a"]):Object.keys(ce["a"]).slice(0,-1);return i.map(function(e){return{value:e,label:t.renderDurationLabel(e)}})}},{key:"getCustomExpirationTimeOptions",value:function e(){var t=this;var a=this.state.customExpirationDate;var n=b()();var r=a===n.format("YYYY-MM-DD");var i=n.format("HH:mm");return Object.keys(T["a"]).filter(function(e){return!(r&&e<i)}).map(function(e){return{value:e,label:t.renderExpirationTimeLabel(e)}})}},{key:"setSelectedPresetIndex",value:function e(t){this.setState(function(){return{selectedPresetIndex:t}})}},{key:"getDurationText",value:function e(t,a){var n=this.props,r=n.initialExpiration,i=n.featureCustomStatusExpiry,o=n.time24;if(!t&&!!r&&a){var s=r===(new Date).setHours(23,59,59,0)/1e3;var l=s?pe.t("Today"):Object(I["a"])(r,"{status_expiration}",{do24hrTime:o});return l}var c={"30_minutes":i?pe.t("30 minutes"):"","1_hour":i?pe.t("1 hour"):"","4_hours":i?pe.t("4 hours"):"",all_day:i?pe.t("Today"):"",week:i?pe.t("This week"):"",custom:i?pe.t("Choose date and time"):""};var u=i?pe.t("Don\u2019t clear"):"";var d=c[t]||u;return d}},{key:"handleDownArrow",value:function e(){var t=this.props.teamPresets;var a=this.state,n=a.selectedPresetIndex,r=a.text,i=a.textyHasFocus;Object(y["isNumber"])(n)?n<t.length-1&&this.setSelectedPresetIndex(n+1):!r&&i&&this.setSelectedPresetIndex(0)}},{key:"handleUpArrow",value:function e(){var t=this.state.selectedPresetIndex;if(!Object(y["isNumber"])(t))return;0===t?this.setFocusOnTextInput():this.setSelectedPresetIndex(t-1)}},{key:"resetSelectedPresetIndex",value:function e(){this.setSelectedPresetIndex()}},{key:"clogStatusChange",value:function e(){var t=this.props,a=t.useDialog,n=t.teamPresets,r=t.teamUsesCustomizedPresets,i=t.clogger;var o=this.state,s=o.text,l=o.emoji,c=o.duration;if(!a)return;var u={custom_status_set_origin:K["g"].DIALOG};if(!this.hasInput()){u.custom_status=K["d"].UNKNOWN;i.track(K["h"].CUSTOM_STATUS_CLEAR,u);return}var d=n.findIndex(function(e){return s===e.text&&l===e.emoji});u.custom_status=d>-1?r?K["d"].ADMIN_PRESET:me[d]:K["d"].USER_DEFINED;u.custom_status_text=s;u.custom_status_emoji=l;u.custom_status_duration=K["e"]["DURATION_"+(c||"no_expiration").toUpperCase()];i.track(K["h"].CUSTOM_STATUS_SET,u)}},{key:"clearStatus",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.andSubmit;var r=this.props.onChange;var i="",o="",s="",l=void 0,c=false;this.texty.clear();this.setState(function(){return{text:i,emoji:o,canonical:s,duration:l,userDidSelectEmoji:c}},function(){n?t.onSubmit():t.setFocusOnTextInput()});r({emoji:o,text:i,canonical:s,duration:l})}},{key:"hasInput",value:function e(){var t=this.state,a=t.emoji,n=t.text;return!!(n||a)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,a=t.initialText,n=t.initialEmoji,r=t.initialExpiration;var i=this.state,o=i.emoji,s=i.text;return o!==n||s!==a||r!==this.getExpiration()&&this.hasInput()}},{key:"maybeRenderSaveButton",value:function e(){var t=this.props.inputType;var a=this.state.text;if(t===fe.TEAM_SITE)return null;if(!this.hasUnsavedChanges())return null;var n=pe.t("Save");return p.a.createElement("div",{className:"align_right"},p.a.createElement(N["d"],{type:"primary",size:"small",onClick:this.onSubmit,disabled:a.length>he,"data-qa":"custom_status_input_submit_button"},n))}},{key:"maybeRenderNewBadge",value:function e(){var t=this.props,a=t.seenCustomStatusExpirationBadge,n=t.useDialog,r=t.featureCustomStatusExpiry;if(a||!n)return null;return p.a.createElement(q["a"],{className:"p-custom_status_input__new_badge"},r?pe.t("NEW"):"")}},{key:"maybeRenderDurationPicker",value:function e(){var t=this.props,a=t.inputType,n=t.useDialog,r=t.isControlled,i=t.featureCustomStatusExpiry;var o=this.state.duration;if(!i)return null;if(a!==fe.TEAM_SITE&&!this.hasInput())return null;var s=a===fe.TEAM_SITE?G["a"].default:G["a"].short;if(o===ce["a"].custom)return this.renderCustomExpirationPicker();var l=void 0;var c=void 0;if(i){l=pe.t("Set status expiration to: {duration}",{duration:this.getDurationText(o,!r)});c=pe.t("Set status expiration")}return p.a.createElement("div",{className:"display_flex align_items_center"},p.a.createElement("div",{className:"p-custom_status_input__duration_picker"},p.a.createElement(G["b"],{onChange:this.onDurationChange,options:this.getDurationPickerOptions(),placeholder:this.renderDurationLabel(o,!r),usePlaceholderOption:false,useFilteredInput:false,type:s,optionsListWidth:n?200:void 0,optionsListAriaLabel:c,className:"p-custom_status_input__duration_picker_select","data-qa":"custom_status_input_duration_picker","aria-label":l})),this.maybeRenderNewBadge())}},{key:"maybeRenderKBShortCutTip",value:function e(){var t=this.props,a=t.usedCustomStatusKBShortcut,n=t.openedFromKeyboardShortcut,r=t.featureCustomStatusExpiry;if(a||n)return null;var i=void 0;i=Object(le["isMac"])()?r?pe.t("\u2318"):"":r?pe.t("Ctrl"):"";var o=r?pe.rt("<strong>Tip:</strong> Open this faster with <strong>{commandKey} + Shift + Y</strong>",{commandKey:i}):"";return p.a.createElement(q["a"],{className:"p-custom_status_input__shortcut_pill"},o)}},{key:"renderCustomExpirationPicker",value:function e(){var t=this;var a=this.props.featureCustomStatusExpiry;var n=this.state,r=n.customExpirationDate,i=n.customExpirationTime;var o=a?pe.rt("Clear on: {date}",{date:p.a.createElement("strong",null,b()(r).format("ddd, MMMM Do"))}):"";var s=void 0;var l=void 0;if(a){s=pe.t("Clear status at: {time}",{time:this.renderExpirationTimeLabel(i)});l=pe.t("Set status expiration time")}return p.a.createElement("div",{className:"p-custom_status_input__custom_expiration_picker"},p.a.createElement(Z["b"],{ariaHasPopup:true,position:"bottom",offsetY:-12,ref:function e(a){t.datePicker=a},renderPopover:function e(a){return p.a.createElement(Z["a"],a,p.a.createElement("div",{className:"p-block_kit_date_picker_calendar_wrapper"},p.a.createElement(R["a"],{showInput:false,selectedDate:r,onDateChange:function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.selectedDate;return t.onCustomExpirationDateChange(a.onClose,r)},disableDatesAfter:b()().add(1,"years").add(-1,"days").format("YYYY-MM-DD"),disableDatesBefore:b()().format("YYYY-MM-DD")})))}},p.a.createElement(J["a"],{className:"p-custom_status_input__custom_expiration_picker_date_picker_trigger",ariaLabel:a?pe.t("Clear status on: {date}",{date:b()(r).format("MMMM Do")}):"",focused:true},o,p.a.createElement(M["a"],{type:"chevron-down",className:"p-custom_status_input__chevron_down"}))),p.a.createElement("div",{className:"margin_left_50"},p.a.createElement(G["b"],{onChange:this.onCustomExpirationTimeChange,options:this.getCustomExpirationTimeOptions(),placeholder:a?p.a.createElement("span",null,pe.rt("At: <strong>{time}</strong>",{time:this.renderExpirationTimeLabel(i)})):"",ref:function e(a){t.timePicker=a},usePlaceholderOption:false,useFilteredInput:false,type:G["a"].short,optionsListAriaLabel:l,optionsListWidth:100,className:"p-custom_status_input__custom_expiration_picker_time_select","data-qa":"custom_status_input_custom_expiration_picker_time_select","aria-label":s})))}},{key:"renderActionButtons",value:function e(){var t=this.props,a=t.featureCustomStatusExpiry,n=t.inputType;var r=n===fe.TEAM_SITE||this.hasUnsavedChanges()||a&&this.hasInput();var i=v()("p-custom_status_input__actions",{"p-custom_status_input__actions--invisible":!r,"p-custom_status_input__actions--with_expiry":a});return p.a.createElement("div",{className:i},this.maybeRenderDurationPicker(),this.maybeRenderSaveButton())}},{key:"renderPresets",value:function e(){var t=this.props,a=t.currentUserIsAdmin,n=t.inputType,r=t.teamPresets,i=t.teamUsesCustomizedPresets,o=t.useDialog;var s=this.state,l=s.textyHasFocus,c=s.emoji,u=s.text;if(n===fe.TEAM_SITE||o&&(c||u))return null;var f=r.map(this.renderPresetOption,this);if(o)return p.a.createElement("div",{className:"p-custom_status_input__presets"},f);var m=i?pe.t("Suggested by your team"):pe.t("Suggested");var h=p.a.createElement(d["Fragment"],null,p.a.createElement("div",{className:"p-custom_status_input__presets_section_header"},m,a&&p.a.createElement("span",null," ","(",p.a.createElement(D["a"],{className:"p-custom_status_input__presets_edit_link",href:"/customize/statuses",target:"_blank"},pe.t("edit")),")")),f);if(n===fe.TEAM_MENU)return p.a.createElement("div",{className:"p-custom_status_input__presets"},h);if(!this.hasUnsavedChanges()&&l)return p.a.createElement(F["f"],{menuClassNames:"p-custom_status_input__presets_menu",width:this.texty&&this.texty.container.offsetWidth,temporaryCustomStatusOverrideMakeMenuInaccessibleForKeyboard:true},h);return null}},{key:"renderClearIcon",value:function e(){var t=this.props,a=t.inputType,n=t.featureCustomStatusExpiry;var r=this.state,i=r.text,o=r.emoji;if(a===fe.TEAM_SITE||!i&&!o)return null;var s=n?pe.t("Clear all"):pe.t("Clear status");var l=a===fe.VIEW_PROFILE?"top-right":"top";var c=p.a.createElement(J["a"],{className:"p-custom_status_input__clear_link","aria-label":s,"data-qa":"custom_status_clear_icon",onClick:this.onClearIconClick},p.a.createElement(M["a"],{type:"close-filled",className:"p-custom_status_input__clear_icon"}));return p.a.createElement("div",{className:"p-custom_status_input__status_clear_icon_wrap"},p.a.createElement(Y["d"],{tip:s,position:l,zIndex:"above_fs"},c))}},{key:"renderStatusTextInput",value:function e(){var t=this;var a=this.props,n=a.inputType,r=a.focusOnMount;var i=this.state,o=i.text,s=i.textyHasFocus;var l="custom_status_input_for_"+n;var c=pe.t("What\u2019s your status?");if(!Object(te["a"])())return p.a.createElement(A["a"],{currentCount:o.length,isFocused:s,maxCharacterLimit:he,counterMinimumCharacters:ve,size:W["a"].medium},p.a.createElement(V["g"],{id:l,name:l,ref:this.setTextyRef,className:"p-custom_status_input__text_input small",ariaLabel:c,initialText:o,"data-validation":"maxlength=100","data-validation-for":l,"data-qa":"custom_status_input_text_input",modules:this.textyModules,onBlur:this.onTextyBlur,onEnter:this.onEnter,onEscape:this.onCancel,onFocus:this.onTextyFocus,onTextChange:this.onTextChange,placeholder:c,focusOnMount:r,isSingleLine:true,useLegacyCreate:true,enableBroadcastKeywords:false,legacyShouldCompleteOnTab:false}));return p.a.createElement(z["a"],{completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,position:"bottom",shouldCompleteOnTab:false,renderInput:function e(a){var n=a.modules,i=a.isOpen;return p.a.createElement(A["a"],{currentCount:o.length,isFocused:s,maxCharacterLimit:he,counterMinimumCharacters:ve,size:W["a"].medium},p.a.createElement(V["g"],{id:l,name:l,ref:t.setTextyRef,className:"p-custom_status_input__text_input small",ariaLabel:c,initialText:o,"data-validation":"maxlength=100","data-validation-for":l,"data-qa":"custom_status_input_text_input",modules:n,isAutocompleteOpen:i,onBlur:t.onTextyBlur,onEnter:t.onEnter,onEscape:t.onCancel,onFocus:t.onTextyFocus,onTextChange:t.onTextChange,placeholder:c,focusOnMount:r,enableBroadcastKeywords:false,enableFormattingCommands:false,isSingleLine:true}))}})}},{key:"renderEmojiPicker",value:function e(){var t=this;var a=this.props,n=a.featureCustomStatusExpiry,r=a.emojiMenuPosition;var i=this.state.emoji;if(Object(te["a"])()){var o="top"===r?-5:5;return p.a.createElement(U["a"],{onEmojiSelected:function e(a,n){return t.onEmojiChange(":"+n+":")},offsetY:o,position:r},p.a.createElement(J["a"],{className:"p-custom_status_input__emoji_picker","aria-label":n?pe.t("Emoji menu"):"","data-qa":"custom_status_input_emoji_picker"},_e(i)))}return p.a.createElement(J["a"],{onClick:this.onClickEmojiMenu,className:"p-custom_status_input__emoji_picker","aria-label":n?pe.t("Emoji menu"):"","data-qa":"custom_status_input_emoji_picker"},_e(i))}},{key:"renderDurationLabel",value:function e(t,a){var n=this.props.featureCustomStatusExpiry;var r=this.getDurationText(t,a);if(a)return n?p.a.createElement("span",null,pe.rt("Clear after: <strong>{label}</strong>",{label:r})):"";return r}},{key:"renderExpirationTimeLabel",value:function e(t){var a=this.props.time24;return a?t:T["a"][t]}},{key:"renderPresetOption",value:function e(t,a){var n=this;var r=this.props.featureCustomStatusExpiry;var i=this.state.selectedPresetIndex;var o=t.emoji,s=t.text,l=t.canonical,c=t.duration;if(r)return p.a.createElement(J["a"],{className:"p-custom_status_input__preset_option","data-qa":"custom_status_input_preset_option",onClick:function e(){return n.onPresetSelected({emoji:o,text:s,canonical:l,duration:c})},key:a,onFocus:function e(){return n.setSelectedPresetIndex(a)},onBlur:function e(){return n.resetSelectedPresetIndex()},focused:a===i},p.a.createElement("div",{className:"p-custom_status_input__preset_option_emoji"},_e(o)),p.a.createElement("div",{className:"p-custom_status_input__preset_option_text"},s),p.a.createElement("div",{className:"p-custom_status_input__preset_option_duration"},"\xa0\u2014 ",this.renderDurationLabel(c)));return p.a.createElement(L["a"],{key:a,icon:_e(o),label:s,className:"p-custom_status_input__preset_option",onSelected:function e(){return n.onPresetSelected({emoji:o,text:s,canonical:l,duration:c})},"data-qa":"custom_status_input_preset_option",standaloneHoverEffect:true})}},{key:"render",value:function e(){var t=this.props,a=t.inputType,n=t.useDialog,r=t.initialEmoji,i=t.currentUserIsAdmin,o=t.featureCustomStatusExpiry,s=t.teamName;var l=this.state.text;var c=v()("p-custom_status_input","p-custom_status_input--for_"+a);if(n){var u=o?pe.t("Edit suggestions for {teamName}",{teamName:Object(re["m"])(s)}):"";var d=this.maybeRenderDurationPicker()||i&&p.a.createElement(D["a"],{className:"p-custom_status_input__presets_edit_link",href:"/customize/statuses",target:"_blank"},u)||null;var f=!this.hasUnsavedChanges()||l.length>he;var m=pe.t("Save");var h="primary";var g=this.onSubmit;var b=!!(r&&!this.hasUnsavedChanges());if(b){f=false;m=pe.t("Clear Status");h="outline";g=this.onClearStatusButtonClick}return p.a.createElement(x["a"],{className:"p-custom_status_input__dialog",goButtonIsDisabled:f,goButtonText:m,goButtonType:h,footerText:d,onGo:g,title:pe.t("Set a status"),ref:this.dialog,shouldCloseOnOverlayClick:true,showCancelButton:false,useSlackScrollbar:false,showTooltipOnCloseButton:true,"data-qa":"custom_status_input"},p.a.createElement("div",{className:"p-custom_status_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),this.renderPresets(),this.maybeRenderKBShortCutTip())}return p.a.createElement("div",{className:c},p.a.createElement("div",{className:"p-custom_status_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),this.renderActionButtons(),this.renderPresets())}}]);return t}(d["PureComponent"]);ye.displayName="BaseCustomStatusInput";ye.defaultProps=be;function ke(e,t){var a=t.initialText,n=t.initialEmoji,r=t.initialDuration,i=t.initialCanonical;var o=Object(E["getCurrentMember"])(e);var s=Object(E["getMemberCustomStatus"])(e,o.id);var l=Object(y["isString"])(a)?a:s.text;if(l&&Object(te["a"])()){var c=Object(ae["a"])(e,{text:l});l=Object(ne["a"])(c)}return{initialText:l,initialEmoji:"undefined"!==typeof n?n:s.emoji,initialCanonical:"undefined"!==typeof i?i:s.canonical,initialExpiration:"undefined"!==typeof r?0:s.expiration,currentUserIsAdmin:Object(S["isAdmin"])(o),teamPresets:Object(C["getCustomStatusPresets"])(e),teamName:Object(ee["getTeamDisplayName"])(Object($["getTeamById"])(e,Object(X["getTeamId"])(e))),teamUsesCustomizedPresets:Object(C["getTeamPref"])(e,"uses_customized_custom_status_presets"),time24:Object(C["getUserPref"])(e,"time24"),featureCustomStatusExpiry:Object(j["isFeatureEnabled"])(e,"feature_custom_status_expiry"),defaultEmoji:Object(C["getTeamPref"])(e,"custom_status_default_emoji"),seenCustomStatusExpirationBadge:Object(C["getUserPref"])(e,"seen_custom_status_expiration_badge"),usedCustomStatusKBShortcut:Object(C["getUserPref"])(e,"used_custom_status_kb_shortcut"),clogger:Object(Q["a"])({state:e})}}var Oe={closeModal:w["closeModal"],updateCurrentMemberProfile:O["a"],setUserPrefByApi:H["c"]};t["c"]=Object(_["connect"])(ke,Oe)(ye)},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(13);var r=Object(n["c"])("TS.ui.prefs_dialog.start")},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(32);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(1);var u=a.n(c);var d=a(76);var p=a(2);var f=a(103);var m=a(10);var h=new m["b"]("generic_dialog");var v={children:l.a.any.isRequired,cancelButtonText:l.a.string,"data-qa":l.a.string,goButtonText:l.a.string,goButtonType:l.a.string,onCancel:l.a.func,onClose:l.a.func,onGo:l.a.func,showCancelButton:l.a.bool,title:l.a.string,truncateTitle:l.a.bool};var g={cancelButtonText:null,"data-qa":"alert_dialog",goButtonText:null,goButtonType:"primary",onCancel:p["noop"],onClose:p["noop"],onGo:p["noop"],showCancelButton:false,title:null,truncateTitle:true};function b(e){var t=e.children,a=e.cancelButtonText,n=e["data-qa"],i=e.goButtonText,s=o()(e,["children","cancelButtonText","data-qa","goButtonText"]);return u.a.createElement(f["a"],r()({cancelText:a||h.t("Cancel"),"data-qa":n,goButtonText:i||h.t("OK"),role:"alertdialog"},s),t)}b.displayName="AlertDialog";b.defaultProps=g;var _=Object(d["pure"])(b);a.d(t,false,function(){return});var y=t["a"]=_},,,function(e,t,a){"use strict";a.d(t,"d",function(){return r});a.d(t,"e",function(){return i});a.d(t,"c",function(){return o});a.d(t,"a",function(){return s});a.d(t,"b",function(){return l});a.d(t,"f",function(){return c});var n=a(13);var r=Object(n["c"])("TS.newxp.slackbot_response_sent_sig.dispatch");var i=Object(n["c"])("TS.newxp.slackbot_skip_or_stop_sig.dispatch");var o=Object(n["c"])("TS.newxp.slackbot_continue_sig.dispatch");var s=Object(n["c"])("TS.newxp.cancelOnboarding");var l=Object(n["c"])("TS.newxp.resumeOnboarding");var c=Object(n["c"])("TS.newxp.startOnboardingClick")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(37);var r=a(186);function i(e){var t=Object(n["getTab"])(e);var a={};if("messages"===t){var i=Object(r["b"])(e);a.click_module_name="messages";a.click_module_sort=i===r["a"].relevantMessages?"score":"timestamp"}else if("files"===t){a.click_module_name="files";a.click_module_sort="auto"}return a}},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(32);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(164);var d=a(37);var p=a(699);var f=Object(c["e"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.method,i=void 0===n?"":n,s=o()(a,["method"]);var l=t();var c=Object(d["getLastOpenMethod"])(l)||"search_box";var f=e(Object(p["getSearchSessionId"])());var m=e(Object(p["getQuerySessionId"])());var h=Object(u["a"])({state:l});h.track("SEARCH_OPEN",r()({open_method:i||c,search_session_id:f,client_request_id:m},s))});f.propTypes={method:l.a.string};t["a"]=f},,function(e,t,a){"use strict";a.d(t,"a",function(){return p});a.d(t,"b",function(){return f});var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(3476);var d=function e(){return document.getElementById("search_popover_container")};var p=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(l["a"])(r.a.createElement(s["Provider"],{store:Object(c["d"])(t)},r.a.createElement(u["a"],null)),a)};var f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d();o.a.unmountComponentAtNode(t)};var m={mountSearch:p}},,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"addInviter",function(){return f});a.d(t,"removeInviter",function(){return m});a.d(t,"getInviter",function(){return v});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(4);var p;var f=Object(d["a"])("Add an inviter for a channel");f.propTypes={channelId:l.a.string.isRequired,inviter:l.a.string.isRequired};var m=Object(d["a"])("Remove an inviter for a channel");m.propTypes=l.a.string.isRequired;var h=Object(d["c"])((p={},r()(p,f,function(e,t){var a=t.channelId,n=t.inviter;if(!a||!n)return e;return o()({},e,r()({},a,n))}),r()(p,m,function(e,t){if(!t||!e[t])return e;return u.a.omit(e,t)}),p),{});t["default"]=h;var v=Object(d["d"])(function(e,t){return e&&e.channelsMeta&&e.channelsMeta.inviters&&e.channelsMeta.inviters[t]})},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(11);var l=a(26);var c=a(21);var u=a(50);var d=a(23);var p=a(12);var f=a(16);var m=a(36);var h=a(48);var v=a(457);var g=a(75);var b=a(27);var _=a(10);var y=a(873);var k=a(143);var O=a(662);var w=new _["b"]("growl");function E(e,t,a,n){var r=T(e,t,a._ignore_dnd);var i=N(e,t);var o=n.skip_formatting?a.content:Object(k["c"])(I(e,t,a),a,{for_growl:true});return{title:r,subtitle:i,content:o}}function C(e,t,a,n,r){var i={msg:S(a),channel:t.id||"",thread_ts:a&&a.thread_ts,ssbFilename:Object(O["a"])(r),launchUri:n.launch_uri||A(e,t,a),imageUri:n.image_uri||Object(m["getMessageAttachmentImage"])(e,a)};!i.ssbFilename&&Object(b["isSSBAndAtLeastVersion"])("3.0.0")&&(i.silent=true);if(Object(b["isSSBAndAtLeastVersion"])("3.3.0")){i.channelName=Object(p["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})||"";i.authorName=a&&Object(f["getPrefCompliantMemberNameById"])(e,a.user);i.avatarImage=Object(l["getProfileImageForMember"])(e,a.user,192)||n.avatar_image}else i.avatarImage=n.avatar_image||Object(l["getProfileImageForMember"])(e,a.user);return i}function j(e,t){var a="tag_"+(t&&(t.id||t.ts)||Date.now());var n=Object(s["getFromBootData"])(e,"img");var r=n&&n.app_icon;return{icon:r,tag:a}}function S(e){return e&&(e.ts||e.msg)||""}function I(e,t,a){var n=Object(c["getUserPref"])(e,"no_text_in_notifications");var r=n?"":R(e,a);if(Object(p["isIm"])(t))return r;var i=Object(f["getPrefCompliantMemberNameById"])(e,a.user)||"";var o="";i&&(o+=n?w.t("a message from {name}",{name:i}):i+": ");o+=r;return o}function T(e,t,a){if(!t)return"";var n=Object(_["m"])(Object(p["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false}));if(Object(s["signedIntoOtherAccounts"])(e)&&g["isDesktop"]){var r=Object(u["getCurrentTeam"])(e);if(Object(b["isMac"])())return Object(h["getTeamDisplayName"])(r);if(Object(p["isIm"])(t))return a?w.t("{name} is trying to reach you",{name:n}):w.t("[{team_domain}] from {name}",{team_domain:r.domain,name:n});return w.t("[{team_domain}] in {channel}",{team_domain:r.domain,channel:n})}if(Object(p["isIm"])(t))return a?w.t("{name} is trying to reach you",{name:n}):w.t("New message from {name}",{name:n});return w.t("New message in {channel}",{channel:n})}function N(e,t){if(!t||!Object(b["isMac"])()||!g["isDesktop"]||!Object(s["signedIntoOtherAccounts"])(e))return"";return Object(p["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})}function A(e,t,a){if(!t||!a||!a.ts)return null;return["slack://channel","?id="+t.id,"&message="+a.ts,"&team="+Object(d["getTeamId"])(e),a.thread_ts?"&thread_ts="+a.thread_ts:""].join("")}function R(e,t){if(!t)return"";var a=Object(m["shouldRenderFileThread"])(t,{featureFileThreads:Object(s["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(s["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var n=a&&t.files&&t.files.length?t.files[0]:t.file;var r=n&&a&&!t.text||Object(v["b"])(t.subtype);var i=void 0;i=r?Object(y["b"])(e,t,n):t.text?t.text:t.attachments&&t.attachments.length?M(t.attachments)||i:t.type+" "+t.subtype+" "+w.t("(message missing text)");return x(i)}function M(e){for(var t=0;t<e.length;t+=1){var a=e[t];if(a.fallback)return a.fallback;if(a.text)return a.text;if(a.pretext)return a.pretext;if(a.footer)return a.footer}return null}function x(e){return e.replace(":simple_smile:",":)")}var P=a(17);var D=a(278);var F=a(150);var L=a(31);var B=a(816);var U=a(350);var q=a(147);a.d(t,"a",function(){return V});a.d(t,"c",function(){return z});a.d(t,"b",function(){return K});var G={DEFAULT:5e3,LONG:1e4};var H=80;var W=Object(P["b"])();var V=Object(L["b"])("Switch primary or secondary view on notification click",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.messageTs,i=a.threadTs;var o=i&&i!==r;e(o?Object(F["g"])({channelId:n,threadTs:i,highlightTs:r}):Object(D["a"])({id:n}))});V.propTypes={channelId:o.a.string.isRequired,messageTs:o.a.string.isRequired,threadTs:o.a.string};var z=Object(L["b"])("Show a desktop notification",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.message,i=a.modelObject,o=a.options;if(!n||!i||Object(p["isNonExistent"])(i)){W.warn("NOTIFICATIONS","Cannot show notification, missing arguments");return}if(!Object(U["b"])()){W.warn("NOTIFICATIONS","Cannot show notification, permission denied");return}if(Object(q["e"])()&&!o.is_call_notification){W.warn("NOTIFICATIONS","Cannot show notification while screen-sharing");return}var s=t();var l=o||{};Y(s);Object(q["b"])().then(function(t){var a="new_message";if(t)a="none";else if(!Object(g["shouldAttachSoundToNotification"])()){Object(O["c"])("new_message");a="none"}if(g["isDesktop"])Object(g["notify"])(r()({},E(s,i,n,l),C(s,i,n,l,a)));else{var o=function t(){e(V({channelId:i.id,messageTs:S(n),threadTs:n.thread_ts}))};Q(r()({},E(s,i,n,l),j(s,n)),o)}})});z.propTypes={modelObject:o.a.object.isRequired,message:o.a.object.isRequired,options:o.a.object};function Q(e,t){var a=e.title,n=e.content,r=e.icon,i=e.tag;if(!window.Notification){W.warn("NOTIFICATIONS","window.Notification is not supported");return}var o=new Notification(a,{body:n,icon:r,tag:i});var s=function e(){window.focus();t&&t();o.close()};var l=function e(){setTimeout(function(){return o.close()},n&&n.length>H?G.LONG:G.DEFAULT)};try{o.onclick=s;o.onshow=l}catch(e){W.error("NOTIFICATIONS","Unable to assign Notification event handlers",e);l()}}function K(e,t){if(!U["a"]){t&&t(false,-1);return}var a=function a(){t&&t(Object(U["b"])(),Object(U["h"])());e(Object(B["setNotificationPermission"])(Object(U["h"])()))};window.webkitNotifications&&window.webkitNotifications.requestPermission&&window.webkitNotifications.checkPermission?window.webkitNotifications.requestPermission(a):window.Notification&&window.Notification.requestPermission(a)}function Y(e){if(!g["isDesktop"])return;if(!Object(c["getUserPref"])(e,"mac_ssb_bounce"))return;"long"===Object(c["getUserPref"])(e,"mac_ssb_bounce")?Object(g["bounceIndefinitely"])():Object(g["bounceOnce"])()}},,,function(e){e.exports={100:{name:"100",unicode:"1f4af"},1234:{name:"1234",unicode:"1f522"},hash:{name:"hash",unicode:"0023-fe0f-20e3"},keycap_star:{name:"keycap_star",unicode:"002a-fe0f-20e3"},zero:{name:"zero",unicode:"0030-fe0f-20e3"},one:{name:"one",unicode:"0031-fe0f-20e3"},two:{name:"two",unicode:"0032-fe0f-20e3"},three:{name:"three",unicode:"0033-fe0f-20e3"},four:{name:"four",unicode:"0034-fe0f-20e3"},five:{name:"five",unicode:"0035-fe0f-20e3"},six:{name:"six",unicode:"0036-fe0f-20e3"},seven:{name:"seven",unicode:"0037-fe0f-20e3"},eight:{name:"eight",unicode:"0038-fe0f-20e3"},nine:{name:"nine",unicode:"0039-fe0f-20e3"},copyright:{name:"copyright",unicode:"00a9-fe0f"},registered:{name:"registered",unicode:"00ae-fe0f"},mahjong:{name:"mahjong",unicode:"1f004"},black_joker:{name:"black_joker",unicode:"1f0cf"},a:{name:"a",unicode:"1f170-fe0f"},b:{name:"b",unicode:"1f171-fe0f"},o2:{name:"o2",unicode:"1f17e-fe0f"},parking:{name:"parking",unicode:"1f17f-fe0f"},ab:{name:"ab",unicode:"1f18e"},cl:{name:"cl",unicode:"1f191"},cool:{name:"cool",unicode:"1f192"},free:{name:"free",unicode:"1f193"},id:{name:"id",unicode:"1f194"},new:{name:"new",unicode:"1f195"},ng:{name:"ng",unicode:"1f196"},ok:{name:"ok",unicode:"1f197"},sos:{name:"sos",unicode:"1f198"},up:{name:"up",unicode:"1f199"},vs:{name:"vs",unicode:"1f19a"},"flag-ac":{name:"flag-ac",unicode:"1f1e6-1f1e8"},"flag-ad":{name:"flag-ad",unicode:"1f1e6-1f1e9"},"flag-ae":{name:"flag-ae",unicode:"1f1e6-1f1ea"},"flag-af":{name:"flag-af",unicode:"1f1e6-1f1eb"},"flag-ag":{name:"flag-ag",unicode:"1f1e6-1f1ec"},"flag-ai":{name:"flag-ai",unicode:"1f1e6-1f1ee"},"flag-al":{name:"flag-al",unicode:"1f1e6-1f1f1"},"flag-am":{name:"flag-am",unicode:"1f1e6-1f1f2"},"flag-ao":{name:"flag-ao",unicode:"1f1e6-1f1f4"},"flag-aq":{name:"flag-aq",unicode:"1f1e6-1f1f6"},"flag-ar":{name:"flag-ar",unicode:"1f1e6-1f1f7"},"flag-as":{name:"flag-as",unicode:"1f1e6-1f1f8"},"flag-at":{name:"flag-at",unicode:"1f1e6-1f1f9"},"flag-au":{name:"flag-au",unicode:"1f1e6-1f1fa"},"flag-aw":{name:"flag-aw",unicode:"1f1e6-1f1fc"},"flag-ax":{name:"flag-ax",unicode:"1f1e6-1f1fd"},"flag-az":{name:"flag-az",unicode:"1f1e6-1f1ff"},"flag-ba":{name:"flag-ba",unicode:"1f1e7-1f1e6"},"flag-bb":{name:"flag-bb",unicode:"1f1e7-1f1e7"},"flag-bd":{name:"flag-bd",unicode:"1f1e7-1f1e9"},"flag-be":{name:"flag-be",unicode:"1f1e7-1f1ea"},"flag-bf":{name:"flag-bf",unicode:"1f1e7-1f1eb"},"flag-bg":{name:"flag-bg",unicode:"1f1e7-1f1ec"},"flag-bh":{name:"flag-bh",unicode:"1f1e7-1f1ed"},"flag-bi":{name:"flag-bi",unicode:"1f1e7-1f1ee"},"flag-bj":{name:"flag-bj",unicode:"1f1e7-1f1ef"},"flag-bl":{name:"flag-bl",unicode:"1f1e7-1f1f1"},"flag-bm":{name:"flag-bm",unicode:"1f1e7-1f1f2"},"flag-bn":{name:"flag-bn",unicode:"1f1e7-1f1f3"},"flag-bo":{name:"flag-bo",unicode:"1f1e7-1f1f4"},"flag-bq":{name:"flag-bq",unicode:"1f1e7-1f1f6"},"flag-br":{name:"flag-br",unicode:"1f1e7-1f1f7"},"flag-bs":{name:"flag-bs",unicode:"1f1e7-1f1f8"},"flag-bt":{name:"flag-bt",unicode:"1f1e7-1f1f9"},"flag-bv":{name:"flag-bv",unicode:"1f1e7-1f1fb"},"flag-bw":{name:"flag-bw",unicode:"1f1e7-1f1fc"},"flag-by":{name:"flag-by",unicode:"1f1e7-1f1fe"},"flag-bz":{name:"flag-bz",unicode:"1f1e7-1f1ff"},"flag-ca":{name:"flag-ca",unicode:"1f1e8-1f1e6"},"flag-cc":{name:"flag-cc",unicode:"1f1e8-1f1e8"},"flag-cd":{name:"flag-cd",unicode:"1f1e8-1f1e9"},"flag-cf":{name:"flag-cf",unicode:"1f1e8-1f1eb"},"flag-cg":{name:"flag-cg",unicode:"1f1e8-1f1ec"},"flag-ch":{name:"flag-ch",unicode:"1f1e8-1f1ed"},"flag-ci":{name:"flag-ci",unicode:"1f1e8-1f1ee"},"flag-ck":{name:"flag-ck",unicode:"1f1e8-1f1f0"},"flag-cl":{name:"flag-cl",unicode:"1f1e8-1f1f1"},"flag-cm":{name:"flag-cm",unicode:"1f1e8-1f1f2"},cn:{name:"cn",unicode:"1f1e8-1f1f3"},"flag-cn":{name:"flag-cn",aliasOf:"cn",unicode:"1f1e8-1f1f3"},"flag-co":{name:"flag-co",unicode:"1f1e8-1f1f4"},"flag-cp":{name:"flag-cp",unicode:"1f1e8-1f1f5"},"flag-cr":{name:"flag-cr",unicode:"1f1e8-1f1f7"},"flag-cu":{name:"flag-cu",unicode:"1f1e8-1f1fa"},"flag-cv":{name:"flag-cv",unicode:"1f1e8-1f1fb"},"flag-cw":{name:"flag-cw",unicode:"1f1e8-1f1fc"},"flag-cx":{name:"flag-cx",unicode:"1f1e8-1f1fd"},"flag-cy":{name:"flag-cy",unicode:"1f1e8-1f1fe"},"flag-cz":{name:"flag-cz",unicode:"1f1e8-1f1ff"},de:{name:"de",unicode:"1f1e9-1f1ea"},"flag-de":{name:"flag-de",aliasOf:"de",unicode:"1f1e9-1f1ea"},"flag-dg":{name:"flag-dg",unicode:"1f1e9-1f1ec"},"flag-dj":{name:"flag-dj",unicode:"1f1e9-1f1ef"},"flag-dk":{name:"flag-dk",unicode:"1f1e9-1f1f0"},"flag-dm":{name:"flag-dm",unicode:"1f1e9-1f1f2"},"flag-do":{name:"flag-do",unicode:"1f1e9-1f1f4"},"flag-dz":{name:"flag-dz",unicode:"1f1e9-1f1ff"},"flag-ea":{name:"flag-ea",unicode:"1f1ea-1f1e6"},"flag-ec":{name:"flag-ec",unicode:"1f1ea-1f1e8"},"flag-ee":{name:"flag-ee",unicode:"1f1ea-1f1ea"},"flag-eg":{name:"flag-eg",unicode:"1f1ea-1f1ec"},"flag-eh":{name:"flag-eh",unicode:"1f1ea-1f1ed"},"flag-er":{name:"flag-er",unicode:"1f1ea-1f1f7"},es:{name:"es",unicode:"1f1ea-1f1f8"},"flag-es":{name:"flag-es",aliasOf:"es",unicode:"1f1ea-1f1f8"},"flag-et":{name:"flag-et",unicode:"1f1ea-1f1f9"},"flag-eu":{name:"flag-eu",unicode:"1f1ea-1f1fa"},"flag-fi":{name:"flag-fi",unicode:"1f1eb-1f1ee"},"flag-fj":{name:"flag-fj",unicode:"1f1eb-1f1ef"},"flag-fk":{name:"flag-fk",unicode:"1f1eb-1f1f0"},"flag-fm":{name:"flag-fm",unicode:"1f1eb-1f1f2"},"flag-fo":{name:"flag-fo",unicode:"1f1eb-1f1f4"},fr:{name:"fr",unicode:"1f1eb-1f1f7"},"flag-fr":{name:"flag-fr",aliasOf:"fr",unicode:"1f1eb-1f1f7"},"flag-ga":{name:"flag-ga",unicode:"1f1ec-1f1e6"},gb:{name:"gb",unicode:"1f1ec-1f1e7"},uk:{name:"uk",aliasOf:"gb",unicode:"1f1ec-1f1e7"},"flag-gb":{name:"flag-gb",aliasOf:"gb",unicode:"1f1ec-1f1e7"},"flag-gd":{name:"flag-gd",unicode:"1f1ec-1f1e9"},"flag-ge":{name:"flag-ge",unicode:"1f1ec-1f1ea"},"flag-gf":{name:"flag-gf",unicode:"1f1ec-1f1eb"},"flag-gg":{name:"flag-gg",unicode:"1f1ec-1f1ec"},"flag-gh":{name:"flag-gh",unicode:"1f1ec-1f1ed"},"flag-gi":{name:"flag-gi",unicode:"1f1ec-1f1ee"},"flag-gl":{name:"flag-gl",unicode:"1f1ec-1f1f1"},"flag-gm":{name:"flag-gm",unicode:"1f1ec-1f1f2"},"flag-gn":{name:"flag-gn",unicode:"1f1ec-1f1f3"},"flag-gp":{name:"flag-gp",unicode:"1f1ec-1f1f5"},"flag-gq":{name:"flag-gq",unicode:"1f1ec-1f1f6"},"flag-gr":{name:"flag-gr",unicode:"1f1ec-1f1f7"},"flag-gs":{name:"flag-gs",unicode:"1f1ec-1f1f8"},"flag-gt":{name:"flag-gt",unicode:"1f1ec-1f1f9"},"flag-gu":{name:"flag-gu",unicode:"1f1ec-1f1fa"},"flag-gw":{name:"flag-gw",unicode:"1f1ec-1f1fc"},"flag-gy":{name:"flag-gy",unicode:"1f1ec-1f1fe"},"flag-hk":{name:"flag-hk",unicode:"1f1ed-1f1f0"},"flag-hm":{name:"flag-hm",unicode:"1f1ed-1f1f2"},"flag-hn":{name:"flag-hn",unicode:"1f1ed-1f1f3"},"flag-hr":{name:"flag-hr",unicode:"1f1ed-1f1f7"},"flag-ht":{name:"flag-ht",unicode:"1f1ed-1f1f9"},"flag-hu":{name:"flag-hu",unicode:"1f1ed-1f1fa"},"flag-ic":{name:"flag-ic",unicode:"1f1ee-1f1e8"},"flag-id":{name:"flag-id",unicode:"1f1ee-1f1e9"},"flag-ie":{name:"flag-ie",unicode:"1f1ee-1f1ea"},"flag-il":{name:"flag-il",unicode:"1f1ee-1f1f1"},"flag-im":{name:"flag-im",unicode:"1f1ee-1f1f2"},"flag-in":{name:"flag-in",unicode:"1f1ee-1f1f3"},"flag-io":{name:"flag-io",unicode:"1f1ee-1f1f4"},"flag-iq":{name:"flag-iq",unicode:"1f1ee-1f1f6"},"flag-ir":{name:"flag-ir",unicode:"1f1ee-1f1f7"},"flag-is":{name:"flag-is",unicode:"1f1ee-1f1f8"},it:{name:"it",unicode:"1f1ee-1f1f9"},"flag-it":{name:"flag-it",aliasOf:"it",unicode:"1f1ee-1f1f9"},"flag-je":{name:"flag-je",unicode:"1f1ef-1f1ea"},"flag-jm":{name:"flag-jm",unicode:"1f1ef-1f1f2"},"flag-jo":{name:"flag-jo",unicode:"1f1ef-1f1f4"},jp:{name:"jp",unicode:"1f1ef-1f1f5"},"flag-jp":{name:"flag-jp",aliasOf:"jp",unicode:"1f1ef-1f1f5"},"flag-ke":{name:"flag-ke",unicode:"1f1f0-1f1ea"},"flag-kg":{name:"flag-kg",unicode:"1f1f0-1f1ec"},"flag-kh":{name:"flag-kh",unicode:"1f1f0-1f1ed"},"flag-ki":{name:"flag-ki",unicode:"1f1f0-1f1ee"},"flag-km":{name:"flag-km",unicode:"1f1f0-1f1f2"},"flag-kn":{name:"flag-kn",unicode:"1f1f0-1f1f3"},"flag-kp":{name:"flag-kp",unicode:"1f1f0-1f1f5"},kr:{name:"kr",unicode:"1f1f0-1f1f7"},"flag-kr":{name:"flag-kr",aliasOf:"kr",unicode:"1f1f0-1f1f7"},"flag-kw":{name:"flag-kw",unicode:"1f1f0-1f1fc"},"flag-ky":{name:"flag-ky",unicode:"1f1f0-1f1fe"},"flag-kz":{name:"flag-kz",unicode:"1f1f0-1f1ff"},"flag-la":{name:"flag-la",unicode:"1f1f1-1f1e6"},"flag-lb":{name:"flag-lb",unicode:"1f1f1-1f1e7"},"flag-lc":{name:"flag-lc",unicode:"1f1f1-1f1e8"},"flag-li":{name:"flag-li",unicode:"1f1f1-1f1ee"},"flag-lk":{name:"flag-lk",unicode:"1f1f1-1f1f0"},"flag-lr":{name:"flag-lr",unicode:"1f1f1-1f1f7"},"flag-ls":{name:"flag-ls",unicode:"1f1f1-1f1f8"},"flag-lt":{name:"flag-lt",unicode:"1f1f1-1f1f9"},"flag-lu":{name:"flag-lu",unicode:"1f1f1-1f1fa"},"flag-lv":{name:"flag-lv",unicode:"1f1f1-1f1fb"},"flag-ly":{name:"flag-ly",unicode:"1f1f1-1f1fe"},"flag-ma":{name:"flag-ma",unicode:"1f1f2-1f1e6"},"flag-mc":{name:"flag-mc",unicode:"1f1f2-1f1e8"},"flag-md":{name:"flag-md",unicode:"1f1f2-1f1e9"},"flag-me":{name:"flag-me",unicode:"1f1f2-1f1ea"},"flag-mf":{name:"flag-mf",unicode:"1f1f2-1f1eb"},"flag-mg":{name:"flag-mg",unicode:"1f1f2-1f1ec"},"flag-mh":{name:"flag-mh",unicode:"1f1f2-1f1ed"},"flag-mk":{name:"flag-mk",unicode:"1f1f2-1f1f0"},"flag-ml":{name:"flag-ml",unicode:"1f1f2-1f1f1"},"flag-mm":{name:"flag-mm",unicode:"1f1f2-1f1f2"},"flag-mn":{name:"flag-mn",unicode:"1f1f2-1f1f3"},"flag-mo":{name:"flag-mo",unicode:"1f1f2-1f1f4"},"flag-mp":{name:"flag-mp",unicode:"1f1f2-1f1f5"},"flag-mq":{name:"flag-mq",unicode:"1f1f2-1f1f6"},"flag-mr":{name:"flag-mr",unicode:"1f1f2-1f1f7"},"flag-ms":{name:"flag-ms",unicode:"1f1f2-1f1f8"},"flag-mt":{name:"flag-mt",unicode:"1f1f2-1f1f9"},"flag-mu":{name:"flag-mu",unicode:"1f1f2-1f1fa"},"flag-mv":{name:"flag-mv",unicode:"1f1f2-1f1fb"},"flag-mw":{name:"flag-mw",unicode:"1f1f2-1f1fc"},"flag-mx":{name:"flag-mx",unicode:"1f1f2-1f1fd"},"flag-my":{name:"flag-my",unicode:"1f1f2-1f1fe"},"flag-mz":{name:"flag-mz",unicode:"1f1f2-1f1ff"},"flag-na":{name:"flag-na",unicode:"1f1f3-1f1e6"},"flag-nc":{name:"flag-nc",unicode:"1f1f3-1f1e8"},"flag-ne":{name:"flag-ne",unicode:"1f1f3-1f1ea"},"flag-nf":{name:"flag-nf",unicode:"1f1f3-1f1eb"},"flag-ng":{name:"flag-ng",unicode:"1f1f3-1f1ec"},"flag-ni":{name:"flag-ni",unicode:"1f1f3-1f1ee"},"flag-nl":{name:"flag-nl",unicode:"1f1f3-1f1f1"},"flag-no":{name:"flag-no",unicode:"1f1f3-1f1f4"},"flag-np":{name:"flag-np",unicode:"1f1f3-1f1f5"},"flag-nr":{name:"flag-nr",unicode:"1f1f3-1f1f7"},"flag-nu":{name:"flag-nu",unicode:"1f1f3-1f1fa"},"flag-nz":{name:"flag-nz",unicode:"1f1f3-1f1ff"},"flag-om":{name:"flag-om",unicode:"1f1f4-1f1f2"},"flag-pa":{name:"flag-pa",unicode:"1f1f5-1f1e6"},"flag-pe":{name:"flag-pe",unicode:"1f1f5-1f1ea"},"flag-pf":{name:"flag-pf",unicode:"1f1f5-1f1eb"},"flag-pg":{name:"flag-pg",unicode:"1f1f5-1f1ec"},"flag-ph":{name:"flag-ph",unicode:"1f1f5-1f1ed"},"flag-pk":{name:"flag-pk",unicode:"1f1f5-1f1f0"},"flag-pl":{name:"flag-pl",unicode:"1f1f5-1f1f1"},"flag-pm":{name:"flag-pm",unicode:"1f1f5-1f1f2"},"flag-pn":{name:"flag-pn",unicode:"1f1f5-1f1f3"},"flag-pr":{name:"flag-pr",unicode:"1f1f5-1f1f7"},"flag-ps":{name:"flag-ps",unicode:"1f1f5-1f1f8"},"flag-pt":{name:"flag-pt",unicode:"1f1f5-1f1f9"},"flag-pw":{name:"flag-pw",unicode:"1f1f5-1f1fc"},"flag-py":{name:"flag-py",unicode:"1f1f5-1f1fe"},"flag-qa":{name:"flag-qa",unicode:"1f1f6-1f1e6"},"flag-re":{name:"flag-re",unicode:"1f1f7-1f1ea"},"flag-ro":{name:"flag-ro",unicode:"1f1f7-1f1f4"},"flag-rs":{name:"flag-rs",unicode:"1f1f7-1f1f8"},ru:{name:"ru",unicode:"1f1f7-1f1fa"},"flag-ru":{name:"flag-ru",aliasOf:"ru",unicode:"1f1f7-1f1fa"},"flag-rw":{name:"flag-rw",unicode:"1f1f7-1f1fc"},"flag-sa":{name:"flag-sa",unicode:"1f1f8-1f1e6"},"flag-sb":{name:"flag-sb",unicode:"1f1f8-1f1e7"},"flag-sc":{name:"flag-sc",unicode:"1f1f8-1f1e8"},"flag-sd":{name:"flag-sd",unicode:"1f1f8-1f1e9"},"flag-se":{name:"flag-se",unicode:"1f1f8-1f1ea"},"flag-sg":{name:"flag-sg",unicode:"1f1f8-1f1ec"},"flag-sh":{name:"flag-sh",unicode:"1f1f8-1f1ed"},"flag-si":{name:"flag-si",unicode:"1f1f8-1f1ee"},"flag-sj":{name:"flag-sj",unicode:"1f1f8-1f1ef"},"flag-sk":{name:"flag-sk",unicode:"1f1f8-1f1f0"},"flag-sl":{name:"flag-sl",unicode:"1f1f8-1f1f1"},"flag-sm":{name:"flag-sm",unicode:"1f1f8-1f1f2"},"flag-sn":{name:"flag-sn",unicode:"1f1f8-1f1f3"},"flag-so":{name:"flag-so",unicode:"1f1f8-1f1f4"},"flag-sr":{name:"flag-sr",unicode:"1f1f8-1f1f7"},"flag-ss":{name:"flag-ss",unicode:"1f1f8-1f1f8"},"flag-st":{name:"flag-st",unicode:"1f1f8-1f1f9"},"flag-sv":{name:"flag-sv",unicode:"1f1f8-1f1fb"},"flag-sx":{name:"flag-sx",unicode:"1f1f8-1f1fd"},"flag-sy":{name:"flag-sy",unicode:"1f1f8-1f1fe"},"flag-sz":{name:"flag-sz",unicode:"1f1f8-1f1ff"},"flag-ta":{name:"flag-ta",unicode:"1f1f9-1f1e6"},"flag-tc":{name:"flag-tc",unicode:"1f1f9-1f1e8"},"flag-td":{name:"flag-td",unicode:"1f1f9-1f1e9"},"flag-tf":{name:"flag-tf",unicode:"1f1f9-1f1eb"},"flag-tg":{name:"flag-tg",unicode:"1f1f9-1f1ec"},"flag-th":{name:"flag-th",unicode:"1f1f9-1f1ed"},"flag-tj":{name:"flag-tj",unicode:"1f1f9-1f1ef"},"flag-tk":{name:"flag-tk",unicode:"1f1f9-1f1f0"},"flag-tl":{name:"flag-tl",unicode:"1f1f9-1f1f1"},"flag-tm":{name:"flag-tm",unicode:"1f1f9-1f1f2"},"flag-tn":{name:"flag-tn",unicode:"1f1f9-1f1f3"},"flag-to":{name:"flag-to",unicode:"1f1f9-1f1f4"},"flag-tr":{name:"flag-tr",unicode:"1f1f9-1f1f7"},"flag-tt":{name:"flag-tt",unicode:"1f1f9-1f1f9"},"flag-tv":{name:"flag-tv",unicode:"1f1f9-1f1fb"},"flag-tw":{name:"flag-tw",unicode:"1f1f9-1f1fc"},"flag-tz":{name:"flag-tz",unicode:"1f1f9-1f1ff"},"flag-ua":{name:"flag-ua",unicode:"1f1fa-1f1e6"},"flag-ug":{name:"flag-ug",unicode:"1f1fa-1f1ec"},"flag-um":{name:"flag-um",unicode:"1f1fa-1f1f2"},"flag-un":{name:"flag-un",unicode:"1f1fa-1f1f3"},us:{name:"us",unicode:"1f1fa-1f1f8"},"flag-us":{name:"flag-us",aliasOf:"us",unicode:"1f1fa-1f1f8"},"flag-uy":{name:"flag-uy",unicode:"1f1fa-1f1fe"},"flag-uz":{name:"flag-uz",unicode:"1f1fa-1f1ff"},"flag-va":{name:"flag-va",unicode:"1f1fb-1f1e6"},"flag-vc":{name:"flag-vc",unicode:"1f1fb-1f1e8"},"flag-ve":{name:"flag-ve",unicode:"1f1fb-1f1ea"},"flag-vg":{name:"flag-vg",unicode:"1f1fb-1f1ec"},"flag-vi":{name:"flag-vi",unicode:"1f1fb-1f1ee"},"flag-vn":{name:"flag-vn",unicode:"1f1fb-1f1f3"},"flag-vu":{name:"flag-vu",unicode:"1f1fb-1f1fa"},"flag-wf":{name:"flag-wf",unicode:"1f1fc-1f1eb"},"flag-ws":{name:"flag-ws",unicode:"1f1fc-1f1f8"},"flag-xk":{name:"flag-xk",unicode:"1f1fd-1f1f0"},"flag-ye":{name:"flag-ye",unicode:"1f1fe-1f1ea"},"flag-yt":{name:"flag-yt",unicode:"1f1fe-1f1f9"},"flag-za":{name:"flag-za",unicode:"1f1ff-1f1e6"},"flag-zm":{name:"flag-zm",unicode:"1f1ff-1f1f2"},"flag-zw":{name:"flag-zw",unicode:"1f1ff-1f1fc"},koko:{name:"koko",unicode:"1f201"},sa:{name:"sa",unicode:"1f202-fe0f"},u7121:{name:"u7121",unicode:"1f21a"},u6307:{name:"u6307",unicode:"1f22f"},u7981:{name:"u7981",unicode:"1f232"},u7a7a:{name:"u7a7a",unicode:"1f233"},u5408:{name:"u5408",unicode:"1f234"},u6e80:{name:"u6e80",unicode:"1f235"},u6709:{name:"u6709",unicode:"1f236"},u6708:{name:"u6708",unicode:"1f237-fe0f"},u7533:{name:"u7533",unicode:"1f238"},u5272:{name:"u5272",unicode:"1f239"},u55b6:{name:"u55b6",unicode:"1f23a"},ideograph_advantage:{name:"ideograph_advantage",unicode:"1f250"},accept:{name:"accept",unicode:"1f251"},cyclone:{name:"cyclone",unicode:"1f300"},foggy:{name:"foggy",unicode:"1f301"},closed_umbrella:{name:"closed_umbrella",unicode:"1f302"},night_with_stars:{name:"night_with_stars",unicode:"1f303"},sunrise_over_mountains:{name:"sunrise_over_mountains",unicode:"1f304"},sunrise:{name:"sunrise",unicode:"1f305"},city_sunset:{name:"city_sunset",unicode:"1f306"},city_sunrise:{name:"city_sunrise",unicode:"1f307"},rainbow:{name:"rainbow",unicode:"1f308"},bridge_at_night:{name:"bridge_at_night",unicode:"1f309"},ocean:{name:"ocean",unicode:"1f30a"},volcano:{name:"volcano",unicode:"1f30b"},milky_way:{name:"milky_way",unicode:"1f30c"},earth_africa:{name:"earth_africa",unicode:"1f30d"},earth_americas:{name:"earth_americas",unicode:"1f30e"},earth_asia:{name:"earth_asia",unicode:"1f30f"},globe_with_meridians:{name:"globe_with_meridians",unicode:"1f310"},new_moon:{name:"new_moon",unicode:"1f311"},waxing_crescent_moon:{name:"waxing_crescent_moon",unicode:"1f312"},first_quarter_moon:{name:"first_quarter_moon",unicode:"1f313"},moon:{name:"moon",unicode:"1f314"},waxing_gibbous_moon:{name:"waxing_gibbous_moon",aliasOf:"moon",unicode:"1f314"},full_moon:{name:"full_moon",unicode:"1f315"},waning_gibbous_moon:{name:"waning_gibbous_moon",unicode:"1f316"},last_quarter_moon:{name:"last_quarter_moon",unicode:"1f317"},waning_crescent_moon:{name:"waning_crescent_moon",unicode:"1f318"},crescent_moon:{name:"crescent_moon",unicode:"1f319"},new_moon_with_face:{name:"new_moon_with_face",unicode:"1f31a"},first_quarter_moon_with_face:{name:"first_quarter_moon_with_face",unicode:"1f31b"},last_quarter_moon_with_face:{name:"last_quarter_moon_with_face",unicode:"1f31c"},full_moon_with_face:{name:"full_moon_with_face",unicode:"1f31d"},sun_with_face:{name:"sun_with_face",unicode:"1f31e"},star2:{name:"star2",unicode:"1f31f"},stars:{name:"stars",unicode:"1f320"},thermometer:{name:"thermometer",unicode:"1f321-fe0f"},mostly_sunny:{name:"mostly_sunny",unicode:"1f324-fe0f"},sun_small_cloud:{name:"sun_small_cloud",aliasOf:"mostly_sunny",unicode:"1f324-fe0f"},barely_sunny:{name:"barely_sunny",unicode:"1f325-fe0f"},sun_behind_cloud:{name:"sun_behind_cloud",aliasOf:"barely_sunny",unicode:"1f325-fe0f"},partly_sunny_rain:{name:"partly_sunny_rain",unicode:"1f326-fe0f"},sun_behind_rain_cloud:{name:"sun_behind_rain_cloud",aliasOf:"partly_sunny_rain",unicode:"1f326-fe0f"},rain_cloud:{name:"rain_cloud",unicode:"1f327-fe0f"},snow_cloud:{name:"snow_cloud",unicode:"1f328-fe0f"},lightning:{name:"lightning",unicode:"1f329-fe0f"},lightning_cloud:{name:"lightning_cloud",aliasOf:"lightning",unicode:"1f329-fe0f"},tornado:{name:"tornado",unicode:"1f32a-fe0f"},tornado_cloud:{name:"tornado_cloud",aliasOf:"tornado",unicode:"1f32a-fe0f"},fog:{name:"fog",unicode:"1f32b-fe0f"},wind_blowing_face:{name:"wind_blowing_face",unicode:"1f32c-fe0f"},hotdog:{name:"hotdog",unicode:"1f32d"},taco:{name:"taco",unicode:"1f32e"},burrito:{name:"burrito",unicode:"1f32f"},chestnut:{name:"chestnut",unicode:"1f330"},seedling:{name:"seedling",unicode:"1f331"},evergreen_tree:{name:"evergreen_tree",unicode:"1f332"},deciduous_tree:{name:"deciduous_tree",unicode:"1f333"},palm_tree:{name:"palm_tree",unicode:"1f334"},cactus:{name:"cactus",unicode:"1f335"},hot_pepper:{name:"hot_pepper",unicode:"1f336-fe0f"},tulip:{name:"tulip",unicode:"1f337"},cherry_blossom:{name:"cherry_blossom",unicode:"1f338"},rose:{name:"rose",unicode:"1f339"},hibiscus:{name:"hibiscus",unicode:"1f33a"},sunflower:{name:"sunflower",unicode:"1f33b"},blossom:{name:"blossom",unicode:"1f33c"},corn:{name:"corn",unicode:"1f33d"},ear_of_rice:{name:"ear_of_rice",unicode:"1f33e"},herb:{name:"herb",unicode:"1f33f"},four_leaf_clover:{name:"four_leaf_clover",unicode:"1f340"},maple_leaf:{name:"maple_leaf",unicode:"1f341"},fallen_leaf:{name:"fallen_leaf",unicode:"1f342"},leaves:{name:"leaves",unicode:"1f343"},mushroom:{name:"mushroom",unicode:"1f344"},tomato:{name:"tomato",unicode:"1f345"},eggplant:{name:"eggplant",unicode:"1f346"},grapes:{name:"grapes",unicode:"1f347"},melon:{name:"melon",unicode:"1f348"},watermelon:{name:"watermelon",unicode:"1f349"},tangerine:{name:"tangerine",unicode:"1f34a"},lemon:{name:"lemon",unicode:"1f34b"},banana:{name:"banana",unicode:"1f34c"},pineapple:{name:"pineapple",unicode:"1f34d"},apple:{name:"apple",unicode:"1f34e"},green_apple:{name:"green_apple",unicode:"1f34f"},pear:{name:"pear",unicode:"1f350"},peach:{name:"peach",unicode:"1f351"},cherries:{name:"cherries",unicode:"1f352"},strawberry:{name:"strawberry",unicode:"1f353"},hamburger:{name:"hamburger",unicode:"1f354"},pizza:{name:"pizza",unicode:"1f355"},meat_on_bone:{name:"meat_on_bone",unicode:"1f356"},poultry_leg:{name:"poultry_leg",unicode:"1f357"},rice_cracker:{name:"rice_cracker",unicode:"1f358"},rice_ball:{name:"rice_ball",unicode:"1f359"},rice:{name:"rice",unicode:"1f35a"},curry:{name:"curry",unicode:"1f35b"},ramen:{name:"ramen",unicode:"1f35c"},spaghetti:{name:"spaghetti",unicode:"1f35d"},bread:{name:"bread",unicode:"1f35e"},fries:{name:"fries",unicode:"1f35f"},sweet_potato:{name:"sweet_potato",unicode:"1f360"},dango:{name:"dango",unicode:"1f361"},oden:{name:"oden",unicode:"1f362"},sushi:{name:"sushi",unicode:"1f363"},fried_shrimp:{name:"fried_shrimp",unicode:"1f364"},fish_cake:{name:"fish_cake",unicode:"1f365"},icecream:{name:"icecream",unicode:"1f366"},shaved_ice:{name:"shaved_ice",unicode:"1f367"},ice_cream:{name:"ice_cream",unicode:"1f368"},doughnut:{name:"doughnut",unicode:"1f369"},cookie:{name:"cookie",unicode:"1f36a"},chocolate_bar:{name:"chocolate_bar",unicode:"1f36b"},candy:{name:"candy",unicode:"1f36c"},lollipop:{name:"lollipop",unicode:"1f36d"},custard:{name:"custard",unicode:"1f36e"},honey_pot:{name:"honey_pot",unicode:"1f36f"},cake:{name:"cake",unicode:"1f370"},bento:{name:"bento",unicode:"1f371"},stew:{name:"stew",unicode:"1f372"},fried_egg:{name:"fried_egg",unicode:"1f373"},cooking:{name:"cooking",aliasOf:"fried_egg",unicode:"1f373"},fork_and_knife:{name:"fork_and_knife",unicode:"1f374"},tea:{name:"tea",unicode:"1f375"},sake:{name:"sake",unicode:"1f376"},wine_glass:{name:"wine_glass",unicode:"1f377"},cocktail:{name:"cocktail",unicode:"1f378"},tropical_drink:{name:"tropical_drink",unicode:"1f379"},beer:{name:"beer",unicode:"1f37a"},beers:{name:"beers",unicode:"1f37b"},baby_bottle:{name:"baby_bottle",unicode:"1f37c"},knife_fork_plate:{name:"knife_fork_plate",unicode:"1f37d-fe0f"},champagne:{name:"champagne",unicode:"1f37e"},popcorn:{name:"popcorn",unicode:"1f37f"},ribbon:{name:"ribbon",unicode:"1f380"},gift:{name:"gift",unicode:"1f381"},birthday:{name:"birthday",unicode:"1f382"},jack_o_lantern:{name:"jack_o_lantern",unicode:"1f383"},christmas_tree:{name:"christmas_tree",unicode:"1f384"},santa:{name:"santa",unicode:"1f385",skinVariations:{2:{name:"santa::skin-tone-2",unicode:"1f385-1f3fb"},3:{name:"santa::skin-tone-3",unicode:"1f385-1f3fc"},4:{name:"santa::skin-tone-4",unicode:"1f385-1f3fd"},5:{name:"santa::skin-tone-5",unicode:"1f385-1f3fe"},6:{name:"santa::skin-tone-6",unicode:"1f385-1f3ff"}}},fireworks:{name:"fireworks",unicode:"1f386"},sparkler:{name:"sparkler",unicode:"1f387"},balloon:{name:"balloon",unicode:"1f388"},tada:{name:"tada",unicode:"1f389"},confetti_ball:{name:"confetti_ball",unicode:"1f38a"},tanabata_tree:{name:"tanabata_tree",unicode:"1f38b"},crossed_flags:{name:"crossed_flags",unicode:"1f38c"},bamboo:{name:"bamboo",unicode:"1f38d"},dolls:{name:"dolls",unicode:"1f38e"},flags:{name:"flags",unicode:"1f38f"},wind_chime:{name:"wind_chime",unicode:"1f390"},rice_scene:{name:"rice_scene",unicode:"1f391"},school_satchel:{name:"school_satchel",unicode:"1f392"},mortar_board:{name:"mortar_board",unicode:"1f393"},medal:{name:"medal",unicode:"1f396-fe0f"},reminder_ribbon:{name:"reminder_ribbon",unicode:"1f397-fe0f"},studio_microphone:{name:"studio_microphone",unicode:"1f399-fe0f"},level_slider:{name:"level_slider",unicode:"1f39a-fe0f"},control_knobs:{name:"control_knobs",unicode:"1f39b-fe0f"},film_frames:{name:"film_frames",unicode:"1f39e-fe0f"},admission_tickets:{name:"admission_tickets",unicode:"1f39f-fe0f"},carousel_horse:{name:"carousel_horse",unicode:"1f3a0"},ferris_wheel:{name:"ferris_wheel",unicode:"1f3a1"},roller_coaster:{name:"roller_coaster",unicode:"1f3a2"},fishing_pole_and_fish:{name:"fishing_pole_and_fish",unicode:"1f3a3"},microphone:{name:"microphone",unicode:"1f3a4"},movie_camera:{name:"movie_camera",unicode:"1f3a5"},cinema:{name:"cinema",unicode:"1f3a6"},headphones:{name:"headphones",unicode:"1f3a7"},art:{name:"art",unicode:"1f3a8"},tophat:{name:"tophat",unicode:"1f3a9"},circus_tent:{name:"circus_tent",unicode:"1f3aa"},ticket:{name:"ticket",unicode:"1f3ab"},clapper:{name:"clapper",unicode:"1f3ac"},performing_arts:{name:"performing_arts",unicode:"1f3ad"},video_game:{name:"video_game",unicode:"1f3ae"},dart:{name:"dart",unicode:"1f3af"},slot_machine:{name:"slot_machine",unicode:"1f3b0"},"8ball":{name:"8ball",unicode:"1f3b1"},game_die:{name:"game_die",unicode:"1f3b2"},bowling:{name:"bowling",unicode:"1f3b3"},flower_playing_cards:{name:"flower_playing_cards",unicode:"1f3b4"},musical_note:{name:"musical_note",unicode:"1f3b5"},notes:{name:"notes",unicode:"1f3b6"},saxophone:{name:"saxophone",unicode:"1f3b7"},guitar:{name:"guitar",unicode:"1f3b8"},musical_keyboard:{name:"musical_keyboard",unicode:"1f3b9"},trumpet:{name:"trumpet",unicode:"1f3ba"},violin:{name:"violin",unicode:"1f3bb"},musical_score:{name:"musical_score",unicode:"1f3bc"},running_shirt_with_sash:{name:"running_shirt_with_sash",unicode:"1f3bd"},tennis:{name:"tennis",unicode:"1f3be"},ski:{name:"ski",unicode:"1f3bf"},basketball:{name:"basketball",unicode:"1f3c0"},checkered_flag:{name:"checkered_flag",unicode:"1f3c1"},snowboarder:{name:"snowboarder",unicode:"1f3c2",skinVariations:{2:{name:"snowboarder::skin-tone-2",unicode:"1f3c2-1f3fb"},3:{name:"snowboarder::skin-tone-3",unicode:"1f3c2-1f3fc"},4:{name:"snowboarder::skin-tone-4",unicode:"1f3c2-1f3fd"},5:{name:"snowboarder::skin-tone-5",unicode:"1f3c2-1f3fe"},6:{name:"snowboarder::skin-tone-6",unicode:"1f3c2-1f3ff"}}},"woman-running":{name:"woman-running",unicode:"1f3c3-200d-2640-fe0f",skinVariations:{2:{name:"woman-running::skin-tone-2",unicode:"1f3c3-1f3fb-200d-2640-fe0f"},3:{name:"woman-running::skin-tone-3",unicode:"1f3c3-1f3fc-200d-2640-fe0f"},4:{name:"woman-running::skin-tone-4",unicode:"1f3c3-1f3fd-200d-2640-fe0f"},5:{name:"woman-running::skin-tone-5",unicode:"1f3c3-1f3fe-200d-2640-fe0f"},6:{name:"woman-running::skin-tone-6",unicode:"1f3c3-1f3ff-200d-2640-fe0f"}}},"man-running":{name:"man-running",unicode:"1f3c3-200d-2642-fe0f",skinVariations:{2:{name:"man-running::skin-tone-2",unicode:"1f3c3-1f3fb-200d-2642-fe0f"},3:{name:"man-running::skin-tone-3",unicode:"1f3c3-1f3fc-200d-2642-fe0f"},4:{name:"man-running::skin-tone-4",unicode:"1f3c3-1f3fd-200d-2642-fe0f"},5:{name:"man-running::skin-tone-5",unicode:"1f3c3-1f3fe-200d-2642-fe0f"},6:{name:"man-running::skin-tone-6",unicode:"1f3c3-1f3ff-200d-2642-fe0f"}}},runner:{name:"runner",unicode:"1f3c3",skinVariations:{2:{name:"runner::skin-tone-2",unicode:"1f3c3-1f3fb"},3:{name:"runner::skin-tone-3",unicode:"1f3c3-1f3fc"},4:{name:"runner::skin-tone-4",unicode:"1f3c3-1f3fd"},5:{name:"runner::skin-tone-5",unicode:"1f3c3-1f3fe"},6:{name:"runner::skin-tone-6",unicode:"1f3c3-1f3ff"}}},running:{name:"running",aliasOf:"runner",unicode:"1f3c3",skinVariations:{2:{name:"running::skin-tone-2",unicode:"1f3c3-1f3fb"},3:{name:"running::skin-tone-3",unicode:"1f3c3-1f3fc"},4:{name:"running::skin-tone-4",unicode:"1f3c3-1f3fd"},5:{name:"running::skin-tone-5",unicode:"1f3c3-1f3fe"},6:{name:"running::skin-tone-6",unicode:"1f3c3-1f3ff"}}},"woman-surfing":{name:"woman-surfing",unicode:"1f3c4-200d-2640-fe0f",skinVariations:{2:{name:"woman-surfing::skin-tone-2",unicode:"1f3c4-1f3fb-200d-2640-fe0f"},3:{name:"woman-surfing::skin-tone-3",unicode:"1f3c4-1f3fc-200d-2640-fe0f"},4:{name:"woman-surfing::skin-tone-4",unicode:"1f3c4-1f3fd-200d-2640-fe0f"},5:{name:"woman-surfing::skin-tone-5",unicode:"1f3c4-1f3fe-200d-2640-fe0f"},6:{name:"woman-surfing::skin-tone-6",unicode:"1f3c4-1f3ff-200d-2640-fe0f"}}},"man-surfing":{name:"man-surfing",unicode:"1f3c4-200d-2642-fe0f",skinVariations:{2:{name:"man-surfing::skin-tone-2",unicode:"1f3c4-1f3fb-200d-2642-fe0f"},3:{name:"man-surfing::skin-tone-3",unicode:"1f3c4-1f3fc-200d-2642-fe0f"},4:{name:"man-surfing::skin-tone-4",unicode:"1f3c4-1f3fd-200d-2642-fe0f"},5:{name:"man-surfing::skin-tone-5",unicode:"1f3c4-1f3fe-200d-2642-fe0f"},6:{name:"man-surfing::skin-tone-6",unicode:"1f3c4-1f3ff-200d-2642-fe0f"}}},surfer:{name:"surfer",unicode:"1f3c4",skinVariations:{2:{name:"surfer::skin-tone-2",unicode:"1f3c4-1f3fb"},3:{name:"surfer::skin-tone-3",unicode:"1f3c4-1f3fc"},4:{name:"surfer::skin-tone-4",unicode:"1f3c4-1f3fd"},5:{name:"surfer::skin-tone-5",unicode:"1f3c4-1f3fe"},6:{name:"surfer::skin-tone-6",unicode:"1f3c4-1f3ff"}}},sports_medal:{name:"sports_medal",unicode:"1f3c5"},trophy:{name:"trophy",unicode:"1f3c6"},horse_racing:{name:"horse_racing",unicode:"1f3c7",skinVariations:{2:{name:"horse_racing::skin-tone-2",unicode:"1f3c7-1f3fb"},3:{name:"horse_racing::skin-tone-3",unicode:"1f3c7-1f3fc"},4:{name:"horse_racing::skin-tone-4",unicode:"1f3c7-1f3fd"},5:{name:"horse_racing::skin-tone-5",unicode:"1f3c7-1f3fe"},6:{name:"horse_racing::skin-tone-6",unicode:"1f3c7-1f3ff"}}},football:{name:"football",unicode:"1f3c8"},rugby_football:{name:"rugby_football",unicode:"1f3c9"},"woman-swimming":{name:"woman-swimming",unicode:"1f3ca-200d-2640-fe0f",skinVariations:{2:{name:"woman-swimming::skin-tone-2",unicode:"1f3ca-1f3fb-200d-2640-fe0f"},3:{name:"woman-swimming::skin-tone-3",unicode:"1f3ca-1f3fc-200d-2640-fe0f"},4:{name:"woman-swimming::skin-tone-4",unicode:"1f3ca-1f3fd-200d-2640-fe0f"},5:{name:"woman-swimming::skin-tone-5",unicode:"1f3ca-1f3fe-200d-2640-fe0f"},6:{name:"woman-swimming::skin-tone-6",unicode:"1f3ca-1f3ff-200d-2640-fe0f"}}},"man-swimming":{name:"man-swimming",unicode:"1f3ca-200d-2642-fe0f",skinVariations:{2:{name:"man-swimming::skin-tone-2",unicode:"1f3ca-1f3fb-200d-2642-fe0f"},3:{name:"man-swimming::skin-tone-3",unicode:"1f3ca-1f3fc-200d-2642-fe0f"},4:{name:"man-swimming::skin-tone-4",unicode:"1f3ca-1f3fd-200d-2642-fe0f"},5:{name:"man-swimming::skin-tone-5",unicode:"1f3ca-1f3fe-200d-2642-fe0f"},6:{name:"man-swimming::skin-tone-6",unicode:"1f3ca-1f3ff-200d-2642-fe0f"}}},swimmer:{name:"swimmer",unicode:"1f3ca",skinVariations:{2:{name:"swimmer::skin-tone-2",unicode:"1f3ca-1f3fb"},3:{name:"swimmer::skin-tone-3",unicode:"1f3ca-1f3fc"},4:{name:"swimmer::skin-tone-4",unicode:"1f3ca-1f3fd"},5:{name:"swimmer::skin-tone-5",unicode:"1f3ca-1f3fe"},6:{name:"swimmer::skin-tone-6",unicode:"1f3ca-1f3ff"}}},"woman-lifting-weights":{name:"woman-lifting-weights",unicode:"1f3cb-fe0f-200d-2640-fe0f",skinVariations:{2:{name:"woman-lifting-weights::skin-tone-2",unicode:"1f3cb-1f3fb-200d-2640-fe0f"},3:{name:"woman-lifting-weights::skin-tone-3",unicode:"1f3cb-1f3fc-200d-2640-fe0f"},4:{name:"woman-lifting-weights::skin-tone-4",unicode:"1f3cb-1f3fd-200d-2640-fe0f"},5:{name:"woman-lifting-weights::skin-tone-5",unicode:"1f3cb-1f3fe-200d-2640-fe0f"},6:{name:"woman-lifting-weights::skin-tone-6",unicode:"1f3cb-1f3ff-200d-2640-fe0f"}}},"man-lifting-weights":{name:"man-lifting-weights",unicode:"1f3cb-fe0f-200d-2642-fe0f",skinVariations:{2:{name:"man-lifting-weights::skin-tone-2",unicode:"1f3cb-1f3fb-200d-2642-fe0f"},3:{name:"man-lifting-weights::skin-tone-3",unicode:"1f3cb-1f3fc-200d-2642-fe0f"},4:{name:"man-lifting-weights::skin-tone-4",unicode:"1f3cb-1f3fd-200d-2642-fe0f"},5:{name:"man-lifting-weights::skin-tone-5",unicode:"1f3cb-1f3fe-200d-2642-fe0f"},6:{name:"man-lifting-weights::skin-tone-6",unicode:"1f3cb-1f3ff-200d-2642-fe0f"}}},weight_lifter:{name:"weight_lifter",unicode:"1f3cb-fe0f",skinVariations:{2:{name:"weight_lifter::skin-tone-2",unicode:"1f3cb-1f3fb"},3:{name:"weight_lifter::skin-tone-3",unicode:"1f3cb-1f3fc"},4:{name:"weight_lifter::skin-tone-4",unicode:"1f3cb-1f3fd"},5:{name:"weight_lifter::skin-tone-5",unicode:"1f3cb-1f3fe"},6:{name:"weight_lifter::skin-tone-6",unicode:"1f3cb-1f3ff"}}},"woman-golfing":{name:"woman-golfing",unicode:"1f3cc-fe0f-200d-2640-fe0f",skinVariations:{2:{name:"woman-golfing::skin-tone-2",unicode:"1f3cc-1f3fb-200d-2640-fe0f"},3:{name:"woman-golfing::skin-tone-3",unicode:"1f3cc-1f3fc-200d-2640-fe0f"},4:{name:"woman-golfing::skin-tone-4",unicode:"1f3cc-1f3fd-200d-2640-fe0f"},5:{name:"woman-golfing::skin-tone-5",unicode:"1f3cc-1f3fe-200d-2640-fe0f"},6:{name:"woman-golfing::skin-tone-6",unicode:"1f3cc-1f3ff-200d-2640-fe0f"}}},"man-golfing":{name:"man-golfing",unicode:"1f3cc-fe0f-200d-2642-fe0f",skinVariations:{2:{name:"man-golfing::skin-tone-2",unicode:"1f3cc-1f3fb-200d-2642-fe0f"},3:{name:"man-golfing::skin-tone-3",unicode:"1f3cc-1f3fc-200d-2642-fe0f"},4:{name:"man-golfing::skin-tone-4",unicode:"1f3cc-1f3fd-200d-2642-fe0f"},5:{name:"man-golfing::skin-tone-5",unicode:"1f3cc-1f3fe-200d-2642-fe0f"},6:{name:"man-golfing::skin-tone-6",unicode:"1f3cc-1f3ff-200d-2642-fe0f"}}},golfer:{name:"golfer",unicode:"1f3cc-fe0f",skinVariations:{2:{name:"golfer::skin-tone-2",unicode:"1f3cc-1f3fb"},3:{name:"golfer::skin-tone-3",unicode:"1f3cc-1f3fc"},4:{name:"golfer::skin-tone-4",unicode:"1f3cc-1f3fd"},5:{name:"golfer::skin-tone-5",unicode:"1f3cc-1f3fe"},6:{name:"golfer::skin-tone-6",unicode:"1f3cc-1f3ff"}}},racing_motorcycle:{name:"racing_motorcycle",unicode:"1f3cd-fe0f"},racing_car:{name:"racing_car",unicode:"1f3ce-fe0f"},cricket_bat_and_ball:{name:"cricket_bat_and_ball",unicode:"1f3cf"},volleyball:{name:"volleyball",unicode:"1f3d0"},field_hockey_stick_and_ball:{name:"field_hockey_stick_and_ball",unicode:"1f3d1"},ice_hockey_stick_and_puck:{name:"ice_hockey_stick_and_puck",unicode:"1f3d2"},table_tennis_paddle_and_ball:{name:"table_tennis_paddle_and_ball",unicode:"1f3d3"},snow_capped_mountain:{name:"snow_capped_mountain",unicode:"1f3d4-fe0f"},camping:{name:"camping",unicode:"1f3d5-fe0f"},beach_with_umbrella:{name:"beach_with_umbrella",unicode:"1f3d6-fe0f"},building_construction:{name:"building_construction",unicode:"1f3d7-fe0f"},house_buildings:{name:"house_buildings",unicode:"1f3d8-fe0f"},cityscape:{name:"cityscape",unicode:"1f3d9-fe0f"},derelict_house_building:{name:"derelict_house_building",unicode:"1f3da-fe0f"},classical_building:{name:"classical_building",unicode:"1f3db-fe0f"},desert:{name:"desert",unicode:"1f3dc-fe0f"},desert_island:{name:"desert_island",unicode:"1f3dd-fe0f"},national_park:{name:"national_park",unicode:"1f3de-fe0f"},stadium:{name:"stadium",unicode:"1f3df-fe0f"},house:{name:"house",unicode:"1f3e0"},house_with_garden:{name:"house_with_garden",unicode:"1f3e1"},office:{name:"office",unicode:"1f3e2"},post_office:{name:"post_office",unicode:"1f3e3"},european_post_office:{name:"european_post_office",unicode:"1f3e4"},hospital:{name:"hospital",unicode:"1f3e5"},bank:{name:"bank",unicode:"1f3e6"},atm:{name:"atm",unicode:"1f3e7"},hotel:{name:"hotel",unicode:"1f3e8"},love_hotel:{name:"love_hotel",unicode:"1f3e9"},convenience_store:{name:"convenience_store",unicode:"1f3ea"},school:{name:"school",unicode:"1f3eb"},department_store:{name:"department_store",unicode:"1f3ec"},factory:{name:"factory",unicode:"1f3ed"},izakaya_lantern:{name:"izakaya_lantern",unicode:"1f3ee"},lantern:{name:"lantern",aliasOf:"izakaya_lantern",unicode:"1f3ee"},japanese_castle:{name:"japanese_castle",unicode:"1f3ef"},european_castle:{name:"european_castle",unicode:"1f3f0"},"rainbow-flag":{name:"rainbow-flag",unicode:"1f3f3-fe0f-200d-1f308"},waving_white_flag:{name:"waving_white_flag",unicode:"1f3f3-fe0f"},"flag-england":{name:"flag-england",unicode:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f"},"flag-scotland":{name:"flag-scotland",unicode:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f"},"flag-wales":{name:"flag-wales",unicode:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f"},waving_black_flag:{name:"waving_black_flag",unicode:"1f3f4"},rosette:{name:"rosette",unicode:"1f3f5-fe0f"},label:{name:"label",unicode:"1f3f7-fe0f"},badminton_racquet_and_shuttlecock:{name:"badminton_racquet_and_shuttlecock",unicode:"1f3f8"},bow_and_arrow:{name:"bow_and_arrow",unicode:"1f3f9"},amphora:{name:"amphora",unicode:"1f3fa"},"skin-tone-2":{name:"skin-tone-2",unicode:"1f3fb"},"skin-tone-3":{name:"skin-tone-3",unicode:"1f3fc"},"skin-tone-4":{name:"skin-tone-4",unicode:"1f3fd"},"skin-tone-5":{name:"skin-tone-5",unicode:"1f3fe"},"skin-tone-6":{name:"skin-tone-6",unicode:"1f3ff"},rat:{name:"rat",unicode:"1f400"},mouse2:{name:"mouse2",unicode:"1f401"},ox:{name:"ox",unicode:"1f402"},water_buffalo:{name:"water_buffalo",unicode:"1f403"},cow2:{name:"cow2",unicode:"1f404"},tiger2:{name:"tiger2",unicode:"1f405"},leopard:{name:"leopard",unicode:"1f406"},rabbit2:{name:"rabbit2",unicode:"1f407"},cat2:{name:"cat2",unicode:"1f408"},dragon:{name:"dragon",unicode:"1f409"},crocodile:{name:"crocodile",unicode:"1f40a"},whale2:{name:"whale2",unicode:"1f40b"},snail:{name:"snail",unicode:"1f40c"},snake:{name:"snake",unicode:"1f40d"},racehorse:{name:"racehorse",unicode:"1f40e"},ram:{name:"ram",unicode:"1f40f"},goat:{name:"goat",unicode:"1f410"},sheep:{name:"sheep",unicode:"1f411"},monkey:{name:"monkey",unicode:"1f412"},rooster:{name:"rooster",unicode:"1f413"},chicken:{name:"chicken",unicode:"1f414"},dog2:{name:"dog2",unicode:"1f415"},pig2:{name:"pig2",unicode:"1f416"},boar:{name:"boar",unicode:"1f417"},elephant:{name:"elephant",unicode:"1f418"},octopus:{name:"octopus",unicode:"1f419"},shell:{name:"shell",unicode:"1f41a"},bug:{name:"bug",unicode:"1f41b"},ant:{name:"ant",unicode:"1f41c"},bee:{name:"bee",unicode:"1f41d"},honeybee:{name:"honeybee",aliasOf:"bee",unicode:"1f41d"},beetle:{name:"beetle",unicode:"1f41e"},fish:{name:"fish",unicode:"1f41f"},tropical_fish:{name:"tropical_fish",unicode:"1f420"},blowfish:{name:"blowfish",unicode:"1f421"},turtle:{name:"turtle",unicode:"1f422"},hatching_chick:{name:"hatching_chick",unicode:"1f423"},baby_chick:{name:"baby_chick",unicode:"1f424"},hatched_chick:{name:"hatched_chick",unicode:"1f425"},bird:{name:"bird",unicode:"1f426"},penguin:{name:"penguin",unicode:"1f427"},koala:{name:"koala",unicode:"1f428"},poodle:{name:"poodle",unicode:"1f429"},dromedary_camel:{name:"dromedary_camel",unicode:"1f42a"},camel:{name:"camel",unicode:"1f42b"},dolphin:{name:"dolphin",unicode:"1f42c"},flipper:{name:"flipper",aliasOf:"dolphin",unicode:"1f42c"},mouse:{name:"mouse",unicode:"1f42d"},cow:{name:"cow",unicode:"1f42e"},tiger:{name:"tiger",unicode:"1f42f"},rabbit:{name:"rabbit",unicode:"1f430"},cat:{name:"cat",unicode:"1f431"},dragon_face:{name:"dragon_face",unicode:"1f432"},whale:{name:"whale",unicode:"1f433"},horse:{name:"horse",unicode:"1f434"},monkey_face:{name:"monkey_face",unicode:"1f435"},dog:{name:"dog",unicode:"1f436"},pig:{name:"pig",unicode:"1f437"},frog:{name:"frog",unicode:"1f438"},hamster:{name:"hamster",unicode:"1f439"},wolf:{name:"wolf",unicode:"1f43a"},bear:{name:"bear",unicode:"1f43b"},panda_face:{name:"panda_face",unicode:"1f43c"},pig_nose:{name:"pig_nose",unicode:"1f43d"},feet:{name:"feet",unicode:"1f43e"},paw_prints:{name:"paw_prints",aliasOf:"feet",unicode:"1f43e"},chipmunk:{name:"chipmunk",unicode:"1f43f-fe0f"},eyes:{name:"eyes",unicode:"1f440"},"eye-in-speech-bubble":{name:"eye-in-speech-bubble",unicode:"1f441-fe0f-200d-1f5e8-fe0f"},eye:{name:"eye",unicode:"1f441-fe0f"},ear:{name:"ear",unicode:"1f442",skinVariations:{2:{name:"ear::skin-tone-2",unicode:"1f442-1f3fb"},3:{name:"ear::skin-tone-3",unicode:"1f442-1f3fc"},4:{name:"ear::skin-tone-4",unicode:"1f442-1f3fd"},5:{name:"ear::skin-tone-5",unicode:"1f442-1f3fe"},6:{name:"ear::skin-tone-6",unicode:"1f442-1f3ff"}}},nose:{name:"nose",unicode:"1f443",skinVariations:{2:{name:"nose::skin-tone-2",unicode:"1f443-1f3fb"},3:{name:"nose::skin-tone-3",unicode:"1f443-1f3fc"},4:{name:"nose::skin-tone-4",unicode:"1f443-1f3fd"},5:{name:"nose::skin-tone-5",unicode:"1f443-1f3fe"},6:{name:"nose::skin-tone-6",unicode:"1f443-1f3ff"}}},lips:{name:"lips",unicode:"1f444"},tongue:{name:"tongue",unicode:"1f445"},point_up_2:{name:"point_up_2",unicode:"1f446",skinVariations:{2:{name:"point_up_2::skin-tone-2",unicode:"1f446-1f3fb"},3:{name:"point_up_2::skin-tone-3",unicode:"1f446-1f3fc"},4:{name:"point_up_2::skin-tone-4",unicode:"1f446-1f3fd"},5:{name:"point_up_2::skin-tone-5",unicode:"1f446-1f3fe"},6:{name:"point_up_2::skin-tone-6",unicode:"1f446-1f3ff"}}},point_down:{name:"point_down",unicode:"1f447",skinVariations:{2:{name:"point_down::skin-tone-2",unicode:"1f447-1f3fb"},3:{name:"point_down::skin-tone-3",unicode:"1f447-1f3fc"},4:{name:"point_down::skin-tone-4",unicode:"1f447-1f3fd"},5:{name:"point_down::skin-tone-5",unicode:"1f447-1f3fe"},6:{name:"point_down::skin-tone-6",unicode:"1f447-1f3ff"}}},point_left:{name:"point_left",unicode:"1f448",skinVariations:{2:{name:"point_left::skin-tone-2",unicode:"1f448-1f3fb"},3:{name:"point_left::skin-tone-3",unicode:"1f448-1f3fc"},4:{name:"point_left::skin-tone-4",unicode:"1f448-1f3fd"},5:{name:"point_left::skin-tone-5",unicode:"1f448-1f3fe"},6:{name:"point_left::skin-tone-6",unicode:"1f448-1f3ff"}}},point_right:{name:"point_right",unicode:"1f449",skinVariations:{2:{name:"point_right::skin-tone-2",unicode:"1f449-1f3fb"},3:{name:"point_right::skin-tone-3",unicode:"1f449-1f3fc"},4:{name:"point_right::skin-tone-4",unicode:"1f449-1f3fd"},5:{name:"point_right::skin-tone-5",unicode:"1f449-1f3fe"},6:{name:"point_right::skin-tone-6",unicode:"1f449-1f3ff"}}},facepunch:{name:"facepunch",unicode:"1f44a",skinVariations:{2:{name:"facepunch::skin-tone-2",unicode:"1f44a-1f3fb"},3:{name:"facepunch::skin-tone-3",unicode:"1f44a-1f3fc"},4:{name:"facepunch::skin-tone-4",unicode:"1f44a-1f3fd"},5:{name:"facepunch::skin-tone-5",unicode:"1f44a-1f3fe"},6:{name:"facepunch::skin-tone-6",unicode:"1f44a-1f3ff"}}},punch:{name:"punch",aliasOf:"facepunch",unicode:"1f44a",skinVariations:{2:{name:"punch::skin-tone-2",unicode:"1f44a-1f3fb"},3:{name:"punch::skin-tone-3",unicode:"1f44a-1f3fc"},4:{name:"punch::skin-tone-4",unicode:"1f44a-1f3fd"},5:{name:"punch::skin-tone-5",unicode:"1f44a-1f3fe"},6:{name:"punch::skin-tone-6",unicode:"1f44a-1f3ff"}}},wave:{name:"wave",unicode:"1f44b",skinVariations:{2:{name:"wave::skin-tone-2",unicode:"1f44b-1f3fb"},3:{name:"wave::skin-tone-3",unicode:"1f44b-1f3fc"},4:{name:"wave::skin-tone-4",unicode:"1f44b-1f3fd"},5:{name:"wave::skin-tone-5",unicode:"1f44b-1f3fe"},6:{name:"wave::skin-tone-6",unicode:"1f44b-1f3ff"}}},ok_hand:{name:"ok_hand",unicode:"1f44c",skinVariations:{2:{name:"ok_hand::skin-tone-2",unicode:"1f44c-1f3fb"},3:{name:"ok_hand::skin-tone-3",unicode:"1f44c-1f3fc"},4:{name:"ok_hand::skin-tone-4",unicode:"1f44c-1f3fd"},5:{name:"ok_hand::skin-tone-5",unicode:"1f44c-1f3fe"},6:{name:"ok_hand::skin-tone-6",unicode:"1f44c-1f3ff"}}},"+1":{name:"+1",unicode:"1f44d",skinVariations:{2:{name:"+1::skin-tone-2",unicode:"1f44d-1f3fb"},3:{name:"+1::skin-tone-3",unicode:"1f44d-1f3fc"},4:{name:"+1::skin-tone-4",unicode:"1f44d-1f3fd"},5:{name:"+1::skin-tone-5",unicode:"1f44d-1f3fe"},6:{name:"+1::skin-tone-6",unicode:"1f44d-1f3ff"}}},thumbsup:{name:"thumbsup",aliasOf:"+1",unicode:"1f44d",skinVariations:{2:{name:"thumbsup::skin-tone-2",unicode:"1f44d-1f3fb"},3:{name:"thumbsup::skin-tone-3",unicode:"1f44d-1f3fc"},4:{name:"thumbsup::skin-tone-4",unicode:"1f44d-1f3fd"},5:{name:"thumbsup::skin-tone-5",unicode:"1f44d-1f3fe"},6:{name:"thumbsup::skin-tone-6",unicode:"1f44d-1f3ff"}}},"-1":{name:"-1",unicode:"1f44e",skinVariations:{2:{name:"-1::skin-tone-2",unicode:"1f44e-1f3fb"},3:{name:"-1::skin-tone-3",unicode:"1f44e-1f3fc"},4:{name:"-1::skin-tone-4",unicode:"1f44e-1f3fd"},5:{name:"-1::skin-tone-5",unicode:"1f44e-1f3fe"},6:{name:"-1::skin-tone-6",unicode:"1f44e-1f3ff"}}},thumbsdown:{name:"thumbsdown",aliasOf:"-1",unicode:"1f44e",skinVariations:{2:{name:"thumbsdown::skin-tone-2",unicode:"1f44e-1f3fb"},3:{name:"thumbsdown::skin-tone-3",unicode:"1f44e-1f3fc"},4:{name:"thumbsdown::skin-tone-4",unicode:"1f44e-1f3fd"},5:{name:"thumbsdown::skin-tone-5",unicode:"1f44e-1f3fe"},6:{name:"thumbsdown::skin-tone-6",unicode:"1f44e-1f3ff"}}},clap:{name:"clap",unicode:"1f44f",skinVariations:{2:{name:"clap::skin-tone-2",unicode:"1f44f-1f3fb"},3:{name:"clap::skin-tone-3",unicode:"1f44f-1f3fc"},4:{name:"clap::skin-tone-4",unicode:"1f44f-1f3fd"},5:{name:"clap::skin-tone-5",unicode:"1f44f-1f3fe"},6:{name:"clap::skin-tone-6",unicode:"1f44f-1f3ff"}}},open_hands:{name:"open_hands",unicode:"1f450",skinVariations:{2:{name:"open_hands::skin-tone-2",unicode:"1f450-1f3fb"},3:{name:"open_hands::skin-tone-3",unicode:"1f450-1f3fc"},4:{name:"open_hands::skin-tone-4",unicode:"1f450-1f3fd"},5:{name:"open_hands::skin-tone-5",unicode:"1f450-1f3fe"},6:{name:"open_hands::skin-tone-6",unicode:"1f450-1f3ff"}}},crown:{name:"crown",unicode:"1f451"},womans_hat:{name:"womans_hat",unicode:"1f452"},eyeglasses:{name:"eyeglasses",unicode:"1f453"},necktie:{name:"necktie",unicode:"1f454"},shirt:{name:"shirt",unicode:"1f455"},tshirt:{name:"tshirt",aliasOf:"shirt",unicode:"1f455"},jeans:{name:"jeans",unicode:"1f456"},dress:{name:"dress",unicode:"1f457"},kimono:{name:"kimono",unicode:"1f458"},bikini:{name:"bikini",unicode:"1f459"},womans_clothes:{name:"womans_clothes",unicode:"1f45a"},purse:{name:"purse",unicode:"1f45b"},handbag:{name:"handbag",unicode:"1f45c"},pouch:{name:"pouch",unicode:"1f45d"},mans_shoe:{name:"mans_shoe",unicode:"1f45e"},shoe:{name:"shoe",aliasOf:"mans_shoe",unicode:"1f45e"},athletic_shoe:{name:"athletic_shoe",unicode:"1f45f"},high_heel:{name:"high_heel",unicode:"1f460"},sandal:{name:"sandal",unicode:"1f461"},boot:{name:"boot",unicode:"1f462"},footprints:{name:"footprints",unicode:"1f463"},bust_in_silhouette:{name:"bust_in_silhouette",unicode:"1f464"},busts_in_silhouette:{name:"busts_in_silhouette",unicode:"1f465"},boy:{name:"boy",unicode:"1f466",skinVariations:{2:{name:"boy::skin-tone-2",unicode:"1f466-1f3fb"},3:{name:"boy::skin-tone-3",unicode:"1f466-1f3fc"},4:{name:"boy::skin-tone-4",unicode:"1f466-1f3fd"},5:{name:"boy::skin-tone-5",unicode:"1f466-1f3fe"},6:{name:"boy::skin-tone-6",unicode:"1f466-1f3ff"}}},girl:{name:"girl",unicode:"1f467",skinVariations:{2:{name:"girl::skin-tone-2",unicode:"1f467-1f3fb"},3:{name:"girl::skin-tone-3",unicode:"1f467-1f3fc"},4:{name:"girl::skin-tone-4",unicode:"1f467-1f3fd"},5:{name:"girl::skin-tone-5",unicode:"1f467-1f3fe"},6:{name:"girl::skin-tone-6",unicode:"1f467-1f3ff"}}},"male-farmer":{name:"male-farmer",unicode:"1f468-200d-1f33e",skinVariations:{2:{name:"male-farmer::skin-tone-2",unicode:"1f468-1f3fb-200d-1f33e"},3:{name:"male-farmer::skin-tone-3",unicode:"1f468-1f3fc-200d-1f33e"},4:{name:"male-farmer::skin-tone-4",unicode:"1f468-1f3fd-200d-1f33e"},5:{name:"male-farmer::skin-tone-5",unicode:"1f468-1f3fe-200d-1f33e"},6:{name:"male-farmer::skin-tone-6",unicode:"1f468-1f3ff-200d-1f33e"}}},"male-cook":{name:"male-cook",unicode:"1f468-200d-1f373",skinVariations:{2:{name:"male-cook::skin-tone-2",unicode:"1f468-1f3fb-200d-1f373"},3:{name:"male-cook::skin-tone-3",unicode:"1f468-1f3fc-200d-1f373"},4:{name:"male-cook::skin-tone-4",unicode:"1f468-1f3fd-200d-1f373"},5:{name:"male-cook::skin-tone-5",unicode:"1f468-1f3fe-200d-1f373"},6:{name:"male-cook::skin-tone-6",unicode:"1f468-1f3ff-200d-1f373"}}},"male-student":{name:"male-student",unicode:"1f468-200d-1f393",skinVariations:{2:{name:"male-student::skin-tone-2",unicode:"1f468-1f3fb-200d-1f393"},3:{name:"male-student::skin-tone-3",unicode:"1f468-1f3fc-200d-1f393"},4:{name:"male-student::skin-tone-4",unicode:"1f468-1f3fd-200d-1f393"},5:{name:"male-student::skin-tone-5",unicode:"1f468-1f3fe-200d-1f393"},6:{name:"male-student::skin-tone-6",unicode:"1f468-1f3ff-200d-1f393"}}},"male-singer":{name:"male-singer",unicode:"1f468-200d-1f3a4",skinVariations:{2:{name:"male-singer::skin-tone-2",unicode:"1f468-1f3fb-200d-1f3a4"},3:{name:"male-singer::skin-tone-3",unicode:"1f468-1f3fc-200d-1f3a4"},4:{name:"male-singer::skin-tone-4",unicode:"1f468-1f3fd-200d-1f3a4"},5:{name:"male-singer::skin-tone-5",unicode:"1f468-1f3fe-200d-1f3a4"},6:{name:"male-singer::skin-tone-6",unicode:"1f468-1f3ff-200d-1f3a4"}}},"male-artist":{name:"male-artist",unicode:"1f468-200d-1f3a8",skinVariations:{2:{name:"male-artist::skin-tone-2",unicode:"1f468-1f3fb-200d-1f3a8"},3:{name:"male-artist::skin-tone-3",unicode:"1f468-1f3fc-200d-1f3a8"},4:{name:"male-artist::skin-tone-4",unicode:"1f468-1f3fd-200d-1f3a8"},5:{name:"male-artist::skin-tone-5",unicode:"1f468-1f3fe-200d-1f3a8"},6:{name:"male-artist::skin-tone-6",unicode:"1f468-1f3ff-200d-1f3a8"}}},"male-teacher":{name:"male-teacher",unicode:"1f468-200d-1f3eb",skinVariations:{2:{name:"male-teacher::skin-tone-2",unicode:"1f468-1f3fb-200d-1f3eb"},3:{name:"male-teacher::skin-tone-3",unicode:"1f468-1f3fc-200d-1f3eb"},4:{name:"male-teacher::skin-tone-4",unicode:"1f468-1f3fd-200d-1f3eb"},5:{name:"male-teacher::skin-tone-5",unicode:"1f468-1f3fe-200d-1f3eb"},6:{name:"male-teacher::skin-tone-6",unicode:"1f468-1f3ff-200d-1f3eb"}}},"male-factory-worker":{name:"male-factory-worker",unicode:"1f468-200d-1f3ed",skinVariations:{2:{name:"male-factory-worker::skin-tone-2",unicode:"1f468-1f3fb-200d-1f3ed"},3:{name:"male-factory-worker::skin-tone-3",unicode:"1f468-1f3fc-200d-1f3ed"},4:{name:"male-factory-worker::skin-tone-4",unicode:"1f468-1f3fd-200d-1f3ed"},5:{name:"male-factory-worker::skin-tone-5",unicode:"1f468-1f3fe-200d-1f3ed"},6:{name:"male-factory-worker::skin-tone-6",unicode:"1f468-1f3ff-200d-1f3ed"}}},"man-boy-boy":{name:"man-boy-boy",unicode:"1f468-200d-1f466-200d-1f466"},"man-boy":{name:"man-boy",unicode:"1f468-200d-1f466"},"man-girl-boy":{name:"man-girl-boy",unicode:"1f468-200d-1f467-200d-1f466"},"man-girl-girl":{name:"man-girl-girl",unicode:"1f468-200d-1f467-200d-1f467"},"man-girl":{name:"man-girl",unicode:"1f468-200d-1f467"},"man-man-boy":{name:"man-man-boy",unicode:"1f468-200d-1f468-200d-1f466"},"man-man-boy-boy":{name:"man-man-boy-boy",unicode:"1f468-200d-1f468-200d-1f466-200d-1f466"},"man-man-girl":{name:"man-man-girl",unicode:"1f468-200d-1f468-200d-1f467"},"man-man-girl-boy":{name:"man-man-girl-boy",unicode:"1f468-200d-1f468-200d-1f467-200d-1f466"},"man-man-girl-girl":{name:"man-man-girl-girl",unicode:"1f468-200d-1f468-200d-1f467-200d-1f467"},"man-woman-boy":{name:"man-woman-boy",aliasOf:"family",unicode:"1f46a"},family:{name:"family",unicode:"1f46a"},"man-woman-boy-boy":{name:"man-woman-boy-boy",unicode:"1f468-200d-1f469-200d-1f466-200d-1f466"},"man-woman-girl":{name:"man-woman-girl",unicode:"1f468-200d-1f469-200d-1f467"},"man-woman-girl-boy":{name:"man-woman-girl-boy",unicode:"1f468-200d-1f469-200d-1f467-200d-1f466"},"man-woman-girl-girl":{name:"man-woman-girl-girl",unicode:"1f468-200d-1f469-200d-1f467-200d-1f467"},"male-technologist":{name:"male-technologist",unicode:"1f468-200d-1f4bb",skinVariations:{2:{name:"male-technologist::skin-tone-2",unicode:"1f468-1f3fb-200d-1f4bb"},3:{name:"male-technologist::skin-tone-3",unicode:"1f468-1f3fc-200d-1f4bb"},4:{name:"male-technologist::skin-tone-4",unicode:"1f468-1f3fd-200d-1f4bb"},5:{name:"male-technologist::skin-tone-5",unicode:"1f468-1f3fe-200d-1f4bb"},6:{name:"male-technologist::skin-tone-6",unicode:"1f468-1f3ff-200d-1f4bb"}}},"male-office-worker":{name:"male-office-worker",unicode:"1f468-200d-1f4bc",skinVariations:{2:{name:"male-office-worker::skin-tone-2",unicode:"1f468-1f3fb-200d-1f4bc"},3:{name:"male-office-worker::skin-tone-3",unicode:"1f468-1f3fc-200d-1f4bc"},4:{name:"male-office-worker::skin-tone-4",unicode:"1f468-1f3fd-200d-1f4bc"},5:{name:"male-office-worker::skin-tone-5",unicode:"1f468-1f3fe-200d-1f4bc"},6:{name:"male-office-worker::skin-tone-6",unicode:"1f468-1f3ff-200d-1f4bc"}}},"male-mechanic":{name:"male-mechanic",unicode:"1f468-200d-1f527",skinVariations:{2:{name:"male-mechanic::skin-tone-2",unicode:"1f468-1f3fb-200d-1f527"},3:{name:"male-mechanic::skin-tone-3",unicode:"1f468-1f3fc-200d-1f527"},4:{name:"male-mechanic::skin-tone-4",unicode:"1f468-1f3fd-200d-1f527"},5:{name:"male-mechanic::skin-tone-5",unicode:"1f468-1f3fe-200d-1f527"},6:{name:"male-mechanic::skin-tone-6",unicode:"1f468-1f3ff-200d-1f527"}}},"male-scientist":{name:"male-scientist",unicode:"1f468-200d-1f52c",skinVariations:{2:{name:"male-scientist::skin-tone-2",unicode:"1f468-1f3fb-200d-1f52c"},3:{name:"male-scientist::skin-tone-3",unicode:"1f468-1f3fc-200d-1f52c"},4:{name:"male-scientist::skin-tone-4",unicode:"1f468-1f3fd-200d-1f52c"},5:{name:"male-scientist::skin-tone-5",unicode:"1f468-1f3fe-200d-1f52c"},6:{name:"male-scientist::skin-tone-6",unicode:"1f468-1f3ff-200d-1f52c"}}},"male-astronaut":{name:"male-astronaut",unicode:"1f468-200d-1f680",skinVariations:{2:{name:"male-astronaut::skin-tone-2",unicode:"1f468-1f3fb-200d-1f680"},3:{name:"male-astronaut::skin-tone-3",unicode:"1f468-1f3fc-200d-1f680"},4:{name:"male-astronaut::skin-tone-4",unicode:"1f468-1f3fd-200d-1f680"},5:{name:"male-astronaut::skin-tone-5",unicode:"1f468-1f3fe-200d-1f680"},6:{name:"male-astronaut::skin-tone-6",unicode:"1f468-1f3ff-200d-1f680"}}},"male-firefighter":{name:"male-firefighter",unicode:"1f468-200d-1f692",skinVariations:{2:{name:"male-firefighter::skin-tone-2",unicode:"1f468-1f3fb-200d-1f692"},3:{name:"male-firefighter::skin-tone-3",unicode:"1f468-1f3fc-200d-1f692"},4:{name:"male-firefighter::skin-tone-4",unicode:"1f468-1f3fd-200d-1f692"},5:{name:"male-firefighter::skin-tone-5",unicode:"1f468-1f3fe-200d-1f692"},6:{name:"male-firefighter::skin-tone-6",unicode:"1f468-1f3ff-200d-1f692"}}},"male-doctor":{name:"male-doctor",unicode:"1f468-200d-2695-fe0f",skinVariations:{2:{name:"male-doctor::skin-tone-2",unicode:"1f468-1f3fb-200d-2695-fe0f"},3:{name:"male-doctor::skin-tone-3",unicode:"1f468-1f3fc-200d-2695-fe0f"},4:{name:"male-doctor::skin-tone-4",unicode:"1f468-1f3fd-200d-2695-fe0f"},5:{name:"male-doctor::skin-tone-5",unicode:"1f468-1f3fe-200d-2695-fe0f"},6:{name:"male-doctor::skin-tone-6",unicode:"1f468-1f3ff-200d-2695-fe0f"}}},"male-judge":{name:"male-judge",unicode:"1f468-200d-2696-fe0f",skinVariations:{2:{name:"male-judge::skin-tone-2",unicode:"1f468-1f3fb-200d-2696-fe0f"},3:{name:"male-judge::skin-tone-3",unicode:"1f468-1f3fc-200d-2696-fe0f"},4:{name:"male-judge::skin-tone-4",unicode:"1f468-1f3fd-200d-2696-fe0f"},5:{name:"male-judge::skin-tone-5",unicode:"1f468-1f3fe-200d-2696-fe0f"},6:{name:"male-judge::skin-tone-6",unicode:"1f468-1f3ff-200d-2696-fe0f"}}},"male-pilot":{name:"male-pilot",unicode:"1f468-200d-2708-fe0f",skinVariations:{2:{name:"male-pilot::skin-tone-2",unicode:"1f468-1f3fb-200d-2708-fe0f"},3:{name:"male-pilot::skin-tone-3",unicode:"1f468-1f3fc-200d-2708-fe0f"},4:{name:"male-pilot::skin-tone-4",unicode:"1f468-1f3fd-200d-2708-fe0f"},5:{name:"male-pilot::skin-tone-5",unicode:"1f468-1f3fe-200d-2708-fe0f"},6:{name:"male-pilot::skin-tone-6",unicode:"1f468-1f3ff-200d-2708-fe0f"}}},"man-heart-man":{name:"man-heart-man",unicode:"1f468-200d-2764-fe0f-200d-1f468"},"man-kiss-man":{name:"man-kiss-man",unicode:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468"},man:{name:"man",unicode:"1f468",skinVariations:{2:{name:"man::skin-tone-2",unicode:"1f468-1f3fb"},3:{name:"man::skin-tone-3",unicode:"1f468-1f3fc"},4:{name:"man::skin-tone-4",unicode:"1f468-1f3fd"},5:{name:"man::skin-tone-5",unicode:"1f468-1f3fe"},6:{name:"man::skin-tone-6",unicode:"1f468-1f3ff"}}},"female-farmer":{name:"female-farmer",unicode:"1f469-200d-1f33e",skinVariations:{2:{name:"female-farmer::skin-tone-2",unicode:"1f469-1f3fb-200d-1f33e"},3:{name:"female-farmer::skin-tone-3",unicode:"1f469-1f3fc-200d-1f33e"},4:{name:"female-farmer::skin-tone-4",unicode:"1f469-1f3fd-200d-1f33e"},5:{name:"female-farmer::skin-tone-5",unicode:"1f469-1f3fe-200d-1f33e"},6:{name:"female-farmer::skin-tone-6",unicode:"1f469-1f3ff-200d-1f33e"}}},"female-cook":{name:"female-cook",unicode:"1f469-200d-1f373",skinVariations:{2:{name:"female-cook::skin-tone-2",unicode:"1f469-1f3fb-200d-1f373"},3:{name:"female-cook::skin-tone-3",unicode:"1f469-1f3fc-200d-1f373"},4:{name:"female-cook::skin-tone-4",unicode:"1f469-1f3fd-200d-1f373"},5:{name:"female-cook::skin-tone-5",unicode:"1f469-1f3fe-200d-1f373"},6:{name:"female-cook::skin-tone-6",unicode:"1f469-1f3ff-200d-1f373"}}},"female-student":{name:"female-student",unicode:"1f469-200d-1f393",skinVariations:{2:{name:"female-student::skin-tone-2",unicode:"1f469-1f3fb-200d-1f393"},3:{name:"female-student::skin-tone-3",unicode:"1f469-1f3fc-200d-1f393"},4:{name:"female-student::skin-tone-4",unicode:"1f469-1f3fd-200d-1f393"},5:{name:"female-student::skin-tone-5",unicode:"1f469-1f3fe-200d-1f393"},6:{name:"female-student::skin-tone-6",unicode:"1f469-1f3ff-200d-1f393"}}},"female-singer":{name:"female-singer",unicode:"1f469-200d-1f3a4",skinVariations:{2:{name:"female-singer::skin-tone-2",unicode:"1f469-1f3fb-200d-1f3a4"},3:{name:"female-singer::skin-tone-3",unicode:"1f469-1f3fc-200d-1f3a4"},4:{name:"female-singer::skin-tone-4",unicode:"1f469-1f3fd-200d-1f3a4"},5:{name:"female-singer::skin-tone-5",unicode:"1f469-1f3fe-200d-1f3a4"},6:{name:"female-singer::skin-tone-6",unicode:"1f469-1f3ff-200d-1f3a4"}}},"female-artist":{name:"female-artist",unicode:"1f469-200d-1f3a8",skinVariations:{2:{name:"female-artist::skin-tone-2",unicode:"1f469-1f3fb-200d-1f3a8"},3:{name:"female-artist::skin-tone-3",unicode:"1f469-1f3fc-200d-1f3a8"},4:{name:"female-artist::skin-tone-4",unicode:"1f469-1f3fd-200d-1f3a8"},5:{name:"female-artist::skin-tone-5",unicode:"1f469-1f3fe-200d-1f3a8"},6:{name:"female-artist::skin-tone-6",unicode:"1f469-1f3ff-200d-1f3a8"}}},"female-teacher":{name:"female-teacher",unicode:"1f469-200d-1f3eb",skinVariations:{2:{name:"female-teacher::skin-tone-2",unicode:"1f469-1f3fb-200d-1f3eb"},3:{name:"female-teacher::skin-tone-3",unicode:"1f469-1f3fc-200d-1f3eb"},4:{name:"female-teacher::skin-tone-4",unicode:"1f469-1f3fd-200d-1f3eb"},5:{name:"female-teacher::skin-tone-5",unicode:"1f469-1f3fe-200d-1f3eb"},6:{name:"female-teacher::skin-tone-6",unicode:"1f469-1f3ff-200d-1f3eb"}}},"female-factory-worker":{name:"female-factory-worker",unicode:"1f469-200d-1f3ed",skinVariations:{2:{name:"female-factory-worker::skin-tone-2",unicode:"1f469-1f3fb-200d-1f3ed"},3:{name:"female-factory-worker::skin-tone-3",unicode:"1f469-1f3fc-200d-1f3ed"},4:{name:"female-factory-worker::skin-tone-4",unicode:"1f469-1f3fd-200d-1f3ed"},5:{name:"female-factory-worker::skin-tone-5",unicode:"1f469-1f3fe-200d-1f3ed"},6:{name:"female-factory-worker::skin-tone-6",unicode:"1f469-1f3ff-200d-1f3ed"}}},"woman-boy-boy":{name:"woman-boy-boy",unicode:"1f469-200d-1f466-200d-1f466"},"woman-boy":{name:"woman-boy",unicode:"1f469-200d-1f466"},"woman-girl-boy":{name:"woman-girl-boy",unicode:"1f469-200d-1f467-200d-1f466"},"woman-girl-girl":{name:"woman-girl-girl",unicode:"1f469-200d-1f467-200d-1f467"},"woman-girl":{name:"woman-girl",unicode:"1f469-200d-1f467"},"woman-woman-boy":{name:"woman-woman-boy",unicode:"1f469-200d-1f469-200d-1f466"},"woman-woman-boy-boy":{name:"woman-woman-boy-boy",unicode:"1f469-200d-1f469-200d-1f466-200d-1f466"},"woman-woman-girl":{name:"woman-woman-girl",unicode:"1f469-200d-1f469-200d-1f467"},"woman-woman-girl-boy":{name:"woman-woman-girl-boy",unicode:"1f469-200d-1f469-200d-1f467-200d-1f466"},"woman-woman-girl-girl":{name:"woman-woman-girl-girl",unicode:"1f469-200d-1f469-200d-1f467-200d-1f467"},"female-technologist":{name:"female-technologist",unicode:"1f469-200d-1f4bb",skinVariations:{2:{name:"female-technologist::skin-tone-2",unicode:"1f469-1f3fb-200d-1f4bb"},3:{name:"female-technologist::skin-tone-3",unicode:"1f469-1f3fc-200d-1f4bb"},4:{name:"female-technologist::skin-tone-4",unicode:"1f469-1f3fd-200d-1f4bb"},5:{name:"female-technologist::skin-tone-5",unicode:"1f469-1f3fe-200d-1f4bb"},6:{name:"female-technologist::skin-tone-6",unicode:"1f469-1f3ff-200d-1f4bb"}}},"female-office-worker":{name:"female-office-worker",unicode:"1f469-200d-1f4bc",skinVariations:{2:{name:"female-office-worker::skin-tone-2",unicode:"1f469-1f3fb-200d-1f4bc"},3:{name:"female-office-worker::skin-tone-3",unicode:"1f469-1f3fc-200d-1f4bc"},4:{name:"female-office-worker::skin-tone-4",unicode:"1f469-1f3fd-200d-1f4bc"},5:{name:"female-office-worker::skin-tone-5",unicode:"1f469-1f3fe-200d-1f4bc"},6:{name:"female-office-worker::skin-tone-6",unicode:"1f469-1f3ff-200d-1f4bc"}}},"female-mechanic":{name:"female-mechanic",unicode:"1f469-200d-1f527",skinVariations:{2:{name:"female-mechanic::skin-tone-2",unicode:"1f469-1f3fb-200d-1f527"},3:{name:"female-mechanic::skin-tone-3",unicode:"1f469-1f3fc-200d-1f527"},4:{name:"female-mechanic::skin-tone-4",unicode:"1f469-1f3fd-200d-1f527"},5:{name:"female-mechanic::skin-tone-5",unicode:"1f469-1f3fe-200d-1f527"},6:{name:"female-mechanic::skin-tone-6",unicode:"1f469-1f3ff-200d-1f527"}}},"female-scientist":{name:"female-scientist",unicode:"1f469-200d-1f52c",skinVariations:{2:{name:"female-scientist::skin-tone-2",unicode:"1f469-1f3fb-200d-1f52c"},3:{name:"female-scientist::skin-tone-3",unicode:"1f469-1f3fc-200d-1f52c"},4:{name:"female-scientist::skin-tone-4",unicode:"1f469-1f3fd-200d-1f52c"},5:{name:"female-scientist::skin-tone-5",unicode:"1f469-1f3fe-200d-1f52c"},6:{name:"female-scientist::skin-tone-6",unicode:"1f469-1f3ff-200d-1f52c"}}},"female-astronaut":{name:"female-astronaut",unicode:"1f469-200d-1f680",skinVariations:{2:{name:"female-astronaut::skin-tone-2",unicode:"1f469-1f3fb-200d-1f680"},3:{name:"female-astronaut::skin-tone-3",unicode:"1f469-1f3fc-200d-1f680"},4:{name:"female-astronaut::skin-tone-4",unicode:"1f469-1f3fd-200d-1f680"},5:{name:"female-astronaut::skin-tone-5",unicode:"1f469-1f3fe-200d-1f680"},6:{name:"female-astronaut::skin-tone-6",unicode:"1f469-1f3ff-200d-1f680"}}},"female-firefighter":{name:"female-firefighter",unicode:"1f469-200d-1f692",skinVariations:{2:{name:"female-firefighter::skin-tone-2",unicode:"1f469-1f3fb-200d-1f692"},3:{name:"female-firefighter::skin-tone-3",unicode:"1f469-1f3fc-200d-1f692"},4:{name:"female-firefighter::skin-tone-4",unicode:"1f469-1f3fd-200d-1f692"},5:{name:"female-firefighter::skin-tone-5",unicode:"1f469-1f3fe-200d-1f692"},6:{name:"female-firefighter::skin-tone-6",unicode:"1f469-1f3ff-200d-1f692"}}},"female-doctor":{name:"female-doctor",unicode:"1f469-200d-2695-fe0f",skinVariations:{2:{name:"female-doctor::skin-tone-2",unicode:"1f469-1f3fb-200d-2695-fe0f"},3:{name:"female-doctor::skin-tone-3",unicode:"1f469-1f3fc-200d-2695-fe0f"},4:{name:"female-doctor::skin-tone-4",unicode:"1f469-1f3fd-200d-2695-fe0f"},5:{name:"female-doctor::skin-tone-5",unicode:"1f469-1f3fe-200d-2695-fe0f"},6:{name:"female-doctor::skin-tone-6",unicode:"1f469-1f3ff-200d-2695-fe0f"}}},"female-judge":{name:"female-judge",unicode:"1f469-200d-2696-fe0f",skinVariations:{2:{name:"female-judge::skin-tone-2",unicode:"1f469-1f3fb-200d-2696-fe0f"},3:{name:"female-judge::skin-tone-3",unicode:"1f469-1f3fc-200d-2696-fe0f"},4:{name:"female-judge::skin-tone-4",unicode:"1f469-1f3fd-200d-2696-fe0f"},5:{name:"female-judge::skin-tone-5",unicode:"1f469-1f3fe-200d-2696-fe0f"},6:{name:"female-judge::skin-tone-6",unicode:"1f469-1f3ff-200d-2696-fe0f"}}},"female-pilot":{name:"female-pilot",unicode:"1f469-200d-2708-fe0f",skinVariations:{2:{name:"female-pilot::skin-tone-2",unicode:"1f469-1f3fb-200d-2708-fe0f"},3:{name:"female-pilot::skin-tone-3",unicode:"1f469-1f3fc-200d-2708-fe0f"},4:{name:"female-pilot::skin-tone-4",unicode:"1f469-1f3fd-200d-2708-fe0f"},5:{name:"female-pilot::skin-tone-5",unicode:"1f469-1f3fe-200d-2708-fe0f"},6:{name:"female-pilot::skin-tone-6",unicode:"1f469-1f3ff-200d-2708-fe0f"}}},"woman-heart-man":{name:"woman-heart-man",unicode:"1f469-200d-2764-fe0f-200d-1f468"},"woman-heart-woman":{name:"woman-heart-woman",unicode:"1f469-200d-2764-fe0f-200d-1f469"},"woman-kiss-man":{name:"woman-kiss-man",unicode:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468"},"woman-kiss-woman":{name:"woman-kiss-woman",unicode:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469"},woman:{name:"woman",unicode:"1f469",skinVariations:{2:{name:"woman::skin-tone-2",unicode:"1f469-1f3fb"},3:{name:"woman::skin-tone-3",unicode:"1f469-1f3fc"},4:{name:"woman::skin-tone-4",unicode:"1f469-1f3fd"},5:{name:"woman::skin-tone-5",unicode:"1f469-1f3fe"},6:{name:"woman::skin-tone-6",unicode:"1f469-1f3ff"}}},couple:{name:"couple",unicode:"1f46b"},man_and_woman_holding_hands:{name:"man_and_woman_holding_hands",aliasOf:"couple",unicode:"1f46b"},two_men_holding_hands:{name:"two_men_holding_hands",unicode:"1f46c"},two_women_holding_hands:{name:"two_women_holding_hands",unicode:"1f46d"},"female-police-officer":{name:"female-police-officer",unicode:"1f46e-200d-2640-fe0f",skinVariations:{2:{name:"female-police-officer::skin-tone-2",unicode:"1f46e-1f3fb-200d-2640-fe0f"},3:{name:"female-police-officer::skin-tone-3",unicode:"1f46e-1f3fc-200d-2640-fe0f"},4:{name:"female-police-officer::skin-tone-4",unicode:"1f46e-1f3fd-200d-2640-fe0f"},5:{name:"female-police-officer::skin-tone-5",unicode:"1f46e-1f3fe-200d-2640-fe0f"},6:{name:"female-police-officer::skin-tone-6",unicode:"1f46e-1f3ff-200d-2640-fe0f"}}},"male-police-officer":{name:"male-police-officer",unicode:"1f46e-200d-2642-fe0f",skinVariations:{2:{name:"male-police-officer::skin-tone-2",unicode:"1f46e-1f3fb-200d-2642-fe0f"},3:{name:"male-police-officer::skin-tone-3",unicode:"1f46e-1f3fc-200d-2642-fe0f"},4:{name:"male-police-officer::skin-tone-4",unicode:"1f46e-1f3fd-200d-2642-fe0f"},5:{name:"male-police-officer::skin-tone-5",unicode:"1f46e-1f3fe-200d-2642-fe0f"},6:{name:"male-police-officer::skin-tone-6",unicode:"1f46e-1f3ff-200d-2642-fe0f"}}},cop:{name:"cop",unicode:"1f46e",skinVariations:{2:{name:"cop::skin-tone-2",unicode:"1f46e-1f3fb"},3:{name:"cop::skin-tone-3",unicode:"1f46e-1f3fc"},4:{name:"cop::skin-tone-4",unicode:"1f46e-1f3fd"},5:{name:"cop::skin-tone-5",unicode:"1f46e-1f3fe"},6:{name:"cop::skin-tone-6",unicode:"1f46e-1f3ff"}}},"woman-with-bunny-ears-partying":{name:"woman-with-bunny-ears-partying",unicode:"1f46f-200d-2640-fe0f"},"man-with-bunny-ears-partying":{name:"man-with-bunny-ears-partying",unicode:"1f46f-200d-2642-fe0f"},dancers:{name:"dancers",unicode:"1f46f"},bride_with_veil:{name:"bride_with_veil",unicode:"1f470",skinVariations:{2:{name:"bride_with_veil::skin-tone-2",unicode:"1f470-1f3fb"},3:{name:"bride_with_veil::skin-tone-3",unicode:"1f470-1f3fc"},4:{name:"bride_with_veil::skin-tone-4",unicode:"1f470-1f3fd"},5:{name:"bride_with_veil::skin-tone-5",unicode:"1f470-1f3fe"},6:{name:"bride_with_veil::skin-tone-6",unicode:"1f470-1f3ff"}}},"blond-haired-woman":{name:"blond-haired-woman",unicode:"1f471-200d-2640-fe0f",skinVariations:{2:{name:"blond-haired-woman::skin-tone-2",unicode:"1f471-1f3fb-200d-2640-fe0f"},3:{name:"blond-haired-woman::skin-tone-3",unicode:"1f471-1f3fc-200d-2640-fe0f"},4:{name:"blond-haired-woman::skin-tone-4",unicode:"1f471-1f3fd-200d-2640-fe0f"},5:{name:"blond-haired-woman::skin-tone-5",unicode:"1f471-1f3fe-200d-2640-fe0f"},6:{name:"blond-haired-woman::skin-tone-6",unicode:"1f471-1f3ff-200d-2640-fe0f"}}},"blond-haired-man":{name:"blond-haired-man",unicode:"1f471-200d-2642-fe0f",skinVariations:{2:{name:"blond-haired-man::skin-tone-2",unicode:"1f471-1f3fb-200d-2642-fe0f"},3:{name:"blond-haired-man::skin-tone-3",unicode:"1f471-1f3fc-200d-2642-fe0f"},4:{name:"blond-haired-man::skin-tone-4",unicode:"1f471-1f3fd-200d-2642-fe0f"},5:{name:"blond-haired-man::skin-tone-5",unicode:"1f471-1f3fe-200d-2642-fe0f"},6:{name:"blond-haired-man::skin-tone-6",unicode:"1f471-1f3ff-200d-2642-fe0f"}}},person_with_blond_hair:{name:"person_with_blond_hair",unicode:"1f471",skinVariations:{2:{name:"person_with_blond_hair::skin-tone-2",unicode:"1f471-1f3fb"},3:{name:"person_with_blond_hair::skin-tone-3",unicode:"1f471-1f3fc"},4:{name:"person_with_blond_hair::skin-tone-4",unicode:"1f471-1f3fd"},5:{name:"person_with_blond_hair::skin-tone-5",unicode:"1f471-1f3fe"},6:{name:"person_with_blond_hair::skin-tone-6",unicode:"1f471-1f3ff"}}},man_with_gua_pi_mao:{name:"man_with_gua_pi_mao",unicode:"1f472",skinVariations:{2:{name:"man_with_gua_pi_mao::skin-tone-2",unicode:"1f472-1f3fb"},3:{name:"man_with_gua_pi_mao::skin-tone-3",unicode:"1f472-1f3fc"},4:{name:"man_with_gua_pi_mao::skin-tone-4",unicode:"1f472-1f3fd"},5:{name:"man_with_gua_pi_mao::skin-tone-5",unicode:"1f472-1f3fe"},6:{name:"man_with_gua_pi_mao::skin-tone-6",unicode:"1f472-1f3ff"}}},"woman-wearing-turban":{name:"woman-wearing-turban",unicode:"1f473-200d-2640-fe0f",skinVariations:{2:{name:"woman-wearing-turban::skin-tone-2",unicode:"1f473-1f3fb-200d-2640-fe0f"},3:{name:"woman-wearing-turban::skin-tone-3",unicode:"1f473-1f3fc-200d-2640-fe0f"},4:{name:"woman-wearing-turban::skin-tone-4",unicode:"1f473-1f3fd-200d-2640-fe0f"},5:{name:"woman-wearing-turban::skin-tone-5",unicode:"1f473-1f3fe-200d-2640-fe0f"},6:{name:"woman-wearing-turban::skin-tone-6",unicode:"1f473-1f3ff-200d-2640-fe0f"}}},"man-wearing-turban":{name:"man-wearing-turban",unicode:"1f473-200d-2642-fe0f",skinVariations:{2:{name:"man-wearing-turban::skin-tone-2",unicode:"1f473-1f3fb-200d-2642-fe0f"},3:{name:"man-wearing-turban::skin-tone-3",unicode:"1f473-1f3fc-200d-2642-fe0f"},4:{name:"man-wearing-turban::skin-tone-4",unicode:"1f473-1f3fd-200d-2642-fe0f"},5:{name:"man-wearing-turban::skin-tone-5",unicode:"1f473-1f3fe-200d-2642-fe0f"},6:{name:"man-wearing-turban::skin-tone-6",unicode:"1f473-1f3ff-200d-2642-fe0f"}}},man_with_turban:{name:"man_with_turban",unicode:"1f473",skinVariations:{2:{name:"man_with_turban::skin-tone-2",unicode:"1f473-1f3fb"},3:{name:"man_with_turban::skin-tone-3",unicode:"1f473-1f3fc"},4:{name:"man_with_turban::skin-tone-4",unicode:"1f473-1f3fd"},5:{name:"man_with_turban::skin-tone-5",unicode:"1f473-1f3fe"},6:{name:"man_with_turban::skin-tone-6",unicode:"1f473-1f3ff"}}},older_man:{name:"older_man",unicode:"1f474",skinVariations:{2:{name:"older_man::skin-tone-2",unicode:"1f474-1f3fb"},3:{name:"older_man::skin-tone-3",unicode:"1f474-1f3fc"},4:{name:"older_man::skin-tone-4",unicode:"1f474-1f3fd"},5:{name:"older_man::skin-tone-5",unicode:"1f474-1f3fe"},6:{name:"older_man::skin-tone-6",unicode:"1f474-1f3ff"}}},older_woman:{name:"older_woman",unicode:"1f475",skinVariations:{2:{name:"older_woman::skin-tone-2",unicode:"1f475-1f3fb"},3:{name:"older_woman::skin-tone-3",unicode:"1f475-1f3fc"},4:{name:"older_woman::skin-tone-4",unicode:"1f475-1f3fd"},5:{name:"older_woman::skin-tone-5",unicode:"1f475-1f3fe"},6:{name:"older_woman::skin-tone-6",unicode:"1f475-1f3ff"}}},baby:{name:"baby",unicode:"1f476",skinVariations:{2:{name:"baby::skin-tone-2",unicode:"1f476-1f3fb"},3:{name:"baby::skin-tone-3",unicode:"1f476-1f3fc"},4:{name:"baby::skin-tone-4",unicode:"1f476-1f3fd"},5:{name:"baby::skin-tone-5",unicode:"1f476-1f3fe"},6:{name:"baby::skin-tone-6",unicode:"1f476-1f3ff"}}},"female-construction-worker":{name:"female-construction-worker",unicode:"1f477-200d-2640-fe0f",skinVariations:{2:{name:"female-construction-worker::skin-tone-2",unicode:"1f477-1f3fb-200d-2640-fe0f"},3:{name:"female-construction-worker::skin-tone-3",unicode:"1f477-1f3fc-200d-2640-fe0f"},4:{name:"female-construction-worker::skin-tone-4",unicode:"1f477-1f3fd-200d-2640-fe0f"},5:{name:"female-construction-worker::skin-tone-5",unicode:"1f477-1f3fe-200d-2640-fe0f"},6:{name:"female-construction-worker::skin-tone-6",unicode:"1f477-1f3ff-200d-2640-fe0f"}}},"male-construction-worker":{name:"male-construction-worker",unicode:"1f477-200d-2642-fe0f",skinVariations:{2:{name:"male-construction-worker::skin-tone-2",unicode:"1f477-1f3fb-200d-2642-fe0f"},3:{name:"male-construction-worker::skin-tone-3",unicode:"1f477-1f3fc-200d-2642-fe0f"},4:{name:"male-construction-worker::skin-tone-4",unicode:"1f477-1f3fd-200d-2642-fe0f"},5:{name:"male-construction-worker::skin-tone-5",unicode:"1f477-1f3fe-200d-2642-fe0f"},6:{name:"male-construction-worker::skin-tone-6",unicode:"1f477-1f3ff-200d-2642-fe0f"}}},construction_worker:{name:"construction_worker",unicode:"1f477",skinVariations:{2:{name:"construction_worker::skin-tone-2",unicode:"1f477-1f3fb"},3:{name:"construction_worker::skin-tone-3",unicode:"1f477-1f3fc"},4:{name:"construction_worker::skin-tone-4",unicode:"1f477-1f3fd"},5:{name:"construction_worker::skin-tone-5",unicode:"1f477-1f3fe"},6:{name:"construction_worker::skin-tone-6",unicode:"1f477-1f3ff"}}},princess:{name:"princess",unicode:"1f478",skinVariations:{2:{name:"princess::skin-tone-2",unicode:"1f478-1f3fb"},3:{name:"princess::skin-tone-3",unicode:"1f478-1f3fc"},4:{name:"princess::skin-tone-4",unicode:"1f478-1f3fd"},5:{name:"princess::skin-tone-5",unicode:"1f478-1f3fe"},6:{name:"princess::skin-tone-6",unicode:"1f478-1f3ff"}}},japanese_ogre:{name:"japanese_ogre",unicode:"1f479"},japanese_goblin:{name:"japanese_goblin",unicode:"1f47a"},ghost:{name:"ghost",unicode:"1f47b"},angel:{name:"angel",unicode:"1f47c",skinVariations:{2:{name:"angel::skin-tone-2",unicode:"1f47c-1f3fb"},3:{name:"angel::skin-tone-3",unicode:"1f47c-1f3fc"},4:{name:"angel::skin-tone-4",unicode:"1f47c-1f3fd"},5:{name:"angel::skin-tone-5",unicode:"1f47c-1f3fe"},6:{name:"angel::skin-tone-6",unicode:"1f47c-1f3ff"}}},alien:{name:"alien",unicode:"1f47d"},space_invader:{name:"space_invader",unicode:"1f47e"},imp:{name:"imp",unicode:"1f47f"},skull:{name:"skull",unicode:"1f480"},"woman-tipping-hand":{name:"woman-tipping-hand",unicode:"1f481-200d-2640-fe0f",skinVariations:{2:{name:"woman-tipping-hand::skin-tone-2",unicode:"1f481-1f3fb-200d-2640-fe0f"},3:{name:"woman-tipping-hand::skin-tone-3",unicode:"1f481-1f3fc-200d-2640-fe0f"},4:{name:"woman-tipping-hand::skin-tone-4",unicode:"1f481-1f3fd-200d-2640-fe0f"},5:{name:"woman-tipping-hand::skin-tone-5",unicode:"1f481-1f3fe-200d-2640-fe0f"},6:{name:"woman-tipping-hand::skin-tone-6",unicode:"1f481-1f3ff-200d-2640-fe0f"}}},"man-tipping-hand":{name:"man-tipping-hand",unicode:"1f481-200d-2642-fe0f",skinVariations:{2:{name:"man-tipping-hand::skin-tone-2",unicode:"1f481-1f3fb-200d-2642-fe0f"},3:{name:"man-tipping-hand::skin-tone-3",unicode:"1f481-1f3fc-200d-2642-fe0f"},4:{name:"man-tipping-hand::skin-tone-4",unicode:"1f481-1f3fd-200d-2642-fe0f"},5:{name:"man-tipping-hand::skin-tone-5",unicode:"1f481-1f3fe-200d-2642-fe0f"},6:{name:"man-tipping-hand::skin-tone-6",unicode:"1f481-1f3ff-200d-2642-fe0f"}}},information_desk_person:{name:"information_desk_person",unicode:"1f481",skinVariations:{2:{name:"information_desk_person::skin-tone-2",unicode:"1f481-1f3fb"},3:{name:"information_desk_person::skin-tone-3",unicode:"1f481-1f3fc"},4:{name:"information_desk_person::skin-tone-4",unicode:"1f481-1f3fd"},5:{name:"information_desk_person::skin-tone-5",unicode:"1f481-1f3fe"},6:{name:"information_desk_person::skin-tone-6",unicode:"1f481-1f3ff"}}},"female-guard":{name:"female-guard",unicode:"1f482-200d-2640-fe0f",skinVariations:{2:{name:"female-guard::skin-tone-2",unicode:"1f482-1f3fb-200d-2640-fe0f"},3:{name:"female-guard::skin-tone-3",unicode:"1f482-1f3fc-200d-2640-fe0f"},4:{name:"female-guard::skin-tone-4",unicode:"1f482-1f3fd-200d-2640-fe0f"},5:{name:"female-guard::skin-tone-5",unicode:"1f482-1f3fe-200d-2640-fe0f"},6:{name:"female-guard::skin-tone-6",unicode:"1f482-1f3ff-200d-2640-fe0f"}}},"male-guard":{name:"male-guard",unicode:"1f482-200d-2642-fe0f",skinVariations:{2:{name:"male-guard::skin-tone-2",unicode:"1f482-1f3fb-200d-2642-fe0f"},3:{name:"male-guard::skin-tone-3",unicode:"1f482-1f3fc-200d-2642-fe0f"},4:{name:"male-guard::skin-tone-4",unicode:"1f482-1f3fd-200d-2642-fe0f"},5:{name:"male-guard::skin-tone-5",unicode:"1f482-1f3fe-200d-2642-fe0f"},6:{name:"male-guard::skin-tone-6",unicode:"1f482-1f3ff-200d-2642-fe0f"}}},guardsman:{name:"guardsman",unicode:"1f482",skinVariations:{2:{name:"guardsman::skin-tone-2",unicode:"1f482-1f3fb"},3:{name:"guardsman::skin-tone-3",unicode:"1f482-1f3fc"},4:{name:"guardsman::skin-tone-4",unicode:"1f482-1f3fd"},5:{name:"guardsman::skin-tone-5",unicode:"1f482-1f3fe"},6:{name:"guardsman::skin-tone-6",unicode:"1f482-1f3ff"}}},dancer:{name:"dancer",unicode:"1f483",skinVariations:{2:{name:"dancer::skin-tone-2",unicode:"1f483-1f3fb"},3:{name:"dancer::skin-tone-3",unicode:"1f483-1f3fc"},4:{name:"dancer::skin-tone-4",unicode:"1f483-1f3fd"},5:{name:"dancer::skin-tone-5",unicode:"1f483-1f3fe"},6:{name:"dancer::skin-tone-6",unicode:"1f483-1f3ff"}}},lipstick:{name:"lipstick",unicode:"1f484"},nail_care:{name:"nail_care",unicode:"1f485",skinVariations:{2:{name:"nail_care::skin-tone-2",unicode:"1f485-1f3fb"},3:{name:"nail_care::skin-tone-3",unicode:"1f485-1f3fc"},4:{name:"nail_care::skin-tone-4",unicode:"1f485-1f3fd"},5:{name:"nail_care::skin-tone-5",unicode:"1f485-1f3fe"},6:{name:"nail_care::skin-tone-6",unicode:"1f485-1f3ff"}}},"woman-getting-massage":{name:"woman-getting-massage",unicode:"1f486-200d-2640-fe0f",skinVariations:{2:{name:"woman-getting-massage::skin-tone-2",unicode:"1f486-1f3fb-200d-2640-fe0f"},3:{name:"woman-getting-massage::skin-tone-3",unicode:"1f486-1f3fc-200d-2640-fe0f"},4:{name:"woman-getting-massage::skin-tone-4",unicode:"1f486-1f3fd-200d-2640-fe0f"},5:{name:"woman-getting-massage::skin-tone-5",unicode:"1f486-1f3fe-200d-2640-fe0f"},6:{name:"woman-getting-massage::skin-tone-6",unicode:"1f486-1f3ff-200d-2640-fe0f"}}},"man-getting-massage":{name:"man-getting-massage",unicode:"1f486-200d-2642-fe0f",skinVariations:{2:{name:"man-getting-massage::skin-tone-2",unicode:"1f486-1f3fb-200d-2642-fe0f"},3:{name:"man-getting-massage::skin-tone-3",unicode:"1f486-1f3fc-200d-2642-fe0f"},4:{name:"man-getting-massage::skin-tone-4",unicode:"1f486-1f3fd-200d-2642-fe0f"},5:{name:"man-getting-massage::skin-tone-5",unicode:"1f486-1f3fe-200d-2642-fe0f"},6:{name:"man-getting-massage::skin-tone-6",unicode:"1f486-1f3ff-200d-2642-fe0f"}}},massage:{name:"massage",unicode:"1f486",skinVariations:{2:{name:"massage::skin-tone-2",unicode:"1f486-1f3fb"},3:{name:"massage::skin-tone-3",unicode:"1f486-1f3fc"},4:{name:"massage::skin-tone-4",unicode:"1f486-1f3fd"},5:{name:"massage::skin-tone-5",unicode:"1f486-1f3fe"},6:{name:"massage::skin-tone-6",unicode:"1f486-1f3ff"}}},"woman-getting-haircut":{name:"woman-getting-haircut",unicode:"1f487-200d-2640-fe0f",skinVariations:{2:{name:"woman-getting-haircut::skin-tone-2",unicode:"1f487-1f3fb-200d-2640-fe0f"},3:{name:"woman-getting-haircut::skin-tone-3",unicode:"1f487-1f3fc-200d-2640-fe0f"},4:{name:"woman-getting-haircut::skin-tone-4",unicode:"1f487-1f3fd-200d-2640-fe0f"},5:{name:"woman-getting-haircut::skin-tone-5",unicode:"1f487-1f3fe-200d-2640-fe0f"},6:{name:"woman-getting-haircut::skin-tone-6",unicode:"1f487-1f3ff-200d-2640-fe0f"}}},"man-getting-haircut":{name:"man-getting-haircut",unicode:"1f487-200d-2642-fe0f",skinVariations:{2:{name:"man-getting-haircut::skin-tone-2",unicode:"1f487-1f3fb-200d-2642-fe0f"},3:{name:"man-getting-haircut::skin-tone-3",unicode:"1f487-1f3fc-200d-2642-fe0f"},4:{name:"man-getting-haircut::skin-tone-4",unicode:"1f487-1f3fd-200d-2642-fe0f"},5:{name:"man-getting-haircut::skin-tone-5",unicode:"1f487-1f3fe-200d-2642-fe0f"},6:{name:"man-getting-haircut::skin-tone-6",unicode:"1f487-1f3ff-200d-2642-fe0f"}}},haircut:{name:"haircut",unicode:"1f487",skinVariations:{2:{name:"haircut::skin-tone-2",unicode:"1f487-1f3fb"},3:{name:"haircut::skin-tone-3",unicode:"1f487-1f3fc"},4:{name:"haircut::skin-tone-4",unicode:"1f487-1f3fd"},5:{name:"haircut::skin-tone-5",unicode:"1f487-1f3fe"},6:{name:"haircut::skin-tone-6",unicode:"1f487-1f3ff"}}},barber:{name:"barber",unicode:"1f488"},syringe:{name:"syringe",unicode:"1f489"},pill:{name:"pill",unicode:"1f48a"},kiss:{name:"kiss",unicode:"1f48b"},love_letter:{name:"love_letter",unicode:"1f48c"},ring:{name:"ring",unicode:"1f48d"},gem:{name:"gem",unicode:"1f48e"},couplekiss:{name:"couplekiss",unicode:"1f48f"},bouquet:{name:"bouquet",unicode:"1f490"},couple_with_heart:{name:"couple_with_heart",unicode:"1f491"},wedding:{name:"wedding",unicode:"1f492"},heartbeat:{name:"heartbeat",unicode:"1f493"},broken_heart:{name:"broken_heart",unicode:"1f494"},two_hearts:{name:"two_hearts",unicode:"1f495"},sparkling_heart:{name:"sparkling_heart",unicode:"1f496"},heartpulse:{name:"heartpulse",unicode:"1f497"},cupid:{name:"cupid",unicode:"1f498"},blue_heart:{name:"blue_heart",unicode:"1f499"},green_heart:{name:"green_heart",unicode:"1f49a"},yellow_heart:{name:"yellow_heart",unicode:"1f49b"},purple_heart:{name:"purple_heart",unicode:"1f49c"},gift_heart:{name:"gift_heart",unicode:"1f49d"},revolving_hearts:{name:"revolving_hearts",unicode:"1f49e"},heart_decoration:{name:"heart_decoration",unicode:"1f49f"},diamond_shape_with_a_dot_inside:{name:"diamond_shape_with_a_dot_inside",unicode:"1f4a0"},bulb:{name:"bulb",unicode:"1f4a1"},anger:{name:"anger",unicode:"1f4a2"},bomb:{name:"bomb",unicode:"1f4a3"},zzz:{name:"zzz",unicode:"1f4a4"},boom:{name:"boom",unicode:"1f4a5"},collision:{name:"collision",aliasOf:"boom",unicode:"1f4a5"},sweat_drops:{name:"sweat_drops",unicode:"1f4a6"},droplet:{name:"droplet",unicode:"1f4a7"},dash:{name:"dash",unicode:"1f4a8"},hankey:{name:"hankey",unicode:"1f4a9"},poop:{name:"poop",aliasOf:"hankey",unicode:"1f4a9"},shit:{name:"shit",aliasOf:"hankey",unicode:"1f4a9"},muscle:{name:"muscle",unicode:"1f4aa",skinVariations:{2:{name:"muscle::skin-tone-2",unicode:"1f4aa-1f3fb"},3:{name:"muscle::skin-tone-3",unicode:"1f4aa-1f3fc"},4:{name:"muscle::skin-tone-4",unicode:"1f4aa-1f3fd"},5:{name:"muscle::skin-tone-5",unicode:"1f4aa-1f3fe"},6:{name:"muscle::skin-tone-6",unicode:"1f4aa-1f3ff"}}},dizzy:{name:"dizzy",unicode:"1f4ab"},speech_balloon:{name:"speech_balloon",unicode:"1f4ac"},thought_balloon:{name:"thought_balloon",unicode:"1f4ad"},white_flower:{name:"white_flower",unicode:"1f4ae"},moneybag:{name:"moneybag",unicode:"1f4b0"},currency_exchange:{name:"currency_exchange",unicode:"1f4b1"},heavy_dollar_sign:{name:"heavy_dollar_sign",unicode:"1f4b2"},credit_card:{name:"credit_card",unicode:"1f4b3"},yen:{name:"yen",unicode:"1f4b4"},dollar:{name:"dollar",unicode:"1f4b5"},euro:{name:"euro",unicode:"1f4b6"},pound:{name:"pound",unicode:"1f4b7"},money_with_wings:{name:"money_with_wings",unicode:"1f4b8"},chart:{name:"chart",unicode:"1f4b9"},seat:{name:"seat",unicode:"1f4ba"},computer:{name:"computer",unicode:"1f4bb"},briefcase:{name:"briefcase",unicode:"1f4bc"},minidisc:{name:"minidisc",unicode:"1f4bd"},floppy_disk:{name:"floppy_disk",unicode:"1f4be"},cd:{name:"cd",unicode:"1f4bf"},dvd:{name:"dvd",unicode:"1f4c0"},file_folder:{name:"file_folder",unicode:"1f4c1"},open_file_folder:{name:"open_file_folder",unicode:"1f4c2"},page_with_curl:{name:"page_with_curl",unicode:"1f4c3"},page_facing_up:{name:"page_facing_up",unicode:"1f4c4"},date:{name:"date",unicode:"1f4c5"},calendar:{name:"calendar",unicode:"1f4c6"},card_index:{name:"card_index",unicode:"1f4c7"},chart_with_upwards_trend:{name:"chart_with_upwards_trend",unicode:"1f4c8"},chart_with_downwards_trend:{name:"chart_with_downwards_trend",unicode:"1f4c9"},bar_chart:{name:"bar_chart",unicode:"1f4ca"},clipboard:{name:"clipboard",unicode:"1f4cb"},pushpin:{name:"pushpin",unicode:"1f4cc"},round_pushpin:{name:"round_pushpin",unicode:"1f4cd"},paperclip:{name:"paperclip",unicode:"1f4ce"},straight_ruler:{name:"straight_ruler",unicode:"1f4cf"},triangular_ruler:{name:"triangular_ruler",unicode:"1f4d0"},bookmark_tabs:{name:"bookmark_tabs",unicode:"1f4d1"},ledger:{name:"ledger",unicode:"1f4d2"},notebook:{name:"notebook",unicode:"1f4d3"},notebook_with_decorative_cover:{name:"notebook_with_decorative_cover",unicode:"1f4d4"},closed_book:{name:"closed_book",unicode:"1f4d5"},book:{name:"book",unicode:"1f4d6"},open_book:{name:"open_book",aliasOf:"book",unicode:"1f4d6"},green_book:{name:"green_book",unicode:"1f4d7"},blue_book:{name:"blue_book",unicode:"1f4d8"},orange_book:{name:"orange_book",unicode:"1f4d9"},books:{name:"books",unicode:"1f4da"},name_badge:{name:"name_badge",unicode:"1f4db"},scroll:{name:"scroll",unicode:"1f4dc"},memo:{name:"memo",unicode:"1f4dd"},pencil:{name:"pencil",aliasOf:"memo",unicode:"1f4dd"},telephone_receiver:{name:"telephone_receiver",unicode:"1f4de"},pager:{name:"pager",unicode:"1f4df"},fax:{name:"fax",unicode:"1f4e0"},satellite_antenna:{name:"satellite_antenna",unicode:"1f4e1"},loudspeaker:{name:"loudspeaker",unicode:"1f4e2"},mega:{name:"mega",unicode:"1f4e3"},outbox_tray:{name:"outbox_tray",unicode:"1f4e4"},inbox_tray:{name:"inbox_tray",unicode:"1f4e5"},package:{name:"package",unicode:"1f4e6"},"e-mail":{name:"e-mail",unicode:"1f4e7"},incoming_envelope:{name:"incoming_envelope",unicode:"1f4e8"},envelope_with_arrow:{name:"envelope_with_arrow",unicode:"1f4e9"},mailbox_closed:{name:"mailbox_closed",unicode:"1f4ea"},mailbox:{name:"mailbox",unicode:"1f4eb"},mailbox_with_mail:{name:"mailbox_with_mail",unicode:"1f4ec"},mailbox_with_no_mail:{name:"mailbox_with_no_mail",unicode:"1f4ed"},postbox:{name:"postbox",unicode:"1f4ee"},postal_horn:{name:"postal_horn",unicode:"1f4ef"},newspaper:{name:"newspaper",unicode:"1f4f0"},iphone:{name:"iphone",unicode:"1f4f1"},calling:{name:"calling",unicode:"1f4f2"},vibration_mode:{name:"vibration_mode",unicode:"1f4f3"},mobile_phone_off:{name:"mobile_phone_off",unicode:"1f4f4"},no_mobile_phones:{name:"no_mobile_phones",unicode:"1f4f5"},signal_strength:{name:"signal_strength",unicode:"1f4f6"},camera:{name:"camera",unicode:"1f4f7"},camera_with_flash:{name:"camera_with_flash",unicode:"1f4f8"},video_camera:{name:"video_camera",unicode:"1f4f9"},tv:{name:"tv",unicode:"1f4fa"},radio:{name:"radio",unicode:"1f4fb"},vhs:{name:"vhs",unicode:"1f4fc"},film_projector:{name:"film_projector",unicode:"1f4fd-fe0f"},prayer_beads:{name:"prayer_beads",unicode:"1f4ff"},twisted_rightwards_arrows:{name:"twisted_rightwards_arrows",unicode:"1f500"},repeat:{name:"repeat",unicode:"1f501"},repeat_one:{name:"repeat_one",unicode:"1f502"},arrows_clockwise:{name:"arrows_clockwise",unicode:"1f503"},arrows_counterclockwise:{name:"arrows_counterclockwise",unicode:"1f504"},low_brightness:{name:"low_brightness",unicode:"1f505"},high_brightness:{name:"high_brightness",unicode:"1f506"},mute:{name:"mute",unicode:"1f507"},speaker:{name:"speaker",unicode:"1f508"},sound:{name:"sound",unicode:"1f509"},loud_sound:{name:"loud_sound",unicode:"1f50a"},battery:{name:"battery",unicode:"1f50b"},electric_plug:{name:"electric_plug",unicode:"1f50c"},mag:{name:"mag",unicode:"1f50d"},mag_right:{name:"mag_right",unicode:"1f50e"},lock_with_ink_pen:{name:"lock_with_ink_pen",unicode:"1f50f"},closed_lock_with_key:{name:"closed_lock_with_key",unicode:"1f510"},key:{name:"key",unicode:"1f511"},lock:{name:"lock",unicode:"1f512"},unlock:{name:"unlock",unicode:"1f513"},bell:{name:"bell",unicode:"1f514"},no_bell:{name:"no_bell",unicode:"1f515"},bookmark:{name:"bookmark",unicode:"1f516"},link:{name:"link",unicode:"1f517"},radio_button:{name:"radio_button",unicode:"1f518"},back:{name:"back",unicode:"1f519"},end:{name:"end",unicode:"1f51a"},on:{name:"on",unicode:"1f51b"},soon:{name:"soon",unicode:"1f51c"},top:{name:"top",unicode:"1f51d"},underage:{name:"underage",unicode:"1f51e"},keycap_ten:{name:"keycap_ten",unicode:"1f51f"},capital_abcd:{name:"capital_abcd",unicode:"1f520"},abcd:{name:"abcd",unicode:"1f521"},symbols:{name:"symbols",unicode:"1f523"},abc:{name:"abc",unicode:"1f524"},fire:{name:"fire",unicode:"1f525"},flashlight:{name:"flashlight",unicode:"1f526"},wrench:{name:"wrench",unicode:"1f527"},hammer:{name:"hammer",unicode:"1f528"},nut_and_bolt:{name:"nut_and_bolt",unicode:"1f529"},hocho:{name:"hocho",unicode:"1f52a"},knife:{name:"knife",aliasOf:"hocho",unicode:"1f52a"},gun:{name:"gun",unicode:"1f52b"},microscope:{name:"microscope",unicode:"1f52c"},telescope:{name:"telescope",unicode:"1f52d"},crystal_ball:{name:"crystal_ball",unicode:"1f52e"},six_pointed_star:{name:"six_pointed_star",unicode:"1f52f"},beginner:{name:"beginner",unicode:"1f530"},trident:{name:"trident",unicode:"1f531"},black_square_button:{name:"black_square_button",unicode:"1f532"},white_square_button:{name:"white_square_button",unicode:"1f533"},red_circle:{name:"red_circle",unicode:"1f534"},large_blue_circle:{name:"large_blue_circle",unicode:"1f535"},large_orange_diamond:{name:"large_orange_diamond",unicode:"1f536"},large_blue_diamond:{name:"large_blue_diamond",unicode:"1f537"},small_orange_diamond:{name:"small_orange_diamond",unicode:"1f538"},small_blue_diamond:{name:"small_blue_diamond",unicode:"1f539"},small_red_triangle:{name:"small_red_triangle",unicode:"1f53a"},small_red_triangle_down:{name:"small_red_triangle_down",unicode:"1f53b"},arrow_up_small:{name:"arrow_up_small",unicode:"1f53c"},arrow_down_small:{name:"arrow_down_small",unicode:"1f53d"},om_symbol:{name:"om_symbol",unicode:"1f549-fe0f"},dove_of_peace:{name:"dove_of_peace",unicode:"1f54a-fe0f"},kaaba:{name:"kaaba",unicode:"1f54b"},mosque:{name:"mosque",unicode:"1f54c"},synagogue:{name:"synagogue",unicode:"1f54d"},menorah_with_nine_branches:{name:"menorah_with_nine_branches",unicode:"1f54e"},clock1:{name:"clock1",unicode:"1f550"},clock2:{name:"clock2",unicode:"1f551"},clock3:{name:"clock3",unicode:"1f552"},clock4:{name:"clock4",unicode:"1f553"},clock5:{name:"clock5",unicode:"1f554"},clock6:{name:"clock6",unicode:"1f555"},clock7:{name:"clock7",unicode:"1f556"},clock8:{name:"clock8",unicode:"1f557"},clock9:{name:"clock9",unicode:"1f558"},clock10:{name:"clock10",unicode:"1f559"},clock11:{name:"clock11",unicode:"1f55a"},clock12:{name:"clock12",unicode:"1f55b"},clock130:{name:"clock130",unicode:"1f55c"},clock230:{name:"clock230",unicode:"1f55d"},clock330:{name:"clock330",unicode:"1f55e"},clock430:{name:"clock430",unicode:"1f55f"},clock530:{name:"clock530",unicode:"1f560"},clock630:{name:"clock630",unicode:"1f561"},clock730:{name:"clock730",unicode:"1f562"},clock830:{name:"clock830",unicode:"1f563"},clock930:{name:"clock930",unicode:"1f564"},clock1030:{name:"clock1030",unicode:"1f565"},clock1130:{name:"clock1130",unicode:"1f566"},clock1230:{name:"clock1230",unicode:"1f567"},candle:{name:"candle",unicode:"1f56f-fe0f"},mantelpiece_clock:{name:"mantelpiece_clock",unicode:"1f570-fe0f"},hole:{name:"hole",unicode:"1f573-fe0f"},man_in_business_suit_levitating:{name:"man_in_business_suit_levitating",unicode:"1f574-fe0f",skinVariations:{2:{name:"man_in_business_suit_levitating::skin-tone-2",unicode:"1f574-1f3fb"},3:{name:"man_in_business_suit_levitating::skin-tone-3",unicode:"1f574-1f3fc"},4:{name:"man_in_business_suit_levitating::skin-tone-4",unicode:"1f574-1f3fd"},5:{name:"man_in_business_suit_levitating::skin-tone-5",unicode:"1f574-1f3fe"},6:{name:"man_in_business_suit_levitating::skin-tone-6",unicode:"1f574-1f3ff"}}},"female-detective":{name:"female-detective",unicode:"1f575-fe0f-200d-2640-fe0f",skinVariations:{2:{name:"female-detective::skin-tone-2",unicode:"1f575-1f3fb-200d-2640-fe0f"},3:{name:"female-detective::skin-tone-3",unicode:"1f575-1f3fc-200d-2640-fe0f"},4:{name:"female-detective::skin-tone-4",unicode:"1f575-1f3fd-200d-2640-fe0f"},5:{name:"female-detective::skin-tone-5",unicode:"1f575-1f3fe-200d-2640-fe0f"},6:{name:"female-detective::skin-tone-6",unicode:"1f575-1f3ff-200d-2640-fe0f"}}},"male-detective":{name:"male-detective",unicode:"1f575-fe0f-200d-2642-fe0f",skinVariations:{2:{name:"male-detective::skin-tone-2",unicode:"1f575-1f3fb-200d-2642-fe0f"},3:{name:"male-detective::skin-tone-3",unicode:"1f575-1f3fc-200d-2642-fe0f"},4:{name:"male-detective::skin-tone-4",unicode:"1f575-1f3fd-200d-2642-fe0f"},5:{name:"male-detective::skin-tone-5",unicode:"1f575-1f3fe-200d-2642-fe0f"},6:{name:"male-detective::skin-tone-6",unicode:"1f575-1f3ff-200d-2642-fe0f"}}},sleuth_or_spy:{name:"sleuth_or_spy",unicode:"1f575-fe0f",skinVariations:{2:{name:"sleuth_or_spy::skin-tone-2",unicode:"1f575-1f3fb"},3:{name:"sleuth_or_spy::skin-tone-3",unicode:"1f575-1f3fc"},4:{name:"sleuth_or_spy::skin-tone-4",unicode:"1f575-1f3fd"},5:{name:"sleuth_or_spy::skin-tone-5",unicode:"1f575-1f3fe"},6:{name:"sleuth_or_spy::skin-tone-6",unicode:"1f575-1f3ff"}}},dark_sunglasses:{name:"dark_sunglasses",unicode:"1f576-fe0f"},spider:{name:"spider",unicode:"1f577-fe0f"},spider_web:{name:"spider_web",unicode:"1f578-fe0f"},joystick:{name:"joystick",unicode:"1f579-fe0f"},man_dancing:{name:"man_dancing",unicode:"1f57a",skinVariations:{2:{name:"man_dancing::skin-tone-2",unicode:"1f57a-1f3fb"},3:{name:"man_dancing::skin-tone-3",unicode:"1f57a-1f3fc"},4:{name:"man_dancing::skin-tone-4",unicode:"1f57a-1f3fd"},5:{name:"man_dancing::skin-tone-5",unicode:"1f57a-1f3fe"},6:{name:"man_dancing::skin-tone-6",unicode:"1f57a-1f3ff"}}},linked_paperclips:{name:"linked_paperclips",unicode:"1f587-fe0f"},lower_left_ballpoint_pen:{name:"lower_left_ballpoint_pen",unicode:"1f58a-fe0f"},lower_left_fountain_pen:{name:"lower_left_fountain_pen",unicode:"1f58b-fe0f"},lower_left_paintbrush:{name:"lower_left_paintbrush",unicode:"1f58c-fe0f"},lower_left_crayon:{name:"lower_left_crayon",unicode:"1f58d-fe0f"},raised_hand_with_fingers_splayed:{name:"raised_hand_with_fingers_splayed",unicode:"1f590-fe0f",skinVariations:{2:{name:"raised_hand_with_fingers_splayed::skin-tone-2",unicode:"1f590-1f3fb"},3:{name:"raised_hand_with_fingers_splayed::skin-tone-3",unicode:"1f590-1f3fc"},4:{name:"raised_hand_with_fingers_splayed::skin-tone-4",unicode:"1f590-1f3fd"},5:{name:"raised_hand_with_fingers_splayed::skin-tone-5",unicode:"1f590-1f3fe"},6:{name:"raised_hand_with_fingers_splayed::skin-tone-6",unicode:"1f590-1f3ff"}}},middle_finger:{name:"middle_finger",unicode:"1f595",skinVariations:{2:{name:"middle_finger::skin-tone-2",unicode:"1f595-1f3fb"},3:{name:"middle_finger::skin-tone-3",unicode:"1f595-1f3fc"},4:{name:"middle_finger::skin-tone-4",unicode:"1f595-1f3fd"},5:{name:"middle_finger::skin-tone-5",unicode:"1f595-1f3fe"},6:{name:"middle_finger::skin-tone-6",unicode:"1f595-1f3ff"}}},reversed_hand_with_middle_finger_extended:{name:"reversed_hand_with_middle_finger_extended",aliasOf:"middle_finger",unicode:"1f595",skinVariations:{2:{name:"reversed_hand_with_middle_finger_extended::skin-tone-2",unicode:"1f595-1f3fb"},3:{name:"reversed_hand_with_middle_finger_extended::skin-tone-3",unicode:"1f595-1f3fc"},4:{name:"reversed_hand_with_middle_finger_extended::skin-tone-4",unicode:"1f595-1f3fd"},5:{name:"reversed_hand_with_middle_finger_extended::skin-tone-5",unicode:"1f595-1f3fe"},6:{name:"reversed_hand_with_middle_finger_extended::skin-tone-6",unicode:"1f595-1f3ff"}}},"spock-hand":{name:"spock-hand",unicode:"1f596",skinVariations:{2:{name:"spock-hand::skin-tone-2",unicode:"1f596-1f3fb"},3:{name:"spock-hand::skin-tone-3",unicode:"1f596-1f3fc"},4:{name:"spock-hand::skin-tone-4",unicode:"1f596-1f3fd"},5:{name:"spock-hand::skin-tone-5",unicode:"1f596-1f3fe"},6:{name:"spock-hand::skin-tone-6",unicode:"1f596-1f3ff"}}},black_heart:{name:"black_heart",unicode:"1f5a4"},desktop_computer:{name:"desktop_computer",unicode:"1f5a5-fe0f"},printer:{name:"printer",unicode:"1f5a8-fe0f"},three_button_mouse:{name:"three_button_mouse",unicode:"1f5b1-fe0f"},trackball:{name:"trackball",unicode:"1f5b2-fe0f"},frame_with_picture:{name:"frame_with_picture",unicode:"1f5bc-fe0f"},card_index_dividers:{name:"card_index_dividers",unicode:"1f5c2-fe0f"},card_file_box:{name:"card_file_box",unicode:"1f5c3-fe0f"},file_cabinet:{name:"file_cabinet",unicode:"1f5c4-fe0f"},wastebasket:{name:"wastebasket",unicode:"1f5d1-fe0f"},spiral_note_pad:{name:"spiral_note_pad",unicode:"1f5d2-fe0f"},spiral_calendar_pad:{name:"spiral_calendar_pad",unicode:"1f5d3-fe0f"},compression:{name:"compression",unicode:"1f5dc-fe0f"},old_key:{name:"old_key",unicode:"1f5dd-fe0f"},rolled_up_newspaper:{name:"rolled_up_newspaper",unicode:"1f5de-fe0f"},dagger_knife:{name:"dagger_knife",unicode:"1f5e1-fe0f"},speaking_head_in_silhouette:{name:"speaking_head_in_silhouette",unicode:"1f5e3-fe0f"},left_speech_bubble:{name:"left_speech_bubble",unicode:"1f5e8-fe0f"},right_anger_bubble:{name:"right_anger_bubble",unicode:"1f5ef-fe0f"},ballot_box_with_ballot:{name:"ballot_box_with_ballot",unicode:"1f5f3-fe0f"},world_map:{name:"world_map",unicode:"1f5fa-fe0f"},mount_fuji:{name:"mount_fuji",unicode:"1f5fb"},tokyo_tower:{name:"tokyo_tower",unicode:"1f5fc"},statue_of_liberty:{name:"statue_of_liberty",unicode:"1f5fd"},japan:{name:"japan",unicode:"1f5fe"},moyai:{name:"moyai",unicode:"1f5ff"},grinning:{name:"grinning",unicode:"1f600"},grin:{name:"grin",unicode:"1f601"},joy:{name:"joy",unicode:"1f602"},smiley:{name:"smiley",unicode:"1f603"},smile:{name:"smile",unicode:"1f604"},sweat_smile:{name:"sweat_smile",unicode:"1f605"},laughing:{name:"laughing",unicode:"1f606"},satisfied:{name:"satisfied",aliasOf:"laughing",unicode:"1f606"},innocent:{name:"innocent",unicode:"1f607"},smiling_imp:{name:"smiling_imp",unicode:"1f608"},wink:{name:"wink",unicode:"1f609"},blush:{name:"blush",unicode:"1f60a"},yum:{name:"yum",unicode:"1f60b"},relieved:{name:"relieved",unicode:"1f60c"},heart_eyes:{name:"heart_eyes",unicode:"1f60d"},sunglasses:{name:"sunglasses",unicode:"1f60e"},smirk:{name:"smirk",unicode:"1f60f"},neutral_face:{name:"neutral_face",unicode:"1f610"},expressionless:{name:"expressionless",unicode:"1f611"},unamused:{name:"unamused",unicode:"1f612"},sweat:{name:"sweat",unicode:"1f613"},pensive:{name:"pensive",unicode:"1f614"},confused:{name:"confused",unicode:"1f615"},confounded:{name:"confounded",unicode:"1f616"},kissing:{name:"kissing",unicode:"1f617"},kissing_heart:{name:"kissing_heart",unicode:"1f618"},kissing_smiling_eyes:{name:"kissing_smiling_eyes",unicode:"1f619"},kissing_closed_eyes:{name:"kissing_closed_eyes",unicode:"1f61a"},stuck_out_tongue:{name:"stuck_out_tongue",unicode:"1f61b"},stuck_out_tongue_winking_eye:{name:"stuck_out_tongue_winking_eye",unicode:"1f61c"},stuck_out_tongue_closed_eyes:{name:"stuck_out_tongue_closed_eyes",unicode:"1f61d"},disappointed:{name:"disappointed",unicode:"1f61e"},worried:{name:"worried",unicode:"1f61f"},angry:{name:"angry",unicode:"1f620"},rage:{name:"rage",unicode:"1f621"},cry:{name:"cry",unicode:"1f622"},persevere:{name:"persevere",unicode:"1f623"},triumph:{name:"triumph",unicode:"1f624"},disappointed_relieved:{name:"disappointed_relieved",unicode:"1f625"},frowning:{name:"frowning",unicode:"1f626"},anguished:{name:"anguished",unicode:"1f627"},fearful:{name:"fearful",unicode:"1f628"},weary:{name:"weary",unicode:"1f629"},sleepy:{name:"sleepy",unicode:"1f62a"},tired_face:{name:"tired_face",unicode:"1f62b"},grimacing:{name:"grimacing",unicode:"1f62c"},sob:{name:"sob",unicode:"1f62d"},open_mouth:{name:"open_mouth",unicode:"1f62e"},hushed:{name:"hushed",unicode:"1f62f"},cold_sweat:{name:"cold_sweat",unicode:"1f630"},scream:{name:"scream",unicode:"1f631"},astonished:{name:"astonished",unicode:"1f632"},flushed:{name:"flushed",unicode:"1f633"},sleeping:{name:"sleeping",unicode:"1f634"},dizzy_face:{name:"dizzy_face",unicode:"1f635"},no_mouth:{name:"no_mouth",unicode:"1f636"},mask:{name:"mask",unicode:"1f637"},smile_cat:{name:"smile_cat",unicode:"1f638"},joy_cat:{name:"joy_cat",unicode:"1f639"},smiley_cat:{name:"smiley_cat",unicode:"1f63a"},heart_eyes_cat:{name:"heart_eyes_cat",unicode:"1f63b"},smirk_cat:{name:"smirk_cat",unicode:"1f63c"},kissing_cat:{name:"kissing_cat",unicode:"1f63d"},pouting_cat:{name:"pouting_cat",unicode:"1f63e"},crying_cat_face:{name:"crying_cat_face",unicode:"1f63f"},scream_cat:{name:"scream_cat",unicode:"1f640"},slightly_frowning_face:{name:"slightly_frowning_face",unicode:"1f641"},slightly_smiling_face:{name:"slightly_smiling_face",unicode:"1f642"},upside_down_face:{name:"upside_down_face",unicode:"1f643"},face_with_rolling_eyes:{name:"face_with_rolling_eyes",unicode:"1f644"},"woman-gesturing-no":{name:"woman-gesturing-no",unicode:"1f645-200d-2640-fe0f",skinVariations:{2:{name:"woman-gesturing-no::skin-tone-2",unicode:"1f645-1f3fb-200d-2640-fe0f"},3:{name:"woman-gesturing-no::skin-tone-3",unicode:"1f645-1f3fc-200d-2640-fe0f"},4:{name:"woman-gesturing-no::skin-tone-4",unicode:"1f645-1f3fd-200d-2640-fe0f"},5:{name:"woman-gesturing-no::skin-tone-5",unicode:"1f645-1f3fe-200d-2640-fe0f"},6:{name:"woman-gesturing-no::skin-tone-6",unicode:"1f645-1f3ff-200d-2640-fe0f"}}},"man-gesturing-no":{name:"man-gesturing-no",unicode:"1f645-200d-2642-fe0f",skinVariations:{2:{name:"man-gesturing-no::skin-tone-2",unicode:"1f645-1f3fb-200d-2642-fe0f"},3:{name:"man-gesturing-no::skin-tone-3",unicode:"1f645-1f3fc-200d-2642-fe0f"},4:{name:"man-gesturing-no::skin-tone-4",unicode:"1f645-1f3fd-200d-2642-fe0f"},5:{name:"man-gesturing-no::skin-tone-5",unicode:"1f645-1f3fe-200d-2642-fe0f"},6:{name:"man-gesturing-no::skin-tone-6",unicode:"1f645-1f3ff-200d-2642-fe0f"}}},no_good:{name:"no_good",unicode:"1f645",skinVariations:{2:{name:"no_good::skin-tone-2",unicode:"1f645-1f3fb"},3:{name:"no_good::skin-tone-3",unicode:"1f645-1f3fc"},4:{name:"no_good::skin-tone-4",unicode:"1f645-1f3fd"},5:{name:"no_good::skin-tone-5",unicode:"1f645-1f3fe"},6:{name:"no_good::skin-tone-6",unicode:"1f645-1f3ff"}}},"woman-gesturing-ok":{name:"woman-gesturing-ok",unicode:"1f646-200d-2640-fe0f",skinVariations:{2:{name:"woman-gesturing-ok::skin-tone-2",unicode:"1f646-1f3fb-200d-2640-fe0f"},3:{name:"woman-gesturing-ok::skin-tone-3",unicode:"1f646-1f3fc-200d-2640-fe0f"},4:{name:"woman-gesturing-ok::skin-tone-4",unicode:"1f646-1f3fd-200d-2640-fe0f"},5:{name:"woman-gesturing-ok::skin-tone-5",unicode:"1f646-1f3fe-200d-2640-fe0f"},6:{name:"woman-gesturing-ok::skin-tone-6",unicode:"1f646-1f3ff-200d-2640-fe0f"}}},"man-gesturing-ok":{name:"man-gesturing-ok",unicode:"1f646-200d-2642-fe0f",skinVariations:{2:{name:"man-gesturing-ok::skin-tone-2",unicode:"1f646-1f3fb-200d-2642-fe0f"},3:{name:"man-gesturing-ok::skin-tone-3",unicode:"1f646-1f3fc-200d-2642-fe0f"},4:{name:"man-gesturing-ok::skin-tone-4",unicode:"1f646-1f3fd-200d-2642-fe0f"},5:{name:"man-gesturing-ok::skin-tone-5",unicode:"1f646-1f3fe-200d-2642-fe0f"},6:{name:"man-gesturing-ok::skin-tone-6",unicode:"1f646-1f3ff-200d-2642-fe0f"}}},ok_woman:{name:"ok_woman",unicode:"1f646",skinVariations:{2:{name:"ok_woman::skin-tone-2",unicode:"1f646-1f3fb"},3:{name:"ok_woman::skin-tone-3",unicode:"1f646-1f3fc"},4:{name:"ok_woman::skin-tone-4",unicode:"1f646-1f3fd"},5:{name:"ok_woman::skin-tone-5",unicode:"1f646-1f3fe"},6:{name:"ok_woman::skin-tone-6",unicode:"1f646-1f3ff"}}},"woman-bowing":{name:"woman-bowing",unicode:"1f647-200d-2640-fe0f",skinVariations:{2:{name:"woman-bowing::skin-tone-2",unicode:"1f647-1f3fb-200d-2640-fe0f"},3:{name:"woman-bowing::skin-tone-3",unicode:"1f647-1f3fc-200d-2640-fe0f"},4:{name:"woman-bowing::skin-tone-4",unicode:"1f647-1f3fd-200d-2640-fe0f"},5:{name:"woman-bowing::skin-tone-5",unicode:"1f647-1f3fe-200d-2640-fe0f"},6:{name:"woman-bowing::skin-tone-6",unicode:"1f647-1f3ff-200d-2640-fe0f"}}},"man-bowing":{name:"man-bowing",unicode:"1f647-200d-2642-fe0f",skinVariations:{2:{name:"man-bowing::skin-tone-2",unicode:"1f647-1f3fb-200d-2642-fe0f"},3:{name:"man-bowing::skin-tone-3",unicode:"1f647-1f3fc-200d-2642-fe0f"},4:{name:"man-bowing::skin-tone-4",unicode:"1f647-1f3fd-200d-2642-fe0f"},5:{name:"man-bowing::skin-tone-5",unicode:"1f647-1f3fe-200d-2642-fe0f"},6:{name:"man-bowing::skin-tone-6",unicode:"1f647-1f3ff-200d-2642-fe0f"}}},bow:{name:"bow",unicode:"1f647",skinVariations:{2:{name:"bow::skin-tone-2",unicode:"1f647-1f3fb"},3:{name:"bow::skin-tone-3",unicode:"1f647-1f3fc"},4:{name:"bow::skin-tone-4",unicode:"1f647-1f3fd"},5:{name:"bow::skin-tone-5",unicode:"1f647-1f3fe"},6:{name:"bow::skin-tone-6",unicode:"1f647-1f3ff"}}},see_no_evil:{name:"see_no_evil",unicode:"1f648"},hear_no_evil:{name:"hear_no_evil",unicode:"1f649"},speak_no_evil:{name:"speak_no_evil",unicode:"1f64a"},"woman-raising-hand":{name:"woman-raising-hand",unicode:"1f64b-200d-2640-fe0f",skinVariations:{2:{name:"woman-raising-hand::skin-tone-2",unicode:"1f64b-1f3fb-200d-2640-fe0f"},3:{name:"woman-raising-hand::skin-tone-3",unicode:"1f64b-1f3fc-200d-2640-fe0f"},4:{name:"woman-raising-hand::skin-tone-4",unicode:"1f64b-1f3fd-200d-2640-fe0f"},5:{name:"woman-raising-hand::skin-tone-5",unicode:"1f64b-1f3fe-200d-2640-fe0f"},6:{name:"woman-raising-hand::skin-tone-6",unicode:"1f64b-1f3ff-200d-2640-fe0f"}}},"man-raising-hand":{name:"man-raising-hand",unicode:"1f64b-200d-2642-fe0f",skinVariations:{2:{name:"man-raising-hand::skin-tone-2",unicode:"1f64b-1f3fb-200d-2642-fe0f"},3:{name:"man-raising-hand::skin-tone-3",unicode:"1f64b-1f3fc-200d-2642-fe0f"},4:{name:"man-raising-hand::skin-tone-4",unicode:"1f64b-1f3fd-200d-2642-fe0f"},5:{name:"man-raising-hand::skin-tone-5",unicode:"1f64b-1f3fe-200d-2642-fe0f"},6:{name:"man-raising-hand::skin-tone-6",unicode:"1f64b-1f3ff-200d-2642-fe0f"}}},raising_hand:{name:"raising_hand",unicode:"1f64b",skinVariations:{2:{name:"raising_hand::skin-tone-2",unicode:"1f64b-1f3fb"},3:{name:"raising_hand::skin-tone-3",unicode:"1f64b-1f3fc"},4:{name:"raising_hand::skin-tone-4",unicode:"1f64b-1f3fd"},5:{name:"raising_hand::skin-tone-5",unicode:"1f64b-1f3fe"},6:{name:"raising_hand::skin-tone-6",unicode:"1f64b-1f3ff"}}},raised_hands:{name:"raised_hands",unicode:"1f64c",skinVariations:{2:{name:"raised_hands::skin-tone-2",unicode:"1f64c-1f3fb"},3:{name:"raised_hands::skin-tone-3",unicode:"1f64c-1f3fc"},4:{name:"raised_hands::skin-tone-4",unicode:"1f64c-1f3fd"},5:{name:"raised_hands::skin-tone-5",unicode:"1f64c-1f3fe"},6:{name:"raised_hands::skin-tone-6",unicode:"1f64c-1f3ff"}}},"woman-frowning":{name:"woman-frowning",unicode:"1f64d-200d-2640-fe0f",skinVariations:{2:{name:"woman-frowning::skin-tone-2",unicode:"1f64d-1f3fb-200d-2640-fe0f"},3:{name:"woman-frowning::skin-tone-3",unicode:"1f64d-1f3fc-200d-2640-fe0f"},4:{name:"woman-frowning::skin-tone-4",unicode:"1f64d-1f3fd-200d-2640-fe0f"},5:{name:"woman-frowning::skin-tone-5",unicode:"1f64d-1f3fe-200d-2640-fe0f"},6:{name:"woman-frowning::skin-tone-6",unicode:"1f64d-1f3ff-200d-2640-fe0f"}}},"man-frowning":{name:"man-frowning",unicode:"1f64d-200d-2642-fe0f",skinVariations:{2:{name:"man-frowning::skin-tone-2",unicode:"1f64d-1f3fb-200d-2642-fe0f"},3:{name:"man-frowning::skin-tone-3",unicode:"1f64d-1f3fc-200d-2642-fe0f"},4:{name:"man-frowning::skin-tone-4",unicode:"1f64d-1f3fd-200d-2642-fe0f"},5:{name:"man-frowning::skin-tone-5",unicode:"1f64d-1f3fe-200d-2642-fe0f"},6:{name:"man-frowning::skin-tone-6",unicode:"1f64d-1f3ff-200d-2642-fe0f"}}},person_frowning:{name:"person_frowning",unicode:"1f64d",skinVariations:{2:{name:"person_frowning::skin-tone-2",unicode:"1f64d-1f3fb"},3:{name:"person_frowning::skin-tone-3",unicode:"1f64d-1f3fc"},4:{name:"person_frowning::skin-tone-4",unicode:"1f64d-1f3fd"},5:{name:"person_frowning::skin-tone-5",unicode:"1f64d-1f3fe"},6:{name:"person_frowning::skin-tone-6",unicode:"1f64d-1f3ff"}}},"woman-pouting":{name:"woman-pouting",unicode:"1f64e-200d-2640-fe0f",skinVariations:{2:{name:"woman-pouting::skin-tone-2",unicode:"1f64e-1f3fb-200d-2640-fe0f"},3:{name:"woman-pouting::skin-tone-3",unicode:"1f64e-1f3fc-200d-2640-fe0f"},4:{name:"woman-pouting::skin-tone-4",unicode:"1f64e-1f3fd-200d-2640-fe0f"},5:{name:"woman-pouting::skin-tone-5",unicode:"1f64e-1f3fe-200d-2640-fe0f"},6:{name:"woman-pouting::skin-tone-6",unicode:"1f64e-1f3ff-200d-2640-fe0f"}}},"man-pouting":{name:"man-pouting",unicode:"1f64e-200d-2642-fe0f",skinVariations:{2:{name:"man-pouting::skin-tone-2",unicode:"1f64e-1f3fb-200d-2642-fe0f"},3:{name:"man-pouting::skin-tone-3",unicode:"1f64e-1f3fc-200d-2642-fe0f"},4:{name:"man-pouting::skin-tone-4",unicode:"1f64e-1f3fd-200d-2642-fe0f"},5:{name:"man-pouting::skin-tone-5",unicode:"1f64e-1f3fe-200d-2642-fe0f"},6:{name:"man-pouting::skin-tone-6",unicode:"1f64e-1f3ff-200d-2642-fe0f"}}},person_with_pouting_face:{name:"person_with_pouting_face",unicode:"1f64e",skinVariations:{2:{name:"person_with_pouting_face::skin-tone-2",unicode:"1f64e-1f3fb"},3:{name:"person_with_pouting_face::skin-tone-3",unicode:"1f64e-1f3fc"},4:{name:"person_with_pouting_face::skin-tone-4",unicode:"1f64e-1f3fd"},5:{name:"person_with_pouting_face::skin-tone-5",unicode:"1f64e-1f3fe"},6:{name:"person_with_pouting_face::skin-tone-6",unicode:"1f64e-1f3ff"}}},pray:{name:"pray",unicode:"1f64f",skinVariations:{2:{name:"pray::skin-tone-2",unicode:"1f64f-1f3fb"},3:{name:"pray::skin-tone-3",unicode:"1f64f-1f3fc"},4:{name:"pray::skin-tone-4",unicode:"1f64f-1f3fd"},5:{name:"pray::skin-tone-5",unicode:"1f64f-1f3fe"},6:{name:"pray::skin-tone-6",unicode:"1f64f-1f3ff"}}},rocket:{name:"rocket",unicode:"1f680"},helicopter:{name:"helicopter",unicode:"1f681"},steam_locomotive:{name:"steam_locomotive",unicode:"1f682"},railway_car:{name:"railway_car",unicode:"1f683"},bullettrain_side:{name:"bullettrain_side",unicode:"1f684"},bullettrain_front:{name:"bullettrain_front",unicode:"1f685"},train2:{name:"train2",unicode:"1f686"},metro:{name:"metro",unicode:"1f687"},light_rail:{name:"light_rail",unicode:"1f688"},station:{name:"station",unicode:"1f689"},tram:{name:"tram",unicode:"1f68a"},train:{name:"train",unicode:"1f68b"},bus:{name:"bus",unicode:"1f68c"},oncoming_bus:{name:"oncoming_bus",unicode:"1f68d"},trolleybus:{name:"trolleybus",unicode:"1f68e"},busstop:{name:"busstop",unicode:"1f68f"},minibus:{name:"minibus",unicode:"1f690"},ambulance:{name:"ambulance",unicode:"1f691"},fire_engine:{name:"fire_engine",unicode:"1f692"},police_car:{name:"police_car",unicode:"1f693"},oncoming_police_car:{name:"oncoming_police_car",unicode:"1f694"},taxi:{name:"taxi",unicode:"1f695"},oncoming_taxi:{name:"oncoming_taxi",unicode:"1f696"},car:{name:"car",unicode:"1f697"},red_car:{name:"red_car",aliasOf:"car",unicode:"1f697"},oncoming_automobile:{name:"oncoming_automobile",unicode:"1f698"},blue_car:{name:"blue_car",unicode:"1f699"},truck:{name:"truck",unicode:"1f69a"},articulated_lorry:{name:"articulated_lorry",unicode:"1f69b"},tractor:{name:"tractor",unicode:"1f69c"},monorail:{name:"monorail",unicode:"1f69d"},mountain_railway:{name:"mountain_railway",unicode:"1f69e"},suspension_railway:{name:"suspension_railway",unicode:"1f69f"},mountain_cableway:{name:"mountain_cableway",unicode:"1f6a0"},aerial_tramway:{name:"aerial_tramway",unicode:"1f6a1"},ship:{name:"ship",unicode:"1f6a2"},"woman-rowing-boat":{name:"woman-rowing-boat",unicode:"1f6a3-200d-2640-fe0f",skinVariations:{2:{name:"woman-rowing-boat::skin-tone-2",unicode:"1f6a3-1f3fb-200d-2640-fe0f"},3:{name:"woman-rowing-boat::skin-tone-3",unicode:"1f6a3-1f3fc-200d-2640-fe0f"},4:{name:"woman-rowing-boat::skin-tone-4",unicode:"1f6a3-1f3fd-200d-2640-fe0f"},5:{name:"woman-rowing-boat::skin-tone-5",unicode:"1f6a3-1f3fe-200d-2640-fe0f"},6:{name:"woman-rowing-boat::skin-tone-6",unicode:"1f6a3-1f3ff-200d-2640-fe0f"}}},"man-rowing-boat":{name:"man-rowing-boat",unicode:"1f6a3-200d-2642-fe0f",skinVariations:{2:{name:"man-rowing-boat::skin-tone-2",unicode:"1f6a3-1f3fb-200d-2642-fe0f"},3:{name:"man-rowing-boat::skin-tone-3",unicode:"1f6a3-1f3fc-200d-2642-fe0f"},4:{name:"man-rowing-boat::skin-tone-4",unicode:"1f6a3-1f3fd-200d-2642-fe0f"},5:{name:"man-rowing-boat::skin-tone-5",unicode:"1f6a3-1f3fe-200d-2642-fe0f"},6:{name:"man-rowing-boat::skin-tone-6",unicode:"1f6a3-1f3ff-200d-2642-fe0f"}}},rowboat:{name:"rowboat",unicode:"1f6a3",skinVariations:{2:{name:"rowboat::skin-tone-2",unicode:"1f6a3-1f3fb"},3:{name:"rowboat::skin-tone-3",unicode:"1f6a3-1f3fc"},4:{name:"rowboat::skin-tone-4",unicode:"1f6a3-1f3fd"},5:{name:"rowboat::skin-tone-5",unicode:"1f6a3-1f3fe"},6:{name:"rowboat::skin-tone-6",unicode:"1f6a3-1f3ff"}}},speedboat:{name:"speedboat",unicode:"1f6a4"},traffic_light:{name:"traffic_light",unicode:"1f6a5"},vertical_traffic_light:{name:"vertical_traffic_light",unicode:"1f6a6"},construction:{name:"construction",unicode:"1f6a7"},rotating_light:{name:"rotating_light",unicode:"1f6a8"},triangular_flag_on_post:{name:"triangular_flag_on_post",unicode:"1f6a9"},door:{name:"door",unicode:"1f6aa"},no_entry_sign:{name:"no_entry_sign",unicode:"1f6ab"},smoking:{name:"smoking",unicode:"1f6ac"},no_smoking:{name:"no_smoking",unicode:"1f6ad"},put_litter_in_its_place:{name:"put_litter_in_its_place",unicode:"1f6ae"},do_not_litter:{name:"do_not_litter",unicode:"1f6af"},potable_water:{name:"potable_water",unicode:"1f6b0"},"non-potable_water":{name:"non-potable_water",unicode:"1f6b1"},bike:{name:"bike",unicode:"1f6b2"},no_bicycles:{name:"no_bicycles",unicode:"1f6b3"},"woman-biking":{name:"woman-biking",unicode:"1f6b4-200d-2640-fe0f",skinVariations:{2:{name:"woman-biking::skin-tone-2",unicode:"1f6b4-1f3fb-200d-2640-fe0f"},3:{name:"woman-biking::skin-tone-3",unicode:"1f6b4-1f3fc-200d-2640-fe0f"},4:{name:"woman-biking::skin-tone-4",unicode:"1f6b4-1f3fd-200d-2640-fe0f"},5:{name:"woman-biking::skin-tone-5",unicode:"1f6b4-1f3fe-200d-2640-fe0f"},6:{name:"woman-biking::skin-tone-6",unicode:"1f6b4-1f3ff-200d-2640-fe0f"}}},"man-biking":{name:"man-biking",unicode:"1f6b4-200d-2642-fe0f",skinVariations:{2:{name:"man-biking::skin-tone-2",unicode:"1f6b4-1f3fb-200d-2642-fe0f"},3:{name:"man-biking::skin-tone-3",unicode:"1f6b4-1f3fc-200d-2642-fe0f"},4:{name:"man-biking::skin-tone-4",unicode:"1f6b4-1f3fd-200d-2642-fe0f"},5:{name:"man-biking::skin-tone-5",unicode:"1f6b4-1f3fe-200d-2642-fe0f"},6:{name:"man-biking::skin-tone-6",unicode:"1f6b4-1f3ff-200d-2642-fe0f"}}},bicyclist:{name:"bicyclist",unicode:"1f6b4",skinVariations:{2:{name:"bicyclist::skin-tone-2",unicode:"1f6b4-1f3fb"},3:{name:"bicyclist::skin-tone-3",unicode:"1f6b4-1f3fc"},4:{name:"bicyclist::skin-tone-4",unicode:"1f6b4-1f3fd"},5:{name:"bicyclist::skin-tone-5",unicode:"1f6b4-1f3fe"},6:{name:"bicyclist::skin-tone-6",unicode:"1f6b4-1f3ff"}}},"woman-mountain-biking":{name:"woman-mountain-biking",unicode:"1f6b5-200d-2640-fe0f",skinVariations:{2:{name:"woman-mountain-biking::skin-tone-2",unicode:"1f6b5-1f3fb-200d-2640-fe0f"},3:{name:"woman-mountain-biking::skin-tone-3",unicode:"1f6b5-1f3fc-200d-2640-fe0f"},4:{name:"woman-mountain-biking::skin-tone-4",unicode:"1f6b5-1f3fd-200d-2640-fe0f"},5:{name:"woman-mountain-biking::skin-tone-5",unicode:"1f6b5-1f3fe-200d-2640-fe0f"},6:{name:"woman-mountain-biking::skin-tone-6",unicode:"1f6b5-1f3ff-200d-2640-fe0f"}}},"man-mountain-biking":{name:"man-mountain-biking",unicode:"1f6b5-200d-2642-fe0f",skinVariations:{2:{name:"man-mountain-biking::skin-tone-2",unicode:"1f6b5-1f3fb-200d-2642-fe0f"},3:{name:"man-mountain-biking::skin-tone-3",unicode:"1f6b5-1f3fc-200d-2642-fe0f"},4:{name:"man-mountain-biking::skin-tone-4",unicode:"1f6b5-1f3fd-200d-2642-fe0f"},5:{name:"man-mountain-biking::skin-tone-5",unicode:"1f6b5-1f3fe-200d-2642-fe0f"},6:{name:"man-mountain-biking::skin-tone-6",unicode:"1f6b5-1f3ff-200d-2642-fe0f"}}},mountain_bicyclist:{name:"mountain_bicyclist",unicode:"1f6b5",skinVariations:{2:{name:"mountain_bicyclist::skin-tone-2",unicode:"1f6b5-1f3fb"},3:{name:"mountain_bicyclist::skin-tone-3",unicode:"1f6b5-1f3fc"},4:{name:"mountain_bicyclist::skin-tone-4",unicode:"1f6b5-1f3fd"},5:{name:"mountain_bicyclist::skin-tone-5",unicode:"1f6b5-1f3fe"},6:{name:"mountain_bicyclist::skin-tone-6",unicode:"1f6b5-1f3ff"}}},"woman-walking":{name:"woman-walking",unicode:"1f6b6-200d-2640-fe0f",skinVariations:{2:{name:"woman-walking::skin-tone-2",unicode:"1f6b6-1f3fb-200d-2640-fe0f"},3:{name:"woman-walking::skin-tone-3",unicode:"1f6b6-1f3fc-200d-2640-fe0f"},4:{name:"woman-walking::skin-tone-4",unicode:"1f6b6-1f3fd-200d-2640-fe0f"},5:{name:"woman-walking::skin-tone-5",unicode:"1f6b6-1f3fe-200d-2640-fe0f"},6:{name:"woman-walking::skin-tone-6",unicode:"1f6b6-1f3ff-200d-2640-fe0f"}}},"man-walking":{name:"man-walking",unicode:"1f6b6-200d-2642-fe0f",skinVariations:{2:{name:"man-walking::skin-tone-2",unicode:"1f6b6-1f3fb-200d-2642-fe0f"},3:{name:"man-walking::skin-tone-3",unicode:"1f6b6-1f3fc-200d-2642-fe0f"},4:{name:"man-walking::skin-tone-4",unicode:"1f6b6-1f3fd-200d-2642-fe0f"},5:{name:"man-walking::skin-tone-5",unicode:"1f6b6-1f3fe-200d-2642-fe0f"},6:{name:"man-walking::skin-tone-6",unicode:"1f6b6-1f3ff-200d-2642-fe0f"}}},walking:{name:"walking",unicode:"1f6b6",skinVariations:{2:{name:"walking::skin-tone-2",unicode:"1f6b6-1f3fb"},3:{name:"walking::skin-tone-3",unicode:"1f6b6-1f3fc"},4:{name:"walking::skin-tone-4",unicode:"1f6b6-1f3fd"},5:{name:"walking::skin-tone-5",unicode:"1f6b6-1f3fe"},6:{name:"walking::skin-tone-6",unicode:"1f6b6-1f3ff"}}},no_pedestrians:{name:"no_pedestrians",unicode:"1f6b7"},children_crossing:{name:"children_crossing",unicode:"1f6b8"},mens:{name:"mens",unicode:"1f6b9"},womens:{name:"womens",unicode:"1f6ba"},restroom:{name:"restroom",unicode:"1f6bb"},baby_symbol:{name:"baby_symbol",unicode:"1f6bc"},toilet:{name:"toilet",unicode:"1f6bd"},wc:{name:"wc",unicode:"1f6be"},shower:{name:"shower",unicode:"1f6bf"},bath:{name:"bath",unicode:"1f6c0",skinVariations:{2:{name:"bath::skin-tone-2",unicode:"1f6c0-1f3fb"},3:{name:"bath::skin-tone-3",unicode:"1f6c0-1f3fc"},4:{name:"bath::skin-tone-4",unicode:"1f6c0-1f3fd"},5:{name:"bath::skin-tone-5",unicode:"1f6c0-1f3fe"},6:{name:"bath::skin-tone-6",unicode:"1f6c0-1f3ff"}}},bathtub:{name:"bathtub",unicode:"1f6c1"},passport_control:{name:"passport_control",unicode:"1f6c2"},customs:{name:"customs",unicode:"1f6c3"},baggage_claim:{name:"baggage_claim",unicode:"1f6c4"},left_luggage:{name:"left_luggage",unicode:"1f6c5"},couch_and_lamp:{name:"couch_and_lamp",unicode:"1f6cb-fe0f"},sleeping_accommodation:{name:"sleeping_accommodation",unicode:"1f6cc",skinVariations:{2:{name:"sleeping_accommodation::skin-tone-2",unicode:"1f6cc-1f3fb"},3:{name:"sleeping_accommodation::skin-tone-3",unicode:"1f6cc-1f3fc"},4:{name:"sleeping_accommodation::skin-tone-4",unicode:"1f6cc-1f3fd"},5:{name:"sleeping_accommodation::skin-tone-5",unicode:"1f6cc-1f3fe"},6:{name:"sleeping_accommodation::skin-tone-6",unicode:"1f6cc-1f3ff"}}},shopping_bags:{name:"shopping_bags",unicode:"1f6cd-fe0f"},bellhop_bell:{name:"bellhop_bell",unicode:"1f6ce-fe0f"},bed:{name:"bed",unicode:"1f6cf-fe0f"},place_of_worship:{name:"place_of_worship",unicode:"1f6d0"},octagonal_sign:{name:"octagonal_sign",unicode:"1f6d1"},shopping_trolley:{name:"shopping_trolley",unicode:"1f6d2"},hammer_and_wrench:{name:"hammer_and_wrench",unicode:"1f6e0-fe0f"},shield:{name:"shield",unicode:"1f6e1-fe0f"},oil_drum:{name:"oil_drum",unicode:"1f6e2-fe0f"},motorway:{name:"motorway",unicode:"1f6e3-fe0f"},railway_track:{name:"railway_track",unicode:"1f6e4-fe0f"},motor_boat:{name:"motor_boat",unicode:"1f6e5-fe0f"},small_airplane:{name:"small_airplane",unicode:"1f6e9-fe0f"},airplane_departure:{name:"airplane_departure",unicode:"1f6eb"},airplane_arriving:{name:"airplane_arriving",unicode:"1f6ec"},satellite:{name:"satellite",unicode:"1f6f0-fe0f"},passenger_ship:{name:"passenger_ship",unicode:"1f6f3-fe0f"},scooter:{name:"scooter",unicode:"1f6f4"},motor_scooter:{name:"motor_scooter",unicode:"1f6f5"},canoe:{name:"canoe",unicode:"1f6f6"},sled:{name:"sled",unicode:"1f6f7"},flying_saucer:{name:"flying_saucer",unicode:"1f6f8"},zipper_mouth_face:{name:"zipper_mouth_face",unicode:"1f910"},money_mouth_face:{name:"money_mouth_face",unicode:"1f911"},face_with_thermometer:{name:"face_with_thermometer",unicode:"1f912"},nerd_face:{name:"nerd_face",unicode:"1f913"},thinking_face:{name:"thinking_face",unicode:"1f914"},face_with_head_bandage:{name:"face_with_head_bandage",unicode:"1f915"},robot_face:{name:"robot_face",unicode:"1f916"},hugging_face:{name:"hugging_face",unicode:"1f917"},the_horns:{name:"the_horns",unicode:"1f918",skinVariations:{2:{name:"the_horns::skin-tone-2",unicode:"1f918-1f3fb"},3:{name:"the_horns::skin-tone-3",unicode:"1f918-1f3fc"},4:{name:"the_horns::skin-tone-4",unicode:"1f918-1f3fd"},5:{name:"the_horns::skin-tone-5",unicode:"1f918-1f3fe"},6:{name:"the_horns::skin-tone-6",unicode:"1f918-1f3ff"}}},sign_of_the_horns:{name:"sign_of_the_horns",aliasOf:"the_horns",unicode:"1f918",skinVariations:{2:{name:"sign_of_the_horns::skin-tone-2",unicode:"1f918-1f3fb"},3:{name:"sign_of_the_horns::skin-tone-3",unicode:"1f918-1f3fc"},4:{name:"sign_of_the_horns::skin-tone-4",unicode:"1f918-1f3fd"},5:{name:"sign_of_the_horns::skin-tone-5",unicode:"1f918-1f3fe"},6:{name:"sign_of_the_horns::skin-tone-6",unicode:"1f918-1f3ff"}}},call_me_hand:{name:"call_me_hand",unicode:"1f919",skinVariations:{2:{name:"call_me_hand::skin-tone-2",unicode:"1f919-1f3fb"},3:{name:"call_me_hand::skin-tone-3",unicode:"1f919-1f3fc"},4:{name:"call_me_hand::skin-tone-4",unicode:"1f919-1f3fd"},5:{name:"call_me_hand::skin-tone-5",unicode:"1f919-1f3fe"},6:{name:"call_me_hand::skin-tone-6",unicode:"1f919-1f3ff"}}},raised_back_of_hand:{name:"raised_back_of_hand",unicode:"1f91a",skinVariations:{2:{name:"raised_back_of_hand::skin-tone-2",unicode:"1f91a-1f3fb"},3:{name:"raised_back_of_hand::skin-tone-3",unicode:"1f91a-1f3fc"},4:{name:"raised_back_of_hand::skin-tone-4",unicode:"1f91a-1f3fd"},5:{name:"raised_back_of_hand::skin-tone-5",unicode:"1f91a-1f3fe"},6:{name:"raised_back_of_hand::skin-tone-6",unicode:"1f91a-1f3ff"}}},"left-facing_fist":{name:"left-facing_fist",unicode:"1f91b",skinVariations:{2:{name:"left-facing_fist::skin-tone-2",unicode:"1f91b-1f3fb"},3:{name:"left-facing_fist::skin-tone-3",unicode:"1f91b-1f3fc"},4:{name:"left-facing_fist::skin-tone-4",unicode:"1f91b-1f3fd"},5:{name:"left-facing_fist::skin-tone-5",unicode:"1f91b-1f3fe"},6:{name:"left-facing_fist::skin-tone-6",unicode:"1f91b-1f3ff"}}},"right-facing_fist":{name:"right-facing_fist",unicode:"1f91c",skinVariations:{2:{name:"right-facing_fist::skin-tone-2",unicode:"1f91c-1f3fb"},3:{name:"right-facing_fist::skin-tone-3",unicode:"1f91c-1f3fc"},4:{name:"right-facing_fist::skin-tone-4",unicode:"1f91c-1f3fd"},5:{name:"right-facing_fist::skin-tone-5",unicode:"1f91c-1f3fe"},6:{name:"right-facing_fist::skin-tone-6",unicode:"1f91c-1f3ff"}}},handshake:{name:"handshake",unicode:"1f91d"},crossed_fingers:{name:"crossed_fingers",unicode:"1f91e",skinVariations:{2:{name:"crossed_fingers::skin-tone-2",unicode:"1f91e-1f3fb"},3:{name:"crossed_fingers::skin-tone-3",unicode:"1f91e-1f3fc"},4:{name:"crossed_fingers::skin-tone-4",unicode:"1f91e-1f3fd"},5:{name:"crossed_fingers::skin-tone-5",unicode:"1f91e-1f3fe"},6:{name:"crossed_fingers::skin-tone-6",unicode:"1f91e-1f3ff"}}},hand_with_index_and_middle_fingers_crossed:{name:"hand_with_index_and_middle_fingers_crossed",aliasOf:"crossed_fingers",unicode:"1f91e",skinVariations:{2:{name:"hand_with_index_and_middle_fingers_crossed::skin-tone-2",unicode:"1f91e-1f3fb"},3:{name:"hand_with_index_and_middle_fingers_crossed::skin-tone-3",unicode:"1f91e-1f3fc"},4:{name:"hand_with_index_and_middle_fingers_crossed::skin-tone-4",unicode:"1f91e-1f3fd"},5:{name:"hand_with_index_and_middle_fingers_crossed::skin-tone-5",unicode:"1f91e-1f3fe"},6:{name:"hand_with_index_and_middle_fingers_crossed::skin-tone-6",unicode:"1f91e-1f3ff"}}},i_love_you_hand_sign:{name:"i_love_you_hand_sign",unicode:"1f91f",skinVariations:{2:{name:"i_love_you_hand_sign::skin-tone-2",unicode:"1f91f-1f3fb"},3:{name:"i_love_you_hand_sign::skin-tone-3",unicode:"1f91f-1f3fc"},4:{name:"i_love_you_hand_sign::skin-tone-4",unicode:"1f91f-1f3fd"},5:{name:"i_love_you_hand_sign::skin-tone-5",unicode:"1f91f-1f3fe"},6:{name:"i_love_you_hand_sign::skin-tone-6",unicode:"1f91f-1f3ff"}}},face_with_cowboy_hat:{name:"face_with_cowboy_hat",unicode:"1f920"},clown_face:{name:"clown_face",unicode:"1f921"},nauseated_face:{name:"nauseated_face",unicode:"1f922"},rolling_on_the_floor_laughing:{name:"rolling_on_the_floor_laughing",unicode:"1f923"},drooling_face:{name:"drooling_face",unicode:"1f924"},lying_face:{name:"lying_face",unicode:"1f925"},"woman-facepalming":{name:"woman-facepalming",unicode:"1f926-200d-2640-fe0f",skinVariations:{2:{name:"woman-facepalming::skin-tone-2",unicode:"1f926-1f3fb-200d-2640-fe0f"},3:{name:"woman-facepalming::skin-tone-3",unicode:"1f926-1f3fc-200d-2640-fe0f"},4:{name:"woman-facepalming::skin-tone-4",unicode:"1f926-1f3fd-200d-2640-fe0f"},5:{name:"woman-facepalming::skin-tone-5",unicode:"1f926-1f3fe-200d-2640-fe0f"},6:{name:"woman-facepalming::skin-tone-6",unicode:"1f926-1f3ff-200d-2640-fe0f"}}},"man-facepalming":{name:"man-facepalming",unicode:"1f926-200d-2642-fe0f",skinVariations:{2:{name:"man-facepalming::skin-tone-2",unicode:"1f926-1f3fb-200d-2642-fe0f"},3:{name:"man-facepalming::skin-tone-3",unicode:"1f926-1f3fc-200d-2642-fe0f"},4:{name:"man-facepalming::skin-tone-4",unicode:"1f926-1f3fd-200d-2642-fe0f"},5:{name:"man-facepalming::skin-tone-5",unicode:"1f926-1f3fe-200d-2642-fe0f"},6:{name:"man-facepalming::skin-tone-6",unicode:"1f926-1f3ff-200d-2642-fe0f"}}},face_palm:{name:"face_palm",unicode:"1f926",skinVariations:{2:{name:"face_palm::skin-tone-2",unicode:"1f926-1f3fb"},3:{name:"face_palm::skin-tone-3",unicode:"1f926-1f3fc"},4:{name:"face_palm::skin-tone-4",unicode:"1f926-1f3fd"},5:{name:"face_palm::skin-tone-5",unicode:"1f926-1f3fe"},6:{name:"face_palm::skin-tone-6",unicode:"1f926-1f3ff"}}},sneezing_face:{name:"sneezing_face",unicode:"1f927"},face_with_raised_eyebrow:{name:"face_with_raised_eyebrow",unicode:"1f928"},face_with_one_eyebrow_raised:{name:"face_with_one_eyebrow_raised",aliasOf:"face_with_raised_eyebrow",unicode:"1f928"},"star-struck":{name:"star-struck",unicode:"1f929"},grinning_face_with_star_eyes:{name:"grinning_face_with_star_eyes",aliasOf:"star-struck",unicode:"1f929"},zany_face:{name:"zany_face",unicode:"1f92a"},grinning_face_with_one_large_and_one_small_eye:{name:"grinning_face_with_one_large_and_one_small_eye",aliasOf:"zany_face",unicode:"1f92a"},shushing_face:{name:"shushing_face",unicode:"1f92b"},face_with_finger_covering_closed_lips:{name:"face_with_finger_covering_closed_lips",aliasOf:"shushing_face",unicode:"1f92b"},face_with_symbols_on_mouth:{name:"face_with_symbols_on_mouth",unicode:"1f92c"},serious_face_with_symbols_covering_mouth:{name:"serious_face_with_symbols_covering_mouth",aliasOf:"face_with_symbols_on_mouth",unicode:"1f92c"},face_with_hand_over_mouth:{name:"face_with_hand_over_mouth",unicode:"1f92d"},smiling_face_with_smiling_eyes_and_hand_covering_mouth:{name:"smiling_face_with_smiling_eyes_and_hand_covering_mouth",aliasOf:"face_with_hand_over_mouth",unicode:"1f92d"},face_vomiting:{name:"face_vomiting",unicode:"1f92e"},face_with_open_mouth_vomiting:{name:"face_with_open_mouth_vomiting",aliasOf:"face_vomiting",unicode:"1f92e"},exploding_head:{name:"exploding_head",unicode:"1f92f"},shocked_face_with_exploding_head:{name:"shocked_face_with_exploding_head",aliasOf:"exploding_head",unicode:"1f92f"},pregnant_woman:{name:"pregnant_woman",unicode:"1f930",skinVariations:{2:{name:"pregnant_woman::skin-tone-2",unicode:"1f930-1f3fb"},3:{name:"pregnant_woman::skin-tone-3",unicode:"1f930-1f3fc"},4:{name:"pregnant_woman::skin-tone-4",unicode:"1f930-1f3fd"},5:{name:"pregnant_woman::skin-tone-5",unicode:"1f930-1f3fe"},6:{name:"pregnant_woman::skin-tone-6",unicode:"1f930-1f3ff"}}},"breast-feeding":{name:"breast-feeding",unicode:"1f931",skinVariations:{2:{name:"breast-feeding::skin-tone-2",unicode:"1f931-1f3fb"},3:{name:"breast-feeding::skin-tone-3",unicode:"1f931-1f3fc"},4:{name:"breast-feeding::skin-tone-4",unicode:"1f931-1f3fd"},5:{name:"breast-feeding::skin-tone-5",unicode:"1f931-1f3fe"},6:{name:"breast-feeding::skin-tone-6",unicode:"1f931-1f3ff"}}},palms_up_together:{name:"palms_up_together",unicode:"1f932",skinVariations:{2:{name:"palms_up_together::skin-tone-2",unicode:"1f932-1f3fb"},3:{name:"palms_up_together::skin-tone-3",unicode:"1f932-1f3fc"},4:{name:"palms_up_together::skin-tone-4",unicode:"1f932-1f3fd"},5:{name:"palms_up_together::skin-tone-5",unicode:"1f932-1f3fe"},6:{name:"palms_up_together::skin-tone-6",unicode:"1f932-1f3ff"}}},selfie:{name:"selfie",unicode:"1f933",skinVariations:{2:{name:"selfie::skin-tone-2",unicode:"1f933-1f3fb"},3:{name:"selfie::skin-tone-3",unicode:"1f933-1f3fc"},4:{name:"selfie::skin-tone-4",unicode:"1f933-1f3fd"},5:{name:"selfie::skin-tone-5",unicode:"1f933-1f3fe"},6:{name:"selfie::skin-tone-6",unicode:"1f933-1f3ff"}}},prince:{name:"prince",unicode:"1f934",skinVariations:{2:{name:"prince::skin-tone-2",unicode:"1f934-1f3fb"},3:{name:"prince::skin-tone-3",unicode:"1f934-1f3fc"},4:{name:"prince::skin-tone-4",unicode:"1f934-1f3fd"},5:{name:"prince::skin-tone-5",unicode:"1f934-1f3fe"},6:{name:"prince::skin-tone-6",unicode:"1f934-1f3ff"}}},man_in_tuxedo:{name:"man_in_tuxedo",unicode:"1f935",skinVariations:{2:{name:"man_in_tuxedo::skin-tone-2",unicode:"1f935-1f3fb"},3:{name:"man_in_tuxedo::skin-tone-3",unicode:"1f935-1f3fc"},4:{name:"man_in_tuxedo::skin-tone-4",unicode:"1f935-1f3fd"},5:{name:"man_in_tuxedo::skin-tone-5",unicode:"1f935-1f3fe"},6:{name:"man_in_tuxedo::skin-tone-6",unicode:"1f935-1f3ff"}}},mrs_claus:{name:"mrs_claus",unicode:"1f936",skinVariations:{2:{name:"mrs_claus::skin-tone-2",unicode:"1f936-1f3fb"},3:{name:"mrs_claus::skin-tone-3",unicode:"1f936-1f3fc"},4:{name:"mrs_claus::skin-tone-4",unicode:"1f936-1f3fd"},5:{name:"mrs_claus::skin-tone-5",unicode:"1f936-1f3fe"},6:{name:"mrs_claus::skin-tone-6",unicode:"1f936-1f3ff"}}},mother_christmas:{name:"mother_christmas",aliasOf:"mrs_claus",unicode:"1f936",skinVariations:{2:{name:"mother_christmas::skin-tone-2",unicode:"1f936-1f3fb"},3:{name:"mother_christmas::skin-tone-3",unicode:"1f936-1f3fc"},4:{name:"mother_christmas::skin-tone-4",unicode:"1f936-1f3fd"},5:{name:"mother_christmas::skin-tone-5",unicode:"1f936-1f3fe"},6:{name:"mother_christmas::skin-tone-6",unicode:"1f936-1f3ff"}}},"woman-shrugging":{name:"woman-shrugging",unicode:"1f937-200d-2640-fe0f",skinVariations:{2:{name:"woman-shrugging::skin-tone-2",unicode:"1f937-1f3fb-200d-2640-fe0f"},3:{name:"woman-shrugging::skin-tone-3",unicode:"1f937-1f3fc-200d-2640-fe0f"},4:{name:"woman-shrugging::skin-tone-4",unicode:"1f937-1f3fd-200d-2640-fe0f"},5:{name:"woman-shrugging::skin-tone-5",unicode:"1f937-1f3fe-200d-2640-fe0f"},6:{name:"woman-shrugging::skin-tone-6",unicode:"1f937-1f3ff-200d-2640-fe0f"}}},"man-shrugging":{name:"man-shrugging",unicode:"1f937-200d-2642-fe0f",skinVariations:{2:{name:"man-shrugging::skin-tone-2",unicode:"1f937-1f3fb-200d-2642-fe0f"},3:{name:"man-shrugging::skin-tone-3",unicode:"1f937-1f3fc-200d-2642-fe0f"},4:{name:"man-shrugging::skin-tone-4",unicode:"1f937-1f3fd-200d-2642-fe0f"},5:{name:"man-shrugging::skin-tone-5",unicode:"1f937-1f3fe-200d-2642-fe0f"},6:{name:"man-shrugging::skin-tone-6",unicode:"1f937-1f3ff-200d-2642-fe0f"}}},shrug:{name:"shrug",unicode:"1f937",skinVariations:{2:{name:"shrug::skin-tone-2",unicode:"1f937-1f3fb"},3:{name:"shrug::skin-tone-3",unicode:"1f937-1f3fc"},4:{name:"shrug::skin-tone-4",unicode:"1f937-1f3fd"},5:{name:"shrug::skin-tone-5",unicode:"1f937-1f3fe"},6:{name:"shrug::skin-tone-6",unicode:"1f937-1f3ff"}}},"woman-cartwheeling":{name:"woman-cartwheeling",unicode:"1f938-200d-2640-fe0f",skinVariations:{2:{name:"woman-cartwheeling::skin-tone-2",unicode:"1f938-1f3fb-200d-2640-fe0f"},3:{name:"woman-cartwheeling::skin-tone-3",unicode:"1f938-1f3fc-200d-2640-fe0f"},4:{name:"woman-cartwheeling::skin-tone-4",unicode:"1f938-1f3fd-200d-2640-fe0f"},5:{name:"woman-cartwheeling::skin-tone-5",unicode:"1f938-1f3fe-200d-2640-fe0f"},6:{name:"woman-cartwheeling::skin-tone-6",unicode:"1f938-1f3ff-200d-2640-fe0f"}}},"man-cartwheeling":{name:"man-cartwheeling",unicode:"1f938-200d-2642-fe0f",skinVariations:{2:{name:"man-cartwheeling::skin-tone-2",unicode:"1f938-1f3fb-200d-2642-fe0f"},3:{name:"man-cartwheeling::skin-tone-3",unicode:"1f938-1f3fc-200d-2642-fe0f"},4:{name:"man-cartwheeling::skin-tone-4",unicode:"1f938-1f3fd-200d-2642-fe0f"},5:{name:"man-cartwheeling::skin-tone-5",unicode:"1f938-1f3fe-200d-2642-fe0f"},6:{name:"man-cartwheeling::skin-tone-6",unicode:"1f938-1f3ff-200d-2642-fe0f"}}},person_doing_cartwheel:{name:"person_doing_cartwheel",unicode:"1f938",skinVariations:{2:{name:"person_doing_cartwheel::skin-tone-2",unicode:"1f938-1f3fb"},3:{name:"person_doing_cartwheel::skin-tone-3",unicode:"1f938-1f3fc"},4:{name:"person_doing_cartwheel::skin-tone-4",unicode:"1f938-1f3fd"},5:{name:"person_doing_cartwheel::skin-tone-5",unicode:"1f938-1f3fe"},6:{name:"person_doing_cartwheel::skin-tone-6",unicode:"1f938-1f3ff"}}},"woman-juggling":{name:"woman-juggling",unicode:"1f939-200d-2640-fe0f",skinVariations:{2:{name:"woman-juggling::skin-tone-2",unicode:"1f939-1f3fb-200d-2640-fe0f"},3:{name:"woman-juggling::skin-tone-3",unicode:"1f939-1f3fc-200d-2640-fe0f"},4:{name:"woman-juggling::skin-tone-4",unicode:"1f939-1f3fd-200d-2640-fe0f"},5:{name:"woman-juggling::skin-tone-5",unicode:"1f939-1f3fe-200d-2640-fe0f"},6:{name:"woman-juggling::skin-tone-6",unicode:"1f939-1f3ff-200d-2640-fe0f"}}},"man-juggling":{name:"man-juggling",unicode:"1f939-200d-2642-fe0f",skinVariations:{2:{name:"man-juggling::skin-tone-2",unicode:"1f939-1f3fb-200d-2642-fe0f"},3:{name:"man-juggling::skin-tone-3",unicode:"1f939-1f3fc-200d-2642-fe0f"},4:{name:"man-juggling::skin-tone-4",unicode:"1f939-1f3fd-200d-2642-fe0f"},5:{name:"man-juggling::skin-tone-5",unicode:"1f939-1f3fe-200d-2642-fe0f"},6:{name:"man-juggling::skin-tone-6",unicode:"1f939-1f3ff-200d-2642-fe0f"}}},juggling:{name:"juggling",unicode:"1f939",skinVariations:{2:{name:"juggling::skin-tone-2",unicode:"1f939-1f3fb"},3:{name:"juggling::skin-tone-3",unicode:"1f939-1f3fc"},4:{name:"juggling::skin-tone-4",unicode:"1f939-1f3fd"},5:{name:"juggling::skin-tone-5",unicode:"1f939-1f3fe"},6:{name:"juggling::skin-tone-6",unicode:"1f939-1f3ff"}}},fencer:{name:"fencer",unicode:"1f93a"},"woman-wrestling":{name:"woman-wrestling",unicode:"1f93c-200d-2640-fe0f"},"man-wrestling":{name:"man-wrestling",unicode:"1f93c-200d-2642-fe0f"},wrestlers:{name:"wrestlers",unicode:"1f93c"},"woman-playing-water-polo":{name:"woman-playing-water-polo",unicode:"1f93d-200d-2640-fe0f",skinVariations:{2:{name:"woman-playing-water-polo::skin-tone-2",unicode:"1f93d-1f3fb-200d-2640-fe0f"},3:{name:"woman-playing-water-polo::skin-tone-3",unicode:"1f93d-1f3fc-200d-2640-fe0f"},4:{name:"woman-playing-water-polo::skin-tone-4",unicode:"1f93d-1f3fd-200d-2640-fe0f"},5:{name:"woman-playing-water-polo::skin-tone-5",unicode:"1f93d-1f3fe-200d-2640-fe0f"},6:{name:"woman-playing-water-polo::skin-tone-6",unicode:"1f93d-1f3ff-200d-2640-fe0f"}}},"man-playing-water-polo":{name:"man-playing-water-polo",unicode:"1f93d-200d-2642-fe0f",skinVariations:{2:{name:"man-playing-water-polo::skin-tone-2",unicode:"1f93d-1f3fb-200d-2642-fe0f"},3:{name:"man-playing-water-polo::skin-tone-3",unicode:"1f93d-1f3fc-200d-2642-fe0f"},4:{name:"man-playing-water-polo::skin-tone-4",unicode:"1f93d-1f3fd-200d-2642-fe0f"},5:{name:"man-playing-water-polo::skin-tone-5",unicode:"1f93d-1f3fe-200d-2642-fe0f"},6:{name:"man-playing-water-polo::skin-tone-6",unicode:"1f93d-1f3ff-200d-2642-fe0f"}}},water_polo:{name:"water_polo",unicode:"1f93d",skinVariations:{2:{name:"water_polo::skin-tone-2",unicode:"1f93d-1f3fb"},3:{name:"water_polo::skin-tone-3",unicode:"1f93d-1f3fc"},4:{name:"water_polo::skin-tone-4",unicode:"1f93d-1f3fd"},5:{name:"water_polo::skin-tone-5",unicode:"1f93d-1f3fe"},6:{name:"water_polo::skin-tone-6",unicode:"1f93d-1f3ff"}}},"woman-playing-handball":{name:"woman-playing-handball",unicode:"1f93e-200d-2640-fe0f",skinVariations:{2:{name:"woman-playing-handball::skin-tone-2",unicode:"1f93e-1f3fb-200d-2640-fe0f"},3:{name:"woman-playing-handball::skin-tone-3",unicode:"1f93e-1f3fc-200d-2640-fe0f"},4:{name:"woman-playing-handball::skin-tone-4",unicode:"1f93e-1f3fd-200d-2640-fe0f"},5:{name:"woman-playing-handball::skin-tone-5",unicode:"1f93e-1f3fe-200d-2640-fe0f"},6:{name:"woman-playing-handball::skin-tone-6",unicode:"1f93e-1f3ff-200d-2640-fe0f"}}},"man-playing-handball":{name:"man-playing-handball",unicode:"1f93e-200d-2642-fe0f",skinVariations:{2:{name:"man-playing-handball::skin-tone-2",unicode:"1f93e-1f3fb-200d-2642-fe0f"},3:{name:"man-playing-handball::skin-tone-3",unicode:"1f93e-1f3fc-200d-2642-fe0f"},4:{name:"man-playing-handball::skin-tone-4",unicode:"1f93e-1f3fd-200d-2642-fe0f"},5:{name:"man-playing-handball::skin-tone-5",unicode:"1f93e-1f3fe-200d-2642-fe0f"},6:{name:"man-playing-handball::skin-tone-6",unicode:"1f93e-1f3ff-200d-2642-fe0f"}}},handball:{name:"handball",unicode:"1f93e",skinVariations:{2:{name:"handball::skin-tone-2",unicode:"1f93e-1f3fb"},3:{name:"handball::skin-tone-3",unicode:"1f93e-1f3fc"},4:{name:"handball::skin-tone-4",unicode:"1f93e-1f3fd"},5:{name:"handball::skin-tone-5",unicode:"1f93e-1f3fe"},6:{name:"handball::skin-tone-6",unicode:"1f93e-1f3ff"}}},wilted_flower:{name:"wilted_flower",unicode:"1f940"},drum_with_drumsticks:{name:"drum_with_drumsticks",unicode:"1f941"},clinking_glasses:{name:"clinking_glasses",unicode:"1f942"},tumbler_glass:{name:"tumbler_glass",unicode:"1f943"},spoon:{name:"spoon",unicode:"1f944"},goal_net:{name:"goal_net",unicode:"1f945"},first_place_medal:{name:"first_place_medal",unicode:"1f947"},second_place_medal:{name:"second_place_medal",unicode:"1f948"},third_place_medal:{name:"third_place_medal",unicode:"1f949"},boxing_glove:{name:"boxing_glove",unicode:"1f94a"},martial_arts_uniform:{name:"martial_arts_uniform",unicode:"1f94b"},curling_stone:{name:"curling_stone",unicode:"1f94c"},croissant:{name:"croissant",unicode:"1f950"},avocado:{name:"avocado",unicode:"1f951"},cucumber:{name:"cucumber",unicode:"1f952"},bacon:{name:"bacon",unicode:"1f953"},potato:{name:"potato",unicode:"1f954"},carrot:{name:"carrot",unicode:"1f955"},baguette_bread:{name:"baguette_bread",unicode:"1f956"},green_salad:{name:"green_salad",unicode:"1f957"},shallow_pan_of_food:{name:"shallow_pan_of_food",unicode:"1f958"},stuffed_flatbread:{name:"stuffed_flatbread",unicode:"1f959"},egg:{name:"egg",unicode:"1f95a"},glass_of_milk:{name:"glass_of_milk",unicode:"1f95b"},peanuts:{name:"peanuts",unicode:"1f95c"},kiwifruit:{name:"kiwifruit",unicode:"1f95d"},pancakes:{name:"pancakes",unicode:"1f95e"},dumpling:{name:"dumpling",unicode:"1f95f"},fortune_cookie:{name:"fortune_cookie",unicode:"1f960"},takeout_box:{name:"takeout_box",unicode:"1f961"},chopsticks:{name:"chopsticks",unicode:"1f962"},bowl_with_spoon:{name:"bowl_with_spoon",unicode:"1f963"},cup_with_straw:{name:"cup_with_straw",unicode:"1f964"},coconut:{name:"coconut",unicode:"1f965"},broccoli:{name:"broccoli",unicode:"1f966"},pie:{name:"pie",unicode:"1f967"},pretzel:{name:"pretzel",unicode:"1f968"},cut_of_meat:{name:"cut_of_meat",unicode:"1f969"},sandwich:{name:"sandwich",unicode:"1f96a"},canned_food:{name:"canned_food",unicode:"1f96b"},crab:{name:"crab",unicode:"1f980"},lion_face:{name:"lion_face",unicode:"1f981"},scorpion:{name:"scorpion",unicode:"1f982"},turkey:{name:"turkey",unicode:"1f983"},unicorn_face:{name:"unicorn_face",unicode:"1f984"},eagle:{name:"eagle",unicode:"1f985"},duck:{name:"duck",unicode:"1f986"},bat:{name:"bat",unicode:"1f987"},shark:{name:"shark",unicode:"1f988"},owl:{name:"owl",unicode:"1f989"},fox_face:{name:"fox_face",unicode:"1f98a"},butterfly:{name:"butterfly",unicode:"1f98b"},deer:{name:"deer",unicode:"1f98c"},gorilla:{name:"gorilla",unicode:"1f98d"},lizard:{name:"lizard",unicode:"1f98e"},rhinoceros:{name:"rhinoceros",unicode:"1f98f"},shrimp:{name:"shrimp",unicode:"1f990"},squid:{name:"squid",unicode:"1f991"},giraffe_face:{name:"giraffe_face",unicode:"1f992"},zebra_face:{name:"zebra_face",unicode:"1f993"},hedgehog:{name:"hedgehog",unicode:"1f994"},sauropod:{name:"sauropod",unicode:"1f995"},"t-rex":{name:"t-rex",unicode:"1f996"},cricket:{name:"cricket",unicode:"1f997"},cheese_wedge:{name:"cheese_wedge",unicode:"1f9c0"},face_with_monocle:{name:"face_with_monocle",unicode:"1f9d0"},adult:{name:"adult",unicode:"1f9d1",skinVariations:{2:{name:"adult::skin-tone-2",unicode:"1f9d1-1f3fb"},3:{name:"adult::skin-tone-3",unicode:"1f9d1-1f3fc"},4:{name:"adult::skin-tone-4",unicode:"1f9d1-1f3fd"},5:{name:"adult::skin-tone-5",unicode:"1f9d1-1f3fe"},6:{name:"adult::skin-tone-6",unicode:"1f9d1-1f3ff"}}},child:{name:"child",unicode:"1f9d2",skinVariations:{2:{name:"child::skin-tone-2",unicode:"1f9d2-1f3fb"},3:{name:"child::skin-tone-3",unicode:"1f9d2-1f3fc"},4:{name:"child::skin-tone-4",unicode:"1f9d2-1f3fd"},5:{name:"child::skin-tone-5",unicode:"1f9d2-1f3fe"},6:{name:"child::skin-tone-6",unicode:"1f9d2-1f3ff"}}},older_adult:{name:"older_adult",unicode:"1f9d3",skinVariations:{2:{name:"older_adult::skin-tone-2",unicode:"1f9d3-1f3fb"},3:{name:"older_adult::skin-tone-3",unicode:"1f9d3-1f3fc"},4:{name:"older_adult::skin-tone-4",unicode:"1f9d3-1f3fd"},5:{name:"older_adult::skin-tone-5",unicode:"1f9d3-1f3fe"},6:{name:"older_adult::skin-tone-6",unicode:"1f9d3-1f3ff"}}},bearded_person:{name:"bearded_person",unicode:"1f9d4",skinVariations:{2:{name:"bearded_person::skin-tone-2",unicode:"1f9d4-1f3fb"},3:{name:"bearded_person::skin-tone-3",unicode:"1f9d4-1f3fc"},4:{name:"bearded_person::skin-tone-4",unicode:"1f9d4-1f3fd"},5:{name:"bearded_person::skin-tone-5",unicode:"1f9d4-1f3fe"},6:{name:"bearded_person::skin-tone-6",unicode:"1f9d4-1f3ff"}}},person_with_headscarf:{name:"person_with_headscarf",unicode:"1f9d5",skinVariations:{2:{name:"person_with_headscarf::skin-tone-2",unicode:"1f9d5-1f3fb"},3:{name:"person_with_headscarf::skin-tone-3",unicode:"1f9d5-1f3fc"},4:{name:"person_with_headscarf::skin-tone-4",unicode:"1f9d5-1f3fd"},5:{name:"person_with_headscarf::skin-tone-5",unicode:"1f9d5-1f3fe"},6:{name:"person_with_headscarf::skin-tone-6",unicode:"1f9d5-1f3ff"}}},woman_in_steamy_room:{name:"woman_in_steamy_room",unicode:"1f9d6-200d-2640-fe0f",skinVariations:{2:{name:"woman_in_steamy_room::skin-tone-2",unicode:"1f9d6-1f3fb-200d-2640-fe0f"},3:{name:"woman_in_steamy_room::skin-tone-3",unicode:"1f9d6-1f3fc-200d-2640-fe0f"},4:{name:"woman_in_steamy_room::skin-tone-4",unicode:"1f9d6-1f3fd-200d-2640-fe0f"},5:{name:"woman_in_steamy_room::skin-tone-5",unicode:"1f9d6-1f3fe-200d-2640-fe0f"},6:{name:"woman_in_steamy_room::skin-tone-6",unicode:"1f9d6-1f3ff-200d-2640-fe0f"}}},man_in_steamy_room:{name:"man_in_steamy_room",unicode:"1f9d6-200d-2642-fe0f",skinVariations:{2:{name:"man_in_steamy_room::skin-tone-2",unicode:"1f9d6-1f3fb-200d-2642-fe0f"},3:{name:"man_in_steamy_room::skin-tone-3",unicode:"1f9d6-1f3fc-200d-2642-fe0f"},4:{name:"man_in_steamy_room::skin-tone-4",unicode:"1f9d6-1f3fd-200d-2642-fe0f"},5:{name:"man_in_steamy_room::skin-tone-5",unicode:"1f9d6-1f3fe-200d-2642-fe0f"},6:{name:"man_in_steamy_room::skin-tone-6",unicode:"1f9d6-1f3ff-200d-2642-fe0f"}}},person_in_steamy_room:{name:"person_in_steamy_room",unicode:"1f9d6",skinVariations:{2:{name:"person_in_steamy_room::skin-tone-2",unicode:"1f9d6-1f3fb"},3:{name:"person_in_steamy_room::skin-tone-3",unicode:"1f9d6-1f3fc"},4:{name:"person_in_steamy_room::skin-tone-4",unicode:"1f9d6-1f3fd"},5:{name:"person_in_steamy_room::skin-tone-5",unicode:"1f9d6-1f3fe"},6:{name:"person_in_steamy_room::skin-tone-6",unicode:"1f9d6-1f3ff"}}},woman_climbing:{name:"woman_climbing",unicode:"1f9d7-200d-2640-fe0f",skinVariations:{2:{name:"woman_climbing::skin-tone-2",unicode:"1f9d7-1f3fb-200d-2640-fe0f"},3:{name:"woman_climbing::skin-tone-3",unicode:"1f9d7-1f3fc-200d-2640-fe0f"},4:{name:"woman_climbing::skin-tone-4",unicode:"1f9d7-1f3fd-200d-2640-fe0f"},5:{name:"woman_climbing::skin-tone-5",unicode:"1f9d7-1f3fe-200d-2640-fe0f"},6:{name:"woman_climbing::skin-tone-6",unicode:"1f9d7-1f3ff-200d-2640-fe0f"}}},man_climbing:{name:"man_climbing",unicode:"1f9d7-200d-2642-fe0f",skinVariations:{2:{name:"man_climbing::skin-tone-2",unicode:"1f9d7-1f3fb-200d-2642-fe0f"},3:{name:"man_climbing::skin-tone-3",unicode:"1f9d7-1f3fc-200d-2642-fe0f"},4:{name:"man_climbing::skin-tone-4",unicode:"1f9d7-1f3fd-200d-2642-fe0f"},5:{name:"man_climbing::skin-tone-5",unicode:"1f9d7-1f3fe-200d-2642-fe0f"},6:{name:"man_climbing::skin-tone-6",unicode:"1f9d7-1f3ff-200d-2642-fe0f"}}},person_climbing:{name:"person_climbing",unicode:"1f9d7",skinVariations:{2:{name:"person_climbing::skin-tone-2",unicode:"1f9d7-1f3fb"},3:{name:"person_climbing::skin-tone-3",unicode:"1f9d7-1f3fc"},4:{name:"person_climbing::skin-tone-4",unicode:"1f9d7-1f3fd"},5:{name:"person_climbing::skin-tone-5",unicode:"1f9d7-1f3fe"},6:{name:"person_climbing::skin-tone-6",unicode:"1f9d7-1f3ff"}}},woman_in_lotus_position:{name:"woman_in_lotus_position",unicode:"1f9d8-200d-2640-fe0f",skinVariations:{2:{name:"woman_in_lotus_position::skin-tone-2",unicode:"1f9d8-1f3fb-200d-2640-fe0f"},3:{name:"woman_in_lotus_position::skin-tone-3",unicode:"1f9d8-1f3fc-200d-2640-fe0f"},4:{name:"woman_in_lotus_position::skin-tone-4",unicode:"1f9d8-1f3fd-200d-2640-fe0f"},5:{name:"woman_in_lotus_position::skin-tone-5",unicode:"1f9d8-1f3fe-200d-2640-fe0f"},6:{name:"woman_in_lotus_position::skin-tone-6",unicode:"1f9d8-1f3ff-200d-2640-fe0f"}}},man_in_lotus_position:{name:"man_in_lotus_position",unicode:"1f9d8-200d-2642-fe0f",skinVariations:{2:{name:"man_in_lotus_position::skin-tone-2",unicode:"1f9d8-1f3fb-200d-2642-fe0f"},3:{name:"man_in_lotus_position::skin-tone-3",unicode:"1f9d8-1f3fc-200d-2642-fe0f"},4:{name:"man_in_lotus_position::skin-tone-4",unicode:"1f9d8-1f3fd-200d-2642-fe0f"},5:{name:"man_in_lotus_position::skin-tone-5",unicode:"1f9d8-1f3fe-200d-2642-fe0f"},6:{name:"man_in_lotus_position::skin-tone-6",unicode:"1f9d8-1f3ff-200d-2642-fe0f"}}},person_in_lotus_position:{name:"person_in_lotus_position",unicode:"1f9d8",skinVariations:{2:{name:"person_in_lotus_position::skin-tone-2",unicode:"1f9d8-1f3fb"},3:{name:"person_in_lotus_position::skin-tone-3",unicode:"1f9d8-1f3fc"},4:{name:"person_in_lotus_position::skin-tone-4",unicode:"1f9d8-1f3fd"},5:{name:"person_in_lotus_position::skin-tone-5",unicode:"1f9d8-1f3fe"},6:{name:"person_in_lotus_position::skin-tone-6",unicode:"1f9d8-1f3ff"}}},female_mage:{name:"female_mage",unicode:"1f9d9-200d-2640-fe0f",skinVariations:{2:{name:"female_mage::skin-tone-2",unicode:"1f9d9-1f3fb-200d-2640-fe0f"},3:{name:"female_mage::skin-tone-3",unicode:"1f9d9-1f3fc-200d-2640-fe0f"},4:{name:"female_mage::skin-tone-4",unicode:"1f9d9-1f3fd-200d-2640-fe0f"},5:{name:"female_mage::skin-tone-5",unicode:"1f9d9-1f3fe-200d-2640-fe0f"},6:{name:"female_mage::skin-tone-6",unicode:"1f9d9-1f3ff-200d-2640-fe0f"}}},male_mage:{name:"male_mage",unicode:"1f9d9-200d-2642-fe0f",skinVariations:{2:{name:"male_mage::skin-tone-2",unicode:"1f9d9-1f3fb-200d-2642-fe0f"},3:{name:"male_mage::skin-tone-3",unicode:"1f9d9-1f3fc-200d-2642-fe0f"},4:{name:"male_mage::skin-tone-4",unicode:"1f9d9-1f3fd-200d-2642-fe0f"},5:{name:"male_mage::skin-tone-5",unicode:"1f9d9-1f3fe-200d-2642-fe0f"},6:{name:"male_mage::skin-tone-6",unicode:"1f9d9-1f3ff-200d-2642-fe0f"}}},mage:{name:"mage",unicode:"1f9d9",skinVariations:{2:{name:"mage::skin-tone-2",unicode:"1f9d9-1f3fb"},3:{name:"mage::skin-tone-3",unicode:"1f9d9-1f3fc"},4:{name:"mage::skin-tone-4",unicode:"1f9d9-1f3fd"},5:{name:"mage::skin-tone-5",unicode:"1f9d9-1f3fe"},6:{name:"mage::skin-tone-6",unicode:"1f9d9-1f3ff"}}},female_fairy:{name:"female_fairy",unicode:"1f9da-200d-2640-fe0f",skinVariations:{2:{name:"female_fairy::skin-tone-2",unicode:"1f9da-1f3fb-200d-2640-fe0f"},3:{name:"female_fairy::skin-tone-3",unicode:"1f9da-1f3fc-200d-2640-fe0f"},4:{name:"female_fairy::skin-tone-4",unicode:"1f9da-1f3fd-200d-2640-fe0f"},5:{name:"female_fairy::skin-tone-5",unicode:"1f9da-1f3fe-200d-2640-fe0f"},6:{name:"female_fairy::skin-tone-6",unicode:"1f9da-1f3ff-200d-2640-fe0f"}}},male_fairy:{name:"male_fairy",unicode:"1f9da-200d-2642-fe0f",skinVariations:{2:{name:"male_fairy::skin-tone-2",unicode:"1f9da-1f3fb-200d-2642-fe0f"},3:{name:"male_fairy::skin-tone-3",unicode:"1f9da-1f3fc-200d-2642-fe0f"},4:{name:"male_fairy::skin-tone-4",unicode:"1f9da-1f3fd-200d-2642-fe0f"},5:{name:"male_fairy::skin-tone-5",unicode:"1f9da-1f3fe-200d-2642-fe0f"},6:{name:"male_fairy::skin-tone-6",unicode:"1f9da-1f3ff-200d-2642-fe0f"}}},fairy:{name:"fairy",unicode:"1f9da",skinVariations:{2:{name:"fairy::skin-tone-2",unicode:"1f9da-1f3fb"},3:{name:"fairy::skin-tone-3",unicode:"1f9da-1f3fc"},4:{name:"fairy::skin-tone-4",unicode:"1f9da-1f3fd"},5:{name:"fairy::skin-tone-5",unicode:"1f9da-1f3fe"},6:{name:"fairy::skin-tone-6",unicode:"1f9da-1f3ff"}}},female_vampire:{name:"female_vampire",unicode:"1f9db-200d-2640-fe0f",skinVariations:{2:{name:"female_vampire::skin-tone-2",unicode:"1f9db-1f3fb-200d-2640-fe0f"},3:{name:"female_vampire::skin-tone-3",unicode:"1f9db-1f3fc-200d-2640-fe0f"},4:{name:"female_vampire::skin-tone-4",unicode:"1f9db-1f3fd-200d-2640-fe0f"},5:{name:"female_vampire::skin-tone-5",unicode:"1f9db-1f3fe-200d-2640-fe0f"},6:{name:"female_vampire::skin-tone-6",unicode:"1f9db-1f3ff-200d-2640-fe0f"}}},male_vampire:{name:"male_vampire",unicode:"1f9db-200d-2642-fe0f",skinVariations:{2:{name:"male_vampire::skin-tone-2",unicode:"1f9db-1f3fb-200d-2642-fe0f"},3:{name:"male_vampire::skin-tone-3",unicode:"1f9db-1f3fc-200d-2642-fe0f"},4:{name:"male_vampire::skin-tone-4",unicode:"1f9db-1f3fd-200d-2642-fe0f"},5:{name:"male_vampire::skin-tone-5",unicode:"1f9db-1f3fe-200d-2642-fe0f"},6:{name:"male_vampire::skin-tone-6",unicode:"1f9db-1f3ff-200d-2642-fe0f"}}},vampire:{name:"vampire",unicode:"1f9db",skinVariations:{2:{name:"vampire::skin-tone-2",unicode:"1f9db-1f3fb"},3:{name:"vampire::skin-tone-3",unicode:"1f9db-1f3fc"},4:{name:"vampire::skin-tone-4",unicode:"1f9db-1f3fd"},5:{name:"vampire::skin-tone-5",unicode:"1f9db-1f3fe"},6:{name:"vampire::skin-tone-6",unicode:"1f9db-1f3ff"}}},mermaid:{name:"mermaid",unicode:"1f9dc-200d-2640-fe0f",skinVariations:{2:{name:"mermaid::skin-tone-2",unicode:"1f9dc-1f3fb-200d-2640-fe0f"},3:{name:"mermaid::skin-tone-3",unicode:"1f9dc-1f3fc-200d-2640-fe0f"},4:{name:"mermaid::skin-tone-4",unicode:"1f9dc-1f3fd-200d-2640-fe0f"},5:{name:"mermaid::skin-tone-5",unicode:"1f9dc-1f3fe-200d-2640-fe0f"},6:{name:"mermaid::skin-tone-6",unicode:"1f9dc-1f3ff-200d-2640-fe0f"}}},merman:{name:"merman",unicode:"1f9dc-200d-2642-fe0f",skinVariations:{2:{name:"merman::skin-tone-2",unicode:"1f9dc-1f3fb-200d-2642-fe0f"},3:{name:"merman::skin-tone-3",unicode:"1f9dc-1f3fc-200d-2642-fe0f"},4:{name:"merman::skin-tone-4",unicode:"1f9dc-1f3fd-200d-2642-fe0f"},5:{name:"merman::skin-tone-5",unicode:"1f9dc-1f3fe-200d-2642-fe0f"},6:{name:"merman::skin-tone-6",unicode:"1f9dc-1f3ff-200d-2642-fe0f"}}},merperson:{name:"merperson",unicode:"1f9dc",skinVariations:{2:{name:"merperson::skin-tone-2",unicode:"1f9dc-1f3fb"},3:{name:"merperson::skin-tone-3",unicode:"1f9dc-1f3fc"},4:{name:"merperson::skin-tone-4",unicode:"1f9dc-1f3fd"},5:{name:"merperson::skin-tone-5",unicode:"1f9dc-1f3fe"},6:{name:"merperson::skin-tone-6",unicode:"1f9dc-1f3ff"}}},female_elf:{name:"female_elf",unicode:"1f9dd-200d-2640-fe0f",skinVariations:{2:{name:"female_elf::skin-tone-2",unicode:"1f9dd-1f3fb-200d-2640-fe0f"},3:{name:"female_elf::skin-tone-3",unicode:"1f9dd-1f3fc-200d-2640-fe0f"},4:{name:"female_elf::skin-tone-4",unicode:"1f9dd-1f3fd-200d-2640-fe0f"},5:{name:"female_elf::skin-tone-5",unicode:"1f9dd-1f3fe-200d-2640-fe0f"},6:{name:"female_elf::skin-tone-6",unicode:"1f9dd-1f3ff-200d-2640-fe0f"}}},male_elf:{name:"male_elf",unicode:"1f9dd-200d-2642-fe0f",skinVariations:{2:{name:"male_elf::skin-tone-2",unicode:"1f9dd-1f3fb-200d-2642-fe0f"},3:{name:"male_elf::skin-tone-3",unicode:"1f9dd-1f3fc-200d-2642-fe0f"},4:{name:"male_elf::skin-tone-4",unicode:"1f9dd-1f3fd-200d-2642-fe0f"},5:{name:"male_elf::skin-tone-5",unicode:"1f9dd-1f3fe-200d-2642-fe0f"},6:{name:"male_elf::skin-tone-6",unicode:"1f9dd-1f3ff-200d-2642-fe0f"}}},elf:{name:"elf",unicode:"1f9dd",skinVariations:{2:{name:"elf::skin-tone-2",unicode:"1f9dd-1f3fb"},3:{name:"elf::skin-tone-3",unicode:"1f9dd-1f3fc"},4:{name:"elf::skin-tone-4",unicode:"1f9dd-1f3fd"},5:{name:"elf::skin-tone-5",unicode:"1f9dd-1f3fe"},6:{name:"elf::skin-tone-6",unicode:"1f9dd-1f3ff"}}},female_genie:{name:"female_genie",unicode:"1f9de-200d-2640-fe0f"},male_genie:{name:"male_genie",unicode:"1f9de-200d-2642-fe0f"},genie:{name:"genie",unicode:"1f9de"},female_zombie:{name:"female_zombie",unicode:"1f9df-200d-2640-fe0f"},male_zombie:{name:"male_zombie",unicode:"1f9df-200d-2642-fe0f"},zombie:{name:"zombie",unicode:"1f9df"},brain:{name:"brain",unicode:"1f9e0"},orange_heart:{name:"orange_heart",unicode:"1f9e1"},billed_cap:{name:"billed_cap",unicode:"1f9e2"},scarf:{name:"scarf",unicode:"1f9e3"},gloves:{name:"gloves",unicode:"1f9e4"},coat:{name:"coat",unicode:"1f9e5"},socks:{name:"socks",unicode:"1f9e6"},bangbang:{name:"bangbang",unicode:"203c-fe0f"},interrobang:{name:"interrobang",unicode:"2049-fe0f"},tm:{name:"tm",unicode:"2122-fe0f"},information_source:{name:"information_source",unicode:"2139-fe0f"},left_right_arrow:{name:"left_right_arrow",unicode:"2194-fe0f"},arrow_up_down:{name:"arrow_up_down",unicode:"2195-fe0f"},arrow_upper_left:{name:"arrow_upper_left",unicode:"2196-fe0f"},arrow_upper_right:{name:"arrow_upper_right",unicode:"2197-fe0f"},arrow_lower_right:{name:"arrow_lower_right",unicode:"2198-fe0f"},arrow_lower_left:{name:"arrow_lower_left",unicode:"2199-fe0f"},leftwards_arrow_with_hook:{name:"leftwards_arrow_with_hook",unicode:"21a9-fe0f"},arrow_right_hook:{name:"arrow_right_hook",unicode:"21aa-fe0f"},watch:{name:"watch",unicode:"231a"},hourglass:{name:"hourglass",unicode:"231b"},keyboard:{name:"keyboard",unicode:"2328-fe0f"},eject:{name:"eject",unicode:"23cf-fe0f"},fast_forward:{name:"fast_forward",unicode:"23e9"},rewind:{name:"rewind",unicode:"23ea"},arrow_double_up:{name:"arrow_double_up",unicode:"23eb"},arrow_double_down:{name:"arrow_double_down",unicode:"23ec"},black_right_pointing_double_triangle_with_vertical_bar:{name:"black_right_pointing_double_triangle_with_vertical_bar",unicode:"23ed-fe0f"},black_left_pointing_double_triangle_with_vertical_bar:{name:"black_left_pointing_double_triangle_with_vertical_bar",unicode:"23ee-fe0f"},black_right_pointing_triangle_with_double_vertical_bar:{name:"black_right_pointing_triangle_with_double_vertical_bar",unicode:"23ef-fe0f"},alarm_clock:{name:"alarm_clock",unicode:"23f0"},stopwatch:{name:"stopwatch",unicode:"23f1-fe0f"},timer_clock:{name:"timer_clock",unicode:"23f2-fe0f"},hourglass_flowing_sand:{name:"hourglass_flowing_sand",unicode:"23f3"},double_vertical_bar:{name:"double_vertical_bar",unicode:"23f8-fe0f"},black_square_for_stop:{name:"black_square_for_stop",unicode:"23f9-fe0f"},black_circle_for_record:{name:"black_circle_for_record",unicode:"23fa-fe0f"},m:{name:"m",unicode:"24c2-fe0f"},black_small_square:{name:"black_small_square",unicode:"25aa-fe0f"},white_small_square:{name:"white_small_square",unicode:"25ab-fe0f"},arrow_forward:{name:"arrow_forward",unicode:"25b6-fe0f"},arrow_backward:{name:"arrow_backward",unicode:"25c0-fe0f"},white_medium_square:{name:"white_medium_square",unicode:"25fb-fe0f"},black_medium_square:{name:"black_medium_square",unicode:"25fc-fe0f"},white_medium_small_square:{name:"white_medium_small_square",unicode:"25fd"},black_medium_small_square:{name:"black_medium_small_square",unicode:"25fe"},sunny:{name:"sunny",unicode:"2600-fe0f"},cloud:{name:"cloud",unicode:"2601-fe0f"},umbrella:{name:"umbrella",unicode:"2602-fe0f"},snowman:{name:"snowman",unicode:"2603-fe0f"},comet:{name:"comet",unicode:"2604-fe0f"},phone:{name:"phone",unicode:"260e-fe0f"},telephone:{name:"telephone",aliasOf:"phone",unicode:"260e-fe0f"},ballot_box_with_check:{name:"ballot_box_with_check",unicode:"2611-fe0f"},umbrella_with_rain_drops:{name:"umbrella_with_rain_drops",unicode:"2614"},coffee:{name:"coffee",unicode:"2615"},shamrock:{name:"shamrock",unicode:"2618-fe0f"},point_up:{name:"point_up",unicode:"261d-fe0f",skinVariations:{2:{name:"point_up::skin-tone-2",unicode:"261d-1f3fb"},3:{name:"point_up::skin-tone-3",unicode:"261d-1f3fc"},4:{name:"point_up::skin-tone-4",unicode:"261d-1f3fd"},5:{name:"point_up::skin-tone-5",unicode:"261d-1f3fe"},6:{name:"point_up::skin-tone-6",unicode:"261d-1f3ff"}}},skull_and_crossbones:{name:"skull_and_crossbones",unicode:"2620-fe0f"},radioactive_sign:{name:"radioactive_sign",unicode:"2622-fe0f"},biohazard_sign:{name:"biohazard_sign",unicode:"2623-fe0f"},orthodox_cross:{name:"orthodox_cross",unicode:"2626-fe0f"},star_and_crescent:{name:"star_and_crescent",unicode:"262a-fe0f"},peace_symbol:{name:"peace_symbol",unicode:"262e-fe0f"},yin_yang:{name:"yin_yang",unicode:"262f-fe0f"},wheel_of_dharma:{name:"wheel_of_dharma",unicode:"2638-fe0f"},white_frowning_face:{name:"white_frowning_face",unicode:"2639-fe0f"},relaxed:{name:"relaxed",unicode:"263a-fe0f"},female_sign:{name:"female_sign",unicode:"2640-fe0f"},male_sign:{name:"male_sign",unicode:"2642-fe0f"},aries:{name:"aries",unicode:"2648"},taurus:{name:"taurus",unicode:"2649"},gemini:{name:"gemini",unicode:"264a"},cancer:{name:"cancer",unicode:"264b"},leo:{name:"leo",unicode:"264c"},virgo:{name:"virgo",unicode:"264d"},libra:{name:"libra",unicode:"264e"},scorpius:{name:"scorpius",unicode:"264f"},sagittarius:{name:"sagittarius",unicode:"2650"},capricorn:{name:"capricorn",unicode:"2651"},aquarius:{name:"aquarius",unicode:"2652"},pisces:{name:"pisces",unicode:"2653"},spades:{name:"spades",unicode:"2660-fe0f"},clubs:{name:"clubs",unicode:"2663-fe0f"},hearts:{name:"hearts",unicode:"2665-fe0f"},diamonds:{name:"diamonds",unicode:"2666-fe0f"},hotsprings:{name:"hotsprings",unicode:"2668-fe0f"},recycle:{name:"recycle",unicode:"267b-fe0f"},wheelchair:{name:"wheelchair",unicode:"267f"},hammer_and_pick:{name:"hammer_and_pick",unicode:"2692-fe0f"},anchor:{name:"anchor",unicode:"2693"},crossed_swords:{name:"crossed_swords",unicode:"2694-fe0f"},medical_symbol:{name:"medical_symbol",unicode:"2695-fe0f"},staff_of_aesculapius:{name:"staff_of_aesculapius",aliasOf:"medical_symbol",unicode:"2695-fe0f"},scales:{name:"scales",unicode:"2696-fe0f"},alembic:{name:"alembic",unicode:"2697-fe0f"},gear:{name:"gear",unicode:"2699-fe0f"},atom_symbol:{name:"atom_symbol",unicode:"269b-fe0f"},fleur_de_lis:{name:"fleur_de_lis",unicode:"269c-fe0f"},warning:{name:"warning",unicode:"26a0-fe0f"},zap:{name:"zap",unicode:"26a1"},white_circle:{name:"white_circle",unicode:"26aa"},black_circle:{name:"black_circle",unicode:"26ab"},coffin:{name:"coffin",unicode:"26b0-fe0f"},funeral_urn:{name:"funeral_urn",unicode:"26b1-fe0f"},soccer:{name:"soccer",unicode:"26bd"},baseball:{name:"baseball",unicode:"26be"},snowman_without_snow:{name:"snowman_without_snow",unicode:"26c4"},partly_sunny:{name:"partly_sunny",unicode:"26c5"},thunder_cloud_and_rain:{name:"thunder_cloud_and_rain",unicode:"26c8-fe0f"},ophiuchus:{name:"ophiuchus",unicode:"26ce"},pick:{name:"pick",unicode:"26cf-fe0f"},helmet_with_white_cross:{name:"helmet_with_white_cross",unicode:"26d1-fe0f"},chains:{name:"chains",unicode:"26d3-fe0f"},no_entry:{name:"no_entry",unicode:"26d4"},shinto_shrine:{name:"shinto_shrine",unicode:"26e9-fe0f"},church:{name:"church",unicode:"26ea"},mountain:{name:"mountain",unicode:"26f0-fe0f"},umbrella_on_ground:{name:"umbrella_on_ground",unicode:"26f1-fe0f"},fountain:{name:"fountain",unicode:"26f2"},golf:{name:"golf",unicode:"26f3"},ferry:{name:"ferry",unicode:"26f4-fe0f"},boat:{name:"boat",unicode:"26f5"},sailboat:{name:"sailboat",aliasOf:"boat",unicode:"26f5"},skier:{name:"skier",unicode:"26f7-fe0f"},ice_skate:{name:"ice_skate",unicode:"26f8-fe0f"},"woman-bouncing-ball":{name:"woman-bouncing-ball",unicode:"26f9-fe0f-200d-2640-fe0f",skinVariations:{2:{name:"woman-bouncing-ball::skin-tone-2",unicode:"26f9-1f3fb-200d-2640-fe0f"},3:{name:"woman-bouncing-ball::skin-tone-3",unicode:"26f9-1f3fc-200d-2640-fe0f"},4:{name:"woman-bouncing-ball::skin-tone-4",unicode:"26f9-1f3fd-200d-2640-fe0f"},5:{name:"woman-bouncing-ball::skin-tone-5",unicode:"26f9-1f3fe-200d-2640-fe0f"},6:{name:"woman-bouncing-ball::skin-tone-6",unicode:"26f9-1f3ff-200d-2640-fe0f"}}},"man-bouncing-ball":{name:"man-bouncing-ball",unicode:"26f9-fe0f-200d-2642-fe0f",skinVariations:{2:{name:"man-bouncing-ball::skin-tone-2",unicode:"26f9-1f3fb-200d-2642-fe0f"},3:{name:"man-bouncing-ball::skin-tone-3",unicode:"26f9-1f3fc-200d-2642-fe0f"},4:{name:"man-bouncing-ball::skin-tone-4",unicode:"26f9-1f3fd-200d-2642-fe0f"},5:{name:"man-bouncing-ball::skin-tone-5",unicode:"26f9-1f3fe-200d-2642-fe0f"},6:{name:"man-bouncing-ball::skin-tone-6",unicode:"26f9-1f3ff-200d-2642-fe0f"}}},person_with_ball:{name:"person_with_ball",unicode:"26f9-fe0f",skinVariations:{2:{name:"person_with_ball::skin-tone-2",unicode:"26f9-1f3fb"},3:{name:"person_with_ball::skin-tone-3",unicode:"26f9-1f3fc"},4:{name:"person_with_ball::skin-tone-4",unicode:"26f9-1f3fd"},5:{name:"person_with_ball::skin-tone-5",unicode:"26f9-1f3fe"},6:{name:"person_with_ball::skin-tone-6",unicode:"26f9-1f3ff"}}},tent:{name:"tent",unicode:"26fa"},fuelpump:{name:"fuelpump",unicode:"26fd"},scissors:{name:"scissors",unicode:"2702-fe0f"},white_check_mark:{name:"white_check_mark",unicode:"2705"},airplane:{name:"airplane",unicode:"2708-fe0f"},email:{name:"email",unicode:"2709-fe0f"},envelope:{name:"envelope",aliasOf:"email",unicode:"2709-fe0f"},fist:{name:"fist",unicode:"270a",skinVariations:{2:{name:"fist::skin-tone-2",unicode:"270a-1f3fb"},3:{name:"fist::skin-tone-3",unicode:"270a-1f3fc"},4:{name:"fist::skin-tone-4",unicode:"270a-1f3fd"},5:{name:"fist::skin-tone-5",unicode:"270a-1f3fe"},6:{name:"fist::skin-tone-6",unicode:"270a-1f3ff"}}},hand:{name:"hand",unicode:"270b",skinVariations:{2:{name:"hand::skin-tone-2",unicode:"270b-1f3fb"},3:{name:"hand::skin-tone-3",unicode:"270b-1f3fc"},4:{name:"hand::skin-tone-4",unicode:"270b-1f3fd"},5:{name:"hand::skin-tone-5",unicode:"270b-1f3fe"},6:{name:"hand::skin-tone-6",unicode:"270b-1f3ff"}}},raised_hand:{name:"raised_hand",aliasOf:"hand",unicode:"270b",skinVariations:{2:{name:"raised_hand::skin-tone-2",unicode:"270b-1f3fb"},3:{name:"raised_hand::skin-tone-3",unicode:"270b-1f3fc"},4:{name:"raised_hand::skin-tone-4",unicode:"270b-1f3fd"},5:{name:"raised_hand::skin-tone-5",unicode:"270b-1f3fe"},6:{name:"raised_hand::skin-tone-6",unicode:"270b-1f3ff"}}},v:{name:"v",unicode:"270c-fe0f",skinVariations:{2:{name:"v::skin-tone-2",unicode:"270c-1f3fb"},3:{name:"v::skin-tone-3",unicode:"270c-1f3fc"},4:{name:"v::skin-tone-4",unicode:"270c-1f3fd"},5:{name:"v::skin-tone-5",unicode:"270c-1f3fe"},6:{name:"v::skin-tone-6",unicode:"270c-1f3ff"}}},writing_hand:{name:"writing_hand",unicode:"270d-fe0f",skinVariations:{2:{name:"writing_hand::skin-tone-2",unicode:"270d-1f3fb"},3:{name:"writing_hand::skin-tone-3",unicode:"270d-1f3fc"},4:{name:"writing_hand::skin-tone-4",unicode:"270d-1f3fd"},5:{name:"writing_hand::skin-tone-5",unicode:"270d-1f3fe"},6:{name:"writing_hand::skin-tone-6",unicode:"270d-1f3ff"}}},pencil2:{name:"pencil2",unicode:"270f-fe0f"},black_nib:{name:"black_nib",unicode:"2712-fe0f"},heavy_check_mark:{name:"heavy_check_mark",unicode:"2714-fe0f"},heavy_multiplication_x:{name:"heavy_multiplication_x",unicode:"2716-fe0f"},latin_cross:{name:"latin_cross",unicode:"271d-fe0f"},star_of_david:{name:"star_of_david",unicode:"2721-fe0f"},sparkles:{name:"sparkles",unicode:"2728"},eight_spoked_asterisk:{name:"eight_spoked_asterisk",unicode:"2733-fe0f"},eight_pointed_black_star:{name:"eight_pointed_black_star",unicode:"2734-fe0f"},snowflake:{name:"snowflake",unicode:"2744-fe0f"},sparkle:{name:"sparkle",unicode:"2747-fe0f"},x:{name:"x",unicode:"274c"},negative_squared_cross_mark:{name:"negative_squared_cross_mark",unicode:"274e"},question:{name:"question",unicode:"2753"},grey_question:{name:"grey_question",unicode:"2754"},grey_exclamation:{name:"grey_exclamation",unicode:"2755"},exclamation:{name:"exclamation",unicode:"2757"},heavy_exclamation_mark:{name:"heavy_exclamation_mark",aliasOf:"exclamation",unicode:"2757"},heavy_heart_exclamation_mark_ornament:{name:"heavy_heart_exclamation_mark_ornament",unicode:"2763-fe0f"},heart:{name:"heart",unicode:"2764-fe0f"},heavy_plus_sign:{name:"heavy_plus_sign",unicode:"2795"},heavy_minus_sign:{name:"heavy_minus_sign",unicode:"2796"},heavy_division_sign:{name:"heavy_division_sign",unicode:"2797"},arrow_right:{name:"arrow_right",unicode:"27a1-fe0f"},curly_loop:{name:"curly_loop",unicode:"27b0"},loop:{name:"loop",unicode:"27bf"},arrow_heading_up:{name:"arrow_heading_up",unicode:"2934-fe0f"},arrow_heading_down:{name:"arrow_heading_down",unicode:"2935-fe0f"},arrow_left:{name:"arrow_left",unicode:"2b05-fe0f"},arrow_up:{name:"arrow_up",unicode:"2b06-fe0f"},arrow_down:{name:"arrow_down",unicode:"2b07-fe0f"},black_large_square:{name:"black_large_square",unicode:"2b1b"},white_large_square:{name:"white_large_square",unicode:"2b1c"},star:{name:"star",unicode:"2b50"},o:{name:"o",unicode:"2b55"},wavy_dash:{name:"wavy_dash",unicode:"3030-fe0f"},part_alternation_mark:{name:"part_alternation_mark",unicode:"303d-fe0f"},congratulations:{name:"congratulations",unicode:"3297-fe0f"},secret:{name:"secret",unicode:"3299-fe0f"}}},,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setActiveAppTab",function(){return h});a.d(t,"setNewUnreads",function(){return v});a.d(t,"setReactionToast",function(){return g});a.d(t,"getActiveAppTab",function(){return _});a.d(t,"getNewUnreads",function(){return y});a.d(t,"getReactionToast",function(){return k});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u;var d=l.a.oneOf(["messages","about"]);var p=l.a.shape({emoji:l.a.string,memberName:l.a.string,channelName:l.a.string});var f=l.a.shape({activeAppTab:d,newUnreads:l.a.number,toaster:p});var m={activeAppTab:"messages",newUnreads:0};var h=Object(c["a"])("Notifies modern of the active tab for app/bot users");h.propTypes=d;var v=Object(c["a"])("Set the number of new unread messages that came in while in the All Unreads view");v.propTypes=l.a.number;var g=Object(c["a"])("Sets the currently active reaction toast; null or undefined to clear");g.propTypes=p;var b=Object(c["c"])((u={},r()(u,h,function(e,t){if(!t)return e;return o()({},e,{activeAppTab:t})}),r()(u,v,function(e,t){return o()({},e,{newUnreads:t})}),r()(u,g,function(e,t){return o()({},e,{toaster:t})}),u),m);b.propTypes=f;t["default"]=b;var _=Object(c["d"])(function(e){return e&&e.globalNav&&e.globalNav.activeAppTab});var y=Object(c["d"])(function(e){return e&&e.globalNav&&e.globalNav.newUnreads});var k=Object(c["d"])(function(e){return e&&e.globalNav&&e.globalNav.toaster})},function(e,t,a){"use strict";a.r(t);a.d(t,"setSupportsStickyPosition",function(){return d});a.d(t,"setNotificationPermission",function(){return p});a.d(t,"getSupportStickyPosition",function(){return h});a.d(t,"getNotificationPermission",function(){return v});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u;var d=Object(c["a"])("Update the supports_sticky_position");d.propTypes=l.a.bool.isRequired;var p=Object(c["a"])("Update the notificationPermission");p.propTypes=l.a.string.isRequired;var f={};var m=Object(c["c"])((u={},r()(u,d,function(e,t){return o()({},e,{supportsStickyPosition:t})}),r()(u,p,function(e,t){return o()({},e,{notificationPermission:t})}),u),f);t["default"]=m;var h=Object(c["d"])(function(e){return e&&e.environment&&e.environment.supportsStickyPosition});var v=Object(c["d"])(function(e){return e&&e.environment&&e.environment.notificationPermission})},,,,,,,,function(e,t,a){"use strict";var n={"00:00":"12:00 AM","00:30":"12:30 AM","01:00":"1:00 AM","01:30":"1:30 AM","02:00":"2:00 AM","02:30":"2:30 AM","03:00":"3:00 AM","03:30":"3:30 AM","04:00":"4:00 AM","04:30":"4:30 AM","05:00":"5:00 AM","05:30":"5:30 AM","06:00":"6:00 AM","06:30":"6:30 AM","07:00":"7:00 AM","07:30":"7:30 AM","08:00":"8:00 AM","08:30":"8:30 AM","09:00":"9:00 AM","09:30":"9:30 AM","10:00":"10:00 AM","10:30":"10:30 AM","11:00":"11:00 AM","11:30":"11:30 AM","12:00":"12:00 PM","12:30":"12:30 PM","13:00":"1:00 PM","13:30":"1:30 PM","14:00":"2:00 PM","14:30":"2:30 PM","15:00":"3:00 PM","15:30":"3:30 PM","16:00":"4:00 PM","16:30":"4:30 PM","17:00":"5:00 PM","17:30":"5:30 PM","18:00":"6:00 PM","18:30":"6:30 PM","19:00":"7:00 PM","19:30":"7:30 PM","20:00":"8:00 PM","20:30":"8:30 PM","21:00":"9:00 PM","21:30":"9:30 PM","22:00":"10:00 PM","22:30":"10:30 PM","23:00":"11:00 PM","23:30":"11:30 PM"};t["a"]=n},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(2);var v=a.n(h);var g=a(15);var b=a.n(g);var _=a(76);var y=a(20);var k=a(18);var O=a(41);var w=a(1351);var E=a.n(w);var C={className:p.a.string,iconType:p.a.string,label:p.a.string.isRequired,tooltipPosition:p.a.string,onClick:p.a.func,ariaHasPopup:p.a.bool,"data-qa":p.a.string};var j={className:"",onClick:v.a.noop,iconType:null,tooltipPosition:"top",ariaHasPopup:true,"data-qa":void 0};var S=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=b()("c-message_actions__button",this.props.className);return m.a.createElement(O["d"],{tip:this.props.label,position:this.props.tooltipPosition,delay:O["b"]},m.a.createElement(y["c"],{className:t,onClick:this.props.onClick,"aria-label":this.props.label,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"]},m.a.createElement(k["b"],{type:this.props.iconType})))}}]);return t}(f["PureComponent"]);S.displayName="MessageActionButton";S.defaultProps=j;t["a"]=Object(_["pure"])(S)},,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(2);var l=a(79);var c=a(0);var u=a.n(c);var d=a(22);var p=a(25);var f=Object(d["a"])("Immediately calls eventlog.history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e(Object(p["a"])({method:"ublockworkaround.history",args:a,EXPEDITED:true}))});f.propTypes=u.a.object;var m=a(459);var h=a(102);var v=a(17);var g=a(368);var b=a(23);var _=a(33);var y=a(107);a.d(t,"a",function(){return j});a.d(t,"b",function(){return S});a.d(t,"c",function(){return x});a.d(t,"d",function(){return P});a.d(t,"e",function(){return D});var k=f;var O=h["a"];var w=m["b"];var E={};var C="EVENTLOG";function j(e){E[e]||(E[e]=new M(e))}function S(e){return E[e]}function I(e){switch(e.type){case"file_change":if(e.file&&e.file.id)return e.type+"_"+e.file.id;break;case"user_change":if(e.user&&e.user.id)return e.type+"_"+e.user.id;break;case"emoji_changed":if("add"===e.subtype&&Object(s["isString"])(e.name)&&Object(s["isString"])(e.value)){var t={name:e.name,value:e.value};return"emoji_changed_add_"+JSON.stringify(t)}if("remove"===e.subtype&&Object(s["isArray"])(e.names))return"emoji_changed_remove_"+JSON.stringify(e.names);return e.type;case"message.channel_history_changed":case"message.group_history_changed":case"message.mpim_history_changed":case"message.im_history_changed":if(Object(s["isString"])(e.channel))return e.type+"_"+e.channel;break;default:}return}function T(e,t){return Object(s["reduceRight"])(e,function(e,a){t(a)&&e.unshift(a);return e},[])}var N=["apps_changed","apps_installed","apps_uninstalled","channel_changed","channel_converted_to_shared","channel_created","channel_deleted","channel_rename","channel_shared_invite_accepted","channel_shared_invite_pending","channel_shared_invite_revoked","channel_unshared","channel_updated","commands_changed","file_change","file_comment_added","file_comment_deleted","file_comment_edited","file_created","file_deleted","file_public","file_shared","file_unshared","subteam_created","subteam_deleted","subteam_members_changed","subteam_self_added","subteam_self_removed","subteam_updated","team_icon_change","team_rename","thread_subscribed","thread_unsubscribed","app_conversation_invite_request","app_permission_request","app_permission_user_request","canvas_changed","canvas_mounted","manual_presence_change","slack_broadcast","team_join","workflow_assigned"];function A(e){if(!Object(y["a"])())return false;return N.indexOf(e)>=0}function R(e){var t={};var a=T(e,function(e){if(A(e.type))return false;var a=I(e);if(!a)return true;if(t[a])return false;t[a]=true;return true});return a}var M=function(){function e(t){r()(this,e);if(!t)throw new Error("Eventlog requires a teamId");this._teamId=t;this._logger=Object(v["a"])({teamId:this._teamId});this._lastAttemptWasCancelled=false;this._lastEventTimestamp=void 0;this._lastEventTimestampBeforeDisconnection=void 0;this._eventlogHistoryP=void 0;Object(g["a"])(this)}o()(e,[{key:"_dispatchReduxAction",value:function e(t){return Object(_["a"])(this._teamId,t)}},{key:"_info",value:function e(t){this._logger.info(C,t)}},{key:"_warn",value:function e(t){this._logger.warn(C,t)}},{key:"_eventlogErrorHandler",value:function e(t){var a=t&&t.data?t.data.error:null;if("timestamp_too_old"===a){w({reason:"eventlog.history timestamp_too_old"});return}this._warn("eventlog: encountered error");O(t,"eventlog")}},{key:"_eventlogOKHandler",value:function e(t){var a=this;if(t.has_more){w({reason:"eventlog.history has_more"});return}if(!t.events){this._warn("eventlog: history call did not include events");return}if(!t.events.length){this._info("nothing to process");return}t.events.forEach(function(e){e._from_evt_log=true});var n=R(t.events);this._info("processing "+n.length+" events out of a total set of "+t.events.length);n.forEach(function(e){a._dispatchReduxAction(Object(l["socketMessageReceived"])(e))});if(n.length>0){var r=n[n.length-1].event_ts;r&&r>(this._lastEventTimestamp||0)&&this.setLastEventTimestamp(r)}}},{key:"onSocketConnected",value:function e(t){var a=this;if(!this._lastEventTimestampBeforeDisconnection)return;this._info("fr="+t+", lc="+this._lastAttemptWasCancelled+", lt="+this._lastEventTimestampBeforeDisconnection);if(t&&!this._lastAttemptWasCancelled)return;this._info("fetching events since "+this._lastEventTimestampBeforeDisconnection+" ("+(Math.ceil(Date.now()/1e3)-this._lastEventTimestampBeforeDisconnection)+" seconds ago)");var n=this._dispatchReduxAction(k({start:this._lastEventTimestampBeforeDisconnection,count:2e3,no_payload_if_has_more:true,batch_deleted_files:true})).then(function(e){return a._eventlogOKHandler(e)}).catch(function(e){return a._eventlogErrorHandler(e)});n.finally(function(){a._eventlogHistoryP=void 0;a._info("fetched finish (cancelled? "+n.isCancelled()+")");a._lastAttemptWasCancelled=!!n.isCancelled();if(!n.isCancelled()){a._info("dispatching signal and clearing timestamp");a._lastEventTimestampBeforeDisconnection=void 0}});this._eventlogHistoryP=n}},{key:"onSocketDisconnected",value:function e(){this._lastEventTimestampBeforeDisconnection=this._lastEventTimestampBeforeDisconnection||this._lastEventTimestamp;if(this._eventlogHistoryP){this._info("socket was closed while we were fetching history; cancelling our request");this._eventlogHistoryP.cancel();this._eventlogHistoryP=void 0}}},{key:"setLastEventTimestamp",value:function e(t){this._lastEventTimestamp=t}}]);return e}();function x(e,t){var a=e();var n=Object(b["getTeamId"])(a);var r=E[n];if(!r)return;r.onSocketConnected(t)}function P(e){var t=e();var a=Object(b["getTeamId"])(t);var n=E[a];if(!n)return;n.onSocketDisconnected()}function D(e,t){var a=t.event_ts;if(!a)return;var n=e();var r=Object(b["getTeamId"])(n);var i=E[r];if(!i)return;i.setLastEventTimestamp(a)}var F={};Object.defineProperty(F,"fetchEventlogHistory",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(F,"instances",{get:function e(){return E},set:function e(t){E=t}});Object.defineProperty(F,"logError",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(F,"onSocketConnected",{get:function e(){return x},set:function e(t){x=t}});Object.defineProperty(F,"onSocketDisconnected",{get:function e(){return P},set:function e(t){P=t}});Object.defineProperty(F,"onSocketMessage",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(F,"reload",{get:function e(){return w},set:function e(t){w=t}})},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(2);var l=a(444);var c=a(62);var u=a(13);var d=Object(u["c"])("TS.debug_widget.isVisible");var p=Object(u["c"])("TS.debug_widget.setFrameRate");a.d(t,"f",function(){return k});a.d(t,"h",function(){return O});a.d(t,"j",function(){return w});a.d(t,"d",function(){return E});a.d(t,"b",function(){return C});a.d(t,"c",function(){return j});a.d(t,"g",function(){return S});a.d(t,"i",function(){return I});a.d(t,"e",function(){return T});a.d(t,"a",function(){return N});var f=100;var m=1e3;var h=300;var v=1e3;var g=500;var b=60;var _=function(){function e(){r()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}o()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var a=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(a>m){this.beachballs+=1;this.beachballsTotal+=1}else if(a>f){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===h){var n=(t-this.fpsStartTime)/1e3;var r=Math.floor(this.fpsIndex/n);this.fpsIndex=0;d()&&p(r);this.frameRates.push(r)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){Object(c["c"])("stutters",this.stutters);Object(c["c"])("beachballs",this.beachballs);if(!Object(s["isEmpty"])(this.frameRates)){var t=Object(s["min"])(this.frameRates);var a=void 0;var n=this.frameRates.sort();var r=Math.floor(n.length/2);a=n.length%2===1?n[r]:(n[r-1]+n[r])/2;Object(c["h"])("fps_min",t);Object(c["h"])("fps_median",a)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(a<1)return;var n=Math.max(b-t,0);this.histJankyWindows[n]=(this.histJankyWindows[n]||0)+a}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>g*this.nextJankyWindowSampleIntervalNumber;var a=Math.floor(this.durationMs/g);var n=a-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=v){this.recordJankyWindows(0,n-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,n>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=a+1;this.framesInPreviousJankyWindowSample=n>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var a=t-this.lastRafHandlerTimeForPRQMetrics;var n=Object(l["d"])(Math.round(a,0),2);this.histFrameRenderTime[n]=(this.histFrameRenderTime[n]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=a;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();_.instance=null;function y(){null===_.instance&&(_.instance=new _);return _.instance}var k=y().startClientStats.bind(_.instance);var O=y().stopClientStats.bind(_.instance);var w=y().storeClientStats.bind(_.instance);var E=y().isEnabledForClientStats.bind(_.instance);var C=y().getTotalBeachballCount.bind(_.instance);var j=y().getTotalStutterCount.bind(_.instance);var S=y().startPRQMetrics.bind(_.instance);var I=y().stopPRQMetrics.bind(_.instance);var T=y().isEnabledForPRQMetrics.bind(_.instance);var N=y().getPRQMetrics.bind(_.instance)},,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=true;t["default"]=o;function n(e){return e&&e.__esModule?e:{default:e}}var r=a(1850);var i=n(r);function o(e,t){return!(0,i["default"])(this.props,e)||!(0,i["default"])(this.state,t)}e.exports=t["default"]},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(2);var r=a.n(n);var i=a(365);var o=a(696);var s=a(778);var l=a(779);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.highlightWords,n=t.shouldRenderEmojiAsText,c=t.emojiNames,u=t.useSonicEmoji,d=t.locale;var p=Object(i["b"])(e,{highlightWords:a,shouldRenderEmojiAsText:n,emojiNames:c,useSonicEmoji:u,locale:d});return r.a.reduce(p.contents,function(e,t){if(t.attributes&&t.attributes.slackmention){var a=t.attributes.slackmention.id;if(Object(o["a"])(a))return e+"@"+Object(l["a"])(a);if(Object(s["a"])(a))return""+e+t.attributes.slackmention.label;if("S"===a.charAt(0))return e+"<!subteam^"+a+"|"+t.attributes.slackmention.label+">";return e+"<@"+a+">"}if(t.insert&&t.insert.slackemoji)return e+t.insert.slackemoji;return e+t.insert},"")}},,,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(0);var v=a.n(h);var g=a(14);var b=a(2);var _=a(11);var y=a(16);var k=a(10);var O=a(177);var w=a(270);var E=a(174);var C=a(18);var j=a(32);var S=a.n(j);var I=a(24);var T=a.n(I);var N=a(15);var A=a.n(N);var R=a(946);var M=a(443);var x=a(266);var P=a(20);var D=a(947);var F=a(1161);var L={default:"default",short:"short"};var B=new k["b"]("form");var U={autoSelectFirstOption:v.a.bool,className:v.a.string,displayValue:v.a.string,id:v.a.string,isLoading:v.a.bool,labelId:v.a.string,membersOnly:v.a.bool,name:v.a.string,onChange:v.a.func,onClearButtonClick:v.a.func.isRequired,onClose:v.a.func,onFilterInputChange:v.a.func,onOptionHighlighted:v.a.func,onOutsideClick:v.a.func,onOpen:v.a.func,onScroll:v.a.func,optionClassName:v.a.string,optionGroups:v.a.array,options:v.a.array,optionsListBottomOffset:v.a.number,optionsListTopOffset:v.a.number,optionsListWidth:v.a.number,optionsRowHeight:v.a.number,pillarClassName:v.a.string,placeholder:v.a.string,selectedOption:v.a.object,selectedValueClassName:v.a.string,type:v.a.oneOf(Object(b["values"])(L)),useFullWidthOptions:v.a.bool,usePlaceholderOption:v.a.bool,wrapperClassName:v.a.string,value:v.a.string};var q={className:null,displayValue:void 0,id:"select-"+Object(x["c"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:b["noop"],onClose:b["noop"],onFilterInputChange:b["noop"],onOptionHighlighted:b["noop"],onOutsideClick:b["noop"],onOpen:b["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:B.t("Choose an option\u2026"),selectedOption:void 0,selectedValueClassName:void 0,type:L.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var G=function(e){p()(t,e);function t(e){o()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.preventFocusAndBlur=false;a.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(b["bindAll"])(a,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return a}l()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,a){var n=this.props,r=n.onClose,i=n.onOpen,o=n.selectedOption;var s=this.state,l=s.isOpen,c=s.selectedOptionValue;if(o){var u=Object(E["h"])(o)?Object(y["getMemberRealName"])(o):Object(b["get"])(o,"name");u!==c&&this.setSelectedOptionValue(u)}else c&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!a.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);a.isOpen&&r()}this.filterInput&&l&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var a=t.target===this.filterInput;a?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;if(!a)return;var n=this.getSelectedOptionDisplayValue({value:a});this.setSelectedOptionValue(n);this.props.onChange(a);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,a=t.selectedOption,n=t.membersOnly;var r=this.getFilterQuery();var i=n?this.getFilteredOptions:this.getFilteredOptionGroups;if(r.length>0||a)return i();return[]}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,a=t.optionGroups,n=t.usePlaceholderOption;var r=this.getFilterQuery();if(!a)return null;if(!r&&n)return[this.getPlaceholderOptionGroup()].concat(T()(a));return a}},{key:"getFilteredOptions",value:function e(){var t=this.props,a=t.options,n=t.usePlaceholderOption;var r=this.getFilterQuery();if(!a)return null;if(!r&&n)return[this.getPlaceholderOption()].concat(T()(a));return a}},{key:"getFilterQuery",value:function e(){return Object(b["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,a=t.optionsListOffsetBottom,n=t.optionsListOffsetTop,r=t.optionsListWidth;var i=this.select.getBoundingClientRect();var o=this.select.offsetTop-Object(R["a"])(this.select,this.select.offsetParent);var s=this.select.offsetLeft;var l=this.select.offsetParent.clientHeight-o;var c=o+i.height;var u=i.bottom;var d=i.top;var p=r||i.width;return{bottom:u,offsetBottom:a,offsetTop:n,relativeBottom:c,relativeLeft:s,relativeTop:l,top:d,width:p}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.props.placeholder,value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var n=this.props,r=n.optionGroups,i=n.options;var o=r?Object(b["flatMap"])(r,"options"):i;var s=Object(b["find"])(o,{value:a});return Object(b["get"])(s,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var a=this;return function(e){a[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var a=t.label.toLowerCase();var n=this.getFilterQuery().toLowerCase();return-1!==a.indexOf(n)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new O["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var a={isOpen:Object(b["isUndefined"])(t)?!e.isOpen:t};a.isOpen||(a.filterQuery="");return a})}},{key:"renderFilterInput",value:function e(){var t=this.state,a=t.filterQuery,n=t.selectedOptionValue;var r=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.props.placeholder,ref:this.setRef("filterInput"),type:"text"};i.value=n&&!a?n:n||!r||a?a:r;return m.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,a=t.autoSelectFirstOption,n=t.isLoading,r=t.membersOnly,i=t.optionClassName,o=t.optionsRowHeight,s=t.pillarClassName,l=t.useFullWidthOptions,c=t.value,u=t.onScroll,d=t.onOptionHighlighted;var p=r?240:400;return m.a.createElement(D["a"],{autoSelectFirstOption:a,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:n,maxListHeight:p,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:r?null:this.maybeShowOptions(),options:r?this.maybeShowOptions():null,optionsRowHeight:o,pillarClassName:s,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:l,value:c,onActiveOptionUpdated:d})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var a=B.rt('No workspaces found matching <span class="sk_black bold">{query}</span>.',{query:t});var n=B.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return m.a.createElement("div",{className:"p-workspace_search__no-results-message"},m.a.createElement("p",{className:"margin_0"},a),m.a.createElement("p",{className:"margin_0"},n))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var a=t?B.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>.'):B.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>, or search for a <span class="sk_black bold">specific workspace</span>.');return m.a.createElement("div",{className:"p-workspace_search__no-results-message"},m.a.createElement("p",{className:"margin_0"},a))}},{key:"render",value:function e(){var t=this.props,a=t.autoSelectFirstOption,n=t.className,i=t.displayValue,o=t.isLoading,s=t.labelId,l=t.membersOnly,c=t.name,u=t.onChange,d=t.onClearButtonClick,p=t.onClose,f=t.onFilterInputChange,h=t.onOutsideClick,v=t.onOpen,g=t.onOptionHighlighted,b=t.onScroll,_=t.optionClassName,y=t.options,k=t.optionsListOffsetBottom,O=t.optionsListOffsetTop,w=t.optionsListWidth,E=t.optionsRowHeight,C=t.optionGroups,j=t.pillarClassName,I=t.placeholder,T=t.selectedOption,N=t.selectedValueClassName,R=t.type,M=t.useFullWidthOptions,x=t.usePlaceholderOption,D=t.wrapperClassName,F=S()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var L=this.state.filterQuery;var B=A()("c-input_select__wrapper",D);var U=A()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===R},n);var q=A()("p-workspace_search__clear-button",{hidden:!L&&!i});return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:B,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},m.a.createElement("div",r()({},F,{"aria-labelledby":s,className:U,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),m.a.createElement(P["c"],{className:q,onClick:this.onClearInput,tabIndex:"0",ref:this.setRef("closeButton")}))}}]);return t}(M["a"]);G.displayName="WorkspaceSearchSelect";G.propTypes=U;G.defaultProps=q;var H=G;var W=a(456);var V=a(1757);var z={item:v.a.object,type:v.a.oneOf(["member","workspace"]),featureReactMessages:v.a.bool.isRequired,featureReactMemberProfileCard:v.a.bool.isRequired};var Q={item:{},type:"member"};var K=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(a,["maybeRenderTitle","maybeRenderEmail"]);return a}l()(t,[{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var a=t.item,n=t.type;var r=this.props,i=r.featureReactMemberProfileCard,o=r.featureReactMessages;return m.a.createElement(W["a"],{entityType:n,dimension:36,entityData:a,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:o,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function e(t){var a=t.item,n=t.type;var r=Object(b["get"])(a,"profile");var i=r.real_name,o=r.email,s=r.title;return m.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:n}),m.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},m.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(s),this.maybeRenderEmail(o))))}},{key:"renderItemAsWorkspace",value:function e(t){var a=t.item,n=t.type;var r=a.name,i=a.description;return m.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:n}),m.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},m.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},r),m.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.item,n=t.type;return"member"===n?this.renderItemAsMember({item:a,type:n}):this.renderItemAsWorkspace({item:a,type:n})}}]);return t}(f["PureComponent"]);K.displayName="WorkspaceSearchOptionsListItem";var Y=K;K.defaultProps=Q;var J=a(1759);var Z=new k["b"]("workspace_directory");var X={className:v.a.string,containerIdSelector:v.a.string,fetchDirectoryWorkspaces:v.a.func.isRequired,fetchMembers:v.a.func.isRequired,membersOnly:v.a.bool,onClearInput:v.a.func,onOptionsListOpened:v.a.func,onOptionsListClosed:v.a.func,prepopulatedOption:v.a.object,triggerAction:v.a.func};var $={className:"",containerIdSelector:"",membersOnly:true,onClearInput:b["noop"],onOptionsListClosed:b["noop"],onOptionsListOpened:b["noop"],prepopulatedOption:void 0,triggerAction:b["noop"]};var ee=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={nextCursorMark:"*",options:[],totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(b["bindAll"])(a,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);a.select=null;a.debouncedOnFilterInputChange=Object(b["debounce"])(a.onFilterInputChange,100);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.prepopulatedOption,n=t.membersOnly;Object(b["isEmpty"])(a)||this.setPrepopulatedOptionData(a);this.getOptionsFetcher();n||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var a=this.props.prepopulatedOption;var n=t.prepopulatedOption;Object(b["isEmpty"])(a)||a===n||this.setPrepopulatedOptionData(a)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var a=this.props.membersOnly;var n=this.state,r=n.currentOptionsData,i=n.currentSearchQuery;var o=void 0;var s=void 0;var l=void 0;if(t===E["b"]){o={id:E["b"],displayValue:i};l=r}else if(a){o=Object(b["find"])(r,{id:t});s=Object(y["getMemberRealName"])(o);l=[o]}else{o=Object(b["chain"])(Object(b["values"])(r)).flatten().find({id:t}).value();var c=Object(E["h"])(o);s=c?Object(y["getMemberRealName"])(o):Object(b["get"])(o,"name");l=c?{members:[o],workspaces:[]}:{members:[],workspaces:[o]}}this.setState(function(){var e={value:t,selectedOptionData:o,currentSearchQuery:t===E["b"]?i:s,nextCursorMark:"*",currentOptionsData:l};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onFilterInputChange",value:function e(t){var a=this.props,n=a.triggerAction,r=a.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);r&&n({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onOptionHighlighted",value:function e(t){var a=!Object(b["isEmpty"])(t);this.setIsAnOptionHighlighted(a)}},{key:"onScroll",value:function e(t){var a=200;var n=this.state,r=n.currentSearchQuery,i=n.currentOptionsData,o=void 0===i?[]:i,s=n.totalResultsCount;var l=t.clientHeight,c=t.scrollHeight,u=t.scrollTop;var d=c-(u+l)<a;d&&o.length<s&&this.getOptionsFetcher(r,{doFetchNextPage:true})}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,a=t.selectedOptionData,n=t.currentSearchQuery,r=t.isAnOptionHighlighted;if(!n||r)return;var i=Object(b["get"])(this.select,"filterInput.value",n);if(!a){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:E["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setCurrentOptionsData",value:function e(t){var a=t.optionData,n=t.isNewSearch,r=t.totalResultsCount;var i=this.state.currentOptionsData;var o=void 0;o=n?a:Object(b["unionBy"])(i,a,"id");this.setState(function(){return{currentOptionsData:o,totalResultsCount:r}});this.setIsLoading(false)}},{key:"setCurrentOptionGroupsData",value:function e(t){var a=t.memberOptionData,n=t.workspaceOptionData,r=t.isNewSearch,i=t.totalResultsCount,o=t.memberResultsCount,s=void 0===o?0:o,l=t.workspaceResultsCount,c=void 0===l?0:l;var u=this.state.currentOptionsData;var d=void 0;var p=!s&&!c||i?i:s+c;d=r?{members:a,workspaces:n}:{members:Object(b["unionBy"])(Object(b["get"])(u,"members"),a,"id"),workspaces:Object(b["unionBy"])(Object(b["get"])(u,"workspaces"),n,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:p,memberResultsCount:s,workspaceResultsCount:c}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function e(t){var a=Z.t("Search for a teammate");var n=Z.t("Search");return t?a:n}},{key:"getOptionsFetcher",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.forceNewSearch,r=void 0!==n&&n,i=a.doFetchNextPage,o=void 0!==i&&i;var s=this.state.currentSearchQuery;var l=this.props.membersOnly;var c=l?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!o&&t===s&&!r)return null;u.nextCursorMark=s===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return c({args:u,forceNewSearch:r,newSearchQuery:t,stashedSearchQuery:s})}},{key:"initKeyCommands",value:function e(){var t=new O["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"fetchMemberData",value:function e(t){var a=this;var n=t.args,r=t.forceNewSearch,i=t.newSearchQuery,o=t.stashedSearchQuery;var s=this.props.fetchMembers;return s(n).then(function(e){var t=e.items,n=void 0===t?[]:t,s=e.next_cursor_mark,l=e.num_found;if(!n.length&&"*"!==s)return;a.setNextCursorMark(s);a.setCurrentOptionsData({optionData:n,isNewSearch:r||o!==i,totalResultsCount:l})})}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var a=this;var n=t.args,r=t.forceNewSearch,i=t.newSearchQuery,o=t.stashedSearchQuery;var s=this.props.fetchMembers;var l=[s(n),this.props.fetchDirectoryWorkspaces(n)];return Promise.all(l).then(function(e){var t=e[0],n=t.items,s=void 0===n?[]:n,l=t.next_cursor_mark,c=t.num_found;var u=e[1],d=u.items,p=void 0===d?[]:d,f=u.next_cursor_mark,m=u.num_found;var h=void 0;if(!s.length&&"*"!==l&&!p.length&&"*"!==f)return;s.length&&!p.length?a.setNextCursorMark(l):p.length&&!s.length&&a.setNextCursorMark(f);s.length&&!p.length?h=c:p.length&&!s.length&&(h=m);a.setCurrentOptionGroupsData({memberOptionData:s,workspaceOptionData:p,isNewSearch:r||o!==i,totalResultsCount:h,memberResultsCount:c,workspaceResultsCount:m})})}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"focus",value:function e(){this.select.focus()}},{key:"blur",value:function e(){this.select.blur()}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var a=this.state.selectedOptionData;var n=Object(E["h"])(a)?"member":"workspace";t({selectedOptionData:a,type:n})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var a=this;var n=this.props.membersOnly;var r=this.state.selectedOptionData;var i=[];if(n)i=Object(b["map"])(t,function(e){return a.formatMemberOptionData(e)});else{var o=t.members,s=t.workspaces;var l=Object(b["get"])(o,"length",0);var c=Object(b["get"])(s,"length",0);if(l){var u={label:this.formatMemberOptionsGroupsHeader(),options:[]};var d=c>0?Object(b["slice"])(o,0,4):o;u.options=Object(b["map"])(d,function(e){return a.formatMemberOptionData(e)});i.push(u)}if(c){var p={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};p.options=Object(b["map"])(s,function(e){return a.formatWorkspaceOptionData(e)});i.push(p)}}return i}},{key:"formatMemberOptionData",value:function e(t){var a=Object(y["getMemberRealName"])(t);var n=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:n,displayValue:a}}},{key:"formatWorkspaceOptionData",value:function e(t){var a=Object(b["get"])(t,"name");var n=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:n,displayValue:a}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,a=t.memberResultsCount,n=t.selectedOptionData;var r=n?1:a;return Z.t("Search by coworker ({num})",{num:r})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var a=this.state,n=a.currentSearchQuery,r=a.workspaceResultsCount,i=a.selectedOptionData;var o=Object(b["get"])(t,"displayValue","")?Object(b["get"])(t,"displayValue",""):n;var s=i?1:r;var l=Object(E["c"])()?50:150;var c=Object(b["get"])(o,"length",0)>l?o.slice(0,l)+"...":o;return Z.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(k["m"])(c),num:s})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return m.a.createElement("div",{className:"p-workspace_search_options_list_item"},m.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},m.a.createElement(C["b"],{type:"search"})),m.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},m.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},Z.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(k["m"])(t)}))))}},{key:"renderMemberItemTemplate",value:function e(t){var a=t.item,n=t.type;return m.a.createElement(Y,{item:a,type:n,featureReactMessages:true,featureReactMemberProfileCard:true})}},{key:"render",value:function e(){var t=this.props,a=t.containerIdSelector,n=t.membersOnly;var i=this.state,o=i.value,s=i.currentOptionsData,l=i.loadingResults,c=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var p=this.getBoundingRect(a),f=p.bottom,h=void 0===f?0:f,v=p.top,g=void 0===v?0:v;var _={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:c,isLoading:l,membersOnly:n,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-h,optionsListOffsetTop:g,optionsRowHeight:48,placeholder:this.getPlaceHolderText(n),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:o,wrapperClassName:"p-workspace_search__wrapper"};n?_.options=this.formatOptionsDataArrayOrObject(s):_.optionGroups=this.formatOptionsDataArrayOrObject(s);if(u&&!o)if(Object(b["get"])(u,"id")===E["b"]){_.selectedOption=u;_.displayValue=Object(b["get"])(u,"displayValue")}else{var y=Object(E["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);_.selectedOption=u;_.displayValue=Object(b["get"])(y,"displayValue")}return m.a.createElement("div",{className:"position_relative"},m.a.createElement(H,r()({},_,{ref:this.setSelectRef})))}}]);return t}(f["Component"]);ee.displayName="WorkspaceSearch";ee.defaultProps=$;var te={fetchMembers:w["o"],fetchDirectoryWorkspaces:w["i"]};var ae=Object(g["connect"])(null,te,null,{withRef:true})(ee);var ne=t["a"]=ae},,function(e,t,a){"use strict";var n=a(2);var r=a.n(n);var i=a(26);var o=a(44);var s=a(322);var l=a(78);var c=a(19);var u=a(21);var d=a(11);var p=a(271);var f=a(36);var m=a(465);var h=a(323);var v=a(370);var g=a(12);var b=a(16);var _=a(985);var y=a(973);var k=a(1119);var O=a(1120);var w=a(1121);var E=a(10);var C=new E["b"]("threads");function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.names,a=e.replyCount,n=e.replyUsersCount,r=e.repliersIncludesSelf;if(!a||!n)return"";if(1===a)return C.t("1 reply");if(1===n){if(r)return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from you",{reply_count:a});return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name}",{reply_count:a,user_name:t[0]})}if(2===n){if(r)return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name} and you",{reply_count:a,user_name:t[0]});return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1} and {user_name2}",{reply_count:a,user_name1:t[0],user_name2:t[1]})}if(3===n){if(r)return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and you",{reply_count:a,user_name1:t[0],user_name2:t[1]});return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and {user_name3}",{reply_count:a,user_name1:t[0],user_name2:t[1],user_name3:t[2]})}return C.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and {num_others, plural, =1{# other} other{# others}}",{reply_count:a,user_name1:t[0],user_name2:t[1],num_others:n-2})}var S=a(1122);var I=a(971);var T=a(972);var N=a(605);var A=a(745);var R=a(974);var M=a(171);var x=a(144);var P=a(272);var D=a(351);var F=a(474);a.d(t,"c",function(){return G});a.d(t,"b",function(){return K});a.d(t,"a",function(){return Y});var L=new E["b"]("message");var B=new E["b"]("files");var U=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.channelId,r=a.ts;var i=Object(o["getMessageByTimestamp"])(t,n,r);if(!i||!i.text)return null;return G(t,i.text)};function q(e,t){var a=t.user;var n=Object(i["getMemberById"])(e,a);return Object(b["getPrefCompliantMemberName"])(e,n)}function G(e,t){if(!t)return"";var a=Object(F["b"])(t,"EDIT",{jumbomoji:false,allow_intra_word_formatting:false});return Object(_["a"])(a).reduce(function(t,a){if("member"===a.type){var n=Object(i["getMemberById"])(e,a.id);var r=Object(b["getMemberMentionName"])(n);return t+"@"+(r||a.id)}if("channel"===a.type){var o=Object(c["getChannelById"])(e,a.id);var s=o?o.name:"";return t+"#"+s}if("command"===a.type){if("here"===a.data.type||"channel"===a.data.type||"everyone"===a.data.type||"group"===a.data.type)return t+"@"+a.data.type;if("date"===a.data.type)return t+a.data.label;if("team"===a.data.type||"subteam"===a.data.type)return t+a.data.label}if(a.text)return t+a.text;return t},"")}function H(e,t){var a=Object(b["getPrefCompliantMemberNameById"])(e,t.author_id,true,false);var n=Object(M["k"])(e,t.ts);var r=Object(g["getDisplayName"])(Object(c["getChannelById"])(e,t.channel_id));var i=G(e,t.text);if(t.is_reply_unfurl)return L.t("{authorName} replied to a thread in {channelName} on {date}: {messageText}",{authorName:Object(E["m"])(a),date:n,channelName:r,messageText:Object(E["m"])(i)});return L.t("{authorName} on {date} in {channelName}: {messageText}",{authorName:Object(E["m"])(a),date:n,channelName:r,messageText:Object(E["m"])(i)})}function W(e,t){return t.service_name+" "+t.author_name+" "+t.author_subname+" "+G(e,t.text)+" "+Object(M["k"])(e,t.ts)+"."}function V(e,t){var a=t.text?G(e,t.text):"";return t.original_url+" "+a+"."}function z(e,t){var a=[];t.text&&a.push(G(e,t.text));t.fields&&t.fields.length>0&&a.push(t.fields.map(function(e){return e.title+": "+e.value}).join("; "));return a.join(" ")}function Q(e,t,a){var n=a.messageSubtype,i=a.messageText;var o=Object(u["getUserPref"])(e,"expand_inline_imgs");var s=Object(u["getUserPref"])(e,"expand_non_media_attachments");if(!t)return[];return r.a.compact(t.map(function(t){if(!Object(v["d"])({attachment:t,messageSubtype:n,messageText:i,expandInlineImgsPref:o,expandNonMediaAttachmentsPref:s}))return null;var a=[];t.pretext&&a.push(t.pretext);t.author_name&&a.push(t.author_name);t.title&&a.push(t.title);t.is_msg_unfurl?a.push(H(e,t)):"twitter"===t.service_name?a.push(W(e,t)):t.from_url?a.push(V(e,t)):a.push(z(e,t));return a.join(" ")}))}function K(e,t,a){var n=Object(d["isFeatureEnabled"])(e,"feature_file_threads");var r=Object(f["getMsgSenderEntity"])(e,t);var i=q(e,a);var o=Object(A["b"])(a);var s=Object(A["a"])(o,{file:a,subtype:Object(f["getMessageSubtype"])(t),isUpload:t.upload,userId:r.userId,featureFileThreads:n});if(!s)return null;var l=a.pretty_type||B.t("file");var c=L.t("{uploader_name}{uploader_name_affix}",{uploader_name:i,uploader_name_affix:Object(E["l"])(i)});return s({uploader_name_possessive_html:c,file_pretty_name:l})}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,n=t.channelId,v=t.previousMessageTs,g=t.rollup;var _=Object(o["getMessageByTimestamp"])(e,n,a);var E=Object(c["getChannelById"])(e,n);if(!_||!E)return null;var C=Object(d["isFeatureEnabled"])(e,"feature_file_threads");var A=Object(d["isFeatureEnabled"])(e,"feature_better_join_leave_strings");var M=C?null:_.file;var F=C?_.files:null;var B=C?Object(l["getFileById"])(e,r.a.first(F)):Object(l["getFileById"])(e,M);var H=Object(f["getMessageSubtype"])(_);var W=Object(m["a"])(H);var V=Object(f["getMsgSenderEntity"])(e,_);var z=Object(d["getCurrentUserId"])(e);var Y=["bot_message","me_message","file_comment","file_mention","file_share","file_upload","thread_broadcast","channel_join","channel_leave","group_join","group_leave"];if(H&&!W&&-1===Y.indexOf(H))return null;var J="";var Z=null;if(-1!==["channel_join","channel_leave","group_join","group_leave"].indexOf(H)){var X=Object(T["a"])(e,g);var $=Object(I["a"])({plainText:true,rollup:X,channel:E,user:V.userId,isAppUser:Object(b["isAppUser"])(Object(i["getMemberById"])(e,V.userId)),i18nReplaceCallback:r.a.noop,featureBetterJoinLeaveStrings:A});J=$.join("")}else if(-1!==["sh_room_shared","sh_room_created"].indexOf(H)){var ee="sh_room_shared"===H?L.t("Shared a call"):L.t("Started a call");var te=_._call_id;var ae=Object(p["d"])(e,te);if(ae){var ne=ae.name?ae.name:"";var re=Object(p["e"])(ae)||[];var ie=Object(R["a"])({dateEnd:ae.endTimestamp,isDmCall:ae.isDmCall,wasMissed:Object(p["i"])(ae),wasRejected:Object(p["j"])(ae),isCreator:z===ae.createdBy,isParticipant:-1!==re.indexOf(z),dmCallName:Object(p["f"])(e,te),participantsCount:re.length});J="sh_room_shared"===H&&ne?L.t("Shared a call: {callName}. {callDescription}.",{callName:ne,callDescription:ie}):"sh_room_shared"===H?L.t("Shared a call. {callDescription}.",{callDescription:ie}):ne?L.t("Started a call: {callName}. {callDescription}.",{callName:ne,callDescription:ie}):L.t("Started a call. {callDescription}.",{callDescription:ie})}else J=ee}else if(W){var oe=Object(d["isFeatureEnabled"])(e,"feature_sli_channel_archive_suggestions");var se=Object(d["isFeatureEnabled"])(e,"feature_wta_conversations_api_channel_created_msg");var le=oe&&"sli_channel_archive_suggestions"===Object(D["getGroupForUser"])(e,"sli_channel_archive_suggestions");var ce=Object(i["getCurrentMember"])(e);J=Object(y["a"])({message:_,channel:E,member:ce,inSliChannelArchiveSuggestionsExperiment:le,featureWtaConversationsApiChannelCreated:se});J=G(e,J)}else if(B&&-1!==["file_mention","file_share","file_upload","file_comment"].indexOf(H)){var ue=B.user;var de=q(e,B);if("file_comment"===H){var pe=ue!==_.comment.user;var fe=Object(o["getMessageByTimestamp"])(e,n,v);var me=Object(k["a"])({plainText:true,isFollowup:Object(O["a"])(_,fe),fileMode:B.mode,fileLink:B.title?B.title:B.name,userId:pe?ue:null,userName:pe?de:null,userLink:pe?de:null});Z=_.comment&&B&&Object(l["getFileCommentById"])(e,B.id,_.comment.id);Z&&(J=G(e,me+" "+Z.comment))}else{J=U(e,{channelId:n,ts:_.ts});var he=K(e,_,B);he&&(J=he+": "+(B.title?B.title:B.name))}}else if("thread_broadcast"===H){var ve=Object(o["getMessageByTimestamp"])(e,n,_.thread_ts);var ge=Object(f["getMessageRootText"])(ve);if(C&&ve&&ve.files&&ve.files.length){var be=r.a.first(ve.files);var _e=Object(l["getFileById"])(e,be);ge=Object(f["getMessageRootText"])(ve,_e)}var ye=[];var ke=0;if(ve){if(ve.reply_users)ye=ve.reply_users;else{var Oe=ve.replies||[];ye=r()(Oe).map("user").uniq().value()}ke=ve.reply_users_count?ve.reply_users_count:ye.length}var we=ve?ve.reply_count:null;var Ee=r.a.includes(ye,z);var Ce=Object(w["a"])(e,ye);var je=j({names:Ce,replyCount:we,replyUsersCount:ke,repliersIncludesSelf:Ee});var Se=G(e,_.text);J=Object(S["a"])()+" "+ge+" "+je+" "+Se}else J=U(e,{channelId:n,ts:_.ts});var Ie=Object(h["b"])(_,B);var Te=Object(f["getMessageAttachments"])(_);var Ne=Q(e,Te,{messageSubtype:H,messageText:_.text});var Ae={name:"",time:Object(x["a"])(_.ts,{do24hrTime:Object(u["getUserPref"])(e,"time24"),includeSeconds:false}),text:J,reactionCount:Object(s["getTotalReactionCountForKey"])(e,Ie),replyCount:_.reply_count,isPinned:Object(P["c"])(_,E),isStarred:Object(f["isStarred"])(_,B,Z,C),attachmentCount:Te?Te.length:0,attachmentTexts:Ne};Ae.name=Object(N["a"])(e,{userId:V.userId,botId:V.botId,username:V.username,botProfile:_.bot_profile});return Ae}},,,,,,,,,,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(97);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(801);var m=function(e){p()(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.keys,n=e.heightCache,i=e.containerHeight,o=void 0===i?0:i,s=e.stickToBottom,c=void 0!==s&&s,u=e.bottomMargin,d=void 0===u?0:u,p=e.ANCHOR_OFFSET,f=void 0===p?0:p,m=e.STICKY_EPSILON,h=void 0===m?2:m,v=e.STICKY_EPSILON_SETHEIGHT,g=void 0===v?2:v;r()(this,t);var b=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{keys:a,heightCache:n}));b.containerHeight=o;b.stickToBottom=c;b.bottomMargin=d;b.STICKY_EPSILON=h;b.STICKY_EPSILON_SETHEIGHT=g;b.ANCHOR_OFFSET=f;b.anchorOffset=f;b.anchor=false;return b}o()(t,[{key:"getOffsetForKey",value:function e(t){if(!t)return this.totalHeight;var a=this.getTop(t);if(void 0===a)return 0;return a-this.anchorOffset}},{key:"setHeight",value:function e(a,n,r){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,a,n);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(r,this.STICKY_EPSILON_SETHEIGHT)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,a,n);return this.bracketScrollTop(Infinity)}var i=r;var o=this.getBottom(a);if(o<=r+this.anchorOffset){var s=n-this.getHeight(a);i+=s}u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,a,n);return this.bracketScrollTop(i)}},{key:"setKeys",value:function e(a,n){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(n)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);return this.bracketScrollTop(Infinity)}var r=n+this.anchorOffset;var i=this.findAnchor(this.keys,a,r);if(!i){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);return this.bracketScrollTop(n)}var o=this.getTop(i)-r;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);var s=this.getTop(i)-r;var l=o-s;return this.bracketScrollTop(n-l)}},{key:"setContainerHeight",value:function e(t,a){if(false!==this.anchor){this.containerHeight=t;this.layout();return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(a)){this.containerHeight=t;this.layout();return this.bracketScrollTop(Infinity)}this.containerHeight=t;this.layout();return a}},{key:"setBottomMargin",value:function e(t){this.bottomMargin=t}},{key:"setStickToBottom",value:function e(t){this.stickToBottom=t}},{key:"setAnchor",value:function e(t,a){this.anchor=t;this.anchorOffset="number"!==typeof a?this.ANCHOR_OFFSET:a}},{key:"findAnchor",value:function e(t,a,n){for(var r=0;r<t.length;r++){var i=t[r];if(this.getBottom(i)>n)for(var o=0;o<a.length;o++)if(a[o]===i)return i}return null}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.totalHeight-this.containerHeight+this.bottomMargin,t))}},{key:"shouldStickToBottom",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STICKY_EPSILON;if(!this.stickToBottom)return false;return t>=this.totalHeight-this.containerHeight-a+this.bottomMargin}}]);return t}(f["a"]);t["a"]=m},function(e,t,a){"use strict";a.d(t,"a",function(){return i});a.d(t,"b",function(){return o});var n=a(90);var r=a(12);function i(e,t){return(Object(n["getEditableRequestChannelObjects"])(e)||{})[t]}function o(e,t){var a=Object(n["getEditableRequestChannelObjects"])(e)||{};return Object.values(a).filter(function(a){return Object(r["getDisplayNameForChannel"])(e,a,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})===t.replace(/#/g,"")})[0]}},function(e,t,a){"use strict";a.d(t,"a",function(){return n});function n(e){function t(e,t){return e<<t|e>>>32-t}function a(e,t){var a=2147483648&e;var n=2147483648&t;var r=1073741824&e;var i=1073741824&t;var o=(1073741823&e)+(1073741823&t);if(r&i)return 2147483648^o^a^n;if(r|i){if(1073741824&o)return 3221225472^o^a^n;return 1073741824^o^a^n}return o^a^n}function n(e,t,a){return e&t|~e&a}function r(e,t,a){return e&a|t&~a}function i(e,t,a){return e^t^a}function o(e,t,a){return t^(e|~a)}function s(e,r,i,o,s,l,c){var u=a(e,a(a(n(r,i,o),s),c));return a(t(u,l),r)}function l(e,n,i,o,s,l,c){var u=a(e,a(a(r(n,i,o),s),c));return a(t(u,l),n)}function c(e,n,r,o,s,l,c){var u=a(e,a(a(i(n,r,o),s),c));return a(t(u,l),n)}function u(e,n,r,i,s,l,c){var u=a(e,a(a(o(n,r,i),s),c));return a(t(u,l),n)}function d(e){var t=e.length;var a=t+8;var n=(a-a%64)/64;var r=16*(n+1);var i=Array(r-1);var o=0;var s=0;var l=0;while(l<t){o=(l-l%4)/4;s=l%4*8;i[o]|=e.charCodeAt(l)<<s;l++}o=(l-l%4)/4;s=l%4*8;i[o]|=128<<s;i[r-2]=t<<3;i[r-1]=t>>>29;return i}function p(e){var t="";var a="";for(var n=0;n<=3;n++){var r=e>>>8*n&255;a="0"+r.toString(16);t+=a.substr(a.length-2,2)}return t}function f(e){var t=e.replace(/\r\n/g,"\n");var a="";for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<128)a+=String.fromCharCode(r);else if(r>127&&r<2048){a+=String.fromCharCode(r>>6|192);a+=String.fromCharCode(63&r|128)}else{a+=String.fromCharCode(r>>12|224);a+=String.fromCharCode(r>>6&63|128);a+=String.fromCharCode(63&r|128)}}return a}var m=[];var h=7;var v=12;var g=17;var b=22;var _=5;var y=9;var k=14;var O=20;var w=4;var E=11;var C=16;var j=23;var S=6;var I=10;var T=15;var N=21;m=d(f(e));var A=1732584193;var R=4023233417;var M=2562383102;var x=271733878;var P=A;var D=R;var F=M;var L=x;for(var B=0;B<m.length;B+=16){P=A;D=R;F=M;L=x;A=s(A,R,M,x,m[B+0],h,3614090360);x=s(x,A,R,M,m[B+1],v,3905402710);M=s(M,x,A,R,m[B+2],g,606105819);R=s(R,M,x,A,m[B+3],b,3250441966);A=s(A,R,M,x,m[B+4],h,4118548399);x=s(x,A,R,M,m[B+5],v,1200080426);M=s(M,x,A,R,m[B+6],g,2821735955);R=s(R,M,x,A,m[B+7],b,4249261313);A=s(A,R,M,x,m[B+8],h,1770035416);x=s(x,A,R,M,m[B+9],v,2336552879);M=s(M,x,A,R,m[B+10],g,4294925233);R=s(R,M,x,A,m[B+11],b,2304563134);A=s(A,R,M,x,m[B+12],h,1804603682);x=s(x,A,R,M,m[B+13],v,4254626195);M=s(M,x,A,R,m[B+14],g,2792965006);R=s(R,M,x,A,m[B+15],b,1236535329);A=l(A,R,M,x,m[B+1],_,4129170786);x=l(x,A,R,M,m[B+6],y,3225465664);M=l(M,x,A,R,m[B+11],k,643717713);R=l(R,M,x,A,m[B+0],O,3921069994);A=l(A,R,M,x,m[B+5],_,3593408605);x=l(x,A,R,M,m[B+10],y,38016083);M=l(M,x,A,R,m[B+15],k,3634488961);R=l(R,M,x,A,m[B+4],O,3889429448);A=l(A,R,M,x,m[B+9],_,568446438);x=l(x,A,R,M,m[B+14],y,3275163606);M=l(M,x,A,R,m[B+3],k,4107603335);R=l(R,M,x,A,m[B+8],O,1163531501);A=l(A,R,M,x,m[B+13],_,2850285829);x=l(x,A,R,M,m[B+2],y,4243563512);M=l(M,x,A,R,m[B+7],k,1735328473);R=l(R,M,x,A,m[B+12],O,2368359562);A=c(A,R,M,x,m[B+5],w,4294588738);x=c(x,A,R,M,m[B+8],E,2272392833);M=c(M,x,A,R,m[B+11],C,1839030562);R=c(R,M,x,A,m[B+14],j,4259657740);A=c(A,R,M,x,m[B+1],w,2763975236);x=c(x,A,R,M,m[B+4],E,1272893353);M=c(M,x,A,R,m[B+7],C,4139469664);R=c(R,M,x,A,m[B+10],j,3200236656);A=c(A,R,M,x,m[B+13],w,681279174);x=c(x,A,R,M,m[B+0],E,3936430074);M=c(M,x,A,R,m[B+3],C,3572445317);R=c(R,M,x,A,m[B+6],j,76029189);A=c(A,R,M,x,m[B+9],w,3654602809);x=c(x,A,R,M,m[B+12],E,3873151461);M=c(M,x,A,R,m[B+15],C,530742520);R=c(R,M,x,A,m[B+2],j,3299628645);A=u(A,R,M,x,m[B+0],S,4096336452);x=u(x,A,R,M,m[B+7],I,1126891415);M=u(M,x,A,R,m[B+14],T,2878612391);R=u(R,M,x,A,m[B+5],N,4237533241);A=u(A,R,M,x,m[B+12],S,1700485571);x=u(x,A,R,M,m[B+3],I,2399980690);M=u(M,x,A,R,m[B+10],T,4293915773);R=u(R,M,x,A,m[B+1],N,2240044497);A=u(A,R,M,x,m[B+8],S,1873313359);x=u(x,A,R,M,m[B+15],I,4264355552);M=u(M,x,A,R,m[B+6],T,2734768916);R=u(R,M,x,A,m[B+13],N,1309151649);A=u(A,R,M,x,m[B+4],S,4149444226);x=u(x,A,R,M,m[B+11],I,3174756917);M=u(M,x,A,R,m[B+2],T,718787259);R=u(R,M,x,A,m[B+9],N,3951481745);A=a(A,P);R=a(R,D);M=a(M,F);x=a(x,L)}var U=p(A)+p(R)+p(M)+p(x);return U.toLowerCase()}},,function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(15);var l=a.n(s);var c=a(14);var u=a(41);var d=a(10);var p=a(11);var f=a(1950);var m=new d["b"]("app_token");var h={type:r.a.oneOf(["unknown","non-existent"]),subtler:r.a.bool,featureAppsStoreM11n:r.a.bool.isRequired};var v={type:"unknown",subtler:false};var g=function e(t){var a=t.featureAppsStoreM11n;if(!a)return null;var n=l()("c-missing_app",{"c-missing_app--unknown":"unknown"===t.type,"c-missing_app--nonexistent":"non-existent"===t.type,"c-missing_app--subtler":t.subtler});if("unknown"===t.type)return o.a.createElement(u["d"],{tip:a?m.t("Loading\u2026"):""},o.a.createElement("span",{className:n}));if("non-existent"===t.type)return o.a.createElement(u["d"],{tip:a?m.t("Private app info"):""},o.a.createElement("span",{className:n}));return null};g.defaultProps=v;var b=function e(t){return{featureAppsStoreM11n:Object(p["isFeatureEnabled"])(t,"feature_apps_store_m11n")}};var _=Object(c["connect"])(b)(g);var y=t["a"]=_},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(15);var v=a.n(h);var g=a(1746);var b={children:p.a.node.isRequired,className:p.a.string};var _={children:null,className:""};var y=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=v()("p-pill",this.props.className);return m.a.createElement("div",{className:t},this.props.children)}}]);return t}(f["PureComponent"]);y.displayName="Pill";y.defaultProps=_;var k=y;var O=t["a"]=k},,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"getMaxTimestamp",function(){return f});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(2);var l=a.n(s);var c=a(4);var u=a(44);var d={maxTs:"0"};var p=Object(c["c"])(r()({},u["addMessages"].getType(),function(e,t){if(!t||!t.length||!l.a.isArray(t))return e;var a=l.a.maxBy(t,"ts");if(!a)return e;var n=a.ts>e.maxTs?a.ts:e.maxTs;return o()({},e,{maxTs:n})}),d);t["default"]=p;var f=Object(c["d"])(function(e){return e&&e.notifications&&e.notifications.maxTs})},function(e,t,a){"use strict";a.r(t);a.d(t,"syncDownloads",function(){return h});a.d(t,"fetchFileInfo",function(){return v});a.d(t,"getDownloads",function(){return _});a.d(t,"getDownloadIds",function(){return y});var n=a(9);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(4);var u=a(78);var d=a(11);var p=a(311);var f=a(131);var m=a(147);var h=Object(c["a"])("Sync downloads from desktop");h.propTypes=l.a.object.isRequired;var v=Object(c["e"])("Fetch multiple files by ID and upsert them",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.ids;if(Object(d["isFeatureEnabled"])(t(),"feature_modern_files_info"))return e(Object(p["d"])({fileIds:n,reason:"downloads-store.fetchFileInfo"}));return Object(f["g"])(n).then(function(t){return e(Object(u["bulkAddFiles"])(t))}).catch(function(){return Object(m["f"])("Failed to fetch files",n)})});v.propTypes={ids:l.a.arrayOf(l.a.string).isRequired};var g={};var b=Object(c["c"])(r()({},h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t}),g);t["default"]=b;var _=Object(c["d"])(function(e){return o.a.values(e&&e.downloads)});var y=Object(c["d"])(function(e){return e&&e.downloads&&Object.keys(e.downloads)})},,function(e,t,a){"use strict";a.d(t,"b",function(){return J});a.d(t,"c",function(){return Z});var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(14);var b=a(3324);var _=a(2);var y=a.n(_);var k=a(15);var O=a.n(k);var w=a(17);var E=a(161);var C=a(212);var j=a(11);var S=a(170);var I=a(270);var T=a(16);var N=a(10);var A=a(18);var R=a(65);var M=a(20);var x=a(283);var P=a(456);var D=a(871);var F=a(92);var L=a(1144);var B=a(608);var U=a(174);var q=a(1406);var G=a.n(q);var H=new N["b"]("grid_onboarding");var W={orgName:m.a.string,selectedMember:m.a.object.isRequired,featureZeroWorkspaceOnboarding:m.a.bool.isRequired,fetchDirectoryWorkspaces:m.a.func.isRequired,scrollElement:m.a.any,enqueueToast:m.a.func,onFooterClick:m.a.func};var V={orgName:"",workspaces:[],onWorkspaces:false,scrollElement:window,enqueueToast:_["noop"],onFooterClick:_["noop"]};var z=24;var Q=1200;var K=Object(w["b"])();function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(_["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function J(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&a}function Z(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&!a}function X(e){if(!e)return"";return{oneJoinableWorkspace:H.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:H.t("Join the workspace that seems right for your role to get started."),noAccess:H.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:H.t("Try searching for someone else on your team."),onApiError:H.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,a=e.key,n=e.tag;if("a"===n)return v.a.createElement(R["a"],{onClick:function e(){return window.location.reload(true)},target:"_self",key:a},t);return{text:t}})}}var $=function e(t){var a=t.workspaces,n=t.noAccessToWorkspaces,r=t.noWorkspaces,i=t.hasApiError,o=t.featureZeroWorkspaceOnboarding;if(!o)return"";var s=X(o);if(i)return s.onApiError;var l=Y(a).length;if(1===l)return s.oneJoinableWorkspace;if(l>1)return s.moreThanOneJoinableWorkspaces;if(n)return s.noAccess;if(r)return s.noWorkspaces;return""};var ee=function e(t){var a=t.noAccessToWorkspaces,n=t.noWorkspaces,r=t.memberRealName,i=t.totalWorkspaces,o=t.hasApiError,s=t.featureZeroWorkspaceOnboarding;if(!s)return"";if(o)return H.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(N["m"])(r)});if(a)return H.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(N["m"])(r)});if(n)return H.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(N["m"])(r)});return H.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(N["m"])(r),numWorkspaces:i})};var te=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};a.resultsList=null;a.searchBar=null;a.userHasNoAccessToWorkspaces=false;a.memberHasNoWorkspaces=false;a.noWorkspacesToDisplay=false;a.doRenderSearchAgainButton=false;Object(_["bindAll"])(a,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return a}l()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.setIsMobileView(Object(U["c"])());this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeFetchNextPage(a);this.maybeTriggerNewSearch(a);this.maybeUpdateMemberRealName(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(U["c"])();var a=this.state.isMobileView!==t;if(t||a){this.resultsList.invalidateRowHeights();a&&this.setIsMobileView(t)}}},{key:"onScroll",value:function e(t){var a=t.scrollTop,n=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:a,scrollHeight:n})}},{key:"onSearchAgainButtonClick",value:function e(t){t.preventDefault();t.stopPropagation();this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var a=t.selectedOptionData;a&&this.setSelectedMember(a)}},{key:"onButtonActionReject",value:function e(t){var a=t.node;a&&this.setToastText(a)}},{key:"onButtonActionResolve",value:function e(t){var a=t.node,n=t.i,r=t.workspace;Object(_["isNumber"])(n)&&r&&this.setWorkspaceByIndex({index:n,workspace:r});a&&this.setToastText(a)}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var a=t.workspaces,n=t.totalWorkspaces,r=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:a,totalWorkspaces:n,onWorkspaces:r,nextCursorMark:i}})}},{key:"setWorkspaceByIndex",value:function e(t){var a=t.index,n=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(a>=t.length){K.warn("SearchResultsScreen: Out of bounds index "+a+" passed into setWorkspaceByIndex");return e}t[a]=n;return{workspaces:t}})}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{viewport:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:v.a.createElement(x["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var a=Object(T["getMemberRealName"])(this.state.selectedMember);this.setMemberRealName(a)}}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop,n=t.scrollHeight;var r=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:n});r&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!r&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=this.state,n=a.nextCursorMark,r=a.selectedMember;this.setHasApiError(false);return this.props.fetchDirectoryWorkspaces({nextCursorMark:n,id:Object(_["get"])(r,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var a=e.num_found,r=e.on_workspaces,i=e.items;var o=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:o,totalWorkspaces:a,onWorkspaces:r,nextCursorMark:e.next_cursor_mark});n||Object(U["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(_["get"])(e,"num_found",0)})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);K.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,n=t.scrollTop;return a-(n+this.clientHeight)<Q}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"renderSearchBar",value:function e(){return v.a.createElement("div",{className:"p-grid_onboarding_results__search"},v.a.createElement(D["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var a=this.state,n=a.totalWorkspaces,r=a.selectedMember,i=a.hasApiError;var o=Object(T["getMemberRealName"])(r);var s=ee({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:n,memberRealName:o,hasApiError:i,featureZeroWorkspaceOnboarding:t});var l=O()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return v.a.createElement("div",{className:l},v.a.createElement("span",{className:"p-grid_onboarding__results_heading"},v.a.createElement(P["a"],{entityType:"member",dimension:z,entityData:r,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),s))}},{key:"renderSubheading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var a=this.state,n=a.workspaces,r=a.hasApiError;var i=$({workspaces:n,featureZeroWorkspaceOnboarding:t,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:r});var o=O()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return v.a.createElement("div",{className:o},i)}},{key:"renderWorkspaceCard",value:function e(t){var a=this;var n=this.state,i=n.workspaces,o=n.totalWorkspaces;var s=O()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===o-1});return v.a.createElement(L["a"],{team:i[t],size:"large",featureZeroWorkspaceOnboarding:true,className:s,onActionResolve:function e(n){return a.onButtonActionResolve(r()({},n,{i:t}))},onActionReject:function e(n){return a.onButtonActionReject(r()({},n,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var a=this.props.scrollElement;return v.a.createElement(b["a"],{scrollElement:a,onScroll:this.onScroll},function(e){var n=e.height,r=e.isScrolling,i=e.onChildScroll,o=e.scrollTop,s=e.registerChild;return v.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:s},v.a.createElement(B["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:a,onScroll:i,height:n,isScrolling:r,scrollTop:o}))})}},{key:"renderSearchAgainButton",value:function e(){return v.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},v.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},v.a.createElement(M["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},H.t("Search Again"))))}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var a=O()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return v.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},v.a.createElement(R["a"],{onClick:this.onFooterClick,className:a},H.t("View all {orgName} workspaces",{orgName:t}),v.a.createElement(A["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function e(){return v.a.createElement("div",{className:"p-grid_onboarding__spinner"},v.a.createElement(F["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,a=t.loadingWorkspaces,n=t.selectedMember;var r=a&&this.memberHasNoWorkspaces;if(r||!n)return this.renderInfiniteSpinner();return v.a.createElement(v.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),a&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!a&&this.renderFooter())}},{key:"render",value:function e(){var t=this.state,a=t.totalWorkspaces,n=t.onWorkspaces,r=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=J({totalWorkspaces:a,onWorkspaces:n});this.memberHasNoWorkspaces=Z({totalWorkspaces:a,onWorkspaces:n});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!r&&this.noWorkspacesToDisplay&&!i;return v.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},v.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]);return t}(h["Component"]);te.displayName="SearchResultsScreen";te.defaultProps=V;var ae=function e(t,a){var n=a.selectedMember,r=a.workspaces;var i=Object(S["getEnterpriseOrgName"])(t);return{selectedMember:n,workspaces:r,orgName:i,featureZeroWorkspaceOnboarding:Object(j["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(j["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var ne={enqueueToast:C["enqueueToast"],fetchDirectoryWorkspaces:I["i"]};t["a"]=Object(g["connect"])(ae,ne)(te)},,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="_testOnlySpyableDispatch";t["b"]=function(){return function(e){var t=function e(t){return e[n](t)};t[n]=e;return t}}},,,,,,,function(e,t,a){var n=a(726);var r=n(Object,"create");e.exports=r},function(e,t,a){var n=a(1776),r=a(1777),i=a(1778),o=a(1779),s=a(1780);function l(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n;l.prototype["delete"]=r;l.prototype.get=i;l.prototype.has=o;l.prototype.set=s;e.exports=l},function(e,t,a){var n=a(1037);function r(e,t){var a=e.length;while(a--)if(n(e[a][0],t))return a;return-1}e.exports=r},function(e,t,a){var n=a(1782);function r(e,t){var a=e.__data__;return n(t)?a["string"==typeof t?"string":"hash"]:a.map}e.exports=r},function(e,t,a){var n=a(1045);var r=1/0;function i(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}e.exports=i},function(e,t,a){var n,r,i;false;e.exports=a(1848)()},,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=true;var n=a(1329);Object.defineProperty(t,"instrument",{enumerable:true,get:function e(){return o(n).default}});Object.defineProperty(t,"ActionCreators",{enumerable:true,get:function e(){return n.ActionCreators}});Object.defineProperty(t,"ActionTypes",{enumerable:true,get:function e(){return n.ActionTypes}});var r=a(1804);Object.defineProperty(t,"persistState",{enumerable:true,get:function e(){return o(r).default}});var i=a(1843);Object.defineProperty(t,"createDevTools",{enumerable:true,get:function e(){return o(i).default}});function o(e){return e&&e.__esModule?e:{default:e}}},,,,,function(e){e.exports=[{name:"Smileys & People",emoji_names:["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","man-facepalming","woman-facepalming","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","man-cartwheeling","woman-cartwheeling","man-wrestling","woman-wrestling","man-playing-water-polo","woman-playing-water-polo","man-playing-handball","woman-playing-handball","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"]},{name:"Animals & Nature",emoji_names:["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"]},{name:"Food & Drink",emoji_names:["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"]},{name:"Travel & Places",emoji_names:["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{name:"Activities",emoji_names:["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"]},{name:"Objects",emoji_names:["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"]},{name:"Symbols",emoji_names:["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"]},{name:"Flags",emoji_names:["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]},{name:"Skin Tones",emoji_names:["skin-tone-2","skin-tone-3","skin-tone-4","skin-tone-5","skin-tone-6"]}]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(4);var r=a(180);var i=a(37);var o=a(90);var s=a(979);var l=a(699);var c=Object(n["e"])("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var a=t();e(Object(r["setSearchInputBoxUserQuery"])({textyString:""}));e(Object(i["setInterfaceMode"])({interfaceMode:i["interfaceModes"].EDIT}));e(Object(o["resetEditableRequest"])());e(Object(i["setDefaultTab"])());e(Object(s["a"])());if(!Object(i["getVisible"])(a)){e(Object(l["endSearchSession"])());var n=Object(i["getSessionTimeoutId"])(a);if(n){clearTimeout(n);e(Object(i["setSessionTimeoutId"])({sessionTimeoutId:null}))}}});c.propTypes=null;t["a"]=c},function(e,t,a){"use strict";var n=a(4);var r=a(63);var i=a(167);var o=a(242);var s=Object(n["e"])("Clear the search legacy input",function(e,t){if(Object(i["b"])(t())||Object(r["a"])())return;var a=window.$&&window.$("#search_terms");a&&Object(o["k"])(a,"")});s.propTypes=null;t["a"]=s},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(0);var v=a.n(h);var g=a(14);var b=a(15);var _=a.n(b);var y=a(2);var k=a.n(y);var O=a(72);var w=a(78);var E=a(497);var C=a(667);var j=a(876);var S={file:O["a"].File().isRequired,fileFromRedux:O["a"].File().isRequired,index:v.a.number,clogLinkClick:v.a.func,className:v.a.string,fullWidth:v.a.bool,onClick:v.a.func};var I={index:null,clogLinkClick:y["noop"],className:null,fullWidth:false,onClick:y["noop"]};var T=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();t.stopPropagation();t.nativeEvent.stopImmediatePropagation();this.props.onClick(t,{file:this.props.file,index:this.props.index})}},{key:"render",value:function e(){var t=this.props,a=t.file,n=t.fileFromRedux,i=t.clogLinkClick,o=t.fullWidth;var s=_()("p-search_file",this.props.className);var l=n&&n.title;var c=n&&n.name;var u=r()({},n,{title:a.search_title||a.title||l,name:a.search_name||a.name||c});return m.a.createElement(E["a"],{file:u,className:s,fullWidth:o,clogLinkClick:i},m.a.createElement(C["a"],{file:u,onClick:this.onClick},m.a.createElement(j["a"],{file:u,excludeTime:true})))}}]);return t}(f["PureComponent"]);T.displayName="SearchFile";T.defaultProps=I;var N=function e(t,a){var n=a.file;return{fileFromRedux:n?Object(w["getFileById"])(t,n.id):null}};t["a"]=Object(g["connect"])(N)(T)},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"d",function(){return d});a.d(t,"c",function(){return p});a.d(t,"b",function(){return f});var n=a(35);var r=a.n(n);var i=a(113);var o=a(692);var s=a(171);var l=a(10);var c=new l["b"]("do_not_disturb");var u=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.currentTime,s=void 0===n?r()().unix():n;var l=Object(i["a"])(s);var c=Object(i["a"])(t);var u=Math.ceil(Object(o["a"])(c,l));return u};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,n=void 0===a?"09:00":a;var i=r()().add(1,"days").format("YYYY-MM-DD");var o=r()(i+" "+n).unix();return u(o)};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,n=void 0===a?"09:00":a;var i=r()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD");var o=r()(i+" "+n).unix();return u(o)};var f=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.do24hrTime,i=void 0!==n&&n,o=a.today,l=void 0===o?r()().format("YYYY-MM-DD"):o,u=a.tomorrow,d=void 0===u?r()().add(1,"day").format("YYYY-MM-DD"):u,p=a.featureBetterSnooze,f=void 0!==p&&p,m=a.featureGlobalNav,h=void 0!==m&&m;if(!f&&!h)return"";var v=Object(s["l"])(t,{do24hrTime:i});var g=Object(s["i"])(t,{omitTime:true});if(g===l)return c.t("Notifications paused until {time}",{time:v});if(g===d)return c.t("Notifications paused until tomorrow at {time}",{time:v});return c.t("Notifications paused until {date} at {time}",{date:r()(g).format("dddd, MMMM Do"),time:v})}},,function(e,t,a){"use strict";a.d(t,"e",function(){return o});a.d(t,"f",function(){return s});a.d(t,"c",function(){return l});a.d(t,"a",function(){return c});a.d(t,"b",function(){return u});a.d(t,"g",function(){return d});a.d(t,"d",function(){return p});var n=a(2);var r=a.n(n);var i=a(13);var o=Object(i["c"])("TS.ui.apps_browser.routeAppOpen",r.a.noop);var s=Object(i["c"])("TS.ui.apps_browser.showAppTutorial",r.a.noop);var l=Object(i["c"])("TS.ui.apps_browser.canAppBeAdded",r.a.noop);var c=Object(i["c"])("TS.ui.apps_browser.addAppToChannel",r.a.noop);var u=Object(i["c"])("TS.ui.apps_browser.buildAddAppsTitle",r.a.noop);var d=Object(i["c"])("TS.ui.apps_browser.startAddApps",r.a.noop);var p=Object(i["c"])("TS.ui.apps_browser.ensureAppMembershipIsKnown",r.a.noop)},,,,function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return i});a.d(t,"c",function(){return o});var n=a(13);var r=Object(n["c"])("TS.client.unread.bulk_unread_count_change_sig.dispatch");var i=Object(n["c"])("TS.client.unread.legacyUpdateSortOrder");var o=Object(n["c"])("TS.client.unread.reload")},,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(15);var b=a.n(g);var _=a(484);var y=a.n(_);var k=a(2);var O=a(2086);var w=a(3287);var E=a(10);var C=a(92);function j(e,t){return e<t}function S(e){var t=e.sluggifyEnabled,a=e.sluggifyDelimiter,n=e.sluggifyKeyName,r=e.single;if(!t||!a||!n||r)return false;return true}function I(e){return void 0!==e.slugId}function T(e,t){var a=t.canSlug,n=t.noDefaultSelection;var r=[];var i=[];var o={};e.forEach(function(e){var t=e;if(a&&I(t)){i.push(t);return}r.push(t);o[t.id]=t;if(t.group||t.children&&t.children.length){t.group=true;t.children.forEach(function(e){var a=e;a.isChild=true;a.parentId=t.id;r.push(a);o[a.id]=a;e.preselected&&!n&&i.push(a)})}t.preselected&&!n&&i.push(t)});return{currentItems:r,itemMapById:o,preselected:i}}var N=a(41);var A=new E["b"]("channel_options");var R={active:m.a.bool,dataQaPrefix:m.a.string,disabled:m.a.bool,item:m.a.object,onClick:m.a.func,onMouseLeave:m.a.func,onMouseMove:m.a.func,selected:m.a.bool,style:m.a.object,template:m.a.func,customClasses:m.a.string};var M={active:false,dataQaPrefix:"lfs",disabled:false,item:{},onClick:k["noop"],onMouseLeave:k["noop"],onMouseMove:k["noop"],selected:false,style:"",template:function e(t){return t.label},customClasses:""};var x=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickHandler=a.onClickHandler.bind(a);return a}l()(t,[{key:"onClickHandler",value:function e(t){t.preventDefault();t.stopPropagation();if(this.props.disabled)return;this.props.onClick(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var a=b()("c-lazy_filter_select__item",{"c-lazy_filter_select__item--active":this.props.active,"c-lazy_filter_select__item--selected":this.props.selected,"c-lazy_filter_select__item--child":t.isChild,"c-lazy_filter_select__item--group":t.group,"c-lazy_filter_select__item--disabled":this.props.disabled},this.props.customClasses);var n="lfs-item-"+t.id;var r=this.props.dataQaPrefix+"-item-"+t.id;var i=v.a.createElement("div",{className:a,"data-id":t.id,"data-qa":r,id:n,onClick:this.onClickHandler,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,role:"option",style:this.props.style,tabIndex:"-1",key:"list-item-"+t.id},this.props.template(t));if(this.props.disabled){var o=A.t("Cannot be removed");return v.a.createElement(N["d"],{position:"top",tip:o},i)}return i}}]);return t}(h["PureComponent"]);x.displayName="LazyFilterSelectListItem";var P=x;x.defaultProps=M;var D=new E["b"]("channel_options");var F={dataQaPrefix:m.a.string,disabled:m.a.bool,highlighted:m.a.bool,item:m.a.object,onClick:m.a.func,onHighlight:m.a.func,single:m.a.bool,template:m.a.func};var L={dataQaPrefix:"lfs",disabled:false,highlighted:false,item:{},onClick:k["noop"],onHighlight:k["noop"],single:false,template:function e(t){return t.label}};var B=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickHandler=a.onClickHandler.bind(a);return a}l()(t,[{key:"onClickHandler",value:function e(t){if(this.props.disabled||this.props.single)return;var a=t.clientX;var n=t.target.getBoundingClientRect();t.stopPropagation();a>n.width+n.left?this.props.onClick(this.props.item):this.props.onHighlight(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var a=b()("c-lazy_filter_select__token","c-lazy_filter_select__token--selected",{"c-lazy_filter_select__token--single":this.props.single,"c-lazy_filter_select__token--highlighted":this.props.highlighted,"c-lazy_filter_select__token--disabled":this.props.disabled});var n=t.slugId?t.slugId:t.id;var r="lfs-token-"+n;var i=this.props.dataQaPrefix+"-item-"+n;var o=v.a.createElement("div",{className:a,"data-id":n,"data-qa":i,id:r,key:"token-"+t.id,onClick:this.onClickHandler,tabIndex:-1},this.props.template(t));if(this.props.disabled){var s=D.t("Cannot be removed");return v.a.createElement(N["d"],{position:"top",tip:s},o)}return o}}]);return t}(h["PureComponent"]);B.displayName="LazyFilterSelectToken";var U=B;B.defaultProps=L;var q=a(1764);var G=new E["b"]("lazy_filter_select");var H={default:"normal",filter_in_list:"filter_in_list",normal:"normal",small:"small"};var W={allowItemUnselect:m.a.bool,allowListPositionAbove:m.a.bool,alwaysVisible:m.a.bool,approxDividerHeight:m.a.number,approxItemHeight:m.a.number,dataPromise:m.a.func,dataQaPrefix:m.a.string,disabled:m.a.bool,dividerTemplate:m.a.func,filter:m.a.func,forceListAbove:m.a.bool,items:m.a.array,listItemClass:m.a.func,maxHeightOfList:m.a.number,maxSelectedItems:m.a.number,noDefaultSelection:m.a.bool,noResultsTemplate:m.a.func,onInputBlur:m.a.func,onInputFocus:m.a.func,onItemAdded:m.a.func,onItemRemoved:m.a.func,onKeyDown:m.a.func,onKeyUp:m.a.func,onListHidden:m.a.func,onListShown:m.a.func,onMaxItemsSelected:m.a.func,onReady:m.a.func,onValueChange:m.a.func,placeholderText:m.a.string,restrictPreselectedItemRemoval:m.a.bool,scrollThreshold:m.a.number,single:m.a.bool,sluggifyEnabled:m.a.bool,sluggifyDelimiter:m.a.any,sluggifyKeyName:m.a.string,sluggifyValidator:m.a.func,styling:m.a.oneOf(Object(k["values"])(H)),tabToNav:m.a.bool,template:m.a.func,tokenTemplate:m.a.func,hideList:m.a.bool,preventScroll:m.a.bool,setSelected:m.a.bool};var V={alwaysVisible:false,allowItemUnselect:true,allowListPositionAbove:false,approxDividerHeight:30,approxItemHeight:30,dataPromise:null,dataQaPrefix:"lfs",disabled:false,dividerTemplate:function e(t){return t.label},filter:function e(t,a){return t.toLowerCase().indexOf(a)>-1},forceListAbove:false,items:[],listItemClass:k["noop"],maxHeightOfList:250,maxSelectedItems:Infinity,noDefaultSelection:false,noResultsTemplate:function e(t){return G.rt("No items matched <strong>{query}</strong>",{query:t})},onInputBlur:k["noop"],onInputFocus:k["noop"],onItemAdded:k["noop"],onItemRemoved:k["noop"],onKeyDown:k["noop"],onKeyUp:k["noop"],onListHidden:k["noop"],onListShown:k["noop"],onMaxItemsSelected:k["noop"],onReady:k["noop"],onValueChange:k["noop"],placeholderText:G.t("Choose an option\u2026"),restrictPreselectedItemRemoval:false,scrollThreshold:1e3,single:false,sluggifyEnabled:false,sluggifyDelimiter:null,sluggifyKeyName:"",sluggifyValidator:k["noop"],styling:H.default,tabToNav:false,template:function e(t){return t.label},tokenTemplate:function e(t){return t.label},hideList:false,preventScroll:void 0,setSelected:true};var z=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.fetchInitialList=a.fetchInitialList.bind(a);a.filterItems=a.filterItems.bind(a);a.getSelectedValue=a.getSelectedValue.bind(a);a.handlePromiseReturn=a.handlePromiseReturn.bind(a);a.hideList=a.hideList.bind(a);a.isRunningPromisePending=a.isRunningPromisePending.bind(a);a.listItemRenderer=a.listItemRenderer.bind(a);a.listNoRowsRenderer=a.listNoRowsRenderer.bind(a);a.onBlurInput=a.onBlurInput.bind(a);a.onChangeInput=a.onChangeInput.bind(a);a.onClickContainer=a.onClickContainer.bind(a);a.onClickItem=a.onClickItem.bind(a);a.onFocusInput=a.onFocusInput.bind(a);a.onFocusInputContainer=a.onFocusInputContainer.bind(a);a.onKeyDownInput=a.onKeyDownInput.bind(a);a.onKeyUpInput=a.onKeyUpInput.bind(a);a.onListScroll=a.onListScroll.bind(a);a.onMouseDownListContainer=a.onMouseDownListContainer.bind(a);a.onMouseLeaveContainer=a.onMouseLeaveContainer.bind(a);a.onMouseLeaveItem=a.onMouseLeaveItem.bind(a);a.onMouseMoveItem=a.onMouseMoveItem.bind(a);a.onMouseUpListContainer=a.onMouseUpListContainer.bind(a);a.onTokenClick=a.onTokenClick.bind(a);a.onTokenHighlight=a.onTokenHighlight.bind(a);a.runQuery=a.runQuery.bind(a);a.setListRef=a.setListRef.bind(a);a.showList=a.showList.bind(a);a.inputIsFocused=a.props.alwaysVisible;a.mouse={};a.pageNumber=1;a.preventBlur=false;a.slugIdCounter=0;a.itemMapById={};var n=[];var r=[];if(!a.props.dataPromise){var i=a.processItems(a.props.items);n=i.currentItems;r=i.selected}a.state={activeItemKey:null,currentItems:n,cursorHighlightedItem:null,listVisible:a.props.alwaysVisible,previousVal:"",runningPromise:null,selected:r};return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.dataPromise&&this.fetchInitialList();this.inputIsFocused&&this.input.focus();this.props.onReady(this)}},{key:"componentDidUpdate",value:function e(t){this.inputIsFocused&&this.input.focus();t.hideList&&!this.props.hideList&&this.showList();this.props.hideList&&this.hideList()}},{key:"onClickContainer",value:function e(){this.input.focus();this.inputIsFocused=true;this.showList()}},{key:"onKeyDownInput",value:function e(t){if(this.props.disabled)return;var a=false;switch(y()(t)){case"down":t.preventDefault();a=true;this.selectDown();break;case"up":t.preventDefault();a=true;this.selectUp();break;case"enter":t.preventDefault();a=true;this.selectActiveItem();break;case"del":case"delete":case"backspace":if(""===this.state.previousVal){t.preventDefault();a=true;this.state.cursorHighlightedItem?this.removeSelected(this.state.cursorHighlightedItem):this.removeLastSelected()}break;case"tab":if(this.props.tabToNav){t.preventDefault();a=true;t.shiftKey?this.selectUp():this.selectDown()}break;case"esc":this.hideList();this.input.blur();break;default:break}this.props.onKeyDown(t,a)}},{key:"onKeyUpInput",value:function e(t){if(this.props.disabled)return;var a=false;var n=t.target,r=n.selectionStart,i=n.selectionEnd;var o=r===i&&0===r;switch(y()(t)){case"left":o&&this.maybeHighlightPreviousSelectedItem();break;case"right":o&&this.state.cursorHighlightedItem&&this.maybeHightlightNextSelectedItem();break;default:this.resetHighlightedSelectedItem();break}this.props.onKeyUp(t,a)}},{key:"onMouseDownListContainer",value:function e(){this.preventBlur=true}},{key:"onMouseLeaveContainer",value:function e(){this.preventBlur=false}},{key:"onMouseMoveItem",value:function e(t){if(this.props.disabled)return;var a=this.mouse;var n={lastX:t.clientX,lastY:t.clientY};if(Object(k["isEqual"])(a,n))return;var r=t.target.getAttribute("data-id");this.mouse=n;this.setState(function(){return{activeItemKey:r}});this.List.forceUpdateGrid()}},{key:"onMouseLeaveItem",value:function e(t){var a=null;var n=this.state.mouse;var r={lastX:t.clientX,lastY:t.clientY};if(Object(k["isEqual"])(n,r))return;this.setState(function(){return{activeItemKey:a}})}},{key:"onMouseUpListContainer",value:function e(){this.preventBlur&&this.input.focus()}},{key:"onBlurInput",value:function e(){this.preventBlur||this.hideList();this.inputIsFocused=false;this.props.onInputBlur()}},{key:"onFocusInput",value:function e(){if(this.inputIsFocused||this.props.disabled)return;this.showList();this.props.onInputFocus()}},{key:"onFocusInputContainer",value:function e(){this.input.focus({preventScroll:this.props.preventScroll});this.onFocusInput()}},{key:"onChangeInput",value:function e(t){var a=this;var n=null;var r=t.target.value;this.pageNumber=1;var i=void 0;if(S(this.props)&&r.match(this.props.sluggifyDelimiter)){var o=r.split(this.props.sluggifyDelimiter);o.forEach(function(e){e.length&&a.addUserCreatedSlugFromString(e)});var s=false;var l=this.processItems(this.props.items,s);i=l.currentItems;r=""}else i=this.runQuery(r);this.setState(function(){return{activeItemKey:n,currentItems:i,previousVal:r}});this.List.forceUpdateGrid();this.List.scrollToRow(0)}},{key:"onClickItem",value:function e(t){if(this.props.disabled)return;if(!this.isItemSelectable(t.id))return;var a=this.state.selected.slice();if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(t)){this.removeSelected(t);return}if(!j(this.state.selected.length,this.props.maxSelectedItems))return;this.props.single&&(a=[]);a.push(t);var n=!this.props.single||this.props.alwaysVisible;this.inputIsFocused=!this.props.single;var r="";this.preventBlur=false;this.setState(function(){return{listVisible:n,previousVal:r,selected:a}});this.List.forceUpdateGrid();this.props.onItemAdded(t);this.props.onValueChange(a);a.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"onListScroll",value:function e(t){var a=t.scrollTop;if(this.props.dataPromise){var n=this.calculateListHeight();var r=n-a;r<=this.props.scrollThreshold&&a>0&&this.loadMoreItems()}}},{key:"onTokenClick",value:function e(t){this.removeSelected(t)}},{key:"onTokenHighlight",value:function e(t){this.setState(function(e){var a=t;e.cursorHighlightedItem&&e.cursorHighlightedItem.id===t.id&&(a=null);return r()({},e,{cursorHighlightedItem:a})})}},{key:"getSelectedValue",value:function e(){return this.state.selected}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getItemById",value:function e(t){return this.itemMapById[t]||false}},{key:"maybeHightlightNextSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var a=this.state.cursorHighlightedItem;var n=0;if(a){n=Object(k["findIndex"])(t,function(e){return e.id===a.id&&e.slugId===a.slugId})+1;n>t.length&&(n=null)}if(null!==n){a=Object(k["findLast"])(t,function(e){return!e.group},n);Object(k["isEqual"])(this.state.cursorHighlightedItem,a)&&(a=null);a?this.setState(function(){return{cursorHighlightedItem:a}}):this.resetHighlightedSelectedItem()}else this.resetHighlightedSelectedItem()}},{key:"maybeHighlightPreviousSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var a=this.state.cursorHighlightedItem;var n=t.length-1;a&&(n=Object(k["findIndex"])(t,function(e){return e.id===a.id&&e.slugId===a.slugId})-1);if(n>=0){a=Object(k["findLast"])(t,function(e){return!e.group},n);a&&this.setState(function(){return{cursorHighlightedItem:a}})}}},{key:"resetHighlightedSelectedItem",value:function e(){this.setState(function(){return{cursorHighlightedItem:null}})}},{key:"handlePromiseReturn",value:function e(t){var a=t.items;this.setState(function(){return{runningPromise:null}});if(!a.length){this.List.forceUpdateGrid();return[]}t.replace_all_items||(a=Object(k["uniqBy"])(this.state.currentItems.concat(a),"id"));this.processItems(a,this.props.setSelected);return a}},{key:"isRunningPromisePending",value:function e(){return this.state.runningPromise&&this.state.runningPromise.isPending()}},{key:"addUserCreatedSlugFromString",value:function e(t){if(!S(this.props))return;if(!j(this.state.selected.length,this.props.maxSelectedItems))return;var a=t.trim();if(!a)return;var n={};n[this.props.sluggifyKeyName]=a;n.id=null;n.label=a;n.slugId=String(this.slugIdCounter);this.slugIdCounter+=1;var r=this.props.sluggifyValidator(n);if(r||"undefined"===typeof r){var i=this.state.selected.slice();i.push(n);var o="";this.setState(function(){return{previousVal:o,selected:i}});this.props.onItemAdded(n);this.props.onValueChange(i);i.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}}},{key:"removeUserCreatedSlug",value:function e(t){if(!S(this.props))return;var a=this.state.selected.slice();var n=Object(k["reject"])(a,function(e){return e.slugId===t.slugId});this.setState(function(){return{selected:n}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(n)}},{key:"unsluggifySlug",value:function e(t){if(!S(this.props)||!I(t))return;var a=t.label;this.removeUserCreatedSlug(t);this.setState(function(){return{previousVal:a}})}},{key:"processItems",value:function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n={canSlug:S(this.props),noDefaultSelection:this.props.noDefaultSelection};var r=T(t,n),i=r.currentItems,o=r.itemMapById,s=r.preselected;this.itemMapById=Object(k["merge"])(this.itemMapById,o);var l=this.state&&this.state.selected?this.state.selected:[];var c=Object(k["uniqBy"])(s.concat(l),"id");this.props.single&&c.length&&(c=c.slice(0,1));this.state&&(a?this.setState(function(){return{currentItems:i,selected:c}}):this.setState(function(){return{currentItems:i}}));return{currentItems:i,selected:c}}},{key:"isItemSelectable",value:function e(t){var a=this.getItemById(t);if(a.group)return false;if(a.preselected&&this.props.restrictPreselectedItemRemoval)return false;if(this.props.allowItemUnselect)return true;return!this.isItemSelected(a)}},{key:"isItemSelected",value:function e(t){return this.state.selected.filter(function(e){if(t.slugId)return e.slugId===t.slugId;return e.id===t.id}).length>0}},{key:"listItemRenderer",value:function e(t){var a=t.index,n=t.key,r=t.style;var i=this.state.currentItems[a]||{};var o=this.state.activeItemKey===i.id;var s=i.preselected&&this.props.restrictPreselectedItemRemoval||i.disabled;var l=this.isItemSelected(i);var c=i.group?this.props.dividerTemplate:this.props.template;var u=this.props.listItemClass(i);return v.a.createElement(P,{active:o,dataQaPrefix:this.props.dataQaPrefix,disabled:s,item:i,key:"rlfs-list-item-"+n,onClick:this.onClickItem,onMouseLeave:this.onMouseLeaveItem,onMouseMove:this.onMouseMoveItem,selected:l,style:r,template:c,customClasses:u})}},{key:"listNoRowsRenderer",value:function e(){if(this.isRunningPromisePending())return v.a.createElement("div",{className:"c-lazy_filter_select__status c-lazy_filter_select__status--loading"},v.a.createElement(C["a"],{size:"large",className:"inline_block"}));return v.a.createElement("div",{className:"c-lazy_filter_select__status"},this.props.noResultsTemplate(this.state.previousVal))}},{key:"calculateListHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.maxHeightOfList;var n=this.state.currentItems.length;var r=this.props.approxItemHeight;var i=n*r;var o=30;if(t)return Math.min(Math.max(i,o),a);return i}},{key:"filterItems",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;var n=a.toLowerCase();var r=this.props.items;var i=[];r.forEach(function(e){if(e.group){var a=e.children.filter(function(e){return t.props.filter(e.label,n)});a.length&&(i=i.concat(e,a))}else t.props.filter(e.label,n)&&i.push(e)});return i}},{key:"hideList",value:function e(){if(this.props.alwaysVisible)return;var t=false;this.setState(function(){return{listVisible:t}});this.props.onListHidden()}},{key:"loadMoreItems",value:function e(){if(!this.props.dataPromise)return this.state.currentItems;var t=this.state.runningPromise;this.isRunningPromisePending()&&t.cancel("Scrolling happened");this.pageNumber+=1;t=this.props.dataPromise(this.state.previousVal,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:t}});return t}},{key:"removeLastSelected",value:function e(){var t=this.state.selected.slice(-1)[0];if(S(this.props)&&I(t)){this.unsluggifySlug(t);return}this.removeSelected(t)}},{key:"removeSelected",value:function e(t){if(!t||t.disabled)return;var a=this.state.selected.slice();if(I(t)){this.removeUserCreatedSlug(t);return}var n=Object(k["reject"])(a,function(e){return e.id===t.id});var r=this.state.currentItems.map(function(e){var a=e;a.id===t.id&&(a.preselected=false);return a});this.setState(function(){return{currentItems:r,cursorHighlightedItem:null,selected:n}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(n)}},{key:"fetchInitialList",value:function e(){var t=this;if(!this.props.dataPromise)return;var a=this.state.runningPromise;this.isRunningPromisePending()&&a.cancel("Uhhh ... ?");a=this.props.dataPromise("",this.pageNumber).then(function(e){var a=e.items;var n=t.processItems(a);var r=n.currentItems,i=n.selected;t.setState(function(){return{currentItems:r,selected:i,runningPromise:null}})});this.setState(function(){return{runningPromise:a}})}},{key:"runQuery",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;if(this.props.dataPromise){var a=this.state.runningPromise;this.isRunningPromisePending()&&a.cancel("User entered more text");this.pageNumber=1;a=this.props.dataPromise(t,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:a}});return[]}return this.filterItems(t)}},{key:"selectDown",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var a=this.state.activeItemKey;var n=0;if(a){n=Object(k["findIndex"])(t,function(e){return e.id===a})+1;n>t.length&&(n=t.length)}var r=Object(k["find"])(t,function(e){return!e.group},n);if(r){a=r.id;n=Object(k["findIndex"])(t,function(e){return e.id===r.id});this.setState(function(){return{activeItemKey:a}});this.List.forceUpdateGrid();this.List.scrollToRow(n)}}},{key:"selectUp",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var a=this.state.activeItemKey;var n=t.length-1;if(a){n=Object(k["findIndex"])(t,function(e){return e.id===a})-1;n<0&&(n=0)}var r=Object(k["findLast"])(t,function(e){return!e.group},n);if(r){a=r.id;n=Object(k["findIndex"])(t,function(e){return e.id===r.id});this.setState(function(){return{activeItemKey:a}});this.List.forceUpdateGrid();this.List.scrollToRow(n)}}},{key:"selectActiveItem",value:function e(){var t=this.state.activeItemKey;if(!t)return;if(!j(this.state.selected.length,this.props.maxSelectedItems))return;if(!this.isItemSelectable(t))return;var a=this.getItemById(t);if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(a)){this.removeSelected(a);return}var n=this.state.selected.slice();this.props.single&&(n=[]);n.push(a);var r=!this.props.single;this.inputIsFocused=!this.props.single;var i="";this.preventBlur=false;this.setState(function(){return{listVisible:r,previousVal:i,selected:n}});this.List.forceUpdateGrid();this.props.onItemAdded(a);this.props.onValueChange(n);n.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"showList",value:function e(){if(this.state.listVisible||this.props.disabled)return;!this.props.dataPromise||this.state.previousVal||this.state.currentItems.length||this.fetchInitialList();this.props.preventScroll||(this.inputIsFocused=true);var t=true;var a=this.state.previousVal;this.props.single&&!this.props.alwaysVisible&&(a="");this.setState(function(){return{listVisible:t,previousVal:a}});this.props.onListShown()}},{key:"renderSelected",value:function e(){var t=this;var a="";if(!(this.props.single&&this.state.listVisible)||this.props.alwaysVisible){var n=this.state.cursorHighlightedItem;a=this.state.selected.map(function(e){var a=e.id||e.slugId;var r=n&&n.id===e.id&&n.slugId===e.slugId;var i=e.preselected&&t.props.restrictPreselectedItemRemoval||e.disabled;return v.a.createElement(U,{dataQaPrefix:t.props.dataQaPrefix,disabled:i,highlighted:r,item:e,key:"rlfs-token-"+a,onClick:t.onTokenClick,onHighlight:t.onTokenHighlight,single:t.props.single,template:t.props.tokenTemplate})})}return a}},{key:"render",value:function e(){var t=this;var a=b()("c-lazy_filter_select","c-lazy_filter_select--"+this.props.styling,{"c-lazy_filter_select--single":this.props.single});var n=b()("c-lazy_filter_select__input_container",{"c-lazy_filter_select__input_container--active":this.inputIsFocused,"c-lazy_filter_select__input_container--value":this.state.selected.length});var i=b()("c-lazy_filter_select__list_container",{"c-lazy_filter_select__list_container--visible":this.state.listVisible,"c-lazy_filter_select__list_container--above":this.props.forceListAbove});var o=this.props.dataQaPrefix+"-value";var s=this.props.dataQaPrefix+"-input-value";var l={"aria-autocomplete":"list","aria-owns":"c-lazy_filter_select__list_container","aria-expanded":this.state.listVisible,role:"combobox"};if(this.state.cursorHighlightedItem){var c=this.state.cursorHighlightedItem;var u=c.id||c.slugId;l["aria-activedescendant"]="lfs-token-"+u}else this.state.activeItemKey&&(l["aria-activedescendant"]="lfs-item-"+this.state.activeItemKey);var d=this.state.selected.length?"":this.props.placeholderText;var p={};this.state.previousVal.length?p.size=this.state.previousVal.length+1:this.state.selected.length&&(p.size=1);return v.a.createElement("div",{className:a,"data-qa":this.props.dataQaPrefix,onClick:this.onClickContainer,onMouseLeave:this.onMouseLeaveContainer,role:"presentation"},v.a.createElement("div",{className:n,"data-qa":o,onFocus:this.onFocusInputContainer},v.a.createElement("div",{className:"c-lazy_filter_select__value"},this.renderSelected(),v.a.createElement("input",r()({},l,p,{className:"c-lazy_filter_select__input c-input_text","data-qa":s,onBlur:this.onBlurInput,onChange:this.onChangeInput,onFocus:this.onFocusInput,onKeyDown:this.onKeyDownInput,onKeyUp:this.onKeyUpInput,placeholder:d,ref:function e(a){t.input=a},type:"text",value:this.state.previousVal})))),v.a.createElement(O["a"],null,function(e){var a=e.width;return v.a.createElement("div",{className:i,id:"c-lazy_filter_select__list_container",onMouseDown:t.onMouseDownListContainer,onMouseUp:t.onMouseUpListContainer,role:"listbox"},v.a.createElement("div",{className:"c-lazy_filter_select__list"},v.a.createElement(w["a"],{height:t.calculateListHeight(true),noRowsRenderer:t.listNoRowsRenderer,onScroll:t.onListScroll,ref:t.setListRef,rowCount:t.state.currentItems.length,rowHeight:t.props.approxItemHeight,rowRenderer:t.listItemRenderer,width:a-10})))}))}}]);return t}(h["PureComponent"]);z.displayName="LazyFilterSelect";var Q=t["a"]=z;z.defaultProps=V},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n=a(1040),r=a(1786),i=a(1787);function o(e){var t=-1,a=null==e?0:e.length;this.__data__=new n;while(++t<a)this.add(e[t])}o.prototype.add=o.prototype.push=r;o.prototype.has=i;e.exports=o},function(e,t,a){var n=a(1769),r=a(1781),i=a(1783),o=a(1784),s=a(1785);function l(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n;l.prototype["delete"]=r;l.prototype.get=i;l.prototype.has=o;l.prototype.set=s;e.exports=l},function(e,t,a){var n=a(726),r=a(647);var i=n(r,"Map");e.exports=i},function(e,t){function a(e,t){return e.has(t)}e.exports=a},function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e){a[++t]=e});return a}e.exports=a},function(e,t,a){var n=a(648),r=a(1045);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function s(e,t){if(n(e))return false;var a=typeof e;if("number"==a||"symbol"==a||"boolean"==a||null==e||r(e))return true;return o.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=s},function(e,t,a){var n=a(771),r=a(725);var i="[object Symbol]";function o(e){return"symbol"==typeof e||r(e)&&n(e)==i}e.exports=o},function(e,t,a){"use strict";t.__esModule=true;var n=a(727);var r=C(n);var i=a(5);var o=C(i);var s=a(7);var l=C(s);var c=a(8);var u=C(c);var d=a(3);var p=C(d);var f=a(1);var m=C(f);var h=a(690);var v=C(h);var g=a(1348);var b=C(g);var _=a(1902);var y=C(_);var k=a(1346);var O=C(k);var w=a(1903);var E=C(w);function C(e){return e&&e.__esModule?e:{default:e}}function j(e,t,a){var n=e.nodeType,r=e.data,i=e.collectionLimit,o=e.circularCache,s=e.keyPath,l=e.postprocessValue,c=e.sortObjectKeys;var u=[];(0,y["default"])(n,r,c,i,t,a).forEach(function(t){if(t.to)u.push(m["default"].createElement(E["default"],(0,p["default"])({},e,{key:"ItemRange--"+t.from+"-"+t.to,from:t.from,to:t.to,renderChildNodes:j})));else{var a=t.key,n=t.value;var r=-1!==o.indexOf(n);var c=m["default"].createElement(O["default"],(0,p["default"])({},e,{postprocessValue:l,collectionLimit:i},{key:"Node--"+a,keyPath:[a].concat(s),value:l(n),circularCache:[].concat(o,[n]),isCircular:r,hideRoot:false}));false!==c&&u.push(c)}});return u}function S(e){var t=!(!e.shouldExpandNode||e.isCircular)&&e.shouldExpandNode(e.keyPath,e.data,e.level);return{expanded:t}}var I=function(e){(0,u["default"])(t,e);function t(a){(0,o["default"])(this,t);var n=(0,l["default"])(this,e.call(this,a));n.handleClick=function(){n.props.expandable&&n.setState({expanded:!n.state.expanded})};n.state=S(a);return n}t.prototype.componentWillReceiveProps=function e(t){var a=S(t);S(this.props).expanded!==a.expanded&&this.setState(a)};t.prototype.shouldComponentUpdate=function e(t,a){var n=this;return!!(0,r["default"])(t).find(function(e){return"circularCache"!==e&&("keyPath"===e?t[e].join("/")!==n.props[e].join("/"):t[e]!==n.props[e])})||a.expanded!==this.state.expanded};t.prototype.render=function e(){var t=this.props,a=t.getItemString,n=t.nodeTypeIndicator,r=t.nodeType,i=t.data,o=t.hideRoot,s=t.createItemString,l=t.styling,c=t.collectionLimit,u=t.keyPath,d=t.labelRenderer,f=t.expandable;var h=this.state.expanded;var v=h||o&&0===this.props.level?j((0,p["default"])({},this.props,{level:this.props.level+1})):null;var g=m["default"].createElement("span",l("nestedNodeItemType",h),n);var _=a(r,i,g,s(i,c));var y=[u,r,h,f];return o?m["default"].createElement("li",l.apply(void 0,["rootNode"].concat(y)),m["default"].createElement("ul",l.apply(void 0,["rootNodeChildren"].concat(y)),v)):m["default"].createElement("li",l.apply(void 0,["nestedNode"].concat(y)),f&&m["default"].createElement(b["default"],{styling:l,nodeType:r,expanded:h,onClick:this.handleClick}),m["default"].createElement("label",(0,p["default"])({},l.apply(void 0,[["label","nestedNodeLabel"]].concat(y)),{onClick:this.handleClick}),d.apply(void 0,y)),m["default"].createElement("span",(0,p["default"])({},l.apply(void 0,["nestedNodeItemString"].concat(y)),{onClick:this.handleClick}),_),m["default"].createElement("ul",l.apply(void 0,["nestedNodeChildren"].concat(y)),v))};return t}(m["default"].Component);I.propTypes={getItemString:v["default"].func.isRequired,nodeTypeIndicator:v["default"].any,nodeType:v["default"].string.isRequired,data:v["default"].any,hideRoot:v["default"].bool.isRequired,createItemString:v["default"].func.isRequired,styling:v["default"].func.isRequired,collectionLimit:v["default"].number,keyPath:v["default"].arrayOf(v["default"].oneOfType([v["default"].string,v["default"].number])).isRequired,labelRenderer:v["default"].func.isRequired,shouldExpandNode:v["default"].func,level:v["default"].number.isRequired,sortObjectKeys:v["default"].oneOfType([v["default"].func,v["default"].bool]),isCircular:v["default"].bool,expandable:v["default"].bool};I.defaultProps={data:[],circularCache:[],level:0,expandable:true};t["default"]=I},function(e,t){function a(e,t,a){return Math.min(Math.max(e,t),a)}e.exports=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(36);var v=a(14);var g=a(15);var b=a.n(g);var _=a(2);var y=a(72);var k=a(78);var O=a(202);var w=a(21);var E=a(61);var C=a(345);var j=a(10);var S=a(1137);var I=a(492);var T=a(121);var N=a(18);var A=a(926);var R=a(666);var M=a(265);var x=a(2077);var P=new j["b"]("files");var D={msg:m.a.object.isRequired,className:m.a.string,file:y["a"].File(),isExpanded:m.a.bool,expandPref:m.a.bool,expandableKey:m.a.string,setExpanded:m.a.func};var F={className:void 0,file:void 0,isExpanded:void 0,expandPref:true,expandableKey:void 0,setExpanded:_["noop"]};var L=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleExpanded=a.toggleExpanded.bind(a);return a}o()(t,[{key:"isExpanded",value:function e(){var t=this.props,a=t.file,n=t.isExpanded,r=t.expandPref;if(void 0!==n)return n;if("image"===Object(E["getFileType"])(a))return r;return true}},{key:"toggleExpanded",value:function e(){this.props.setExpanded({key:this.props.expandableKey,isExpanded:!this.isExpanded()})}},{key:"renderUploader",value:function e(){var t=this.props,a=t.msg,n=t.file;var r=Object(E["getFileEntityId"])(n),i=r.userId;if(!i)return null;if(i===a.user)return null;return p.a.createElement(d["Fragment"],null,p.a.createElement("span",{className:"c-message_kit__file__meta__separator"}," | "),p.a.createElement(A["a"],{id:i,className:"c-message_kit__file__meta__name"}))}},{key:"renderMetaText",value:function e(){var t=this.props.file;var a=Object(E["getFileType"])(t);var n="image"===a||"snippet"===a;var r=t.pretty_type||P.t("file");var i=n||!this.isExpanded()?p.a.createElement(I["a"],{file:t}):r;return p.a.createElement("span",{className:"c-message_kit__file__meta__text"},i,this.renderUploader())}},{key:"renderCollapse",value:function e(){var t=this.isExpanded()?"caret-down":"caret-right";return p.a.createElement(T["a"],{className:"c-message_kit__file__meta__collapse",onClick:this.toggleExpanded},p.a.createElement(N["b"],{type:t,size:"inherit"}))}},{key:"renderMeta",value:function e(){var t=this.props.file;if(Object(E["isTombstone"])(t))return null;return p.a.createElement("div",{className:"c-message_kit__file__meta"},this.renderMetaText(),"\xa0",this.renderCollapse())}},{key:"renderFile",value:function e(){if(!this.isExpanded())return null;var t=this.props,a=t.msg,n=t.file;return p.a.createElement(S["a"],{file:n,ts:a.ts,channelId:a.channel,className:"c-message_kit__file__file"})}},{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.file;if(!a)return null;if(!n)return null;var r=this.isExpanded();var i=b()(this.props.className,"c-message_kit__file",{"c-message_kit__file--expanded":r,"c-message_kit__file--collapsed":!r});return p.a.createElement("div",{className:i},this.renderMeta(),this.renderFile())}}]);return t}(d["PureComponent"]);L.displayName="MessageKitFile";L.defaultProps=F;var B=function e(t,a){var n=a.fileId,r=a.msg,i=a.viewContext;var o=Object(C["a"])("file",r.ts,{id:n,viewContext:i});return{file:Object(k["getFileById"])(t,n),isExpanded:Object(O["isExpanded"])(t,o),expandPref:Object(w["getUserPref"])(t,"expand_internal_inline_imgs"),expandableKey:o}};var U={setExpanded:O["setExpanded"]};var q=Object(M["e"])(Object(R["b"])(Object(v["connect"])(B,U)(L)));var G={msg:m.a.object.isRequired,viewKey:m.a.string};var H={viewKey:void 0};var W=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.viewKey;if(!a)return null;if(Object(h["isFileComment"])(a))return null;if(a.files)return a.files.map(function(e){return p.a.createElement(q,{msg:a,fileId:e,key:e,viewKey:n})});if(a.file)return p.a.createElement(q,{msg:a,fileId:a.file,viewKey:n});return null}}]);return t}(d["PureComponent"]);W.displayName="MessageFiles";var V=t["a"]=W;W.defaultProps=H},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(2);var r=a.n(n);var i=a(332);var o=a(81);function s(e){var t=e.bot_id?[e.bot_id]:[];Object(n["values"])(e).forEach(function(e){if(Object(n["isObject"])(e)){t.push(s(e));return}if(!Object(n["isString"])(e))return;var a=Object(n["compact"])(Object(o["findUrlsInString"])(e).map(i["a"]));t.push(a)});return Object(n["uniq"])(Object(n["flatten"])(t))}},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(40);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(143);var l=a(201);function c(e){var t=[];var a=[];function n(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function o(e){if(!Object(i["isObject"])(e))return;a.push(e);var c=void 0;Object.keys(e).forEach(function(a){c=e[a];if("string"!==typeof c)return;if(!n(a)){Object(s["b"])(c).m_ids.forEach(function(e){Object(i["includes"])(t,e)||t.push(e)});return}if(!Object(l["a"])(c))return;if(Object(i["includes"])(t,c))return;t.push(c)});Object.keys(e).forEach(function(n){c=e[n];if("object"!==("undefined"===typeof c?"undefined":r()(c)))return;if(-1!==a.indexOf(c))return;if(!Object(i["isArray"])(c)||"members"!==n&&"users"!==n){o(c);return}c.forEach(function(e){if(!Object(l["a"])(e)&&e&&"object"===("undefined"===typeof e?"undefined":r()(e))&&e.id){Object(l["a"])(e.id)&&!Object(i["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(l["a"])(e))return;if(Object(i["includes"])(t,e))return;t.push(e)})})}o(e);return Object(i["uniq"])(t)}},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(40);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(143);var l=a(160);function c(e){var t=[];var a=[];function n(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function o(e,c){if("object"!==("undefined"===typeof e?"undefined":r()(e)))return;a.push(e);Object(i["forOwn"])(e,function(e,a){if("string"!==typeof e)return;n(a,c)?Object(l["a"])(e)&&!Object(i["includes"])(t,e)&&t.push(e):Object(s["b"])(e).c_ids.forEach(function(e){Object(i["includes"])(t,e)||t.push(e)})});Object(i["forOwn"])(e,function(e,n){if("object"!==("undefined"===typeof e?"undefined":r()(e)))return;if("previous_message"===n)return;if(-1!==a.indexOf(e))return;!Object(i["isArray"])(e)||"string"!==typeof e[0]||"channels"!==n&&"ims"!==n&&"groups"!==n?o(e,n):e.forEach(function(e){Object(l["a"])(e)&&!Object(i["includes"])(t,e)&&t.push(e)})})}o(e);return t}},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(2);var r=a.n(n);var i=a(609);function o(e){var t=[];Object(n["forOwn"])(e,function(e,a){Object(n["isArray"])(e)?"messages"!==a&&"teams"!==a&&"users"!==a&&"channels"!==a||e.forEach(function(e){t.push(o(e))}):Object(n["isObject"])(e)?t.push(o(e)):Object(n["isString"])(e)&&("team"!==a&&"source_team"!==a&&"user_team"!==a&&"team_id"!==a||Object(i["a"])(e)&&t.push(e))});return Object(n["uniq"])(Object(n["flatten"])(t))}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function r(e){var t=e.match(n);return t&&1===t.length&&t[0]===e||false}},function(e,t,a){"use strict";var n=a(1);var r=a.n(n);var i=a(931);var o=a.n(i);var s=a(1382);var l=a.n(s);var c=Object(i["createDevTools"])(r.a.createElement(l.a,{expandActionRoot:false,expandStateRoot:false}));t["a"]=c},,function(e,t,a){"use strict";var n=a(24);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(0);var b=a.n(g);var _=a(14);var y=a(50);var k=a(11);var O=a(21);var w=a(266);var E=a(10);var C=a(285);var j=a(18);var S=a(1924);var I=a.n(S);var T=new E["b"]("files");var N=new E["b"]("search");var A={filetype:b.a.string,onChange:b.a.func,featureArugula:b.a.bool,showEmail:b.a.bool};var R={filetype:"",onChange:f["noop"],featureArugula:false,showEmail:false};var M=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.labelId="file_type_select_"+Object(w["c"])();a.state={label:null};return a}l()(t,[{key:"onChange",value:function e(t,a,n){this.setState(function(){return{label:a}});this.props.onChange(t,a,n)}},{key:"render",value:function e(){var t=v.a.createElement(h["Fragment"],null,T.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"offscreen",id:this.labelId},N.t("File type")," ",v.a.createElement("span",null,"- ",this.state.label?this.state.label:t)),v.a.createElement(C["d"],{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:t,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:Infinity,useFilteredInput:false,useFullWidthOptions:true,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"create-post"}),T.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:T.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:"posts"}].concat(r()(this.props.featureArugula?[{label:v.a.createElement("span",null,v.a.createElement(j["b"],{type:"emoji-nature"}),"Arugula"),labelText:"Arugula",value:"docs"}]:[]),[{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"create-snippet"}),T.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:T.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"}],r()(this.props.showEmail?[{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"envelope-o"}),T.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:T.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[]),[{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"image"}),T.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:T.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"play"}),T.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:T.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"book"}),T.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:T.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"file"}),T.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:T.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"},{label:v.a.createElement(h["Fragment"],null,v.a.createElement(j["b"],{type:"google-drive"}),T.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:T.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}])}))}}]);return t}(h["PureComponent"]);M.displayName="FileTypeSelect";M.defaultProps=R;t["a"]=Object(_["connect"])(function(e){return{featureArugula:Object(k["isFeatureEnabled"])(e,"feature_docs"),showEmail:Object(y["getCurrentTeam"])(e).plan&&!Object(O["getTeamPref"])(e,"disable_email_ingestion")}})(M)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(7);var o=a.n(i);var s=a(97);var l=a.n(s);var c=a(6);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a(280);var h=a(62);var v=a(33);var g=function(){function e(t,a,n,i){r()(this,e);this.bucketIdForKey=a;this.keyForDoc=n;this.scoreForDoc=i;this.index=_(t,a,n,i)}u()(e,[{key:"search",value:function e(t,a){var n=this;var r=this.bucketIdForKey(t);if(!r)return[];var i=Object(f["keys"])(this.index).filter(function(e){return Object(f["startsWith"])(e,r)});if(1===i.length)return this._searchBucket(i[0],t,a);return Object(f["chain"])(i).map(function(e){return n._searchBucket(e,t,a)}).flatten().sort(function(e,t){return n.scoreForDoc(t)-n.scoreForDoc(e)}).value()}},{key:"_searchBucket",value:function e(t,a,n){var r=this;var i=[];Object(f["forEach"])(this.index[t]||[],function(e){var t=r.keyForDoc(e);Object(f["startsWith"])(t,a)&&t!==a&&i.push(e);return i.length<n});return i}}]);return e}();var b=g;function _(e,t,a,n){var r={};Object(f["forEach"])(e,function(e){var n=t(a(e));r[n]||(r[n]=[]);r[n].push(e)});Object(f["forEach"])(r,function(e){e.sort(function(e,t){return n(t)-n(e)})});return r}var y=a(700);a.d(t,"a",function(){return w});var k=function(e){p()(t,e);u()(t,[{key:"_searchAutocompleteQuerySuggestions",value:function e(t){var a="new_term_frequency";var n=false;var r="autocomplete_query_suggestions_response_time_batch_"+t;var i=r+"_mark";Object(h["e"])(i);return Object(v["a"])(this.teamId,Object(m["f"])({limit:1e5,version:a,returnExperts:n,batchMin:t||0,batches:1})).then(function(e){Object(h["g"])(r,i);return e}).catch(function(e){Object(h["g"])(r,i);return{data:[],exception:e}})}}]);function t(e){r()(this,t);var a=2e5;var n=Math.ceil(a/5e4);var i=576e5;var s=function e(t){var a=t[0].toString().replace(/_/g," ");var n=parseInt(t[1],10)/1e4;var r=Object(f["mapValues"])(t[2],function(e){return parseInt(e,10)/100});return[a,n,r]};var l=o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Promise.all(Object(f["range"])(n).map(function(e){return l._searchAutocompleteQuerySuggestions(e).then(function(e){return e.query_suggestion_list.map(function(e){return s(e)})})})).then(function(e){var t=Object(f["flatten"])(e.filter(function(e){return e.length>0}));var a=new b(t,function(e){return e.slice(0,3)},function(e){return e[0]},function(e){return e[1]});return a})},i));l.teamId=e;return l}u()(t,[{key:"onCacheData",value:function e(a){var n=this;l()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCacheData",this).call(this,a);var r=Math.max(this.timeoutMs/2,144e5);this.querySuggestionCacheRefreshTimer&&clearTimeout(this.querySuggestionCacheRefreshTimer);this.querySuggestionCacheRefreshTimer=null;this.querySuggestionCacheRefreshTimer=setTimeout(function(){n._callCacheGet()},this.timeoutMs/2+Math.random()*r)}}]);return t}(y["a"]);var O={};function w(e){O[e]||(O[e]=new k(e));return O[e]}},function(e,t,a){"use strict";a.d(t,"a",function(){return y});var n=a(5);var r=a.n(n);var i=a(7);var o=a.n(i);var s=a(97);var l=a.n(s);var c=a(6);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(280);var v=a(33);var g=a(700);var b=function(e){p()(t,e);u()(t,[{key:"_searchAutocompleteFileSuggestions",value:function e(t){var a="new_term_frequency";return Object(v["a"])(this.teamId,Object(h["e"])({limit:t,version:a})).catch(function(e){return{data:[],exception:e}})}}]);function t(e){r()(this,t);var a=1008e5;var n=o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return n._searchAutocompleteFileSuggestions(1e4).then(function(e){var t={};Object(f["each"])(e.file_suggestion_list,function(e){var a=e.title.toLowerCase().replace(/[^a-z0-9\s]/,"").replace(/\s+/," ").trim();var n=a.split(/\s+/).slice(0,6);var r=Object(f["extend"])(e,{normalTitle:a,titleTerms:n,score:e.score/65536*400});Object(f["each"])(a.split(/ /).slice(0,3),function(e){var a=e[0];t[a]||(t[a]=[]);t[a].push(r)})});return t})},a));n.teamId=e;return n}u()(t,[{key:"onCacheData",value:function e(a){var n=this;l()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCacheData",this).call(this,a);var r=144e5;this.fileSuggestionCacheRefreshTimer&&clearTimeout(this.fileSuggestionCacheRefreshTimer);this.fileSuggestionCacheRefreshTimer=null;this.fileSuggestionCacheRefreshTimer=setTimeout(function(){n._callCacheGet()},this.timeoutMs+Math.random()*r)}}]);return t}(g["a"]);var _={};function y(e){_[e]||(_[e]=new b(e));return _[e]}},function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(2);var r=a.n(n);var i=a(10);var o=a(359);var s=a(89);var l=a(113);var c=a(415);var u=new i["b"]("aria_msg_summary");function d(e){if(!e)return null;var t=[];var a=e.day,r=a.isFirstDay,i=a.isLastDay;var d=e.day.ts/1e3;var p=Object(s["a"])();var f=Object(s["a"])(p).subtract(1,"days");var m=Object(l["a"])(d,{returnMoment:true});var h=Object(c["a"])(p,m);var v=Object(c["a"])(f,m);var g=d&&Object(o["a"])(d,"{day_divider_pretty}");!e.isFirstMsgForDay||e.isLastMsgForDay||r||(h?t.push(u.t("First message from today.",{day:g})):v?t.push(u.t("First message from yesterday.",{day:g})):t.push(u.t("First message from {day}.",{day:g})));!e.isLastMsgForDay||e.isFirstMsgForDay||i||(h?t.push(u.t("Last message from today.",{day:g})):v?t.push(u.t("Last message from yesterday.",{day:g})):t.push(u.t("Last message from {day}.",{day:g})));e.isLastMsgForDay&&e.isFirstMsgForDay&&!i&&!r&&(h?t.push(u.t("Message from today.",{day:g})):v?t.push(u.t("Message from yesterday.",{day:g})):t.push(u.t("Message from {day}.",{day:g})));e.isFirstUnreadMsg&&t.push(u.t("First unread message."));t.push(u.t("{name} at {time}.",{name:e.name,time:e.time}));t.push(e.text);e.reactionCount>0&&t.push(u.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount}));e.replyCount>0&&t.push(u.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount}));e.isStarred&&t.push(u.t("Message is starred."));e.isPinned&&t.push(u.t("Message is pinned."));e.attachmentCount>0&&t.push(u.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount}));e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts));return Object(n["unescape"])(t.join(" "))}},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(10);var r=new n["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plainText,a=e.isFollowup,i=e.fileMode,o=e.fileLink,s=e.userId,l=e.userName,c=e.userLink;var u={file:o,user:c,possessive:Object(n["l"])(l)};if(a){u.note="[sender] commented:";return r.t("commented:",u)}if(s){if("snippet"===i){u.note="[sender] commented on joe's snippet. Also, the possessive affix is localized, but please move it before or after the user name depending on whether possessives are prefixes or suffixes for your language.";return t?r.t("commented on {user}{possessive} snippet {file}",u):r.rt("commented on {user}{possessive} snippet {file}",u)}u.note="[sender] commented on joe's file. Also, the possessive affix is localized, but please move it before or after the user name depending on whether possessives are prefixes or suffixes for your language.";return t?r.t("commented on {user}{possessive} file {file}",u):r.rt("commented on {user}{possessive} file {file}",u)}u.note="[sender] commented on Kittens.gif";return t?r.t("commented on {file}",u):r.rt("commented on {file}",u)}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(457);function r(e,t){if(!t||!e)return false;if(Object(n["b"])(t.subtype)&&"file_comment"===e.subtype&&t.file&&e.file&&t.file===e.file)return true;return false}},function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(2);var r=a.n(n);var i=a(11);var o=a(162);var s=a(16);var l=a(10);var c=new l["b"]("threads");function u(e,t){var a=Object(i["getCurrentUserId"])(e);var n=r.a.includes(t,a);var l=t;if(n){l=r.a.without(t,a);l.push(a)}return r.a.chain(l).uniq().without("U00").without("B00").map(function(t){var n=Object(s["getPrefCompliantMemberNameById"])(e,t)||Object(o["getBotNameById"])(e,t);if(!n)return null;return t===a?c.t("you"):n}).compact().value()}},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(10);var r=new n["b"]("threads");function i(){return r.t("replied to a thread:")}},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(0);var b=a.n(g);var _=a(15);var y=a.n(_);var k=a(72);var O=a(226);var w=a(228);var E=a(1006);var C=a(10);var j=a(361);var S=a(36);var I=a(87);var T=a(173);var N=a(255);var A=a(735);var R=a(682);var M=a(734);var x=a(606);var P=a(698);var D=a(145);var F=a(980);var L=a(665);var B=a(1124);var U=a(825);var q=a(18);var G=a(41);var H=a(121);var W=a(65);var V=a(1933);var z=a.n(V);var Q=new C["b"]("search");var K="IMPROVED_SEARCH";var Y={iid:b.a.string.isRequired,ts:b.a.string.isRequired,logger:b.a.object.isRequired,hasText:b.a.bool.isRequired,permalink:b.a.string.isRequired,user:b.a.string.isRequired,username:b.a.string,text:b.a.string.isRequired,botId:b.a.string,teamDomain:b.a.string,permalinkToMessageThread:b.a.string.isRequired,isCrossWorkspace:b.a.bool.isRequired,botProfile:b.a.shape({app_id:b.a.string.isRequired,deleted:b.a.bool,icons:b.a.obj,id:b.a.string,name:b.a.string,updated:b.a.number}),channel:b.a.shape({id:b.a.string.isRequired,name:b.a.string.isRequired}).isRequired,channelName:b.a.string.isRequired,extracts:b.a.arrayOf(b.a.shape({text:b.a.string,truncated_head:b.a.bool,truncated_tail:b.a.bool})),files:b.a.arrayOf(k["a"].File()),subtype:b.a.string,theme:b.a.string,hasAdHocSender:b.a.bool.isRequired,expanded:b.a.bool,onClick:b.a.func,onFileClick:b.a.func,onRepliesClick:b.a.func,onExpand:b.a.func.isRequired,canBeTruncated:b.a.bool.isRequired,attachments:b.a.array,reactions:b.a.array,onExpandHoverStart:b.a.func,onExpandHoverEnd:b.a.func,reply_count:b.a.number,onLinkClick:b.a.func,icons:b.a.shape({image_36:b.a.string,image_48:b.a.string,image_64:b.a.string,image_72:b.a.string,emoji:b.a.string})};var J={teamDomain:"",username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:false,onClick:m.a.noop,onFileClick:m.a.noop,onRepliesClick:m.a.noop,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:m.a.noop,onExpandHoverEnd:m.a.noop,reply_count:0,onLinkClick:m.a.noop,icons:null};var Z=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={hasKeyboardFocus:false};Object(f["bindAll"])(a,["expand","onClick","onFocusEnter","onFocusLeave","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onTimestampClick"]);a.dragging=false;a.dragStartX=null;a.dragStartY=null;return a}l()(t,[{key:"onClick",value:function e(t){if(t.target.dataset.memberId)return;if("BUTTON"===t.target.tagName||"BUTTON"===t.target.parentNode.tagName)return;if(t.target.dataset.channelId||t.target.dataset.messageSender||("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented){this.onLinkClick(t);return}var a=false;if(this.dragging){var n=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);a=n>16;this.dragging=false}a||t.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onFileClick",value:function e(t,a){var n=a.file;t.preventDefault();this.props.onFileClick(t,{file:n,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onRepliesClick",value:function e(t){t.preventDefault();this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.props,n=a.channel,r=a.ts,i=a.files,o=a.subtype,s=a.teamDomain,l=a.isCrossWorkspace;var c=this.props.permalink;i&&i.length&&"file_comment"!==o&&(c=i[0].permalink);c||(l?this.props.logger.error(K,"Missing permalink for cross workspace message result. channel: "+n+" ts: "+r):c=Object(S["constructAbsoluteMsgPermalink"])({teamDomain:s,channelId:n.id,ts:r}));c&&Object(j["writeText"])(c)}},{key:"onExpandHoverStart",value:function e(){this.props.onExpandHoverStart()}},{key:"onExpandHoverEnd",value:function e(){this.props.onExpandHoverEnd()}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onLinkClick",value:function e(t){var a={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};t.target.dataset.channelId?a.type="channel":t.target.dataset.messageSender?a.type="sender":("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented&&(a.type="link");a.type&&this.props.onLinkClick(a)}},{key:"onTimestampClick",value:function e(t){t.preventDefault()}},{key:"expand",value:function e(t){t.preventDefault();t.stopPropagation();this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderEllipsisButton",value:function e(){return v.a.createElement("button",{onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},v.a.createElement(G["d"],{tip:Q.t("Show more")},v.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}},{key:"renderExpandButton",value:function e(){return v.a.createElement("button",{onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},v.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",Q.t("Show more")))}},{key:"renderText",value:function e(){var t=this;var a=this.props,n=a.text,r=a.extracts,i=a.expanded,o=a.canBeTruncated;if(!(n.length||r.length))return null;if(i||!o)return v.a.createElement("div",{className:"c-search_message__body"},v.a.createElement(I["a"],{text:n}));if(r.length)return v.a.createElement("div",{className:"c-search_message__body"},v.a.createElement(h["Fragment"],null,r.map(function(e,a){var n=0===a&&e.truncated_head;var i=e.truncated_tail;var s=a===r.length-1;return v.a.createElement(h["Fragment"],{key:a},n?t.renderEllipsisButton():null,v.a.createElement(I["a"],{text:e.text}),!i||o&&s?null:t.renderEllipsisButton(),o&&s?t.renderExpandButton():null)})));return v.a.createElement("div",{className:"c-search_message__body"},v.a.createElement(I["a"],{text:n}))}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.user,n=t.hasAdHocSender,i=t.botId,o=t.botProfile,s=t.icons;var l={};i&&(l=r()({},l,{botId:i}));var c=s||o&&o.icons;if(c){var u=c.image_36||c.image_48;var d=c.image_64||c.image_72;var p=c.emoji;u&&(l=r()({},l,{imageUrl:u}));d&&(l=r()({},l,{imageUrl2x:d}));p&&(l=r()({},l,{emoji:p}))}a&&(l=r()({},l,{userId:a}));return v.a.createElement(T["b"],r()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:n,size:36,isInteractive:true,showCard:true,showTooltip:true,tabIndex:"-1"},l))}},{key:"renderTimestamp",value:function e(){var t=this.props,a=t.ts,n=t.permalink;return v.a.createElement(A["b"],{onClick:this.onTimestampClick,timestamp:a,relative:false,full:false,link:n})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return v.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar());return v.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.user,n=t.botId,r=t.botProfile,i=t.username,o=t.theme,s=t.channelName;return v.a.createElement("div",{className:"c-search_message__content_header"},v.a.createElement(L["a"],{userId:a,botId:n,botProfile:r,username:i,channelName:s,isInteractive:true}),"light"===o&&this.renderTimestamp())}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,n=a.attachments,i=a.expanded,o=a.ts,s=a.channel,l=a.canBeTruncated,c=a.hasText;if(!n.length)return null;if(i||!l)return m.a.map(n,function(e){return v.a.createElement(R["a"],r()({key:s.id},Object(O["b"])(e),{isOnlyMessageContent:c,messageTs:o,activeChannelId:s.id,showDelete:false}))});var u=m.a.map(n,function(e,a){var n=Object(O["b"])(e);var r=null;if(Object(w["c"])(n)){var i=n.serviceIcon||n.authorIcon;var s=n.serviceName||n.authorName;var l=s===n.authorName?n.authorSubname:n.authorName;r=v.a.createElement("div",null,v.a.createElement(x["a"],{icon:i,name:s,link:n.serviceUrl||n.authorLink,subname:l,subnameLink:n.authorLink}))}var c=n.extracts;var u=null;c&&c.title&&(u=v.a.createElement("div",{className:"c-search_message__attachment_title"},m.a.map(c.title,function(e,t){var a=0===t&&e.truncated_head;var n=e.truncated_tail;return v.a.createElement(h["Fragment"],{key:t}," ",a?"\u2026":null,X(e.text),n?"\u2026":null)})));var d=null;c&&c.pretext&&(d=m.a.map(c.pretext,function(e,a){var n=0===a&&e.truncated_head;var r=e.truncated_tail;return v.a.createElement("span",{className:"c-message_attachment__pretext",key:a}," ",v.a.createElement(h["Fragment"],null,n?t.renderEllipsisButton():null,v.a.createElement(I["a"],{text:e.text}),r?t.renderEllipsisButton():null))}));var p=null;c&&c.text&&(p=m.a.map(c.text,function(e,a){var n=0===a&&e.truncated_head;var r=e.truncated_tail;return v.a.createElement(h["Fragment"],{key:a}," ",n?t.renderEllipsisButton():null,v.a.createElement(I["a"],{text:e.text}),r?t.renderEllipsisButton():null)}));var f=null;Object(w["f"])(n)&&(f=v.a.createElement("div",null,v.a.createElement(P["a"],{botId:n.botId,icon:n.footerIcon,isAppUnfurl:n.isAppUnfurl,text:n.footer,ts:o})));return v.a.createElement("div",{className:"c-search_message__attachment",key:t.props.iid+"-attachment-"+a},v.a.createElement(M["a"],{color:n.color}),v.a.createElement("div",{className:"c-search_message__attachment_body"},r,u,d,p,f))});return v.a.createElement("div",{className:"c-search_message__attachments"},u)}},{key:"renderReactionsAndReplies",value:function e(){var t=this.props,a=t.reactions,n=t.isCrossWorkspace,r=t.permalinkToMessageThread;var i=this.props.reply_count;if(!a.length&&!i)return null;var o=m.a.chain(a).sortBy("count").take(2).value();var s=m.a.sumBy(a,"count");var l=null;var c=null;s>0&&(l=v.a.createElement("span",{className:"c-search_message__reactions_count"},Q.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:s})));if(i>0){var u=Q.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:i});c=n?v.a.createElement(W["a"],{className:"c-search_message__replies_count",href:r},v.a.createElement(q["a"],{type:"comment-alt"}),u):v.a.createElement(H["a"],{className:"c-search_message__replies_count",onClick:this.onRepliesClick},v.a.createElement(q["a"],{type:"comment-alt"}),u)}return v.a.createElement("div",{className:"c-search_message__reactions"},m.a.map(o,function(e){return v.a.createElement(D["b"],{text:":"+e.name+":",key:e.name,emojiSize:D["a"].SMALL})}),l,c)}},{key:"renderFile",value:function e(){var t=this.props.files;if(!t||!t.length)return null;var a=t[0];if(!a)return null;return v.a.createElement(F["a"],{key:a.id,file:a,onClick:this.onFileClick})}},{key:"renderActions",value:function e(){var t=y()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return v.a.createElement(B["a"],{className:t,ariaLabel:Q.t("Message actions")},v.a.createElement(U["a"],{iconType:"link",ariaHasPopup:false,label:Q.t("Copy link"),onClick:this.onCopyLink}))}},{key:"render",value:function e(){var t=this.props,a=t.theme,n=t.canBeTruncated,r=t.expanded;var i=y()("c-search_message","c-search_message--"+a,{"c-search_message--collapsed":!r&&n,"c-search_message--focus":this.state.hasKeyboardFocus});return v.a.createElement(N["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},v.a.createElement("div",{className:i,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),v.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFile(),this.renderActions())))}}]);return t}(h["PureComponent"]);Z.displayName="SearchResult";function X(e){return Object(E["a"])(e,function(e,t){return v.a.createElement("span",{className:"c-search__match",key:t},e)})}Z.defaultProps=J;t["a"]=Z},function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(76);var l=a(15);var c=a.n(l);var u=a(1351);var d=a.n(u);var p={children:r.a.node,className:r.a.string,ariaLabel:r.a.string};var f={children:null,className:null,ariaLabel:null};var m=function e(t){var a=t.className,n=t.children,r=t.ariaLabel;return o.a.createElement("div",{className:c()("c-message_actions__container",a),role:"group","aria-label":r},n)};m.displayName="MessageActionContainer";m.defaultProps=f;t["a"]=Object(s["pure"])(m)},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(142);var r=a(23);var i=a(50);var o=a(26);var s=a(16);var l=a(48);var c=function e(t){var a=Object(r["getTeamId"])(t);var c=Object(i["getTeamById"])(t,a);var u=Object(l["getTeamDisplayName"])(c);var d=Object(s["isRestricted"])(Object(o["getCurrentMember"])(t));var p={teamName:u,isUserRestricted:d,yearlyPlanCostPerTerm:Object(n["selectCostPerTermForYearlyPlan"])(t),monthlyPlanCostPerTerm:Object(n["selectCostPerTermForMonthlyPlan"])(t),availableCurrencies:Object(n["selectAvailableCurrencies"])(t),planCostPerTerm:Object(n["selectActivePlanCostPerTerm"])(t),planIsYearly:Object(n["selectActivePlanIsYearly"])(t),numMonthsPerPlan:Object(n["selectActivePlanMonthsCount"])(t),planCurrency:Object(n["selectActiveCurrency"])(t),numBillableMembers:Object(n["selectBillableActiveUsers"])(t),numInactiveMembers:Object(n["selectInactiveUsers"])(t),isZeroActiveMembers:Object(n["isZeroRealActiveUsers"])(t),totalMembers:Object(n["selectTotalUsers"])(t),paidSeats:Object(n["selectPaidSeats"])(t),tax:Object(n["selectTax"])(t),teamCredits:Object(n["selectCurrentTeamCredits"])(t),currentTeamCredits:Object(n["selectCurrentTeamCredits"])(t),totalCost:Object(n["selectSubtotal"])(t),totalCostWithTax:Object(n["selectTotalRecurring"])(t),totalRecurringTax:Object(n["selectTotalRecurringTax"])(t),isCostValid:Object(n["isCostValid"])(t),didCostFetchFail:Object(n["isAPIError"])(t),isPlansAndCostDataLoaded:Object(n["selectIsPlansAndCostDataLoaded"])(t)};return p}},function(e,t,a){"use strict";var n=a(1);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(76);var l=a(10);var c=a(855);var u=new l["b"]("pricing_calculator");var d={planIsYearly:o.a.bool,formattedPlanCost:o.a.string,billedMembers:o.a.number,numInactiveMembers:o.a.number,featureCheckoutFlowTranslations:o.a.bool};var p={planIsYearly:true,formattedPlanCost:"",billedMembers:0,numInactiveMembers:0,featureCheckoutFlowTranslations:false};function f(e){var t=e.planIsYearly,a=e.billedMembers,n=e.numInactiveMembers,i=e.formattedPlanCost,o=e.featureCheckoutFlowTranslations;if(!o)return null;var s=r.a.createElement(c["a"],{type:"times-small",className:"sk_light_gray"});var l=n?u.rt("{billedMembers, plural, =1 {# active member} other {# active members}}",{billedMembers:a}):u.rt("{billedMembers, plural, =1 {# member} other {# members}}",{billedMembers:a});var d=t?u.t("1 year"):u.t("1 month");return r.a.createElement("div",{className:"display_flex flex_wrap align_items_center"},r.a.createElement("div",null,i),s,r.a.createElement("div",null,l),s,r.a.createElement("div",null,d))}f.displayName="SubtotalCalculation";f.defaultProps=p;t["a"]=Object(s["pure"])(f)},,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(9);var o=a.n(i);var s=a(1);var l=a.n(s);var c=a(0);var u=a.n(c);var d=a(77);var p=a(26);var f=a(31);var m=a(872);var h=a(29);var v=a(164);var g=a(16);var b=Object(f["b"])("Opens app permission dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.appUserId,i=a.cancelText,s=a.channelId,c=a.eventId,u=a.goButtonText,f=a.onAuthorize,b=a.onDismiss,_=a.referringEventId,y=a.referringUiContext,k=a.renderTitle,O=a.scopeInfo,w=a.title;var E=_;var C=y;var j=function e(a){var r,i;var l=Object(p["getMemberById"])(t(),n);var u=o()({},h["n"].action,a);var d=Object(v["a"])({state:t()});d.track(c,o()({contexts:(i={},o()(i,h["b"].ui_context,u),o()(i,h["b"].referring_ui_context,C),o()(i,h["b"].core,(r={},o()(r,h["c"].app_id,Object(g["getAppIdFromMember"])(l)),o()(r,h["c"].channel_id,s),r)),i)},h["b"].referring_event_id,E));E=c;C=u};var S={appUserId:n,cancelText:i,channelId:s,goButtonText:u,onAuthorize:function e(){j(h["m"].ALLOW);return f()},onDismiss:function e(){j(h["m"].DO_NOT_ALLOW);return b()},onClose:function e(){j(h["m"].CLOSE)},renderTitle:k,scopeInfo:O,title:w};var I=l.a.createElement(m["b"],r()({},S));e(Object(d["openModal"])({element:I}));j(h["m"].IMPRESSION)});b.propTypes={appUserId:u.a.string.isRequired,goButtonText:u.a.string,cancelText:u.a.string,scopeInfo:u.a.arrayOf(u.a.shape({scopes:u.a.arrayOf(u.a.string),is_dangerous:u.a.bool,short_description:u.a.string.isRequired,long_description:u.a.string})).isRequired,onAuthorize:u.a.func.isRequired,onDismiss:u.a.func,channelId:u.a.string,eventId:u.a.oneOfType([u.a.string,u.a.number]),referringEventId:u.a.oneOfType([u.a.string,u.a.number]),referringUiContext:u.a.object,renderTitle:u.a.func,title:u.a.string};t["a"]=b},,function(e,t,a){"use strict";a.r(t);var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(2);var l=a.n(s);var c=a(4);var u=a(19);var d=a(12);var p;function f(e){if(!e||!e.id)return false;if(Object(d["isIm"])(e)&&!e.name&&!Object(d["getMemberIdFromIm"])(e))return false;if(Object(d["isMpim"])(e)&&!e.name&&!e._internal_name)return false;if(!e.name)return false;return true}function m(e,t){if(!t||!t.id||Object(d["isFromAnotherTeam"])(t))return e;e=h(e,t.id);var a=t.id;var n=l.a.toLower(t.name);var r={};if(Object(d["isIm"])(t)&&Object(d["getMemberIdFromIm"])(t)){var i=Object(d["getMemberIdFromIm"])(t);e.ims[i]=a;e.ims[n]=a;r.ims=[i,n]}else if(Object(d["isMpim"])(t)&&t._internal_name){var o=t._internal_name;e.mpims[o]=a;e.mpims[n]=a;r.mpims=[o,n]}else{e.channelsAndGroups[n]=a;r.channelsAndGroups=[n]}e.reverseMap[a]=r;return e}function h(e,t){if(!t)return e;if(!e.reverseMap||!e.reverseMap[t]||l.a.isEmpty(e.reverseMap[t]))return e;var a=o()({},e);var n=e.reverseMap[t];Object.keys(n).forEach(function(e){var t=n[e];if(!t||!t.length)return;t.forEach(function(t){delete a[e][t]})});a.reverseMap[t]={};return a}function v(e,t){if(!t||!t.length||!l.a.isArray(t))return e;var a=l.a.filter(t,f);if(!a.length)return e;var n={channelsAndGroups:o()({},e.channelsAndGroups),ims:o()({},e.ims),mpims:o()({},e.mpims),reverseMap:o()({},e.reverseMap)};a.forEach(function(e){m(n,e)});return n}var g={channelsAndGroups:{},ims:{},mpims:{},reverseMap:{}};var b=Object(c["c"])((p={},r()(p,u["addOrReplaceChannels"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels,n=t.reason;if(!n)return e;return v(e,a)}),r()(p,u["removeChannels"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ids;if(!a||!a.length)return e;var n={channelsAndGroups:o()({},e.channelsAndGroups),ims:o()({},e.ims),mpims:o()({},e.mpims),reverseMap:o()({},e.reverseMap)};a.forEach(function(e){h(n,e)});return n}),p),g);t["default"]=b},function(e,t,a){"use strict";a.r(t);a.d(t,"setMarkingState",function(){return m});a.d(t,"clearAllMarkingFlags",function(){return h});a.d(t,"clearMarkingFlagsForIds",function(){return v});a.d(t,"getAllIdsNeedingMarking",function(){return _});a.d(t,"getAllUnmutedIdsNeedingMarking",function(){return y});a.d(t,"getAllMutedIdsNeedingMarking",function(){return k});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(2);var l=a.n(s);var c=a(0);var u=a.n(c);var d=a(4);var p=a(374);var f;var m=Object(d["a"])("Update the apiNeedsMarking flag for a channel");m.propTypes={id:u.a.string.isRequired,needsApiMarking:u.a.bool.isRequired};var h=Object(d["a"])("Wipe out all API needs marking flags when they are all completed");h.propTypes=null;var v=Object(d["a"])("Remove API needs marking flags for specified IDs");v.propTypes=u.a.arrayOf(u.a.string).isRequired;var g={};var b=Object(d["c"])((f={},r()(f,m,function(e,t){if(t.needsApiMarking)return o()({},e,r()({},t.id,t.needsApiMarking));return l.a.omit(e,t.id)}),r()(f,h,function(e){if(l.a.isEqual(e,g))return e;return g}),r()(f,v,function(e,t){if(l.a.isEqual(e,g))return e;return l.a.omit(e,t)}),f),g);t["default"]=b;var _=Object(d["d"])(function(e){var t=e&&e.channelsMeta&&e.channelsMeta.needsApiMarking;if(!t)return[];return l.a.keys(t)});var y=Object(d["d"])(function(e){var t=_(e);return l.a.filter(t,function(t){return!Object(p["isChannelMutedById"])(e,t)})});var k=Object(d["d"])(function(e){var t=_(e);return l.a.filter(t,function(t){return Object(p["isChannelMutedById"])(e,t)})})},function(e,t,a){"use strict";var n=a(1133);t["a"]=[n["b"]]},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(9);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(1384);var l=a.n(s);var c="_testOnlyFlush";var u=function e(t){return function(){var e=void 0;var a=void 0;var n=function t(){a=null;if(e){var n=e;e=null;n()}};var i=function t(r){if(a)return;e=r;a=requestAnimationFrame(n)};var l=Object(s["batchedSubscribe"])(i)(t);return o()({},l.apply(void 0,arguments),r()({},c,n))}};t["b"]=u},,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(4);var l=a(37);var c=a(670);var u=a(795);var d=a(796);var p=a(17);var f="IMPROVED_SEARCH";var m=Object(s["e"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.tab;e(Object(l["setTabOnly"])({tab:n}));var i=t();Object(p["a"])({getState:t}).info(f,'Switching to tab "'+n+'"');e(Object(d["a"])(r()({method:"search_tab",request_id:Object(c["a"])(i)},Object(u["a"])(i))))});m.propTypes={method:o.a.string};t["a"]=m},,,,,,,,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(14);var v=a(15);var g=a.n(v);var b=a(2);var _=a(11);var y=a(1147);var k=a(10);var O=a(456);var w=a(174);var E=a(1761);var C=new k["b"]("workspace_directory");var j={large:"large",small:"small"};var S={large:64,small:48};var I={team:p.a.shape({id:p.a.string,description:p.a.string,discoverable:p.a.string,name:p.a.string,domain:p.a.string,is_member:p.a.bool,date_requested_join:p.a.oneOfType([p.a.string,p.a.number]),icon:p.a.object,is_inactive:p.a.bool,user_counts:p.a.object}).isRequired,size:p.a.oneOf(Object(b["values"])(j)),featureZeroWorkspaceOnboarding:p.a.bool.isRequired,className:p.a.string,onActionReject:p.a.func,onActionResolve:p.a.func,anchorPage:p.a.string,openDialog:p.a.func,doLaunchInNewTab:p.a.bool};var T={allowInstantJoin:false,size:j.large,className:"",onActionResolve:b["noop"],onActionReject:b["noop"],anchorPage:"",openDialog:b["noop"],doLaunchInNewTab:false};var N=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCardClick=a.onCardClick.bind(a);a.onKeyPress=a.onKeyPress.bind(a);a.onResize=a.onResize.bind(a);a.openDialog=a.openDialog.bind(a);a.state={isMobileView:false};return a}o()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(w["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.setIsMobileView(Object(w["c"])())}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,a){t.preventDefault();if("Enter"===t.key)switch(a){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isSmallVariationCard",value:function e(){return this.props.size===j.small}},{key:"isLargeVariationCard",value:function e(){return this.props.size===j.large}},{key:"openDialog",value:function e(){var t=this.props,a=t.team,e=t.openDialog;e({team:a})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var a=this.isLargeVariationCard()&&!this.state.isMobileView?S[j.large]:S[j.small];return m.a.createElement("div",{className:"display_flex"},m.a.createElement(O["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:a,entityData:t,featureReactMessages:true,featureReactMemberProfileCard:true}))}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return m.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,n=t.team;if(!a)return null;var r=this.state.isMobileView;var i=n.date_requested_join,o=n.discoverable,s=n.domain,l=n.user_counts;l=void 0===l?{}:l;var c=l.active_members,u=void 0===c?0:c;var d=C.t("{activeMembers} active members",{activeMembers:u?Object(k["j"])(u):0});var p=void 0;p=this.isLargeVariationCard()&&!r?m.a.createElement("div",null,m.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),m.a.createElement("span",{className:"overflow_ellipsis"},s+".slack.com")):this.isSmallVariationCard()&&"closed"===o&&i?m.a.createElement("span",null,C.t("Awaiting admin approval")):m.a.createElement("span",{className:"overflow_ellipsis"},d);return m.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},p)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,n=t.team;if(!a||this.isSmallVariationCard())return null;var r=Object(w["f"])(n,{context:"largeCard",featureZeroWorkspaceOnboarding:a});if(!r)return null;return m.a.createElement("div",{className:"p-workspace_directory_card__status"},r)}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return m.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderButton",value:function e(){var t=this.props,a=t.team,n=t.size,r=t.onActionReject,i=t.onActionResolve,o=t.anchorPage,s=t.doLaunchInNewTab;var l=this.isLargeVariationCard()?"large":"medium";return m.a.createElement(y["a"],{team:a,buttonContext:n+"Card",featureZeroWorkspaceOnboarding:true,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:r,onActionResolve:i,anchorPage:o,doLaunchInNewTab:s,size:l})}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.featureZeroWorkspaceOnboarding,r=a.size,i=a.className;if(!n)return null;var o=this.props.team.id;var s=g()("p-workspace_directory_card",i,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return m.a.createElement("div",{className:s,onClick:this.onCardClick,onKeyPress:function e(a){return t.onKeyPress(a,"openDialog")},"data-workspace-id":o,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":r,role:"button",tabIndex:"0"},m.a.createElement("div",{className:"display_flex flex_direction_column"},m.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),m.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(f["Component"]);N.displayName="WorkspaceDirectoryCard";N.defaultProps=T;var A=function e(t){return{featureZeroWorkspaceOnboarding:Object(_["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding")}};var R={};var M=Object(h["connect"])(A)(N);a.d(t,false,function(){return});a.d(t,false,function(){return});var x=t["a"]=M},,,function(e,t,a){"use strict";var n=a(32);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(5);var l=a.n(s);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var f=a(8);var m=a.n(f);var h=a(0);var v=a.n(h);var g=a(1);var b=a.n(g);var _=a(14);var y=a(2);var k=a(270);var O=a(11);var w=a(26);var E=a(20);var C=a(18);var j=a(10);var S=a(174);var I=new j["b"]("workspace_directory");var T={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var N={team:v.a.shape({id:v.a.string,description:v.a.string,discoverable:v.a.string,name:v.a.string,domain:v.a.string,is_member:v.a.bool,date_requested_join:v.a.oneOfType([v.a.string,v.a.number]),icon:v.a.object,is_inactive:v.a.bool,user_counts:v.a.object}).isRequired,buttonContext:v.a.oneOf(Object(y["values"])(S["a"])),featureZeroWorkspaceOnboarding:v.a.bool.isRequired,customClasses:v.a.string,onWorkspaceLaunch:v.a.func,onDefaultButtonClick:v.a.func,doLaunchInNewTab:v.a.bool,displayDirectoryInModal:v.a.bool,onActionReject:v.a.func,onActionResolve:v.a.func,anchorPage:v.a.string,doUpsertJoin:v.a.bool,callJoinWorkspace:v.a.func,callRequestToJoinWorkspace:v.a.func,size:v.a.oneOf(["medium","large"])};var A={buttonContext:"largeCard",onClick:y["noop"],customClasses:"",onWorkspaceLaunch:y["noop"],onDefaultButtonClick:y["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,callJoinWorkspace:y["noop"],callRequestToJoinWorkspace:y["noop"],size:"large",onActionReject:y["noop"],onActionResolve:y["noop"],anchorPage:void 0,doUpsertJoin:false};var R=function e(t){var a=t.displayDirectoryInModal;var n="primary";var r="join";var i=a?I.t("Join and Open"):I.t("Join and Launch Slack");return{text:i,type:n,"data-qa-ws-directory-button-type":n,"data-qa-ws-directory-button-text":r,"data-qa":r}};var M=function e(){var t="primary";var a="request_to_join";return{text:I.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var x=function e(){var t="primary";var a="request_sent";return{text:I.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a,disabled:true}};var P=function e(t){var a=t.displayDirectoryInModal;var n="primary";var r="launch";var i=a?I.t("Open"):I.t("Launch in Slack");return{text:i,type:n,"data-qa-ws-directory-button-type":n,"data-qa-ws-directory-button-text":r,"data-qa":r}};var D=function e(){var t="outline";var a="default";return{type:t,text:I.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var F=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={loading:false};a.buttonType=null;a.onClick=a.onClick.bind(a);a.onKeyPress=a.onKeyPress.bind(a);return a}u()(t,[{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.windowOpener;var r=this.props,i=r.team,s=r.onActionReject,l=r.onActionResolve,c=r.anchorPage,u=r.doUpsertJoin;return this.props.callJoinWorkspace({teamId:i.id,anchorPage:c,doUpsertJoin:u}).then(function(){var e={};u&&(e.workspace=o()({},i,{is_member:true}));l(e)}).then(function(){return t.props.onWorkspaceLaunch(n)}).catch(function(e){if(n){t.setLoading(false);n.close()}s({node:b.a.createElement("span",null,I.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:e})})}},{key:"onWorkspaceRequestToJoin",value:function e(){var t=this;var a=this.props,n=a.team,r=a.onActionReject,i=a.onActionResolve,s=a.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:n.id,anchorPage:s}).then(function(){i({node:b.a.createElement("div",{className:"display_flex"},b.a.createElement(C["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),b.a.createElement("span",null,I.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:o()({},n,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){t.setLoading(false)}).catch(function(e){r({node:b.a.createElement("span",null,I.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getButtonProps",value:function e(t){var a=this.props.displayDirectoryInModal;switch(t){case T.launch:return P({displayDirectoryInModal:a});case T.request:return M();case T.join:return R({displayDirectoryInModal:a});case T.request_sent:return x();case T.default:return D();default:return null}}},{key:"handleButtonAction",value:function e(){var t=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(t){var a=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:a})}return this.onWorkspaceJoin()}if("request"===this.buttonType)return this.onWorkspaceRequestToJoin();if("launch"===this.buttonType){this.props.onWorkspaceLaunch();t&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,n=t.team,i=t.buttonContext,s=t.customClasses,l=t.size;var c=this.state.loading;var u=q(n,{context:i,featureZeroWorkspaceOnboarding:a});this.buttonType=u;var d=this.getButtonProps(u);if(!u||Object(y["isEmpty"])(d))return null;var p=n.id;var f=d.text,m=r()(d,["text"]);var h=m.disabled||c;return b.a.createElement(E["b"],o()({},m,{className:s,role:"button",tabIndex:"0",onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":p,"data-qa-ws-directory-button":true,loading:c,disabled:h,size:l}),f)}}]);return t}(g["Component"]);F.displayName="WorkspaceDirectoryButton";F.defaultProps=A;var L=function e(t,a){var n=a.team,r=a.onActionResolve,i=a.anchorPage,o=a.doLaunchInNewTab,s=a.channelRedirect,l=a.postLaunchAction,c=a.userIdFromURL;var u=Object(w["getCurrentMember"])(t);return{featureZeroWorkspaceOnboarding:Object(O["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(O["isClientApp"])(t),onWorkspaceLaunch:function e(a){return Object(S["i"])(t,{team:n,user:u,onActionResolve:r,anchorPage:i,doLaunchInNewTab:o,windowOpener:a,channelRedirect:s,postLaunchAction:l,userIdFromURL:c})}}};var B={callJoinWorkspace:k["c"],callRequestToJoinWorkspace:k["e"]};var U=Object(_["connect"])(L,B)(F);function q(e,t){var a=t.context,n=void 0===a?S["a"].smallCard:a,r=t.featureZeroWorkspaceOnboarding,i=void 0===r||r;if(!i)return null;var o=e.is_member,s=e.date_requested_join,l=e.is_assigned,c=e.discoverable;if(o)return T.launch;if(n!==S["a"].smallCard){if(l)return T.join;switch(c){case"open":return T.join;case"closed":if(!s)return T.request;if(n===S["a"].largeCard)return T.request_sent;break;case"unlisted":break;default:}return null}return T.default}a.d(t,false,function(){return});var G=t["a"]=U},,,,,,,,function(e,t,a){"use strict";var n=a(1399);t["a"]=n["a"]},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=/^F[A-Z0-9]{8,}$/;function r(e){return n.test(e)}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(216);function r(e){return Object(n["a"])((e||"").trim().toLowerCase())}},function(e,t,a){"use strict";var n=a(24);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(104);var b=a(15);var _=a.n(b);var y=a(2);var k=a(20);var O=a(18);var w=a(188);var E=a(10);var C=a(2116);var j=new E["b"]("coachmarks");var S=150;var I=-500;var T={children:m.a.element,className:m.a.string,position:m.a.string,delay:m.a.number,content:m.a.oneOfType([m.a.node,m.a.func]),zIndex:m.a.oneOf(["above_fs","fs","menu","below_menu"]),onContinue:m.a.func,onShow:m.a.func,onSkip:m.a.func,hasCloseButton:m.a.bool,hasSkipLink:m.a.bool,hasSkipButton:m.a.bool,skipButtonText:m.a.string,continueButtonText:m.a.string,skipLinkPre:m.a.string,skipLinkText:m.a.string,title:m.a.node,shouldShow:m.a.oneOfType([m.a.func,m.a.bool])};var N={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:y["noop"],onShow:y["noop"],onSkip:y["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:j.t("Done?"),skipLinkText:j.t("Click here to skip"),continueButtonText:j.t("Got it!"),title:"",shouldShow:false};var A=function(e){p()(t,e);function t(){o()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e);e.setCoachmarkRef=e.setCoachmarkRef.bind(e);e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e);e.measureContents=e.measureContents.bind(e);e.onSkipClick=e.onSkipClick.bind(e);e.onCloseClick=e.onCloseClick.bind(e);e.onContinueClick=e.onContinueClick.bind(e);e.onResize=Object(y["debounce"])(e.measureContentsAndSetState.bind(e),S,{maxWait:S});return e}l()(t,[{key:"componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(g["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"maybeShowCoachmark",value:function e(){var t=this;var a=Object(y["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(a){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return v.a.createElement(k["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":j.t("Close")},v.a.createElement(O["a"],{type:"times"}))}},{key:"renderTitle",value:function e(){return v.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"renderContent",value:function e(){return v.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre;var a=this.props.skipLinkText;return v.a.createElement("div",{className:"p-coachmark__skip_link"},v.a.createElement("span",null,t),t&&" ",v.a.createElement(k["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},a))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return v.a.createElement(k["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":_()("p-coachmark__footer","margin_top_100");return v.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),v.a.createElement(k["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},this.props.continueButtonText))}},{key:"render",value:function e(){var t=this.props,a=t.children,n=t.position,i=t.zIndex;var o=this.state,s=o.isShowing,l=o.contentsRect;var c=_()("p-coachmark","p-coachmark--"+n,this.props.className);var u=s&&v.a.createElement(w["a"],{isOpen:s,position:n,targetBounds:l,allowanceX:I,allowanceY:I,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},v.a.createElement("div",{className:c,"data-qa":"coachmark",ref:this.setCoachmarkRef},v.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return v.a.cloneElement(a,{ref:this.setCoachmarkedContentRef},[].concat(r()(v.a.Children.toArray(a.props.children)),[u]))}}]);return t}(h["PureComponent"]);A.displayName="Coachmark";A.defaultProps=N;var R=A;var M=t["a"]=R},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(2);var r=a.n(n);var i=/\.spec\.jsx?$/;function o(e){return!i.test(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={};if(!e||!Object(n["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var r=t?e.keys():e.keys().filter(o);r.forEach(function(t){a[t]=e(t)});return a}},function(e,t,a){"use strict";a.d(t,"c",function(){return o});a.d(t,"a",function(){return s});a.d(t,"b",function(){return l});var n=a(2);var r=a.n(n);var i=a(13);var o=Object(i["c"])("TS.ui.channel_browser.start",r.a.noop);var s=Object(i["c"])("TS.ui.channel_browser.highlightPendingInvitationsOnNextOpen",r.a.noop);var l=Object(i["c"])("TS.ui.channel_browser.openConnectedWorkspacesModal",r.a.noop)},,,function(e,t,a){"use strict";a.r(t);a.d(t,"noopAction",function(){return o});var n=a(9);var r=a.n(n);var i=a(4);var o=Object(i["a"])("NOOP");o.propTypes=null;var s=0;var l=Object(i["c"])(r()({},o,function(e){return e+1}),s);t["default"]=l},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(13);var r=Object(n["c"])("TS.ui.channel_prefs_dialog.start")},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h={item:p.a.object};var v={item:{}};var g=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props.item;var a=t.member.profile.image_48+" 1x, "+t.member.profile.image_72+" 2x";return m.a.createElement("div",{className:"c-lazy_filter_select__member_item"},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_list_icon",src:t.member.profile.image_48,srcSet:a}),m.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},t.member.profile.real_name),m.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},"@",t.member.name))}}]);return t}(f["PureComponent"]);g.displayName="LazyFilterSelectMemberListItem";t["a"]=g;g.defaultProps=v},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h={item:p.a.object};var v={item:{}};var g=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props.item;return m.a.createElement("div",{className:"c-lazy_filter_select__member_token",key:t.id},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_token_icon",src:t.member.profile.image_48}),m.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},t.member.profile.real_name))}}]);return t}(f["PureComponent"]);g.displayName="LazyFilterSelectMemberToken";t["a"]=g;g.defaultProps=v},function(e,t,a){"use strict";var n=a(1);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(31);var l=a(77);var c=a(759);var u=Object(s["b"])("Opens the custom status input in a dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.fromKeyboardShortcut,i=void 0!==n&&n;e(Object(l["openModal"])({element:r.a.createElement(c["c"],{useDialog:true,focusOnMount:true,openedFromKeyboardShortcut:i})}))});u.propTypes={fromKeyboardShortcut:o.a.bool};t["a"]=u},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(2);var g=a.n(v);var b=a(72);var _=a(44);var y=a(36);var k=a(11);var O=a(78);var w=a(10);var E=a(1442);var C=a(103);var j=a(1171);var S=new w["b"]("msg_edit");var I={ts:m.a.string.isRequired,channelId:m.a.string.isRequired,subtype:m.a.string,removeMessage:m.a.func,hasFile:m.a.bool,fileMode:m.a.string,rollup:b["a"].Rollup(),useBulkDelete:m.a.bool};var T={removeMessage:v["noop"],subtype:void 0,hasFile:false,fileMode:void 0,rollup:void 0,useBulkDelete:false};var N=function(e){u()(t,e);function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}o()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.ts,n=t.channelId,r=t.removeMessage,i=t.useBulkDelete,o=t.rollup;var s=i?Object(v["reduce"])(o,function(e,t){return e.concat(t.timestamps)},[]):[];s.sort();r({channelId:n,ts:a,rollupTimestamps:i&&s?s:[]}).catch(v["noop"])}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var a=this.getFileLabel();if("file_upload"===t){if("file"===a)return S.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===a)return S.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===a)return S.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===a)return S.t("Note that deleting this message will not unshare the file.");if("snippet"===a)return S.t("Note that deleting this message will not unshare the snippet.");if("post"===a)return S.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return S.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,a=t.hasFile,n=t.fileMode;if(!a)return null;if("snippet"===n)return"snippet";if("post"===n)return"post";return"file"}},{key:"render",value:function e(){var t=this.props,a=t.ts,n=t.channelId,r=t.rollup,i=t.useBulkDelete;var o=this.getBodyText();return p.a.createElement(C["a"],{title:S.t("Delete message"),goButtonText:S.t("Delete"),goButtonType:"danger",onGo:this.onGo},S.t("Are you sure you want to delete this message? This cannot be undone."),o&&p.a.createElement("div",{className:"margin_top_50"},o),p.a.createElement("div",{className:"margin_top_100"},p.a.createElement(j["a"],{ts:a,channelId:n,rollup:i&&r?r:null,isStandalone:true})))}}]);return t}(d["PureComponent"]);N.displayName="BaseDeleteMessageDialog";N.defaultProps=T;var A=function e(t,a){var n=a.channelId,r=a.ts,i=a.rollup;var o=Object(k["isFeatureEnabled"])(t,"feature_file_threads");var s=Object(k["isFeatureEnabled"])(t,"feature_allow_bulk_delete_join_leave_messages");var l=Object(_["getMessageByTimestamp"])(t,n,r);var c=o?null:l.file;var u=o?l.files:null;var d=o?Object(O["getFileById"])(t,Object(v["first"])(u)):Object(O["getFileById"])(t,c);var p=false;var f=void 0;if(d){p=true;f=d.mode}var m=!!(s&&i);return{hasFile:p,fileMode:f,subtype:Object(y["getMessageSubtype"])(l),rollup:i,useBulkDelete:m}};var R={removeMessage:E["a"]};var M=Object(h["connect"])(A,R)(N);M.propTypes={channelId:m.a.string.isRequired,ts:m.a.string.isRequired};t["a"]=M},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(2);var g=a.n(v);var b=a(12);var _=a(10);var y=a(19);var k=a(1442);var O=a(103);var w=a(1171);var E=new _["b"]("msg_edit");var C={ts:m.a.string.isRequired,channelId:m.a.string.isRequired,channelType:m.a.string,removeMessage:m.a.func};var j={channelType:void 0,removeMessage:v["noop"]};var S=function(e){u()(t,e);function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}o()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.ts,n=t.channelId,r=t.removeMessage;r({channelId:n,ts:a,broadcastDelete:true}).catch(v["noop"])}},{key:"render",value:function e(){var t=this.props,a=t.ts,n=t.channelId,r=t.channelType;var i=void 0;var o=void 0;if("channel"===r){i=E.t("Remove from channel");o=E.t("Are you sure you want to remove this message from the channel?")}else{i=E.t("Remove from conversation");o=E.t("Are you sure you want to remove this message from the conversation?")}return p.a.createElement(O["a"],{title:i,goButtonText:E.t("Remove message"),onGo:this.onGo},p.a.createElement("div",{className:"margin_bottom_100"},o,E.t("The original reply will still be visible in its thread.")),p.a.createElement(w["a"],{ts:a,channelId:n,isStandalone:true}))}}]);return t}(d["PureComponent"]);S.displayName="BaseRemoveBroadcastDialog";S.defaultProps=j;var I=function e(t,a){var n=a.channelId;var r=Object(y["getChannelById"])(t,n);var i=Object(b["getChannelType"])(r);return{channelType:i}};var T={removeMessage:k["a"]};var N=Object(h["connect"])(I,T)(S);N.propTypes={channelId:m.a.string.isRequired};t["a"]=N},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(14);var m=a(0);var h=a.n(m);var v=a(15);var g=a.n(v);var b=a(2);var _=a.n(b);var y=a(346);var k=a(323);var O=a(36);var w=a(70);var E=a(666);var C=a(1429);var j=a(865);var S=a(2255);var I=a.n(S);var T={msg:h.a.object.isRequired,className:h.a.string,children:h.a.node,position:h.a.oneOf(["default","inside","above"]),show:h.a.bool,showComment:h.a.bool,showShare:h.a.bool,showReact:h.a.bool,showJump:h.a.bool,jumpOrigin:h.a.string,messageContainerType:h.a.oneOf(Object(b["values"])(w["MESSAGE_CONTAINERS"])),viewContext:h.a.string,hover:h.a.bool,setHover:h.a.func,isEditing:h.a.bool,maybeStartEditingMessage:h.a.func};var N={className:void 0,children:void 0,position:"default",show:void 0,showComment:true,showShare:true,showReact:true,showJump:false,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:false,setHover:b["noop"],isEditing:false,maybeStartEditingMessage:b["noop"]};var A=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMenuOpen=a.onMenuOpen.bind(a);a.onMenuClose=a.onMenuClose.bind(a);a.startEditing=a.startEditing.bind(a);a.renderActions=a.renderActions.bind(a);return a}o()(t,[{key:"onMenuOpen",value:function e(){this.props.setHover(true)}},{key:"onMenuClose",value:function e(){this.props.setHover(false)}},{key:"startEditing",value:function e(){var t=this.props,a=t.msg,n=t.viewContext;var r=a.channel,i=a.ts;this.props.maybeStartEditingMessage({viewContext:n,channelId:r,ts:i})}},{key:"renderActions",value:function e(){var t=this.props,a=t.msg,n=t.hover,r=t.show,i=t.showComment,o=t.showShare,s=t.showReact,l=t.showJump,c=t.jumpOrigin,u=t.messageContainerType,d=t.isEditing;if(false===r)return null;if(void 0===r&&!n)return null;if(d)return null;var f=a.ts,m=a.thread_ts,h=a.channel,v=a.file,g=a.comment,b=a.subtype;return p.a.createElement(C["a"],{ts:f,threadTs:m,channelId:h,reactionKey:Object(k["b"])(a),isStarred:Object(O["isStarred"])(a,v,g),isReply:Object(O["isReply"])(a),subtype:b,comment:a.comment&&a.comment.id,fileIds:a.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:i,showShare:o,showReact:s,showJump:l,jumpOrigin:c,editHandler:this.startEditing,messageContainerType:u})}},{key:"render",value:function e(){var t=this.props,a=t.children,n=t.position;var r=g()("c-message_kit__actions","c-message_kit__actions--"+n,this.props.className);return p.a.createElement("div",{className:r,style:{position:"relative"}},a,this.renderActions())}}]);return t}(d["PureComponent"]);A.displayName="MessageActions";A.defaultProps=N;var R=function e(t,a){var n=a.msg,r=a.viewContext;var i=n.channel,o=n.ts;var s=Object(y["getMessageEditData"])(t,{channelId:i,ts:o,viewContext:r}),l=s.isEditing;return{isEditing:l}};var M={maybeStartEditingMessage:function e(){return y["maybeStartEditingMessage"].apply(void 0,arguments)}};t["a"]=Object(E["b"])(Object(j["b"])(Object(f["connect"])(R,M)(A)))},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(14);var o=a(2);var s=a.n(o);var l=a(0);var c=a.n(l);var u=a(17);var d=a(4);var p=a(44);var f=a(1425);var m=a(371);var h=a(162);var v=a(23);var g=a(50);var b=a(19);var _=a(78);var y=a(21);var k=a(279);var O=a(346);var w=a(11);var E=a(12);var C=a(36);var j=a(61);var S=a(323);var I=a(465);var T=a(457);var N=a(791);var A=a(113);var R=a(692);var M=a(415);var x=a(807);var P=a(1120);var D=a(167);var F=a(272);var L=a(9);var B=a.n(L);var U=a(67);var q=a.n(U);var G=a(5);var H=a.n(G);var W=a(6);var V=a.n(W);var z=a(7);var Q=a.n(z);var K=a(8);var Y=a.n(K);var J=a(1);var Z=a.n(J);var X=a(15);var $=a.n(X);var ee=a(345);var te=a(370);var ae=a(1426);var ne=a(1395);var re=a(72);var ie=a(70);var oe=a(164);var se=a(656);var le=a(226);var ce=a(501);var ue=a(144);var de=a(491);var pe=a(269);var fe=a(10);function me(e,t){if(!e||!t)return false;if(t(e))return true;return me(e.parentElement,t)}function he(e){return me(e,function(e){return"A"===e.nodeName})}var ve=a(352);var ge=a(165);var be=a(1427);var _e=a(20);var ye=a(255);var ke=a(682);var Oe=a(173);var we=a(1142);var Ee=a(87);var Ce=a(41);var je=a(228);var Se=a(613);var Ie=a(786);var Te=a(1428);var Ne=a(18);var Ae=a(756);var Re=a(1104);var Me=a(665);var xe=a(712);var Pe=a(464);var De=new fe["b"]("threads");function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,a=e.replyCount,n=e.do24hrTime;if(Object(M["a"])(Object(A["a"])(t),new Date)){if(1===a)return De.t("Today at {time}",{time:Object(ue["a"])(t,{do24hrTime:n})});return De.t("Last reply today at {time}",{time:Object(ue["a"])(t,{do24hrTime:n})})}if(1===a)return Object(Pe["a"])(t);return De.t("Last reply {time_ago}",{time_ago:Object(Pe["a"])(t)})}var Le=a(189);var Be=a(777);var Ue=new fe["b"]("threads");var qe={replies:c.a.array,replyCount:c.a.number.isRequired,replyUsers:c.a.arrayOf(c.a.string),replyUsersCount:c.a.number,latestReply:c.a.string,channelId:c.a.string.isRequired,threadTs:c.a.string.isRequired,do24hrTime:c.a.bool,showThreadOrRefresh:c.a.func,featureNewRepliesAfterBcast:c.a.bool};var Ge={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadOrRefresh:s.a.noop,featureNewRepliesAfterBcast:false};function He(e,t){var a=Object(Be["a"])(e);return Z.a.createElement(Oe["b"],{key:e,userId:a?null:e,botId:a?e:null,size:24,additionalOverlay:t,showCard:true,ariaHidden:"true",tabIndex:"-1"})}He.displayName="renderSingleAvatar";var We=function(e){Y()(t,e);function t(e){H()(this,t);var a=Q()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openThread=a.openThread.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.state={hasKeyboardFocus:false};return a}V()(t,[{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=s.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThreadOrRefresh({channelId:this.props.channelId,threadTs:this.props.threadTs})}},{key:"renderFaces",value:function e(){var t=void 0;t=this.props.replyUsers&&this.props.replyUsers.length?s.a.reject(this.props.replyUsers,function(e){return"B00"===e}):s()(this.props.replies).map("user").reject(function(e){return"B00"===e}).uniq().value();var a=this.props.replyUsersCount?this.props.replyUsersCount:t.length;if(t.length>5)return s()(t).take(4).map(function(e){return He(e)}).value().concat(He(t[4],a-5));return s.a.map(t,function(e){return He(e)})}},{key:"render",value:function e(){var t=this.props,a=t.replyCount,n=t.channelId,r=t.threadTs,i=t.do24hrTime,o=t.featureNewRepliesAfterBcast;var s=Ue.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:a});var l=Object(Le["b"])(n,r);var c=this.getLastReplyTs();var u="";u=o?Fe({latestReply:c,replyCount:a,do24hrTime:i}):Object(M["a"])(Object(A["a"])(c),new Date)?1===a?Ue.t("Today at {time}",{time:Object(ue["a"])(c,{do24hrTime:i})}):Ue.t("Last reply today at {time}",{time:Object(ue["a"])(c,{do24hrTime:i})}):1===a?Object(Pe["a"])(c):Ue.t("Last reply {time_ago}",{time_ago:Object(Pe["a"])(c)});var d=$()("c-message__reply_bar",{"c-message__reply_bar--focus":this.state.hasKeyboardFocus});return Z.a.createElement(ye["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},Z.a.createElement("div",{role:"presentation",className:d,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),Z.a.createElement("a",{className:"c-message__reply_count",href:l,target:"_blank",rel:"noopener noreferrer"},s),Z.a.createElement("div",{className:"c-message__reply_bar_description"},Z.a.createElement("span",{className:"c-message__reply_bar_last_reply"},u),Z.a.createElement("span",{className:"c-message__reply_bar_view_thread"},Ue.t("View thread"))),Z.a.createElement(Ne["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true})))}}]);return t}(Z.a.PureComponent);We.displayName="ReplyBar";We.defaultProps=Ge;function Ve(e){return{do24hrTime:Object(y["getUserPref"])(e,"time24"),featureNewRepliesAfterBcast:Object(w["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var ze=Object(i["connect"])(Ve,{showThreadOrRefresh:xe["showThreadOrRefresh"]})(We);var Qe=a(1008);var Ke=a(735);var Ye=a(3339);var Je=a(1105);var Ze=a(1139);var Xe=a(150);var $e=a(443);var et=a(1122);var tt=a(1446);var at=new fe["b"]("threads");var nt={ts:c.a.string.isRequired,threadTs:c.a.string.isRequired,channelId:c.a.string.isRequired,rootText:c.a.string,theme:c.a.string,replyCount:c.a.number,replyUsers:c.a.arrayOf(c.a.string),replyUsersCount:c.a.number,featureFileThreads:c.a.bool,showThread:c.a.func};var rt={rootText:null,theme:"light",replyCount:0,replyUsers:void 0,replyUsersCount:0,featureFileThreads:false,showThread:o["noop"]};var it=function(e){Y()(t,e);function t(e){H()(this,t);var a=Q()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openThread=a.openThread.bind(a);return a}V()(t,[{key:"openThread",value:function e(t){var a=this.props,n=a.showThread,r=a.channelId,i=a.threadTs,o=a.ts;t.preventDefault();n({channelId:r,threadTs:i,highlightTs:o})}},{key:"renderRepliersSummary",value:function e(t){var a=this.props,n=a.replyCount,r=a.replyUsers,i=a.replyUsersCount,o=a.featureFileThreads;if(!n||!i)return null;return Z.a.createElement("div",{className:"c-message__broadcast_repliers"},o?null:Z.a.createElement(Ne["a"],{type:"comment_alt",className:"c-message__broadcast_repliers_icon"}),Z.a.createElement("a",{className:"c-message__broadcast_repliers_link",href:t,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},Z.a.createElement(tt["a"],{replyCount:n,replyUsers:r,replyUsersCount:i,prefixWithReplyCount:true,broadcastPreabmle:true})))}},{key:"render",value:function e(){var t=this;var a=Object(C["constructMsgPermalink"])(this.props.channelId,this.props.ts,this.props.threadTs);var n=void 0;if(this.props.rootText)n=Z.a.createElement("div",{className:"c-message__broadcast_preamble"},Z.a.createElement("span",{className:"c-message__broadcast_preamble_meta"},Object(et["a"])()),Z.a.createElement("a",{className:"c-message__broadcast_preamble_link",href:a,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},Z.a.createElement(Ee["a"],{text:this.props.rootText,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026"})));else{var r=at.rt("replied to <a>a thread</a>",null,function(e){var n=e.key,r=e.text;return Z.a.createElement("a",{className:"c-message__broadcast_preamble_link",key:n,href:a,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},r)});n=Z.a.createElement("div",{className:"c-message__broadcast_preamble"},r)}if("light"===this.props.theme)return Z.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},n,this.renderRepliersSummary(a));return n}}]);return t}($e["a"]);it.displayName="ThreadBroadcastPreamble";it.propTypes=nt;it.defaultProps=rt;var ot=it;function st(e,t){var a=t.threadTs,n=t.channelId;var r=Object(p["getMessageByTimestamp"])(e,n,a);if(!r)return{};var i=r.reply_count;var o=r.replies||[];var l=void 0;l=r.reply_users?r.reply_users:s()(o).map("user").uniq().value();var c=r.reply_users_count?r.reply_users_count:l.length;var u=Object(C["getMessageRootText"])(r);var d=Object(w["isFeatureEnabled"])(e,"feature_file_threads");if(d&&r.files&&r.files.length){var f=s.a.first(r.files);var m=Object(_["getFileById"])(e,f);u=Object(C["getMessageRootText"])(r,m)}return{rootText:u,replyCount:i,replyUsers:l,replyUsersCount:c,theme:Object(y["getUserMessagesTheme"])(e),featureFileThreads:d}}var lt={showThread:Xe["g"]};var ct=Object(i["connect"])(st,lt)(ot);var ut=a(65);var dt=new fe["b"]("message");var pt={ts:c.a.string.isRequired,replyCount:c.a.number.isRequired,threadTs:c.a.string.isRequired,channelId:c.a.string.isRequired,latestReply:c.a.string.isRequired,showThread:c.a.func,do24hrTime:c.a.bool,featureNewRepliesAfterBcast:c.a.bool};var ft={showThread:o["noop"],do24hrTime:false,featureNewRepliesAfterBcast:false};var mt=function(e){Y()(t,e);function t(e){H()(this,t);var a=Q()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}V()(t,[{key:"onClick",value:function e(t){var a=this.props,n=a.channelId,r=a.threadTs,i=a.ts;t.preventDefault();this.props.showThread({channelId:n,threadTs:r,highlightTs:i})}},{key:"render",value:function e(){var t=this.props,a=t.ts,n=t.latestReply,r=t.replyCount,i=t.do24hrTime,o=t.featureNewRepliesAfterBcast;if(!o||!n)return null;if(n<=a)return null;var s=Fe({latestReply:n,replyCount:r,do24hrTime:i});return Z.a.createElement("div",{className:"c-message__broadcast_footer"},Z.a.createElement(ut["a"],{className:"c-message__broadcast_footer_link",onClick:this.onClick},dt.t("View newer replies")),Z.a.createElement("span",{className:"c-message__broadcast_footer_last_reply_text"},s))}}]);return t}(J["PureComponent"]);mt.displayName="ThreadBroadcastFooter";mt.defaultProps=ft;var ht=function e(t,a){var n=a.channelId,r=a.threadTs;var i=Object(p["getMessageByTimestamp"])(t,n,r);return{latestReply:Object(C["getLatestReply"])(i),replyCount:Object(C["getReplyCount"])(i),do24hrTime:Object(y["getUserPref"])(t,"time24"),featureNewRepliesAfterBcast:Object(w["isFeatureEnabled"])(t,"feature_new_replies_after_bcast")}};var vt=Object(i["connect"])(ht,{showThread:Xe["g"]})(mt);var gt=a(1429);var bt=a(1432);var _t=a(1141);var yt=a(1433);var kt=a(1434);var Ot=a(664);var wt=a(348);var Et=a(48);var Ct=function e(){return Object(wt["c"])("stars")};var jt={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var St={isPinned:c.a.bool,isStarred:c.a.bool,isEphemeral:c.a.bool,isCustomResponse:c.a.bool,isSliHighlight:c.a.bool,isSelfIm:c.a.bool,isSlackbotIm:c.a.bool,primaryType:c.a.oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),sliHighlight:c.a.shape({loading:c.a.bool,isHighlight:c.a.bool,feedbackOptions:c.a.object,justification:c.a.string,feedback:c.a.string}),isHovered:c.a.bool,channelId:c.a.string,ts:c.a.string,currentUserId:c.a.string,pinnedByMemberId:c.a.string,teamDisplayName:c.a.string,featureTeambot:c.a.bool.isRequired};var It={isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,teamDisplayName:"",featureTeambot:false};var Tt=function(e){Y()(t,e);function t(e){H()(this,t);var a=Q()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderHighlight=a.renderHighlight.bind(a);return a}V()(t,[{key:"renderHighlight",value:function e(){var t=this.props,a=t.sliHighlight,n=t.channelId,r=t.ts,i=t.isHovered;if(!Object(k["shouldShowHighlightsLabel"])(a))return null;return Z.a.createElement(kt["a"],{channelId:n,ts:r,isHovered:i,sliHighlight:a})}},{key:"renderPinnedBy",value:function e(t){return Z.a.createElement(Ot["a"],{id:t,className:"c-message__label_link"})}},{key:"renderStarButton",value:function e(t){var a=t.text;return Z.a.createElement(_e["c"],{onClick:Ct,className:"c-message__label_button"},a)}},{key:"render",value:function e(){var t=this.props,a=t.primaryType,n=t.isPinned,r=t.isStarred,i=t.isEphemeral,o=t.isCustomResponse,s=t.isSliHighlight,l=t.isSelfIm,c=t.isSlackbotIm,u=t.teamDisplayName,d=t.featureTeambot,p=t.currentUserId,f=t.pinnedByMemberId;var m=Object(yt["a"])({isPinned:n,isStarred:r,isEphemeral:i,isCustomResponse:o,isSliHighlight:s,teamDisplayName:u,featureTeambot:d,isSelfIm:l,isSlackbotIm:c,currentUserId:p,pinnedBy:f,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!m)return null;var h=jt[a];return Z.a.createElement("div",{className:"c-message__label"},Z.a.createElement("div",{className:"c-message__label__gutter"},h&&Z.a.createElement(Ne["b"],{type:h,className:"c-message__label__icon",size:"inherit",inline:true})),Z.a.createElement("div",{className:"c-message__label__text"},m))}}]);return t}(J["PureComponent"]);Tt.displayName="MessageLabel";Tt.defaultProps=It;var Nt=function e(t,a){var n=a.sourceTeamId;var r=Object(g["getTeamById"])(t,n);return{teamDisplayName:Object(Et["getTeamDisplayName"])(r),featureTeambot:Object(w["isFeatureEnabled"])(t,"feature_teambot_active")}};var At=Object(i["connect"])(Nt)(Tt);var Rt=a(1162);var Mt=new fe["b"]("message");var xt=200;var Pt=20;var Dt="theme_install_button";var Ft={quote:true,pre:true};var Lt={ts:c.a.string,messageNotFound:c.a.bool,channelId:c.a.string,alertType:c.a.string,subtype:c.a.string,text:c.a.string,noSpecials:c.a.bool,theme:c.a.oneOf(["dense","light"]),userId:c.a.string,botId:c.a.string,appId:c.a.string,username:c.a.string,hasAdHocSender:c.a.bool,reactionKey:c.a.string,reactionKeyForInitialFileComment:c.a.string,replies:c.a.arrayOf(c.a.shape({ts:c.a.string,user:c.a.string})),replyCount:c.a.number,replyUsers:c.a.arrayOf(c.a.string),replyUsersCount:c.a.number,latestReply:c.a.string,threadsEverythingPref:c.a.bool,expandInlineImgsPref:c.a.bool,expandNonMediaAttachmentsPref:c.a.bool,threadTs:c.a.string,attachments:c.a.arrayOf(c.a.shape({color:c.a.string,fallback:c.a.string})),fileId:c.a.string,fileIds:c.a.arrayOf(c.a.string),comment:c.a.shape({id:c.a.string,user:c.a.string,comment:c.a.string,is_starred:c.a.bool}),isUpload:c.a.bool,showUser:c.a.bool,isFileFollowup:c.a.bool,isEditing:c.a.bool,isHovered:c.a.bool,maybeStartEditingMessage:c.a.func,edited:c.a.shape({ts:c.a.string,user:c.a.string}),isLast:c.a.bool,rollup:re["a"].Rollup(),logMessage:c.a.func,setUnreadPoint:c.a.func,isStarred:c.a.bool,isStandalone:c.a.bool,isPinned:c.a.bool,currentUserId:c.a.string,pinnedByMemberId:c.a.string,sliHighlight:c.a.shape({loading:c.a.bool,isHighlight:c.a.bool,feedbackOptions:c.a.object,justification:c.a.string,feedback:c.a.string}),isEphemeral:c.a.bool,isDeleting:c.a.bool,icons:c.a.shape({emoji:c.a.string}),botProfile:c.a.object,slackbotFeels:c.a.string,fadeAwayHighlight:c.a.bool,doneHighlighting:c.a.func,isUnprocessed:c.a.bool,showResend:c.a.bool,showCancel:c.a.bool,sourceTeamId:c.a.string,resendMsg:c.a.func,removeMsg:c.a.func,unfurlLinkCache:c.a.instanceOf(Ae["a"]),shouldJumpToTimestamp:c.a.bool,isSelfIm:c.a.bool,isSlackbotIm:c.a.bool,teamDomain:c.a.string,featureTinyspeck:c.a.bool.isRequired,featureFileThreads:c.a.bool.isRequired,featureHideUnfurlUrls:c.a.bool.isRequired,featureBetterRtlInput:c.a.bool,useGlobalNav:c.a.bool,renderFileThread:c.a.bool,channelSessionId:c.a.string,previousMessageIsPinned:c.a.bool,previousMessageIsEphemeral:c.a.bool,previousMessageIsStarred:c.a.bool,previousMessageSubtype:c.a.string,previousMessageSliHighlight:c.a.object,previousMessagePinnedByMemberId:c.a.string,renderActions:c.a.bool,renderActionsOffscreen:c.a.bool,messageContainerType:c.a.string,ariaAssertive:c.a.bool};var Bt={ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:o["noop"],edited:null,isLast:false,rollup:null,logMessage:o["noop"],setUnreadPoint:o["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:o["noop"],isUnprocessed:false,showResend:false,showCancel:false,sourceTeamId:"",resendMsg:o["noop"],removeMsg:o["noop"],unfurlLinkCache:null,shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,featureBetterRtlInput:false,teamDomain:void 0,useGlobalNav:false,renderFileThread:false,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0};var Ut=Object(u["b"])();var qt=Object(oe["a"])();var Gt=function(e){Y()(t,e);function t(e){H()(this,t);var a=Q()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setRef=a.setRef.bind(a);a.onContainerClick=a.onContainerClick.bind(a);a.onTimestampClick=a.onTimestampClick.bind(a);a.startEditing=a.startEditing.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onMouseEnter=a.onMouseEnter.bind(a);a.onMouseLeave=a.onMouseLeave.bind(a);a.onMenuToggle=a.onMenuToggle.bind(a);a.startHighlightingTimer=a.startHighlightingTimer.bind(a);a.onDoneHighlighting=a.onDoneHighlighting.bind(a);a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(a);a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(a);a.resendMsg=a.resendMsg.bind(a);a.removeMsg=a.removeMsg.bind(a);a.formatInlineAttachmentMaybe=a.formatInlineAttachmentMaybe.bind(a);a.formatThemeInstallButton=a.formatThemeInstallButton.bind(a);a.customFormatHandler=a.customFormatHandler.bind(a);a.customContentHandler=a.customContentHandler.bind(a);a.clogMessageClick=a.clogMessageClick.bind(a);a.clogUserClick=a.clogUserClick.bind(a);a.shouldShowAttachment=a.shouldShowAttachment.bind(a);a.messageRef=null;a.deleteAnimation=null;a.hasDisplayedContent=true;a.inlineAttachmentsKey=0;a.setAttachmentsSorted();a.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null,hasKeyboardFocus:false};return a}V()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!a&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(ve["a"])(t)&&!he(t.target)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onMenuToggle",value:function e(t){var a=this;if(!t){setTimeout(function(){a.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,n=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:a}},n)}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(ge["p"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=a.attachments,r=a.text;var i=s.a.chain(n).filter(this.shouldShowAttachment).map(le["b"]).partition(function(e){return t.isInlineImage(e,r)}).value(),o=q()(i,2),l=o[0],c=o[1];this.attachmentsInline&&l&&!Object(pe["a"])(this.attachmentsInline,l,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=l;this.attachmentsBelow=c}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;var t=this.props.useGlobalNav?/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){8})(#[A-Fa-f0-9]{6})(\b)/g:/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(t,function(e){return e+" <"+Dt+"|"+e+">"})}},{key:"getUrlsToHide",value:function e(){var t=this.props,a=t.attachments,n=t.featureHideUnfurlUrls;if(!n)return[];return s.a.chain(a).filter(this.shouldShowAttachment).map(le["b"]).filter("isMsgUnfurl").map("fromUrl").map(o["unescape"]).compact().value()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var a=t?t.message:"";var n=t?t.stack:"";var r=this.props||{};var i=r.channel&&r.channelId;Ut.error("Message componentDidCatch: "+r.subtype+" "+r.ts+" in "+i+", "+a);n&&Ut.error(n)}},{key:"clogMessageClick",value:function e(t){var a=this.props,n=a.ts,i=a.channelId,o=a.userId,s=a.botId,l=a.appId,c=a.channelSessionId;var u=r()({},t,{message_timestamp:n,channel_id:i,channel_type:i?i.charAt(0):"",channel_session_id:c,member_id:o,app_id:l,bot_id:s,request_id:null});qt.track("MSG_LINK_CLICKED",u);t&&"msg_photo_expand"===t.subtype&&qt.track("MSG_PHOTO_EXPAND",u)}},{key:"clogUserClick",value:function e(){var t=this.props,a=t.ts,n=t.channelId,r=t.userId,i=t.botId,o=t.appId;qt.track("USERNAME_CLICK",{message_timestamp:a,channel_id:n,channel_type:n?n.charAt(0):null,member_id:r,app_id:o,bot_id:i})}},{key:"isInlineImage",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return a&&-1!==s.a.unescape(a).indexOf(t.fromUrl)&&Object(je["k"])(t)}},{key:"shouldShowAttachment",value:function e(t){var a=this.props,n=a.text,r=a.subtype,i=a.isStandalone,o=a.expandInlineImgsPref,s=a.expandNonMediaAttachmentsPref;return Object(te["d"])({attachment:t,messageText:n,messageSubtype:r,messageIsStandalone:i,expandInlineImgsPref:o,expandNonMediaAttachmentsPref:s})}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,a=t.isStandalone;return e&&!a}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(se["a"])({fromValue:t,toValue:0,duration:xt,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,a=t.maybeStartEditingMessage,n=t.channelId,r=t.ts;a({channelId:n,ts:r})}},{key:"formatInlineAttachmentMaybe",value:function e(t){var a=t.item,n=t.getDefaultOutput;var i=this.props,l=i.ts,c=i.channelId;var u=a.url;var d=Object(o["find"])(this.attachmentsInline,{fromUrl:s.a.unescape(u)});if(!d)return n();return Z.a.createElement(J["Fragment"],null,n(),Z.a.createElement(ke["a"],r()({},d,{messageTs:l,activeChannelId:c,clogLinkClick:this.clogMessageClick,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var a=t.item;var n=a.contents[0].text.replace(/\s/g,"").split(",");return Z.a.createElement("div",{className:"c-message__theme_button_container"},Z.a.createElement(_t["a"],{colors:n,clogLinkClick:this.clogMessageClick}))}},{key:"customContentHandler",value:function e(t){var a=this.props.edited;var n=t;var r=this.getUrlsToHide();r.length&&(n=Object(Re["a"])({content:t,urls:r}));if(a){var i=s.a.last(n)||{};n.push({type:"custom_edited_label",omitWhitespace:!!Ft[i.type]})}this.hasDisplayedContent=!!n.length;return n}},{key:"customFormatHandler",value:function e(t){var a=t.item,n=t.getDefaultOutput;var r=void 0;"link"===a.type?r=a.url===Dt?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===a.type&&(r=this.renderEditedLabel({omitWhitespace:a.omitWhitespace}));return r||n()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(ce["b"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(ce["c"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"isTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function e(){var t=this.props,a=t.showResend,n=t.showCancel;return a||n}},{key:"resendMsg",value:function e(){var t=this.props,a=t.ts,n=t.channelId;this.props.resendMsg(n,a)}},{key:"removeMsg",value:function e(){var t=this.props,a=t.ts,n=t.channelId,r=t.messageContainerType,i=t.subtype;var o="thread_broadcast"===i&&r===ie["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:n,ts:a,broadcastDelete:o})}},{key:"shouldShowMessageLabel",value:function e(t){var a=t.labelTypes;var n=this.props,r=n.showUser,i=n.isFileFollowup,o=n.pinnedByMemberId,l=n.previousMessageIsStarred,c=n.previousMessageIsPinned,u=n.previousMessageIsEphemeral,d=n.previousMessageSubtype,p=n.previousMessageSliHighlight,f=n.previousMessagePinnedByMemberId;if(s.a.isEmpty(a))return false;if(a.sliHighlight)return true;if(!r||i){var m=Object(ne["a"])({isStarred:l,isPinned:c,isEphemeral:u,subtype:d,sliHighlight:p});if(Object(pe["a"])(a,m))return a.isPinned&&m.isPinned&&f!==o}return true}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.isHiddenFromCopy,n=void 0!==a&&a;var i=this.props,o=i.teamDomain,s=i.channelId,l=i.ts,c=i.threadTs,u=i.isStandalone;if(!l||!s)return null;var d=void 0;var p=void 0;if(!u){d=Object(C["constructAbsoluteMsgPermalink"])({teamDomain:o,channelId:s,ts:l,threadTs:c});p=this.onTimestampClick}var f={};n&&(f["data-stringify-text"]="");return Z.a.createElement(Ke["b"],r()({timestamp:l,relative:false,full:false,link:d,onClick:p},f))}},{key:"renderAvatar",value:function e(){var t=36;if(this.isTombstone())return Z.a.createElement("div",{className:"c-message__tombstone_icon"},Z.a.createElement(Ne["a"],{type:"trash",align:"top"}));var a=this.props,n=a.userId,r=a.hasAdHocSender,i=a.botId,o=a.botProfile,s=a.isStandalone,l=a.icons,c=a.slackbotFeels;return Z.a.createElement(Oe["b"],{className:"c-message__avatar",userId:n,isAdHocMember:r,botId:i,botProfile:o,slackbotFeels:c,size:t,icons:l,isInteractive:!s,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme){if(this.props.isFileFollowup)return Z.a.createElement("div",{className:"c-message__gutter c-message__gutter--empty"});if(this.props.isEditing||this.props.showUser)return Z.a.createElement("div",{className:"c-message__gutter"},this.renderAvatar())}return Z.a.createElement("div",{className:"c-message__gutter"},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function e(){var t=this.props,a=t.showUser,n=t.theme,r=t.isStandalone,i=t.reactionKey,o=t.reactionKeyForInitialFileComment;return Z.a.createElement("div",{className:"c-message__content","data-qa":"message_content"},a&&this.renderContentHeader(),"light"===n&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFileThreads(),this.renderAttachments(),!r&&!this.isTombstone()&&this.renderReactions(i),this.renderInitialFileComment(),!r&&!this.isTombstone()&&this.renderReactions(o),!r&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,n=t.botId,r=t.username,i=t.theme,o=t.isStandalone,s=t.botProfile;if(this.isTombstone())return null;return Z.a.createElement("div",{className:"c-message__content_header"},Z.a.createElement(Me["a"],{userId:a,botId:n,username:r,isInteractive:!o,botProfile:s,clogLinkClick:this.clogUserClick}),"light"===i&&this.renderTimestamp(),"dense"===i&&Z.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),Z.a.createElement("br",null)),"dense"===i&&" ","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,a=t.ts,n=t.threadTs,r=t.channelId,i=t.subtype,o=t.isStandalone;if(!a||!r||o||"thread_broadcast"!==i)return null;return Z.a.createElement(ct,{ts:a,threadTs:n,channelId:r})}},{key:"renderThreadBroadcastFooter",value:function e(){var t=this.props,a=t.ts,n=t.threadTs,r=t.channelId,i=t.subtype,o=t.isStandalone;if(!a||!r||!n||o||"thread_broadcast"!==i)return null;return Z.a.createElement(vt,{ts:a,threadTs:n,channelId:r})}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.omitWhitespace,n=void 0!==a&&a;var r=this.props.edited;var i=r.ts;var o=Z.a.createElement("span",{key:"edited",className:"c-message__edited_label"},!n&&"\xa0",Mt.t("(edited)"));if(i){var s=Mt.t("{date} at {time}",{date:Object(de["a"])(i,{shortenMonth:true}),time:Object(ue["a"])(i)});return Z.a.createElement(Ce["d"],{key:"edited",delay:Ce["a"],tip:s},o)}return o}},{key:"renderReplyBar",value:function e(){var t=this.props,a=t.replies,n=t.replyCount,r=t.replyUsers,i=t.replyUsersCount,o=t.latestReply,s=t.channelId,l=t.threadTs;if(!s||!n)return null;return Z.a.createElement(ze,{channelId:s,threadTs:l,replies:a,replyCount:n,replyUsers:r,replyUsersCount:i,latestReply:o})}},{key:"renderReactions",value:function e(t){if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(!t)return null;return Z.a.createElement(we["a"],{reactionKey:t})}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,n=a.ts,i=a.channelId;var s=this.attachmentsBelow;if(!s||!s.length)return null;var l=Object(o["map"])(s,function(e,a){var o=e.id||a+1;var s=e.botId||t.props.botId;return Z.a.createElement(ke["a"],r()({},e,{service:s,messageTs:n,activeChannelId:i,key:o,clogLinkClick:t.clogMessageClick,isOnlyMessageContent:!t.hasDisplayedContent}))});var c=l.splice(Pt);return Z.a.createElement("div",{className:"c-message__attachments"},l,this.renderAttachmentsOverLimitMaybe(c))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t){if(!t.length)return null;var a={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(ee["a"])("attachmentsOverLimit",this.props.ts,{limit:Pt})};return Z.a.createElement("div",null,Z.a.createElement(Se["a"],a,t),Z.a.createElement(Ie["a"],r()({},a,{render:function e(a,n){return Z.a.createElement(Te["a"],{isExpanded:a.isExpanded,onClick:n,attachmentsOverLimitCount:t.length})}})))}},{key:"renderFile",value:function e(){var t=this.props,a=t.fileId,n=t.comment,r=t.subtype,i=t.renderFileThread;if(!a)return null;var o=null;var s=null;n&&"file_comment"===r&&(s=this.renderFileComment());"file_comment"===r||i||(o=this.renderInlineFile());return[o,s]}},{key:"renderInlineFile",value:function e(){var t=this.props,a=t.ts,n=t.fileId,r=t.channelId,i=t.subtype,o=t.unfurlLinkCache,s=t.isUpload,l=t.userId;if(!n||!r)return null;return Z.a.createElement(Qe["a"],{key:"inline-file",fileId:n,ts:a,subtype:i,channelId:r,unfurlLinkCache:o,isUpload:s,userId:l,clogLinkClick:this.clogMessageClick})}},{key:"renderFileComment",value:function e(){var t=this.props,a=t.fileId,n=t.comment,r=t.isFileFollowup,i=t.theme,o=t.subtype,s=t.userId;if(!a||!n)return null;var l="file_comment"===o&&(!r||"dense"===i)&&Z.a.createElement(Ye["a"],{fileId:a,comment:n,followup:r,key:n.id+"-meta"});return[l||null,Z.a.createElement(Ee["a"],{text:n.comment,memberId:s,className:"c-message__comment c-message__body",key:n.id+"-body",clogLinkClick:this.clogMessageClick})]}},{key:"renderInitialFileComment",value:function e(){var t=this.props,a=t.comment,n=t.subtype;if(!a||"file_share"!==n)return null;return this.renderFileComment()}},{key:"renderFileThreads",value:function e(){var t=this;if(!this.props.renderFileThread)return null;var a=this.props,n=a.ts,r=a.fileIds,i=a.channelId,o=a.subtype,s=a.unfurlLinkCache,l=a.isUpload,c=a.userId,u=a.botId,d=a.text;if(!r||!r.length||!i)return null;if("file_comment"===o)return null;var p=r.map(function(e){return Z.a.createElement(Qe["a"],{key:e,fileId:e,ts:n,subtype:o,channelId:i,unfurlLinkCache:s,isUpload:l,userId:c,botId:u,clogLinkClick:t.clogMessageClick})});var f=$()("c-message__files","c-message__files--file_threads_meta_data",{"c-message__files--empty_body":!d||"file_mention"===o});return Z.a.createElement("div",{className:f},p)}},{key:"renderRollup",value:function e(){var t=this.props,a=t.rollup,n=t.channelId,r=t.userId;if(!a||!n)return null;return Z.a.createElement(Je["a"],{rollup:a,channelId:n,user:r})}},{key:"renderAutomatedSubtype",value:function e(){return Z.a.createElement(Ze["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function e(){var t=this.props,a=t.ts,n=t.fileId,r=t.subtype,i=t.rollup,o=t.userId,s=t.edited,l=t.noSpecials,c=t.ariaAssertive,u=t.attachments,d=t.featureBetterRtlInput;if(this.isTombstone())return Z.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},Mt.t("This message was deleted."));if(!a)return Z.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(n||"file_comment"===r||"file_mention"===r)return null;if(i)return this.renderRollup();if(Object(I["a"])(r))return this.renderAutomatedSubtype();var p=$()("c-message__body",{"c-message__body--me":"me_message"===r,"c-message__body--dir":d});return Z.a.createElement(Ee["a"],{className:p,text:this.getTextWithThemes(),memberId:o,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogMessageClick,noSpecials:l,ariaAssertive:c,ignoredPropEdited:s,ignoredPropAttachments:u,featureBetterRtlInput:d})}},{key:"renderActions",value:function e(){var t=this;var a=this.props,n=a.ts,r=a.reactionKey,i=a.fileId,o=a.fileIds,s=a.comment,l=a.replies,c=a.replyCount,u=a.rollup,d=a.threadsEverythingPref,p=a.threadTs,f=a.channelId,m=a.subtype,h=a.isStarred,v=a.isPinned,g=a.isEphemeral,b=a.isDeleting,_=a.isStandalone,y=a.setUnreadPoint,k=a.theme,e=a.renderActions,O=a.renderActionsOffscreen,w=a.messageContainerType;var E=this.state,C=E.actionsMenuOpen,j=E.isHovered,S=E.hasKeyboardFocus;if(!n||!f)return null;var I=O&&!S&&!j&&!e;if(!C&&!j&&!S&&!I&&!e)return null;if(b||_)return null;return Z.a.createElement(gt["a"],{reactionKey:r,fileId:i,fileIds:o,comment:s&&s.id,replies:l,replyCount:c,rollup:u,ts:n,threadsEverythingPref:d,threadTs:p,channelId:f,subtype:m,isStarred:h,isPinned:v,isEphemeral:g,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},theme:k,renderOffscreen:I,messageContainerType:w})}},{key:"renderEdit",value:function e(){var t=this.props,a=t.channelId,n=t.ts,r=t.messageContainerType;if(!n||!a)return null;return Z.a.createElement("div",{className:"c-message__content"},Z.a.createElement(bt["a"],{channelId:a,ts:n,messageContainerType:r}))}},{key:"renderResendControls",value:function e(){var t=this.props,a=t.showResend,n=t.showCancel;var r=null;a&&(r=Z.a.createElement(_e["c"],{className:"c-message__resend",onClick:this.resendMsg},Mt.t("Try again")));var i=null;n&&(i=Z.a.createElement(_e["c"],{className:"c-message__cancel",onClick:this.removeMsg},Mt.t("Cancel")));var o=null;a&&n&&(o=" | ");return Z.a.createElement("div",{className:"c-message__resend_controls"},Z.a.createElement("div",{className:"c-message__resend_column"}),Mt.t("Slack couldn\u2019t send this message"),r,o,i)}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,a=t.ts,n=t.channelId;var r={background:"#FFCFCF",padding:"24px"};return Z.a.createElement("div",{style:r},Z.a.createElement("strong",null,"Message ",a," in ",n," failed to render."," "),"Please go to #triage-core and"," ",Z.a.createElement("strong",null,"read up to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.")}},{key:"renderMessageLabel",value:function e(t){var a=t.labelTypes,n=t.primaryLabelType;var i=this.props,o=i.sliHighlight,s=i.isSlackbotIm,l=i.isSelfIm,c=i.channelId,u=i.ts,d=i.currentUserId,p=i.pinnedByMemberId,f=i.sourceTeamId;var m=this.state.isHovered;if(!this.shouldShowMessageLabel({labelTypes:a}))return null;return Z.a.createElement(At,r()({},a,{primaryType:n,channelId:c,ts:u,isHovered:m,isSlackbotIm:s,isSelfIm:l,sliHighlight:o,currentUserId:d,pinnedByMemberId:p,sourceTeamId:f}))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var a=this.props,n=a.theme,r=a.isEditing,i=a.showUser,o=a.alertType,s=a.fadeAwayHighlight,l=a.isLast,c=a.isStandalone,u=a.isUnprocessed,d=a.subtype,p=a.rollup,f=a.sliHighlight,m=a.isPinned,h=a.isEphemeral,v=a.isStarred;var g=this.state,b=g.isHovered,_=g.actionsMenuOpen,y=g.height;var O=Object(ne["a"])({isPinned:m,isEphemeral:h,isStarred:v,subtype:d,sliHighlight:f});var w=Object(ae["a"])(O);var E=$()("c-message",(t={},B()(t,"c-message--"+n,n),B()(t,"c-message--hover",b||_),B()(t,"c-message--focus",this.state.hasKeyboardFocus),B()(t,"c-message--adjacent",!r&&!i&&!c),B()(t,"c-message--thread_broadcast","thread_broadcast"===d),B()(t,"c-message--highlight_yellow_bg","shared_channel_join"===o),B()(t,"c-message--highlight",!c&&r),B()(t,"c-message--fade_highlight",s&&!w),B()(t,"c-message--last",l),B()(t,"c-message--rollup",p),B()(t,"c-message--standalone",c),B()(t,"c-message--unprocessed",u),B()(t,"c-message--resend",this.shouldShowResendControls()),B()(t,"c-message--deleting",this.isDeleting()),B()(t,"c-message--editing",r),B()(t,"c-message--sli_highlight_negative",Object(k["isNegativeHighlightFeedback"])(f)),B()(t,"c-message--"+w,w),t));var C={};null!==y&&(C={height:y});return Z.a.createElement(ye["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},Z.a.createElement("div",{ref:this.setRef,className:E,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,style:C,role:"document","data-qa":"message_container"},this.renderMessageLabel({labelTypes:O,primaryLabelType:w}),this.renderGutter(),!c&&r&&this.renderEdit(),(c||!r)&&this.renderContent(),!c&&!r&&this.renderActions()))}}]);return t}(J["PureComponent"]);Gt.displayName="Message";Gt.defaultProps=Bt;var Ht=Object(be["a"])(Gt);function Wt(e,t,a){if(!a)return true;if(Object(I["a"])(t.subtype)||Object(I["a"])(a.subtype))return true;if(Object(T["b"])(t.subtype)||Object(T["b"])(a.subtype))return true;if("thread_broadcast"===t.subtype)return true;if(a.reply_count||t.reply_count)return true;var n=Object(A["a"])(t.ts);var r=Object(A["a"])(a.ts);var i=Object(R["a"])(n,r);var o=Object(M["a"])(n,r);if(i>5||!o)return true;var s=Object(C["getMsgSenderEntity"])(e,t);var l=Object(C["getMsgSenderEntity"])(e,a);if(s.userId&&s.userId===l.userId)return false;if(s.botId&&!s.userId&&s.botId===l.botId){if(s.username&&s.username!==l.username)return true;return false}if(s.username&&s.username===l.username)return false;return true}function Vt(e,t){var a=t.message;var n=Object(C["shouldRenderFileThread"])(a,{featureFileThreads:Object(w["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(w["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var r=n?null:a.file;var i=n?a.files:null;var s=n?Object(_["getFileById"])(e,Object(o["first"])(i)):Object(_["getFileById"])(e,r);return{fileId:r,fileIds:i,file:s}}var zt=function e(t,a){var n=a.ts,i=a.channelId,o=a.previousMessageTs;var s=Object(p["getMessageByTimestamp"])(t,i,n);var l=Object(y["getUserMessagesTheme"])(t);var c=Object(y["getUserPref"])(t,"threads_everything");var u=Object(y["getUserPref"])(t,"expand_inline_imgs");var d=Object(y["getUserPref"])(t,"expand_non_media_attachments");var f=Object(b["getChannelById"])(t,i);var m=Object(w["isFeatureEnabled"])(t,"feature_file_threads");var I=Object(w["isFeatureEnabled"])(t,"feature_file_threads_dark_launch");var T=Object(w["isFeatureEnabled"])(t,"feature_hide_unfurl_urls");var A=Object(w["isFeatureEnabled"])(t,"feature_better_rtl_input");if(!s)return{channelId:i,featureTinyspeck:Object(w["isFeatureEnabled"])(t,"feature_tinyspeck"),featureFileThreads:m,featureHideUnfurlUrls:T,messageNotFound:true};var R=Object(C["shouldRenderFileThread"])(s,{featureFileThreads:m,featureFileThreadsDarkLaunch:I});var M=Vt(t,{message:s}),x=M.file,L=M.fileId,B=M.fileIds;var U=Object(p["getMessageByTimestamp"])(t,i,o);var q=Wt(t,s,U);var G=Object(P["a"])(s,U);var H=Object(S["b"])(s,x);var W=Object(S["c"])(s,x);var V=Object(C["getMsgSenderEntity"])(t,s);var z=V.botId&&Object(h["getBotByMsg"])(t,s);var Q=z?z.app_id:null;var K=s.slackbot_feels||null;var Y=s.comment&&x&&Object(_["getFileCommentById"])(t,x.id,s.comment.id)||s.comment;x&&"file_share"===s.subtype&&s.upload&&(Y=x.initial_comment);var J=Object(k["getMessageMetaData"])(t,{channelId:i,ts:n}),Z=J.isDeleting,X=J.sliHighlight;var $=Object(O["getMessageEditData"])(t,{channelId:i,ts:n}),ee=$.isEditing;var te=void 0;te=R?Object(C["getMessagePinnedInfo"])(s):x?Object(j["getFilePinnedInfoByChannelId"])({file:x,channelId:i}):Object(C["getMessagePinnedInfo"])(s);var ae=te?te.pinnedBy:null;var ne=void 0;if(U){var re=void 0;if(R)re=Object(C["getMessagePinnedInfo"])(U);else{var ie=Vt(t,{message:U});re=ie.file?Object(j["getFilePinnedInfoByChannelId"])({file:ie.file,channelId:i}):Object(C["getMessagePinnedInfo"])(U)}var oe=re?re.pinnedBy:null;ne={previousMessageIsStarred:Object(C["isStarred"])(U),previousMessageIsPinned:Object(F["c"])(U,f),previousMessageIsEphemeral:Object(C["isEphemeral"])(U),previousMessageSubtype:U.subtype,previousMessageSliHighlight:U.sliHighlight,previousMessagePinnedByMemberId:oe}}var se=s.thread_ts;var le=void 0;if(se){le={replyCount:s.reply_count};if(s.replies)le.replies=s.replies;else{le.replyUsers=s.reply_users;le.replyUsersCount=s.reply_users_count;le.latestReply=s.latest_reply}}var ce=Object(w["getCurrentUserId"])(t);var ue=Object(g["getCurrentTeam"])(t);var de=ue&&ue.domain;return r()({channelId:i,alertType:s.alert_type,subtype:s.subtype,text:s.text,noSpecials:false===s.mrkdwn,theme:l},V,{appId:Q,hasAdHocSender:Object(N["a"])(s)},le,{threadTs:se,threadsEverythingPref:c,expandInlineImgsPref:u,expandNonMediaAttachmentsPref:d,attachments:s.attachments,fileId:L,fileIds:B,comment:Y,isUpload:s.upload,reactionKey:H,reactionKeyForInitialFileComment:W,showUser:q,isFileFollowup:G,edited:s.edited,isStarred:Object(C["isStarred"])(s,x,"file_comment"===s.subtype&&Y,m),isPinned:Object(F["c"])(s,f),currentUserId:ce,pinnedByMemberId:ae,sliHighlight:X,botProfile:s.bot_profile,slackbotFeels:K,icons:s.icons,isEditing:ee,isUnprocessed:Object(C["isTempMsg"])(s)&&!Object(C["isEphemeral"])(s),isEphemeral:Object(C["isEphemeral"])(s),isDeleting:Z,showResend:s.showResend,showCancel:s.showCancel,isSlackbotIm:Object(E["isSlackbot"])(f),sourceTeamId:Object(C["getSourceTeamId"])(s)||Object(v["getTeamId"])(t),isSelfIm:Object(E["isYou"])(ce,f),teamDomain:de},ne,{featureTinyspeck:Object(w["isFeatureEnabled"])(t,"feature_tinyspeck"),featureFileThreads:m,featureHideUnfurlUrls:T,featureBetterRtlInput:A,useGlobalNav:Object(D["b"])(t),renderFileThread:R,ariaAssertive:Object(C["isDisconnectedFeedback"])(s)})};var Qt=Object(d["e"])("log message to console (for debugging)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.ts;var i=t();var o=Object(p["getMessageByTimestamp"])(i,n,r);var s=Object(b["getChannelById"])(i,n);if(o){Object(u["a"])({getState:t}).warn(o);e(Object(x["c"])({message:o,modelObject:s}))}});Qt.propTypes={channelId:c.a.string.isRequired,ts:c.a.string.isRequired};var Kt={logMessage:Qt,maybeStartEditingMessage:O["maybeStartEditingMessage"],removeMsg:m["a"],resendMsg:f["a"]};var Yt=t["a"]=Object(i["connect"])(zt,Kt)(Ht)},,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(63);var g=a(21);var b=a(11);var _=a(10);var y=a(491);var k=a(144);var O=a(665);var w=a(87);var E=a(2);var C=a(787);var j=a(13);var S=Object(j["c"])("TS.ui.comments.startDelete");var I=a(18);var T=a(54);var N=a(121);var A=new _["b"]("comments");var R={isStarred:m.a.bool,updateStar:m.a.func,commentId:m.a.string,fileId:m.a.string,featureReactThreads:m.a.bool};var M={isStarred:false,updateStar:E["noop"],commentId:void 0,fileId:void 0,featureReactThreads:false};var x=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);a.toggleStar=a.toggleStar.bind(a);a.deleteComment=a.deleteComment.bind(a);return a}o()(t,[{key:"toggleStar",value:function e(){var t=this.props,a=t.commentId,n=t.fileId,r=t.isStarred;if(!a||!n)return;this.props.updateStar(!r,{file_comment:a,file_comment_file:n})}},{key:"deleteComment",value:function e(){var t=this.props,a=t.commentId,n=t.fileId;if(!a||!n)return;S(n,a)}},{key:"renderMenu",value:function e(t){if(!this.props.featureReactThreads)return null;var a=this.props.isStarred;return p.a.createElement(T["f"],t,p.a.createElement(T["b"],{label:a?A.t("Unstar this file comment"):A.t("Star this file comment"),onSelected:this.toggleStar}),p.a.createElement(T["d"],null),p.a.createElement(T["b"],{label:A.t("Delete comment"),danger:true,onSelected:this.deleteComment}))}},{key:"render",value:function e(){if(!this.props.featureReactThreads)return null;return p.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"left-bottom"},p.a.createElement(N["a"],{className:"p-comment__actions",ariaLabel:A.t("Show more actions")},p.a.createElement(I["b"],{type:"cog",size:"inherit"})))}}]);return t}(d["PureComponent"]);x.displayName="CommentActions";x.defaultProps=M;var P=Object(h["connect"])(function(e){return{featureReactThreads:Object(b["isFeatureEnabled"])(e,"feature_react_threads")}},{updateStar:C["a"]})(x);var D=a(2194);var F=new _["b"]("comments");var L={featureFileThreads:m.a.bool,featureReactThreads:m.a.bool,time24:m.a.bool,comment:m.a.shape({id:m.a.string,user:m.a.string,timestamp:m.a.number,comment:m.a.string}).isRequired,fileId:m.a.string};var B={featureFileThreads:true,featureReactThreads:false,time24:false,fileId:void 0};var U=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,n=t.time24,r=t.featureFileThreads,i=t.featureReactThreads,o=t.fileId;if(!r&&!Object(v["a"])())return null;var s=a.user,l=a.timestamp,c=a.comment,u=a.is_starred,d=a.id;return p.a.createElement("div",{className:"p-comment"},p.a.createElement("div",{className:"p-comment__header"},s?p.a.createElement(O["a"],{userId:s}):null,p.a.createElement("span",{className:"p-comment__timestamp"},F.t("{date} at {time}",{date:Object(y["a"])(l,{shortenMonth:true}),time:Object(k["a"])(l,{do24hrTime:n})})),i&&p.a.createElement(P,{isStarred:u,commentId:d,fileId:o})),p.a.createElement("div",{className:"p-comment__body"},p.a.createElement(w["a"],{text:c,memberId:s})))}}]);return t}(d["PureComponent"]);U.displayName="Comment";U.defaultProps=B;function q(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads"),featureReactThreads:Object(b["isFeatureEnabled"])(e,"feature_react_threads"),time24:Object(g["getUserPref"])(e,"time24")}}var G=t["a"]=Object(h["connect"])(q)(U)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(3);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(2);var b=a(408);var _={stepIndex:m.a.number,steps:m.a.arrayOf(m.a.shape(p()({},b["a"].propTypes))).isRequired,isSteppingBack:m.a.bool,breadcrumbTitles:m.a.arrayOf(m.a.string),modalClasses:m.a.string,onCancel:m.a.func.isRequired,position:m.a.string,isOpen:m.a.bool,showOpenTransition:m.a.bool,showCloseTransition:m.a.bool};var y={stepIndex:0,isSteppingBack:false,breadcrumbTitles:[],modalClasses:"",position:null,isOpen:true,showOpenTransition:true,showCloseTransition:true};var k=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickBack=a.onClickBack.bind(a);a.onClickGo=a.onClickGo.bind(a);a.state={stepIndex:a.props.stepIndex,isSteppingBack:a.props.isSteppingBack};return a}o()(t,[{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateStepState(t.stepIndex)}},{key:"onClickGo",value:function e(){var t=this.state.stepIndex;var a=this.getStep(t);if(a.onGo){a.onGo();return}this.goToNextStep()}},{key:"onClickBack",value:function e(){var t=this.state.stepIndex;var a=this.getStep(t);if(a.onBack){a.onBack();return}this.goToPreviousStep()}},{key:"setStepDirection",value:function e(t){this.setState(function(){return{isSteppingBack:t}})}},{key:"getIndex",value:function e(){return this.state.stepIndex}},{key:"setIndex",value:function e(t){this.setState(function(){return{stepIndex:t}})}},{key:"getStepNumber",value:function e(){return this.getIndex()+1}},{key:"setStepNumber",value:function e(t){this.setIndex(t-1)}},{key:"getCurrentStep",value:function e(){return this.getStep(this.state.stepIndex)}},{key:"getStep",value:function e(t){var a=this.props.steps;return a[t]}},{key:"getStepContent",value:function e(){var t=this.getCurrentStep();if(Object(g["isFunction"])(t.children))return t.children();return t.children}},{key:"maybeUpdateStepState",value:function e(t){var a=t!==this.props.stepIndex;if(a){this.setIndex(t);var n=t<this.props.stepIndex;this.setStepDirection(n)}}},{key:"isModalSteppingBack",value:function e(){return this.state.isSteppingBack}},{key:"goToNextStep",value:function e(){var t=this.props.steps;this.setState(function(e){var a=e.stepIndex+1;if(a<t.length)return{stepIndex:a,isSteppingBack:false};return e})}},{key:"goToPreviousStep",value:function e(){this.setState(function(e){var t=e.stepIndex-1;if(e.stepIndex>=0)return{stepIndex:t,isSteppingBack:true};return e})}},{key:"render",value:function e(){var t=this.getCurrentStep();var a=this.getIndex();var n=this.isModalSteppingBack();var r=this.props,i=r.breadcrumbTitles,o=r.isOpen,s=r.showOpenTransition,l=r.showCloseTransition,c=r.position;var u=p()({},t,{isSteppingBack:n,currentStepIndex:a,breadcrumbTitles:i,isOpen:o,showCloseTransition:l,showOpenTransition:s,position:c,onGo:this.onClickGo,onBack:this.onClickBack,modalClasses:this.props.modalClasses,onCancel:this.props.onCancel});return v.a.createElement(b["a"],u,this.getStepContent())}}]);return t}(h["PureComponent"]);k.displayName="SteppedFullscreenModal";k.defaultProps=y;var O=k;var w=t["a"]=O},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";t.__esModule=true;t.INIT_ACTION=t.ActionCreators=t.ActionTypes=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.liftAction=y;t.liftReducerWith=k;t.unliftState=O;t.unliftStore=w;t.default=E;var i=a(1767);var o=f(i);var s=a(1798);var l=f(s);var c=a(1802);var u=f(c);var d=a(705);var p=f(d);function f(e){return e&&e.__esModule?e:{default:e}}var m=t.ActionTypes={PERFORM_ACTION:"PERFORM_ACTION",RESET:"RESET",ROLLBACK:"ROLLBACK",COMMIT:"COMMIT",SWEEP:"SWEEP",TOGGLE_ACTION:"TOGGLE_ACTION",SET_ACTIONS_ACTIVE:"SET_ACTIONS_ACTIVE",JUMP_TO_STATE:"JUMP_TO_STATE",JUMP_TO_ACTION:"JUMP_TO_ACTION",REORDER_ACTION:"REORDER_ACTION",IMPORT_STATE:"IMPORT_STATE",LOCK_CHANGES:"LOCK_CHANGES",PAUSE_RECORDING:"PAUSE_RECORDING"};var h=t.ActionCreators={performAction:function e(t){if(!(0,u.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');return{type:m.PERFORM_ACTION,action:t,timestamp:Date.now()}},reset:function e(){return{type:m.RESET,timestamp:Date.now()}},rollback:function e(){return{type:m.ROLLBACK,timestamp:Date.now()}},commit:function e(){return{type:m.COMMIT,timestamp:Date.now()}},sweep:function e(){return{type:m.SWEEP}},toggleAction:function e(t){return{type:m.TOGGLE_ACTION,id:t}},setActionsActive:function e(t,a){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];return{type:m.SET_ACTIONS_ACTIVE,start:t,end:a,active:n}},reorderAction:function e(t,a){return{type:m.REORDER_ACTION,actionId:t,beforeActionId:a}},jumpToState:function e(t){return{type:m.JUMP_TO_STATE,index:t}},jumpToAction:function e(t){return{type:m.JUMP_TO_ACTION,actionId:t}},importState:function e(t,a){return{type:m.IMPORT_STATE,nextLiftedState:t,noRecompute:a}},lockChanges:function e(t){return{type:m.LOCK_CHANGES,status:t}},pauseRecording:function e(t){return{type:m.PAUSE_RECORDING,status:t}}};var v=t.INIT_ACTION={type:"@@INIT"};function g(e,t,a){var n=a;var i=void 0;try{n=e(a,t)}catch(e){i=e.toString();"object"===("undefined"===typeof window?"undefined":r(window))&&("undefined"!==typeof window.chrome||"undefined"!==typeof window.process&&"renderer"===window.process.type)?setTimeout(function(){throw e}):console.error(e)}return{state:n,error:i}}function b(e,t,a,n){if(!n)return{state:e(a,t)};return g(e,t,a)}function _(e,t,a,n,r,i,o,s){if(!e||-1===t||t>=e.length&&e.length===i.length)return e;var l=e.slice(0,t);for(var c=t;c<i.length;c++){var u=i[c];var d=r[u].action;var p=l[c-1];var f=p?p.state:n;var m=o.indexOf(u)>-1;var h=void 0;h=m?p:s&&p&&p.error?{state:f,error:"Interrupted by an error up the chain"}:b(a,d,f,s);l.push(h)}return l}function y(e){return h.performAction(e)}function k(e,t,a,r){var i={monitorState:a(void 0,{}),nextActionId:1,actionsById:{0:y(v)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:true===r.shouldStartLocked,isPaused:false===r.shouldRecordChanges};return function(s,c){var u=s||i;var d=u.monitorState;var p=u.actionsById;var f=u.nextActionId;var h=u.stagedActionIds;var g=u.skippedActionIds;var k=u.committedState;var O=u.currentStateIndex;var w=u.computedStates;var E=u.isLocked;var C=u.isPaused;s||(p=n({},p));function j(e){var t=e;var a=h.slice(1,t+1);for(var n=0;n<a.length;n++){if(w[n+1].error){t=n;a=h.slice(1,t+1);break}delete p[a[n]]}g=g.filter(function(e){return-1===a.indexOf(e)});h=[0].concat(h.slice(t+1));k=w[t].state;w=w.slice(t);O=O>t?O-t:0}function S(t){var i;var o=void 0;if(t){o=w[O];d=a(d,c)}else o=b(e,c.action,w[O].state,false);if(!r.pauseActionType||1===f)return{monitorState:d,actionsById:{0:y(v)},nextActionId:1,stagedActionIds:[0],skippedActionIds:[],committedState:o.state,currentStateIndex:0,computedStates:[o],isLocked:E,isPaused:true};if(t){O===h.length-1&&O++;h=[].concat(h,[f]);f++}return{monitorState:d,actionsById:n({},p,(i={},i[f-1]=y({type:r.pauseActionType}),i)),nextActionId:f,stagedActionIds:h,skippedActionIds:g,committedState:k,currentStateIndex:O,computedStates:[].concat(w.slice(0,h.length-1),[o]),isLocked:E,isPaused:true}}var I=0;switch(c.type){case m.PERFORM_ACTION:if(E)return s||i;if(C)return S();r.maxAge&&h.length===r.maxAge&&j(1);O===h.length-1&&O++;var T=f++;p[T]=c;h=[].concat(h,[T]);I=h.length-1;break;case m.RESET:p={0:y(v)};f=1;h=[0];g=[];k=t;O=0;w=[];break;case m.COMMIT:p={0:y(v)};f=1;h=[0];g=[];k=w[O].state;O=0;w=[];break;case m.ROLLBACK:p={0:y(v)};f=1;h=[0];g=[];O=0;w=[];break;case m.TOGGLE_ACTION:var N=function(){var e=c.id;var t=g.indexOf(e);g=-1===t?[e].concat(g):g.filter(function(t){return t!==e});I=h.indexOf(e);return"break"}();if("break"===N)break;case m.SET_ACTIONS_ACTIVE:var A=c.start;var R=c.end;var M=c.active;var x=[];for(var P=A;P<R;P++)x.push(P);g=M?(0,o.default)(g,x):(0,l.default)(g,x);I=h.indexOf(A);break;case m.JUMP_TO_STATE:O=c.index;I=Infinity;break;case m.JUMP_TO_ACTION:var D=h.indexOf(c.actionId);-1!==D&&(O=D);I=Infinity;break;case m.SWEEP:h=(0,o.default)(h,g);g=[];O=Math.min(O,h.length-1);break;case m.REORDER_ACTION:var F=c.actionId;var L=h.indexOf(F);if(L<1)break;var B=c.beforeActionId;var U=h.indexOf(B);if(U<1){var q=h.length;U=B>h[q-1]?q:1}var G=L-U;if(G>0){h=[].concat(h.slice(0,U),[F],h.slice(U,L),h.slice(L+1));I=U}else if(G<0){h=[].concat(h.slice(0,L),h.slice(L+1,U),[F],h.slice(U));I=L}break;case m.IMPORT_STATE:if(Array.isArray(c.nextLiftedState)){p={0:y(v)};f=1;h=[0];g=[];O=c.nextLiftedState.length;w=[];k=c.preloadedState;I=0;c.nextLiftedState.forEach(function(e){p[f]=y(e);h.push(f);f++})}else{var H=c.nextLiftedState;d=H.monitorState;p=H.actionsById;f=H.nextActionId;h=H.stagedActionIds;g=H.skippedActionIds;k=H.committedState;O=H.currentStateIndex;w=H.computedStates;c.noRecompute&&(I=Infinity)}break;case m.LOCK_CHANGES:E=c.status;I=Infinity;break;case m.PAUSE_RECORDING:C=c.status;if(C)return S(true);p={0:y(v)};f=1;h=[0];g=[];k=w[O].state;O=0;w=[];break;case"@@redux/INIT":if(false===r.shouldHotReload){p={0:y(v)};f=1;h=[0];g=[];k=0===w.length?t:w[O].state;O=0;w=[]}I=0;if(r.maxAge&&h.length>r.maxAge){w=_(w,I,e,k,p,h,g,r.shouldCatchErrors);j(h.length-r.maxAge);I=Infinity}break;default:I=Infinity;break}w=_(w,I,e,k,p,h,g,r.shouldCatchErrors);d=a(d,c);return{monitorState:d,actionsById:p,nextActionId:f,stagedActionIds:h,skippedActionIds:g,committedState:k,currentStateIndex:O,computedStates:w,isLocked:E,isPaused:C}}}function O(e){var t=e.computedStates;var a=e.currentStateIndex;var n=t[a].state;return n}function w(e,t){var a;var i=void 0;function o(){var t=O(e.getState());void 0!==t&&(i=t);return i}return n({},e,(a={liftedStore:e,dispatch:function t(a){e.dispatch(y(a));return a},getState:o,replaceReducer:function a(n){e.replaceReducer(t(n))}},a[p.default]=function(){return n({},e[p.default](),{subscribe:function t(a){if("object"!==("undefined"===typeof a?"undefined":r(a)))throw new TypeError("Expected the observer to be an object.");function n(){a.next&&a.next(o())}n();var i=e.subscribe(n);return{unsubscribe:i}}})},a))}function E(){var e=arguments.length<=0||void 0===arguments[0]?function(){return null}:arguments[0];var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(null!=t.maxAge&&t.maxAge<2)throw new Error("DevTools.instrument({ maxAge }) option, if specified, may not be less than 2.");return function(a){return function(n,r,i){function o(a){if("function"!==typeof a){if(a&&"function"===typeof a.default)throw new Error('Expected the reducer to be a function. Instead got an object with a "default" field. Did you pass a module instead of the default export? Try passing require(...).default instead.');throw new Error("Expected the reducer to be a function.")}return k(a,r,e,t)}var s=a(o(n),i);if(s.liftedStore)throw new Error("DevTools instrumentation should not be applied more than once. Check your store configuration.");return w(s,o)}}}},function(e,t,a){var n=a(1788);function r(e,t){var a=null==e?0:e.length;return!!a&&n(e,t,0)>-1}e.exports=r},function(e,t){function a(e,t,a){var n=-1,r=null==e?0:e.length;while(++n<r)if(a(t,e[n]))return true;return false}e.exports=a},function(e,t){function a(e,t){var a=-1,n=null==e?0:e.length,r=Array(n);while(++a<n)r[a]=t(e[a],a,e);return r}e.exports=a},function(e,t,a){var n=a(842),r=a(1792),i=a(1794);function o(e,t){return i(r(e,t,n),e+"")}e.exports=o},function(e,t,a){var n=a(1311),r=a(725);function i(e){return r(e)&&n(e)}e.exports=i},function(e,t,a){var n=a(726),r=a(647);var i=n(r,"Set");e.exports=i},function(e,t,a){var n=a(911),r=a(1809),i=a(1810),o=a(1811),s=a(1812),l=a(1813);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=r;c.prototype["delete"]=i;c.prototype.get=o;c.prototype.has=s;c.prototype.set=l;e.exports=c},function(e,t,a){var n=a(1814),r=a(725);function i(e,t,a,o,s){if(e===t)return true;if(null==e||null==t||!r(e)&&!r(t))return e!==e&&t!==t;return n(e,t,a,o,i,s)}e.exports=i},function(e,t,a){var n=a(1039),r=a(1815),i=a(1042);var o=1,s=2;function l(e,t,a,l,c,u){var d=a&o,p=e.length,f=t.length;if(p!=f&&!(d&&f>p))return false;var m=u.get(e);if(m&&u.get(t))return m==t;var h=-1,v=true,g=a&s?new n:void 0;u.set(e,t);u.set(t,e);while(++h<p){var b=e[h],_=t[h];if(l)var y=d?l(_,b,h,t,e,u):l(b,_,h,e,t,u);if(void 0!==y){if(y)continue;v=false;break}if(g){if(!r(t,function(e,t){if(!i(g,t)&&(b===e||c(b,e,a,l,u)))return g.push(t)})){v=false;break}}else if(!(b===_||c(b,_,a,l,u))){v=false;break}}u["delete"](e);u["delete"](t);return v}e.exports=l},function(e,t,a){var n=a(1035);function r(e){return e===e&&!n(e)}e.exports=r},function(e,t){function a(e,t){return function(a){if(null==a)return false;return a[e]===t&&(void 0!==t||e in Object(a))}}e.exports=a},function(e,t,a){var n=a(1342),r=a(914);function i(e,t){t=n(t,e);var a=0,i=t.length;while(null!=e&&a<i)e=e[r(t[a++])];return a&&a==i?e:void 0}e.exports=i},function(e,t,a){var n=a(648),r=a(1044),i=a(1832),o=a(1835);function s(e,t){if(n(e))return e;return r(e,t)?[e]:i(o(e))}e.exports=s},function(e,t,a){"use strict";t.__esModule=true;function n(e){return e&&e.__esModule?e["default"]:e}var r=a(1852);t.threezerotwofour=n(r);var i=a(1853);t.apathy=n(i);var o=a(1854);t.ashes=n(o);var s=a(1855);t.atelierDune=n(s);var l=a(1856);t.atelierForest=n(l);var c=a(1857);t.atelierHeath=n(c);var u=a(1858);t.atelierLakeside=n(u);var d=a(1859);t.atelierSeaside=n(d);var p=a(1860);t.bespin=n(p);var f=a(1861);t.brewer=n(f);var m=a(1862);t.bright=n(m);var h=a(1863);t.chalk=n(h);var v=a(1864);t.codeschool=n(v);var g=a(1865);t.colors=n(g);var b=a(1866);t["default"]=n(b);var _=a(1867);t.eighties=n(_);var y=a(1868);t.embers=n(y);var k=a(1869);t.flat=n(k);var O=a(1870);t.google=n(O);var w=a(1871);t.grayscale=n(w);var E=a(1872);t.greenscreen=n(E);var C=a(1873);t.harmonic=n(C);var j=a(1874);t.hopscotch=n(j);var S=a(1875);t.isotope=n(S);var I=a(1876);t.marrakesh=n(I);var T=a(1877);t.mocha=n(T);var N=a(1878);t.monokai=n(N);var A=a(1879);t.ocean=n(A);var R=a(1880);t.paraiso=n(R);var M=a(1881);t.pop=n(M);var x=a(1882);t.railscasts=n(x);var P=a(1883);t.shapeshifter=n(P);var D=a(1884);t.solarized=n(D);var F=a(1885);t.summerfruit=n(F);var L=a(1886);t.tomorrow=n(L);var B=a(1887);t.tube=n(B);var U=a(1888);t.twilight=n(U)},function(e,t,a){"use strict";t.__esModule=true;t.updateScrollTop=r;t.startConsecutiveToggle=o;var n=t.UPDATE_SCROLL_TOP="@@redux-devtools-log-monitor/UPDATE_SCROLL_TOP";function r(e){return{type:n,scrollTop:e}}var i=t.START_CONSECUTIVE_TOGGLE="@@redux-devtools-log-monitor/START_CONSECUTIVE_TOGGLE";function o(e){return{type:i,id:e}}},function(e,t,a){"use strict";t.__esModule=true;var n=a(32);var r=E(n);var i=a(5);var o=E(i);var s=a(7);var l=E(s);var c=a(8);var u=E(c);var d=a(3);var p=E(d);var f=a(727);var m=E(f);var h=a(1);var v=E(h);var g=a(690);var b=E(g);var _=a(1346);var y=E(_);var k=a(1911);var O=E(k);var w=a(1349);function E(e){return e&&e.__esModule?e:{default:e}}var C=function e(t){return t};var j=function e(t,a,n){return 0===n};var S=function e(t,a,n,r){return v["default"].createElement("span",null,n," ",r)};var I=function e(t){var a=t[0];return v["default"].createElement("span",null,a,":")};var T=function e(){return false};function N(e,t){var a={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"};var n=(0,m["default"])(a).filter(function(e){return t[e]});if(n.length>0){e="string"===typeof e?{extend:e}:(0,p["default"])({},e);n.forEach(function(n){console.error('Styling method "'+n+'" is deprecated, use "theme" property instead');e[a[n]]=function(e){for(var a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];var o=e.style;return{style:(0,p["default"])({},o,t[n].apply(t,r))}}})}return e}function A(e){var t=N(e.theme,e);e.invertTheme&&("string"===typeof t?t+=":inverted":t&&t.extend?t="string"===typeof t?(0,p["default"])({},t,{extend:t.extend+":inverted"}):(0,p["default"])({},t,{extend:(0,w.invertTheme)(t.extend)}):t&&(t=(0,w.invertTheme)(t)));return{styling:(0,O["default"])(t)}}var R=function(e){(0,u["default"])(t,e);function t(a){(0,o["default"])(this,t);var n=(0,l["default"])(this,e.call(this,a));n.state=A(a);return n}t.prototype.componentWillReceiveProps=function e(t){var a=this;["theme","invertTheme"].find(function(e){return t[e]!==a.props[e]})&&this.setState(A(t))};t.prototype.shouldComponentUpdate=function e(t){var a=this;return!!(0,m["default"])(t).find(function(e){return"keyPath"===e?t[e].join("/")!==a.props[e].join("/"):t[e]!==a.props[e]})};t.prototype.render=function e(){var t=this.props,a=t.data,n=t.keyPath,i=t.postprocessValue,o=t.hideRoot,s=t.theme,l=t.invertTheme,c=(0,r["default"])(t,["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"]);var u=this.state.styling;return v["default"].createElement("ul",u("tree"),v["default"].createElement(y["default"],(0,p["default"])({},(0,p["default"])({postprocessValue:i,hideRoot:o,styling:u},c),{keyPath:o?[]:n,value:i(a)})))};return t}(v["default"].Component);R.propTypes={data:b["default"].oneOfType([b["default"].array,b["default"].object]).isRequired,hideRoot:b["default"].bool,theme:b["default"].oneOfType([b["default"].object,b["default"].string]),invertTheme:b["default"].bool,keyPath:b["default"].arrayOf(b["default"].oneOfType([b["default"].string,b["default"].number])),postprocessValue:b["default"].func,sortObjectKeys:b["default"].oneOfType([b["default"].func,b["default"].bool])};R.defaultProps={shouldExpandNode:j,hideRoot:false,keyPath:["root"],getItemString:S,labelRenderer:I,valueRenderer:C,postprocessValue:C,isCustomNode:T,collectionLimit:50,invertTheme:true};t["default"]=R},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=k(n);var i=a(32);var o=k(i);var s=a(1);var l=k(s);var c=a(690);var u=k(c);var d=a(1898);var p=k(d);var f=a(1899);var m=k(f);var h=a(1904);var v=k(h);var g=a(1905);var b=k(g);var _=a(1910);var y=k(_);function k(e){return e&&e.__esModule?e:{default:e}}var O=function e(t){var a=t.getItemString,n=t.keyPath,i=t.labelRenderer,s=t.styling,c=t.value,u=t.valueRenderer,d=t.isCustomNode,f=(0,o["default"])(t,["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"]);var h=d(c)?"Custom":(0,p["default"])(c);var g={getItemString:a,key:n[0],keyPath:n,labelRenderer:i,nodeType:h,styling:s,value:c,valueRenderer:u};var _=(0,r["default"])({},f,g,{data:c,isCustomNode:d});switch(h){case"Object":case"Error":case"WeakMap":case"WeakSet":return l["default"].createElement(m["default"],_);case"Array":return l["default"].createElement(v["default"],_);case"Iterable":case"Map":case"Set":return l["default"].createElement(b["default"],_);case"String":return l["default"].createElement(y["default"],(0,r["default"])({},g,{valueGetter:function e(t){return'"'+t+'"'}}));case"Number":return l["default"].createElement(y["default"],g);case"Boolean":return l["default"].createElement(y["default"],(0,r["default"])({},g,{valueGetter:function e(t){return t?"true":"false"}}));case"Date":return l["default"].createElement(y["default"],(0,r["default"])({},g,{valueGetter:function e(t){return t.toISOString()}}));case"Null":return l["default"].createElement(y["default"],(0,r["default"])({},g,{valueGetter:function e(){return"null"}}));case"Undefined":return l["default"].createElement(y["default"],(0,r["default"])({},g,{valueGetter:function e(){return"undefined"}}));case"Function":case"Symbol":return l["default"].createElement(y["default"],(0,r["default"])({},g,{valueGetter:function e(t){return t.toString()}}));case"Custom":return l["default"].createElement(y["default"],g);default:return null}};O.propTypes={getItemString:u["default"].func.isRequired,keyPath:u["default"].arrayOf(u["default"].oneOfType([u["default"].string,u["default"].number])).isRequired,labelRenderer:u["default"].func.isRequired,styling:u["default"].func.isRequired,value:u["default"].any,valueRenderer:u["default"].func.isRequired,isCustomNode:u["default"].func.isRequired};t["default"]=O},function(e,t,a){e.exports={default:a(1900),__esModule:true}},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=c(n);var i=a(1);var o=c(i);var s=a(690);var l=c(s);function c(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var a=t.styling,n=t.arrowStyle,i=t.expanded,s=t.nodeType,l=t.onClick;return o["default"].createElement("div",(0,r["default"])({},a("arrowContainer",n),{onClick:l}),o["default"].createElement("div",a(["arrow","arrowSign"],s,i,n),"\u25b6","double"===n&&o["default"].createElement("div",a(["arrowSign","arrowSignInner"]),"\u25b6")))};u.propTypes={styling:l["default"].func.isRequired,arrowStyle:l["default"].oneOf(["single","double"]),expanded:l["default"].bool.isRequired,nodeType:l["default"].string.isRequired,onClick:l["default"].func.isRequired};u.defaultProps={arrowStyle:"single"};t["default"]=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getBase16Theme=t.createStyling=t.invertTheme=void 0;var n=a(40);var r=w(n);var i=a(3);var o=w(i);var s=a(67);var l=w(s);var c=a(727);var u=w(c);var d=a(1912);var p=w(d);var f=a(1343);var m=O(f);var h=a(1913);var v=w(h);var g=a(1914);var b=w(g);var _=a(1919);var y=w(_);var k=a(1920);function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e;return t}function w(e){return e&&e.__esModule?e:{default:e}}var E=m.default;var C=(0,u.default)(E);var j=function e(t){return t<.25?1:t<.5?.9-t:1.1-t};var S=(0,y.default)(b.default,k.rgb2yuv,function(e){var t=(0,l.default)(e,3),a=t[0],n=t[1],r=t[2];return[j(a),n,r]},k.yuv2rgb,v.default);var I=function e(t){return function(e){return{className:[e.className,t.className].filter(Boolean).join(" "),style:(0,o.default)({},e.style||{},t.style||{})}}};var T=function e(t,a){if(void 0===t)return a;if(void 0===a)return t;var n="undefined"===typeof t?"undefined":(0,r.default)(t);var i="undefined"===typeof a?"undefined":(0,r.default)(a);switch(n){case"string":switch(i){case"string":return[a,t].filter(Boolean).join(" ");case"object":return I({className:t,style:a});case"function":return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return I({className:t})(a.apply(void 0,[e].concat(r)))}}case"object":switch(i){case"string":return I({className:a,style:t});case"object":return(0,o.default)({},a,t);case"function":return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return I({style:t})(a.apply(void 0,[e].concat(r)))}}case"function":switch(i){case"string":return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,[I(e)({className:a})].concat(r))};case"object":return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,[I(e)({style:a})].concat(r))};case"function":return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,[a.apply(void 0,[e].concat(r))].concat(r))}}}};var N=function e(t,a){var n=(0,u.default)(a);for(var r in t)-1===n.indexOf(r)&&n.push(r);return n.reduce(function(e,n){return e[n]=T(t[n],a[n]),e},{})};var A=function e(t,a){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(null===a)return t;Array.isArray(a)||(a=[a]);var l=a.map(function(e){return t[e]}).filter(Boolean);var c=l.reduce(function(e,t){"string"===typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===("undefined"===typeof t?"undefined":(0,r.default)(t))?e.style=(0,o.default)({},e.style,t):"function"===typeof t&&(e=(0,o.default)({},e,t.apply(void 0,[e].concat(i))));return e},{className:"",style:{}});c.className||delete c.className;0===(0,u.default)(c.style).length&&delete c.style;return c};var R=t.invertTheme=function e(t){return(0,u.default)(t).reduce(function(e,a){return e[a]=/^base/.test(a)?S(t[a]):"scheme"===a?t[a]+":inverted":t[a],e},{})};var M=t.createStyling=(0,p.default)(function(e){for(var t=arguments.length,a=Array(t>3?t-3:0),n=3;n<t;n++)a[n-3]=arguments[n];var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s=r.defaultBase16,l=void 0===s?E:s,c=r.base16Themes,d=void 0===c?null:c;var f=x(i,d);f&&(i=(0,o.default)({},f,i));var m=C.reduce(function(e,t){return e[t]=i[t]||l[t],e},{});var h=(0,u.default)(i).reduce(function(e,t){return-1===C.indexOf(t)?(e[t]=i[t],e):e},{});var v=e(m);var g=N(h,v);return(0,p.default)(A,2).apply(void 0,[g].concat(a))},3);var x=t.getBase16Theme=function e(t,a){t&&t.extend&&(t=t.extend);if("string"===typeof t){var n=t.split(":"),r=(0,l.default)(n,2),i=r[0],o=r[1];t=(a||{})[i]||m[i];"inverted"===o&&(t=R(t))}return t&&t.hasOwnProperty("base00")?t:void 0}},function(e,t){var a=/-?\d+(\.\d+)?%?/g;function n(e){return e.match(a)}e.exports=n},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(14);var v=a(2);var g=a.n(v);var b=a(164);var _=a(10);var y=a(344);var k=a(128);var O=new _["b"]("admin");var w={searchMembers:p.a.func.isRequired,clogger:p.a.object.isRequired};var E={searchMembers:v["noop"]};var C=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isSearching:false};a.searchMembers=a.searchMembers.bind(a);a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.handleSearchInputOnFocus=a.handleSearchInputOnFocus.bind(a);a.throttledSearchMembers=Object(v["throttle"])(a.searchMembers,300,{leading:false});return a}o()(t,[{key:"handleSearchInputChange",value:function e(t){var a=t.target.value||"";this.throttledSearchMembers(a)}},{key:"handleSearchInputOnFocus",value:function e(){var t=this.props.clogger;t.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"admin_search"}}})}},{key:"searchMembers",value:function e(t){var a=this;var n=this.props.clogger;this.props.searchMembers({searchQuery:t}).then(function(){a.setState(function(){return{isSearching:false}})});n.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"search",ui_element:"admin_search"}}})}},{key:"render",value:function e(){var t=O.t("Search current members");return m.a.createElement(y["a"],{className:"p-admin_member_table__search_input",placeholder:t,icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,onFocus:this.handleSearchInputOnFocus})}}]);return t}(f["PureComponent"]);C.displayName="AdminMemberSearch";C.defaultProps=E;var j=function e(t){return{clogger:Object(b["a"])({state:t})}};var S=function e(t){return{searchMembers:function e(a){return t(Object(k["searchMembers"])(a))}}};t["a"]=Object(h["connect"])(j,S)(C)},function(e,t,a){"use strict";t.__esModule=true;t.default=void 0;var n=a(1847);var r=i(n);function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default},function(e,t,a){"use strict";t.__esModule=true;function n(e){return function(t){var a=t.dispatch,n=t.getState;return function(t){return function(r){if("function"===typeof r)return r(a,n,e);return t(r)}}}}var r=n();r.withExtraArgument=n;t["default"]=r},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.batchedSubscribe=r;function r(e){if("function"!==typeof e)throw new Error("Expected batch to be a function.");var t=[];var a=t;function r(){a===t&&(a=t.slice())}function i(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=true;r();a.push(e);return function n(){if(!t)return;t=false;r();var i=a.indexOf(e);a.splice(i,1)}}function o(){var e=t=a;for(var n=0;n<e.length;n++)e[n]()}function s(){e(o)}return function(e){return function(){var t=e.apply(void 0,arguments);var a=t.subscribe;function r(){var e=t.dispatch.apply(t,arguments);s();return e}return n({},t,{dispatch:r,subscribe:i,subscribeImmediate:a})}}}},function(e,t,a){"use strict";a.r(t);a.d(t,"getAppToEdit",function(){return s});a.d(t,"getAppName",function(){return l});a.d(t,"getAppIcons",function(){return c});var n=a(0);var r=a.n(n);var i=a(4);var o=a(11);var s=Object(i["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.appId;var n=Object(o["getFromBootData"])(e,"app_to_edit");if(n&&n.encoded_id===a)return n;return null});s.propTypes={appId:r.a.string.isRequired};var l=Object(i["d"])(function(e,t){var a=s(e,t);return a&&a.name});l.propTypes={appId:r.a.string.isRequired};var c=Object(i["d"])(function(e,t){var a=s(e,t);return a&&a.payload&&a.payload.icons||{}});c.propTypes={appId:r.a.string.isRequired}},,,,,,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(711);var g=a(13);var b=Object(g["c"])("TS.generic_notification_banner.banner_to_show_sig.dispatch");var _=Object(g["c"])("TS.ui.banner.isDunningBanner",function(){return false});var y=Object(g["c"])("TS.ui.banner.show");var k=a(11);var O=a(10);var w=a(164);var E=a(21);var C=a(760);var j=a(27);var S=a(65);var I=a(2);var T=a(15);var N=a.n(T);var A=a(855);var R=a(20);var M=a(2226);var x=new O["b"]("notification_banner");var P={learn_more:x.t("Learn More"),show_me:x.t("Show Me"),skip:x.t("Skip for Now")};var D={emojiSrc:m.a.string,emojiAlt:m.a.string,headerText:m.a.node,bodyText:m.a.node,bodyClass:m.a.string,goButtonText:m.a.string,goButtonClass:m.a.string,onGo:m.a.func,showGoButton:m.a.bool,isLearnMoreButton:m.a.bool,cancelButtonText:m.a.string,cancelButtonClass:m.a.string,onCancel:m.a.func,showCancelButton:m.a.bool,showCloseIcon:m.a.bool,onCloseIcon:m.a.func,closeBanner:m.a.func.isRequired,onCloseBanner:m.a.func,bannerPrefs:m.a.shape({countPref:m.a.string.isRequired,tsPref:m.a.string.isRequired}),featureModernizeBanners:m.a.bool.isRequired};var F={emojiSrc:"",emojiAlt:"",headerText:"",bodyText:"",bodyClass:"",goButtonText:"",goButtonClass:"",onGo:I["noop"],showGoButton:true,isLearnMoreButton:false,cancelButtonText:P.skip,cancelButtonClass:"",onCancel:I["noop"],showCancelButton:true,showCloseIcon:false,onCloseIcon:I["noop"],onCloseBanner:I["noop"],bannerPrefs:{}};var L=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["handleGoButton","handleCancelButton","handleCloseIcon"]);return a}o()(t,[{key:"closeBanner",value:function e(){var t=this.props,a=t.onCloseBanner,n=t.bannerPrefs;this.props.closeBanner({bannerPrefs:n});a()}},{key:"handleGoButton",value:function e(){var t=this.props.onGo;this.closeBanner();t()}},{key:"handleCancelButton",value:function e(){var t=this.props.onCancel;this.closeBanner();t()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"renderHeader",value:function e(){var t=this.props,a=t.headerText,n=t.emojiSrc,r=t.emojiAlt;if(!a)return null;return p.a.createElement("h1",{className:"p-message_pane_banner__header"},n&&p.a.createElement("img",{src:n,alt:r,className:"p-message_pane_banner__header_emoji"}),a)}},{key:"renderBody",value:function e(){var t=this.props,a=t.bodyText,n=t.bodyClass;if(!a)return null;var r=N()("p-message_pane_banner__body",n);return p.a.createElement("div",{className:r},a)}},{key:"renderGoButton",value:function e(){var t=this.props,a=t.goButtonText,n=t.goButtonClass,r=t.isLearnMoreButton;var i=r?P.learn_more:P.show_me;var o=N()("p-message_pane_banner__button ","p-message_pane_banner__button--go",n);return p.a.createElement(R["b"],{className:o,onClick:this.handleGoButton,size:"small"},a||i)}},{key:"renderCancelButton",value:function e(){var t=this.props,a=t.cancelButtonText,n=t.cancelButtonClass;var r=N()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",n);return p.a.createElement(R["b"],{className:r,onClick:this.handleCancelButton,size:"small",type:"outline"},a)}},{key:"renderCloseIcon",value:function e(){if(!this.props.featureModernizeBanners)return null;return p.a.createElement(R["c"],{ariaLabel:x.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon},p.a.createElement(A["a"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,a=t.showGoButton,n=t.showCancelButton,r=t.showCloseIcon;return p.a.createElement("div",{className:"p-message_pane_banner"},this.renderHeader(),this.renderBody(),p.a.createElement("div",{className:"p-message_pane_banner__button_container"},a&&this.renderGoButton(),n&&this.renderCancelButton()),r&&this.renderCloseIcon())}}]);return t}(d["PureComponent"]);L.displayName="MessagePaneBanner";L.defaultProps=F;var B=function e(t){return{featureModernizeBanners:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners")}};var U={closeBanner:v["closeBanner"]};var q=Object(h["connect"])(B,U)(L);var G=new O["b"]("send_btn");var H={closeBanner:m.a.func.isRequired,hasSendButton:m.a.bool.isRequired,sendButtonAutoSet:m.a.bool.isRequired,featureModernizeBanners:m.a.bool.isRequired,clogger:m.a.object.isRequired};var W={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var V=258;var z="I18N_BANNER";var Q=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPrefLinkClick=a.onPrefLinkClick.bind(a);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(z,{contexts:{ui_context:{step:V,action:"impression"}}})}},{key:"componentWillUpdate",value:function e(t){var a=this.props,n=a.hasSendButton,r=a.sendButtonAutoSet;r===t.sendButtonAutoSet&&n===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){var t=this.props.clogger;t.track(z,{contexts:{ui_context:{step:V,action:"click",ui_element:"prefs_button"}}});Object(C["a"])("advanced","#msg_input_send_btn_label");this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;if(!this.props.featureModernizeBanners)return null;return p.a.createElement("div",null,G.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return p.a.createElement("div",{className:"inline_block"},p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(j["isMac"])()?"\u2318":"Ctrl"),p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),p.a.createElement("br",null),G.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var a=e.text;return p.a.createElement(S["a"],{onClick:t.onPrefLinkClick},a)}))}},{key:"render",value:function e(){var t=G.t("Just for Japan: a button for sending");var a=G.t("Got It");var n="p-message_pane_banner__body--taller-line-height";return p.a.createElement(q,{headerText:t,bodyText:this.renderBodyText(),bodyClass:n,goButtonText:a,showCancelButton:false,showCloseIcon:true,bannerPrefs:W})}}]);return t}(d["PureComponent"]);Q.displayName="I18nJapanBetaSendBtnBanner";var K=function e(t){return{hasSendButton:Object(E["getUserPref"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(E["getUserPref"])(t,"msg_input_send_btn_auto_set"),featureModernizeBanners:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners"),clogger:Object(w["a"])({state:t})}};var Y={closeBanner:v["closeBanner"]};var J={CLOG_STEP:V,CLOG_EVENT_ID:z};var Z=Object(h["connect"])(K,Y)(Q);var X=a(3);var $=a.n(X);var ee=a(69);var te=a(19);var ae=a(12);var ne=a(50);var re=a(48);var ie=a(481);var oe={isSharedChannel:m.a.bool,sharedTeamNames:m.a.arrayOf(m.a.node),bannerPrefs:m.a.shape({countPref:m.a.string,tsPref:m.a.string}).isRequired,clogStep:m.a.number.isRequired,onGoUrl:m.a.string.isRequired,goButtonText:m.a.string.isRequired,headerText:m.a.node.isRequired,renderBodyText:m.a.func.isRequired,clogger:m.a.object.isRequired};var se={isSharedChannel:false,sharedTeamNames:[]};var le=["UPGRDEXP_FREE_TRIAL_FOR_SC","GROWTH_PRICING"];var ce=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon","renderBodyText"]);return a}o()(t,[{key:"componentDidMount",value:function e(){this.clog({action:"impression"})}},{key:"onGo",value:function e(){var t=this.props.onGoUrl;this.clog({action:"click",ui_element:"billing_link"});window.open(t,"_blank")}},{key:"onCloseIcon",value:function e(){this.clog({action:"close",ui_element:"btn_close"})}},{key:"clog",value:function e(t){var a=this.props,n=a.clogStep,r=a.clogger;var i=$()({step:n},t);le.forEach(function(e){r.track(e,{contexts:{ui_context:i}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,a=t.sharedTeamNames;return e(a)}},{key:"render",value:function e(){var t=this.props,a=t.isSharedChannel,n=t.headerText,r=t.goButtonText,i=t.bannerPrefs;if(!a)return null;return p.a.createElement(q,{headerText:n,bodyText:this.renderBodyText(),goButtonText:r,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:i})}}]);return t}(d["PureComponent"]);ce.displayName="EscTrialBanner";ce.defaultProps=se;var ue=function e(t){var a=Object(ee["getPrimaryView"])(t);var n=Object(te["getChannelById"])(t,a);var r=Object(ae["isExternallySharedChannel"])(n);var i=[];if(r){var o=Object(ae["getMaybePendingSharedTeamIds"])(n);Object(I["isEmpty"])(o)||(i=Object(I["map"])(o,function(e){var a=Object(ne["getTeamById"])(t,e);return Object(re["isUnknown"])(a)?p.a.createElement(ie["a"],{type:"unknown"}):Object(re["getTeamDisplayName"])(a)}))}return{isSharedChannel:r,sharedTeamNames:i,clogger:Object(w["a"])({state:t})}};var de={clogEventIds:le};var pe=Object(h["connect"])(ue)(ce);var fe=new O["b"]("trial_expiration_banners");var me={numDaysLeft:m.a.number.isRequired,expirationDate:m.a.string.isRequired};var he={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var ve=168;var ge="/admin/billing";var be=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["renderBodyText","renderHeaderText"]);return a}o()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var n=Object(O["f"])(t,{noEscape:true,react:true});return fe.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:a,shared_team_name:n})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return fe.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=fe.t("Upgrade Now");return p.a.createElement(pe,{bannerPrefs:he,clogStep:ve,onGoUrl:ge,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);be.displayName="TwoWeeksLeftEscTrialBanner";var _e={LEARN_MORE_URL:ge};var ye=be;var ke=a(159);var Oe=new O["b"]("trial_expiration_banners");var we={numDaysLeft:m.a.number.isRequired,expirationDate:m.a.string.isRequired,featureModernizeBanners:m.a.bool.isRequired};var Ee={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var Ce=167;var je="/admin/billing";var Se=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["renderBodyText","renderHeaderText"]);return a}o()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;if(!this.props.featureModernizeBanners)return null;var n=Object(O["f"])(t,{noEscape:true,react:true});return Oe.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before {expiration_date}.",{expiration_date:a,shared_team_name:n},function(e){var t=e.text;return p.a.createElement("strong",{className:"sk_warning_red"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return Oe.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=Oe.t("Upgrade Now");return p.a.createElement(pe,{bannerPrefs:Ee,clogStep:Ce,onGoUrl:je,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);Se.displayName="OneWeekLeftEscTrialBanner";var Ie={LEARN_MORE_URL:je};var Te=Object(ke["a"])("feature_modernize_banners")(Se);var Ne=new O["b"]("free_trial_banners");var Ae={clogger:m.a.object.isRequired};var Re={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var Me=205;var xe="UPGRDEXP_FREE_TRIAL_IN_PROD";var Pe="/trial";var De=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(xe,{contexts:{ui_context:{step:Me,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(xe,{contexts:{ui_context:{step:Me,action:"click",ui_element:"learn_more_btn"}}});window.open(Pe,"_blank")}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(xe,{contexts:{ui_context:{step:Me,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){return{headerText:Ne.t("Start your free trial of the Standard plan"),bodyText:Ne.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function e(){var t=this.getContent();if(Object(I["isEmpty"])(t))return null;return p.a.createElement(q,{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f381.png",emojiAlt:Ne.t("present emoji"),headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Re})}}]);return t}(d["PureComponent"]);De.displayName="InProdTrialMessagePaneBanner";var Fe=function e(t){return{clogger:Object(w["a"])({state:t})}};var Le=Object(h["connect"])(Fe)(De);var Be=new O["b"]("free_trial_banners");var Ue={expirationDate:m.a.string.isRequired,clogger:m.a.object.isRequired};var qe={expirationDate:""};var Ge={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var He=207;var We="UPGRDEXP_FREE_TRIAL_IN_PROD";var Ve="/trial";var ze=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(We,{contexts:{ui_context:{step:He,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(We,{contexts:{ui_context:{step:He,action:"click",ui_element:"learn_more_btn"}}});window.open(Ve,"_blank")}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(We,{contexts:{ui_context:{step:He,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:Be.t("Your free trial offer is about to expire"),bodyText:Be.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(q,{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f388.png",emojiAlt:Be.t("balloon emoji"),headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ge})}}]);return t}(d["PureComponent"]);ze.displayName="InProdTrialReminderBanner";ze.defaultProps=qe;var Qe=function e(t){return{clogger:Object(w["a"])({state:t})}};var Ke=Object(h["connect"])(Qe)(ze);var Ye=a(150);var Je=a(351);var Ze=new O["b"]("notification_banner");var Xe={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var $e=200;var et="UPGRDEXP_ENFORCE_FILE_LIMITS";var tt="/pricing?ui_element=11&ui_step="+$e;var at={teamName:m.a.string.isRequired,userId:m.a.string.isRequired,featureModernizeBanners:m.a.bool.isRequired,closeBanner:m.a.func.isRequired,showFileList:m.a.func.isRequired,experimentGroup:m.a.string.isRequired,clogger:m.a.object.isRequired};var nt=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(et,{contexts:{ui_context:{step:$e,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(et,{contexts:{ui_context:{step:$e,action:"click",ui_element:"pricing_button"}}});t.track("GROWTH_PRICING",{contexts:{ui_context:{step:$e,action:"click",ui_element:"pricing_button"}}});window.open(tt,"_blank")}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(et,{contexts:{ui_context:{step:$e,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props,a=t.userId,n=t.clogger;this.props.closeBanner({bannerPrefs:Xe});this.props.showFileList({user:a});n.track(et,{contexts:{ui_context:{step:$e,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function e(){var t=this.props.teamName;return Ze.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t})}},{key:"getBodyText",value:function e(){var t=this;if(!this.props.featureModernizeBanners)return null;if("treatment"===this.props.experimentGroup)return Ze.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.');return Ze.rt("Your workspace is getting close to the free plan\u2019s <limit>5 GB storage limit</limit>. To get some more space, you can either <button>delete older files</button> or upgrade to a paid plan.",{},function(e){var a=e.key,n=e.tag,r=e.text;if("limit"===n)return p.a.createElement("span",{key:a,className:"bold"},r);return p.a.createElement("button",{key:a,className:"c-link--button",onClick:t.onDeleteFilesLinkClicked},r)})}},{key:"render",value:function e(){var t=Ze.t("See Plans");return p.a.createElement(q,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Xe})}}]);return t}(d["PureComponent"]);nt.displayName="ApproachingFileLimitBanner";var rt=function e(t){return{teamName:Object(ne["getCurrentTeam"])(t).name,userId:Object(k["getCurrentUserId"])(t),featureModernizeBanners:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners"),experimentGroup:Object(Je["getGroupForUser"])(t,"approaching_file_limit_banner_v2"),clogger:Object(w["a"])({state:t})}};var it={closeBanner:v["closeBanner"],showFileList:Ye["d"]};var ot=Object(h["connect"])(rt,it)(nt);var st=new O["b"]("client");var lt={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var ct=63;var ut="GROWTH_PRICING";var dt="/pricing?ui_element=11&ui_step="+ct;var pt={messagesCount:m.a.number.isRequired,featureModernizeBannersV2:m.a.bool.isRequired,clogger:m.a.object.isRequired};var ft=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseBanner"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(ut,{limit_meter_messages_count:a,contexts:{ui_context:{step:ct,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(ut,{limit_meter_messages_count:a,contexts:{ui_context:{step:ct,action:"click",ui_element:"pricing_button"}}});window.open(dt,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(ut,{limit_meter_messages_count:a,contexts:{ui_context:{step:ct,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:st.t("Your workspace is getting close to the 10k message limit"),bodyText:st.t("All of your messages are saved in Slack, but on the Free plan you can only see and search the 10,000 most recent. For your full message history, upgrade to a paid plan.")}}},{key:"render",value:function e(){if(!this.props.featureModernizeBannersV2)return null;var t=this.getContent();return p.a.createElement(q,{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/231b.png",emojiAlt:st.t("sand hourglass emoji"),headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:lt})}}]);return t}(d["PureComponent"]);ft.displayName="ApproachingMsgLimitBanner";var mt=function e(t){return{featureModernizeBannersV2:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners_v2"),clogger:Object(w["a"])({state:t})}};var ht=Object(h["connect"])(mt)(ft);var vt=new O["b"]("client");var gt={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var bt=64;var _t="GROWTH_PRICING";var yt="/pricing?ui_element=11&ui_step="+bt;var kt={messagesCount:m.a.number.isRequired,featureModernizeBannersV2:m.a.bool.isRequired,clogger:m.a.object.isRequired};var Ot=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseBanner"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(_t,{limit_meter_messages_count:a,contexts:{ui_context:{step:bt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(_t,{limit_meter_messages_count:a,contexts:{ui_context:{step:bt,action:"click",ui_element:"pricing_button"}}});window.open(yt,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(_t,{limit_meter_messages_count:a,contexts:{ui_context:{step:bt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:vt.t("You\u2019ve just reached the 10k message limit"),bodyText:vt.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){if(!this.props.featureModernizeBannersV2)return null;var t=this.getContent();return p.a.createElement(q,{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f3c1.png",emojiAlt:vt.t("chequered flag emoji"),headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:gt})}}]);return t}(d["PureComponent"]);Ot.displayName="JustReachedMsgLimitBanner";var wt=function e(t){return{featureModernizeBannersV2:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners_v2"),clogger:Object(w["a"])({state:t})}};var Et=Object(h["connect"])(wt)(Ot);var Ct=a(444);var jt=new O["b"]("client");var St={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var It=65;var Tt="GROWTH_PRICING";var Nt="/pricing?ui_element=11&ui_step="+It;var At={messagesCount:m.a.number.isRequired,featureModernizeBannersV2:m.a.bool.isRequired,clogger:m.a.object.isRequired};var Rt=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseBanner"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(Tt,{limit_meter_messages_count:a,contexts:{ui_context:{step:It,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(Tt,{limit_meter_messages_count:a,contexts:{ui_context:{step:It,action:"click",ui_element:"pricing_button"}}});window.open(Nt,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,n=t.clogger;n.track(Tt,{limit_meter_messages_count:a,contexts:{ui_context:{step:It,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var a=this.roundNumOfMsgsBeyondLimit(t-1e4);if(!a)return null;return{headerText:jt.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:a}),bodyText:jt.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. Upgrade to a paid plan for access to your full history \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:a})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(!t||t<=0)return t;if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var a=100*Math.floor(t/100);return Object(O["j"])(a)}if(t>999999)return Object(Ct["a"])(t);return null}},{key:"render",value:function e(){if(!this.props.featureModernizeBannersV2)return null;var t=this.getContent();if(!t)return null;return p.a.createElement(q,{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f680.png",emojiAlt:jt.t("rocket emoji"),headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:St})}}]);return t}(d["PureComponent"]);Rt.displayName="ThirtyDaysAfterMsgLimitBanner";var Mt=function e(t){return{featureModernizeBannersV2:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners_v2"),clogger:Object(w["a"])({state:t})}};var xt=Object(h["connect"])(Mt)(Rt);var Pt={bannerName:m.a.string,bannerData:m.a.object,loadBanner:m.a.func.isRequired,featureModernizeBanners:m.a.bool.isRequired,featureModernizeBannersV2:m.a.bool.isRequired,featureModernizeBannersV3:m.a.bool.isRequired};var Dt={bannerName:"",bannerData:{}};var Ft=function e(){return p.a.createElement(Z,null)};Ft.displayName="renderI18nJapanBetaSendBtnBanner";var Lt=function e(t){var a=t.bannerData;return p.a.createElement(ye,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next})};Lt.displayName="renderTwoWeeksLeftEscTrialBanner";var Bt=function e(t){var a=t.bannerData;return p.a.createElement(Te,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next})};Bt.displayName="renderOneWeekLeftEscTrialBanner";var Ut=function e(){return p.a.createElement(ot,null)};Ut.displayName="renderApproachingFileLimitBanner";var qt=function e(t){var a=t.bannerData;return p.a.createElement(Le,{numMsgs:a.messages_count_abbrev})};qt.displayName="renderInProdTrialBanner";var Gt=function e(t){var a=t.bannerData;return p.a.createElement(Ke,{expirationDate:a.expiration_date})};Gt.displayName="renderInProdTrialReminderBanner";var Ht=function e(t){var a=t.bannerData;return p.a.createElement(ht,{messagesCount:a.messages_count})};Ht.displayName="renderApproachingMsgLimitBanner";var Wt=function e(t){var a=t.bannerData;return p.a.createElement(Et,{messagesCount:a.messages_count})};Wt.displayName="renderJustReachedMsgLimitBanner";var Vt=function e(t){var a=t.bannerData;return p.a.createElement(xt,{messagesCount:a.messages_count})};Vt.displayName="renderThirtyDaysAfterMsgLimitBanner";var zt={activation_msg_limit_banner:null};var Qt={approaching_msg_limit_banner:Ht,just_reached_msg_limit_banner:Wt,thirty_days_after_msg_limit_banner:Vt};var Kt={i18n_japan_beta_send_btn_banner:Ft,two_weeks_left_esc_trial_banner:Lt,one_week_left_esc_trial_banner:Bt,in_prod_trial_banner:qt,in_prod_trial_reminder_banner:Gt,approaching_file_limit_banner:Ut};var Yt=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"componentDidMount",value:function e(){this.props.loadBanner()}},{key:"render",value:function e(){var t=this.props,a=t.bannerName,n=t.bannerData,r=t.featureModernizeBanners,i=t.featureModernizeBannersV2,o=t.featureModernizeBannersV3;if(!r)return null;if(!a)return null;if(_(a)){y(a,n);return null}var s=Kt[a];i&&(s=s||Qt[a]);o&&(s=s||zt[a]);if(!s){b({name:a,data:n});return null}return s({bannerData:n})}}]);return t}(d["PureComponent"]);Yt.displayName="MessagePaneBannerContainer";Yt.defaultProps=Dt;var Jt=function e(t){return{bannerName:Object(v["getMessagePaneBannerName"])(t),bannerData:Object(v["getMessagePaneBannerData"])(t),featureModernizeBanners:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners"),featureModernizeBannersV2:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners_v2"),featureModernizeBannersV3:Object(k["isFeatureEnabled"])(t,"feature_modernize_banners_v3")}};var Zt={loadBanner:v["loadBanner"]};var Xt=t["a"]=Object(h["connect"])(Jt,Zt)(Yt)},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(14);var b=a(2);var _=a.n(b);var y=a(15);var k=a.n(y);var O=a(10);var w=a(469);var E=a(18);var C=a(173);var j=a(121);var S=a(11);var I=new O["b"]("admin");var T={member:m.a.object.isRequired,isEnterprise:m.a.bool};var N={member:{},isEnterprise:false};var A=function(e){p()(t,e);function t(){o()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=void 0;var a=void 0;var n=this.props,r=n.member,i=n.isEnterprise;if(r.deleted){t="minus";a="deactivated"}else if(r.is_primary_owner){t=I.t("Primary Owner");a="primary_owner"}else if(r.is_owner){t=I.t("Workspace Owner");a="owner"}else if(r.is_admin){t=I.t("Workspace Admin");a="admin"}else if(r.is_ultra_restricted){t=I.t("Single-Channel Guest");a="ultra_restricted"}else if(r.is_restricted){t=I.t("Multi-Channel Guest");a="restricted"}else if(i){t=I.t("Full Member");a="member"}else{t=I.t("Full Member");a="member"}var o=k()("p-admin_member_table__member_type_icon","p-admin_member_table__member_type_icon--"+a,{hidden:"deactivated"===a});var s=k()({hidden:"deactivated"===a});var l=k()({hidden:"deactivated"!==a});return v.a.createElement("div",{className:"p-admin_member_table__member_type"},v.a.createElement("div",{className:o}),v.a.createElement("div",{className:s},t),v.a.createElement(E["b"],{type:t,className:l}))}}]);return t}(h["PureComponent"]);A.displayName="AdminMemberType";A.defaultProps=N;var R=function e(t){var a={isEnterprise:Object(S["pageNeedsEnterprise"])(t)};return a};var M=Object(g["connect"])(R)(A);var x=a(714);var P=a(164);var D=a(225);var F=a(50);var L=a(77);var B=a(212);var U=a(16);var q=a(679);var G=a(48);var H=a(13);var W=Object(H["c"])("TS.utility.enterprise.getProviderLabel",b["noop"]);var V=a(719);var z=a(41);var Q=new O["b"]("member_actions");var K={action:m.a.string.isRequired,team:m.a.object,target:m.a.object,currentUser:m.a.object,targetUserName:m.a.string,targetIdpGroups:m.a.array};var Y={action:"",team:null,target:null,currentUser:null,targetUserName:"",targetIdpGroups:[]};var J=function(e){p()(t,e);function t(){o()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"getFormattedIdpGroups",value:function e(){var t=this.props.targetIdpGroups;var a=_.a.map(t,"name");if(_.a.isEmpty(a))return"";if(1===a.length)return _.a.head(a);return Q.t("{group_name} and {num_remaining_groups} more",{num_remaining_groups:a.length-1,group_name:_.a.head(a)})}},{key:"getIdpLabel",value:function e(){var t=Object(V["c"])()?Object(V["c"])():"single sign-on";return W(Object(V["b"])(),t)}},{key:"render",value:function e(){var t=this.props,a=t.action,n=t.team,r=t.target,i=t.currentUser,o=t.targetUserName,s=t.targetIdpGroups;var l=_.a.map(s,"name").length;var c=void 0;var u=void 0;var d=void 0;switch(a){case"activate":c=n&&Object(G["isEnterpriseTeam"])(n)&&Object(U["isOrgDeleted"])(r)?Q.t("Reactivate account"):n&&Object(G["isEnterpriseTeam"])(n)?Q.t("Add to workspace"):Q.t("Activate account");break;case"activate_as_guest":c=Q.t("Activate as Guest");break;case"cant_reactivate_as_guest":c=v.a.createElement(z["d"],{tip:Q.t("{name} is a Full Member on other workspaces in this organization. Their account type must be the same for every workspace.",{name:this.props.targetUserName}),"data-qa":"tooltip-cant-reactivate-guest",zIndex:"above_fs"},v.a.createElement("span",null,Q.t("Can\u2019t reactivate as Guest")));break;case"deactivate":c=n&&Object(G["isEnterpriseTeam"])(n)?Q.t("Remove from workspace"):Q.t("Deactivate account");break;case"cant_deactivate":c=v.a.createElement(z["d"],{tip:Q.t("{name} is part of {num_groups, plural, =1 {one {idp_label} group} other {# {idp_label} groups}} assigned to this workspace: ({label}).",{name:o,num_groups:l,label:this.getFormattedIdpGroups(),idp_label:this.getIdpLabel()}),"data-qa":"tooltip-cant-deactivate",zIndex:"above_fs"},v.a.createElement("span",null,Q.t("Can\u2019t remove member")));break;case"cant_convert_or_deactivate":c=v.a.createElement(z["d"],{tip:Q.t("{name} can\u2019t be removed, because they\u2019re part of {num_groups, plural, =1 {one {idp_label} group} other {# {idp_label} groups}} assigned to this workspace: ({label}). They also belong to multiple workspaces in this organization, so their account type can only be changed at the org level.",{name:o,num_groups:l,label:this.getFormattedIdpGroups(),idp_label:this.getIdpLabel()}),"data-qa":"tooltip-cant-convert-or-deactivate",zIndex:"above_fs"},v.a.createElement("span",null,Q.t("Can\u2019t remove member")));break;case"demote_admin":c=Q.t("Change to Full Member");break;case"demote_owner":c=Q.t("Change to Admin");break;case"promote_to_member":c=Q.t("Change to Full Member");break;case"promote_to_admin":c=Q.t("Change to Admin");break;case"promote_to_owner":c=Q.t("Change to Owner");break;case"convert_to_guest":c=Q.t("Change to Guest");break;case"cant_convert_member_role":d=Q.t("Can\u2019t change account type");if(Object(U["isUltraRestricted"])(r))u=Q.t("{name} is a Single-Channel Guest on other workspaces in this organization, so their account type can only be changed at the org level.",{name:o});else if(Object(U["isGuest"])(r))u=Q.t("{name} is a Multi-Channel Guest on other workspaces in this organization, so their account type can only be changed at the org level.",{name:o});else{d=Q.t("Can\u2019t change to guest");u=Q.t("{name} is a Full Member on other workspaces in this organization, so their account type can only be changed at the org level.",{name:o})}c=v.a.createElement(z["d"],{tip:u,"data-qa":"tooltip-cant-convert-member-role",zIndex:"above_fs"},v.a.createElement("span",null,d));break;case"promote_to_mc_guest":c=Q.t("Change to Multi-Channel Guest");break;case"demote_to_sc_guest":c=Q.t("Change to Single-Channel Guest");break;case"transfer_ownership":c=Q.t("Transfer ownership");break;case"send_sso":c=Q.t("Send SSO binding email");break;case"disable_2fa":c=Q.t("Disable two-factor authentication");break;case"edit_member_profile":c=r.id===i.id?Q.t("Edit your info"):Q.t("Edit info");break;default:c="";break}return c}}]);return t}(h["PureComponent"]);J.displayName="MemberActionLabel";J.defaultProps=Y;var Z=function e(t,a){var n=a.target;return{currentUser:Object(D["b"])(t),targetUserName:Object(U["getPrefCompliantMemberName"])(t,n,true,true),targetIdpGroups:Object(q["getIdpGroupsForMember"])(t,n.id)}};var X=Object(g["connect"])(Z)(J);var $=a(54);var ee=a(20);var te=a(103);var ae=a(283);var ne=a(128);var re=a(40);var ie=a.n(re);var oe=a(19);var se=a(213);var le=a(661);var ce=a(151);var ue=a(88);var de=a(338);var pe=a(660);var fe=a(263);var me=a(35);var he=a.n(me);var ve=a(359);var ge=a(113);var be=a(285);var _e=a(188);var ye=a(930);var ke=new O["b"]("admin");var Oe={currentExpirationTs:m.a.number,onExpirationChange:m.a.func,clogger:m.a.object.isRequired};var we={currentExpirationTs:null,onExpirationChange:b["noop"]};var Ee="-1";var Ce=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedExpirationOption:null,selectedCustomExpiration:null};var n=e.currentExpirationTs;n&&(a.state.selectedExpirationOption={label:a.makeCurrentExpirationString(),value:String(n)});a.handleExpirationChange=a.handleExpirationChange.bind(a);a.handleDatePickerChange=a.handleDatePickerChange.bind(a);a.onClickExpiration=a.onClickExpiration.bind(a);return a}l()(t,[{key:"onClickExpiration",value:function e(){var t=this.props.clogger;t.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"ADMIN_ACTION_UPDATE_TIME_LIMIT"}}})}},{key:"makeCurrentExpirationString",value:function e(){var t=this.props.currentExpirationTs;if(!t)return null;var a=Object(ve["a"])(t,"{date}");return ke.t("Deactivate on {date}",{date:a})}},{key:"makeGuestExpirationTsFromDate",value:function e(t){t.setHours(23,59,59,0);return t.getTime()/1e3}},{key:"makeStandardExpirationTs",value:function e(){var t=this.props.currentExpirationTs;var a=this.state.selectedExpirationOption.value;var n=void 0;if("0"===a)n=0;else if(a===String(t))n=null;else{var r=new Date;var i=parseInt(a,10);r.setDate(r.getDate()+i);n=this.makeGuestExpirationTsFromDate(r)}return n}},{key:"makeCustomExpirationTs",value:function e(){var t=this.state.selectedCustomExpiration;var a=Object(ge["a"])(t,{parseFormat:"YYYY-MM-DD"});return this.makeGuestExpirationTsFromDate(a)}},{key:"handleExpirationChange",value:function e(t,a){var n=this;this.setState(function(){return{selectedExpirationOption:{value:t,label:a}}},function(){var e=t!==Ee?n.makeStandardExpirationTs():null;n.props.onExpirationChange(e)})}},{key:"handleDatePickerChange",value:function e(t){var a=this;var n=t.selectedDate;this.setState(function(){return{selectedCustomExpiration:n}},function(){var e=a.makeCustomExpirationTs();a.props.onExpirationChange(e)})}},{key:"maybeRenderDatePicker",value:function e(){var t=this;var a=this.state,n=a.selectedExpirationOption,i=a.selectedCustomExpiration;if(!n||n.value!==Ee)return null;var o=he()().add(1,"day").format("YYYY-MM-DD");var s=Object(ge["a"])(i,{parseFormat:"YYYY-MM-DD",returnMoment:true});var l=ke.t("Deactivate on {date}",{date:s.format("MMMM D, YYYY")});return v.a.createElement(_e["b"],{ariaHasPopup:true,position:"bottom",offsetX:-231,offsetY:-369,renderPopover:function e(a){return v.a.createElement(_e["a"],r()({modalBodyOpenClassName:"p-admin_member_table_dialog__ReactModal__Body--open"},a),v.a.createElement("div",{className:"p-admin_member_table__date_picker_wrapper"},v.a.createElement(ye["a"],{className:"p-admin_member_table__date_picker",selectedDate:i,onDateChange:function e(n){var r=n.selectedDate;a.onClose();t.handleDatePickerChange({selectedDate:r})},disableDatesBefore:o})))}},v.a.createElement(j["a"],{className:"p-admin_member_table__date_picker_trigger",ariaLabel:ke.t("Custom expiration date")},v.a.createElement(E["b"],{type:"calendar",className:"p-search_filter__calendar_icon margin_right_50"}),v.a.createElement("span",null,i?l:"")))}},{key:"render",value:function e(){var t=this.props.currentExpirationTs;var a=this.state.selectedExpirationOption;var n=[{label:ke.t("No limit"),value:"0"},{label:ke.t("7 days"),value:"7"},{label:ke.t("30 days"),value:"30"},{label:ke.t("60 days"),value:"60"},{label:ke.t("Custom"),value:Ee}];t&&n.push({label:this.makeCurrentExpirationString(),value:String(t)});return v.a.createElement(v.a.Fragment,null,v.a.createElement(ue["a"],{htmlFor:"guest_expiration",text:ke.rt('<span className="bold">Set a time limit</span> <span className="sk_dark_gray">(optional)</span>')},v.a.createElement(be["d"],{id:"guest_expiration",options:n,selectedOption:a,onChange:this.handleExpirationChange,value:a?a.value:null,isDisabled:false,onOpen:this.onClickExpiration})),this.maybeRenderDatePicker(),v.a.createElement("p",{className:"p-admin_member_table__caption"},ke.t("Guest accounts will expire on 11:59PM on the last day. We\u2019ll send you a message 2 days prior as a reminder.")))}}]);return t}(h["PureComponent"]);Ce.displayName="GuestExpirationInput";Ce.defaultProps=we;var je=function e(t){return{clogger:Object(P["a"])({state:t})}};var Se=Object(g["connect"])(je)(Ce);var Ie=new O["b"]("member_actions");var Te={action:m.a.oneOf(["activate_as_guest","convert_to_guest","promote_to_mc_guest","demote_to_sc_guest"]).isRequired,target:m.a.object.isRequired,showToast:m.a.func,closeModal:m.a.func,channels:m.a.array,isLoadingChannels:m.a.bool,isPaid:m.a.bool,isEnterprise:m.a.bool,unarchivedPublicAndPrivateChannels:m.a.array,promoteToMcGuest:m.a.func,demoteToScGuest:m.a.func,convertMemberToMcGuest:m.a.func,convertMemberToScGuest:m.a.func,loadChannels:m.a.func.isRequired,clogger:m.a.object};var Ne={action:"",target:{},showToast:_.a.noop,closeModal:_.a.noop,channels:null,isPaid:false,isEnterprise:false,unarchivedPublicAndPrivateChannels:[],promoteToMcGuest:_.a.noop,demoteToScGuest:_.a.noop,convertMemberToMcGuest:_.a.noop,convertMemberToScGuest:_.a.noop,loadChannels:_.a.noop,isLoadingChannels:false,clogger:{track:_.a.noop}};var Ae={growth_id:"GROWTH_PRICING",admin_id:"ADMIN_SITE_MANAGE_MEMBERS_ACTION",pricing_button:"pricing_button",activate_as_guest:"ADMIN_ACTION_ACTIVATE_AS_GUEST",convert_to_guest:"ADMIN_ACTION_DEMOTE_MEMBER_TO_GUEST",promote_to_mc_guest:"ADMIN_ACTION_PROMOTE_URA_TO_RA",demote_to_sc_guest:"ADMIN_ACTION_DEMOTE_RA_TO_URA",add_channel_for_mc_guest:"ADMIN_ACTION_ADD_RA_TO_CHANNEL",remove_channel_for_mc_guest:"ADMIN_ACTION_REMOVE_RA_FROM_CHANNEL",edit_channel_for_sc_guest:"ADMIN_ACTION_EDIT_URA_CHANNEL",edit_expiration_ts:"ADMIN_ACTION_CHOOSE_TIME_LIMIT_OPTION"};var Re="p-admin_member_table_dialog__ReactModal__Body--open";var Me=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={expirationTs:void 0,newChannelIds:[],convertToGuestStep:void 0,convertToGuestType:null,goButtonIsPending:false,shouldShowChannelPickerError:false};_.a.bindAll(a,["setInputRef","clogAdminActions","onExpirationChange","addHiddenChannelIds","getResultsForChannelsQuery","getPreselectedItems","onChannelPickerChange","onGoConvertGuestType","onGuestTypeChange","onGoConvertToGuest","onGoUpgrade","onCancelConvertToGuest","shouldShowChannelPickerError"]);"convert_to_guest"!==e.action&&"activate_as_guest"!==e.action||(a.state.convertToGuestStep=1);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props.target;this.props.loadChannels({memberId:t.id,isGuest:Object(U["isRestricted"])(t),isDeactivated:Object(U["isDeleted"])(t)})}},{key:"componentWillReceiveProps",value:function e(t){t.channels&&!this.props.channels&&this.setState(function(){return{newChannelIds:_.a.map(t.channels,"id")}})}},{key:"onExpirationChange",value:function e(t){this.setState(function(){return{expirationTs:t}})}},{key:"onChannelPickerChange",value:function e(t){var a=this;var n=_.a.map(t,"id");this.setState(function(){return{newChannelIds:n,shouldShowChannelPickerError:a.shouldShowChannelPickerError(n)}})}},{key:"onGoConvertGuestType",value:function e(){var t=this;var a=[];var n=this.props,r=n.action,i=n.target,o=n.showToast;var s=this.state.expirationTs;this.setState(function(){return{goButtonIsPending:true}});var l=this.inputList.getSelectedValue();l=_.a.chain(l).map("id").reject(function(e){return"0"===e}).value();if("promote_to_mc_guest"===r){l=this.addHiddenChannelIds(l);_.a.isEmpty(l)?this.setState(function(){return{goButtonIsPending:false}}):this.props.promoteToMcGuest({memberId:i.id,channelIdsToAdd:l,expirationTs:s}).then(function(){t.setState(function(){return{goButtonIsPending:false}});o(r);t.props.closeModal();a.push(r);s&&a.push("edit_expiration_ts");a.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});o(r,{isSuccessful:false});t.props.closeModal();throw e})}else"demote_to_sc_guest"!==r||_.a.isEmpty(l)?this.setState(function(){return{goButtonIsPending:false}}):this.props.demoteToScGuest({memberId:i.id,channelId:l[0],expirationTs:s}).then(function(){t.setState(function(){return{goButtonIsPending:false}});o(r);t.props.closeModal();a.push(r);s&&a.push("edit_expiration_ts");l.length&&a.push("edit_channel_for_sc_guest");a.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});o(r,{isSuccessful:false});t.props.closeModal();throw e})}},{key:"onGuestTypeChange",value:function e(t){t.persist();this.setState(function(){return{convertToGuestType:t.target.value}})}},{key:"onGoUpgrade",value:function e(){window.open("/pricing?ui_element=11&ui_step=33","_blank");this.clogAdminActions("admin_id","click","pricing_button");this.clogAdminActions("growth_id","click","pricing_button")}},{key:"onGoConvertToGuest",value:function e(){var t=this;var a=[];var n=this.props,r=n.target,i=n.showToast,o=n.action;var s=this.state,l=s.convertToGuestStep,c=s.convertToGuestType,u=s.expirationTs;if(1===l)this.setState(function(){return{convertToGuestStep:2}});else if(2===l){this.setState(function(){return{goButtonIsPending:true}});var d=this.inputList.getSelectedValue();d=_.a.chain(d).map("id").reject(function(e){return"0"===e}).value();if("multi_channel"===c){d=this.addHiddenChannelIds(d);_.a.isEmpty(d)?this.setState(function(){return{goButtonIsPending:false}}):this.props.convertMemberToMcGuest({memberId:r.id,expirationTs:u,channelIds:d}).then(function(){t.setState(function(){return{goButtonIsPending:false}});i("demote_to_mc_guest");t.props.closeModal();a.push(o);u&&a.push("edit_expiration_ts");d.length&&a.push("add_channel_for_mc_guest");a.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});i("demote_to_mc_guest",{isSuccessful:false});t.props.closeModal();throw e})}else"single_channel"!==c||_.a.isEmpty(d)?this.setState(function(){return{goButtonIsPending:false}}):this.props.convertMemberToScGuest({memberId:r.id,channelId:d[0],expirationTs:u}).then(function(){t.setState(function(){return{goButtonIsPending:true}});i("demote_to_sc_guest");t.props.closeModal();a.push(o);u&&a.push("edit_expiration_ts");d[0]&&a.push("edit_channel_for_sc_guest");a.map(function(e){return t.clogAdminActions("admin_id","update",e)})}).catch(function(e){t.setState(function(){return{goButtonIsPending:false}});i("demote_to_sc_guest",{isSuccessful:false});t.props.closeModal();throw e})}}},{key:"onCancelConvertToGuest",value:function e(){if(1===this.state.convertToGuestStep)return this.props.closeModal();return this.setState(function(){return{convertToGuestStep:1}})}},{key:"setInputRef",value:function e(t){this.inputList=t}},{key:"getPreselectedItems",value:function e(){var t=this.props,a=t.channels,n=t.action;var i=this.state.convertToGuestType;if(!a||!a.length||"demote_to_sc_guest"===n||"single_channel"===i)return[];return a.map(function(e){return r()({},e,{label:v.a.createElement(ce["a"],{channel:e}),preselected:true})})}},{key:"getResultsForChannelsQuery",value:function e(t){var a=this.props.channels;var n=a?_.a.map(a,"id"):[];if(!t){var i=this.props.unarchivedPublicAndPrivateChannels.map(function(e){return r()({},e,{label:v.a.createElement(ce["a"],{channel:e}),preselected:_.a.includes(n,e.id)})});return Promise.resolve({items:i,replace_all_items:true})}return Object(fe["a"])(t,{channels:{include_archived:false},groups:true,enterprise_channels:{remote_limit:96},tiered:true}).then(function(e){var t=e.map(function(e){var t=e.model_ob;return r()({},t,{label:v.a.createElement(ce["a"],{channel:t}),preselected:_.a.includes(n,t.id)})});return{items:t,replace_all_items:true}})}},{key:"addHiddenChannelIds",value:function e(t){var a=this.props.channels;if(!a||!a.length)return t;var n=_.a.filter(a,function(e){return e.isUnknown||e.isNonExistent});if(!n)return t;if(!!n&&n.length){n.map(function(e){return t.push(e.id)});return t}return t}},{key:"clogAdminActions",value:function e(t,a,n){var r=this.props.clogger;r.track(Ae[t],{contexts:{ui_context:{step:"admin_home",action:a,ui_element:Ae[n],ui_component:"dialog"}}})}},{key:"chooseDialogTitle",value:function e(){var t=this.state,a=t.convertToGuestStep,n=t.convertToGuestType;var r=this.props.action;if(2===a){if("multi_channel"===n){if("activate_as_guest"===r)return Ie.t("Activate as a Multi-Channel Guest");return Ie.t("Change to a Multi-Channel Guest")}if("single_channel"===n){if("activate_as_guest"===r)return Ie.t("Activate as a Single-Channel Guest");return Ie.t("Change to a Single-Channel Guest")}}if("activate_as_guest"===r)return Ie.t("Activate as a guest account");return Ie.t("Change to a guest account")}},{key:"shouldShowChannelPickerError",value:function e(t){var a=this.props.channels;var n=_.a.filter(a,function(e){return!e||e.isUnknown||e.isNonExistent});return t.length<1&&n.length<1}},{key:"shouldDisableGoButton",value:function e(){var t=this.state,a=t.goButtonIsPending,n=t.expirationTs,r=t.newChannelIds,i=t.convertToGuestStep,o=t.convertToGuestType;var s=this.props.channels;if(!_.a.isEmpty(s)&&"object"===("undefined"===typeof s?"undefined":ie()(s)))return false;var l=null===n||a||0===r.length;if(i){if(1===i)return!o;return 2===i&&l}return l}},{key:"renderConvertToGuestDialogStep",value:function e(){if(1===this.state.convertToGuestStep)return this.renderChooseGuestType();if(2===this.state.convertToGuestStep)return this.renderSetGuestInfo();return null}},{key:"renderSetGuestInfo",value:function e(){var t=this.props,a=t.action,n=t.target;var r=this.state.convertToGuestType;var i=Object(U["getMemberRealName"])(n);var o=void 0;"promote_to_mc_guest"===a?o=Ie.rt("Currently, <strong>{targetName}</strong> is in the channel below. You can remove or add any channels you\u2019d like. In the future, <strong>{targetName}</strong> will only be able to join channels by invitation.",{targetName:i}):"demote_to_sc_guest"===a?o=Ie.rt("Choose the channel <strong>{targetName}</strong> should be a member of.",{targetName:i}):Object(U["isRestricted"])(n)||"multi_channel"!==r&&"single_channel"!==r||(o=Ie.rt("Right now, <strong>{targetName}</strong> is a member of this workspace. Changing to a guest account will restrict the channels they can access.",{targetName:Object(U["getMemberRealName"])(n)}));return v.a.createElement(v.a.Fragment,null,v.a.createElement("p",null,o),this.renderChannelPicker(),v.a.createElement(Se,{currentExpirationTs:n.profile.guest_expiration_ts,onExpirationChange:this.onExpirationChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.action,n=t.target,r=t.channels,i=t.isLoadingChannels;var o=this.state,s=o.convertToGuestType,l=o.shouldShowChannelPickerError;var c=Object(U["getMemberRealName"])(n);var u=void 0;"promote_to_mc_guest"===a||"multi_channel"===s?u=Ie.t("{possessiveTargetName} channels",{possessiveTargetName:Object(O["m"])(Object(O["c"])(c))}):"demote_to_sc_guest"!==a&&"single_channel"!==s||(u=Ie.t("{possessiveTargetName} channel",{possessiveTargetName:Object(O["m"])(Object(O["c"])(c))}));var d=v.a.createElement(le["a"],{ref:this.setInputRef,single:"demote_to_sc_guest"===a||"single_channel"===s,items:this.getPreselectedItems(),dataPromise:this.getResultsForChannelsQuery,maxHeightOfList:150,onValueChange:this.onChannelPickerChange,placeholderText:Ie.t("Choose a channel"),preventScroll:"multi_channel"===s,setSelected:false});var p=null;if(("multi_channel"===s||"promote_to_mc_guest"===a)&&!!r&&r.length){var f=_.a.filter(r,function(e){return e.isUnknown||e.isNonExistent}).length;f&&(p=Object(U["isUltraRestricted"])(n)||1===f?Ie.t("Currently in {numPrivateChannels, plural, =1 {a private channel} other {# private channels}}",{numPrivateChannels:f,fallbackHash:"4f07954ed71ea0b29ffacd93f95c681f490fb1d8",fallbackHashNs:"admin"}):Ie.t("+{numPrivateChannels, plural, =1 {# other private channel} other {# other private channels}}",{numPrivateChannels:f}))}var m=k()("p-admin_member_table__edit_channels",{"p-admin_member_table__edit_channels--error":l});return v.a.createElement("div",{className:m},v.a.createElement(ue["a"],{text:u}),i?v.a.createElement("span",{"data-qa":"loading_channels_label"},Ie.t("Loading channels...")):d,p?v.a.createElement("span",{className:"c-hint","data-qa":"hidden_channels_note"},p):null,l?v.a.createElement(se["a"],{id:"guest_channel_picker_error",level:"error",type:"inline",className:"p-admin_member_table__edit_channels_error_label"},Ie.t("Each guest needs to be in at least one channel.")):null)}},{key:"renderChooseGuestType",value:function e(){var t=void 0;var a=this.props,n=a.action,r=a.target;var i=Object(U["getMemberRealName"])(r);var o=Object(O["c"])(i);t="activate_as_guest"===n?Ie.rt("Right now, <strong>{targetName}</strong> account for this workspace is deactivated. Activating their account as a guest will give them access to specific channels within the workspace.",{targetName:o}):Ie.rt("Right now, <strong>{targetName}</strong> is a member of this workspace. Changing to a guest account will restrict the channels they can access.",{targetName:Object(U["getMemberRealName"])(r)});var s="guest_type";var l=v.a.createElement("span",null,v.a.createElement("strong",null,Ie.t("Multi-Channel Guest")),v.a.createElement("div",{className:"sk_dark_gray"},Ie.t("Multi-Channel Guests are billed as regular members, and can be added to unlimited channels.")));var c=v.a.createElement("span",null,v.a.createElement("strong",null,Ie.t("Single-Channel Guest")),v.a.createElement("div",{className:"sk_dark_gray"},Ie.t("Single-Channel Guests are free. You can add up to 5 of them per paid member of your workspace.")));return v.a.createElement(v.a.Fragment,null,v.a.createElement("p",{className:"margin_bottom_200"},t),v.a.createElement(pe["a"],{field:s,legendText:Ie.t("Choose account type")},v.a.createElement(ue["a"],{text:l,htmlFor:s+"-1",type:"inline",cursor:"pointer"},v.a.createElement(de["a"],{id:s+"-1",name:s,value:"multi_channel",checked:"multi_channel"===this.state.convertToGuestType,onChange:this.onGuestTypeChange})),v.a.createElement(ue["a"],{text:c,htmlFor:s+"-2",type:"inline",cursor:"pointer"},v.a.createElement(de["a"],{id:s+"-2",name:s,value:"single_channel",checked:"single_channel"===this.state.convertToGuestType,onChange:this.onGuestTypeChange}))),v.a.createElement("p",{className:"p-admin_member_table__caption"},Ie.t("Guest accounts will expire on 11:59PM on the last day. We\u2019ll send you a message 2 days prior as a reminder.")))}},{key:"renderPaidFeatureDialog",value:function e(){return v.a.createElement(te["a"],{title:Ie.t("Guests are available for paid workspaces"),goButtonText:Ie.t("Learn more"),cancelText:Ie.t("Cancel"),onGo:this.onGoUpgrade,truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:Re,"data-qa":"convert_to_guest_upgrade_dialog"},v.a.createElement("p",{className:"margin_bottom_200"},Ie.rt("Your workspace is currently on our <strong>Free plan</strong>. Upgrading to our <strong>Standard plan</strong> will give you access to additional user management features:")),v.a.createElement("ul",null,v.a.createElement("li",null,Ie.rt("<strong>Multi-Channel Guests</strong> are paid users that can only access channels that they are invited to join.")),v.a.createElement("li",null,Ie.rt("<strong>Single-Channel Guests</strong> are free accounts that can only participate in a single channel."))))}},{key:"renderConvertToGuestDialog",value:function e(){var t=this.state,a=t.convertToGuestStep,n=t.goButtonIsPending;return v.a.createElement(te["a"],{title:this.chooseDialogTitle(),goButtonText:1===a?Ie.t("Next"):Ie.t("Save"),onCancel:this.onCancelConvertToGuest,onClose:this.props.closeModal,cancelText:1===a?Ie.t("Cancel"):Ie.t("Previous"),onGo:this.onGoConvertToGuest,goButtonIsPending:n,goButtonIsDisabled:this.shouldDisableGoButton(),truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:Re,footerText:"Step "+a+" of 2",shouldCloseOnGo:false,shouldCloseOnCancel:false},this.renderConvertToGuestDialogStep())}},{key:"renderConvertGuestTypeDialog",value:function e(){var t=this.props.action;var a=this.state.goButtonIsPending;return v.a.createElement(te["a"],{title:"promote_to_mc_guest"===t?Ie.t("Change to a Multi-Channel Guest"):Ie.t("Change to a Single-Channel Guest"),goButtonText:Ie.t("Save"),onGo:this.onGoConvertGuestType,goButtonIsPending:a,goButtonIsDisabled:this.shouldDisableGoButton(),truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:Re,shouldCloseOnGo:false},this.renderSetGuestInfo())}},{key:"render",value:function e(){var t=this.props,a=t.action,n=t.isPaid,r=t.isEnterprise;if(!n&&!r)return this.renderPaidFeatureDialog();if("promote_to_mc_guest"===a||"demote_to_sc_guest"===a)return this.renderConvertGuestTypeDialog();if("convert_to_guest"===a||"activate_as_guest"===a)return this.renderConvertToGuestDialog();return null}}]);return t}(h["PureComponent"]);Me.displayName="ChangeToGuestDialog";Me.defaultProps=Ne;var xe=function e(t,a){var n=a.target;return{isLoadingChannels:Object(ne["getIsLoadingChannels"])(t),channels:Object(ne["getChannelsById"])(t,n.id),isPaid:Object(G["isPaidTeam"])(Object(F["getCurrentTeam"])(t)),isEnterprise:Object(S["pageNeedsEnterprise"])(t),unarchivedPublicAndPrivateChannels:Object(oe["getUnarchivedPublicAndPrivateChannels"])(t),clogger:Object(P["a"])({state:t})}};var Pe=function e(t){return{promoteToMcGuest:function e(a){var n=a.memberId,r=a.channelIdsToAdd,i=a.channelIdsToRemove,o=a.expirationTs;return t(Object(ne["promoteToMcGuest"])({memberId:n,channelIdsToAdd:r,channelIdsToRemove:i,expirationTs:o}))},demoteToScGuest:function e(a){var n=a.memberId,r=a.channelId,i=a.expirationTs;return t(Object(ne["demoteToScGuest"])({memberId:n,channelId:r,expirationTs:i}))},convertMemberToMcGuest:function e(a){var n=a.memberId,r=a.channelIds,i=a.expirationTs;return t(Object(ne["convertMemberToMcGuest"])({memberId:n,channelIds:r,expirationTs:i}))},convertMemberToScGuest:function e(a){var n=a.memberId,r=a.channelId,i=a.expirationTs;return t(Object(ne["convertMemberToScGuest"])({memberId:n,channelId:r,expirationTs:i}))},closeModal:function e(){return t(Object(L["closeModal"])())},loadChannels:function e(a){var n=a.memberId,r=a.isGuest,i=a.isDeactivated;return t(Object(ne["loadChannels"])({memberId:n,isGuest:r,isDeactivated:i}))}}};var De=Object(g["connect"])(xe,Pe)(Me);var Fe=a(478);var Le=a(17);var Be=a(1112);var Ue=a(190);var qe=new O["b"]("admin");var Ge={loadChannels:m.a.func.isRequired,target:m.a.object.isRequired,team:m.a.object.isRequired,isPaid:m.a.bool,isEnterprise:m.a.bool,showToast:m.a.func,currentUser:m.a.object.isRequired,channels:m.a.array,isLoadingChannels:m.a.bool,unarchivedPublicAndPrivateChannels:m.a.array,formErrors:m.a.array,editMemberProfile:m.a.func,editGuestExpiration:m.a.func,addAndRemoveGuestChannels:m.a.func,editSingleChannelGuestChannel:m.a.func,clearMemberInfoFormErrors:m.a.func,closeModal:m.a.func.isRequired,targetUserName:m.a.string,clogger:m.a.object.isRequired};var He={loadChannels:_.a.noop,target:{},team:{},isPaid:false,isEnterprise:false,showToast:_.a.noop,currentUser:{},channels:null,unarchivedPublicAndPrivateChannels:[],formErrors:[],editMemberProfile:_.a.noop,editGuestExpiration:_.a.noop,addAndRemoveGuestChannels:_.a.noop,editSingleChannelGuestChannel:_.a.noop,clearMemberInfoFormErrors:_.a.noop,closeModal:_.a.noop,targetUserName:null,isLoadingChannels:false};var We=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=e.target;a.state={realName:Object(U["getMemberRealName"])(n),displayName:Object(U["getMemberProfileFieldDisplayName"])(n),email:n.profile.email,expirationTs:void 0,newChannelIds:[],goButtonIsPending:false,isEmailValidated:true,shouldShowChannelPickerError:false,isSpeedBumpEnabled:true};_.a.bindAll(a,["onRealNameChange","onDisplayNameChange","onEmailChange","onExpirationChange","getResultsForChannelsQuery","getPreselectedItems","getSpeedBumpBodyText","onChannelPickerChange","onClose","onSubmit","maybeRenderGuestChannelPicker","maybeRenderGuestExpirationField","renderRealNameField","renderDisplayNameField","renderEmailField","shouldDisableGoButton","shouldShowDialogSpeedBump","shouldShowChannelPickerError"]);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props.target;Object(U["isRestricted"])(t)&&this.props.loadChannels({memberId:t.id,isGuest:true})}},{key:"onRealNameChange",value:function e(t){this.props.clearMemberInfoFormErrors();var a=null;""===t&&(a=Object(Fe["a"])("name_invalid_name_required"));this.setState(function(){return{realName:t,realNameErrorText:a}})}},{key:"onDisplayNameChange",value:function e(t){this.props.clearMemberInfoFormErrors();this.setState(function(){return{displayName:t}})}},{key:"onEmailChange",value:function e(t){this.setState(function(){return{isSpeedBumpEnabled:true}});this.props.clearMemberInfoFormErrors();var a=Object(Be["a"])(t);var n=null;""===t?n=Object(Fe["a"])("name_invalid_name_required"):a||(n=Object(Fe["a"])("invalid_email"));this.setState(function(){return{email:t,emailErrorText:n}})}},{key:"onExpirationChange",value:function e(t){this.setState(function(){return{expirationTs:t}})}},{key:"onChannelPickerChange",value:function e(t){var a=this;var n=_.a.map(t,"id");this.setState(function(){return{newChannelIds:n,shouldShowChannelPickerError:a.shouldShowChannelPickerError(n)}})}},{key:"onClose",value:function e(){this.props.clearMemberInfoFormErrors()}},{key:"onSubmit",value:function e(){var t=this;this.props.clearMemberInfoFormErrors();this.setState(function(){return{goButtonIsPending:true}});var a=this.props.target;var n=this.state,r=n.realName,i=n.displayName,o=n.email;var s=[];var l=[];var c={};if(r!==a.profile.real_name){c.realName=r;l.push("ADMIN_ACTION_EDIT_FULL_NAME")}if(i!==a.profile.display_name){c.displayName=i;l.push("ADMIN_ACTION_EDIT_DISPLAYNAME")}if(o!==a.profile.email){c.email=o;l.push("ADMIN_ACTION_EDIT_EMAIL")}_.a.size(c)>0&&s.push(this.props.editMemberProfile({memberId:a.id,profile:c}));if(Object(U["isRestricted"])(a)){var u=this.props.channels;var d=this.state.newChannelIds;var p=_.a.chain(u).reject(function(e){return e.isUnknown||e.isNonExistent}).map("id").value();var f=Object(Le["b"])();if(_.a.xor(d,p).length)if(Object(U["isUltraRestricted"])(a))if(1===d.length){s.push(this.props.editSingleChannelGuestChannel({memberId:a.id,channelId:d[0]}));l.push("ADMIN_ACTION_EDIT_URA_CHANNEL")}else f.warn("Single-Channel Guests must remain in at exactly one channel.");else{var m=_.a.difference(d,p);var h=_.a.difference(p,d);var v=p.length+m.length-h.length;if(v>=1){s.push(this.props.addAndRemoveGuestChannels({memberId:a.id,channelIdsToAdd:_.a.compact(m),channelIdsToRemove:_.a.compact(h)}));m.length&&l.push("ADMIN_ACTION_ADD_RA_TO_CHANNEL");h.length&&l.push("ADMIN_ACTION_REMOVE_RA_FROM_CHANNEL")}else f.warn("Multi-Channel Guests must remain in at least one channel.")}var g=this.state.expirationTs;if(null!==g&&void 0!==g){s.push(this.props.editGuestExpiration({memberId:a.id,expirationTs:g}));l.push("ADMIN_ACTION_CHOOSE_TIME_LIMIT_OPTION")}}Promise.all(s).then(function(e){t.setState(function(){return{goButtonIsPending:false}});var a=void 0;!!e&&e.length&&!!e[0]&&e[0].formError&&(a=e[0].formError.error);var n=_.a.some(e,{isProfileFormValid:false});var r=t.props.clogger;if(n)if("email_taken"===a){var i=qe.t("That email address is being used by another account.",{fallbackHash:"b5a28911800f8de8e1dee7d81e697ee8615c0195",fallbackHashNs:"web_admin"});t.setState(function(){return{emailErrorText:i,isSpeedBumpEnabled:false}})}else t.setState(function(){return{isSpeedBumpEnabled:false}});else{t.onClose();t.props.closeModal();t.props.showToast("edit_member_profile",{isSuccessful:true});_.a.forEach(l,function(e){r.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"update",ui_element:e,ui_component:"dialog"}}})})}})}},{key:"getPreselectedItems",value:function e(){var t=this.props.channels;if(!t)return[];return t.map(function(e){return r()({},e,{label:v.a.createElement(ce["a"],{channel:e}),preselected:true})})}},{key:"getResultsForChannelsQuery",value:function e(t){var a=this.props.channels;var n=a?_.a.map(a,"id"):[];if(!t){var i=this.props.unarchivedPublicAndPrivateChannels.map(function(e){return r()({},e,{label:v.a.createElement(ce["a"],{channel:e}),preselected:_.a.includes(n,e.id)})});return Promise.resolve({items:i,replace_all_items:true})}return Object(fe["a"])(t,{channels:{include_archived:false},groups:true,enterprise_channels:{remote_limit:96},tiered:true}).then(function(e){var t=e.map(function(e){var t=e.model_ob;return r()({},t,{label:v.a.createElement(ce["a"],{channel:t}),preselected:_.a.includes(n,e.model_ob.id)})});return{items:t,replace_all_items:true}})}},{key:"getSpeedBumpBodyText",value:function e(){var t=this.props,a=t.currentUser,n=t.target,r=t.targetUserName;var i=[];i.push(qe.rt('<p class="p-admin_member_table__speedbump_header">Change email?</p>'));n.id===a.id?i.push(qe.rt('<p class="p-admin_member_table__speedbump_p">You are about to change your email address from <strong>{currentEmail}</strong> to <strong>{newEmail}</strong>.</p>',{currentEmail:_.a.escape(n.profile.email),newEmail:_.a.escape(this.state.email)})):i.push(qe.rt('<p class="p-admin_member_table__speedbump_p">You are about to change the email address for <strong>{memberName}</strong> from <strong>{currentEmail}</strong> to <strong>{newEmail}</strong>.</p>',{memberName:r,currentEmail:_.a.escape(n.profile.email),newEmail:_.a.escape(this.state.email)}));n.id===a.id?i.push(qe.rt('<p class="p-admin_member_table__speedbump_p">A confirmation email will be sent to your new address. The change will take effect when the new address is confirmed.</p>')):Object(U["isDeleted"])(n)?i.push(qe.rt('<p class="p-admin_member_table__speedbump_p">Because this account is disabled, the change will take effect immediately.</p>')):i.push(qe.rt('<p class="p-admin_member_table__speedbump_p">A notification email will be sent to the user at both the old and new address. The change will take effect immediately.</p>'));return i}},{key:"shouldShowDialogSpeedBump",value:function e(t){return"go"===t&&this.props.target.profile.email!==this.state.email}},{key:"shouldShowChannelPickerError",value:function e(t){var a=this.props.channels;var n=_.a.filter(a,function(e){return!e||e.isUnknown||e.isNonExistent});return t.length<1&&n.length<1}},{key:"shouldDisableGoButton",value:function e(){var t=this.state,a=t.expirationTs,n=t.emailErrorText,r=t.realNameErrorText,i=t.goButtonIsPending,o=t.shouldShowChannelPickerError;var s=o||null===a||i||!!r||!!n;return s}},{key:"maybeRenderGuestChannelPicker",value:function e(){var t=this.props,a=t.target,n=t.channels,r=t.isLoadingChannels;var i=this.state.shouldShowChannelPickerError;if(!Object(U["isRestricted"])(a))return null;var o=Object(U["getMemberRealName"])(a);var s=qe.t("{possessiveTargetName} channels",{possessiveTargetName:Object(O["m"])(Object(O["c"])(o))});Object(U["isUltraRestricted"])(a)&&(s=qe.t("{possessiveTargetName} channel",{possessiveTargetName:Object(O["m"])(Object(O["c"])(o))}));var l=v.a.createElement(le["a"],{single:Object(U["isUltraRestricted"])(a),items:this.getPreselectedItems(),dataPromise:this.getResultsForChannelsQuery,maxHeightOfList:150,onValueChange:this.onChannelPickerChange,placeholderText:qe.t("Choose a channel"),setSelected:false});var c=null;if(n){var u=_.a.filter(n,function(e){return e.isUnknown||e.isNonExistent}).length;u&&(c=Object(U["isUltraRestricted"])(a)?qe.t("Currently in {numPrivateChannels, plural, =1 {a private channel} other {# private channels}}",{numPrivateChannels:u}):qe.t("+{numPrivateChannels, plural, =1 {# other private channel} other {# other private channels}}",{numPrivateChannels:u}))}var d=k()("p-admin_member_table__edit_channels","p-admin_member_table__edit_channels--list_top",{"p-admin_member_table__edit_channels--error":i});return v.a.createElement("div",{className:d},v.a.createElement(ue["a"],{className:"p-admin_member_table__edit_profile_label",text:s}),r?qe.t("Loading channels..."):l,c?v.a.createElement("span",{className:"c-hint"},c):null,i?v.a.createElement(se["a"],{id:"guest_channel_picker_error",level:"error",type:"inline",className:"p-admin_member_table__edit_channels_error_label"},qe.t("Each guest needs to be in at least one channel.")):null)}},{key:"maybeRenderGuestExpirationField",value:function e(){var t=this.props.target;if(!Object(U["isRestricted"])(t))return null;return v.a.createElement(Se,{currentExpirationTs:t.profile.guest_expiration_ts,onExpirationChange:this.onExpirationChange})}},{key:"renderRealNameField",value:function e(){var t=this.props.formErrors;var a=this.state,n=a.realName,r=a.realNameErrorText;var i=null;var o=t.length&&_.a.find(t,{field:"real_name"});o&&(i=Object(Fe["a"])(Object(Fe["c"])(o.error)));return v.a.createElement(ue["a"],{htmlFor:"input_real_name",className:"p-admin_member_table__edit_profile_label",text:qe.t("Full name"),key:"label_real_name"},v.a.createElement(Ue["a"],{id:"input_real_name",name:"input_real_name",type:"text",className:"p-admin_member_table__edit_profile_input",value:n,onChange:this.onRealNameChange,maxCharacterLimit:80,errorLevel:"error",errorText:r||i,isRequired:true}))}},{key:"renderDisplayNameField",value:function e(){var t=this.props,a=t.team,n=t.formErrors;var r=this.state,i=r.displayName,o=r.displayNameErrorText;var s=!(Object(G["isSsoEnabled"])(a)&&false===a.prefs.sso_choose_username);var l=null;var c=n.length&&_.a.find(n,{field:"display_name"});c&&(l=Object(Fe["a"])(Object(Fe["c"])(c.error)));return v.a.createElement(ue["a"],{htmlFor:"input_display_name",className:"p-admin_member_table__edit_profile_label",text:qe.t("Display name"),key:"label_display_name",optional:true},v.a.createElement(Ue["a"],{id:"input_display_name",name:"input_display_name",type:"text",className:"p-admin_member_table__edit_profile_input",value:i,isDisabled:!s,onChange:this.onDisplayNameChange,maxCharacterLimit:80,errorLevel:"error",errorText:o||l}))}},{key:"renderEmailField",value:function e(){var t=this.props,a=t.isPaid,n=t.target,r=t.formErrors,i=t.isEnterprise;var o=this.state,s=o.email,l=o.emailErrorText;var c=null;var u=!!n.email_is_editable&&(a||i);var d=r.length&&_.a.find(r,{field:"email"});d&&(c=Object(Fe["a"])(Object(Fe["c"])(d.error)));return v.a.createElement(ue["a"],{htmlFor:"input_email",className:"p-admin_member_table__edit_profile_label",text:qe.t("Email"),key:"label_email"},v.a.createElement(Ue["a"],{id:"input_email",name:"input_email",type:"text",className:"p-admin_member_table__edit_profile_input",value:s,isDisabled:!u,onChange:this.onEmailChange,maxCharacterLimit:80,errorLevel:"error",errorText:l||c}))}},{key:"render",value:function e(){var t=this.props.target;var a=this.state,n=a.goButtonIsPending,r=a.isSpeedBumpEnabled;return v.a.createElement(te["a"],{title:qe.t("About {targetName}",{targetName:Object(O["m"])(Object(U["getMemberRealName"])(t))}),goButtonText:qe.t("Save"),onGo:this.onSubmit,onClose:this.onClose,goButtonIsPending:n,goButtonIsDisabled:this.shouldDisableGoButton(),overlayClassName:"p-admin_member_table__dialog_overlay",modalBodyOpenClassName:"p-admin_member_table_dialog__ReactModal__Body--open",shouldCloseOnGo:false,getShouldShowSpeedBump:this.shouldShowDialogSpeedBump,speedBumpCancelButtonText:qe.t("Cancel"),speedBumpContinueButtonText:qe.t("Save Changes"),speedBumpContinueButtonType:"primary",speedBumpBodyText:this.getSpeedBumpBodyText(),isSpeedBumpEnabled:r},v.a.createElement("p",null,qe.t("Joined on {date}.",{date:Object(ve["a"])(t.created,"{date}")})),this.renderRealNameField(),this.renderDisplayNameField(),this.renderEmailField(),this.maybeRenderGuestChannelPicker(),this.maybeRenderGuestExpirationField())}}]);return t}(h["PureComponent"]);We.displayName="EditMemberInfoDialog";We.defaultProps=He;var Ve=function e(t,a){var n=a.target,r=a.team;return{isPaid:Object(G["isPaidTeam"])(r),isEnterprise:Object(S["pageNeedsEnterprise"])(t),isLoadingChannels:Object(ne["getIsLoadingChannels"])(t),currentUser:Object(D["b"])(t),channels:Object(ne["getChannelsById"])(t,n.id),unarchivedPublicAndPrivateChannels:Object(oe["getUnarchivedPublicAndPrivateChannels"])(t),formErrors:Object(ne["getMemberInfoFormErrors"])(t),targetUserName:Object(U["getPrefCompliantMemberName"])(t,n,true,true),clogger:Object(P["a"])({state:t})}};var ze={loadChannels:ne["loadChannels"],editMemberProfile:ne["editMemberProfile"],editGuestExpiration:ne["editGuestExpiration"],addAndRemoveGuestChannels:ne["addAndRemoveGuestChannels"],clearMemberInfoFormErrors:ne["clearMemberInfoFormErrors"],closeModal:L["closeModal"],editSingleChannelGuestChannel:ne["editSingleChannelGuestChannel"]};var Qe=Object(g["connect"])(Ve,ze)(We);var Ke=a(463);var Ye=new O["b"]("admin");var Je={target:m.a.object.isRequired,showToast:m.a.func,submitDeactivateMember:m.a.func,closeModal:m.a.func,isEnterprise:m.a.bool,clogger:m.a.object.isRequired};var Ze={target:{},showToast:b["noop"],submitDeactivateMember:b["noop"],closeModal:b["noop"],isEnterprise:false};var Xe=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={goButtonIsPending:false};a.onGo=a.onGo.bind(a);return a}l()(t,[{key:"onGo",value:function e(){var t=this;var a=this.props,n=a.target,r=a.showToast,i=a.isEnterprise,o=a.clogger;this.setState(function(){return{goButtonIsPending:true}});var s=i?"remove":"deactivate";this.props.submitDeactivateMember({target:n}).then(function(){t.setState(function(){return{goButtonIsPending:false}});r(s);t.props.closeModal();o.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"update",ui_element:"ADMIN_ACTION_DEACTIVATE",ui_component:"dialog"}}})}).catch(function(){r(s,{isSuccessful:false})})}},{key:"render",value:function e(){var t=this.props,a=t.target,n=t.isEnterprise;var r=this.state.goButtonIsPending;var i=Object(O["m"])(Object(U["getMemberRealName"])(a));var o=null;var s=null;var l=void 0;if(n){s=Ye.t("Remove {targetName}?",{targetName:i});l=v.a.createElement("div",null,Ye.t("Removing a member will not remove their messages or files. Depending on the access settings for this workspace, this member may be able to rejoin or be invited to this join this workspace again at any time."))}else{s=Ye.t("Deactivate {targetName}?",{targetName:i});a.app_count>0&&(o=v.a.createElement("li",null,Ye.t("Apps or integrations set up by the member will be disabled.")));l=v.a.createElement("div",null,v.a.createElement("p",null,Ye.t("What happens when an account is deactivated?")),v.a.createElement("ul",null,v.a.createElement("li",null,Ye.t("The member will no longer be able to sign in to the workspace.")),o,v.a.createElement("li",null,Ye.t("The member's messages and files will still be accessible in Slack."))))}return v.a.createElement(te["a"],{title:s,goButtonText:n?Ye.t("Remove"):Ye.t("Deactivate"),goButtonType:"danger",goButtonIsPending:r,goButtonIsDisabled:r,shouldCloseOnGo:false,onGo:this.onGo,truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay"},l)}}]);return t}(h["PureComponent"]);Xe.displayName="DeactivateMemberDialog";Xe.defaultProps=Ze;var $e=function e(t){return{isEnterprise:Object(S["pageNeedsEnterprise"])(t),clogger:Object(P["a"])({state:t})}};var et={submitDeactivateMember:Ke["n"],closeModal:L["closeModal"]};var tt=Object(g["connect"])($e,et)(Xe);var at=a(170);var nt=a(473);var rt=a(1002);var it=new O["b"]("admin");var ot={target:m.a.object.isRequired,enterprise:m.a.object.isRequired,enterpriseURL:m.a.string};var st={target:{},enterprise:{},enterpriseURL:""};var lt=function(e){p()(t,e);function t(){o()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=this.props,a=t.target,n=t.enterprise,r=t.enterpriseURL;var i=Object(O["m"])(Object(O["c"])(Object(U["getMemberRealName"])(a)));var o=Object(rt["b"])(n);return v.a.createElement(te["a"],{title:it.t("This account can\u2019t be reactivated here"),goButtonText:it.t("Okay"),showCancelButton:false},v.a.createElement("p",null,it.rt("To reactivate {possessiveTargetName} account for <strong>{enterpriseName}</strong> you\u2019ll need to do so from the <a>Admin Dashboard</a>.",{possessiveTargetName:i,enterpriseName:o},function(e){var t=e.tag,a=e.text,n=e.key;if("a"!==t)return null;return v.a.createElement("a",{key:n,href:r+"/manage",target:"_blank",rel:"noopener noreferrer",className:"no_underline","data-clog-event":"ADMIN_SITE_MANAGE_MEMBERS_ACTION","data-clog-ui-element":"LINK_ENTERPRISE","data-clog-ui-action":"click","data-clog-ui-step":"ADMIN_HOME","data-clog-ui-component":"dialog"},a)})))}}]);return t}(h["PureComponent"]);lt.displayName="ActivateOrgMemberDialog";lt.defaultProps=st;var ct=function e(t){return{enterprise:Object(at["getEnterprise"])(t),enterpriseURL:Object(nt["a"])(t,Object(rt["a"])(Object(at["getEnterprise"])(t)))}};var ut=Object(g["connect"])(ct)(lt);var dt=new O["b"]("member_actions");var pt={team:m.a.object.isRequired,actor:m.a.object.isRequired,target:m.a.object.isRequired,onClick:m.a.func,onClose:m.a.func,actions:m.a.array,openModal:m.a.func,makeAdmin:m.a.func,makeRegular:m.a.func,updateOwnerStatus:m.a.func,disableTwoFactorAuth:m.a.func,sendSsoBindEmailToMember:m.a.func,enqueueToast:m.a.func,clogger:m.a.object.isRequired,isEnterprise:m.a.bool.isRequired};var ft={team:{},actor:{},target:{},onClick:_.a.noop,onClose:_.a.noop,actions:[],openModal:_.a.noop,makeAdmin:_.a.noop,isEnterprise:false,makeRegular:_.a.noop,updateOwnerStatus:_.a.noop,disableTwoFactorAuth:_.a.noop,sendSsoBindEmailToMember:_.a.noop,enqueueToast:_.a.noop};var mt="MENU_SEPARATOR";var ht=["activate","activate_as_guest","cant_reactivate_as_guest",mt,"edit_member_profile","disable_2fa","send_sso",mt,"transfer_ownership","promote_to_owner","demote_owner","promote_to_admin","demote_admin","convert_to_guest","promote_to_member","promote_to_mc_guest","demote_to_sc_guest","cant_convert_member_role",mt,"cant_convert_or_deactivate","deactivate"];var vt=["cant_deactivate","cant_convert_member_role","cant_reactivate_as_guest","cant_convert_or_deactivate"];var gt={activate:"ADMIN_ACTION_ACTIVATE_MEMBER",activate_as_guest:"ADMIN_ACTION_ACTIVATE_AS_GUEST",deactivate:"ADMIN_ACTION_DEACTIVATE",promote_to_admin:"ADMIN_ACTION_PROMOTE_MEMBER_TO_ADMIN",demote_admin:"ADMIN_ACTION_DEMOTE_ADMIN_TO_MEMBER",promote_to_member:"ADMIN_ACTION_PROMOTE_GUEST_TO_MEMBER",demote_owner:"ADMIN_ACTION_DEMOTE_OWNER_TO_ADMIN",promote_to_owner:"ADMIN_ACTION_PROMOTE_ADMIN_TO_OWNER",convert_to_guest:"ADMIN_ACTION_DEMOTE_MEMBER_TO_GUEST",promote_to_mc_guest:"ADMIN_ACTION_PROMOTE_URA_TO_RA",demote_to_sc_guest:"ADMIN_ACTION_DEMOTE_RA_TO_URA",disable_2fa:"ADMIN_ACTION_DISABLE_2FA",send_sso:"ADMIN_ACTION_SEND_SSO_EMAIL",edit_member_profile:"ADMIN_ACTION_EDIT_MEMBER_PROFILE",transfer_ownership:"ADMIN_ACTION_TRANSFER_OWNERSHIP"};var bt=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.a.bindAll(a,["clogAdminAction","renderActionMenu","renderMenuItem","showDialog","showToast"]);return a}l()(t,[{key:"onMenuItemSelect",value:function e(t){var a=this.props,n=a.target,r=a.isEnterprise;this.clogAdminAction("click",t,"menu");switch(t){case"activate":if(r&&Object(U["isOrgDeleted"])(n))return this.showDialog(t);return this.dispatchMemberActionAndShowToast(this.props.makeRegular,t);case"activate_as_guest":return this.showDialog(t);case"deactivate":return this.showDialog(t);case"promote_to_admin":return this.dispatchMemberActionAndShowToast(this.props.makeAdmin,t);case"demote_admin":case"promote_to_member":return this.dispatchMemberActionAndShowToast(this.props.makeRegular,t);case"demote_owner":case"promote_to_owner":return this.dispatchMemberActionAndShowToast(this.props.updateOwnerStatus,t);case"convert_to_guest":return this.showDialog(t);case"promote_to_mc_guest":return this.showDialog(t);case"demote_to_sc_guest":return this.showDialog(t);case"disable_2fa":return this.showDialog(t);case"send_sso":return this.dispatchMemberActionAndShowToast(this.props.sendSsoBindEmailToMember,t);case"edit_member_profile":return this.showDialog(t);default:return null}}},{key:"clogAdminAction",value:function e(t,a,n){var r=this.props.clogger;r.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:t,ui_element:gt[a],ui_component:n}}})}},{key:"dispatchMemberActionAndShowToast",value:function e(t,a){var n=this;var r=this.props.target;t({memberId:r.id,action:a}).then(function(){n.showToast(a);var e="disable_2fa"===a?"dialog":"menu";n.clogAdminAction("update",a,e)}).catch(function(e){n.showToast(a,{isSuccessful:false});throw e})}},{key:"showDialog",value:function e(t){switch(t){case"deactivate":this.props.openModal({element:this.renderDeactivateDialog()});break;case"activate":this.props.openModal({element:this.renderOrgActivateDialog()});break;case"activate_as_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"convert_to_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"promote_to_mc_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"demote_to_sc_guest":this.props.openModal({element:this.renderChangeToGuestDialog(t)});break;case"edit_member_profile":this.props.openModal({element:this.renderEditMemberInfoDialog()});break;case"disable_2fa":this.props.openModal({element:this.renderDisable2faDialog()});break;default:break}}},{key:"showToast",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isSuccessful:true};var n=a.isSuccessful;var r=this.props.target;var i=Object(O["m"])(Object(U["getMemberRealName"])(r));var o=Object(O["m"])(Object(O["c"])(Object(U["getMemberRealName"])(r)));var s="";switch(t){case"activate":s=n?dt.t("Reactivated {possessiveTargetName} account",{possessiveTargetName:o}):dt.t("Couldn\u2019t reactivate {possessiveTargetName} account",{possessiveTargetName:o});break;case"deactivate":s=n?dt.t("Deactivated {possessiveTargetName} account",{possessiveTargetName:o}):dt.t("Couldn\u2019t deactivate {possessiveTargetName} account",{possessiveTargetName:o});break;case"remove":s=n?dt.t("Removed {possessiveTargetName} account",{possessiveTargetName:o}):dt.t("Couldn\u2019t remove {possessiveTargetName} account",{possessiveTargetName:o});break;case"promote_to_admin":case"demote_owner":s=n?dt.t("{targetName} is now an admin",{targetName:i}):dt.t("Couldn\u2019t make {targetName} an admin",{targetName:i});break;case"demote_admin":case"promote_to_member":s=n?dt.t("{targetName} is now a member",{targetName:i}):dt.t("Couldn\u2019t make {targetName} a member",{targetName:i});break;case"promote_to_owner":s=n?dt.t("{targetName} is now an owner",{targetName:i}):dt.t("Couldn\u2019t make {targetName} an owner",{targetName:i});break;case"promote_to_mc_guest":case"demote_to_mc_guest":s=n?dt.t("{targetName} is now a Multi-Channel Guest",{targetName:i}):dt.t("Couldn\u2019t make {targetName} a Multi-Channel Guest",{targetName:i});break;case"demote_to_sc_guest":s=n?dt.t("{targetName} is now a Single-Channel Guest",{targetName:i}):dt.t("Couldn\u2019t make {targetName} a Single-Channel Guest",{targetName:i});break;case"disable_2fa":s=n?dt.t("Disabled two-factor authentication for {targetName}",{targetName:i}):dt.t("Couldn\u2019t disable two-factor authentication for {targetName}",{targetName:i});break;case"send_sso":s=n?dt.t("Sent an SSO email to {targetName}",{targetName:i}):dt.t("Couldn\u2019t send SSO email to {targetName}",{targetName:i});break;case"edit_member_profile":s=n?dt.t("Updated {possessiveTargetName} profile",{possessiveTargetName:o}):dt.t("Couldn\u2019t update {possessiveTargetName} profile",{possessiveTargetName:o});break;default:break}return this.props.enqueueToast({element:v.a.createElement(ae["b"],{position:"bottom-right",toastClasses:"p-admin_member_table__toast",shouldAutoFade:n},n?v.a.createElement(E["b"],{type:"check-circle-o-large",className:"sk_seafoam_green margin_right_50",inline:true}):v.a.createElement(E["b"],{type:"warning-filled",className:"sk_warning_red margin_right_75",inline:true}),v.a.createElement("span",null,s))})}},{key:"renderDeactivateDialog",value:function e(){return v.a.createElement(tt,{target:this.props.target,showToast:this.showToast})}},{key:"renderOrgActivateDialog",value:function e(){return v.a.createElement(ut,{target:this.props.target})}},{key:"renderChangeToGuestDialog",value:function e(t){return v.a.createElement(De,{action:t,target:this.props.target,showToast:this.showToast})}},{key:"renderDisable2faDialog",value:function e(){var t=this;var a=this.props.target;var n=function e(){t.dispatchMemberActionAndShowToast(t.props.disableTwoFactorAuth,"disable_2fa")};return v.a.createElement(te["a"],{title:dt.t("Disable two-factor authentication?"),goButtonText:dt.t("Disable 2FA"),onGo:n,truncateTitle:false,overlayClassName:"p-admin_member_table__dialog_overlay"},v.a.createElement("p",null,dt.rt("<b>{targetName}</b> will no longer need access to their phone to sign in to Slack. Note that admins can\u2019t re-enable 2FA for any members other than themselves.",{targetName:Object(O["m"])(Object(U["getMemberRealName"])(a))})))}},{key:"renderEditMemberInfoDialog",value:function e(){var t=this.props,a=t.target,n=t.team;return v.a.createElement(Qe,{target:a,team:n,showToast:this.showToast})}},{key:"renderDisabledMenuButton",value:function e(){var t=this.props,a=t.actor,n=t.target;var r=void 0;r=!Object(U["isOwner"])(a)&&Object(U["isAdmin"])(n)?dt.t("You\u2019ll need to ask a Workspace Owner to edit this account."):dt.t("There aren\u2019t any actions for you to take on {targetName}",{targetName:Object(U["getMemberRealName"])(n)});return v.a.createElement(z["d"],{tip:r},v.a.createElement(ee["c"],{className:"p-admin_member_table__menu_button p-admin_member_table__menu_button--disabled",disabled:true},v.a.createElement(E["b"],{type:"ellipsis"})))}},{key:"renderMenuItem",value:function e(t,a){var n=this;if(t===mt)return v.a.createElement($["d"],{key:"separator_"+a});var r=this.props,i=r.team,o=r.target;var s="transfer_ownership"===t?"/admin/transfer":null;var l="deactivate"===t;var c=_.a.includes(vt,t);var u=k()("no_underline",{"p-admin_member_table__menu_item--disabled":c});var d=v.a.createElement(X,{action:t,team:i,target:o});return v.a.createElement($["b"],{key:o.id,label:d,onSelected:function e(){return n.onMenuItemSelect(t)},href:s,className:u,danger:l,disabled:c,"data-qa":t})}},{key:"renderActionMenu",value:function e(t){var a=this;var n=[];_.a.map(ht,function(e){_.a.includes(a.props.actions,e)&&n.push(e);e===mt&&_.a.last(n)!==mt&&n.push(e)});n=_.a.chain(n).dropWhile(function(e){return e===mt}).dropRightWhile(function(e){return e===mt}).value();return v.a.createElement($["f"],r()({},t,{width:"auto"}),_.a.map(n,this.renderMenuItem))}},{key:"render",value:function e(){var t=this.props,a=t.target,n=t.actions,r=t.onClick,i=t.onClose;if(0===n.length||0===_.a.difference(n,vt).length)return this.renderDisabledMenuButton();return v.a.createElement("div",null,v.a.createElement($["e"],{renderMenu:this.renderActionMenu,position:"bottom-right",offsetX:20,onClick:r,onClose:i},v.a.createElement(ee["c"],{className:"p-admin_member_table__menu_button","aria-label":dt.t("Actions for {targetName}",{targetName:Object(O["m"])(Object(U["getMemberRealName"])(a))})},v.a.createElement(E["b"],{type:"ellipsis"}))))}}]);return t}(h["PureComponent"]);bt.displayName="AdminMemberTableRowMenu";bt.defaultProps=ft;var _t=function e(t,a){var n=a.target;return{isEnterprise:Object(S["pageNeedsEnterprise"])(t),team:Object(F["getCurrentTeam"])(t),actor:Object(D["b"])(t),actions:Object(ne["getActionsForMember"])(t,n),clogger:Object(P["a"])({state:t})}};var yt={openModal:L["openModal"],makeAdmin:ne["makeAdmin"],makeRegular:ne["makeRegular"],updateOwnerStatus:ne["updateOwnerStatus"],disableTwoFactorAuth:ne["disableTwoFactorAuth"],sendSsoBindEmailToMember:ne["sendSsoBindEmailToMember"],enqueueToast:B["enqueueToast"]};var kt=Object(g["connect"])(_t,yt,null,{withRef:true})(bt);var Ot=a(26);var wt=a(1328);var Et=new O["b"]("admin");var Ct={currentUser:m.a.object.isRequired,members:m.a.array.isRequired,team:m.a.object,sortBy:m.a.string,sortDir:m.a.string,filter:m.a.object,filterCount:m.a.number,isFiltered:m.a.bool,isEnterprise:m.a.bool,headerItemOnClick:m.a.func,sortMembers:m.a.func,fetchNewPage:m.a.func,resetMemberFilters:m.a.func,numTotalResults:m.a.number,searchQuery:m.a.string,clogger:m.a.object.isRequired,isLoadingNewPage:m.a.bool,isLoadingNewQuery:m.a.bool};var jt={currentUser:{},members:[],team:{},sortBy:"real_name",sortDir:"asc",filter:{},filterCount:0,isFiltered:true,isEnterprise:false,headerItemOnClick:b["noop"],sortMembers:b["noop"],fetchNewPage:b["noop"],resetMemberFilters:b["noop"],numTotalResults:null,isLoadingNewPage:false,isLoadingNewQuery:false,searchQuery:""};var St="asc";var It="desc";var Tt="arrow-down-medium";var Nt="arrow-up-medium";var At={};At[St]=Tt;At[It]=Nt;var Rt=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={rowListItems:[],height:null,offset:null,activeRowId:null};a.tableViewControllerRef=null;Object(b["bindAll"])(a,["onClickAllFiltersBtn","headerItemOnClick","refreshTableHeight","refreshTableHeightPolitely","onRequestNextPage","makeRow","menuTriggerOnClick","menuOnClose","shouldShowFilterWarningRow"]);var n=a.props.isEnterprise;a.headerData=[{id:"real_name",value:Et.t("Name"),sortable:true,className:"p-admin_member_table__header--name"},{id:"accountType",value:Et.t("Account type"),sortable:false,className:"p-admin_member_table__header--account_type"},{id:"billingStatus",value:n?Et.t("Account status"):Et.t("Billing status"),sortable:false,className:"p-admin_member_table__header--status"},{id:"authentication",value:Et.t("Authentication"),sortable:false,className:"p-admin_member_table__header--authentication"},{id:"actions",value:null,sortable:false,className:"p-admin_member_table__header--actions",noHover:true}];a.menuRefs={};a.rowCounter=0;var r=a.headerData.length;a.setMenuRef=function(e){var t=a.rowCounter*r;var n=t+r;var i="row_"+a.rowCounter+"_item"+n;a.rowCounter+=1;a.menuRefs[i]=e?e.getWrappedInstance():null};return a}l()(t,[{key:"componentWillMount",value:function e(){var t=this.props.members;t.length&&this.makeRows()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeMakeNewRows(t,a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely);this.menuRefCounter=0}},{key:"onRequestNextPage",value:function e(t){var a=this.props,n=a.members,r=a.numTotalResults;if(r&&n.length>=r)return;this.props.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onClickAllFiltersBtn",value:function e(){var t=this.props.clogger;this.props.resetMemberFilters({deactivated:true,orgDeactivated:this.props.isEnterprise});window.scrollTo(0,0);t.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"ADMIN_BTN_RESET_FILTERS",ui_component:"table"}}})}},{key:"sortableHeaderItemOnClick",value:function e(t){var a=this.props,n=a.sortBy,r=a.sortDir;var i=n;var o=r;if(t.id===n)o=r&&r!==St?St:It;else{i=t.id;o=St}this.props.sortMembers({sortBy:i,sortDir:o})}},{key:"headerItemOnClick",value:function e(t){var a=this.props.clogger;if(t.sortable){this.sortableHeaderItemOnClick(t);a.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{sort_by:t.id,contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"admin_sort_by"}}})}return this.props.headerItemOnClick()}},{key:"menuTriggerOnClick",value:function e(t){this.setState(function(){return{activeRowId:t}});var a=this.props.clogger;a.track("ADMIN_SITE_MANAGE_MEMBERS_ACTION",{contexts:{ui_context:{step:"admin_home",action:"click",ui_element:"admin_btn_row_menu"}}})}},{key:"menuOnClose",value:function e(){this.setState(function(){return{activeRowId:null}})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var n=a.getBoundingClientRect();var r=0;var i=t-(n&&n.top);var o=64;var s=Math.max(o,i-r);var l={height:s+"px"};this.setState(l)}},{key:"makeHeaders",value:function e(t){var a=this;var n=[];t.forEach(function(e){n.push(a.makeHeader(e))});return n}},{key:"makeHeader",value:function e(t){var a=this.props.sortBy;var n=r()({},t,{onClick:this.headerItemOnClick});t.sortable&&(n.iconType=this.determineSortIcon(t.id,t));a===t.id&&(n.className=k()(n.className,"p-admin_member_table__row_header--active"));return n}},{key:"makeRowTemplate",value:function e(){var t=this;var a=this.props.currentUser;return{items:[{value:function e(t){var n=Object(U["getMemberRealName"])(t);var r=Object(U["getMemberProfileFieldDisplayName"])(t);var i=t.profile.email;var o=k()("p-admin_member_table__row__real_name",{normal:!!t.deleted});var s=k()("p-admin_member_table__row__display_name",{hidden:!r});var l=t.id===a.id;return v.a.createElement("div",{className:"p-admin_member_table__row__name"},v.a.createElement(C["b"],{size:36,userId:t.id,teamId:t.team_id,className:"p-admin_member_table__row__avatar",showBadge:false,isInteractive:false}),v.a.createElement("div",{className:"display_flex flex_direction_column overflow_ellipsis"},v.a.createElement("div",{className:o},n,l?Et.t(" (you)"):null),v.a.createElement("div",{className:"p-admin_member_table__row__display_name_and_email"},v.a.createElement("div",{className:s},v.a.createElement("span",null,r),v.a.createElement("span",{className:"p-admin_member_table__row__name_divider"})),v.a.createElement("div",{className:"p-admin_member_table__row__email"},i))))},className:"p-admin_member_table_row_item--name"},{value:function e(t){var a=null;if(Object(U["isRestricted"])(t)&&!Object(U["isDeleted"])(t)&&t.profile.guest_expiration_ts){var n=Object(w["a"])(t.profile.guest_expiration_ts,{omitTime:true,dateFormat:"MMM D, YYYY"});a=v.a.createElement("span",{className:"p_admin_member_table__guest_expiration"},Et.t("Deactivate on {date}",{date:n}))}return v.a.createElement(v.a.Fragment,null,v.a.createElement(M,{member:t}),a)},className:"p-admin_member_table_row_item--account_type"},{value:function e(a){var n=void 0;var r=t.props.isEnterprise;var i=Object(U["isOrgDeleted"])(a);n=r&&a.deleted&&!i?Et.t("Removed"):r&&a.deleted&&i?Et.t("Deactivated"):a.deleted?Et.t("Deactivated"):a.is_pending?Et.t("Invited"):!r&&a.is_inactive?Et.t("Inactive"):r?Et.t("Enabled"):Et.t("Active");return v.a.createElement("div",null,n)},className:"p-admin_member_table_row_item--status"},{value:function e(t){var a=void 0;a=t.deleted?"minus":t.has_sso_token&&t.two_factor_auth_enabled?Et.t("SSO + 2FA"):t.has_sso_token?Et.t("SSO"):t.two_factor_auth_enabled?Et.t("2FA"):Et.t("Default");var n=k()({hidden:"minus"===a});var r=k()({hidden:"minus"!==a});return v.a.createElement("div",null,v.a.createElement("div",{className:n},a),v.a.createElement(E["b"],{type:a,className:r}))},className:"p-admin_member_table_row_item--authentication"},{value:function e(a,n){return v.a.createElement(kt,{ref:t.setMenuRef,target:a,team:t.props.team,onClick:function e(){return t.menuTriggerOnClick(n)},onClose:t.menuOnClose})},className:"p-admin_member_table_row_item--actions"}]}}},{key:"determineSortIcon",value:function e(t){var a=this.props,n=a.sortBy,r=a.sortDir;if(t!==n)return;var i=r===St?Tt:Nt;return i}},{key:"makeFilterWarningRowTemplate",value:function e(){var t=this;return{items:[{value:function e(){var a=Et.rt("<b>Didn\u2019t find what you\u2019re looking for?</b> Some members may be hidden because of the filters you\u2019ve selected.");return v.a.createElement("div",{className:"p-admin_member_table__filter_row__item"},v.a.createElement("div",{className:"p-admin_member_table__filter_row__avatar"},v.a.createElement(E["b"],{type:"user_groups",className:"p-admin_member_table__filter_row__avatar_icon"})),v.a.createElement("p",{className:"no_margin"},a,v.a.createElement(j["a"],{onClick:t.onClickAllFiltersBtn,className:"p-admin_member_table__filter_row__btn"},Et.t("Show all members",{fallbackHash:"354b26f6624a4b4b332fb0bcc9fc6f12e7536d81"}))))},className:"p-admin_member_table__filter_row"}]}}},{key:"makeNoSearchResultsRowTemplate",value:function e(){var t=this;return{items:[{value:function e(){return v.a.createElement("div",null,Et.rt("No results matching <b>{searchQuery}</b>.",{searchQuery:t.props.searchQuery}))},className:"p-admin_member_table__search_row"}]}}},{key:"makeRow",value:function e(t,a,n){var r=k()({"p-admin_member_table__row--deactivated":t.deleted,"p-admin_member_table__row--active":this.state.activeRowId===n});var i={id:"row_"+n,items:[],className:r};if(!a||!a.items)return[];a.items.forEach(function(e,a){var r={value:e.value(t),id:"row_"+n+"_item"+a};if(e.className){r.className=e.className;"p-admin_member_table_row_item--actions"===e.className&&(r.value=e.value(t,n))}i.items.push(r)});return i}},{key:"makeRows",value:function e(t){var a=this;var n=[];var r=t||0;var i=this.props.members;var o={rowListItems:n};i&&i.length&&i.forEach(function(e){n.push(a.makeRow(e,a.makeRowTemplate(),r));r+=1});if(this.shouldShowFilterWarningRow()){n.push(this.makeRow({},this.makeFilterWarningRowTemplate(),r));r+=1}if(this.shouldShowNoSearchResultsRow()){n.push(this.makeRow({},this.makeNoSearchResultsRowTemplate(),r));r+=1}this.setState(o)}},{key:"maybeMakeNewRows",value:function e(t,a){var n=this.props.members;var r=this.state,i=r.offset,o=r.activeRowId;a.activeRowId!==o&&this.makeRows();t.members!==n&&this.makeRows(i)}},{key:"shouldShowFilterWarningRow",value:function e(){var t=this.props,a=t.filter,n=t.filterCount,r=t.isFiltered,i=t.isEnterprise,o=t.isLoadingNewQuery;if(o)return false;if(!r)return true;if(i&&2===n&&a.billingStatus.deactivated&&a.billingStatus.orgDeactivated)return false;if(!i&&1===n&&a.billingStatus.deactivated)return false;return true}},{key:"shouldShowNoSearchResultsRow",value:function e(){var t=this.props,a=t.filter,n=t.filterCount,r=t.isEnterprise,i=t.numTotalResults,o=t.isLoadingNewQuery;if(r)return 2===n&&a.billingStatus.deactivated&&a.billingStatus.orgDeactivated&&!i&&!o;return 1===n&&a.billingStatus.deactivated&&!i&&!o}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.isLoadingNewPage,r=a.isLoadingNewQuery;var i=this.state,o=i.height,s=i.rowListItems,l=i.offset;var c=!l||r;var u=n||r;return v.a.createElement("div",{className:"p-admin_member_table","data-qa":"admin_member_table"},v.a.createElement(x["a"],{headers:this.makeHeaders(this.headerData),headerItemOnClick:this.headerItemOnClick,rows:s,height:o,onRequestNextPage:this.onRequestNextPage,newQuery:c,isLoading:u,ref:function e(a){t.tableViewControllerRef=a},rowClassName:"p-admin_member_table__row",rowHeaderItemClassName:"p-admin_member_table__row_header",useKeyboardNavigableTable:true}))}}]);return t}(h["PureComponent"]);Rt.displayName="AdminMemberTable";Rt.defaultProps=jt;function Mt(e){return{currentUser:Object(Ot["getCurrentMember"])(e),sortDir:Object(ne["getSortDirection"])(e),sortBy:Object(ne["getSortBy"])(e),members:Object(ne["getMembers"])(e),filter:Object(ne["getFilter"])(e),filterCount:Object(ne["getFilterCount"])(e),isFiltered:Object(ne["getIsFiltered"])(e),isEnterprise:Object(S["pageNeedsEnterprise"])(e),numTotalResults:Object(ne["getNumTotalResults"])(e),isLoadingNewPage:Object(ne["getIsLoadingNewPage"])(e),isLoadingNewQuery:Object(ne["getIsLoadingNewQuery"])(e),searchQuery:Object(ne["getSearchQuery"])(e),clogger:Object(P["a"])({state:e})}}var xt=function e(t){return{sortMembers:function e(a){return t(Object(ne["sortMembers"])(a))},fetchNewPage:function e(){return t(Object(ne["fetchNewPage"])())},resetMemberFilters:function e(a){return t(Object(ne["resetMemberFilters"])(a))}}};var Pt=t["a"]=Object(g["connect"])(Mt,xt)(Rt)},function(e,t,a){"use strict";var n=a(14);var r=a(142);var i=a(1125);var o=a(3);var s=a.n(o);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(1);var g=a.n(v);var b=a(15);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(2);var w=a(10);var E=a(452);var C=a(159);var j=a(118);var S=a(20);var I=a(1126);var T=new w["b"]("pricing_calculator");var N={planIsYearly:k.a.bool.isRequired,planCostPerTerm:k.a.number.isRequired,planCurrency:k.a.string.isRequired,teamName:k.a.string,numInactiveMembers:k.a.number.isRequired,isZeroActiveMembers:k.a.bool.isRequired,totalMembers:k.a.number.isRequired,paidSeats:k.a.number.isRequired,totalCost:k.a.number.isRequired,totalCostWithTax:k.a.number.isRequired,totalRecurringTax:k.a.number.isRequired,tax:k.a.shape({value:k.a.number,type:k.a.string}),featureCheckoutFlowTranslations:k.a.bool};var A={tax:null,teamName:"",featureCheckoutFlowTranslations:false};var R=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderRow",value:function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=_()("p-pricing_calculator__table_row","p-pricing_calculator__table_row--"+n.type);return g.a.createElement("div",{className:r},g.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--key"},t),g.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--value"},a))}},{key:"renderSubtotalRow",value:function e(){var t=this.props,a=t.planIsYearly,n=t.planCostPerTerm,r=t.paidSeats,i=t.numInactiveMembers,o=t.isZeroActiveMembers,s=t.totalMembers,l=t.totalCost,c=t.teamName,u=t.planCurrency,d=t.featureCheckoutFlowTranslations;var p=void 0;o?p=T.rt("Your team hasn\u2019t been especially active on Slack lately. We\u2019ll only charge you for one member today, but as your team becomes active that could change. <a>Learn about billing</a>",null,function(e){var t=e.text,a=e.key;return g.a.createElement("a",{key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)}):i&&(p=T.rt("{teamName} has {totalMembers, plural, =1 {# member} other {# members}}, but {numInactiveMembers, plural, =1 {# isn\u2019t} other {# aren\u2019t}} actively using Slack. We won\u2019t charge you for {numInactiveMembers, plural, =1 {them} other {them}}, as part of our <a>Fair Billing policy</a>.",{teamName:c,totalMembers:s,numInactiveMembers:i,fallbackHash:"dbc00b53e0783bd19d07fb7811c83b75647ee285"},function(e){var t=e.text,a=e.key;return g.a.createElement("a",{key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)}));var f=g.a.createElement("div",null,g.a.createElement(I["a"],{planIsYearly:a,billedMembers:r,numInactiveMembers:i,formattedPlanCost:Object(E["a"])(n,u),featureCheckoutFlowTranslations:d}),p&&g.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},p));var m=Object(E["a"])(l,u);return this.renderRow(f,m,{type:"subtotal"})}},{key:"renderTaxRow",value:function e(){var t=this.props,a=t.tax,n=t.totalRecurringTax,r=t.planCurrency;var i=void 0;var o=void 0;if(a){switch(a.type){case"vat":i=T.t("Estimated VAT",{fallbackHash:"dbbd5280272ac77ded46312841ade3c45ec237e7"});break;case"sales_tax":i=T.t("Estimated sales tax");break;default:i=T.t("Estimated tax");break}o=Object(E["a"])(n,r)}else{i=T.t("Tax");o=T.t("Applied at checkout")}return this.renderRow(i,o,{type:"tax"})}},{key:"renderTotalRow",value:function e(){var t=this.props,a=t.planCurrency,n=t.totalCostWithTax,r=t.planIsYearly;var i=void 0;var o=void 0;if(r){i=T.t("Yearly payment");o=T.rt("Your yearly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var t=e.text,a=e.key;return g.a.createElement("a",{key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)})}else{i=T.t("Monthly payment");o=T.rt("Your monthly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var t=e.text,a=e.key;return g.a.createElement("a",{key:a,className:"bold",target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)})}var s=g.a.createElement("div",null,i,g.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},o));var l=Object(E["a"])(n,a)+" "+a;return this.renderRow(s,l,{type:"total"})}},{key:"render",value:function e(){return g.a.createElement("div",{className:"p-pricing_calculator__table"},this.renderSubtotalRow(),this.renderTaxRow(),this.renderTotalRow())}}]);return t}(v["PureComponent"]);R.displayName="PricingCalculatorTable";R.defaultProps=A;var M=R;var x=Object(C["a"])("feature_checkout_flow_translations")(R);var P=a(1952);var D=new w["b"]("pricing_calculator");var F={isUserRestricted:k.a.bool,title:k.a.string,showHeader:k.a.bool,headerBackgroundColor:k.a.string,yearlyPlanCostPerTerm:k.a.number,monthlyPlanCostPerTerm:k.a.number,planLevel:k.a.string.isRequired,planIsYearly:k.a.bool,numMonthsPerPlan:k.a.number,planCostPerTerm:k.a.number,planCurrency:k.a.string,numInactiveMembers:k.a.number,isZeroActiveMembers:k.a.bool,totalMembers:k.a.number,paidSeats:k.a.number,totalCost:k.a.number,totalCostWithTax:k.a.number,totalRecurringTax:k.a.number,teamName:k.a.string,tax:k.a.object,teamCredits:k.a.number,showSubmitButton:k.a.bool,submitButtonText:k.a.string,onSubmit:k.a.func,display:k.a.oneOf(["boxed","inline"]),loadPlansAndCostData:k.a.func,switchTerms:k.a.func,switchCurrency:k.a.func,updatePlanLevel:k.a.func,isPlansAndCostDataLoaded:k.a.bool,featureCheckoutFlowTranslations:k.a.bool};var L={isUserRestricted:false,title:"",showHeader:true,headerBackgroundColor:"sk_fill_blue",yearlyPlanCostPerTerm:0,monthlyPlanCostPerTerm:0,planIsYearly:false,numMonthsPerPlan:1,planCostPerTerm:0,planCurrency:"USD",numInactiveMembers:0,isZeroActiveMembers:true,totalMembers:0,paidSeats:0,totalCost:0,totalCostWithTax:0,totalRecurringTax:0,teamName:"",tax:null,teamCredits:0,showSubmitButton:true,submitButtonText:null,onSubmit:O["noop"],display:"inline",loadPlansAndCostData:O["noop"],switchTerms:O["noop"],switchCurrency:O["noop"],updatePlanLevel:O["noop"],isPlansAndCostDataLoaded:false,featureCheckoutFlowTranslations:false};var B=function(e){h()(t,e);function t(e){c()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={submitButtonIsPending:false};Object(O["bindAll"])(a,["switchCurrency","handleSubmit","switchtoYearly","switchToMonthly"]);return a}d()(t,[{key:"componentDidMount",value:function e(){if(!this.props.isPlansAndCostDataLoaded){this.props.updatePlanLevel(this.props.planLevel);this.props.loadPlansAndCostData({isFinalReview:false})}}},{key:"switchtoYearly",value:function e(){this.props.switchTerms("yearly")}},{key:"switchToMonthly",value:function e(){this.props.switchTerms("monthly")}},{key:"switchCurrency",value:function e(t){this.props.switchCurrency(t.target.value)}},{key:"handleSubmit",value:function e(){var t=this;this.setState(function(e){return s()({},e,{submitButtonIsPending:true})},function(){try{t.props.onSubmit()}catch(e){t.setState(function(e){return s()({},e,{submitButtonIsPending:false})})}})}},{key:"renderHeader",value:function e(){var t=this.props,a=t.title,n=t.headerBackgroundColor;if(!a)return null;var r=_()("p-pricing_calculator__header","p-pricing_calculator__header--"+n);return g.a.createElement("h3",{className:r,"data-qa":"pricing_calculator_header"},a)}},{key:"renderTermsToggle",value:function e(){var t=this.props,a=t.yearlyPlanCostPerTerm,n=t.monthlyPlanCostPerTerm,r=t.planIsYearly,i=t.planCurrency,o=t.featureCheckoutFlowTranslations;if(!o)return null;var s=Object(E["a"])(a,i);var l=Object(E["a"])(n,i);var c=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":r});var u=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":!r});return g.a.createElement("div",{className:"p-pricing_calculator__terms_toggle_container"},g.a.createElement(S["c"],{onClick:this.switchtoYearly,className:c,"data-qa":"pricing_calculator_terms_toggle_yearly"},g.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),g.a.createElement("h3",null,D.t("Pay each year")),g.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},D.t("{yearlyPlanCostPerTermFormatted} per member, per year",{yearlyPlanCostPerTermFormatted:s}))),g.a.createElement(S["c"],{onClick:this.switchToMonthly,className:u,"data-qa":"pricing_calculator_terms_toggle_monthly"},g.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),g.a.createElement("h3",null,D.t("Pay each month")),g.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},D.t("{monthlyPlanCostPerTermFormatted} per member, per month",{monthlyPlanCostPerTermFormatted:l}))))}},{key:"renderCreditToast",value:function e(){var t=this.props,a=t.teamName,n=t.teamCredits,r=t.planCurrency;if(!n)return null;var i=Object(E["a"])(Math.abs(n),r);var o=n>0?D.rt("{teamName} has <strong>{creditsAppliedFormatted} in credit</strong>, which will be applied at checkout.",{teamName:a,creditsAppliedFormatted:i}):D.rt("{teamName}\u2018s account has an outstanding balance of <strong>{creditsAppliedFormatted}</strong>, which will be added to the final price during checkout",{teamName:a,creditsAppliedFormatted:i});return g.a.createElement(j["d"],{type:"inline",className:"p-pricing_calculator__credit_alert","data-qa":"pricing_calculator_credit_alert"},o)}},{key:"renderSubmitBtn",value:function e(){var t=this.props,a=t.submitButtonText,n=t.showSubmitButton;var r=this.state.submitButtonIsPending;if(!n)return null;return g.a.createElement(S["b"],{id:"pricing_calculator_submit_btn",size:"large",className:"p-pricing_calculator__submit_btn",onClick:this.handleSubmit,loading:r,"data-qa":"pricing_calculator_submit_btn"},a||D.t("Upgrade"))}},{key:"render",value:function e(){var t=this.props,a=t.isUserRestricted,n=t.showHeader,r=t.showSubmitButton,i=t.display,o=t.teamCredits,s=t.isPlansAndCostDataLoaded;if(!s||a)return null;var l=_()("p-pricing_calculator","p-pricing_calculator--"+i,{"p-pricing_calculator--has-header":this.props.showHeader});return g.a.createElement("div",{className:l,"data-qa":"pricing_calculator_container"},n&&this.renderHeader(),g.a.createElement("div",{className:"p-pricing_calculator__body"},this.renderTermsToggle(),g.a.createElement(x,this.props),!!o&&this.renderCreditToast(),r&&this.renderSubmitBtn()))}}]);return t}(v["PureComponent"]);B.displayName="PricingCalculator";B.displayName="PricingCalculator";B.defaultProps=L;var U=Object(C["a"])("feature_checkout_flow_translations")(B);var q=function e(t){return Object(i["a"])(t)};var G=function e(t){return{loadPlansAndCostData:function e(a){return t(Object(r["fetchPlansAndCostData"])(a))},switchTerms:function e(a){return t(Object(r["changeActivePlan"])({term:a}))},switchCurrency:function e(a){return t(Object(r["changeActivePlan"])({currency:a}))},updatePlanLevel:function e(a){return t(Object(r["updatePlanLevel"])(a))}}};var H=Object(n["connect"])(q,G)(U);a.d(t,false,function(){return U});var W=t["a"]=H},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(14);var b=a(2);var _=a(15);var y=a.n(_);var k=a(11);var O=a(170);var w=a(473);var E=a(1010);var C=a(81);var j=a(10);var S=a(178);var I=a(20);var T=a(48);var N=a(1755);var A=new j["b"]("custom_tos");var R={hasCustomTOS:m.a.bool,customTOSTimestamp:m.a.number,enterprise:m.a.shape({name:m.a.string,domain:m.a.string}),orgUrl:m.a.string,customTOSViewLink:m.a.string,team:m.a.shape({name:m.a.string}),safeAbsRootURL:m.a.string,featureZeroWorkspaceOnboarding:m.a.bool.isRequired,onSubmit:m.a.func,onlyDisplayCard:m.a.bool};var M={hasCustomTOS:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:b["noop"],onlyDisplayCard:false};var x=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={buttonIsPending:false};a.onClick=a.onClick.bind(a);return a}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return v.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return v.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"renderCookiePolicy",value:function e(){var t=this.props,a=t.safeAbsRootURL,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return v.a.createElement("a",{href:a+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s Cookie Policy"))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props,a=t.safeAbsRootURL,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return v.a.createElement("a",{href:a+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s Privacy Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,a=t.customTOSViewLink,n=t.enterprise,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return v.a.createElement("a",{href:""+a,target:"_blank",rel:"noopener noreferrer"},A.t("{enterpriseName}\u2019s Terms of Service",{enterpriseName:n.name}))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props,a=t.safeAbsRootURL,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return v.a.createElement("a",{href:a+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s User Terms of Service"))}},{key:"renderTOSHeading",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,n=t.customTOSTimestamp;if(!a)return null;var r=void 0;r=n?A.t("Review and accept the updated terms of service"):A.t("Review the terms of service");return v.a.createElement("div",{className:"p-tos__heading"},r)}},{key:"renderTOSSubheading",value:function e(){var t=this.props,a=t.customTOSTimestamp,n=t.enterprise,r=t.customTOSViewLink,i=t.team,o=t.featureZeroWorkspaceOnboarding;if(!o)return null;if(Object(b["isNull"])(Object(C["getReferrerSafeLinkAttrs"])(r))){if(!Object(b["isEmpty"])(i))return v.a.createElement("div",null,v.a.createElement("p",{className:"p-tos__subheading"},A.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(T["getTeamDisplayName"])(i),enterpriseName:n.name})),v.a.createElement("p",{className:"p-tos__subheading"},r));return v.a.createElement("div",null,v.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:')),v.a.createElement("p",{className:"p-tos__subheading"},r))}if(a)return v.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:n.name,customTOSViewLink:r,TOSUpdatedOn:Object(S["a"])(a)},function(e){var t=e.text,a=e.key,n=e.tag;if("a"===n)return v.a.createElement("a",{href:r,target:"_blank",key:a,rel:"noopener noreferrer"},t);return null}));if(!Object(b["isEmpty"])(i))return v.a.createElement("p",{className:"p-tos__subheading"},A.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(T["getTeamDisplayName"])(i),enterpriseName:n.name}));return v.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return v.a.createElement("div",{className:"p-tos__body"},v.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),v.a.createElement("li",null,this.renderPrivacyPolicy()),v.a.createElement("li",null,this.renderCookiePolicy()),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSBody",value:function e(){return v.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderSubmitButton",value:function e(){if(!this.props.featureZeroWorkspaceOnboarding)return null;var t=this.state.buttonIsPending;return v.a.createElement(I["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},A.t("I Agree"))}},{key:"renderCard",value:function e(){var t=y()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return v.a.createElement("div",{className:t},v.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,n=t.onlyDisplayCard,r=t.orgUrl;return v.a.createElement("div",{className:"p-tos"},!n&&v.a.createElement(E["a"],{team:a,title:r,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(h["PureComponent"]);x.displayName="TermsOfService";x.defaultProps=M;var P=function e(t){var a=Object(k["getFromBootData"])(t,"custom_tos");var n=a.enterprise;var i=Object(k["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding");var o=Object(O["getPotentiallyUnknownEnterprise"])(t);Object(b["isEmpty"])(o)||(n=o);var s=Object(w["c"])(t,n.domain);return r()({},a,{enterprise:n,orgUrl:s,featureZeroWorkspaceOnboarding:i})};var D=Object(g["connect"])(P)(x);a.d(t,"a",function(){return x});var F=t["b"]=D},function(e,t,a){"use strict";var n=a(279);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=void 0!==t&&t,r=e.isEphemeral,i=void 0!==r&&r,o=e.isStarred,s=void 0!==o&&o,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;var p="slackbot_response"===u;var f=Object(n["shouldShowHighlightsLabel"])(d);return{isPinned:a,isStarred:s,isEphemeral:i,isBroadcast:c,isCustomResponse:p,isSliHighlight:f}}},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(32);var o=a.n(i);var s=a(5);var l=a.n(s);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var f=a(8);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(0);var b=a.n(g);var _=a(15);var y=a.n(_);var k=a(14);var O=a(2086);var w=a(2);var E=a(11);var C=a(123);var j=a(19);var S=a(26);var I=a(77);var T=a(212);var N=a(150);var A=a(278);var R=a(105);var M=a(165);var x=a(63);var P=a(10);var D=a(17);var F=a(283);var L=a(358);var B=a(151);var U=a(20);var q=a(54);var G=a(701);var H=a(673);var W=a(618);var V=a(167);var z=a(715);var Q=a(41);var K=a(18);var Y=a(103);var J=a(213);var Z=a(88);var X=a(190);var $=a(799);var ee=a(31);var te=a(267);var ae=a(676);var ne=80;var re=new P["b"]("user_groups");var ie=void 0;function oe(e){if(!Object(E["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;ie={hasNameRequiredWarning:re.t("Please enter a name for this group."),hasMaxLengthWarning:re.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:ne}),hasNameTakenWarning:re.t("This name is already in use by another group."),unknownError:re.t("Sorry, something went wrong. Please try a different name.")}}var se=Object(ee["b"])("Validate user group name",function(e,t,a){var n=a.name,r=a.prevName;if(n===r)return Promise.resolve("");oe(t());if(!n.trim())return Promise.resolve(ie.hasNameRequiredWarning);if(Object(ae["a"])(n)>ne)return Promise.resolve(ie.hasMaxLengthWarning);return e(Object(te["n"])({name:n})).then(function(e){var t=e.error;if("name_already_exists"===t)return ie.hasNameTakenWarning;if(t)return ie.unknownError;return""})});se.propTypes={name:b.a.string,prevName:b.a.string};var le=se;var ce={};Object.defineProperty(ce,"handleErrorSnameErrorStringstrings",{get:function e(){return ie},set:function e(t){ie=t}});var ue=new P["b"]("user_groups");var de=80;var pe=void 0;function fe(e){if(!Object(E["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;pe={hasHandleRequiredWarning:ue.t("Please enter a handle for this group."),hasMaxLengthWarning:ue.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:de}),hasSpecialsWarning:ue.t("Handles can only contain letters or numbers."),hasPunctuationWarning:ue.t("Handles can only contain letters or numbers."),hasLowercaseWarning:ue.t("Handles can only be in lowercase."),hasHandleTakenWarning:ue.t("This handle is already in use by a member, channel, or another group."),unknownError:ue.t("Sorry, something went wrong. Please try a different handle.")}}var me=Object(ee["b"])("Validate user group handle",function(e,t,a){var n=a.handle,r=a.prevHandle;if(n===r)return Promise.resolve("");fe(t());if(!n.trim())return Promise.resolve(pe.hasHandleRequiredWarning);if(/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(n.trim()))return Promise.resolve(pe.hasSpecialsWarning);if(/^[-|_]+$/.test(n))return Promise.resolve(pe.hasPunctuationWarning);if(/[A-Z]/.test(n))return Promise.resolve(pe.hasLowercaseWarning);if(Object(ae["a"])(n)>de)return Promise.resolve(pe.hasMaxLengthWarning);return e(Object(te["m"])({handle:n})).then(function(e){var t=e.error;if("handle_already_exists"===t)return pe.hasHandleTakenWarning;if(t)return pe.unknownError;return""})});me.propTypes={handle:b.a.string,prevHandle:b.a.string};var he=me;var ve={};Object.defineProperty(ve,"handleErrorStrings",{get:function e(){return pe},set:function e(t){pe=t}});var ge=a(12);var be=a(661);var _e=a(263);var ye=new P["b"]("user_groups");var ke={selectedChannels:b.a.array,getChannelById:b.a.func.isRequired,featureSonicUserGroups:b.a.bool.isRequired,onRef:b.a.func.isRequired};var Oe={selectedChannels:[]};var we=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedChannels:a.props.selectedChannels,hideList:true};Object(w["bindAll"])(a,["getResultsForChannelsQuery","createSelectItems","onItemAdded","onItemRemoved","createTokenTemplate","listItemClass","hideList"]);return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onGetSelectedDefaultChannels",value:function e(){return this.state.selectedChannels}},{key:"onItemAdded",value:function e(t){var a=this.state.selectedChannels;a.push(t.id);this.setState(function(){return{selectedChannels:a}});this.hideList(true)}},{key:"onItemRemoved",value:function e(t){var a=Object(w["remove"])(this.state.selectedChannels,function(e){return e===t.id});this.setState(function(){return{selectedChannels:a}})}},{key:"getResultsForChannelsQuery",value:function e(t){var a=this;this.hideList(!t);if(!t)return Promise.resolve({items:this.createSelectItems(this.props.selectedChannels),replace_all_items:true});return Object(_e["a"])(t,{channels:{include_archived:true,exclude_required:true},enterprise_channels:{remote_limit:96},groups:{include_archived:true},tiered:true}).then(function(e){var t=a.props.selectedChannels;var n=e.map(function(e){var a=Object(ge["getDisplayName"])(e.model_ob);if(-1!==t.indexOf(e.model_ob.id))return r()({},e.model_ob,{label:a,preselected:true});return r()({},e.model_ob,{label:a})});return{items:n}})}},{key:"hideList",value:function e(t){this.setState(function(){return{hideList:t}})}},{key:"createSelectItems",value:function e(t){var a=this;return Object(w["map"])(t,function(e){var t=a.props.getChannelById(e);var n=Object(ge["getDisplayName"])(t);return r()({},t,{label:n,preselected:true})})}},{key:"createTokenTemplate",value:function e(t){return v.a.createElement("div",{className:"margin_left_50"},v.a.createElement(B["a"],{channel:t}))}},{key:"listItemClass",value:function e(){return"display_flex align_items_center"}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=ye.t("Default channels");var a=ye.t("Group members are added to these channels automatically.");return v.a.createElement(Z["a"],{htmlFor:"default_channel_label",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:true},v.a.createElement(be["a"],{items:this.createSelectItems(this.props.selectedChannels),dataPromise:this.getResultsForChannelsQuery,onItemAdded:this.onItemAdded,onItemRemoved:this.onItemRemoved,template:this.createTokenTemplate,tokenTemplate:this.createTokenTemplate,listItemClass:this.listItemClass,hideList:this.state.hideList,forceListAbove:true}),v.a.createElement("div",{className:"c-hint"},a))}}]);return t}(h["PureComponent"]);we.displayName="UserGroupDefaultChannelPicker";we.defaultProps=Oe;var Ee=function e(t){return{getChannelById:function e(a){return Object(j["getChannelById"])(t,a)},featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ce=Object(k["connect"])(Ee)(we);var je=new P["b"]("user_groups");var Se={detailsFormValues:b.a.shape({name:b.a.string,handle:b.a.string,purpose:b.a.string,channels:b.a.array}),validateUserGroupHandle:b.a.func.isRequired,validateUserGroupName:b.a.func.isRequired,setFormErrors:b.a.func.isRequired,featureSonicUserGroups:b.a.bool.isRequired,onRef:b.a.func.isRequired,errors:b.a.shape({nameError:b.a.string,handleError:b.a.string,purposeError:b.a.string}),submitError:b.a.string,setRequiredFieldsEmpty:b.a.func.isRequired};var Ie={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},closeModal:w["noop"],errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var Te=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var n=!a.state.name||!a.state.handle;a.props.setRequiredFieldsEmpty(n);Object(w["bindAll"])(a,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","onSubmit","setUserGroupFormRef","maybeRenderApiError"]);a.postValidateHandle=null;a.postValidateName=null;return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var a=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(a)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onNameChange",value:function e(t){var a=this;if(this.postValidateName){this.postValidateName.cancel();this.postValidateName=null}this.setState(function(){return{name:t}});this.postValidateName=this.props.validateUserGroupName({name:t}).then(function(e){a.props.setFormErrors({nameError:e})}).finally(function(){a.postValidateName=null});return this.postValidateName}},{key:"onHandleChange",value:function e(t){var a=this;if(this.postValidateHandle){this.postValidateHandle.cancel();this.postValidateHandle=null}var n=t.replace(/ /g,"");this.setState(function(){return{handle:n}});if(" "!==t.charAt(0)){this.postValidateHandle=this.props.validateUserGroupHandle({handle:n}).then(function(e){a.props.setFormErrors({handleError:e})}).finally(function(){a.postValidateHandle=null});return this.postValidateHandle}return Promise.resolve()}},{key:"onPurposeChange",value:function e(t){this.setState(function(){return{purpose:t}})}},{key:"onChannelsUpdate",value:function e(t){this.setState(function(){return{channels:t}})}},{key:"onSubmit",value:function e(){var t=this.defaultChannelsRef.onGetSelectedDefaultChannels();this.onChannelsUpdate(t);return r()({},this.state,{channels:t})}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"hasValidationErrors",value:function e(t){return Object(w["find"])(t,function(e){return e})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=je.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return v.a.createElement(J["a"],{level:"error",type:"inline"},t)}return false}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=je.t("Name");var n=je.t("e.g. Accounts Team");return v.a.createElement("div",null,v.a.createElement(Z["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:a},v.a.createElement(X["a"],{name:"user_group_name",id:"name_input",placeholder:n,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(a){return t.onNameChange(a)},errorText:this.props.errors.nameError,isRequired:true})))}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=je.t("e.g. accounts-team");var n=je.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var r=je.t("Handle");return v.a.createElement("div",null,v.a.createElement(Z["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:r},v.a.createElement(X["a"],{name:"user_group_handle",id:"handle_input",placeholder:a,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(a){return t.onHandleChange(a)},errorText:this.props.errors.handleError,hintText:n,isRequired:true,icon:"mentions"})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=140;var n=je.t("Purpose");var r=je.t("What is this group about?");return v.a.createElement("div",null,v.a.createElement(Z["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:n,optional:true},v.a.createElement($["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(a){return t.onPurposeChange(a)},errorText:this.props.errors.purposeError,hintText:r,maxCharacterLimit:a})))}},{key:"renderDefaultChannelSelect",value:function e(){var t=this;return v.a.createElement(Ce,{selectedChannels:this.state.channels,onRef:function e(a){return t.setUserGroupFormRef(a)}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",null,this.maybeRenderApiError(),v.a.createElement("form",null,this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(h["PureComponent"]);Te.displayName="UserGroupEditCreateForm";Te.defaultProps=Ie;var Ne=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ae={validateUserGroupName:le,validateUserGroupHandle:he};var Re=Object(k["connect"])(Ne,Ae)(Te);var Me=a(24);var xe=a.n(Me);var Pe=a(23);var De=a(797);var Fe=a(16);var Le=a(344);var Be=a(92);var Ue=a(177);var qe=a(2079);var Ge=new P["b"]("user_groups");var He={groupId:b.a.string,featureSonicUserGroups:b.a.bool,userGroupMemberIds:b.a.array,fetchAndUpsertUserGroupMembers:b.a.func,teamId:b.a.string,search:b.a.func};var We={groupId:void 0,featureSonicUserGroups:false,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:w["noop"],teamId:void 0,search:w["noop"]};var Ve=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={updatedGroupMembers:e.userGroupMemberIds,searchResults:[],searchQuery:"",loading:false,resultFocusIndex:-1,lastKnownResultFocusIndex:-1,displayNoMemberError:false};Object(w["bindAll"])(a,["onSearchInputChange","onClearSearch","setAddMember","setRemoveMember","setListRef","setAddedMembersTitleRef","handleUpKey","handleDownKey","handleEnterKey","onSearchInputFocusIn","onSearchInputFocusOut"]);a.list=null;a.addedMembersTitle=null;a.ADDED_MEMBERS_TITLE_HEIGHT=22;return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.groupId;if(a){this.setLoading(true);this.props.fetchAndUpsertUserGroupMembers({groupId:a}).then(function(e){Object(w["isEmpty"])(e)?t.getMembers(""):t.setState(function(){return{updatedGroupMembers:e,loading:false}})})}else this.getMembers("")}},{key:"componentDidUpdate",value:function e(t,a){!Object(w["isEqual"])(this.state.searchResults,a.searchResults||!Object(w["isEqual"])(this.state.searchQuery,a.searchQuery))&&this.list&&this.list.scrollToOffset(0);a.updatedGroupMembers.length!==this.state.updatedGroupMembers.length&&Object(w["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.addedMembersTitle&&(this.ADDED_MEMBERS_TITLE_HEIGHT=this.addedMembersTitle.clientHeight)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSearchInputChange",value:function e(t){this.state.displayNoMemberError&&this.setDisplayNoMemberError(false);var a=t&&t.target&&t.target.value;if(a){this.getMembers(a);this.setSearchQuery(a);this.setResultFocusIndex(0)}else this.onClearSearch()}},{key:"onClearSearch",value:function e(){Object(w["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.setSearchQuery("");this.setResultFocusIndex(0);this.setDisplayNoMemberError(false)}},{key:"onSearchInputFocusIn",value:function e(){this.bindKeyCommands();if(this.state.lastKnownResultFocusIndex<0){this.setLastKnownResultFocusIndex(0);this.setResultFocusIndex(0)}else this.setResultFocusIndex(this.state.lastKnownResultFocusIndex)}},{key:"onSearchInputFocusOut",value:function e(){this.keyCommands&&this.keyCommands.reset();this.setLastKnownResultFocusIndex(this.state.resultFocusIndex);this.setResultFocusIndex(-1)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setSearchQuery",value:function e(t){this.setState(function(){return{searchQuery:t}})}},{key:"setSearchResults",value:function e(t){this.setState(function(){return{searchResults:t}})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"setRemoveMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:Object(w["without"])(e.updatedGroupMembers,t)}})}},{key:"setAddMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:[t].concat(xe()(e.updatedGroupMembers))}},this.onClearSearch)}},{key:"setResultFocusIndex",value:function e(t){this.setState(function(){return{resultFocusIndex:t}})}},{key:"setLastKnownResultFocusIndex",value:function e(t){this.setState(function(){return{lastKnownResultFocusIndex:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setAddedMembersTitleRef",value:function e(t){this.addedMembersTitle=t}},{key:"getMembers",value:function e(t){var a=this;this.setLoading(true);return this.props.search({query:t,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:true}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40}}).then(function(e){var t=Object(w["filter"])(e,function(e){if(!e)return false;if(Object(Fe["isGuest"])(e))return false;if(e.enterprise_user){var t=e.enterprise_user.teams;if(!t)return false;if(!Object(w["includes"])(t,a.props.teamId))return false}return true});var n=Object(w["sortBy"])(t,["real_name"]);var r=n.map(function(e){return e.id});a.setSearchResults(r);a.setLoading(false)})}},{key:"getRowProps",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return{};var n=this.state.updatedGroupMembers;if(Object(w["includes"])(n,t))return{onClick:function e(){return a.setRemoveMember(t)},text:Ge.t("Remove")};return{onClick:function e(){return a.setAddMember(t)},text:Ge.t("Add")}}},{key:"getDisplayedListLength",value:function e(){var t=this.state,a=t.searchResults,n=t.searchQuery,r=t.updatedGroupMembers;if(n)return a.length;return r.length?r.length:a.length}},{key:"handleUpKey",value:function e(t){t.preventDefault();var a=this.state.resultFocusIndex;var n=this.getDisplayedListLength();n?this.setResultFocusIndex(0===a?n-1:a-1):this.setResultFocusIndex(0)}},{key:"handleDownKey",value:function e(t){t.preventDefault();var a=this.state.resultFocusIndex;var n=this.getDisplayedListLength();n?this.setResultFocusIndex((a+1)%n):this.setResultFocusIndex(0)}},{key:"handleEnterKey",value:function e(t){if(this.state.resultFocusIndex<0)return;t.preventDefault();var a=this.state,n=a.searchQuery,r=a.searchResults,i=a.updatedGroupMembers,o=a.resultFocusIndex;if(n){var s=r[o];this.setSearchQuery("");Object(w["includes"])(i,s)?this.setRemoveMember(s):this.setAddMember(s)}else{var l=i[o];this.setRemoveMember(l)}}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up"],handler:this.handleUpKey},{keys:["down"],handler:this.handleDownKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new Ue["a"]);this.keyCommands.bindAll(t)}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"doDisplayGroupMembersList",value:function e(){return!this.state.searchQuery&&!!this.state.updatedGroupMembers.length}},{key:"maybeRenderAddedMembersTitle",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.doDisplayGroupMembersList())return null;return v.a.createElement("div",{className:"p-user_group_member_management__list_title",ref:this.setAddedMembersTitleRef},Ge.t("Added members"))}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.state.displayNoMemberError)return null;return v.a.createElement(J["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150"},Ge.t("User groups need to have at least one member."))}},{key:"renderLoadingSpinner",value:function e(){return v.a.createElement("div",{className:"full_height full_width display_flex align_items_center"},v.a.createElement(Be["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderRowButton",value:function e(t){var a=t.text,n=o()(t,["text"]);return v.a.createElement("div",{className:"p-user_group_member_management__row_button"},v.a.createElement(U["d"],r()({size:"small",type:"outline"},n,{tabIndex:"-1"}),a))}},{key:"renderMemberRow",value:function e(t){var a=t.id,n=t.index;var i=this.getRowProps(a),s=i.onClick,l=o()(i,["onClick"]);var c=y()({"p-user_group_member_management__row_container--active":n===this.state.resultFocusIndex});return v.a.createElement("div",{className:c},v.a.createElement("div",{className:"p-user_group_member_management__row"},v.a.createElement("div",{className:"p-user_group_member_management__row_member"},v.a.createElement(L["a"],{id:a,size:"medium",showTooltip:false}))),this.renderRowButton(r()({onClick:s},l)))}},{key:"renderMemberList",value:function e(){var t=this.state,a=t.searchResults,n=t.loading,r=t.updatedGroupMembers;if(n)return this.renderLoadingSpinner();if(this.doDisplayGroupMembersList())return this.renderList({items:r});if(Object(w["isEmpty"])(a))return this.renderEmptyList();return this.renderList({items:a})}},{key:"renderList",value:function e(t){var a=this;var n=t.items;var r=[].concat(n);var i=this.doDisplayGroupMembersList();var o=void 0;o=this.state.resultFocusIndex>-1?r[this.state.resultFocusIndex]:this.state.lastKnownResultFocusIndex>-1?r[this.state.lastKnownResultFocusIndex]:r[0];return v.a.createElement(O["a"],null,function(e){var t=e.width,s=e.height;return v.a.createElement(H["a"],{width:t,height:i?s-a.ADDED_MEMBERS_TITLE_HEIGHT:s,keys:r,ref:a.setListRef,rowRenderer:function e(t){return a.renderMemberRow({id:n[t],index:t})},itemToScroll:o,hideHiddenStopTabs:true})})}},{key:"renderEmptyList",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_member_management__empty"},v.a.createElement("div",{className:"margin_top_100 margin_bottom_100"},Ge.rt("No matches found for <strong>{searchQuery}</strong>",{searchQuery:this.state.searchQuery})),v.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onClearSearch},Ge.t("Clear Search")))}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=y()("p-user_group_member_management__search",{"p-user_group_member_management__search--no_list_title":!this.doDisplayGroupMembersList()});return v.a.createElement("div",{className:t,"data-qa-user-group-member-management-search-container":true},v.a.createElement(Z["a"],{className:"bold",text:Ge.t("Add members"),"data-qa-user-group-member-management-search-label":true},v.a.createElement(Le["a"],{placeholder:Ge.t("Search by name"),icon:"search",autoFocus:true,onChange:this.onSearchInputChange,value:this.state.searchQuery,onFocus:this.onSearchInputFocusIn,onBlur:this.onSearchInputFocusOut,callOnFocusOnAutoFocus:true})))}},{key:"render",value:function e(){return v.a.createElement("div",{className:"overflow_hidden","data-qa-user-group-member-management-body":true},this.maybeRenderNoMembersAlert(),this.renderSearch(),v.a.createElement("div",{className:"p-user_group_member_management__list"},this.maybeRenderAddedMembersTitle(),this.renderMemberList()))}}]);return t}(h["PureComponent"]);Ve.displayName="UserGroupMemberManagement";Ve.defaultProps=We;var ze=function e(t,a){var n=a.groupId;var r=Object(C["getUserGroupById"])(t,n);var i=Object(R["g"])(r);return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),userGroupMemberIds:i,teamId:Object(Pe["getTeamId"])(t)}};var Qe={search:De["a"],fetchAndUpsertUserGroupMembers:C["fetchAndUpsertUserGroupMembers"]};var Ke=Object(k["connect"])(ze,Qe,null,{withRef:true})(Ve);var Ye=a(67);var Je=a.n(Ye);var Ze=Object(ee["b"])("Validate the user group form",function(e,t,a){var n=a.name,r=a.handle,i=a.prevName,o=a.prevHandle;return Promise.all([e(le({name:n,prevName:i})),e(he({handle:r,prevHandle:o}))]).then(function(e){var t=Je()(e,2),a=t[0],n=t[1];return{nameError:a,handleError:n}})});Ze.propTypes={name:b.a.string,handle:b.a.string,prevName:b.a.string,prevHandle:b.a.string};var Xe=Ze;var $e=new P["b"]("user_groups");var et={userGroupId:b.a.string,userGroupName:b.a.string,userGroupHandle:b.a.string,userGroupPurpose:b.a.string,userGroupDefaultChannels:b.a.array,createUserGroup:b.a.func.isRequired,updateUserGroup:b.a.func.isRequired,validate:b.a.func.isRequired,featureSonicUserGroups:b.a.bool.isRequired,closeModal:b.a.func,enqueueToast:b.a.func,showUserGroupDetails:b.a.func};var tt={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:w["noop"],enqueueToast:w["noop"],showUserGroupDetails:w["noop"]};var at=void 0;var nt=Object(D["b"])();var rt=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={formSubmitDisabled:true,formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:a.props.userGroupName,handle:a.props.userGroupHandle,purpose:a.props.userGroupPurpose,channels:a.props.userGroupDefaultChannels}};Object(w["bindAll"])(a,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo"]);a.formRef=null;return a}u()(t,[{key:"componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(at.edit.id):this.setDialogStep(at.details.id)}},{key:"onDetailsStepComplete",value:function e(){var t=this;var a=this.formRef.onSubmit();this.setFormSubmitPending(true);return this.props.validate(r()({},a,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(e){t.setFormErrors(e);if(t.hasValidationErrors(e)){t.setFormSubmitPending(false);return}if(t.state.formStep===at.edit.id)t.onEditDialogSubmit(a);else{t.setDetailsFormValues(a);t.setDialogStep(at.members.id);t.setFormSubmitPending(false)}})}},{key:"onEditDialogSubmit",value:function e(t){var a=this;var n=t.name,r=t.handle,i=t.purpose,o=t.channels;if(!this.props.featureSonicUserGroups)return null;var s=this.props.userGroupId;return this.props.updateUserGroup({groupId:s,name:n,handle:r,description:i,channels:o}).then(function(){a.props.enqueueToast({element:v.a.createElement(F["b"],null,$e.t("Group has been updated."))});a.onSubmitSuccess()}).catch(function(e){nt.error("Error editing user group: "+e);a.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=this.state.detailsFormValues;a=void 0===a?{}:a;var n=a.name,r=a.handle,i=a.purpose,o=a.channels;if(!this.userGroupMemberManagementRef)return false;var s=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!s)return false;var l=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:n,handle:r,description:i,channels:o,users:l}).then(function(e){var a=e.id;return t.props.showUserGroupDetails({groupId:a})}).then(function(){t.props.enqueueToast({element:v.a.createElement(F["b"],null,$e.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){nt.error("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:at.members.title,contentLabel:at.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:at.members.goButtonText,shouldCloseOnCancel:false,cancelText:$e.t("Back"),onCancel:function e(){t.setDialogStep(at.details.id)},footerText:at.members.footerText}}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var a=Object(w["find"])(at,function(e){return e.id===t});return{title:a.title,contentLabel:a.title,goButtonText:a.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:$e.t("Cancel"),shouldCloseOnGo:false,footerText:a.footerText}}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:r()({},e.errors,t)}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:r()({},e.detailsFormValues,t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;at={details:{id:"details",footerText:$e.t("Step 1 of 2"),title:$e.t("Create User Group"),goButtonText:$e.t("Next")},members:{id:"members",footerText:$e.t("Step 2 of 2"),title:$e.t("Add members"),goButtonText:$e.t("Create Group")},edit:{id:"edit",footerText:null,title:$e.t("Edit User Group"),goButtonText:$e.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(w["find"])(t,function(e){return e.length})}},{key:"renderDetailsForm",value:function e(){var t=this;return v.a.createElement("div",null,v.a.createElement(Re,r()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(a){return t.setUserGroupFormRef(a)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty})))}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(Ke,{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef})}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===at.details.id||this.state.formStep===at.edit.id)return this.renderDetailsForm();if(this.state.formStep===at.members.id)return this.renderMemberSelector();return""}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty;var a=this.state.formStep===at.details.id||this.state.formStep===at.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return v.a.createElement(Y["a"],r()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},a),this.renderDialogStep())}}]);return t}(h["PureComponent"]);rt.displayName="UserGroupEditCreateDialog";rt.defaultProps=tt;var it=function e(t,a){var n=Object(C["getUserGroupById"])(t,a.userGroupId);return{userGroupName:Object(w["get"])(n,"name",""),userGroupHandle:Object(w["get"])(n,"handle",""),userGroupPurpose:Object(w["get"])(n,"description",""),userGroupDefaultChannels:Object(w["get"])(n,"prefs.channels",[]),featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var ot={createUserGroup:C["createUserGroup"],updateUserGroup:C["updateUserGroup"],closeModal:I["closeModal"],enqueueToast:T["enqueueToast"],showUserGroupDetails:N["h"],validate:Xe};var st=Object(k["connect"])(it,ot)(rt);var lt=new P["b"]("user_groups");var ct={list:"list",details:"details"};var ut={openUserGroupList:b.a.func.isRequired,openModal:b.a.func.isRequired,view:b.a.oneOf(Object(w["values"])(ct)),featureSonicUserGroups:b.a.bool,useGlobalNav:b.a.bool};var dt={view:ct.list,featureSonicUserGroups:false,useGlobalNav:false};var pt=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openCreateEditDialog=a.openCreateEditDialog.bind(a);return a}u()(t,[{key:"openCreateEditDialog",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"maybeRenderDetailsHeader",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!(this.props.view===ct.details))return null;return v.a.createElement(U["c"],{onClick:this.props.openUserGroupList,className:"p-user_group_header"},v.a.createElement("div",{className:"p-user_group_header__title--clickable"},v.a.createElement(K["b"],{type:"chevron-medium-left",className:"p-user_group_header__back_button"}),lt.t("User Groups")))}},{key:"maybeRenderCreationIcon",value:function e(){if(!Object(W["a"])())return null;return v.a.createElement(Q["d"],{tip:lt.t("Create a user group"),delay:Q["a"]},v.a.createElement(U["c"],{onClick:this.openCreateEditDialog,className:"p-user_group_header__create","aria-label":lt.t("Create a user group")},v.a.createElement(K["b"],{type:"compose-dm",size:"inherit"})))}},{key:"maybeRenderListHeader",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!(this.props.view===ct.list))return null;return v.a.createElement("div",{className:"p-user_group_header"},v.a.createElement("span",{className:"p-user_group_header__title"},lt.t("User Groups")),this.maybeRenderCreationIcon())}},{key:"renderCreateEditDialog",value:function e(){return v.a.createElement(st,null)}},{key:"render",value:function e(){if(this.props.useGlobalNav)return null;return v.a.createElement(z["a"],null,this.maybeRenderDetailsHeader(),this.maybeRenderListHeader())}}]);return t}(h["Component"]);pt.displayName="UserGroupsFlexpaneHeader";var ft=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),useGlobalNav:Object(V["b"])(t)}};var mt=function e(t){return{openModal:function e(){return t(I["openModal"].apply(void 0,arguments))},openUserGroupList:function e(){return t(Object(N["i"])())}}};pt.defaultProps=dt;var ht=Object(k["connect"])(ft,mt)(pt);var vt=a(69);var gt={groupId:b.a.string.isRequired,isActive:b.a.bool.isRequired,isAutoGenerated:b.a.bool.isRequired,isDetailsView:b.a.bool,featureSonicUserGroups:b.a.bool,onEnableUserGroup:b.a.func,onDisableUserGroup:b.a.func,openModal:b.a.func,canEditUserGroups:b.a.func,canCreateAndDeleteUserGroups:b.a.func,menuProps:b.a.object,onClick:b.a.func};var bt={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:w["noop"],onDisableUserGroup:w["noop"],canEditUserGroups:w["noop"],canCreateAndDeleteUserGroups:w["noop"],openModal:w["noop"],menuProps:{},onClick:w["noop"]};var _t=new P["b"]("user_groups");var yt=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return a}u()(t,[{key:"onEnableUserGroup",value:function e(){this.props.onClick();return this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})});this.props.onClick()}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.isAutoGenerated,n=t.isDetailsView;if(a&&n)return null;var r=[];n||a||r.push({key:"menu-edit-members",label:_t.t("Edit group members..."),onSelected:this.onEditMembers});r.push({key:"menu-edit-details",label:_t.t("Edit group details..."),onSelected:this.onEditDetails});return r}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=[];if(this.userGroupIsEditable()){var n=this.getEditMenuItems();n&&a.push.apply(a,xe()(n))}this.canEnableUserGroup()?a.push({key:"menu-enable",label:_t.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&a.push({key:"menu-disable",label:_t.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return a}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,n=t.onSubmit;var r=this.props.groupId;return v.a.createElement(Kt,{groupId:r,action:a,onSubmit:n})}},{key:"renderEditDialog",value:function e(t){return v.a.createElement(st,{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return v.a.createElement(sa,{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(q["f"],r()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return v.a.createElement(q["b"],e)}))}}]);return t}(h["PureComponent"]);yt.displayName="UserGroupContextMenu";yt.defaultProps=bt;var kt=function e(t,a){var n=a.groupId,r=a.isDetailsView;var i=Object(C["getUserGroupById"])(t,n);var o=Object(R["q"])(i);var s=Object(R["l"])(i);var l=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:o,isAutoGenerated:s,isDetailsView:r,canEditUserGroups:function e(){return Object(R["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(R["b"])(t)},featureSonicUserGroups:l}};var Ot=function e(t,a){var n=a.groupId;return{openModal:function e(){return t(I["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(C["fetchAndUpsertUserGroupMembers"])({groupId:n}))},onDisableUserGroup:function e(){t(Object(C["disableAndUpdateUserGroup"])({groupId:n})).then(function(){return t(Object(vt["setSecondaryView"])({flexName:"groups",flexParams:[]}))})},onEnableUserGroup:function e(){t(Object(C["enableAndUpdateUserGroup"])({groupId:n})).then(function(){return t(Object(vt["setSecondaryView"])({flexName:"groups",flexParams:[n]}))})}}};var wt=Object(k["connect"])(kt,Ot)(yt);var Et=a(2080);var Ct=new P["b"]("user_groups");var jt={userGroup:b.a.object,onEditMembers:b.a.func.isRequired,onEditDetails:b.a.func.isRequired,featureSonicUserGroups:b.a.bool.isRequired};var St={userGroup:void 0};var It=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderUserGroupOptionsMenu=a.renderUserGroupOptionsMenu.bind(a);return a}u()(t,[{key:"renderUserGroupOptionsMenu",value:function e(t){return v.a.createElement(wt,{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true})}},{key:"renderUserGroupOptions",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(q["e"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},v.a.createElement(Q["d"],{tip:Ct.t("More actions"),delay:Q["a"],position:"top-right"},v.a.createElement(U["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(U["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},Ct.t("Edit Members"))}},{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(U["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},Ct.t("Edit Details"))}},{key:"renderPrimaryAction",value:function e(){if(Object(R["l"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(h["Component"]);It.displayName="UserGroupsDetailsActionBar";var Tt=function e(t,a){var n=a.groupId;return{userGroup:Object(C["getUserGroupById"])(t,n),featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};It.defaultProps=St;var Nt=Object(k["connect"])(Tt)(It);var At={members:"members",channels:"channels"};var Rt=new P["b"]("user_groups");var Mt={userGroup:b.a.shape({created_by:b.a.string,date_create:b.a.number,date_delete:b.a.number,date_update:b.a.number,deleted_by:b.a.string,description:b.a.string,enterprise_subteam_id:b.a.string,handle:b.a.string,id:b.a.string,is_external:b.a.bool,is_subteam:b.a.bool,is_usergroup:b.a.bool,name:b.a.string,prefs:b.a.shape({channels:b.a.array,groups:b.a.array}),team_id:b.a.string,updated_by:b.a.string,user_count:b.a.number,users:b.a.array,_name_lc:b.a.string}),fetchUserGroupMembers:b.a.func,onChannelSwitch:b.a.func,removeMember:b.a.func,removeChannel:b.a.func,openModal:b.a.func,openUserGroupList:b.a.func,enqueueToast:b.a.func,canEditUserGroups:b.a.func,canCreateAndDeleteUserGroups:b.a.func,groupId:b.a.string.isRequired,userGroupMembers:b.a.array,newMembers:b.a.array,userGroupDefaultChannels:b.a.array,featureSonicUserGroups:b.a.bool};var xt={userGroup:{},fetchUserGroupMembers:w["noop"],onChannelSwitch:w["noop"],removeMember:w["noop"],removeChannel:w["noop"],openModal:w["noop"],openUserGroupList:w["noop"],enqueueToast:w["noop"],canEditUserGroups:w["noop"],canCreateAndDeleteUserGroups:w["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],featureSonicUserGroups:false};var Pt=Object(D["b"])();var Dt=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog"]);return a}u()(t,[{key:"componentDidMount",value:function e(){Object(R["q"])(this.props.userGroup)&&this.props.fetchUserGroupMembers()}},{key:"componentDidUpdate",value:function e(t){var a=t.userGroup,n=a.users,r=o()(a,["users"]);var i=this.props.userGroup,s=i.users,l=o()(i,["users"]);Object(w["isEqual"])(r,l)||this.props.fetchUserGroupMembers()}},{key:"onRemoveMember",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){a.props.removeMember(t).then(function(){a.props.enqueueToast({element:v.a.createElement(F["b"],null,Rt.t("Member removed from group."))})}).catch(function(e){Pt.error("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&a.props.enqueueToast({element:v.a.createElement(F["b"],null,Rt.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onRemoveChannel",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){a.props.removeChannel(t).then(function(){a.props.enqueueToast({element:v.a.createElement(F["b"],null,Rt.t("Channel removed from group."))})}).catch(function(e){Pt.error("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function e(t){var a=t.type,n=t.id;a===At.members?this.onRemoveMember(n):a===At.channels&&this.onRemoveChannel(n)}},{key:"onViewProfile",value:function e(t,a){var n=a.type,r=a.id;if(n===At.members)return Object(M["h"])(r,"groups",{userGroupId:this.props.userGroup.id});if(n===At.channels)return this.props.onChannelSwitch(r);return null}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.userGroup,n=t.userGroupDefaultChannels,r=void 0===n?[]:n;var i=Object(R["k"])(a);return[{title:Rt.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:Rt.rt("Channels"),titleCount:r.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(R["q"])(t)}},{key:"canRemoveItem",value:function e(t){var a=this.props.userGroup;if(t===At.members&&Object(R["l"])(a))return false;return true}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;return v.a.createElement("div",{className:"p-user_group_details__section"},v.a.createElement("div",{className:"p-user_group_details__name"},Object(R["h"])(t)),v.a.createElement("div",{className:"p-user_group_details__description"},Object(R["e"])(t)),v.a.createElement("div",{className:"p-user_group_details__handle"},Object(R["f"])(t,{includeAtSign:true})))}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canCreateAndDeleteUserGroups())return null;return v.a.createElement("div",{className:"p-user_group_details__section"},v.a.createElement(Nt,{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var a=this.getTabs();var n=y()("p-user_group_details__tab_container",{"p-user_group_details__tab_container--sonic":Object(x["a"])(),"p-user_group_details__tab_container--legacy":!Object(x["a"])()});return v.a.createElement("div",{className:n,"data-qa-user-group-details-tabs":true},v.a.createElement(G["a"],{tabs:a,defaultTabId:t,fullHeight:true,fullWidthMenu:true}))}},{key:"renderListItemOptionsMenu",value:function e(t){var a=this;var n=t.menuProps,i=t.id,o=t.type;if(!this.props.featureSonicUserGroups)return null;var s=o===At.channels?Rt.t("Open channel"):Rt.t("View profile");var l=[v.a.createElement(q["b"],{key:i,label:s,onSelected:function e(t){return a.onViewProfile(t,{type:o,id:i})}})];this.canRemoveItem(o)&&l.push(v.a.createElement(q["b"],{key:i,label:Rt.t("Remove from group..."),onSelected:function e(){return a.onRemoveFromGroup({type:o,id:i})},danger:true}));return v.a.createElement(q["f"],r()({},n,{width:"auto"}),l)}},{key:"renderMemberItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n=this.userGroupIsEditable();var r=Object(w["includes"])(this.props.newMembers,a);var i=y()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":n,"p-user_group_base_row--active":r});var o={className:i,isContextButtonVisible:n,onClick:function e(n){return t.onViewProfile(n,{type:At.members,id:a.id})},renderMenu:function e(n){return t.renderListItemOptionsMenu({menuProps:n,id:a.id,type:At.members})},customProps:{key:a.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":a.id}};return v.a.createElement(ea,o,v.a.createElement("div",{className:"full_width"},v.a.createElement(L["a"],{id:a.id,size:"medium",showTooltip:false,forcedPrimary:"real_name",showPresence:false,showStatus:false,"data-qa-user-group-details-members-list-item-member":true})))}},{key:"renderChannelItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n=this.userGroupIsEditable();var r=y()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":n});var i=a.purpose?v.a.createElement("div",{className:"p-user_group_details__channel_purpose"},a.purpose.value):null;var o={className:r,isContextButtonVisible:n,onClick:function e(n){return t.onViewProfile(n,{type:At.channels,id:a.id})},renderMenu:function e(n){return t.renderListItemOptionsMenu({menuProps:n,id:a.id,type:At.channels})},customProps:{key:a.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":a.id}};return v.a.createElement(ea,o,v.a.createElement("div",{className:"p-user_group_details__list_item_info"},v.a.createElement(B["a"],{channel:a,className:"bold cursor_pointer"}),i))}},{key:"renderMembersList",value:function e(){var t=this;var a=this.props.userGroupMembers;if(!a||Object(w["isEmpty"])(a))return this.renderEmptyMemberState();this.memberListKeys=Object(w["map"])(a,"id");return v.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true},v.a.createElement(O["a"],null,function(e){var n=e.width,r=e.height;return v.a.createElement(H["a"],{width:n,height:r,keys:t.memberListKeys,rowRenderer:function e(n){return t.renderMemberItem(a[n])}})}))}},{key:"renderChannelsList",value:function e(){var t=this;var a=this.props.userGroupDefaultChannels;if(!a||Object(w["isEmpty"])(a))return this.renderEmptyChannelState();this.channelListKeys=Object(w["map"])(a,"id");return v.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true},v.a.createElement(O["a"],null,function(e){var n=e.width,r=e.height;return v.a.createElement(H["a"],{width:n,height:r,keys:t.channelListKeys,rowRenderer:function e(n){return t.renderChannelItem(a[n])}})}))}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?v.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onAddMembers},Rt.t("Add Members")):null;return v.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":At.members},v.a.createElement("div",{className:"p-user_group_details__empty_list_header"},Rt.t("No members")),t)}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?v.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onAddChannels},Rt.t("Add Default Channels")):null;return v.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":At.channels},v.a.createElement("div",{className:"p-user_group_details__empty_list_header"},Rt.t("No default channels")),v.a.createElement("div",{className:"p-user_group_details__empty_list_subtext"},Rt.t("All members of a user group are automatically added to its default channels.")),t)}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,n=t.onSubmit,r=t.id;var i=this.props.groupId;return v.a.createElement(Kt,{action:a,onSubmit:n,id:r,groupId:i})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return v.a.createElement(sa,{groupId:t})}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return v.a.createElement(st,{userGroupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;var a=y()("p-user_group__content",{"p-user_group__content--legacy":!Object(x["a"])()});return v.a.createElement("div",{className:"full_height"},v.a.createElement(ht,{view:ct.details}),v.a.createElement("div",{className:a},v.a.createElement("div",{className:"p-user_group_details","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),this.renderActions(),this.renderTabs())))}}]);return t}(h["PureComponent"]);Dt.displayName="UserGroupDetails";Dt.defaultProps=xt;var Ft=function e(t,a){var n=a.groupId;var r=Object(C["getUserGroupById"])(t,n);var i=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");if(Object(R["p"])(r))return{userGroup:r,featureSonicUserGroups:i};var o=Object(R["g"])(r);var s=Object(w["map"])(o,function(e){return Object(S["getMemberById"])(t,e)});var l=Object(R["d"])(r);var c=Object(w["map"])(l,function(e){return Object(j["getChannelById"])(t,e)});return{userGroup:r,featureSonicUserGroups:i,userGroupMembers:s,userGroupDefaultChannels:c,canEditUserGroups:function e(){return Object(R["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(R["b"])(t)}}};var Lt=function e(t,a){var n=a.groupId;return{openModal:function e(){return t(I["openModal"].apply(void 0,arguments))},fetchUserGroupMembers:function e(){return t(Object(C["fetchAndUpsertUserGroupMembers"])({groupId:n}))},removeMember:function e(a){return t(Object(C["removeUserGroupMember"])({groupId:n,memberId:a}))},removeChannel:function e(a){return t(Object(C["removeUserGroupChannel"])({groupId:n,channelId:a}))},onChannelSwitch:function e(a){return t(Object(A["a"])({id:a}))},openUserGroupList:function e(){return t(Object(N["i"])())},enqueueToast:function e(){return t(T["enqueueToast"].apply(void 0,arguments))}}};var Bt=Object(k["connect"])(Ft,Lt)(Dt);var Ut=a(201);var qt=a(160);var Gt=new P["b"]("user_groups");var Ht={disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"};var Wt={action:b.a.oneOf(Object(w["values"])(Ht)).isRequired,onSubmit:b.a.func.isRequired,label:b.a.string,groupName:b.a.string,featureSonicUserGroups:b.a.bool};var Vt={label:"",groupName:"",featureSonicUserGroups:false};var zt=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);return a}u()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.action,n=t.groupName;switch(a){case"disable_group":return Gt.t("Deactivate {groupName}?",{groupName:n});case"remove_member":return Gt.t("Remove from group?");case"remove_channel":return Gt.t("Remove default channel?");default:}return""}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return Gt.t("Deactivate");case"remove_member":case"remove_channel":return Gt.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.groupName,n=t.label,r=t.action;switch(r){case"disable_group":return Gt.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:a});case"remove_member":return Gt.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:n,groupName:a});case"remove_channel":return Gt.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:n,groupName:a});default:}return""}},{key:"render",value:function e(){return v.a.createElement(Y["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},v.a.createElement("p",null,this.getDialogBody()))}}]);return t}(h["Component"]);zt.displayName="UserGroupConfirmationDialog";zt.defaultProps=Vt;var Qt=function e(t,a){var n=a.id,r=a.groupId;var i="";var o=Object(C["getUserGroupById"])(t,r);if(Object(qt["a"])(n)){var s=Object(j["getChannelById"])(t,n);i=Object(ge["getDisplayName"])(s)}else if(Object(Ut["a"])(n)){var l=Object(S["getMemberById"])(t,n);i=Object(Fe["getMemberRealName"])(l)}return{groupName:Object(R["h"])(o),label:i,featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Kt=Object(k["connect"])(Qt)(zt);var Yt=a(826);var Jt=a(2289);var Zt={renderMenu:b.a.func.isRequired,className:b.a.string,children:b.a.node,isContextButtonVisible:b.a.bool,onClick:b.a.func.isRequired,customProps:b.a.object};var Xt={className:"",children:"",isContextButtonVisible:false,customProps:{}};var $t=function(e){m()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"renderContextButton",value:function e(){var t=this.props,a=t.isContextButtonVisible,n=t.renderMenu;if(!a)return null;var r={icon:"ellipsis",tooltip:"",onClick:n,menuProps:{renderMenu:n,width:"auto"}};return v.a.createElement(Yt["b"],{customClasses:"p-user_group_base_row__list_item_option"},v.a.createElement(Yt["a"],r))}},{key:"render",value:function e(){var t=this.props,a=t.className,n=t.onClick,i=t.customProps,o=t.children;var s=y()("p-user_group_base_row__list_item",a);return v.a.createElement("div",{className:"p-user_group_base_row"},v.a.createElement(U["c"],r()({onClick:n,className:s},i),o),this.renderContextButton())}}]);return t}(h["PureComponent"]);$t.displayName="UserGroupBaseRow";$t.defaultProps=Xt;var ea=$t;var ta=new P["b"]("user_groups");var aa={featureSonicUserGroups:b.a.bool,groupId:b.a.string.isRequired,bulkUpsertUserGroupMembers:b.a.func.isRequired,enqueueToast:b.a.func.isRequired};var na={featureSonicUserGroups:false,userGroupMemberIds:[]};var ra=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={searchResultMode:false};Object(w["bindAll"])(a,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef"]);a.userGroupMemberManagementRef=null;return a}u()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var a=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(a).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:v.a.createElement(F["b"],null,ta.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function e(t){Object(D["b"])().error("Error updating user group members: "+JSON.stringify(t))}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=ta.t("Edit members");return v.a.createElement(Y["a"],{showHeader:true,showGoButton:true,showFooter:true,bodyClassName:"p-user_group_member_management__dialog_body",title:t,contentLabel:t,goButtonText:ta.t("Save"),onGo:this.onSave,goOnEnterPressed:false},v.a.createElement(Ke,{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef}))}}]);return t}(h["PureComponent"]);ra.displayName="UserGroupMemberManagementDialog";ra.defaultProps=na;var ia=function e(t){return{featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var oa=function e(t,a){var n=a.groupId;return{bulkUpsertUserGroupMembers:function e(a){return t(Object(C["bulkUpsertUserGroupMembers"])({groupId:n,users:a}))},enqueueToast:function e(){return t(T["enqueueToast"].apply(void 0,arguments))}}};var sa=Object(k["connect"])(ia,oa)(ra);var la=a(650);var ca=a(616);var ua=a(3274);var da=a(1437);var pa=a(2081);var fa={userGroups:b.a.object,featureSonicUserGroups:b.a.bool,featureLazyUserGroups:b.a.bool,fetchAndUpsertUserGroups:b.a.func,openModal:b.a.func,searchTerm:b.a.string,searchQuery:b.a.string,onSearchInputChange:b.a.func,onClearSearch:b.a.func,setSearchQuery:b.a.func};var ma={userGroups:{},featureSonicUserGroups:false,featureLazyUserGroups:false,fetchAndUpsertUserGroups:w["noop"],openModal:w["noop"],searchTerm:"",searchQuery:"",onSearchInputChange:w["noop"],onClearSearch:w["noop"],setSearchQuery:w["noop"]};var ha=new P["b"]("user_groups");var va=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["onCreateUserGroup","onSearchInputChange","renderRow"]);return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.featureLazyUserGroups||this.props.fetchAndUpsertUserGroups()}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function e(t){if(this.props.featureLazyUserGroups)return this.props.setSearchQuery(t.target.value);return this.props.onSearchInputChange(t)}},{key:"onClearSearch",value:function e(t){if(this.props.featureLazyUserGroups)return this.props.setSearchQuery("");return this.props.onClearSearch(t)}},{key:"getSortedResults",value:function e(t){return Object(w["sortBy"])(t,function(e){var t=Object(R["h"])(e);return t.toLocaleLowerCase()})}},{key:"getSearchResults",value:function e(t,a){var n=this;if(!a)return Object.values(t);return Object(w["filter"])(t,function(e){if(!e)return false;var t=Object(R["h"])(e);var r=Object(R["f"])(e)||"";var i=Object(R["e"])(e)||"";if(n.checkForMatch(t,a))return true;if(n.checkForMatch(r,a))return true;if(n.checkForMatch(i,a,false))return true;return false})}},{key:"getGroupedUserGroups",value:function e(t){var a=Object(w["groupBy"])(t,function(e){return Object(R["q"])(e)?"active":"inactive"});a.active=a.active||[];a.inactive=a.inactive||[];return a.active.concat(a.inactive)}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,n).includes(this.prepStringForSearch(a,n))}},{key:"prepStringForSearch",value:function e(t,a){if(!t)return"";var n=t.toLocaleLowerCase();a&&(n=n.replace(/[\s-_]/g,""));return Object(P["a"])(n)}},{key:"renderSearch",value:function e(){var t=void 0;t=this.props.featureLazyUserGroups?this.props.searchQuery:this.props.searchTerm;if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_list__search"},v.a.createElement(Le["a"],{value:t,onChange:this.onSearchInputChange,placeholder:ha.t("Find by name..."),icon:"search"}))}},{key:"renderRow",value:function e(t){var a=this.keys[t];return v.a.createElement(da["a"],{id:a})}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=void 0;var a=void 0;if(Object(W["a"])()){t=ha.t("Organize your team");a=v.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onCreateUserGroup},ha.t("Create a User Group"))}else t=ha.t("No user groups yet");return v.a.createElement("div",{className:"p-user_group_list__empty_list"},v.a.createElement("div",{className:"p-user_group_list__empty_list_header"},t),v.a.createElement("div",{className:"p-user_group_list__empty_list_subtext"},ha.t("User groups make it easy to get the attention of many members at once.")),a)}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_list__empty_search_results"},v.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},ha.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),v.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.props.onClearSearch},ha.t("Clear Search")))}},{key:"renderSearchableList",value:function e(){return v.a.createElement(ua["a"],{onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:true})}},{key:"renderGroupList",value:function e(){var t=this;var a=this.getSearchResults(this.props.userGroups,this.props.searchTerm);if(Object(w["isEmpty"])(a))return this.renderEmptySearchResults();var n=this.getSortedResults(a);var r=this.getGroupedUserGroups(n);this.keys=Object(w["map"])(r,"id");var i=59;return v.a.createElement("div",{className:"p-user_group_list__groups"},v.a.createElement(O["a"],null,function(e){var a=e.width,n=e.height;return v.a.createElement(H["a"],{width:a,height:n-i,keys:t.keys,rowRenderer:t.renderRow})}))}},{key:"renderContent",value:function e(){if(this.props.featureLazyUserGroups)return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"p-user_groups_flexpane"},this.renderSearch(),this.renderSearchableList()));var t=this.props,a=t.featureSonicUserGroups,n=t.userGroups;if(!a)return null;var r=Object(w["isEmpty"])(n)?this.renderEmptyListView():v.a.createElement(v.a.Fragment,null,this.renderSearch(),this.renderGroupList());var i=y()("p-user_group__content",{"p-user_group__content--legacy":!Object(x["a"])()});return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:i},v.a.createElement("div",{className:"p-user_group_list"},r)))}},{key:"renderCreateEditDialog",value:function e(){return v.a.createElement(st,null)}},{key:"render",value:function e(){var t=this.props.featureSonicUserGroups;if(!t)return null;var a=this.renderContent();return v.a.createElement(v.a.Fragment,null,v.a.createElement(ht,{view:ct.list}),a)}}]);return t}(h["PureComponent"]);va.displayName="UserGroupList";va.defaultProps=ma;var ga=function e(t,a){var n=Object(C["getAllUserGroups"])(t);var i=Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups");var o=Object(E["isFeatureEnabled"])(t,"feature_lazy_user_groups");return r()({userGroups:n,searchQuery:Object(ca["getSearchQuery"])(t),featureSonicUserGroups:i,featureLazyUserGroups:o},a)};var ba={fetchAndUpsertUserGroups:C["fetchAndUpsertUserGroups"],openModal:I["openModal"],setSearchQuery:ca["setSearchQuery"]};var _a=Object(k["connect"])(ga,ba)(va);var ya=a(2294);var ka={groupId:b.a.string,featureSonicUserGroups:b.a.bool,userGroupMembers:b.a.array};var Oa={groupId:null,featureSonicUserGroups:false,openModal:w["noop"],userGroupMembers:[],openUserGroupList:w["noop"]};var wa=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={newMembers:[],timeoutId:null,searchTerm:""};Object(w["bindAll"])(a,["onSearchInputChange","onClearSearch"]);return a}u()(t,[{key:"componentDidUpdate",value:function e(t){var a=this;var n=[];t.userGroupMembers.length&&!Object(w["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(n=Object(w["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(n.length){this.setState(function(){return{newMembers:n}});var r=this.state.timeoutId;r&&clearTimeout(r);var i=setTimeout(function(){a.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}})}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var a=this.state,n=a.newMembers,r=a.searchTerm;if(t)return v.a.createElement(Bt,{groupId:t,newMembers:n});return v.a.createElement(_a,{searchTerm:r,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]);return t}(h["PureComponent"]);wa.displayName="UserGroupsFlexpane";wa.defaultProps=Oa;var Ea=function e(t){var a=void 0;a=Object(E["isFeatureEnabled"])(t,"feature_remove_flexpane_store")?Object(vt["getFlexParams"])(t)[0]:Object(la["getFlexpaneState"])(t).flexExtra;var n=Object(C["getUserGroupById"])(t,a);var r=Object(R["g"])(n);var i=Object(w["map"])(r,function(e){return Object(S["getMemberById"])(t,e)});return{groupId:a,userGroupMembers:i,featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ca=Object(k["connect"])(Ea)(wa);a.d(t,false,function(){return Bt});a.d(t,"d",function(){return st});a.d(t,"b",function(){return Kt});a.d(t,"c",function(){return wt});a.d(t,"a",function(){return ea});a.d(t,"e",function(){return sa});a.d(t,false,function(){return Ce});var ja=t["f"]=Ca},,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(104);var l=a.n(s);var c=a(14);var u=a(2);var d=a.n(u);var p=a(139);var f=a(33);var m=a(5);var h=a.n(m);var v=a(7);var g=a.n(v);var b=a(6);var _=a.n(b);var y=a(8);var k=a.n(y);var O=a(0);var w=a.n(O);var E=a(15);var C=a.n(E);var j=a(50);var S=a(993);var I=a(164);var T=a(48);var N=a(10);var A=a(245);var R=a(161);var M=a(408);var x=a(344);var P=a(92);var D=a(20);var F=a(803);var L=a(77);var B=a(94);var U=a(1160);var q=a(135);var G=a(12);var H=a(18);var W=a(54);var V=a(337);var z=a(41);var Q=a(103);var K=a(227);var Y=a(88);var J=a(213);var Z=a(2070);var X=new N["b"]("connected_workspaces");var $={currentTeam:w.a.object.isRequired,workspace:w.a.object.isRequired,workspaceChannels:w.a.array.isRequired,onClose:w.a.func.isRequired,openModal:w.a.func,submitDisconnectSharedTeam:w.a.func,clogger:w.a.object.isRequired};var ee={currentTeam:{},workspace:{},workspaceChannels:[],onClose:d.a.noop,openModal:d.a.noop,submitDisconnectSharedTeam:d.a.noop};var te="SHARED_CHANNELS_MANAGE_MODAL_ACTION";var ae=function(e){k()(t,e);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isCheckboxChecked:false};a.renderActionMenu=a.renderActionMenu.bind(a);a.showDialog=a.showDialog.bind(a);a.handleCheckboxChange=a.handleCheckboxChange.bind(a);return a}_()(t,[{key:"componentDidUpdate",value:function e(t,a){this.dialog&&a.isCheckboxChecked!==this.state.isCheckboxChecked&&this.dialog.render({goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked})}},{key:"calculateChannelNumbers",value:function e(){var t=this.props.workspaceChannels;var a=d.a.partition(t,function(e){return!e||Object(G["isPrivateChannel"])(e)});if(!a)return{numTotalChannels:0,numPrivateChannels:0};var n=a[1].length;var r=a[0].length;return{numPublicChannels:n,numPrivateChannels:r}}},{key:"createChannelString",value:function e(t){var a=t.numPublicChannels,n=t.numPrivateChannels;var r=X.t("{count, plural, =1 {# channel} other {# channels}}",{count:a+n});var i=n?X.t(" ({count} private)",{count:n}):"";return""+r+i}},{key:"handleCheckboxChange",value:function e(){this.setState(function(e){return{isCheckboxChecked:!e.isCheckboxChecked}})}},{key:"showDialog",value:function e(){this.dialog=this.props.openModal({element:this.renderDialog()})}},{key:"renderDialog",value:function e(){var t=this;var a=this.props,n=a.currentTeam,r=a.onClose,i=a.clogger;var s=this.props.workspace,l=s.name,c=s.id;var u=X.rt("<strong>This cannot be undone</strong>. Please double-check the info below.");var d=this.calculateChannelNumbers();var p=X.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:d.numPublicChannels});var f=X.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:d.numPrivateChannels});return o.a.createElement(Q["a"],{title:X.t("Stop sharing all channels with {workspaceName}?",{workspaceName:l}),goButtonText:X.t("Stop Sharing"),goButtonType:"danger",onCancel:function e(){i.trackClickWithContext({event:te,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CANCEL_BTN"})},onGo:function e(){i.trackClickWithContext({event:te,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CONFIRM_BTN"});t.props.submitDisconnectSharedTeam({targetTeamId:c}).then(r)},truncateTitle:false,goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked},o.a.createElement(J["a"],{level:"error"},u),o.a.createElement("p",null,o.a.createElement("strong",null,X.t("What will happen:"))),o.a.createElement("ul",null,o.a.createElement("li",null,X.t("{currentTeamName} and {targetWorkspaceName} will keep separate copies of each channel.",{currentTeamName:Object(T["getTeamDisplayName"])(n),targetWorkspaceName:l})),o.a.createElement("li",null,X.t("Each workspace can continue using their copies.")),o.a.createElement("li",null,X.t("You won\u2019t be able to reshare any of these channels."))),o.a.createElement("p",null,o.a.createElement("strong",null,X.t("You\u2019re about to stop sharing:"))),o.a.createElement("ul",null,d.numPublicChannels?o.a.createElement("li",null,p):"",d.numPrivateChannels?o.a.createElement("li",null,f):"",o.a.createElement("li",null,X.t("All direct and group messages"))),o.a.createElement(Y["a"],{text:X.rt("<strong>Yes, stop sharing all channels with {targetWorkspaceName}</strong>",{targetWorkspaceName:l}),htmlFor:"confirmStopSharingAll",type:"inline",cursor:"pointer"},o.a.createElement(K["a"],{id:"confirmStopSharingAll",isRequired:true,onChange:this.handleCheckboxChange})))}},{key:"renderActionMenu",value:function e(t){var a=this;var n=this.props,i=n.workspaceChannels,s=n.clogger;var l=this.props.workspace,c=l.id,u=l.domain;var d=X.t("Stop sharing {count, plural, =1 {this channel} other {these channels}}",{count:i.length});return o.a.createElement(W["f"],r()({},t,{width:"auto"}),o.a.createElement(W["b"],{label:X.t("View shared channels"),onSelected:function e(){Object(U["c"])({show_which_channels:"ext_shared_team_"+c,onBack:U["b"]});s.trackClickWithContext({event:te,element:"SHARED_CHANNELS_MANAGE_MODAL_VIEW_CHANNELS_BTN"});a.props.onClose()}}),o.a.createElement(W["b"],{label:X.t("Share a new channel"),onSelected:function e(){Object(F["c"])({team_url:u,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});s.trackClickWithContext({event:te,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});a.props.onClose()}}),o.a.createElement(W["b"],{label:d,danger:true,onSelected:function e(){s.trackClickWithContext({event:te,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_BTN"});a.showDialog()}}))}},{key:"render",value:function e(){var t=this;var a=this.props.workspace,n=a.id,r=a.name,i=a.domain,s=a.icon;var l=this.props.clogger;return o.a.createElement("div",{className:"p-connected_workspaces_row"},o.a.createElement("div",{className:"p-connected_workspaces_row__item"},o.a.createElement(V["b"],{teamName:r,size:35,icon:s,className:"p-connected_workspaces_row__workspace_icon margin_right_75"}),o.a.createElement("div",{className:"p-connected_workspaces_row__workspace_info"},o.a.createElement("div",{className:"p-connected_workspaces_row__workspace_name overflow_ellipsis"},r),o.a.createElement("div",{className:"p-connected_workspaces_row__workspace_domain overflow_ellipsis"},i+".slack.com"))),o.a.createElement("div",{className:"p-connected_workspaces_row__item"},o.a.createElement(z["d"],{tip:X.t("View channels"),position:"top"},o.a.createElement(D["c"],{className:"p-connected_workspaces_row__channels overflow_ellipsis",onClick:function e(){Object(U["c"])({show_which_channels:"ext_shared_team_"+n,onBack:U["b"]});l.trackClickWithContext({event:te,element:"SHARED_CHANNELS_MANAGE_MODAL_CHANNEL_COUNT_BTN"});t.props.onClose()}},this.createChannelString(this.calculateChannelNumbers())))),o.a.createElement("div",{className:"p-connected_workspaces_row__item"},o.a.createElement("div",{className:"p-connected_workspaces_row__actions"},o.a.createElement(W["e"],{renderMenu:this.renderActionMenu,position:"bottom-right",offsetX:20},o.a.createElement(D["c"],null,o.a.createElement(H["a"],{type:"ellipsis"}))))))}}]);return t}(i["Component"]);ae.displayName="ConnectedWorkspacesRow";ae.defaultProps=ee;var ne=function e(t,a){var n=d.a.map(a.workspace.channels,function(e){return Object(B["f"])(t,e)});return{workspaceChannels:n,currentTeam:Object(j["getCurrentTeam"])(t),clogger:Object(I["a"])({state:t})}};var re={openModal:L["openModal"],submitDisconnectSharedTeam:q["E"]};var ie=Object(c["connect"])(ne,re)(ae);var oe=new N["b"]("connected_workspaces");var se={currentTeam:w.a.object.isRequired,onBack:w.a.func,onClose:w.a.func.isRequired,referringUiElement:w.a.string,fetchAndUpsertExternalTeams:w.a.func,clogger:w.a.object.isRequired};var le={currentTeam:{},onBack:null,onClose:d.a.noop,referringUiElement:null,fetchAndUpsertExternalTeams:d.a.noop};var ce="SHARED_CHANNELS_MANAGE_MODAL_OPEN";var ue=function(e){k()(t,e);_()(t,null,[{key:"filterWorkspaces",value:function e(t,a){if(!t||!t.trim())return a;var n=d.a.toLower(t);var r=[];for(var i=0;i<a.length;i+=1){var o=d.a.toLower(a[i].name);var s=a[i].domain;if(o&&(-1!==o.indexOf(n)||-1!==s.indexOf(n))){r.push(a[i]);if(r.length===a.length)break}}return r}}]);function t(e){h()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderConnectedWorkspacesRow=a.renderConnectedWorkspacesRow.bind(a);a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.state={searchQuery:"",isLoading:true,workspaces:[]};return a}_()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props,n=a.referringUiElement,r=a.clogger;var i={event:ce};n&&(i.element=n);r.trackClickWithContext(i);this.props.fetchAndUpsertExternalTeams().then(function(e){t.setState(function(){return{isLoading:false,workspaces:e}})})}},{key:"handleSearchInputChange",value:function e(t){this.setState(function(){return{searchQuery:t.target.value}})}},{key:"renderSearchInput",value:function e(){if(this.state.isLoading)return null;return o.a.createElement(R["a"],{enabled:["feature_esc_connected_workspaces_search"]},o.a.createElement(x["a"],{className:"margin_top_150",placeholder:oe.t("Search by workspace..."),icon:"search",autoFocus:true,onChange:this.handleSearchInputChange}))}},{key:"renderConnectedWorkspacesRow",value:function e(t){if(!t.channels.length)return null;var a=this.props.onClose;return o.a.createElement(ie,{workspace:t,key:t.id,onClose:a})}},{key:"renderNoConnectedWorkspacesState",value:function e(){var t=this;return o.a.createElement(R["a"],{enabled:["feature_esc_connected_workspaces_search"]},o.a.createElement("div",{className:"p-connected_workspaces__empty"},o.a.createElement("span",{className:"p-connected_workspaces__no_shared_channels"},oe.rt("Shared channels let you work with other companies and teams, from right inside Slack. <a>Learn more</a>",null,function(e){var t=e.key,a=e.text;return o.a.createElement("a",{key:t,href:"https://get.slack.help/hc/articles/115004151183"},a)})),o.a.createElement(D["d"],{type:"outline",className:"margin_top_100",onClick:function e(){Object(F["c"])();t.props.onClose()}},oe.t("Create a Shared Channel"))))}},{key:"renderNoSearchResultsState",value:function e(){return o.a.createElement(R["a"],{enabled:["feature_esc_connected_workspaces_search"]},o.a.createElement("div",{className:"p-connected_workspaces__empty"},o.a.createElement("span",null,oe.rt("No matches found for <strong>{query}</strong>",{query:this.state.searchQuery}))))}},{key:"renderWorkspaces",value:function e(){var a=this.state,n=a.isLoading,r=a.searchQuery,i=a.workspaces;if(n)return null;if(!i.length)return this.renderNoConnectedWorkspacesState();var s=t.filterWorkspaces(r,i);if(!s.length)return this.renderNoSearchResultsState();var l=s.sort(function(e,t){return Object(A["a"])(e.name,t.name)});var c=l.map(this.renderConnectedWorkspacesRow);return o.a.createElement("div",null,o.a.createElement("div",{className:"p-connected_workspaces_row p-connected_workspaces_row--header"},o.a.createElement("div",{className:"p-connected_workspaces_row__item"},oe.t("Workspace")),o.a.createElement("div",{className:"p-connected_workspaces_row__item"},oe.t("Shared channels")),o.a.createElement("div",{className:"p-connected_workspaces_row__item"})),c)}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.currentTeam,r=a.onBack,i=a.onClose;var s=this.state.workspaces;var l=d.a.chain(s).filter(function(e){return e.channels.length>0}).size().value();var c=oe.rt("<strong>{currentTeamName}</strong> is currently sharing channels with {count, plural, =1 {<strong># other workspace</strong>.} other {<strong># other workspaces</strong>.}}",{currentTeamName:Object(T["getTeamDisplayName"])(n),count:l});var u=C()("p-connected_workspaces__list",{"p-connected_workspaces__list--loading":this.state.isLoading});return o.a.createElement(M["a"],{showBackButton:!!r,showCancelButton:false,showGoButton:false,onBack:function e(){t.props.onBack();t.props.onClose()},onCancel:i,modalClasses:"p-connected_workspaces_modal",title:oe.t("Manage shared channels")},o.a.createElement("div",{className:"p-connected_workspaces"},o.a.createElement("div",{className:"p-connected_workspaces__header"},o.a.createElement("div",{className:"p-connected_workspaces__header_description"},o.a.createElement(R["a"],{enabled:["feature_esc_connected_workspaces_search"]},s.length?c:oe.rt("Currently, <strong>{currentTeamName}</strong> isn\u2019t sharing any channels.",{currentTeamName:Object(T["getTeamDisplayName"])(n)})),o.a.createElement(R["a"],{disabled:["feature_esc_connected_workspaces_search"]},c))),this.renderSearchInput(),o.a.createElement("div",{className:u},o.a.createElement(P["a"],{className:"p-connected_workspaces__spinner",size:"jumbo"}),this.renderWorkspaces())))}}]);return t}(i["Component"]);ue.displayName="ConnectedWorkspaces";ue.defaultProps=le;var de=function e(t){return{currentTeam:Object(j["getCurrentTeam"])(t),clogger:Object(I["a"])({state:t})}};var pe={fetchAndUpsertExternalTeams:S["a"]};var fe=Object(c["connect"])(de,pe)(ue);var me=fe;a.d(t,"a",function(){return he});a.d(t,"b",function(){return ve});var he=function e(t,a){var n=document.getElementById("connected_workspaces_dialog_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(f["d"])(t);var s=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(n)})};Object(p["a"])(o.a.createElement(c["Provider"],{store:i},o.a.createElement(me,r()({},a,{onClose:s}))),n)};var ve=function e(t){l.a.unmountComponentAtNode(t)};var ge={mountConnectedWorkspaces:he,unmountConnectedWorkspaces:ve}},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(2);var b=a(732);var _=a(2065);var y={action:m.a.node};var k={action:null};var O=function(e){p()(t,e);function t(){o()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){return v.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(h["PureComponent"]);O.displayName="ActionBarItem";O.defaultProps=k;var w=O;var E={title:m.a.node.isRequired,actions:m.a.array,"data-qa":m.a.string};var C={actions:[],"data-qa":void 0};var j=function(e){p()(t,e);function t(){o()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var a=Object(g["map"])(t,function(e,t){return v.a.createElement(w,{key:t,action:e})});return a}},{key:"render",value:function e(){return v.a.createElement("div",{className:"p-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},v.a.createElement("span",r()({},Object(b["a"])(this.props),{className:"p-action_bar_title black"}),this.props.title),v.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(h["PureComponent"]);j.displayName="ActionBar";j.defaultProps=C;var S=t["a"]=j},,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){(function(t){e.exports=t["EXIF"]=a(1955)}).call(this,a(49))},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(14);var m=a(0);var h=a.n(m);var v=a(10);var g=a(2);var b=a.n(g);var _=a(54);var y=a(889);var k=a(151);var O=a(12);var w=a(1011);var E=a(11);var C=a(21);var j=a(240);var S=a(760);var I=a(1164);var T=a(1445);var N=a(1001);var A=new v["b"]("do_not_disturb");var R={snoozeNotifications:h.a.func.isRequired,currentChannel:h.a.object,featureSonicDnd:h.a.bool,featureBetterSnooze:h.a.bool,featureGlobalNav:h.a.bool,menuProps:h.a.object,openDndDialog:h.a.func,showCustomNewBadge:h.a.bool,setUserPrefByApi:h.a.func};var M={currentChannel:{},featureSonicDnd:false,featureBetterSnooze:false,featureGlobalNav:false,menuProps:{},openDndDialog:g["noop"],showCustomNewBadge:true,setUserPrefByApi:g["noop"]};var x=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"renderSettingsMenuItem",value:function e(){var t=this.props,a=t.currentChannel,n=t.featureSonicDnd;if(!n)return null;if(!a.id||Object(O["isIm"])(a))return null;var r=p.a.createElement(k["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var i=A.rt("Settings for {name} \u2026",{name:p.a.createElement("strong",null,r)});return p.a.createElement(_["b"],{label:i,onSelected:function e(){return Object(I["a"])(a.id)}})}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.menuProps,r=a.featureSonicDnd,i=a.featureBetterSnooze,o=a.featureGlobalNav,s=a.showCustomNewBadge;if(!r)return null;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var f=void 0;var m=void 0;if(i){l=A.t("Custom \u2026");c=A.rt("Custom \u2026 {new_badge}",{new_badge:p.a.createElement(y["a"],{className:"p-dnd_menu__new_pill"},A.t("NEW"))});u=A.t("Until tomorrow");d=A.t("Until next week");f=A.t("30 minutes");m=A.t("Pause notifications")}return p.a.createElement(_["f"],n,p.a.createElement(_["c"],{label:i?m:A.t("Snooze notifications")}),!i&&p.a.createElement(_["b"],{label:A.t("20 minutes"),onSelected:function e(){return t.props.snoozeNotifications({duration:20})},"data-qa":"snooze_btn_20"}),i&&p.a.createElement(_["b"],{label:f,onSelected:function e(){return t.props.snoozeNotifications({duration:30})},"data-qa":"snooze_btn_30"}),p.a.createElement(_["b"],{label:A.t("1 hour"),onSelected:function e(){return t.props.snoozeNotifications({duration:60})},"data-qa":"snooze_btn_60"}),p.a.createElement(_["b"],{label:A.t("2 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:120})},"data-qa":"snooze_btn_120"}),p.a.createElement(_["b"],{label:A.t("4 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:240})},"data-qa":"snooze_btn_240"}),!i&&p.a.createElement(_["b"],{label:A.t("8 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:480})},"data-qa":"snooze_btn_480"}),!i&&p.a.createElement(_["b"],{label:A.t("24 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:1440})},"data-qa":"snooze_btn_1440"}),i&&p.a.createElement(_["b"],{label:u,onSelected:function e(){t.props.snoozeNotifications({duration:Object(N["d"])()})},"data-qa":"snooze_btn_tomorrow"}),i&&p.a.createElement(_["b"],{label:d,onSelected:function e(){t.props.snoozeNotifications({duration:Object(N["c"])()})},"data-qa":"snooze_btn_next_week"}),i&&p.a.createElement(_["b"],{label:s?c:l,onSelected:function e(){t.props.openDndDialog();t.props.setUserPrefByApi({pref:"dnd_custom_new_badge_seen",value:true})},"data-qa":"snooze_btn_custom"}),p.a.createElement(_["d"],null),p.a.createElement(_["b"],{label:A.t("Do Not Disturb schedule \u2026"),onSelected:function e(){return Object(S["a"])("notifications","#prefs_dnd")}}),!o&&p.a.createElement(_["d"],null),!o&&this.renderSettingsMenuItem(),!o&&p.a.createElement(_["b"],{label:A.t("Your notification preferences \u2026"),onSelected:function e(){return Object(S["a"])("notifications")}}))}}]);return t}(d["PureComponent"]);x.displayName="DndDisabledMenu";x.defaultProps=M;var P=function e(t){return{featureBetterSnooze:Object(E["isFeatureEnabled"])(t,"feature_better_snooze"),featureGlobalNav:Object(E["isFeatureEnabled"])(t,"feature_global_nav"),showCustomNewBadge:!Object(C["getUserPref"])(t,"dnd_custom_new_badge_seen")}};var D={snoozeNotifications:w["e"],openDndDialog:T["a"],setUserPrefByApi:j["c"]};t["a"]=Object(f["connect"])(P,D)(x)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(48);var v={additionalItemCopy:p.a.string,item:p.a.object};var g={additionalItemCopy:"",item:{}};var b=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalItemCopy,n=t.item;var r=n.team.icon.image_44+" 1x, "+n.team.icon.image_88+" 2x";return m.a.createElement("div",{className:"c-lazy_filter_select__team_item",key:"team-list-item-"+n.id},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_list_icon",src:n.team.icon.image_44,srcSet:r}),m.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(h["getTeamDisplayName"])(n.team)," ",a&&m.a.createElement("span",null," - ",a)))}}]);return t}(f["PureComponent"]);b.displayName="LazyFilterSelectTeamListItem";t["a"]=b;b.defaultProps=g},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(48);var v={additionalItemCopy:p.a.string,item:p.a.object};var g={additionalItemCopy:"",item:{}};var b=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalItemCopy,n=t.item;return m.a.createElement("div",{className:"c-lazy_filter_select__team_token",key:"team-token-"+n.id},m.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_token_icon",src:n.team.icon.image_44}),m.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(h["getTeamDisplayName"])(n.team)," ",a&&m.a.createElement("span",null," - ",a)))}}]);return t}(f["PureComponent"]);b.displayName="LazyFilterSelectTeamToken";t["a"]=b;b.defaultProps=g},,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(14);var m=a(0);var h=a.n(m);var v=a(1);var g=a.n(v);var b=a(15);var _=a.n(b);var y=a(2);var k=a.n(y);var O=a(11);var w=a(19);var E=a(21);var C=a(12);var j=a(350);var S=a(18);var I=a(10);var T=a(707);var N=a(41);var A=a(20);var R=a(88);var M=a(227);var x=a(660);var P=a(338);var D=a(118);var F=a(760);var L=a(102);var B=a(2172);var U=a.n(B);var q=new I["b"]("prefs");var G={channelType:h.a.string,isGeneralChannel:h.a.bool,disableIgnoreAtChannelOption:h.a.bool,notificationsEnabled:h.a.bool,notificationDisabledType:h.a.oneOf(["not_allowed","not_yet_allowed","impossible",null]),onClose:h.a.func,desktop:h.a.string,mobile:h.a.string,muted:h.a.bool,suppressAtChannel:h.a.bool,channelId:h.a.string.isRequired,featureTurnMpdmNotifsOn:h.a.bool.isRequired,setChannelNotificationOverrideAndCallApi:h.a.func.isRequired};var H={channelType:"channel",isGeneralChannel:false,disableIgnoreAtChannelOption:false,notificationsEnabled:true,notificationDisabledType:null,onClose:k.a,desktop:"mentions_dms",mobile:"mentions_dms",muted:false,suppressAtChannel:false};var W=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=a.props,r=n.desktop,i=n.mobile;a.state={shouldUseDifferentSettingsForMobile:r!==i};a.onMuteCheckboxClick=a.onMuteCheckboxClick.bind(a);a.onSuppressAtChannelClick=a.onSuppressAtChannelClick.bind(a);a.onDesktopEverythingRadioClick=a.onDesktopEverythingRadioClick.bind(a);a.onDesktopMentionsDmsRadioClick=a.onDesktopMentionsDmsRadioClick.bind(a);a.onDesktopNothingRadioClick=a.onDesktopNothingRadioClick.bind(a);a.onMobileSelectChange=a.onMobileSelectChange.bind(a);a.onMobileOverrideCheckboxClick=a.onMobileOverrideCheckboxClick.bind(a);a.onOpenPreferencesDialogLinkClick=a.onOpenPreferencesDialogLinkClick.bind(a);return a}l()(t,[{key:"onMuteCheckboxClick",value:function e(){this.updateChannelNotificationSetting("muted",!this.props.muted)}},{key:"onSuppressAtChannelClick",value:function e(){this.updateChannelNotificationSetting("suppress_at_channel",!this.props.suppressAtChannel)}},{key:"onDesktopEverythingRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","everything",t)}},{key:"onDesktopMentionsDmsRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","mentions_dms",t)}},{key:"onDesktopNothingRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","nothing",t)}},{key:"onMobileSelectChange",value:function e(t){this.updateChannelNotificationSetting("mobile",t.target.value)}},{key:"onMobileOverrideCheckboxClick",value:function e(t){t.target.checked||this.updateChannelNotificationSetting("mobile",this.props.desktop);this.setState(function(e){return{shouldUseDifferentSettingsForMobile:!e.shouldUseDifferentSettingsForMobile}})}},{key:"onOpenPreferencesDialogLinkClick",value:function e(){this.props.onClose();Object(F["a"])("notifications","#growls_permission_div")}},{key:"updateChannelNotificationSetting",value:function e(t,a,n){var r=this.props.channelId;if(!r||!t||null==a)return null;return this.props.setChannelNotificationOverrideAndCallApi({name:t,value:a,channelId:r,sync:n}).then(function(){return null}).catch(function(e){Object(L["a"])(e);return null})}},{key:"getDisabledIgnoreAtChannelTooltipText",value:function e(){var t=this.props,a=t.isGeneralChannel,n=t.featureTurnMpdmNotifsOn;if(!n)return"";if(a)return q.rt("A Workspace Owner has restricted who can post to general and/or restricted the use of <b>{channel}</b> and/or <b>{everyone}</b> to admins and/or owners. These notifications can not be ignored.",{channel:Object(T["a"])({type:"channel"}),everyone:Object(T["a"])({type:"everyone"})});return q.rt("A Workspace Owner has restricted the use of <b>{channel}</b> to admins and/or owners. These notifications cannot be ignored.",{channel:Object(T["a"])({type:"channel"})})}},{key:"getIgnoreAtChannelQualifierText",value:function e(){var t=this.props,a=t.desktop,n=t.mobile,r=t.muted,i=t.disableIgnoreAtChannelOption,o=t.notificationsEnabled,s=t.featureTurnMpdmNotifsOn;if(!s)return"";if(i||r||!o)return"";if("mentions_dms"===a&&"everything"===n)return q.rt("(on desktop)");if("everything"===a&&"mentions_dms"===n)return q.rt("(on mobile)");return""}},{key:"getDisabledIgnoreAtChannelLabelSubtext",value:function e(){return g.a.createElement(N["d"],{tip:this.getDisabledIgnoreAtChannelTooltipText(),zIndex:"above_fs"},g.a.createElement("span",null,q.rt("Disabled by an admin")," ",g.a.createElement(S["a"],{type:"question_circle",inherit:true,align:"baseline"})))}},{key:"renderIgnoreAtChannelOption",value:function e(){var t=this.props,a=t.desktop,n=t.mobile,r=t.suppressAtChannel,i=t.disableIgnoreAtChannelOption,o=t.featureTurnMpdmNotifsOn;if(!o)return null;if("mentions_dms"!==a&&"mentions_dms"!==n)return"";var s=q.rt("Ignore notifications for <strong>@channel</strong> and <strong>@here</strong> {qualifier_text}",{qualifier_text:this.getIgnoreAtChannelQualifierText()});return g.a.createElement(R["a"],{htmlFor:"p-channel_notification_settings__suppress_checkbox",type:"inline",cursor:i?null:"pointer",disabled:i,text:s,subtext:i?this.getDisabledIgnoreAtChannelLabelSubtext():null},g.a.createElement(M["a"],{id:"p-channel_notification_settings__suppress_checkbox",checked:r&&!i,onChange:this.onSuppressAtChannelClick,disabled:i}))}},{key:"renderMutingOptions",value:function e(){var t=this.props,a=t.channelType,n=t.muted,r=t.featureTurnMpdmNotifsOn;if(!r)return null;var i="mpim"===a;var o=i?q.rt("group DM"):q.rt("channel");var s=q.rt("Mute this {channelTypeText}",{channelTypeText:o});var l=q.rt("You won't receive notifications for this {channelTypeText}, and it will appear grayed out in your channel list.",{channelTypeText:o});return g.a.createElement("div",{className:"margin_bottom_100"},g.a.createElement("h3",{className:"margin_bottom_50"},q.rt("Muting options")),g.a.createElement("div",{className:"margin_bottom_50"},g.a.createElement(R["a"],{htmlFor:"p-channel_notification_settings__mute_checkbox",cursor:"pointer",type:"inline",text:s,subtext:l},g.a.createElement(M["a"],{id:"p-channel_notification_settings__mute_checkbox",checked:n,onChange:this.onMuteCheckboxClick}))),this.renderIgnoreAtChannelOption())}},{key:"renderDisabledNotificationsWarning",value:function e(){var t=this;var a=this.props,n=a.notificationDisabledType,r=a.featureTurnMpdmNotifsOn;if(!r)return null;if("impossible"===n)return g.a.createElement(D["d"],{level:"warning"},q.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",null,function(e){var t=e.text;return g.a.createElement("a",{href:"/downloads",target:"_blank"},t)}));if("not_yet_allowed"===n)return g.a.createElement(D["d"],{level:"warning"},q.rt("You have not yet allowed desktop notification. Open the <a>Preferences Dialog</a> and follow the instructions to set them up.",null,function(e){var a=e.text;return g.a.createElement(A["a"],{type:"link",onClick:t.onOpenPreferencesDialogLinkClick},a)}));if("not_allowed"===n)return g.a.createElement(D["d"],{level:"warning"},q.rt("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.",{fallbackHash:"1bfe8c2c1bd598dfe77ef1aa51e43c16d70b8174"}));return null}},{key:"getRadioButtonLabelClassNames",value:function e(t){if(!t)return"";return _()("p-channel_notification_settings__notification_option",{selected:t===this.props.desktop})}},{key:"renderEnabledNotificationsOptions",value:function e(){var t=this.props,a=t.desktop,n=t.mobile;return g.a.createElement("div",null,g.a.createElement(x["a"],{className:"margin_bottom_25",legendId:"notification_options_title"},g.a.createElement(R["a"],{htmlFor:"p-channel_notification_settings__everything_checkbox",className:this.getRadioButtonLabelClassNames("everything"),cursor:"pointer",type:"inline",text:q.rt("All new messages")},g.a.createElement(P["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"everything",id:"p-channel_notification_settings__everything_checkbox",checked:"everything"===a,onChange:this.onDesktopEverythingRadioClick})),g.a.createElement(R["a"],{htmlFor:"p-channel_notification_settings__mentions_checkbox",className:this.getRadioButtonLabelClassNames("mentions_dms"),cursor:"pointer",type:"inline",text:q.rt("Just mentions & keywords")},g.a.createElement(P["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"mentions_dms",id:"p-channel_notification_settings__mentions_checkbox",checked:"mentions_dms"===a,onChange:this.onDesktopMentionsDmsRadioClick})),g.a.createElement(R["a"],{htmlFor:"p-channel_notification_settings__nothing_checkbox",className:this.getRadioButtonLabelClassNames("nothing"),cursor:"pointer",type:"inline",text:q.rt("Nothing")},g.a.createElement(P["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"nothing",id:"p-channel_notification_settings__nothing_checkbox",checked:"nothing"===a,onChange:this.onDesktopNothingRadioClick}))),g.a.createElement(R["a"],{htmlFor:"p-channel_notification_settings__mobile_override_checkbox",className:"bold",cursor:"pointer",type:"inline",text:q.rt("Use different settings for my mobile device")},g.a.createElement(M["a"],{id:"p-channel_notification_settings__mobile_override_checkbox",checked:this.state.shouldUseDifferentSettingsForMobile,onChange:this.onMobileOverrideCheckboxClick})),this.state.shouldUseDifferentSettingsForMobile&&g.a.createElement(R["a"],{htmlFor:"channel_notification_settings__mobile_override_select",className:"select small inline_block"},g.a.createElement("select",{id:"p-channel_notification_settings__mobile_override_select",className:"small auto_width block",value:n,onChange:this.onMobileSelectChange,tabIndex:0},g.a.createElement("option",{value:"everything"},q.rt("All new messages")),g.a.createElement("option",{value:"mentions_dms"},q.rt("Just mentions & keywords")),g.a.createElement("option",{value:"nothing"},q.rt("Nothing")))))}},{key:"renderNotificationOptions",value:function e(){var t=this.props,a=t.muted,n=t.notificationsEnabled;if(a)return"";var r="en-us";var i="https://get.slack.help/hc/"+r+"/articles/201355156-Desktop-notifications";return g.a.createElement("div",null,g.a.createElement("h3",{className:"margin_bottom_50"},g.a.createElement("span",{id:"notification_options_title"},q.rt("Notify me about\u2026")),g.a.createElement("a",{className:"p-channel_notification_settings__about_link",href:i,target:"_blank",rel:"noopener noreferrer"},q.rt("About notifications")," ",g.a.createElement(S["a"],{type:"question_circle"}))),n?this.renderEnabledNotificationsOptions():this.renderDisabledNotificationsWarning())}},{key:"render",value:function e(){if(!this.props.featureTurnMpdmNotifsOn)return null;return g.a.createElement("div",{className:"p-channel_notification_settings"},this.renderMutingOptions(),this.renderNotificationOptions())}}]);return t}(v["Component"]);W.displayName="ChannelNotificationSettings";W.defaultProps=H;function V(e,t){var a=Object(E["getTeamPref"])(e,"who_can_at_channel");var n=Object(E["getTeamPref"])(e,"who_can_at_everyone");var r=Object(E["getTeamPref"])(e,"who_can_post_general");if("admin"===a||"owner"===a)return true;if(t&&("admin"===r||"owner"===r||"admin"===n||"owner"===n))return true;return false}function z(e,t){var a=t.channelId,n=t.onClose;if(!a){Object(L["a"])(new Error("Could not render ChannelNotificationSettings: No channel ID found."));return{featureTurnMpdmNotifsOn:Object(O["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var i=Object(w["getChannelById"])(e,a);if(!i){Object(L["a"])(new Error("Could not render ChannelNotificationSettings: No channel found."));return{featureTurnMpdmNotifsOn:Object(O["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var o=Object(C["getChannelType"])(i);var s=Object(C["isGeneral"])(i);var l=V(e,s);var c=Object(j["g"])();var u=Object(j["c"])(e,a);var d=Object(j["d"])(e,a);var p=!!Object(E["getNotificationsChannelPref"])(e,a,"muted");var f=!!Object(E["getNotificationsChannelPref"])(e,a,"suppress_at_channel");return r()({channelId:a,channelType:o,isGeneralChannel:s,disableIgnoreAtChannelOption:l},c,{onClose:n,desktop:u,mobile:d,muted:p,suppressAtChannel:f,featureTurnMpdmNotifsOn:Object(O["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")})}var Q={setChannelNotificationOverrideAndCallApi:E["setChannelNotificationOverrideAndCallApi"]};t["a"]=Object(f["connect"])(z,Q)(W)},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(2);var r=a.n(n);var i=a(10);var o=new i["b"]("channel_sidebar");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.displayName,n=e.isShared,i=e.isOrgShared,s=e.isYou,l=e.isMuted,c=e.hasUnreads,u=e.hasDraft,d=e.isArchived,p=e.unreadCount,f=e.badgeCount,m=e.isSelected,h=e.userActive,v=e.isTyping;var g=[m?o.t("selected"):null];if("channel"===t)g.push(n||i?o.t("shared channel"):o.t("channel"));else if("private"===t)g.push(o.t("private channel"));else if("mpim"===t)g.push(o.t("group direct message",{fallbackHash:"e50045943dfaafc5cbbee9a7d1aba5fb2ce026da"}));else if("im"===t){g.push(o.t("direct message"));g.push(h?o.t("active"):o.t("away"))}d&&g.push(o.t("archived"));l&&g.push(o.t("muted"));c&&p&&!f&&g.push(o.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:p}));f&&g.push(o.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:f}));u&&g.push(o.t("has draft"));v&&g.push(o.t("typing"));var b=s?o.t("{name} (you)",{name:a}):a;var _=r()(g).filter(r.a.identity).join(", ");return b+" ("+_+")"}},function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"b",function(){return d});var n=a(67);var r=a.n(n);var i=a(214);var o=a(708);var s=a(823);var l=a(10);var c=new l["b"]("menu");var u=function e(t){var a=t.id,n=t.name,r=t.isChannel,l=t.isStarred,u=t.canMute,d=t.canLeave;var p=void 0;var f=void 0;var m=void 0;var h=void 0;var v=void 0;if(r){p=c.t("Star Channel");f=c.t("Unstar Channel");m=c.t("Mute {channel}",{channel:"#"+n});h=c.t("Unmute {channel}",{channel:"#"+n});v=c.t("Leave {channel}",{channel:"#"+n})}else{p=c.t("Star Conversation");f=c.t("Unstar Conversation");m=c.t("Mute Conversation");h=c.t("Unmute Conversation");v=c.t("Leave Conversation")}var g=[{label:l?f:p,click:function e(){return Object(s["a"])(null,a)},id:"star:"+a}];d&&g.push({label:v,click:function e(){return Object(i["o"])(a)},id:"leave:"+a});u&&g.push({label:Object(o["b"])(a)?h:m,click:function e(){return Object(o["c"])(a)},id:"mute:"+a});return g};var d=function e(t){var a=t.split(":"),n=r()(a,2),l=n[0],c=n[1];switch(l){case"star":Object(s["a"])(null,c);break;case"mute":Object(o["c"])(c);break;case"leave":Object(i["o"])(c);break;default:break}}},function(e,t,a){"use strict";a.d(t,"b",function(){return r});a.d(t,"a",function(){return i});var n=a(13);var r=Object(n["c"])("TS.ui.jumper.start",function(){return null});var i=Object(n["c"])("TS.ui.jumper.getSessionId",function(){return null});var o={start:r}},function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(14);var l=a(262);var c=a.n(l);var u=a(21);var d=a(167);var p=a(748);var f=a(1106);var m=a(17);var h={theme:r.a.oneOf(["custom_theme","default","default_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme","neue_theme","cloud_theme","kaiyo_theme","midnight_theme","stark_theme"]),custom:r.a.object,useGlobalNav:r.a.bool};var v={theme:"default_theme",custom:{},useGlobalNav:false};var g=function e(t){var a=Object(f["b"])(t.theme,t.custom,{useGlobalNav:t.useGlobalNav});if(!a){Object(m["b"])().warn('Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var n=Object(p["c"])(a,{useGlobalNav:t.useGlobalNav});var r=a.text_color;var i=Object(p["b"])(a.column_bg,25);var s=Object(p["b"])(a.column_bg,35);var l=Object(d["a"])(a);var c="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+a.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+n+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+i+";\n\t\t\tcolor: "+n+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+s+";\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+a.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+a.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(p["e"])(r,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: 0 0 0 1px "+r+", 0 0 0 5px "+Object(p["e"])(r,.3)+";\n\t\t}\n\t\t.p-channel_sidebar__channel.focus-ring .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.focus-ring .p-channel_sidebar__name {\n\t\t\tbox-shadow: 0 0 0 1px "+r+", 0 0 0 5px "+Object(p["e"])(r,.3)+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+i+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+s+";\n\t\t}\n\n\t\t/** Global Nav (WIP) **/\n\t\t.p-global_nav__top {\n\t\t\tbackground: "+l.nav_bar_bg+";\n\t\t\tcolor: "+l.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__top:after {\n\t\t\tbackground: "+l.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__sidebar {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-global_nav__top_user_presence {\n\t\t\tbackground: "+l.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--active {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--away {\n\t\t\tcolor: "+l.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__sidebar_jumper:hover,\n\t\t.p-global_nav__sidebar_button:hover {\n\t\t\tcolor: "+r+";\n\t\t}\n\t";return o.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},c)};g.displayName="Theme";g.defaultProps=v;var b=Object(l["createSelector"])([function(e){return Object(u["getUserPref"])(e,"sidebar_theme_custom_values")}],function(e){try{return JSON.parse(e)}catch(e){return{}}});var _=function e(t){var a=Object(u["getUserPref"])(t,"sidebar_theme");var n=b(t);return{theme:a,custom:n,useGlobalNav:Object(d["b"])(t)}};t["a"]=Object(s["connect"])(_)(g)},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(6);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(1);var v=a.n(h);var g=a(14);var b=a(15);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(11);var w=a(50);var E=a(499);var C=a(10);var j=a(20);var S=a(131);var I=a(3453);var T=new C["b"]("files");var N={status:k.a.oneOf([E["IDLE"],E["UPLOADING"],E["COMPLETE"],E["CANCELED"]]),fileName:k.a.string,percentComplete:k.a.number,cancelable:k.a.bool,cancelUpload:k.a.func,isRetry:k.a.bool,teamId:k.a.string,featureModernFileUpload:k.a.bool};var A={fileName:"",percentComplete:0,status:E["UPLOADING"],cancelable:false,cancelUpload:f["noop"],isRetry:false,teamId:void 0,featureModernFileUpload:false};var R=function(e){p()(t,e);u()(t,null,[{key:"renderComplete",value:function e(){var t=T.t("Processing uploaded file\u2026 complete!");return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},v.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){o()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.cancel=a.cancel.bind(a);a.clearOverrides=a.clearOverrides.bind(a);a.doneProlongingStatus=a.doneProlongingStatus.bind(a);a.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return a}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var a=this;var n=[E["COMPLETE"],E["CANCELED"]];this.props.status!==t.status&&Object(f["includes"])(n,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(a.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function e(){var t=this.props.status;var a=this.state.statusOverride;return a||t}},{key:"getFileName",value:function e(){var t=this.props.fileName;var a=this.state.fileNameOverride;return a||t}},{key:"cancel",value:function e(){var t=this.props,a=t.featureModernFileUpload,n=t.teamId;var r=this.props.cancelUpload;if(a){var i=Object(I["a"])(n);r=i.cancelCurrentUpload.bind(i)}setTimeout(function(){r()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===E["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderCanceled",value:function e(){var t=this.getFileName();var a=T.t("Canceling {fileName}\u2026",{fileName:Object(C["m"])(t)});return v.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},v.a.createElement("div",{className:"p-file_upload_banner__text"},a))}},{key:"renderUploading",value:function e(){var t=this.props,a=t.fileName,n=t.percentComplete,r=t.cancelable,i=t.isRetry;var o=n>=99;var s=void 0;if(o)s=T.t("Processing uploaded file\u2026");else{s=i?T.t("Re-uploading {fileName}",{fileName:Object(C["m"])(a)}):T.t("Uploading {fileName}",{fileName:Object(C["m"])(a)});s+="\u2026"+n+"%"}var l=_()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":o});var c={width:n+"%"};var u=null;r&&!o&&(u=v.a.createElement(j["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},T.t("cancel")));return[v.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},v.a.createElement("span",{className:l,style:c})),v.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},s),u]}},{key:"render",value:function e(){var a=this.getStatus();var n=this.state.fading;if(a===E["IDLE"])return null;var r=void 0;r=a===E["UPLOADING"]?this.renderUploading():a===E["COMPLETE"]?t.renderComplete():this.renderCanceled();var i=_()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":n});return v.a.createElement("div",{className:i},r)}}]);return t}(h["PureComponent"]);R.displayName="FileUploadBanner";R.defaultProps=A;function M(e){var t=Object(E["getFileUploadState"])(e);var a=Object(w["getCurrentTeam"])(e);return r()({},t,{teamId:a.id,cancelUpload:S["a"],featureModernFileUpload:Object(O["isFeatureEnabled"])(e,"feature_modern_file_upload")})}t["a"]=Object(g["connect"])(M)(R)},function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return i});var n=a(13);var r=Object(n["c"])("TS.client.ui.files.backButtonOnClick");var i=Object(n["c"])("TS.client.ui.files.chooseFile")},function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(1);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(2);var l=a.n(s);var c=a(10);var u=a(713);var d=a(121);var p=a(18);var f=a(2071);var m=a.n(f);var h=new c["b"]("comments");var v={toggleList:o.a.func,commentCount:o.a.number,expanded:o.a.bool};var g={toggleList:s["noop"],commentCount:0,expanded:false};function b(e){var t=e.toggleList,a=e.commentCount,n=e.expanded;return r.a.createElement("div",{className:"p-comment_list__toggle_container"},r.a.createElement(u["a"],{onClick:t},h.t("See older comments")),r.a.createElement(d["a"],{className:"p-comment_list__toggle_count_button",onClick:t,ariaLabel:h.t("Click to expand")},r.a.createElement(p["b"],{type:"comment-alt"}),r.a.createElement("span",{className:"p-comment_list__toggle_count"},a),n?r.a.createElement(p["b"],{type:"caret-down",className:"p-comment_list__toggle_caret"}):r.a.createElement(p["b"],{type:"caret-right",className:"p-comment_list__toggle_caret"})))}b.displayName="CommentListToggle";b.defaultProps=g},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(15);var g=a.n(v);var b=a(2);var _=a.n(b);var y=a(72);var k=a(150);var O=a(497);var w=a(667);var E=a(876);var C={file:y["a"].File().isRequired,clogLinkClick:m.a.func,className:m.a.string,fullWidth:m.a.bool,onClick:m.a.func,previewFile:m.a.func,useRowAction:m.a.bool};var j={clogLinkClick:b["noop"],className:null,fullWidth:false,onClick:b["noop"],previewFile:b["noop"],useRowAction:false};var S=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}o()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file);this.props.previewFile({fileId:this.props.file.id})}},{key:"render",value:function e(){var t=this.props,a=t.file,n=t.clogLinkClick,r=t.fullWidth,i=t.useRowAction;var o=g()("p-contextual_file",this.props.className);return p.a.createElement(O["a"],{file:a,className:o,fullWidth:r,clogLinkClick:n,useRowAction:i},p.a.createElement(w["a"],{file:a,onClick:this.onClick},p.a.createElement(E["a"],{file:a})))}}]);return t}(d["PureComponent"]);S.displayName="ContextualFile";S.defaultProps=j;t["a"]=Object(h["connect"])(null,{previewFile:k["c"]})(S)},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(2);var r=a.n(n);var i=a(13);var o=Object(i["c"])("TS.ui.channel_invite_modal.startInviteToChannelModal",r.a.noop)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(2);var g=a.n(v);var b=a(15);var _=a.n(b);var y=a(69);var k=a(150);var O=a(1156);var w=a(165);var E=a(348);var C=a(18);var j=a(20);var S=a(63);var I={flexName:m.a.string,flexParams:m.a.arrayOf(m.a.string),flexOrigin:m.a.string,flexOriginId:m.a.string,previewFile:m.a.func,showUserGroupList:m.a.func,setSecondaryView:m.a.func,size:m.a.oneOf(["large","medium"]),className:m.a.string};var T={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:v["noop"],showUserGroupList:v["noop"],setSecondaryView:v["noop"],size:"large",className:void 0};var N=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.getOrigin=a.getOrigin.bind(a);a.openOrigin=a.openOrigin.bind(a);return a}o()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.flexOrigin,n=t.flexName;if(a)return this.openOrigin();switch(n){case"files":return Object(S["a"])()?this.props.setSecondaryView({flexName:"files"}):Object(E["c"])("files");case"team":return Object(w["m"])();case"groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,a=t.flexOrigin,n=t.flexName,r=t.flexParams;var i=r&&r[0];if(a)return a;switch(n){case"files":return Object(O["a"])(i)?"files":null;case"team":case"groups":return i?"groups":null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,a=t.flexOrigin,n=t.flexOriginId;switch(a){case"member_preview":return Object(w["m"])();case"starred_items":return this.props.setSecondaryView({flexName:"starred_items"});case"channel_page":case"group_page":case"im_page":return Object(E["c"])("details");case"mentions":return Object(E["c"])("mentions");case"file_details":return Object(O["a"])(n)?this.props.previewFile({fileId:n}):Object(E["c"])("files");default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;var a=this.props,n=a.size,r=a.className;var i="chevron-"+n+"-left";return p.a.createElement(j["c"],{className:_()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",r),onClick:this.onClick},p.a.createElement(C["b"],{type:i}))}}]);return t}(d["Component"]);N.displayName="FlexBack";N.defaultProps=T;var A=function e(t){return{flexName:Object(y["getSecondaryView"])(t),flexParams:Object(y["getFlexParams"])(t),flexOrigin:Object(y["getFlexOrigin"])(t),flexOriginId:Object(y["getFlexOriginId"])(t)}};t["a"]=Object(h["connect"])(A,{previewFile:k["c"],showUserGroupList:k["i"],setSecondaryView:y["setSecondaryView"]})(N)},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(371);var r=a(683);var i=a(44);function o(e,t){return function(a,o){var s=Object(i["getMessageByTimestamp"])(o(),e,t);if(!s)return;a(Object(n["a"])({channelId:e,ts:t}));a(Object(r["a"])(s,t))}}},function(e,t,a){"use strict";a.d(t,"a",function(){return n});function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,n=e.isEphemeral,r=e.isBroadcast,i=e.isCustomResponse,o=e.isSliHighlight;if(r)return"broadcast";if(t)return"pinned";if(a)return"starred";if(n)return"ephemeral";if(i)return"custom_response";if(o)return"sli_highlight";return}},function(e,t,a){"use strict";a.d(t,"a",function(){return g});var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(97);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(62);var v=a(218);function g(e){return function(t){p()(a,t);function a(t){r()(this,a);var n=l()(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));n.uniqueId=Object(f["uniqueId"])();n.name=Object(f["snakeCase"])(e.name);n.logMetrics=Object(v["a"])(1);return n}o()(a,[{key:"componentWillMount",value:function e(){var t;this.logMetrics&&h["e"]("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillMount",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillMount",this)).call.apply(t,[this].concat(r))}},{key:"componentDidMount",value:function e(){var t;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this)).call.apply(t,[this].concat(r));this.logMetrics&&h["g"]("react_"+this.name+"_mount","react_"+this.name+"_mount_mark_"+this.uniqueId)}},{key:"componentWillUpdate",value:function e(){var t;this.logMetrics&&h["e"]("react_"+this.name+"_update_mark_"+this.uniqueId);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUpdate",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUpdate",this)).call.apply(t,[this].concat(r))}},{key:"componentDidUpdate",value:function e(){var t;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidUpdate",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(r));this.logMetrics&&h["g"]("react_"+this.name+"_update","react_"+this.name+"_update_mark_"+this.uniqueId)}}]);return a}(e)}},function(e,t,a){"use strict";var n=a(1);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(76);var l=a(2);var c=a.n(l);var u=a(10);var d=a(161);var p=a(734);var f=a(476);var m=new u["b"]("attachments");var h={isExpanded:o.a.bool,onClick:o.a.func,attachmentsOverLimitCount:o.a.number};var v={isExpanded:false,onClick:l["noop"],attachmentsOverLimitCount:0};var g=function e(t){var a=t.isExpanded,n=t.onClick,i=t.attachmentsOverLimitCount;return r.a.createElement(d["a"],{enabled:["feature_react_messages"]},r.a.createElement("div",{className:"c-message_attachment"},r.a.createElement(p["a"],null),r.a.createElement("div",{className:"c-message_attachment__body"},r.a.createElement(f["a"],{onClick:n,text:a?m.t("Show fewer items"):m.t("{count, plural, =1 {Show remaining # item} other {Show remaining # items}}",{count:i})}))))};g.displayName="MessageAttachmentOverLimitButton";g.defaultProps=v;t["a"]=Object(s["pure"])(g)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(2);var g=a.n(v);var b=a(15);var _=a.n(b);var y=a(72);var k=a(29);var O=a(164);var w=a(610);var E=a(787);var C=a(11);var j=a(78);var S=a(19);var I=a(150);var T=a(23);var N=a(1430);var A=a(36);var R=a(465);var M=a(361);var x=a(10);var P=a(286);var D=a(457);var F=a(63);var L=a(454);var B=a(1431);var U=a(969);var q=a(794);var G=a(189);var H=a(3288);var W=a(1169);var V=a(1168);var z=a(70);var Q=a(77);var K=a(54);var Y=a(427);var J=a(1124);var Z=a(825);var X=new x["b"]("message");var $={reactionKey:m.a.string,fileId:m.a.string,fileIds:m.a.arrayOf(m.a.string),comment:m.a.string,replies:m.a.arrayOf(m.a.shape({ts:m.a.string,user:m.a.string})),teamId:m.a.string.isRequired,replyCount:m.a.number,ts:m.a.string,rollup:y["a"].Rollup(),threadTs:m.a.string,channel:m.a.object,file:m.a.object,subtype:m.a.string,channelId:m.a.string,theme:m.a.oneOf(["dense","light"]),isStarred:m.a.bool,isPinned:m.a.bool,isEphemeral:m.a.bool,isFileAuthorExternal:m.a.bool,isReply:m.a.bool,messageContainerType:m.a.string,editHandler:m.a.func,unreadHandler:m.a.func,onMenuOpen:m.a.func,onMenuClose:m.a.func,onEmojiPickerOpen:m.a.func,onEmojiPickerClose:m.a.func,showComment:m.a.bool,showShare:m.a.bool,showReact:m.a.bool,showJump:m.a.bool,jumpOrigin:m.a.string,pinMessage:m.a.func,unpinMessage:m.a.func,updateStar:m.a.func,featureFileThreads:m.a.bool,renderMenuBelowTrigger:m.a.bool,renderOffscreen:m.a.bool.isRequired,openModal:m.a.func,previewFile:m.a.func,showThread:m.a.func,addReminderForMessage:m.a.func,clogger:m.a.object.isRequired};var ee={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,isReply:false,messageContainerType:void 0,editHandler:g.a.noop,unreadHandler:g.a.noop,onMenuOpen:g.a.noop,onMenuClose:g.a.noop,onEmojiPickerOpen:g.a.noop,onEmojiPickerClose:g.a.noop,showComment:true,showShare:true,showReact:true,showJump:false,jumpOrigin:null,pinMessage:g.a.noop,unpinMessage:g.a.noop,updateStar:g.a.noop,featureFileThreads:false,renderMenuBelowTrigger:true,renderOffscreen:false,openModal:g.a.noop,previewFile:g.a.noop,showThread:g.a.noop,addReminderForMessage:g.a.noop};var te={x:0,y:-8};var ae={x:4,y:-16};var ne={x:50,y:0};var re=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={moreActionsMenuOpen:false,subscribed:"loading"};Object(v["bindAll"])(a,["onAddReaction","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu"]);return a}o()(t,[{key:"onStar",value:function e(){var t=this.props,a=t.channelId,n=t.ts,r=t.fileId,i=t.fileIds,o=t.featureFileThreads,s=t.comment,l=t.subtype,c=t.isStarred;var u={channel:a,timestamp:n};r&&(u={file:r});if(s&&"file_comment"===l){var d=o&&i&&i[0]||r;u={file_comment:s,file_comment_file:d}}this.props.updateStar(!c,u);var p=c?k["o"].UNSTAR_MESSAGE_BUTTON:k["o"].STAR_MESSAGE_BUTTON;this.trackAction(p)}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object(L["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(k["o"].ADD_REACTION_BUTTON)}},{key:"onComment",value:function e(){if(this.props.fileId&&!this.props.featureFileThreads)this.props.previewFile({fileId:this.props.fileId});else{var t=this.props.threadTs||this.props.ts;this.props.showThread({channelId:this.props.channel.id,threadTs:t})}var a=this.state.subscribed?k["o"].REPLY_TO_THREAD_BUTTON:k["o"].START_A_THREAD_BUTTON;this.trackAction(a)}},{key:"onShare",value:function e(){this.props.fileId&&"file_comment"!==this.props.subtype?Object(U["a"])(this.props.fileId,false,false,this.props.channel,true):Object(B["a"])(this.props.ts,this.props.channel);this.trackAction(k["o"].SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function e(t){this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(k["o"].EDIT_MESSAGE_BUTTON,true)}},{key:"onDelete",value:function e(){var t=this.props,a=t.channelId,n=t.ts;this.props.openModal({element:p.a.createElement(V["a"],{channelId:a,ts:n})});this.trackAction(k["o"].DELETE_MESSAGE_BUTTON,true)}},{key:"onMarkUnread",value:function e(){this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.trackAction(k["o"].MARK_UNREAD_BUTTON,true)}},{key:"onRemind",value:function e(t){var a=this;var n=this.props,r=n.channel,i=n.ts,o=n.subtype;this.trackAction(k["o"].REMIND_ME_BUTTON,true);return function(){a.props.addReminderForMessage({time:t,message_channel:r.id,message_ts:i,respond_in_channel:"thread_broadcast"===o})}}},{key:"onSubscribe",value:function e(){var t=this.props,a=t.replies,n=t.ts,r=t.channel;var i=this.state.subscribed;var o=a.length&&a[a.length-1].ts;Object(q["e"])(r.id,n,!i,o);var s=i?k["o"].UNFOLLOW_MESSAGE_BUTTON:k["o"].FOLLOW_MESSAGE_BUTTON;this.trackAction(s,true)}},{key:"onPin",value:function e(){var t=this.props,a=t.ts,n=t.channel,r=t.isPinned,i=t.pinMessage,o=t.unpinMessage;if(r){o({ts:a,channelId:n.id});this.trackAction(k["o"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{i({ts:a,channelId:n.id});this.trackAction(k["o"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onCopyLink",value:function e(){var t=this.props,a=t.channel,n=t.ts,r=t.threadTs,i=t.file,o=t.subtype;var s=Object(G["a"])(a.id,n,r);i&&"file_comment"!==o&&(s=i.permalink);Object(M["writeText"])(s);this.trackAction(k["o"].COPY_LINK_BUTTON,true)}},{key:"onJump",value:function e(){var t=this.props,a=t.channel,n=t.ts,r=t.teamId,i=t.isReply,o=t.jumpOrigin;var s=this.props.threadTs||this.props.ts;if(i)this.props.showThread({channelId:a.id,threadTs:s,highlightTs:n,origin:o});else{var l=Object(P["a"])({channelId:a.id,ts:n,threadTs:s});Object(P["d"])(r,l)}}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,a=t.channelId,n=t.ts;this.props.openModal({element:p.a.createElement(W["a"],{channelId:a,ts:n})});this.trackAction(k["o"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onMoreActionsMenuOpen",value:function e(){this.setState(function(){return{moreActionsMenuOpen:true}});this.props.onMenuOpen();this.trackAction(k["o"].MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function e(t,a){if(a.id===z["SLACK_ACTION_IDS"].editMessage){this.onEdit(t);return true}return false}},{key:"isAutomated",value:function e(){return Object(R["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n={action:k["m"].CLICK,ui_element:t};a&&(n.step=k["p"].MORE_ACTIONS_MENU);var r=this.props.clogger;r.track(k["h"].MSG_ACTION,{contexts:{ui_context:n}})}},{key:"renderStar",value:function e(){var t=this.props,a=t.fileId,n=t.subtype,r=t.isStarred,i=t.isEphemeral,o=t.channel;if(i||"tombstone"===n)return null;var s="message";a&&(s="file_comment"===n?"file comment":"file");var l=void 0;l=r?"file"===s?X.t("Unstar file"):"file comment"===s?X.t("Unstar file comment"):X.t("Unstar message"):"file"===s?X.t("Star file"):"file comment"===s?X.t("Star file comment"):X.t("Star message");return p.a.createElement(Z["a"],{iconType:r?"small-star-filled":"small-star",label:l,onClick:this.onStar,"data-qa":"star_message",tooltipPosition:o?"top":"top-right"})}},{key:"renderShare",value:function e(){if(!this.props.showShare)return null;var t=this.props,a=t.ts,n=t.subtype,r=t.featureFileThreads,i=t.isEphemeral;if(i||"tombstone"===n||Object(A["isTempTs"])(a))return null;if(r&&"file_comment"===n)return null;var o="file_share"===n||"file_mention"===n?X.t("Share file \u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):X.t("Share message \u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return p.a.createElement(Z["a"],{iconType:"share-action",label:o,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function e(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(Object(F["a"])())return p.a.createElement(H["a"],{reactionKey:this.props.reactionKey,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose},p.a.createElement(Z["a"],{iconType:"small-reaction",label:X.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),"data-qa":"add_reaction_action"}));return p.a.createElement(Z["a"],{iconType:"small-reaction",label:X.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderJump",value:function e(){if(!this.props.showJump)return null;if(!this.props.channel)return null;return p.a.createElement(Z["a"],{iconType:"jump",label:X.t("Jump"),onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function e(){if(!this.props.showComment)return null;if(this.props.isFileAuthorExternal)return null;if(this.isAutomated()||this.isTemp()||this.props.isEphemeral)return null;if(this.props.featureFileThreads&&Object(D["b"])(this.props.subtype))return null;var t=void 0;t=this.props.fileId&&!this.props.featureFileThreads?X.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"}):this.props.replyCount||"thread_broadcast"===this.props.subtype?X.t("Reply to thread"):X.t("Start a thread");return p.a.createElement(Z["a"],{iconType:"small-reply",label:t,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function e(){var t=this.props,a=t.renderMenuBelowTrigger,n=t.channel;if(!n)return null;return p.a.createElement(K["e"],{renderMenu:this.renderMoreActionsMenu,position:a?"right-bottom":"top-right",allowanceX:a?ne.x:0,offsetX:a?ae.x:te.x,offsetY:a?ae.y:te.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},p.a.createElement(Z["a"],{iconType:"small-ellipsis",label:X.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"}),tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function e(t){var a=this.props,n=a.channel,r=a.ts,i=a.messageContainerType,o=a.rollup;var s=t.onTriggerClose,l=t.onMenuItemSelected;return p.a.createElement(Y["a"],{rollup:o,ts:r,channelId:n.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:s,onMenuItemSelected:l,messageContainerType:i})}},{key:"render",value:function e(){var t=_()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var a=X.t("Message actions");return p.a.createElement(J["a"],{className:t,ariaLabel:a},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]);return t}(d["PureComponent"]);re.displayName="MessageActions";re.defaultProps=ee;var ie=function e(t,a){var n=a.fileId,r=a.channelId;return{channel:Object(S["getChannelById"])(t,r),file:Object(j["getFileById"])(t,n),isFileAuthorExternal:Object(j["isFileAuthorExternal"])(t,n),featureFileThreads:Object(C["isFeatureEnabled"])(t,"feature_file_threads"),teamId:Object(T["getTeamId"])(t),clogger:Object(O["a"])({state:t})}};var oe={pinMessage:w["pinMessage"],unpinMessage:w["unpinMessage"],updateStar:E["a"],openModal:Q["openModal"],previewFile:I["c"],showThread:I["g"],addReminderForMessage:N["a"]};t["a"]=Object(h["connect"])(ie,oe)(re)},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(0);var r=a.n(n);var i=a(25);var o=a(22);var s=Object(o["a"])("Adds a reminder for a message via API call",function(e,t,a){return e(Object(i["a"])({method:"reminders.addFromMessage",args:a}))});s.propTypes={time:r.a.oneOf(["in 20 minutes","in 1 hour","in 3 hours","tomorrow","next week"]).isRequired,message_channel:r.a.string.isRequired,message_ts:r.a.string.isRequired,respond_in_channel:r.a.bool}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(13);var r=Object(n["c"])("TS.ui.share_message_dialog.start",function(){return null});var i={start:r}},function(e,t,a){"use strict";var n=a(9);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(2);var m=a.n(f);var h=a(0);var v=a.n(h);var g=a(1);var b=a.n(g);var _=a(14);var y=a(11);var k=a(77);var O=a(44);var w=a(19);var E=a(21);var C=a(26);var j=a(346);var S=a(1169);var I=a(1168);var T=a(990);var N=a(70);var A=a(4);var R=a(683);var M=Object(A["e"])("Count the number of characters over the message length limit",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.text;var i=Object(R["c"])(t(),{channelId:n,text:r}),o=i.rawText;return Math.max(0,o.length-N["MAX_MESSAGE_INPUT_LENGTH"])});M.propTypes={channelId:v.a.string,text:v.a.string};var x=M;var P=a(12);var D=a(36);var F=a(20);var L=a(18);var B=a(430);var U=a(900);var q=a(63);var G=a(10);var H=a(657);var W=a(171);var V=a(3460);var z=a(143);var Q=a(454);var K=a(761);var Y=a(666);var J=60;var Z=1e3;var X=new G["b"]("message");var $={ts:v.a.string.isRequired,text:v.a.string.isRequired,saveMessageEdit:v.a.func,channelId:v.a.string,viewContext:v.a.string,isSelfIm:v.a.bool,setDidRequestToStopEditing:v.a.func,updateEditState:v.a.func,stopEditingMessage:v.a.func,updateHasUnsavedChanges:v.a.func,canDelete:v.a.bool,canUnbroadcast:v.a.bool,initialEditText:v.a.string,initialFormattedText:v.a.oneOfType([v.a.string,v.a.object]),didRequestToStopEditing:v.a.bool,editWindowMin:v.a.number,isAdminUser:v.a.bool,useJumbomoji:v.a.bool,messageContainerType:v.a.string,openModal:v.a.func,countCharsOverMessageLimit:v.a.func,featureFileThreads:v.a.bool};var ee={saveMessageEdit:m.a.noop,channelId:null,viewContext:void 0,isSelfIm:false,setDidRequestToStopEditing:m.a.noop,updateEditState:m.a.noop,stopEditingMessage:m.a.noop,updateHasUnsavedChanges:m.a.noop,canDelete:true,canUnbroadcast:false,initialEditText:null,initialFormattedText:void 0,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:m.a.noop,countCharsOverMessageLimit:m.a.identity,featureFileThreads:false};var te="message_pane_edit_input";function ae(e){Object(Q["a"])({e:e,input_to_fill:"#"+te,offset_y:-8})}var ne=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setTextyRef=a.setTextyRef.bind(a);a.maybeSave=a.maybeSave.bind(a);a.onTimerInterval=a.onTimerInterval.bind(a);a.renderTimeoutErrorDialog=a.renderTimeoutErrorDialog.bind(a);a.renderLengthErrorDialog=a.renderLengthErrorDialog.bind(a);a.renderUnknownErrorDialog=a.renderUnknownErrorDialog.bind(a);a.stopEditingMessage=a.stopEditingMessage.bind(a);a.handleSaveEditError=a.handleSaveEditError.bind(a);a.onEnter=a.onEnter.bind(a);a.onTextChange=a.onTextChange.bind(a);a.renderInput=a.renderInput.bind(a);a.texty=null;a.syncEditStateOnUnmount=true;a.editWindowTimeout=null;a.componentDidUnmount=false;a.enableBroadcastKeywords=!(a.props.messageContainerType===N["MESSAGE_CONTAINERS"].THREADS_FLEXPANE);a.textyModules={tabcomplete:{searchOptions:{},positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";Object(H["a"])(t,a.texty.container)},completers:["channels","emoji","members"]}};a.state={editSecondsRemaining:a.countRemainingSeconds(),numCharsOverLimit:a.props.countCharsOverMessageLimit({channelId:a.props.channelId,text:a.getEditText()})};return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isSelfIm,n=t.editWindowMin;n>=0&&!a&&(this.editWindowTimeout=setInterval(this.onTimerInterval,Z))}},{key:"componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function e(t,a){var n=a.editSecondsRemaining;n<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.channelId,n=t.ts,r=t.viewContext;if(this.syncEditStateOnUnmount){var i=this.texty.value();var o=this.hasUnsavedChanges();this.props.updateEditState({viewContext:r,channelId:a,ts:n,editText:i,hasUnsavedChanges:o})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,a=t.didRequestToStopEditing,n=t.channelId,i=t.ts,o=t.viewContext;var s=this.state.numCharsOverLimit;var l=this.props.countCharsOverMessageLimit({channelId:n,text:this.getEditText()});(l>0||s>0)&&this.setState(function(){return{numCharsOverLimit:l}});this.props.updateHasUnsavedChanges({viewContext:o,channelId:n,ts:i,hasUnsavedChanges:this.hasUnsavedChanges()});a&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(r()({},n,r()({},i,false)))}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props,a=t.initialEditText,n=t.text;if(this.texty)return this.texty.value();if(m.a.isString(a))return a;return n}},{key:"countRemainingSeconds",value:function e(){var t=this.props,a=t.isSelfIm,n=t.editWindowMin,r=t.ts;if(n<0||a)return null;var i=Object(W["j"])(r);var o=60*n*1e3;var s=i.getTime()+o;return Math.round((s-Date.now())/1e3)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,a=t.initialEditText,n=t.text;if(this.texty)return this.texty.value()!==n;return m.a.isString(a)&&n!==a}},{key:"startDelete",value:function e(){var t=this.props,a=t.channelId,n=t.text,r=t.canDelete,i=t.canUnbroadcast,o=t.ts,s=t.viewContext;if(r){this.props.openModal({element:b.a.createElement(I["a"],{channelId:a,ts:o})});return}if(i){this.props.openModal({element:b.a.createElement(S["a"],{channelId:a,ts:o})});return}var l=n.replace(/~/g,"");var c="~"+l+"~";this.props.saveMessageEdit({channelId:a,text:c,viewContext:s,ts:o}).catch(this.handleSaveEditError)}},{key:"maybeSave",value:function e(){var t=this.props,a=t.channelId,n=t.ts,r=t.viewContext;var i=this.state,o=i.editSecondsRemaining,s=i.numCharsOverLimit;if(s>0)return false;if(m.a.isNumber(o)&&o<=0)return false;if(this.texty.isEmpty({doIgnoreWhitespace:true})){this.startDelete();return false}this.props.saveMessageEdit({channelId:a,text:this.getEditText(),viewContext:r,ts:n}).catch(this.handleSaveEditError);return true}},{key:"handleSaveEditError",value:function e(t){var a=t.message;switch(a){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function e(){var t=this.props,a=t.channelId,n=t.ts,r=t.viewContext;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({viewContext:r,channelId:a,ts:n})}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return m.a.isNumber(t)&&t<J}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var a=m.a.isNumber(t)&&t<=0;return a||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,a=t.editWindowMin,n=t.isAdminUser;var r=Object(W["m"])(a,{units:"minutes"});var i=X.t("Message editing failed");var o=X.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:b.a.createElement("b",null,r)});var s=void 0;n&&(s=X.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return b.a.createElement("a",{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:b.a.createElement(K["a"],{title:i},b.a.createElement("p",null,o),s)})}},{key:"renderUnknownErrorDialog",value:function e(){var t=X.t("Message editing failed");var a=X.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:b.a.createElement(K["a"],{title:t},a)})}},{key:"renderLengthErrorDialog",value:function e(){var t=X.t("Message editing failed");var a=X.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:b.a.createElement(K["a"],{title:t},a)})}},{key:"renderLengthWarning",value:function e(){var t=X.t("text is too long!");return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},t)}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var a=void 0;t<=0?a=X.t("(your time to edit ran out)"):t<=J&&(a=X.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return b.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},a)}},{key:"renderUnsavedWarning",value:function e(){var t=X.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return b.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var a=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var n=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!a&&!n)return null;return b.a.createElement("div",{className:"c-message__editor__messages"},t,a,n)}},{key:"renderInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.modules,n=t.isOpen;var r=this.props,i=r.initialFormattedText,o=r.text,s=r.useJumbomoji,l=r.channelId,c=r.featureFileThreads;var u=o||!c?X.t("Edit message"):X.t("Add message");return b.a.createElement(B["g"],{id:te,ref:this.setTextyRef,className:"c-message__editor__input",modules:a,ariaLabel:u,placeholder:u,initialText:i,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:s,isAutocompleteOpen:n,focusOnMount:true,useLegacyCreate:!Object(q["a"])(),channelId:l,enableBroadcastKeywords:this.enableBroadcastKeywords})}},{key:"renderLegacyAutocomplete",value:function e(){return this.renderInput({modules:this.textyModules})}},{key:"renderModernAutocomplete",value:function e(){return b.a.createElement(U["a"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,channelId:this.props.channelId,renderInput:this.renderInput,shouldCompleteOnTab:true})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"c-message__editor"},b.a.createElement("div",{className:"c-message__editor__input_container"},Object(q["a"])()?this.renderModernAutocomplete():this.renderLegacyAutocomplete(),b.a.createElement(F["c"],{onClick:ae,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},b.a.createElement(L["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),b.a.createElement(L["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),b.a.createElement(L["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"}))),b.a.createElement("div",{className:"c-message__editor__footer"},b.a.createElement(F["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},X.t("Cancel")),b.a.createElement(F["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},b.a.createElement(L["a"],{type:"enter",className:"margin_right_50"}),X.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(g["PureComponent"]);ne.displayName="BaseEditMessage";ne.defaultProps=ee;function re(e,t){var a=t.ts,n=t.channelId,r=t.viewContext,i=t.messageContainerType;var o=Object(O["getMessageByTimestamp"])(e,n,a);if(!o)return{};var s=Object(w["getChannelById"])(e,n);var l=Object(E["getTeamPref"])(e,"msg_edit_window_mins");var c=Object(C["getCurrentMember"])(e);var u=Object(E["getUserPref"])(e,"jumbomoji");var d=Object(D["canDeleteMessage"])(e,{message:o,channel:s,messageContainerType:i});var p=Object(D["canRemoveBroadcast"])(e,{message:o,channel:s,messageContainerType:i});var f=Object(j["getMessageEditData"])(e,{viewContext:r,channelId:n,ts:a}),h=f.editText,v=f.didRequestToStopEditing;var g=m.a.isString(h)&&h||o.text||"";var b=void 0;b=Object(y["isFeatureEnabled"])(e,"feature_modern_edit_format")?Object(V["a"])(e,{text:g}):Object(z["c"])(g,null,{for_edit:true});return{channelId:s.id,isSelfIm:Object(P["isYou"])(c.id,s),canDelete:d,canUnbroadcast:p,text:o.text||"",initialEditText:h,initialFormattedText:b,ts:a,editWindowMin:l,isAdminUser:c.is_admin,didRequestToStopEditing:v,useJumbomoji:u,featureFileThreads:Object(y["isFeatureEnabled"])(e,"feature_file_threads")}}var ie={saveMessageEdit:T["a"],setDidRequestToStopEditing:j["setDidRequestToStopEditing"],updateEditState:j["updateEditState"],stopEditingMessage:j["stopEditingMessage"],updateHasUnsavedChanges:j["updateHasUnsavedChanges"],openModal:k["openModal"],countCharsOverMessageLimit:x};var oe=Object(Y["b"])(Object(_["connect"])(re,ie)(ne));oe.propTypes={ts:v.a.string.isRequired,channelId:v.a.string.isRequired};var se=t["a"]=oe},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(10);var r=new n["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,a=e.pinnedBy,n=e.renderPinnedBy;if(a){if(a===t)return r.t("Pinned by you");return r.rt("Pinned by {member}",{member:n(a)})}return r.t("Pinned")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,a=void 0!==t&&t,n=e.renderStarButton,i=e.featureMessageLabelsCopy;if(a)return r.rt("<star>Added to your starred items</star>",null,n);if(i)return r.rt("<star>Starred</star>",null,n);return r.rt("<star>starred</star>",null,n)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,n=e.isEphemeral,s=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,f=e.pinnedBy,m=e.teamDisplayName,h=e.featureTeambot,v=e.renderPinnedBy,g=e.renderStarButton,b=e.renderHighlight,_=e.renderBroadcast,y=e.featureMessageLabelsCopy;if(n){if(!u&&!d)return r.t("Only visible to you");return null}if(y&&s){if(t&&a)return r.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),starred:o({renderStarButton:g,featureMessageLabelsCopy:y}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},_);if(a)return r.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:o({renderStarButton:g,featureMessageLabelsCopy:y}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},_);if(t)return r.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},_);return r.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},_)}if(l&&!h||l&&h&&(!m||m===r.t("Unknown Workspace"))){if(t&&a)return r.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),starred:o({renderStarButton:g,featureMessageLabelsCopy:y})});if(a)return r.rt("{starred} \u2219 Custom response",{starred:o({long:true,renderStarButton:g,featureMessageLabelsCopy:y})});if(t)return r.rt("{pinned} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v})});return r.t("Custom response")}if(l&&h){var k=m&&m.length>25?m.substring(0,25).concat("\u2026"):m;if(t&&a)return r.rt("{pinned} \u2219 {starred} \u2219 {teamName} custom response",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),starred:o({renderStarButton:g,featureMessageLabelsCopy:y}),teamName:k});if(a)return r.rt("{starred} \u2219 {teamName} custom response",{starred:o({long:true,renderStarButton:g,featureMessageLabelsCopy:y}),teamName:k});if(t)return r.rt("{pinned} \u2219 {teamName} custom response",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),teamName:k});return r.t("{teamName} custom response",{teamName:k})}if(c){if(t&&a)return r.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:b(),pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),starred:o({renderStarButton:g,featureMessageLabelsCopy:y})});if(a)return r.rt("{starred} \u2219 {highlight}",{highlight:b(),starred:o({long:true,renderStarButton:g,featureMessageLabelsCopy:y})});if(t)return r.rt("{pinned} \u2219 {highlight}",{highlight:b(),pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v})});return r.rt("{highlight}",{highlight:b()})}if(t&&a)return r.rt("{pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:f,renderPinnedBy:v}),starred:o({renderStarButton:g,featureMessageLabelsCopy:y})});if(t)return i({currentUserId:p,pinnedBy:f,renderPinnedBy:v});if(a)return o({long:true,renderStarButton:g,featureMessageLabelsCopy:y});return null}},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(14);var v=a(15);var g=a.n(v);var b=a(2);var _=a.n(b);var y=a(279);var k=a(41);var O=a(10);var w=a(18);var E=a(20);var C=a(87);var j=a(54);var S=new O["b"]("message");var I={channelId:p.a.string.isRequired,ts:p.a.string.isRequired,isHovered:p.a.bool,sliHighlight:p.a.shape({loading:p.a.bool,isHighlight:p.a.bool,feedbackOptions:p.a.object,justification:p.a.string,feedback:p.a.string}),onSliHighlightsDefaultFeedback:p.a.func,onSliHighlightsSecondaryFeedbackOption:p.a.func};var T={isHovered:false,justification:null,sliHighlight:null,onSliHighlightsDefaultFeedback:_.a.noop,onSliHighlightsSecondaryFeedbackOption:_.a.noop};var N=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSliHighlightsFeedbackDefaultPositive=a.onSliHighlightsFeedbackDefaultPositive.bind(a);a.onSliHighlightsFeedbackDefaultNegative=a.onSliHighlightsFeedbackDefaultNegative.bind(a);a.renderNegativeFeedbackMenu=a.renderNegativeFeedbackMenu.bind(a);return a}o()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"renderPositiveHighlightLabel",value:function e(){return m.a.createElement("span",null,m.a.createElement("span",{className:"c-message__label__highlight_title"},S.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function e(){var t=this.props,a=t.isHovered,n=t.sliHighlight;var r="default_positive"===n.feedback;if(a){var i=g()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":r});var o=g()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":r});return m.a.createElement("span",null,S.t("Is this helpful?"),m.a.createElement(k["d"],{tip:r?S.t("Thank you!"):S.t("This was helpful")},m.a.createElement(E["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},m.a.createElement(w["b"],{type:"thumbs-up",size:"inherit",inline:true}))),m.a.createElement(k["d"],{tip:S.t("This wasn\u2019t helpful")},m.a.createElement(E["c"],{className:o,onClick:this.onSliHighlightsFeedbackDefaultNegative},m.a.createElement(w["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return m.a.createElement(C["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function e(){return m.a.createElement("span",null,m.a.createElement("strong",null,S.t("What\u2019s not working about this highlight?"))," ",S.t("Let us know, and we\u2019ll adjust."),"\xa0",m.a.createElement(j["e"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},m.a.createElement(E["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_fill_blue"},S.t("Give Feedback")," ",m.a.createElement(w["b"],{type:"chevron-down",inline:true}))))}},{key:"renderNegativeFeedbackMenu",value:function e(t){var a=this;var n=this.props.sliHighlight.feedbackOptions;if(_.a.isEmpty(n))return null;return m.a.createElement(j["f"],t,_.a.map(n.negative,function(e){return m.a.createElement(j["b"],{key:e.args.ts,label:m.a.createElement(C["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return a.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(f["PureComponent"]);N.displayName="SliHighlightsMessageLabel";N.defaultProps=T;function A(e,t){var a=t.channelId,n=t.ts,r=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(y["setFeedbackForHighlight"])({channelId:a,ts:n,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:r.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:r.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(y["setFeedbackForHighlight"])({channelId:a,ts:n,feedback:"negative",leftFeedback:true,args:i,requestId:r.requestId}))}}}t["a"]=Object(h["connect"])(null,A)(N)},function(e,t,a){"use strict";var n=a(9);var r=a.n(n);var i=a(2);var o=a.n(i);var s=["channel_join","channel_leave","group_join","group_leave"];var l=["app_conversation_join","app_conversation_leave"];var c=function e(t){return"channel_join"===t||"group_join"===t};var u=function e(t){var a={};var n=[];for(var i=0;i<t.length;i++){var u=t[i];n.push(u);o.a.includes(l,u.subtype)&&(a[u.ts]=r()({},u.user,{action:"app_conversation_join"===u.subtype?"join":"leave",inviter:u.inviter,ts:u.ts,timestamps:[u.ts]}));if(o.a.includes(s,u.subtype)){a[u.ts]=r()({},u.user,{actions:[u.subtype],inviter:u.inviter,ts:u.ts,timestamps:[u.ts]});while(i+1<t.length){var d=t[i+1];if(!o.a.includes(s,d.subtype))break;var p=a[u.ts][d.user]&&a[u.ts][d.user].actions;if(p&&p.length){if(1===p.length&&d.subtype!==p[0]){p.push(d.subtype);a[u.ts][d.user].timestamps.push(d.ts);d.inviter&&(a[u.ts][d.user].inviter=d.inviter)}else if(2===p.length&&d.subtype!==p[1]){a[u.ts][d.user].actions=[p[1],d.subtype];a[u.ts][d.user].timestamps.push(d.ts);d.inviter&&(a[u.ts][d.user].inviter=d.inviter)}}else a[u.ts][d.user]={actions:[d.subtype],inviter:d.inviter,ts:d.ts,timestamps:[d.ts]};i+=1}a[u.ts]=o.a.mapValues(a[u.ts],function(e){var t=e.actions,a=e.inviter,n=e.ts,r=e.timestamps;return{action:t.map(function(e){return c(e)?"join":"leave"}).join(","),inviter:a,ts:n,timestamps:r}})}}return{messages:n,rollups:a}};t["a"]=u},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(2);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(0);var v=a.n(h);var g=a(14);var b=a(11);var _=a(10);var y=a(15);var k=a.n(y);var O=a(2258);var w=a.n(O);var E=new _["b"]("threads");var C=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={spriteLoaded:false};return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=new Image;this.spritePromise=new Promise(function(e){a.onload=function(){e()};a.src=cdn_url+"/a7c8f/img/dragdrop_threads_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,a=t.featureFileThreads,n=t.useNightIllustration;var r=this.state.spriteLoaded;if(!a)return null;var i=false;if(Object(d["isBoolean"])(n))i=n;else{var o=new Date;var s=o.getHours();i=s>=20||s<8}var l=k()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!i});var c="";r&&(c=m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),m.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),m.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var u=E.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately');return m.a.createElement("div",{className:l},m.a.createElement("div",{className:"p-thread_drag_overlay__info"},m.a.createElement("div",{className:"p-thread_drag_overlay__anim"},c),m.a.createElement("div",{className:"p-thread_drag_overlay__title"},E.t("Upload to thread")),m.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},u)))}}]);return t}(f["PureComponent"]);C.displayName="DragOverlay";C.defaultProps={featureFileThreads:true,useNightIllustration:void 0};function j(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(g["connect"])(j)(C)},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(0);var v=a.n(h);var g=a(14);var b=a(15);var _=a.n(b);var y=a(2);var k=a.n(y);var O=a(10);var w=a(123);var E=a(11);var C=a(105);var j=a(150);var S=a(1396);var I=a(2291);var T=a.n(I);var N={id:v.a.string.isRequired,name:v.a.string.isRequired,description:v.a.string,isActive:v.a.bool,handle:v.a.string.isRequired,userCount:v.a.number.isRequired,canEditUserGroups:v.a.func.isRequired,canCreateAndDeleteUserGroups:v.a.func.isRequired,featureSonicUserGroups:v.a.bool,onClick:v.a.func,showUserGroupDetails:v.a.func.isRequired,featureLazyUserGroups:v.a.bool};var A={description:null,isActive:false,canEditUserGroups:y["noop"],canCreateAndDeleteUserGroups:y["noop"],featureSonicUserGroups:false,featureLazyUserGroups:false,onClick:y["noop"]};var R=new O["b"]("user_groups");var M=function(e){p()(t,e);function t(e){o()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["bindAll"])(a,["onRowClick","onMenuClick","renderContextMenu"]);return a}l()(t,[{key:"onRowClick",value:function e(t){var a=this.props,n=a.id,r=a.isActive;r&&this.props.showUserGroupDetails({groupId:n});this.props.onClick(t,n)}},{key:"onMenuClick",value:function e(t){var a=this.props.id;this.props.onClick(t,a)}},{key:"renderName",value:function e(){var t=this.props,a=t.name,n=t.isActive,r=t.featureSonicUserGroups;if(!r)return null;var i=_()("black",{sk_dark_gray:!n});var o=n?a:R.t("{name} (Deactivated)",{name:a});return m.a.createElement("div",{className:i},o)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.description,n=t.isActive;if(!a)return null;var r=_()("overflow_ellipsis",{sk_dark_gray:!n});return m.a.createElement("div",{className:r},a)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return m.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderContextMenu",value:function e(t){return m.a.createElement(S["c"],{menuProps:t,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function e(){var t=this.props,a=t.userCount,n=t.isActive,r=t.featureSonicUserGroups;if(!r)return null;var i=_()("p-user_group_row",{"p-user_group_row--inactive":!n});var o={onClick:this.onRowClick,renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups()};return m.a.createElement(S["a"],o,this.renderName(),this.renderDescription(),this.renderHandle(),m.a.createElement("span",{className:"p-user_group_row__count"},R.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a})))}}]);return t}(f["PureComponent"]);M.displayName="UserGroupRow";M.defaultProps=A;var x=function e(t,a){var n=a.id;var i=Object(w["getUserGroupById"])(t,n);var o={canEditUserGroups:function e(){return Object(C["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(C["b"])(t)},featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),featureLazyUserGroups:Object(E["isFeatureEnabled"])(t,"feature_lazy_user_groups")};if(!i)return o;return r()({name:Object(C["h"])(i),description:Object(C["e"])(i),handle:Object(C["f"])(i),userCount:Object(C["k"])(i),isActive:Object(C["q"])(i)},o)};var P={showUserGroupDetails:j["h"]};t["a"]=Object(g["connect"])(x,P)(M)},,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(2);var o=a(1);var s=a.n(o);var l=a(0);var c=a.n(l);var u=a(31);var d=a(17);var p=a(77);var f=a(14);var m=a(761);var h=a(10);var v=a(420);var g=a(70);var b=a(11);var _=new h["b"]("file-upload");var y={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function k(e){var t=e.type,a=e.proceedToNextDialog,n=e.featureFileThreads;if(!n)return null;var r=_.t("File too large");var o="";o=t===y.ALL?_.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(v["a"])(g["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):t===y.SINGLE?_.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(v["a"])(g["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):_.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(v["a"])(g["UPLOAD_FILE_SIZE_LIMIT_BYTES"])});var l=t===y.MULTIPLE?function(){Object(i["defer"])(function(){a()})}:i["noop"];return s.a.createElement(m["a"],{title:r,onGo:l},s.a.createElement("p",null,o))}k.displayName="FileUploadSizeAlert";k.defaultProps={type:y.SINGLE,proceedToNextDialog:i["noop"],featureFileThreads:true};function O(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads")}}var w=Object(f["connect"])(O)(k);var E=a(5);var C=a.n(E);var j=a(6);var S=a.n(j);var I=a(7);var T=a.n(I);var N=a(8);var A=a.n(N);var R=a(15);var M=a.n(R);var x=a(131);var P=a(469);var D=a(278);var F=a(859);var L=a(755);var B=a(617);var U=a(21);var q=a(928);var G=a(1409);function H(e){return new Promise(function(t,a){var n=Object(d["b"])();try{var r=new FileReader;r.onload=function(e){var a=Object(G["readFromBinaryFile"])(e.target.result);a&&"number"===typeof a.Orientation?t(a.Orientation):t(null)};r.readAsArrayBuffer(e)}catch(e){n.warn("Error reading exif data");n.warn(e);a(e)}})}var W=a(50);var V=a(48);var z=a(3453);var Q=a(118);var K=a(103);var Y=a(20);var J=a(190);var Z=a(88);var X=a(227);var $=a(65);var ee=a(961);var te=a(966);var ae=a(808);var ne=a(968);var re=a(19);var ie=a(44);var oe=a(36);var se=a(1446);var le=a(1127);var ce=new h["b"]("file-upload");function ue(e){var t=e.replyCount,a=e.replyUsers,n=e.replyUsersCount,r=e.featureFileThreads;if(!r)return null;if(!a)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},ce.t("Sharing file in a thread"),s.a.createElement("br",null),s.a.createElement(se["a"],{replyCount:t,replyUsers:a,replyUsersCount:n}))}ue.displayName="FileUploadThreadLabel";ue.defaultProps={replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0,featureFileThreads:true};function de(e,t){var a=t.channelId,n=t.threadTs;var r=Object(ie["getMessageByTimestamp"])(e,a,n);if(!r){var o=Object(re["getChannelById"])(e,a);r=Object(B["d"])(o,n);r||(r=Object(le["a"])(o,n))}if(!r)return{};var s=Object(oe["getReplyUsers"])(r);var l=Object(oe["getReplyUsersCount"])(r);if(r.replies){s=Object(i["map"])(r.replies,"user");r.user&&s.push(r.user);l=Object(i["uniq"])(s).length}else r.user&&s.push(r.user);return{replyCount:Object(oe["getReplyCount"])(r),replyUsers:s,replyUsersCount:l,featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads")}}var pe=Object(f["connect"])(de)(ue);var fe=a(2274);var me=new h["b"]("file-upload");var he="file-upload-name";var ve="file-upload-share-with";var ge={files:c.a.array.isRequired,featureFileThreads:c.a.bool,selectedChannelId:c.a.string,setSelectedChannel:c.a.func,canPostInSelectedChannel:c.a.bool,closeModal:c.a.func,switchToChannel:c.a.func,getShareableChannelId:c.a.func,msgText:c.a.string,setMsgText:c.a.func,disallowedKeywordInMsgText:c.a.string,initialText:c.a.string,initialBroadcast:c.a.bool,retentionDuration:c.a.number,threadTs:c.a.string,overStorageLimit:c.a.bool,isStdPlan:c.a.bool,isPlusPlan:c.a.bool,isEnterprisePlan:c.a.bool,channelType:c.a.string,selectedChannelName:c.a.string,fromPaste:c.a.bool,teamId:c.a.string,featureModernFileUpload:c.a.bool};var be={featureFileThreads:true,selectedChannelId:null,setSelectedChannel:i["noop"],canPostInSelectedChannel:false,selectedChannelIsGeneral:false,closeModal:i["noop"],switchToChannel:i["noop"],getShareableChannelId:i["noop"],canPost:function e(){return false},msgText:"",setMsgText:i["noop"],disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:false,retentionDuration:null,threadTs:null,overStorageLimit:false,isStdPlan:false,isPlusPlan:false,isEnterprisePlan:false,channelType:"channel",selectedChannelName:"",fromPaste:false,teamId:void 0,featureModernFileUpload:false};var _e=Object(d["b"])();var ye=function(e){A()(t,e);function t(e){C()(this,t);var a=T()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);a.onCancel=a.onCancel.bind(a);a.onCancelAll=a.onCancelAll.bind(a);a.onCancelDiscard=a.onCancelDiscard.bind(a);a.closeDialog=a.closeDialog.bind(a);a.onTextChange=a.onTextChange.bind(a);a.onFileNameChange=a.onFileNameChange.bind(a);a.onShareWithChange=a.onShareWithChange.bind(a);a.onBroadcastChange=a.onBroadcastChange.bind(a);a.onEditCollapsedFileNameClick=a.onEditCollapsedFileNameClick.bind(a);a.setFileNameInputRef=a.setFileNameInputRef.bind(a);a.fileNameInput=null;a.initialText=a.props.initialText;a.state=r()({confirmClose:false,confirmCancelAll:false,submitting:false},a.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast});return a}S()(t,[{key:"componentDidMount",value:function e(){var t=this.props.files;var a=this.state||0,n=a.fileIndex;t&&this.maybeLoadImagePreview(t[n])}},{key:"onCancel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.msgText;var n=this.state,r=n.confirmClose,i=n.confirmCancelAll;if(!r&&a&&a.length>g["CONFIRM_DISCARD_TEXT_LENGTH"]){this.setState(function(){return{confirmClose:true,confirmCancelAll:t}});return false}t||!this.hasMoreFiles()||i?this.closeDialog():this.goToNextFile();return false}},{key:"onCancelAll",value:function e(){return this.onCancel(true)}},{key:"onCancelDiscard",value:function e(){this.setState(function(){return{confirmClose:false,confirmCancelAll:false}});return false}},{key:"onGo",value:function e(){var t=this;var a=this.state,n=a.shareWith,r=a.fileName,i=a.fileIndex,o=a.confirmClose,s=a.broadcast;var l=this.props,c=l.selectedChannelId,u=l.msgText,d=l.threadTs,p=l.featureModernFileUpload,f=l.teamId;if(this.isGoDisabled())return false;if(o)return this.onCancel();this.initialText=null;var m=this.props,h=m.switchToChannel,v=m.files,g=m.getShareableChannelId;var b=v[i];var _=n?g({channelOrMemberId:c}):Promise.resolve(null);_.then(function(e){if(b.is_box||b.is_dropbox)Object(x["q"])({link:b.link,filename:b.name,title:r||t.initialFileName(b),channels:e,initial_comment:n?u:null,is_box:b.is_box,is_dropbox:b.is_dropbox,thread_ts:e?d:null,broadcast:e&&d?s:null});else if(p){var a=Object(z["a"])(f);a.uploadFile({file:b,shareData:{channelId:e,title:r||t.initialFileName(b),introMessage:n?u:null,threadTs:e?d:null,broadcast:e&&d?s:null,is_dropbox:b.is_dropbox,is_box:b.is_box}})}else Object(x["q"])({file:b,filename:b.name,title:r||t.initialFileName(b),channels:e,initial_comment:n?u:null,thread_ts:e?d:null,broadcast:e&&d?s:null});if(t.hasMoreFiles())t.goToNextFile();else{t.closeDialog();e&&!d&&h({id:e})}t.setState(function(){return{submitting:false}})});this.setState(function(){return{submitting:true}});return false}},{key:"onTextChange",value:function e(t){var a=t.text,n=t.overLimit;this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>g["MAX_FILENAME_LENGTH"]}})}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"onBroadcastChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{broadcast:!!a}})}},{key:"onEditCollapsedFileNameClick",value:function e(){this.setState(function(){return{collapseFileNameInput:false}});this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function e(t){this.fileNameInput=t}},{key:"getStateForFileAtIndex",value:function e(t){var a=this.props.files;var n=a[t];var r=n&&Object(i["includes"])(n.type,"image");return{fileIndex:t,defaultFileName:this.initialFileName(n),fileName:"",shareWith:true,previewDataUrl:null,overMsgLengthLimit:false,overFileNameLimit:false,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:r,broadcast:false}}},{key:"getStorageWarning",value:function e(){var t=this.props,a=t.featureFileThreads,n=t.overStorageLimit,r=t.isStdPlan,i=t.isPlusPlan,o=t.isEnterprisePlan,l=t.files;var c=this.state.fileIndex;if(!a)return null;var u=l[c];if(!n||u.is_dropbox||u.is_box||u.is_external)return null;if(r)return me.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,function(e){var t=e.text;return s.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)});if(i)return me.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,function(e){var t=e.text;return s.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)});if(o)return me.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return s.a.createElement("a",{href:"/help/requests/new",target:"_blank"},t)});return me.rt("Your workspace has reached the Free plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade to a paid plan</a>.",null,function(e){var t=e.text;return s.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)})}},{key:"isMultipleFiles",value:function e(){return this.props.files.length>1}},{key:"hasMoreFiles",value:function e(){if(!this.isMultipleFiles())return false;var t=this.props.files;var a=this.state.fileIndex;return t.length>a+1}},{key:"goToNextFile",value:function e(){var t=this;var a=this.props,n=a.files,i=a.setMsgText;var o=this.state.fileIndex;this.setState(function(){return r()({confirmClose:false},t.getStateForFileAtIndex(o+1))},function(){t.maybeLoadImagePreview(n[o+1])});i("")}},{key:"closeDialog",value:function e(){var t=this;this.props.closeModal();if(this.initialText){var a=this.initialText;setTimeout(function(){t.props.threadTs?Object(B["g"])(a,t.props.initialBroadcast):Object(L["c"])(a)},10)}}},{key:"initialFileName",value:function e(t){if(!this.props.featureFileThreads)return t.name;if(!t.name||this.props.fromPaste)return me.t("Pasted image at {date}",{date:Object(P["a"])(Date.now()/1e3)});return t.name}},{key:"isGoDisabled",value:function e(){var t=this.state,a=t.submitting,n=t.shareWith,r=t.overMsgLengthLimit,i=t.overFileNameLimit;var o=this.props,s=o.canPostInSelectedChannel,l=o.disallowedKeywordInMsgText;return a||n&&!s||n&&!!l||r||i}},{key:"maybeLoadImagePreview",value:function e(t){var a=this;if(!window.FileReader)return;if(t.is_box||t.is_dropbox)return;if("string"===typeof t){this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+t,collapseFileNameInput:true}});return}try{var n=new FileReader;n.onload=function(e){var n=e.target.result;if(!Object(i["startsWith"])(n,"data:image/"))return;a.loadImagePreviewWithOrientation(t,n)};n.onloadstart=function(e){if(e.total>33554432){_e.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total);n.abort()}};n.readAsDataURL(t)}catch(e){_e.warn("Error loading upload preview");_e.warn(e)}}},{key:"loadImagePreviewWithOrientation",value:function e(t,a){var n=this;H(t).then(function(e){if(!e||1===e){n.setState(function(){return{previewDataUrl:a,collapseFileNameInput:true}});return}var t=new Image;t.onload=function(){var r=t.width;var i=t.height;var o=i/r;n.setState(function(){return{previewDataUrl:a,previewImageDimensionsRatio:o,exifOrientation:e,collapseFileNameInput:true}})};t.src=a})}},{key:"renderBroadcastCheckbox",value:function e(){var t=this.props,a=t.featureFileThreads,n=t.threadTs,r=t.channelType,i=t.selectedChannelName;var o=this.state.broadcast;if(!a||!n)return null;var l="broadcast-to-channel";var c="";c="mpim"===r?me.t("Also send to the group"):"im"===r?me.t("Also send as direct message"):me.rt("Also send to <span></span>",null,function(){return s.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},i)});return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},s.a.createElement(Z["a"],{text:c,className:"p-file_upload_dialog__broadcast_label",htmlFor:l,type:"inline"},s.a.createElement(X["a"],{className:"p-file_upload_dialog__broadcast_checkbox",id:l,checked:o,onChange:this.onBroadcastChange})))}},{key:"renderImagePreview",value:function e(){if(!this.props.featureFileThreads)return null;var t=this.state,a=t.previewDataUrl,n=t.previewImageDimensionsRatio,r=t.exifOrientation,i=t.fileName;if(!this.state.previewDataUrl)return null;var o=me.t("Preview of {fileName}",{fileName:i});var l=void 0;2===r?l="scaleX(-1)":3===r?l="rotate(180deg)":4===r?l="rotate(180deg) scaleX(-1)":5===r?l="rotate(90deg) scale("+n+", -"+n+")":6===r?l="rotate(90deg) scale("+n+")":7===r?l="rotate(90deg) scale(-"+n+", "+n+")":8===r&&(l="rotate(-90deg) scale("+n+", "+n+")");var c={};l&&(c.transform=l);return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement("div",{className:"p-file_upload_dialog__preview"},s.a.createElement("div",{style:c},s.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:a,alt:o}))))}},{key:"renderShareWith",value:function e(){var t=this.props,a=t.threadTs,n=t.featureFileThreads,r=t.selectedChannelId;var i=this.state.shareWith;if(!n)return null;if(a)return s.a.createElement(pe,{channelId:r,threadTs:a});return s.a.createElement(Z["a"],{text:me.t("Share with:"),htmlFor:ve,type:"inline"},s.a.createElement(X["a"],{id:ve,defaultChecked:i,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.selectedChannelId,n=t.setSelectedChannel,r=t.threadTs;var i=this.state.shareWith;if(r)return null;return s.a.createElement(te["a"],{initialChannelId:a,onChange:n,isDisabled:!i})}},{key:"renderCancelAllButton",value:function e(){if(!this.props.featureFileThreads)return null;return s.a.createElement(Y["d"],{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},me.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function e(){if(!this.isMultipleFiles())return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderFooterExtra",value:function e(){if(this.isMultipleFiles())return this.renderCancelAllButton();return s.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function e(){var t=this.getStorageWarning();var a=Object(ne["a"])(this.props);if(!a&&!t)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(Q["d"],{type:"inline",level:"warning"},t?s.a.createElement("span",{className:"p-share_dialog__warning_message"},t):null,a))}},{key:"renderCollapsedFileName",value:function e(){var t=this.props.featureFileThreads;var a=this.state,n=a.defaultFileName,r=a.collapseFileNameInput;if(!t)return null;var i=M()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!r});var o=me.rt("edit");var l=me.rt("Edit file name: {fileName}",{fileName:n});return s.a.createElement("div",{className:i},s.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},n),s.a.createElement($["a"],{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:r?null:"-1","aria-label":l},o))}},{key:"renderExpandedFileNameInput",value:function e(){var t=this.state,a=t.fileName,n=t.defaultFileName,r=t.collapseFileNameInput;var i=M()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":r});return s.a.createElement(Z["a"],{text:me.t("File name"),htmlFor:he,className:i},s.a.createElement(J["a"],{id:he,name:he,value:a,maxCharacterLimit:g["MAX_FILENAME_LENGTH"],counterMinimumCharacters:g["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onFileNameChange,placeholder:n,tabIndex:r?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderRetentionWarning",value:function e(){var t=this.props,a=t.retentionDuration,n=t.featureFileThreads;if(!n||!a)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},s.a.createElement("span",null,me.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(q["a"])(a)})))}},{key:"render",value:function e(){if(!this.props.featureFileThreads)return null;var t=this.props,a=t.files,n=t.msgText,r=t.selectedChannelId,i=t.threadTs;var o=this.state,l=o.fileIndex,c=o.shareWith,u=o.confirmClose;var d=me.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});var p=me.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(p=me.t("Upload a file ({number} of {total})",{number:l+1,total:a.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var f=false;var m=M()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!u});return s.a.createElement(K["a"],{className:m,title:p,shouldCloseOnOverlayClick:f,onClose:this.onCancel,onCancel:u?this.onCancelDiscard:this.onCancel,onGo:u?this.onCancel:this.onGo,useSlackScrollbarWithPadding:true,cancelText:u?me.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:u?me.t("Yes, discard the message"):me.t("Upload"),footerText:u?me.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:u?"danger":"primary",showCancelButton:u},this.renderWarning(),s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(ee["a"],{channelId:r,threadTs:i,text:n,onTextChange:this.onTextChange,ariaLabel:d,placeholder:d,enabled:c,focusOnMount:true,onEnter:this.onGo,enableBroadcastKeywords:!i})),this.renderBroadcastCheckbox(),this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs(),this.renderRetentionWarning())}}]);return t}(o["PureComponent"]);ye.displayName="FileUploadDialog";ye.defaultProps=be;function ke(e,t){var a=Object(W["getCurrentTeam"])(e);var n={overStorageLimit:Object(V["isOverStorageLimit"])(a),isStdPlan:Object(V["isOnStandardPlan"])(a),isPlusPlan:Object(V["isOnPlusPlan"])(a),isEnterprisePlan:Object(V["isEnterpriseTeam"])(a)};return r()({},Object(ae["b"])(e,t),n,{retentionDuration:parseInt(Object(U["getTeamPref"])(e,"file_retention_type"),10)?Object(U["getTeamPref"])(e,"file_retention_duration"):null,featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads"),teamId:a.id,featureModernFileUpload:Object(b["isFeatureEnabled"])(e,"feature_modern_file_upload")})}var Oe={closeModal:p["closeModal"],switchToChannel:D["a"],getShareableChannelId:F["a"]};var we=Object(f["connect"])(ke,Oe)(ye);var Ee=Object(ae["a"])(we);var Ce=new h["b"]("file_upload");function je(e){var t=e.proceedToNextDialog,a=e.featureModernFileUpload,n=e.excludedFiles,r=e.goodFiles;if(!a)return null;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p=void 0;var f="";var h=n.length+r.length;if(n.length){o=[];u="";p="";o=n.map(function(e){return s.a.createElement("li",{key:e.name},s.a.createElement("strong",null,e.name))});if(n.length>1){l=n.length===h?Ce.t("All files unsupported"):Ce.t("Some files unsupported");d=Ce.t("Try uploading a .zip version of these files instead.");u=s.a.createElement("ul",null,o)}else if(1===n.length){l=Ce.t("File unsupported");d=Ce.t("Try uploading a .zip version of this file instead.")}r.length>1?p=Ce.t("(Don\u2019t worry, your other files are next.)"):1===r.length&&(p=Ce.t("(Don\u2019t worry, your other file is next.)"));c=1===n.length?Ce.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:s.a.createElement("strong",null,n[0].name)}):n.length===h?Ce.t("Sorry, none of those file types are supported by Slack."):Ce.t("Sorry, some of those file types are not supported by Slack.");f=s.a.createElement("div",null,s.a.createElement("p",null,c),u,s.a.createElement("p",null,d),s.a.createElement("p",null,p))}var v=function e(){Object(i["defer"])(function(){t()})};return s.a.createElement(m["a"],{title:l,onGo:v},f)}je.displayName="FileUploadUnsupportedAlert";je.defaultProps={proceedToNextDialog:i["noop"],featureModernFileUpload:false,goodFiles:[],excludedFiles:[]};function Se(e){return{featureModernFileUpload:Object(b["isFeatureEnabled"])(e,"feature_modern_file_upload")}}var Ie=Object(f["connect"])(Se)(je);var Te=a(61);var Ne=Object(u["b"])("Takes N files and opens the file upload dialog",function(e,t,a){var n=a.files,o=a.threadTs;if(!n||!n.length){Object(d["a"])({getState:t}).error("No files passed to openFileUploadDialog");return}var l=function t(i){var l=Re(o);var c=Ae(o);e(Object(p["openModal"])({element:s.a.createElement(Ee,r()({},a,{files:i,initialText:c,initialBroadcast:l,fileSizeExceeded:i.length<n.length}))}))};var c=function t(a){var n=a.filter(function(e){return Object(i["isString"])(e)||"undefined"===typeof e.size||e.size<=g["UPLOAD_FILE_SIZE_LIMIT_BYTES"]});if(n.length<a.length)1===a.length?e(Object(p["openModal"])({element:s.a.createElement(w,{type:y.SINGLE})})):n.length?e(Object(p["openModal"])({element:s.a.createElement(w,{type:y.MULTIPLE,proceedToNextDialog:function e(){return l(n)}})})):e(Object(p["openModal"])({element:s.a.createElement(w,{type:y.ALL})}));else{if(!n.length)return;l(n)}};var u=function t(a){Object(Te["validateFiles"])(a,function(t){t.excludedFiles.length?e(Object(p["openModal"])({element:s.a.createElement(Ie,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:function e(){return c(t.goodFiles)}})})):t.goodFiles.length&&c(t.goodFiles)})};Object(b["isFeatureEnabled"])(t(),"feature_modern_file_upload")?u(n):c(n)});Ne.propTypes={files:c.a.array.isRequired,initialChannelId:c.a.string,threadTs:c.a.string,fromPaste:c.a.bool};function Ae(e){if(e&&Object(B["b"])()===e){var t=Object(B["h"])();t&&Object(B["c"])();return t}var a=Object(L["b"])();a&&Object(L["c"])("");return a}function Re(e){if(!e||Object(B["b"])()!==e)return false;return Object(B["e"])()}var Me=t["a"]=Ne},,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a(14);var h=a(2);var v=a(23);var g=function e(t,a){return t+"-"+a};var b={add:function e(t,a,n){this.sections||(this.sections={});var r=g(t,a);if(this.sections[r])throw new Error('A section has already been specified at "'+r+'"');this.sections[r]=n},remove:function e(t,a){if(!this.sections)return;var n=g(t,a);if(!this.sections[n])return;this.sections[n]=null;delete this.sections[n]},get:function e(t,a){if(!this.sections)return;return this.sections[g(t,a)]}};var _=b;var y={teamId:p.a.string.isRequired,order:p.a.number.isRequired,component:p.a.object.isRequired,children:p.a.node};var k={order:void 0,component:void 0,children:null};var O=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=e.component,i=n.focus,o=n.blur;var s=Object(h["isFunction"])(i)&&Object(h["isFunction"])(o);if(s)return l()(a);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}o()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.teamId,n=t.order,r=t.component;_.add(a,n,r)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.teamId,n=t.order;_.remove(a,n)}},{key:"render",value:function e(){return this.props.children}}]);return t}(f["PureComponent"]);O.displayName="FocusableSection";O.defaultProps=k;var w=function e(t){return{teamId:Object(v["getTeamId"])(t)}};var E=Object(m["connect"])(w)(O);a.d(t,"a",function(){return E});a.d(t,"b",function(){return _})},function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(3);var o=a.n(i);var s=a(25);var l=a(22);var c=a(36);var u=1.75;var d=100;var p=10;var f=Object(l["a"])("Deletes a message",function(e,t,a){var n=a.channelId,r=a.ts,i=a.broadcastDelete,l=a.attempts,m=void 0===l?0:l;if(Object(c["isTempTs"])(r))return Promise.reject(new Error("message_not_found"));var h={channel:n,ts:r};i&&(h.broadcast_delete=true);return e(Object(s["a"])({method:"chat.delete",args:h})).catch(function(t){var n=t.data,r=void 0===n?{}:n;if("message_not_found"===r.error&&m<p){var i=d*u;return Promise.delay(i).then(function(){return e(f(o()({},a,{attempts:m+1})))})}return Promise.reject(new Error(r.error||"unknown_error"))})});f.propTypes={channelId:r.a.string,ts:r.a.string,broadcastDelete:r.a.bool,attempts:r.a.number};var m=f;var h=Object(l["a"])("Deletes a join/leave message rollup",function(e,t,a){var n=a.channelId,r=a.firstMessageTs,i=a.lastMessageTs;var o={channel_id:n,first_message_ts:r,last_message_ts:i};return e(Object(s["a"])({method:"chat.deleteBulkJoinLeave",args:o}))});h.propTypes={channelId:r.a.string,firstMessageTs:r.a.string,lastMessageTs:r.a.string};var v=h;var g=a(4);var b=a(19);var _=a(122);var y=a(44);var k=a(279);var O=a(11);var w=a(241);var E=Object(g["e"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.ts,i=a.broadcastDelete,o=void 0!==i&&i,s=a.rollupTimestamps;var l=t();var u=Object(y["getMessageByTimestamp"])(l,n,r);var d=s&&s.length>1;if(!u)return Promise.resolve();d||Object(c["getReplyCount"])(u)||e(Object(k["animateDeleteMessage"])({channelId:n,ts:r}));if(Object(c["isTempTs"])(r)||Object(c["isEphemeral"])(u)){var p=Object(O["isFeatureEnabled"])(l,"feature_react_threads");if(Object(c["isReply"])(u)&&!p){var f=Object(b["getChannelById"])(l,n);Object(w["k"])(f,u)}return Promise.resolve()}if(d){var h=s[0];var g=s.pop();return e(v({channelId:n,firstMessageTs:h,lastMessageTs:g}))}return e(m({channelId:n,ts:r,broadcastDelete:o})).then(function(){if(Object(O["isFeatureEnabled"])(l,"feature_degraded_send")&&Object(c["isReply"])(u)){var e=Object(b["getChannelById"])(l,n);Object(w["k"])(e,u)}}).catch(function(t){if("message_not_found"!==t.message){e(Object(k["animateDeleteMessage"])({channelId:n,ts:r,isDeleting:false}));if(o)e(Object(y["showThreadBroadcast"])({channelId:n,ts:r}));else{e(Object(_["addTimestamps"])({channelId:n,timestamps:[r]}));e(Object(y["addMessages"])([u]))}}throw t})});E.propTypes={channelId:r.a.string.isRequired,ts:r.a.string.isRequired,broadcastDelete:r.a.bool,rollupTimestamps:r.a.array};var C=t["a"]=E;var j={animateAndDeleteMessageApi:E}},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(2);var v=a(15);var g=a.n(v);var b=a(2108);var _={title:p.a.string,titleClass:p.a.string,description:p.a.node,className:p.a.string};var y={title:"",titleClass:"",description:null,className:""};var k=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,a=t.titleClass,n=t.className;var r=g()(n,a);return m.a.createElement("h4",{className:r},this.props.title)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return m.a.createElement("span",{className:"sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-ent_settings_item_header"},this.renderTitle(),this.renderDescription())}}]);return t}(f["PureComponent"]);k.displayName="SettingsItemHeader";k.defaultProps=y;var O=k;var w=a(10);var E=a(20);var C=a(2110);var j=new w["b"]("enterprise_settings");var S={editOnly:p.a.bool,enabled:p.a.bool,onEnable:p.a.func,onDisable:p.a.func,onEdit:p.a.func.isRequired};var I={editOnly:false,enabled:false,onEnable:h["noop"],onDisable:h["noop"],onEdit:h["noop"]};var T=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEnable=a.onEnable.bind(a);a.onDisable=a.onDisable.bind(a);a.onEdit=a.onEdit.bind(a);return a}o()(t,[{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"renderEnable",value:function e(){var t=j.t("Enable");return m.a.createElement("div",{className:"p-ent_settings_item_button_control"},m.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEnable},t))}},{key:"renderDisable",value:function e(){var t=j.t("Disable");var a=j.t("Edit");return m.a.createElement("div",{className:"p-ent_settings_item_button_control"},m.a.createElement(E["d"],{type:"danger",size:"small",onClick:this.onDisable},t),m.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},a))}},{key:"renderEdit",value:function e(){var t=j.t("Edit");return m.a.createElement("div",{className:"p-ent_settings_item_button_control"},m.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},t))}},{key:"renderButtonControls",value:function e(){var t=this.props,a=t.editOnly,n=t.enabled;if(a)return this.renderEdit();return n?this.renderDisable():this.renderEnable()}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(f["PureComponent"]);T.displayName="SettingsItemButtonControl";T.defaultProps=I;var N=T;var A=a(2112);var R={label:p.a.string.isRequired,state:p.a.string.isRequired,type:p.a.string.isRequired,description:p.a.node,onClick:p.a.func,control:p.a.object.isRequired};var M={label:"",state:"",type:"",description:null,onClick:h["noop"],control:{}};var x=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"renderLabel",value:function e(){return m.a.createElement(O,{title:this.props.label,className:"p_ent_settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,a=t.state,n=t.description;return m.a.createElement(O,{title:a,description:n,className:"bold"})}},{key:"renderButtonControl",value:function e(){var t=this.props.control,a=t.editOnly,n=t.enabled,r=t.onEnable,i=t.onDisable,o=t.onEdit;return m.a.createElement(N,{editOnly:a,enabled:n,onEnable:r,onDisable:i,onEdit:o})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?this.renderButtonControl():null}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-ent_settings_item",onClick:this.props.onClick,role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(f["PureComponent"]);x.displayName="SettingsItem";x.defaultProps=M;var P=t["a"]=x},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(2);var v=a(15);var g=a.n(v);var b=a(151);var _=a(14);var y=a(16);var k=a(12);var O={unreadCount:p.a.number};var w={unreadCount:void 0};var E=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props.unreadCount;if(!t)return null;var a=t<10?t:"9+";return m.a.createElement("span",{className:"c-search_autocomplete__unread_count"},a)}}]);return t}(f["PureComponent"]);E.displayName="UnreadCount";function C(e,t){var a=t.model;var n=void 0;n=Object(y["isMember"])(a)?Object(y["getImUnreadCountByMember"])(e,a):Object(k["getBadgeCountWithMuted"])(a);return{unreadCount:n}}E.defaultProps=w;var j=Object(_["connect"])(C)(E);var S=a(10);var I=a(18);var T=new S["b"]("search");var N=function e(){return m.a.createElement("div",{className:"c-search_autocomplete__suggestion_hint"},m.a.createElement("span",{className:"description"},T.t("Jump to")),m.a.createElement(I["b"],{type:"enter",size:"inherit",className:"ts_icon_enter modifier_icon"}))};N.displayName="JumpHint";var A=N;var R={id:p.a.string.isRequired,index:p.a.number.isRequired,suggestion:p.a.object.isRequired,isSelected:p.a.bool.isRequired,onDelete:p.a.func,onMouseUp:p.a.func.isRequired,onMouseMove:p.a.func.isRequired,onMouseLeave:p.a.func.isRequired};var M={onDelete:h["noop"]};var x=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.id,n=t.index,r=t.isSelected,i=t.suggestion,o=t.onMouseUp,s=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector;var f=this.props.suggestion.channel||this.props.suggestion.mpim;return m.a.createElement("li",{"data-index":n,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-is-navigational":true,"data-id":f.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onMouseLeave:l,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},m.a.createElement(b["a"],{className:"c-search_autocomplete__channel",channelId:f.id,showDraftIcon:true,inline:true}),c&&m.a.createElement(j,{model:f}),!c&&m.a.createElement(A,null))}}]);return t}(f["PureComponent"]);x.displayName="SuggestionChannel";var P=x;x.defaultProps=M;var D=a(87);var F=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.id,n=t.index,r=t.isSelected,i=t.suggestion,o=t.onMouseUp,s=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector,f=i.file;return m.a.createElement("div",{"data-index":n,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-id":f.id,"data-is-navigational":true,key:f.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onMouseLeave:l,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},m.a.createElement(I["b"],{file:"tiny",type:this.props.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),m.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},m.a.createElement(D["a"],{text:f.title,noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true})),m.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},this.props.suggestion.fileTypeDescription),!c&&m.a.createElement(A,null))}}]);return t}(f["PureComponent"]);F.displayName="SuggestionFile";var L=F;F.defaultProps=M;var B=a(3);var U=a.n(B);var q=a(310);var G=a(20);var H=a(868);var W=a(280);var V=a(699);var z=new S["b"]("search");var Q={exactQueryString:p.a.string.isRequired,onDelete:p.a.func,searchSessionId:p.a.string.isRequired,querySessionId:p.a.string.isRequired,searchDelete:p.a.func.isRequired};var K={onDelete:h["noop"]};var Y=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(a,["onClick"]);return a}o()(t,[{key:"onClick",value:function e(t){var a=this;t.stopPropagation();var n=Object(H["a"])(this.props.exactQueryString,{shouldRenderEmojiAsText:true});this.props.searchDelete({terms:n,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(function(){a.props.onDelete()})}},{key:"render",value:function e(){return m.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},m.a.createElement(G["c"],{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:z.t("delete history result")},m.a.createElement(I["b"],{type:"times_small",inline:true})))}}]);return t}(f["PureComponent"]);Y.displayName="Delete";Y.defaultProps=K;var J=function e(t){return{searchDelete:function e(){return t(W["g"].apply(void 0,arguments))},querySessionId:t(Object(V["getQuerySessionId"])()),searchSessionId:t(Object(V["getSearchSessionId"])())}};var Z=Object(_["connect"])(null,J)(Y);var X=a(27);var $=new S["b"]("search");var ee=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.user,n=t.fullNameOrDisplayName,r=t.filter;var i=Object(y["isRestricted"])(a);var o=Object(y["isExternal"])(a);var s=Object(y["isBotUser"])(a);var l=Object(X["isHighResolutionScreen"])();var c=void 0;c="from"===r?$.t("from")+":":"to"===r?$.t("to")+":":null;var u={backgroundImage:"url("+(l?a.profile.image_48:a.profile.image_24)+")"};return m.a.createElement("span",{className:g()("token","member_token",{ra:i,external_member:o}),"data-member-id":a.id},m.a.createElement("span",{className:g()({bot:s,member_preview_link:!s},"member_image","thumb_24"),"data-member-id":a.id,"data-thumb-size":"24",style:u,"aria-hidden":"true"})," ",m.a.createElement("span",{className:"token_label"},c,m.a.createElement("b",null,"@",n)))}}]);return t}(f["PureComponent"]);ee.displayName="SuggestionQueryUserFilterBase";ee.defaultProps={filter:void 0};var te=function e(t,a){var n=a.user;return{fullNameOrDisplayName:Object(y["getPrefCompliantMemberName"])(t,n)}};var ae=Object(_["connect"])(te)(ee);var ne=ae;var re=new S["b"]("search");var ie=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.isPrivate,n=t.displayName,r=t.unknownFallback;var i=re.t("in:");return m.a.createElement("span",{className:"token channel_token"},m.a.createElement("span",{className:"token_label"},n?m.a.createElement(m.a.Fragment,null,i,a&&m.a.createElement("i",{className:"ts_icon ts_icon_lock"}),m.a.createElement("b",null,n)):r))}}]);return t}(f["PureComponent"]);ie.displayName="SuggestionQueryInFilterBase";ie.defaultProps={displayName:void 0,isPrivate:void 0};var oe=function e(t,a){var n=a.user,r=a.channel,i=a.fallbackChannelName,o=a.unknownFallback;var s=void 0;var l=r&&Object(k["isPrivateChannel"])(r);n?s="@"+Object(y["getPrefCompliantMemberName"])(t,n):r&&(s=Object(k["isUnknownOrNonExistent"])(r)?i:Object(k["getDisplayNameForChannel"])(t,r));return{unknownFallback:o,displayName:s,isPrivate:l}};var se=Object(_["connect"])(oe)(ie);se.propTypes={user:p.a.object,channel:p.a.object,fallbackChannelName:p.a.string,unknownFallback:p.a.string.isRequired};se.defaultProps={user:void 0,channel:void 0,fallbackChannelName:void 0};var le=se;var ce=a(143);var ue=new S["b"]("search");var de=function e(t){var a=t.theAttribute;return m.a.createElement("span",{className:"token has_token"},m.a.createElement("span",{className:"token_label"},ue.t("has"),":",m.a.createElement("b",null,m.a.createElement(D["a"],{text:Object(ce["a"])(a),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true}))))};de.displayName="SuggestionQueryHasFilter";var pe=de;var fe=new S["b"]("search");var me=function e(t){var a=t.fileType;return m.a.createElement("span",{className:"token type_token"},m.a.createElement("span",{className:"token_label"},fe.t("type"),":",m.a.createElement("b",null,a)))};me.displayName="SuggestionQueryTypeFilter";var he=me;var ve=new S["b"]("search");var ge={before:ve.t("before"),after:ve.t("after"),on:ve.t("on"),during:ve.t("during")};var be=function e(t){var a=t.modifierName,n=t.dateString;return m.a.createElement("span",{className:"token date_token"},m.a.createElement("span",{className:"token_label"},ge[a],": ",n))};be.displayName="SuggestionQueryDateFilter";var _e=be;var ye=new S["b"]("search");function ke(e,t){return Object(h["flatten"])(e.map(function(e){return[t,e]})).slice(1)}var Oe=U()({},R,{getClnMessage:p.a.func.isRequired});var we=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this;var a=this.props,n=a.id,r=a.index,i=a.isSelected,o=a.suggestion,s=a.onDelete,l=a.onMouseUp,c=a.onMouseMove,u=a.onMouseLeave,d=a.showUnreadCount;var p=o.suggestion_replacement,f=o.exact_string,h=o.token_list,v=o.featureVector,b=o.isCustomDateFilter,_=o.deletable;return m.a.createElement("div",{"data-index":r,"data-type":o.type,"data-replacement":p,"data-exact-string":f,"data-feature-vector":v,"data-is-custom-date-filter":b,"data-is-replacement-full":true,id:n,role:"option",tabIndex:"-1","aria-selected":i,onMouseMove:c,onMouseLeave:u,onClick:l,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":i})},m.a.createElement(I["b"],{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),m.a.createElement("div",{className:"c-search_autocomplete__query_text truncate-left"},m.a.createElement("span",{className:"truncate-left__content"},m.a.createElement("span",{className:"truncate_left__size"},ke(h.map(function(e,a){switch(true){case e.is_type_string:return m.a.createElement(D["a"],{key:a,text:t.props.getClnMessage(e.string),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true});case e.is_type_phrase:return"\u201c"+e.phrase+"\u201d";case e.is_type_member_filter&&e.is_type_from_filter:return m.a.createElement(ne,{key:a,filter:"from",user:e.user});case e.is_type_member_filter&&e.is_type_to_filter:return m.a.createElement(ne,{key:a,filter:"to",user:e.user});case e.is_type_member:return m.a.createElement(ne,{key:a,user:e.user});case e.is_type_in_filter:return m.a.createElement(le,{key:a,user:e.user,channel:e.channel,fallbackChannelName:e.fallbackChannelName,unknownFallback:e.string});case e.is_type_has_filter:return m.a.createElement(pe,{key:a,theAttribute:e.thing});case e.is_type_type_filter:return m.a.createElement(he,{key:a,fileType:e.file_type});case e.is_type_date_filter:return m.a.createElement(_e,{key:a,modifierName:e.modifier_name,dateString:e.date_string_normalized});default:return null}})," ")))),_?m.a.createElement(Z,{exactQueryString:f,onDelete:s}):!d&&m.a.createElement("div",{className:"c-search_autocomplete__suggestion_hint"},m.a.createElement("span",{className:"description"},ye.t("Search")),m.a.createElement(I["b"],{type:"enter",size:"inherit",className:"c-search_autocomplete__action_icon"})))}}]);return t}(f["PureComponent"]);we.displayName="SuggestionQuery";we.defaultProps=M;var Ee=function e(t){return{getClnMessage:function e(a){return Object(q["a"])(t,a,{isInternalMessage:false})}}};var Ce=Object(_["connect"])(Ee)(we);var je=a(358);var Se=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.id,n=t.index,r=t.isSelected,i=t.suggestion,o=t.onMouseUp,s=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector,f=i.user;var h=f&&f.profile&&f.profile.bot_id;return m.a.createElement("div",{"data-index":n,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-bot-id":h,"data-id":f.id,"data-is-navigational":true,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onMouseLeave:l,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},m.a.createElement("span",{className:"c-search_autocomplete__member"},m.a.createElement(je["a"],{id:f.id,size:"small",showPresence:true,showAvatar:true})),c&&m.a.createElement(j,{model:f}),!c&&m.a.createElement(A,null))}}]);return t}(f["PureComponent"]);Se.displayName="SuggestionUser";var Ie=Se;Se.defaultProps=M;var Te=a(337);var Ne=a(3421);var Ae={className:p.a.string,displayName:p.a.string.isRequired,id:p.a.string.isRequired,inline:p.a.bool};var Re={className:void 0,inline:false};var Me=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.displayName,n=t.id,r=t.inline,i=t.className;return m.a.createElement("span",{className:g()("c-team_name",i)},m.a.createElement(Te["b"],{id:n,className:"c-team_name__icon"}),m.a.createElement("span",{className:g()("c-team_name__text",{"c-team_name__text--inline":!r})},a))}}]);return t}(f["PureComponent"]);Me.displayName="TeamName";var xe=Me;Me.defaultProps=Re;Me.displayName="TeamName";var Pe=xe;var De=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.id,n=t.index,r=t.isSelected,i=t.suggestion,o=t.onMouseUp,s=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector;var f=this.props.suggestion.team;return m.a.createElement("li",{"data-index":n,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-is-navigational":true,"data-id":f.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onMouseLeave:l,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},m.a.createElement(Pe,{className:"c-search_autocomplete__team",id:f.id,displayName:f.name,inline:true}),!c&&m.a.createElement(A,null))}}]);return t}(f["PureComponent"]);De.displayName="SuggestionTeam";var Fe=De;De.defaultProps=M;var Le=a(3423);var Be={className:p.a.string,displayName:p.a.string.isRequired,id:p.a.string.isRequired,inline:p.a.bool};var Ue={className:void 0,inline:false};var qe=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.displayName,n=t.id,r=t.className,i=t.inline;var o="list";"Vall_threads"===n?o="small-reply":"Vall_unreads"===this.props.id&&(o="list");return m.a.createElement("span",{className:g()("c-view_name",r)},m.a.createElement(I["b"],{className:"c-view_name__icon",type:o}),m.a.createElement("span",{className:g()("c-view_name__text",{"c-view_name__text--inline":!i})},a))}}]);return t}(f["PureComponent"]);qe.displayName="ViewName";var Ge=qe;qe.defaultProps=Ue;qe.displayName="ViewName";var He=Ge;var We=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){var t=this.props,a=t.id,n=t.index,r=t.isSelected,i=t.suggestion,o=t.onMouseUp,s=t.onMouseMove,l=t.onMouseLeave,c=t.showUnreadCount;var u=i.suggestion_replacement,d=i.exact_string,p=i.featureVector;var f=this.props.suggestion.view;return m.a.createElement("li",{"data-index":n,"data-type":i.type,"data-replacement":u,"data-exact-string":d,"data-feature-vector":p,"data-is-navigational":true,"data-id":f.id,id:a,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onMouseLeave:l,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},m.a.createElement(He,{displayName:f.name,id:f.id,className:"c-search_autocomplete__view",inline:true}),!c&&m.a.createElement(A,null))}}]);return t}(f["PureComponent"]);We.displayName="SuggestionView";var Ve=We;We.defaultProps=M;a.d(t,"b",function(){return Ke});var ze={index:p.a.number.isRequired,suggestion:p.a.object.isRequired,isSelected:p.a.bool.isRequired,onSelected:p.a.func,onAccept:p.a.func,onDelete:p.a.func,showUnreadCount:p.a.bool};var Qe={onAccept:h["noop"],onSelected:h["noop"],onDelete:h["noop"],showUnreadCount:false};var Ke=function e(t){return"c-search_autcomplete__suggestion_"+t};var Ye=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(a,["onMouseUp","onMouseMove","onMouseLeave","onDelete"]);return a}o()(t,[{key:"onMouseUp",value:function e(t){if(0!==t.button||t.ctrlKey)return;this.props.onAccept()}},{key:"onMouseMove",value:function e(){if(this.props.isSelected)return;this.props.onSelected(this.props.index,true)}},{key:"onMouseLeave",value:function e(){this.props.onSelected(null,false)}},{key:"onDelete",value:function e(){this.props.onDelete(this.props.suggestion)}},{key:"componentTypeFromSuggestion",value:function e(t){if(t.is_type_query_completion)return Ce;if(t.is_type_user)return Ie;if(t.is_type_channel||t.is_type_mpim)return P;if(t.is_type_file)return L;if(t.is_type_view)return Ve;if(t.is_type_team)return Fe;return null}},{key:"render",value:function e(){var t=Ke(this.props.index);return m.a.createElement(this.componentTypeFromSuggestion(this.props.suggestion),{id:t,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,showUnreadCount:this.props.showUnreadCount})}}]);return t}(f["PureComponent"]);Ye.displayName="Suggestion";Ye.defaultProps=Qe;var Je=t["a"]=Ye},function(e,t,a){"use strict";var n=a(1);var r=a.n(n);var i=a(31);var o=a(77);var s=a(5);var l=a.n(s);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var f=a(8);var m=a.n(f);var h=a(14);var v=a(0);var g=a.n(v);var b=a(35);var _=a.n(b);var y=a(10);var k=a(103);var O=a(472);var w=a(475);var E=a(188);var C=a(121);var j=a(88);var S=a(824);var I=a(1001);var T=a(171);var N=a(21);var A=a(1011);var R=a(11);var M=a(1750);var x=new y["b"]("do_not_disturb");var P={snoozeNotifications:g.a.func.isRequired,do24hrTime:g.a.bool,featureBetterSnooze:g.a.bool};var D={do24hrTime:false,featureBetterSnooze:false};var F=function(e){m()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=_()().add(1,"hour").startOf("hour");var r=n.format("YYYY-MM-DD");var i=n.format("HH:mm");var o=_()(r+" "+i).unix();a.state={snoozeEndDate:r,snoozeEndTime:i,snoozeEndTs:o};a.onDateChange=a.onDateChange.bind(a);a.onTimeChange=a.onTimeChange.bind(a);a.onGo=a.onGo.bind(a);return a}u()(t,[{key:"onDateChange",value:function e(t){var a=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:t,snoozeEndTs:_()(t+" "+a).unix()}})}},{key:"onTimeChange",value:function e(t){var a=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:t,snoozeEndTs:_()(a+" "+t).unix()}})}},{key:"onGo",value:function e(){var t=this.state.snoozeEndTs;var a=Object(I["a"])(t);if(a<=0)return;this.props.snoozeNotifications({duration:a})}},{key:"getTimeSelectOptions",value:function e(){var t=this.props.do24hrTime;var a=this.state.snoozeEndDate;var n=a===_()().format("YYYY-MM-DD");var r=_()().format("HH:mm");var i=Object.keys(S["a"]).filter(function(e){return!(n&&e<r)}).map(function(e){return{value:e,label:t?e:S["a"][e]}});return i}},{key:"render",value:function e(){var t=this;var a=this.props.featureBetterSnooze;var n=this.state,i=n.snoozeEndDate,o=n.snoozeEndTime,s=n.snoozeEndTs;if(!a)return null;var l=Object(I["a"])(s)<=0;var c=Object(T["g"])(s);var u=x.t("Pause notifications until\u2026");var d=_()().format("YYYY-MM-DD");var p=_()().add(1,"year").format("YYYY-MM-DD");return r.a.createElement(k["a"],{title:u,goButtonText:x.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:l,onGo:this.onGo,showCancelButton:false},r.a.createElement(E["b"],{ariaHasPopup:true,position:"bottom",offsetX:67,renderPopover:function e(a){return r.a.createElement(E["a"],a,r.a.createElement("div",{className:"p-block_kit_date_picker_calendar_wrapper"},r.a.createElement(O["a"],{selectedDate:i,onDateChange:function e(n){var r=n.selectedDate;a.onClose();t.onDateChange(r)},disableDatesBefore:d,disableDatesAfter:p})))}},r.a.createElement(j["a"],{htmlFor:"dnd_dialog_date_button",text:x.t("Date")},r.a.createElement(C["a"],{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger",ariaLabel:x.t("Date to snooze notifications until")},c))),r.a.createElement(j["a"],{htmlFor:"dnd_dialog_time_select",text:x.t("Time")},r.a.createElement(w["b"],{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:o,useFilteredInput:false,usePlaceholderOption:false})))}}]);return t}(n["PureComponent"]);F.displayName="DndDialog";F.defaultProps=D;var L=function e(t){return{featureBetterSnooze:Object(R["isFeatureEnabled"])(t,"feature_better_snooze"),do24hrTime:Object(N["getUserPref"])(t,"time24")}};var B={snoozeNotifications:A["e"]};var U=Object(h["connect"])(L,B)(F);var q=Object(i["b"])("Opens the DND dialog",function(e,t,a){e(Object(o["openModal"])({element:r.a.createElement(U,a)}))});q.propTypes=null;var G=t["a"]=q},function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(14);var l=a(76);var c=a(2);var u=a(11);var d=a(41);var p=a(10);var f=a(1121);var m=new p["b"]("threads");var h={participantNames:r.a.arrayOf(r.a.string).isRequired,replyUsersCount:r.a.number.isRequired,replyCount:r.a.number,prefixWithReplyCount:r.a.bool,includesSelf:r.a.bool,broadcastPreabmle:r.a.bool};var v={replyCount:0,prefixWithReplyCount:false,includesSelf:false,broadcastPreabmle:false};function g(e){var t=e.participantNames,a=e.includesSelf,n=e.replyCount,r=e.replyUsersCount,i=e.prefixWithReplyCount,o=e.broadcastPreabmle;if(o&&1===n)return m.rt("1 reply");if(a)switch(r){case 1:if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:n});return m.t("Just you");case 2:if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:n,userName:t[0]});return m.rt("{userName} and you",{userName:t[0]});default:if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:n,userName1:t[0],userName2:t[1]});return m.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var s=Object(p["f"])(t,{noEscape:true}).join("");if(i)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:n,names:s});return s}function b(e){var t=e.participantNames,a=e.replyUsersCount,n=e.replyCount,r=e.prefixWithReplyCount;var i=a-2;var s=Object(c["drop"])(t,2);s.length<i&&s.push(m.rt("others"));var l=Object(p["f"])(s,{noEscape:true}).join("");if(r)return m.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:n,userName1:t[0],userName2:t[1],numOthers:i},function(e){var t=e.text;return o.a.createElement(d["d"],{tip:l},o.a.createElement("span",null,t))});return m.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:i},function(e){var t=e.text;return o.a.createElement(d["d"],{tip:l},o.a.createElement("span",null,t))})}function _(e){var t=e.participantNames,a=e.replyUsersCount,n=e.replyCount,r=e.prefixWithReplyCount,i=e.includesSelf,s=e.broadcastPreabmle;return o.a.createElement("span",{className:"p-thread_participant_list"},a<=3?g({participantNames:t,replyCount:n,replyUsersCount:a,prefixWithReplyCount:r,includesSelf:i,broadcastPreabmle:s}):b({participantNames:t,replyCount:n,replyUsersCount:a,prefixWithReplyCount:r}))}_.displayName="ThreadParticipantList";_.defaultProps=v;var y=Object(l["pure"])(_);function k(e,t){var a=t.replyUsers;var n=t.replyUsersCount;var r=Object(u["getCurrentUserId"])(e);var i=Object(c["includes"])(a,r);var o=Object(f["a"])(e,a);n||(n=a.length);return{participantNames:o,replyUsersCount:n,includesSelf:i}}var O=Object(s["connect"])(k)(_);a.d(t,false,function(){return});a.d(t,false,function(){return});var w=t["a"]=O},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){var n=a(1768),r=a(1036),i=a(1333),o=a(1334);var s=i(function(e,t){return o(e)?n(e,r(t,1,o,true)):[]});e.exports=s},function(e,t,a){var n=a(1039),r=a(1330),i=a(1331),o=a(1332),s=a(1309),l=a(1042);var c=200;function u(e,t,a,u){var d=-1,p=r,f=true,m=e.length,h=[],v=t.length;if(!m)return h;a&&(t=o(t,s(a)));if(u){p=i;f=false}else if(t.length>=c){p=l;f=false;t=new n(t)}e:while(++d<m){var g=e[d],b=null==a?g:a(g);g=u||0!==g?g:0;if(f&&b===b){var _=v;while(_--)if(t[_]===b)continue e;h.push(g)}else p(t,b,u)||h.push(g)}return h}e.exports=u},function(e,t,a){var n=a(1770),r=a(911),i=a(1041);function o(){this.size=0;this.__data__={hash:new n,map:new(i||r),string:new n}}e.exports=o},function(e,t,a){var n=a(1771),r=a(1772),i=a(1773),o=a(1774),s=a(1775);function l(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n;l.prototype["delete"]=r;l.prototype.get=i;l.prototype.has=o;l.prototype.set=s;e.exports=l},function(e,t,a){var n=a(910);function r(){this.__data__=n?n(null):{};this.size=0}e.exports=r},function(e,t){function a(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=a},function(e,t,a){var n=a(910);var r="__lodash_hash_undefined__";var i=Object.prototype;var o=i.hasOwnProperty;function s(e){var t=this.__data__;if(n){var a=t[e];return a===r?void 0:a}return o.call(t,e)?t[e]:void 0}e.exports=s},function(e,t,a){var n=a(910);var r=Object.prototype;var i=r.hasOwnProperty;function o(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}e.exports=o},function(e,t,a){var n=a(910);var r="__lodash_hash_undefined__";function i(e,t){var a=this.__data__;this.size+=this.has(e)?0:1;a[e]=n&&void 0===t?r:t;return this}e.exports=i},function(e,t){function a(){this.__data__=[];this.size=0}e.exports=a},function(e,t,a){var n=a(912);var r=Array.prototype;var i=r.splice;function o(e){var t=this.__data__,a=n(t,e);if(a<0)return false;var r=t.length-1;a==r?t.pop():i.call(t,a,1);--this.size;return true}e.exports=o},function(e,t,a){var n=a(912);function r(e){var t=this.__data__,a=n(t,e);return a<0?void 0:t[a][1]}e.exports=r},function(e,t,a){var n=a(912);function r(e){return n(this.__data__,e)>-1}e.exports=r},function(e,t,a){var n=a(912);function r(e,t){var a=this.__data__,r=n(a,e);if(r<0){++this.size;a.push([e,t])}else a[r][1]=t;return this}e.exports=r},function(e,t,a){var n=a(913);function r(e){var t=n(this,e)["delete"](e);this.size-=t?1:0;return t}e.exports=r},function(e,t){function a(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=a},function(e,t,a){var n=a(913);function r(e){return n(this,e).get(e)}e.exports=r},function(e,t,a){var n=a(913);function r(e){return n(this,e).has(e)}e.exports=r},function(e,t,a){var n=a(913);function r(e,t){var a=n(this,e),r=a.size;a.set(e,t);this.size+=a.size==r?0:1;return this}e.exports=r},function(e,t){var a="__lodash_hash_undefined__";function n(e){this.__data__.set(e,a);return this}e.exports=n},function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},function(e,t,a){var n=a(1789),r=a(1790),i=a(1791);function o(e,t,a){return t===t?i(e,t,a):n(e,r,a)}e.exports=o},function(e,t){function a(e,t,a,n){var r=e.length,i=a+(n?1:-1);while(n?i--:++i<r)if(t(e[i],i,e))return i;return-1}e.exports=a},function(e,t){function a(e){return e!==e}e.exports=a},function(e,t){function a(e,t,a){var n=a-1,r=e.length;while(++n<r)if(e[n]===t)return n;return-1}e.exports=a},function(e,t,a){var n=a(1793);var r=Math.max;function i(e,t,a){t=r(void 0===t?e.length-1:t,0);return function(){var i=arguments,o=-1,s=r(i.length-t,0),l=Array(s);while(++o<s)l[o]=i[t+o];o=-1;var c=Array(t+1);while(++o<t)c[o]=i[o];c[t]=a(l);return n(e,this,c)}}e.exports=i},function(e,t){function a(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}e.exports=a},function(e,t,a){var n=a(1795),r=a(1797);var i=r(n);e.exports=i},function(e,t,a){var n=a(1796),r=a(1316),i=a(842);var o=r?function(e,t){return r(e,"toString",{configurable:true,enumerable:false,value:n(t),writable:true})}:i;e.exports=o},function(e,t){function a(e){return function(){return e}}e.exports=a},function(e,t){var a=800,n=16;var r=Date.now;function i(e){var t=0,i=0;return function(){var o=r(),s=n-(o-i);i=o;if(s>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},function(e,t,a){var n=a(1036),r=a(1333),i=a(1799),o=a(1334);var s=r(function(e){return i(n(e,1,o,true))});e.exports=s},function(e,t,a){var n=a(1039),r=a(1330),i=a(1331),o=a(1042),s=a(1800),l=a(1043);var c=200;function u(e,t,a){var u=-1,d=r,p=e.length,f=true,m=[],h=m;if(a){f=false;d=i}else if(p>=c){var v=t?null:s(e);if(v)return l(v);f=false;d=o;h=new n}else h=t?[]:m;e:while(++u<p){var g=e[u],b=t?t(g):g;g=a||0!==g?g:0;if(f&&b===b){var _=h.length;while(_--)if(h[_]===b)continue e;t&&h.push(b);m.push(g)}else if(!d(h,b,a)){h!==m&&h.push(b);m.push(g)}}return m}e.exports=u},function(e,t,a){var n=a(1335),r=a(1801),i=a(1043);var o=1/0;var s=n&&1/i(new n([,-0]))[1]==o?function(e){return new n(e)}:r;e.exports=s},function(e,t){function a(){}e.exports=a},function(e,t,a){var n=a(771),r=a(1803),i=a(725);var o="[object Object]";var s=Function.prototype,l=Object.prototype;var c=s.toString;var u=l.hasOwnProperty;var d=c.call(Object);function p(e){if(!i(e)||n(e)!=o)return false;var t=r(e);if(null===t)return true;var a=u.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==d}e.exports=p},function(e,t,a){var n=a(1310);var r=n(Object.getPrototypeOf,Object);e.exports=r},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=c;var r=a(1805);var i=l(r);var o=a(842);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.default;if(!e)return function(e){return function(){return e.apply(void 0,arguments)}};function r(e){return n({},e,{actionsById:(0,i.default)(e.actionsById,function(e){return n({},e,{action:a(e.action)})}),committedState:t(e.committedState),computedStates:e.computedStates.map(function(e){return n({},e,{state:t(e.state)})})})}return function(t){return function(a,i,o){var s="redux-dev-session-"+e;var l=void 0;try{var c=localStorage.getItem(s);if(c){l=r(JSON.parse(c))||i;t(a,i)}}catch(e){console.warn("Could not read debug session from localStorage:",e);try{localStorage.removeItem(s)}finally{l=void 0}}var u=t(a,l,o);return n({},u,{dispatch:function e(t){u.dispatch(t);try{localStorage.setItem(s,JSON.stringify(u.getState()))}catch(e){console.warn("Could not write debug session to localStorage:",e)}return t}})}}}},function(e,t,a){var n=a(1315),r=a(1304),i=a(1806);function o(e,t){var a={};t=i(t,3);r(e,function(e,r,i){n(a,r,t(e,r,i))});return a}e.exports=o},function(e,t,a){var n=a(1807),r=a(1830),i=a(842),o=a(648),s=a(1840);function l(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return o(e)?r(e[0],e[1]):n(e);return s(e)}e.exports=l},function(e,t,a){var n=a(1808),r=a(1829),i=a(1340);function o(e){var t=r(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(a){return a===e||n(a,e,t)}}e.exports=o},function(e,t,a){var n=a(1336),r=a(1337);var i=1,o=2;function s(e,t,a,s){var l=a.length,c=l,u=!s;if(null==e)return!c;e=Object(e);while(l--){var d=a[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++l<c){d=a[l];var p=d[0],f=e[p],m=d[1];if(u&&d[2]){if(void 0===f&&!(p in e))return false}else{var h=new n;if(s)var v=s(f,m,p,e,t,h);if(!(void 0===v?r(m,f,i|o,s,h):v))return false}}return true}e.exports=s},function(e,t,a){var n=a(911);function r(){this.__data__=new n;this.size=0}e.exports=r},function(e,t){function a(e){var t=this.__data__,a=t["delete"](e);this.size=t.size;return a}e.exports=a},function(e,t){function a(e){return this.__data__.get(e)}e.exports=a},function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},function(e,t,a){var n=a(911),r=a(1041),i=a(1040);var o=200;function s(e,t){var a=this.__data__;if(a instanceof n){var s=a.__data__;if(!r||s.length<o-1){s.push([e,t]);this.size=++a.size;return this}a=this.__data__=new i(s)}a.set(e,t);this.size=a.size;return this}e.exports=s},function(e,t,a){var n=a(1336),r=a(1338),i=a(1816),o=a(1819),s=a(1825),l=a(648),c=a(1306),u=a(1308);var d=1;var p="[object Arguments]",f="[object Array]",m="[object Object]";var h=Object.prototype;var v=h.hasOwnProperty;function g(e,t,a,h,g,b){var _=l(e),y=l(t),k=_?f:s(e),O=y?f:s(t);k=k==p?m:k;O=O==p?m:O;var w=k==m,E=O==m,C=k==O;if(C&&c(e)){if(!c(t))return false;_=true;w=false}if(C&&!w){b||(b=new n);return _||u(e)?r(e,t,a,h,g,b):i(e,t,k,a,h,g,b)}if(!(a&d)){var j=w&&v.call(e,"__wrapped__"),S=E&&v.call(t,"__wrapped__");if(j||S){var I=j?e.value():e,T=S?t.value():t;b||(b=new n);return g(I,T,a,h,b)}}if(!C)return false;b||(b=new n);return o(e,t,a,h,g,b)}e.exports=g},function(e,t){function a(e,t){var a=-1,n=null==e?0:e.length;while(++a<n)if(t(e[a],a,e))return true;return false}e.exports=a},function(e,t,a){var n=a(841),r=a(1817),i=a(1037),o=a(1338),s=a(1818),l=a(1043);var c=1,u=2;var d="[object Boolean]",p="[object Date]",f="[object Error]",m="[object Map]",h="[object Number]",v="[object RegExp]",g="[object Set]",b="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",k="[object DataView]";var O=n?n.prototype:void 0,w=O?O.valueOf:void 0;function E(e,t,a,n,O,E,C){switch(a){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!E(new r(e),new r(t)))return false;return true;case d:case p:case h:return i(+e,+t);case f:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case m:var j=s;case g:var S=n&c;j||(j=l);if(e.size!=t.size&&!S)return false;var I=C.get(e);if(I)return I==t;n|=u;C.set(e,t);var T=o(j(e),j(t),n,O,E,C);C["delete"](e);return T;case _:if(w)return w.call(e)==w.call(t)}return false}e.exports=E},function(e,t,a){var n=a(647);var r=n.Uint8Array;e.exports=r},function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e,n){a[++t]=[n,e]});return a}e.exports=a},function(e,t,a){var n=a(1820);var r=1;var i=Object.prototype;var o=i.hasOwnProperty;function s(e,t,a,i,s,l){var c=a&r,u=n(e),d=u.length,p=n(t),f=p.length;if(d!=f&&!c)return false;var m=d;while(m--){var h=u[m];if(!(c?h in t:o.call(t,h)))return false}var v=l.get(e);if(v&&l.get(t))return v==t;var g=true;l.set(e,t);l.set(t,e);var b=c;while(++m<d){h=u[m];var _=e[h],y=t[h];if(i)var k=c?i(y,_,h,t,e,l):i(_,y,h,e,t,l);if(!(void 0===k?_===y||s(_,y,a,i,l):k)){g=false;break}b||(b="constructor"==h)}if(g&&!b){var O=e.constructor,w=t.constructor;O!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof O&&O instanceof O&&"function"==typeof w&&w instanceof w)&&(g=false)}l["delete"](e);l["delete"](t);return g}e.exports=s},function(e,t,a){var n=a(1821),r=a(1822),i=a(1032);function o(e){return n(e,i,r)}e.exports=o},function(e,t,a){var n=a(1314),r=a(648);function i(e,t,a){var i=t(e);return r(e)?i:n(i,a(e))}e.exports=i},function(e,t,a){var n=a(1823),r=a(1824);var i=Object.prototype;var o=i.propertyIsEnumerable;var s=Object.getOwnPropertySymbols;var l=s?function(e){if(null==e)return[];e=Object(e);return n(s(e),function(t){return o.call(e,t)})}:r;e.exports=l},function(e,t){function a(e,t){var a=-1,n=null==e?0:e.length,r=0,i=[];while(++a<n){var o=e[a];t(o,a,e)&&(i[r++]=o)}return i}e.exports=a},function(e,t){function a(){return[]}e.exports=a},function(e,t,a){var n=a(1826),r=a(1041),i=a(1827),o=a(1335),s=a(1828),l=a(771),c=a(1317);var u="[object Map]",d="[object Object]",p="[object Promise]",f="[object Set]",m="[object WeakMap]";var h="[object DataView]";var v=c(n),g=c(r),b=c(i),_=c(o),y=c(s);var k=l;(n&&k(new n(new ArrayBuffer(1)))!=h||r&&k(new r)!=u||i&&k(i.resolve())!=p||o&&k(new o)!=f||s&&k(new s)!=m)&&(k=function(e){var t=l(e),a=t==d?e.constructor:void 0,n=a?c(a):"";if(n)switch(n){case v:return h;case g:return u;case b:return p;case _:return f;case y:return m}return t});e.exports=k},function(e,t,a){var n=a(726),r=a(647);var i=n(r,"DataView");e.exports=i},function(e,t,a){var n=a(726),r=a(647);var i=n(r,"Promise");e.exports=i},function(e,t,a){var n=a(726),r=a(647);var i=n(r,"WeakMap");e.exports=i},function(e,t,a){var n=a(1339),r=a(1032);function i(e){var t=r(e),a=t.length;while(a--){var i=t[a],o=e[i];t[a]=[i,o,n(o)]}return t}e.exports=i},function(e,t,a){var n=a(1337),r=a(1831),i=a(1837),o=a(1044),s=a(1339),l=a(1340),c=a(914);var u=1,d=2;function p(e,t){if(o(e)&&s(t))return l(c(e),t);return function(a){var o=r(a,e);return void 0===o&&o===t?i(a,e):n(t,o,u|d)}}e.exports=p},function(e,t,a){var n=a(1341);function r(e,t,a){var r=null==e?void 0:n(e,t);return void 0===r?a:r}e.exports=r},function(e,t,a){var n=a(1833);var r=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var o=/\\(\\)?/g;var s=n(function(e){var t=[];r.test(e)&&t.push("");e.replace(i,function(e,a,n,r){t.push(n?r.replace(o,"$1"):a||e)});return t});e.exports=s},function(e,t,a){var n=a(1834);var r=500;function i(e){var t=n(e,function(e){a.size===r&&a.clear();return e});var a=t.cache;return t}e.exports=i},function(e,t,a){var n=a(1040);var r="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(r);var a=function(){var n=arguments,r=t?t.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var o=e.apply(this,n);a.cache=i.set(r,o)||i;return o};a.cache=new(i.Cache||n);return a}i.Cache=n;e.exports=i},function(e,t,a){var n=a(1836);function r(e){return null==e?"":n(e)}e.exports=r},function(e,t,a){var n=a(841),r=a(1332),i=a(648),o=a(1045);var s=1/0;var l=n?n.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return r(e,u)+"";if(o(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}e.exports=u},function(e,t,a){var n=a(1838),r=a(1839);function i(e,t){return null!=e&&r(e,t,n)}e.exports=i},function(e,t){function a(e,t){return null!=e&&t in Object(e)}e.exports=a},function(e,t,a){var n=a(1342),r=a(1033),i=a(648),o=a(1307),s=a(1034),l=a(914);function c(e,t,a){t=n(t,e);var c=-1,u=t.length,d=false;while(++c<u){var p=l(t[c]);if(!(d=null!=e&&a(e,p)))break;e=e[p]}if(d||++c!=u)return d;u=null==e?0:e.length;return!!u&&s(u)&&o(p,u)&&(i(e)||r(e))}e.exports=c},function(e,t,a){var n=a(1841),r=a(1842),i=a(1044),o=a(914);function s(e){return i(e)?n(o(e)):r(e)}e.exports=s},function(e,t){function a(e){return function(t){return null==t?void 0:t[e]}}e.exports=a},function(e,t,a){var n=a(1341);function r(e){return function(t){return n(t,e)}}e.exports=r},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=h;var r=a(1);var i=d(r);var o=a(1844);var s=d(o);var l=a(14);var c=a(1329);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){var t,a;var o=r.Children.only(e);var c=o.props;var d=o.type;var h=(0,l.connect)(function(e){return e})(d);return a=t=function(e){m(t,e);function t(a,n){p(this,t);var r=f(this,e.call(this,a,n));if(!a.store&&!n.store){console.error('Redux DevTools could not render. You must pass the Redux store to <DevTools> either as a "store" prop or by wrapping it in a <Provider store={store}>.');return f(r)}n.store?r.liftedStore=n.store.liftedStore:r.liftedStore=a.store.liftedStore;r.liftedStore||console.error("Redux DevTools could not render. Did you forget to include DevTools.instrument() in your store enhancer chain before using createStore()?");return r}t.prototype.render=function e(){if(!this.liftedStore)return null;return i.default.createElement(h,n({},c,{store:this.liftedStore}))};return t}(r.Component),t.contextTypes={store:s.default.object},t.propTypes={store:s.default.object},t.instrument=function(e){return(0,u.default)(function(e,t){return d.update(c,e,t)},e)},a}},function(e,t,a){var n,r,i;false;e.exports=a(1845)()},function(e,t,a){"use strict";var n=a(343);var r=a(342);var i=a(1846);e.exports=function(){function e(e,t,a,n,o,s){if(s===i)return;r(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=n;a.PropTypes=a;return a}},function(e,t,a){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var r=a(1);var i=w(r);var o=a(915);var s=w(o);var l=a(843);var c=w(l);var u=a(1851);var d=O(u);var p=a(931);var f=a(1344);var m=a(1890);var h=w(m);var v=a(1891);var g=w(v);var b=a(1894);var _=w(b);var y=a(1923);var k=w(y);function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e;return t}function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=p.ActionCreators.toggleAction;var I=p.ActionCreators.setActionsActive;var T={container:{fontFamily:"monaco, Consolas, Lucida Console, monospace",position:"relative",overflowY:"hidden",width:"100%",height:"100%",minWidth:300,direction:"ltr"},elements:{position:"absolute",left:0,right:0,top:0,bottom:0,overflowX:"hidden",overflowY:"auto"}};var N=function(e){j(t,e);function t(a){E(this,t);var n=C(this,e.call(this,a));n.shouldComponentUpdate=c.default;n.updateScrollTop=(0,k.default)(function(){var e=n.node;n.props.dispatch((0,f.updateScrollTop)(e?e.scrollTop:0))},500);n.handleToggleAction=n.handleToggleAction.bind(n);n.handleToggleConsecutiveAction=n.handleToggleConsecutiveAction.bind(n);n.getRef=n.getRef.bind(n);return n}t.prototype.scroll=function e(){var t=this.node;if(!t)return;if(this.scrollDown){var a=t.offsetHeight;var n=t.scrollHeight;t.scrollTop=n-a;this.scrollDown=false}};t.prototype.componentDidMount=function e(){var t=this.node;if(!t||!this.props.monitorState)return;if(this.props.preserveScrollTop){t.scrollTop=this.props.monitorState.initialScrollTop;t.addEventListener("scroll",this.updateScrollTop)}else{this.scrollDown=true;this.scroll()}};t.prototype.componentWillUnmount=function e(){var t=this.node;t&&this.props.preserveScrollTop&&t.removeEventListener("scroll",this.updateScrollTop)};t.prototype.componentWillReceiveProps=function e(t){var a=this.node;if(a)if(this.props.stagedActionIds.length<t.stagedActionIds.length){var n=a.scrollTop;var r=a.offsetHeight;var i=a.scrollHeight;this.scrollDown=Math.abs(i-(n+r))<20}else this.scrollDown=false;else this.scrollDown=true};t.prototype.componentDidUpdate=function e(){this.scroll()};t.prototype.handleToggleAction=function e(t){this.props.dispatch(S(t))};t.prototype.handleToggleConsecutiveAction=function e(t){var a=this.props;var n=a.monitorState;var r=a.actionsById;var i=n.consecutiveToggleStartId;if(i&&r[i]){var o=this.props.skippedActionIds;var s=Math.min(i,t);var l=Math.max(i,t);var c=o.indexOf(i)>-1;this.props.dispatch(I(s,l+1,c));this.props.dispatch((0,f.startConsecutiveToggle)(null))}else t>0&&this.props.dispatch((0,f.startConsecutiveToggle)(t))};t.prototype.getTheme=function e(){var t=this.props.theme;if("string"!==typeof t)return t;if("undefined"!==typeof d[t])return d[t];console.warn("DevTools theme "+t+" not found, defaulting to nicinabox");return d.nicinabox};t.prototype.getRef=function e(t){this.node=t};t.prototype.render=function e(){var t=this.getTheme();var a=this.props.monitorState.consecutiveToggleStartId;var r=this.props;var o=r.dispatch;var s=r.actionsById;var l=r.skippedActionIds;var c=r.stagedActionIds;var u=r.computedStates;var d=r.currentStateIndex;var p=r.select;var f=r.expandActionRoot;var m=r.expandStateRoot;var h=r.markStateDiff;var v={theme:t,actionsById:s,skippedActionIds:l,stagedActionIds:c,computedStates:u,currentStateIndex:d,consecutiveToggleStartId:a,select:p,expandActionRoot:f,expandStateRoot:m,markStateDiff:h,onActionClick:this.handleToggleAction,onActionShiftClick:this.handleToggleConsecutiveAction};return i.default.createElement("div",{style:n({},T.container,{backgroundColor:t.base00})},!this.props.hideMainButtons&&i.default.createElement(g.default,{theme:t,dispatch:o,hasStates:u.length>1,hasSkippedActions:l.length>0}),i.default.createElement("div",{style:this.props.hideMainButtons?T.elements:n({},T.elements,{top:30}),ref:this.getRef},i.default.createElement(_.default,v)))};return t}(r.Component);N.update=h.default;N.propTypes={dispatch:s.default.func,computedStates:s.default.array,actionsById:s.default.object,stagedActionIds:s.default.array,skippedActionIds:s.default.array,monitorState:s.default.shape({initialScrollTop:s.default.number,consecutiveToggleStartId:s.default.number}),preserveScrollTop:s.default.bool,select:s.default.func,theme:s.default.oneOfType([s.default.object,s.default.string]),expandActionRoot:s.default.bool,expandStateRoot:s.default.bool,markStateDiff:s.default.bool,hideMainButtons:s.default.bool};N.defaultProps={select:function e(t){return t},theme:"nicinabox",preserveScrollTop:true,expandActionRoot:true,expandStateRoot:true,markStateDiff:false};t.default=N},function(e,t,a){"use strict";var n=a(343);var r=a(342);var i=a(1849);e.exports=function(){function e(e,t,a,n,o,s){if(s===i)return;r(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=n;a.PropTypes=a;return a}},function(e,t,a){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,a){"use strict";t.__esModule=true;t["default"]=n;function n(e,t){if(e===t)return true;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return false;var a=Object.keys(e);var n=Object.keys(t);if(a.length!==n.length)return false;var r=Object.prototype.hasOwnProperty.bind(t);for(var i=0;i<a.length;i++)if(!r(a[i])||e[a[i]]!==t[a[i]])return false;return true}e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;function n(e){return e&&e.__esModule?e["default"]:e}function r(e,t){var a=t({},e);delete a["default"];return a}function i(e,t){var a=Object.getOwnPropertyNames(t);for(var n=0;n<a.length;n++){var r=a[n];var i=Object.getOwnPropertyDescriptor(t,r);i&&i.configurable&&void 0===e[r]&&Object.defineProperty(e,r,i)}return e}var o=a(1343);i(t,r(o,i));var s=a(1889);t.nicinabox=n(s)},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"brewer",author:"timoth\xe9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t.default=o;var n=a(1344);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var a=arguments[2];if(!e.preserveScrollTop)return 0;return a.type===n.UPDATE_SCROLL_TOP?a.scrollTop:t}function i(e,t,a){return a.type===n.START_CONSECUTIVE_TOGGLE?a.id:t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=arguments[2];return{initialScrollTop:r(e,t.initialScrollTop,a),consecutiveToggleStartId:i(e,t.consecutiveToggleStartId,a)}}},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var r=a(1);var i=f(r);var o=a(915);var s=f(o);var l=a(843);var c=f(l);var u=a(931);var d=a(1892);var p=f(d);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=u.ActionCreators.reset;var b=u.ActionCreators.rollback;var _=u.ActionCreators.commit;var y=u.ActionCreators.sweep;var k={textAlign:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderColor:"transparent",zIndex:1,display:"flex",flexDirection:"row"};var O=function(e){v(t,e);function t(a){m(this,t);var n=h(this,e.call(this,a));n.shouldComponentUpdate=c.default;n.handleReset=n.handleReset.bind(n);n.handleRollback=n.handleRollback.bind(n);n.handleSweep=n.handleSweep.bind(n);n.handleCommit=n.handleCommit.bind(n);return n}t.prototype.handleRollback=function e(){this.props.dispatch(b())};t.prototype.handleSweep=function e(){this.props.dispatch(y())};t.prototype.handleCommit=function e(){this.props.dispatch(_())};t.prototype.handleReset=function e(){this.props.dispatch(g())};t.prototype.render=function e(){var t=this.props;var a=t.theme;var r=t.hasStates;var o=t.hasSkippedActions;return i.default.createElement("div",{style:n({},k,{borderColor:a.base02})},i.default.createElement(p.default,{theme:a,onClick:this.handleReset,enabled:true},"Reset"),i.default.createElement(p.default,{theme:a,onClick:this.handleRollback,enabled:r},"Revert"),i.default.createElement(p.default,{theme:a,onClick:this.handleSweep,enabled:o},"Sweep"),i.default.createElement(p.default,{theme:a,onClick:this.handleCommit,enabled:r},"Commit"))};return t}(r.Component);O.propTypes={dispatch:s.default.func,theme:s.default.object};t.default=O},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var r=a(1);var i=u(r);var o=a(1893);var s=u(o);var l=a(843);var c=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m={base:{cursor:"pointer",fontWeight:"bold",borderRadius:3,padding:4,marginLeft:3,marginRight:3,marginTop:5,marginBottom:5,flexGrow:1,display:"inline-block",fontSize:"0.8em",color:"white",textDecoration:"none"}};var h=function(e){f(t,e);function t(a){d(this,t);var n=p(this,e.call(this,a));n.shouldComponentUpdate=c.default;n.handleMouseEnter=n.handleMouseEnter.bind(n);n.handleMouseLeave=n.handleMouseLeave.bind(n);n.handleMouseDown=n.handleMouseDown.bind(n);n.handleMouseUp=n.handleMouseUp.bind(n);n.onClick=n.onClick.bind(n);n.state={hovered:false,active:false};return n}t.prototype.handleMouseEnter=function e(){this.setState({hovered:true})};t.prototype.handleMouseLeave=function e(){this.setState({hovered:false})};t.prototype.handleMouseDown=function e(){this.setState({active:true})};t.prototype.handleMouseUp=function e(){this.setState({active:false})};t.prototype.onClick=function e(){if(!this.props.enabled)return;this.props.onClick&&this.props.onClick()};t.prototype.render=function e(){var t=n({},m.base,{backgroundColor:this.props.theme.base02});this.props.enabled&&this.state.hovered&&(t=n({},t,{backgroundColor:(0,s.default)(this.props.theme.base02,.2)}));this.props.enabled||(t=n({},t,{opacity:.2,cursor:"text",backgroundColor:"transparent"}));return i.default.createElement("a",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.onClick,style:t},this.props.children)};return t}(i.default.Component);t.default=h},function(e,t,a){"use strict";t.__esModule=true;t.default=function(e,t){var a=String(e).replace(/[^0-9a-f]/gi,"");a.length<6&&(a=a.replace(/(.)/g,"$1$1"));var n=t||0;var r="#";var i=void 0;for(var o=0;o<3;++o){i=parseInt(a.substr(2*o,2),16);i=Math.round(Math.min(Math.max(0,i+i*n),255)).toString(16);r+=("00"+i).substr(i.length)}return r}},function(e,t,a){"use strict";t.__esModule=true;var n=a(1);var r=d(n);var i=a(915);var o=d(i);var s=a(1895);var l=d(s);var c=a(843);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){m(t,e);function t(){var a,n,r;p(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=(a=(n=f(this,e.call.apply(e,[this].concat(o))),n),n.shouldComponentUpdate=u.default,a),f(n,r)}t.prototype.render=function e(){var t=[];var a=this.props;var n=a.theme;var i=a.actionsById;var o=a.computedStates;var s=a.currentStateIndex;var c=a.consecutiveToggleStartId;var u=a.select;var d=a.skippedActionIds;var p=a.stagedActionIds;var f=a.expandActionRoot;var m=a.expandStateRoot;var h=a.markStateDiff;var v=a.onActionClick;var g=a.onActionShiftClick;for(var b=0;b<p.length;b++){var _=p[b];var y=i[_].action;var k=o[b];var O=k.state;var w=k.error;var E=void 0;b>0&&(E=o[b-1].state);t.push(r.default.createElement(l.default,{key:_,theme:n,select:u,action:y,actionId:_,state:O,previousState:E,collapsed:d.indexOf(_)>-1,inFuture:b>s,selected:c===b,error:w,expandActionRoot:f,expandStateRoot:m,markStateDiff:h,onActionClick:v,onActionShiftClick:g}))}return r.default.createElement("div",null,t)};return t}(n.Component);h.propTypes={actionsById:o.default.object,computedStates:o.default.array,stagedActionIds:o.default.array,skippedActionIds:o.default.array,currentStateIndex:o.default.number,consecutiveToggleStartId:o.default.number,select:o.default.func.isRequired,onActionClick:o.default.func.isRequired,theme:o.default.oneOfType([o.default.object,o.default.string]),expandActionRoot:o.default.bool,expandStateRoot:o.default.bool};t.default=h},function(e,t,a){"use strict";t.__esModule=true;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var i=a(1);var o=h(i);var s=a(915);var l=h(s);var c=a(1345);var u=h(c);var d=a(1922);var p=h(d);var f=a(843);var m=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _={entry:{display:"block",WebkitUserSelect:"none"},root:{marginLeft:0}};var y=function e(t,a){return a.reduce(function(e,t){return e&&e[t]},t)};var k=function e(t,a,n){var r=[].concat(n).reverse().slice(1);return y(t,r)===y(a,r)};var O=function(e){b(t,e);function t(a){v(this,t);var n=g(this,e.call(this,a));n.shouldComponentUpdate=m.default;n.handleActionClick=n.handleActionClick.bind(n);n.shouldExpandNode=n.shouldExpandNode.bind(n);return n}t.prototype.printState=function e(t,a){var i=this;var s=a;if(!s)try{var l=function(){var e=i.props.select(t);var a=void 0;i.props.markStateDiff?function(){var t="undefined"!==typeof i.props.previousState?i.props.select(i.props.previousState):void 0;var n=function a(n,o,s){var l=n.style;return{style:r({},l,{backgroundColor:k(e,t,s)?"transparent":i.props.theme.base01})}};var o=function e(t,a){var n=t.style;return{style:r({},n,a.length>1?{}:_.root)}};a={extend:i.props.theme,tree:_.tree,value:n,nestedNode:o}}():a=i.props.theme;return{v:o.default.createElement(u.default,{theme:a,data:e,invertTheme:false,keyPath:["state"],shouldExpandNode:i.shouldExpandNode})}}();if("object"===("undefined"===typeof l?"undefined":n(l)))return l.v}catch(e){s="Error selecting state."}return o.default.createElement("div",{style:{color:this.props.theme.base08,paddingTop:20,paddingLeft:30,paddingRight:30,paddingBottom:35}},s)};t.prototype.handleActionClick=function e(t){var a=this.props;var n=a.actionId;var r=a.onActionClick;var i=a.onActionShiftClick;n>0&&(t.shiftKey?i(n):r(n))};t.prototype.shouldExpandNode=function e(t,a,n){return this.props.expandStateRoot&&0===n};t.prototype.render=function e(){var t=this.props;var a=t.actionId;var n=t.error;var i=t.action;var s=t.state;var l=t.collapsed;var c=t.selected;var u=t.inFuture;var d={opacity:l?.5:1,cursor:a>0?"pointer":"default"};return o.default.createElement("div",{style:{opacity:c?.4:u?.6:1,textDecoration:l?"line-through":"none",color:this.props.theme.base06}},o.default.createElement(p.default,{theme:this.props.theme,collapsed:l,action:i,expandActionRoot:this.props.expandActionRoot,onClick:this.handleActionClick,style:r({},_.entry,d)}),!l&&o.default.createElement("div",{style:{paddingLeft:16}},this.printState(s,n)))};return t}(i.Component);O.propTypes={state:l.default.object.isRequired,action:l.default.object.isRequired,actionId:l.default.number.isRequired,select:l.default.func.isRequired,inFuture:l.default.bool,error:l.default.string,onActionClick:l.default.func.isRequired,onActionShiftClick:l.default.func.isRequired,collapsed:l.default.bool,selected:l.default.bool,expandActionRoot:l.default.bool,expandStateRoot:l.default.bool};t.default=O},function(e,t,a){"use strict";var n=a(343);var r=a(342);var i=a(1897);e.exports=function(){function e(e,t,a,n,o,s){if(s===i)return;r(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=n;a.PropTypes=a;return a}},function(e,t,a){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,a){"use strict";t.__esModule=true;var n=a(275);var r=i(n);t["default"]=o;function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&"function"===typeof e[r["default"]])return"Iterable";return t}},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=h(n);var i=a(32);var o=h(i);var s=a(1347);var l=h(s);var c=a(1);var u=h(c);var d=a(690);var p=h(d);var f=a(1046);var m=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){var t=(0,l["default"])(e).length;return t+" "+(1!==t?"keys":"key")}var g=function e(t){var a=t.data,n=(0,o["default"])(t,["data"]);return u["default"].createElement(m["default"],(0,r["default"])({},n,{data:a,nodeType:"Object",nodeTypeIndicator:"Error"===n.nodeType?"Error()":"{}",createItemString:v,expandable:(0,l["default"])(a).length>0}))};g.propTypes={data:p["default"].object,nodeType:p["default"].string};t["default"]=g},function(e,t,a){a(1901);var n=a(52).Object;e.exports=function e(t){return n.getOwnPropertyNames(t)}},function(e,t,a){a(770)("getOwnPropertyNames",function(){return a(277).f})},function(e,t,a){"use strict";t.__esModule=true;var n=a(296);var r=c(n);var i=a(1347);var o=c(i);var s=a(727);var l=c(s);t["default"]=m;function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("Object"===e)return(0,l["default"])(t).length;if("Array"===e)return t.length;return Infinity}function d(e){return"function"===typeof e.set}function p(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Infinity;var s=void 0;if("Object"===e){var l=(0,o["default"])(t);"undefined"!==typeof a&&l.sort(a);l=l.slice(n,i+1);s={entries:l.map(function(e){return{key:e,value:t[e]}})}}else if("Array"===e)s={entries:t.slice(n,i+1).map(function(e,t){return{key:t+n,value:e}})};else{var c=0;var u=[];var p=true;var f=d(t);for(var m=t,h=Array.isArray(m),v=0,m=h?m:(0,r["default"])(m);;){var g;if(h){if(v>=m.length)break;g=m[v++]}else{v=m.next();if(v.done)break;g=v.value}var b=g;if(c>i){p=false;break}n<=c&&(f&&Array.isArray(b)?"string"===typeof b[0]||"number"===typeof b[0]?u.push({key:b[0],value:b[1]}):u.push({key:"[entry "+c+"]",value:{"[key]":b[0],"[value]":b[1]}}):u.push({key:c,value:b}));c++}s={hasMore:!p,entries:u}}return s}function f(e,t,a){var n=[];while(t-e>a*a)a*=a;for(var r=e;r<=t;r+=a)n.push({from:r,to:Math.min(t,r+a-1)});return n}function m(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Infinity;var o=p.bind(null,e,t,a);if(!n)return o().entries;var s=i<Infinity;var l=Math.min(i-r,u(e,t));if("Iterable"!==e){if(l<=n||n<7)return o(r,i).entries}else if(l<=n&&!s)return o(r,i).entries;var c=void 0;if("Iterable"===e){var d=o(r,r+n-1),m=d.hasMore,h=d.entries;c=m?[].concat(h,f(r+n,r+2*n-1,n)):h}else c=s?f(r,i,n):[].concat(o(0,n-5).entries,f(n-4,l-5,n),o(l-4,l-1).entries);return c}},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=g(n);var i=a(5);var o=g(i);var s=a(7);var l=g(s);var c=a(8);var u=g(c);var d=a(1);var p=g(d);var f=a(690);var m=g(f);var h=a(1348);var v=g(h);function g(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,u["default"])(t,e);function t(a){(0,o["default"])(this,t);var n=(0,l["default"])(this,e.call(this,a));n.state={expanded:false};n.handleClick=n.handleClick.bind(n);return n}t.prototype.render=function e(){var t=this.props,a=t.styling,n=t.from,i=t.to,o=t.renderChildNodes,s=t.nodeType;return this.state.expanded?p["default"].createElement("div",a("itemRange",this.state.expanded),o(this.props,n,i)):p["default"].createElement("div",(0,r["default"])({},a("itemRange",this.state.expanded),{onClick:this.handleClick}),p["default"].createElement(v["default"],{nodeType:s,styling:a,expanded:false,onClick:this.handleClick,arrowStyle:"double"}),n+" ... "+i)};t.prototype.handleClick=function e(){this.setState({expanded:!this.state.expanded})};return t}(p["default"].Component);b.propTypes={styling:m["default"].func.isRequired,from:m["default"].number.isRequired,to:m["default"].number.isRequired,renderChildNodes:m["default"].func.isRequired,nodeType:m["default"].string.isRequired};t["default"]=b},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=f(n);var i=a(32);var o=f(i);var s=a(1);var l=f(s);var c=a(690);var u=f(c);var d=a(1046);var p=f(d);function f(e){return e&&e.__esModule?e:{default:e}}function m(e){return e.length+" "+(1!==e.length?"items":"item")}var h=function e(t){var a=t.data,n=(0,o["default"])(t,["data"]);return l["default"].createElement(p["default"],(0,r["default"])({},n,{data:a,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:m,expandable:a.length>0}))};h.propTypes={data:u["default"].array};t["default"]=h},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=h(n);var i=a(32);var o=h(i);var s=a(296);var l=h(s);var c=a(1906);var u=h(c);t["default"]=g;var d=a(1);var p=h(d);var f=a(1046);var m=h(f);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var a=0;var n=false;if((0,u["default"])(e.size))a=e.size;else for(var r=e,i=Array.isArray(r),o=0,r=i?r:(0,l["default"])(r);;){var s;if(i){if(o>=r.length)break;s=r[o++]}else{o=r.next();if(o.done)break;s=o.value}var c=s;if(t&&a+1>t){n=true;break}a+=1}return(n?">":"")+a+" "+(1!==a?"entries":"entry")}function g(e){var t=(0,o["default"])(e,[]);return p["default"].createElement(m["default"],(0,r["default"])({},t,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:v}))}},function(e,t,a){e.exports={default:a(1907),__esModule:true}},function(e,t,a){a(1908);e.exports=a(52).Number.isSafeInteger},function(e,t,a){var n=a(86);var r=a(1909);var i=Math.abs;n(n.S,"Number",{isSafeInteger:function e(t){return r(t)&&i(t)<=9007199254740991}})},function(e,t,a){var n=a(68);var r=Math.floor;e.exports=function e(t){return!n(t)&&isFinite(t)&&r(t)===t}},function(e,t,a){"use strict";t.__esModule=true;var n=a(1);var r=s(n);var i=a(690);var o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var a=t.nodeType,n=t.styling,i=t.labelRenderer,o=t.keyPath,s=t.valueRenderer,l=t.value,c=t.valueGetter;return r["default"].createElement("li",n("value",a,o),r["default"].createElement("label",n(["label","valueLabel"],a,o),i(o,a,false,false)),r["default"].createElement("span",n("valueText",a,o),s.apply(void 0,[c(l),l].concat(o))))};l.propTypes={nodeType:o["default"].string.isRequired,styling:o["default"].func.isRequired,labelRenderer:o["default"].func.isRequired,keyPath:o["default"].arrayOf(o["default"].oneOfType([o["default"].string,o["default"].number])).isRequired,valueRenderer:o["default"].func.isRequired,value:o["default"].any,valueGetter:o["default"].func};l.defaultProps={valueGetter:function e(t){return t}};t["default"]=l},function(e,t,a){"use strict";t.__esModule=true;var n=a(3);var r=l(n);var i=a(1349);var o=a(1921);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){return{BACKGROUND_COLOR:t.base00,TEXT_COLOR:t.base07,STRING_COLOR:t.base0B,DATE_COLOR:t.base0B,NUMBER_COLOR:t.base09,BOOLEAN_COLOR:t.base09,NULL_COLOR:t.base08,UNDEFINED_COLOR:t.base08,FUNCTION_COLOR:t.base08,SYMBOL_COLOR:t.base08,LABEL_COLOR:t.base0D,ARROW_COLOR:t.base0D,ITEM_STRING_COLOR:t.base0B,ITEM_STRING_EXPANDED_COLOR:t.base03}};var u=function e(t){return{String:t.STRING_COLOR,Date:t.DATE_COLOR,Number:t.NUMBER_COLOR,Boolean:t.BOOLEAN_COLOR,Null:t.NULL_COLOR,Undefined:t.UNDEFINED_COLOR,Function:t.FUNCTION_COLOR,Symbol:t.SYMBOL_COLOR}};var d=function e(t){var a=c(t);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:a.BACKGROUND_COLOR},value:function e(t,a,n){var i=t.style;return{style:(0,r["default"])({},i,{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:n.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:a.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function e(t,n){var i=t.style;return{style:(0,r["default"])({},i,{color:u(a)[n]})}},itemRange:function e(t,n){return{style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:a.LABEL_COLOR}}},arrow:function e(t,a,n){var i=t.style;return{style:(0,r["default"])({},i,{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",transform:n?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function e(t,a){var n=t.style;return{style:(0,r["default"])({},n,{display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===a?"1em":0,cursor:"pointer"})}},arrowSign:{color:a.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function e(t,a,n,i,o){var s=t.style;return{style:(0,r["default"])({},s,{position:"relative",paddingTop:"0.25em",marginLeft:a.length>1?"0.875em":0,paddingLeft:o?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function e(t,a,n,i,o){var s=t.style;return{style:(0,r["default"])({},s,{margin:0,padding:0,WebkitUserSelect:o?"inherit":"text",MozUserSelect:o?"inherit":"text",cursor:o?"pointer":"default"})}},nestedNodeItemString:function e(t,n,i,o){var s=t.style;return{style:(0,r["default"])({},s,{paddingLeft:"0.5em",cursor:"default",color:o?a.ITEM_STRING_EXPANDED_COLOR:a.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function e(t,a,n){var i=t.style;return{style:(0,r["default"])({},i,{padding:0,margin:0,listStyle:"none",display:n?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}};t["default"]=(0,i.createStyling)(d,{defaultBase16:s["default"]})},function(e,t,a){(function(t){var a="Expected a function";var n="__lodash_placeholder__";var r=1,i=2,o=4,s=8,l=16,c=32,u=64,d=128,p=256,f=512;var m=1/0,h=9007199254740991,v=1.7976931348623157e308,g=NaN;var b=[["ary",d],["bind",r],["bindKey",i],["curry",s],["curryRight",l],["flip",f],["partial",c],["partialRight",u],["rearg",p]];var _="[object Function]",y="[object GeneratorFunction]",k="[object Symbol]";var O=/[\\^$.*+?()[\]{}|]/g;var w=/^\s+|\s+$/g;var E=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,C=/\{\n\/\* \[wrapped with (.+)\] \*/,j=/,? & /;var S=/^[-+]0x[0-9a-f]+$/i;var I=/^0b[01]+$/i;var T=/^\[object .+?Constructor\]$/;var N=/^0o[0-7]+$/i;var A=/^(?:0|[1-9]\d*)$/;var R=parseInt;var M="object"==typeof t&&t&&t.Object===Object&&t;var x="object"==typeof self&&self&&self.Object===Object&&self;var P=M||x||Function("return this")();function D(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function F(e,t){var a=-1,n=e?e.length:0;while(++a<n)if(false===t(e[a],a,e))break;return e}function L(e,t){var a=e?e.length:0;return!!a&&U(e,t,0)>-1}function B(e,t,a,n){var r=e.length,i=a+(n?1:-1);while(n?i--:++i<r)if(t(e[i],i,e))return i;return-1}function U(e,t,a){if(t!==t)return B(e,q,a);var n=a-1,r=e.length;while(++n<r)if(e[n]===t)return n;return-1}function q(e){return e!==e}function G(e,t){var a=e.length,n=0;while(a--)e[a]===t&&n++;return n}function H(e,t){return null==e?void 0:e[t]}function W(e){var t=false;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function V(e,t){var a=-1,r=e.length,i=0,o=[];while(++a<r){var s=e[a];if(s===t||s===n){e[a]=n;o[i++]=a}}return o}var z=Function.prototype,Q=Object.prototype;var K=P["__core-js_shared__"];var Y=function(){var e=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var J=z.toString;var Z=Q.hasOwnProperty;var X=Q.toString;var $=RegExp("^"+J.call(Z).replace(O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ee=Object.create;var te=Math.max,ae=Math.min;var ne=function(){var e=ge(Object,"defineProperty"),t=ge.name;return t&&t.length>2?e:void 0}();function re(e){return Ie(e)?ee(e):{}}function ie(e){if(!Ie(e)||ke(e))return false;var t=Se(e)||W(e)?$:T;return t.test(Ee(e))}function oe(e,t,a,n){var r=-1,i=e.length,o=a.length,s=-1,l=t.length,c=te(i-o,0),u=Array(l+c),d=!n;while(++s<l)u[s]=t[s];while(++r<o)(d||r<i)&&(u[a[r]]=e[r]);while(c--)u[s++]=e[r++];return u}function se(e,t,a,n){var r=-1,i=e.length,o=-1,s=a.length,l=-1,c=t.length,u=te(i-s,0),d=Array(u+c),p=!n;while(++r<u)d[r]=e[r];var f=r;while(++l<c)d[f+l]=t[l];while(++o<s)(p||r<i)&&(d[f+a[o]]=e[r++]);return d}function le(e,t){var a=-1,n=e.length;t||(t=Array(n));while(++a<n)t[a]=e[a];return t}function ce(e,t,a){var n=t&r,i=ue(e);function o(){var t=this&&this!==P&&this instanceof o?i:e;return t.apply(n?a:this,arguments)}return o}function ue(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=re(e.prototype),n=e.apply(a,t);return Ie(n)?n:a}}function de(e,t,a){var n=ue(e);function r(){var i=arguments.length,o=Array(i),s=i,l=ve(r);while(s--)o[s]=arguments[s];var c=i<3&&o[0]!==l&&o[i-1]!==l?[]:V(o,l);i-=c.length;if(i<a)return me(e,t,pe,r.placeholder,void 0,o,c,void 0,void 0,a-i);var u=this&&this!==P&&this instanceof r?n:e;return D(u,this,o)}return r}function pe(e,t,a,n,o,c,u,p,m,h){var v=t&d,g=t&r,b=t&i,_=t&(s|l),y=t&f,k=b?void 0:ue(e);function O(){var r=arguments.length,i=Array(r),s=r;while(s--)i[s]=arguments[s];if(_)var l=ve(O),d=G(i,l);n&&(i=oe(i,n,o,_));c&&(i=se(i,c,u,_));r-=d;if(_&&r<h){var f=V(i,l);return me(e,t,pe,O.placeholder,a,i,f,p,m,h-r)}var w=g?a:this,E=b?w[e]:e;r=i.length;p?i=Oe(i,p):y&&r>1&&i.reverse();v&&m<r&&(i.length=m);this&&this!==P&&this instanceof O&&(E=k||ue(E));return E.apply(w,i)}return O}function fe(e,t,a,n){var i=t&r,o=ue(e);function s(){var t=-1,r=arguments.length,l=-1,c=n.length,u=Array(c+r),d=this&&this!==P&&this instanceof s?o:e;while(++l<c)u[l]=n[l];while(r--)u[l++]=arguments[++t];return D(d,i?a:this,u)}return s}function me(e,t,a,n,l,d,p,f,m,h){var v=t&s,g=v?p:void 0,b=v?void 0:p,_=v?d:void 0,y=v?void 0:d;t|=v?c:u;t&=~(v?u:c);t&o||(t&=~(r|i));var k=a(e,t,l,_,g,y,b,f,m,h);k.placeholder=n;return we(k,e,t)}function he(e,t,n,o,d,p,f,m){var h=t&i;if(!h&&"function"!=typeof e)throw new TypeError(a);var v=o?o.length:0;if(!v){t&=~(c|u);o=d=void 0}f=void 0===f?f:te(Re(f),0);m=void 0===m?m:Re(m);v-=d?d.length:0;if(t&u){var g=o,b=d;o=d=void 0}var _=[e,t,n,o,d,g,b,p,f,m];e=_[0];t=_[1];n=_[2];o=_[3];d=_[4];m=_[9]=null==_[9]?h?0:e.length:te(_[9]-v,0);!m&&t&(s|l)&&(t&=~(s|l));if(t&&t!=r)y=t==s||t==l?de(e,t,m):t!=c&&t!=(r|c)||d.length?pe.apply(void 0,_):fe(e,t,n,o);else var y=ce(e,t,n);return we(y,e,t)}function ve(e){var t=e;return t.placeholder}function ge(e,t){var a=H(e,t);return ie(a)?a:void 0}function be(e){var t=e.match(C);return t?t[1].split(j):[]}function _e(e,t){var a=t.length,n=a-1;t[n]=(a>1?"& ":"")+t[n];t=t.join(a>2?", ":" ");return e.replace(E,"{\n/* [wrapped with "+t+"] */\n")}function ye(e,t){t=null==t?h:t;return!!t&&("number"==typeof e||A.test(e))&&e>-1&&e%1==0&&e<t}function ke(e){return!!Y&&Y in e}function Oe(e,t){var a=e.length,n=ae(t.length,a),r=le(e);while(n--){var i=t[n];e[n]=ye(i,a)?r[i]:void 0}return e}var we=ne?function(e,t,a){var n=t+"";return ne(e,"toString",{configurable:true,enumerable:false,value:xe(_e(n,Ce(be(n),a)))})}:Pe;function Ee(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ce(e,t){F(b,function(a){var n="_."+a[0];t&a[1]&&!L(e,n)&&e.push(n)});return e.sort()}function je(e,t,a){t=a?void 0:t;var n=he(e,s,void 0,void 0,void 0,void 0,void 0,t);n.placeholder=je.placeholder;return n}function Se(e){var t=Ie(e)?X.call(e):"";return t==_||t==y}function Ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Te(e){return!!e&&"object"==typeof e}function Ne(e){return"symbol"==typeof e||Te(e)&&X.call(e)==k}function Ae(e){if(!e)return 0===e?e:0;e=Me(e);if(e===m||e===-m){var t=e<0?-1:1;return t*v}return e===e?e:0}function Re(e){var t=Ae(e),a=t%1;return t===t?a?t-a:t:0}function Me(e){if("number"==typeof e)return e;if(Ne(e))return g;if(Ie(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ie(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(w,"");var a=I.test(e);return a||N.test(e)?R(e.slice(2),a?2:8):S.test(e)?g:+e}function xe(e){return function(){return e}}function Pe(e){return e}je.placeholder={};e.exports=je}).call(this,a(49))},function(e,t,a){var n=a(1047);function r(e){var t=Math.round(n(e,0,255));var a=t.toString(16);return 1==a.length?"0"+a:a}function i(e){var t=4===e.length?r(255*e[3]):"";return"#"+r(e[0])+r(e[1])+r(e[2])+t}e.exports=i},function(e,t,a){var n=a(1915);var r=a(1916);var i=a(1917);var o=a(1918);function s(e){var t=n(e);var a=o(t);4===t.length&&a.push(t[3]);return a}var l={"#":r,hsl:s,rgb:i};function c(e){for(var t in l)if(0===e.indexOf(t))return l[t](e)}c.rgb=i;c.hsl=n;c.hex=r;e.exports=c},function(e,t,a){var n=a(1350);var r=a(1047);function i(e,t){e=parseFloat(e);switch(t){case 0:return r(e,0,360);case 1:case 2:return r(e,0,100);case 3:return r(e,0,1)}}function o(e){return n(e).map(i)}e.exports=o},function(e,t){function a(e){var t="#";for(var a=1;a<e.length;a++){var n=e.charAt(a);t+=n+n}return t}function n(e){4!==e.length&&5!==e.length||(e=a(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}e.exports=n},function(e,t,a){var n=a(1350);var r=a(1047);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*r(parseInt(e,10),0,100)/100):r(parseInt(e,10),0,255):r(parseFloat(e),0,1)}function o(e){return n(e).map(i)}e.exports=o},function(e,t){function a(e){var t=e[0]/360,a=e[1]/100,n=e[2]/100,r,i,o,s,l;if(0==a){l=255*n;return[l,l,l]}i=n<.5?n*(1+a):n+a-n*a;r=2*n-i;s=[0,0,0];for(var c=0;c<3;c++){o=t+1/3*-(c-1);o<0&&o++;o>1&&o--;l=6*o<1?r+6*(i-r)*o:2*o<1?i:3*o<2?r+(i-r)*(2/3-o)*6:r;s[c]=255*l}return s}e.exports=a},function(e,t,a){(function(t){var a="Expected a function";var n=9007199254740991;var r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]";var s="object"==typeof t&&t&&t.Object===Object&&t;var l="object"==typeof self&&self&&self.Object===Object&&self;var c=s||l||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function d(e,t){var a=-1,n=t.length,r=e.length;while(++a<n)e[r+a]=t[a];return e}var p=Object.prototype;var f=p.hasOwnProperty;var m=p.toString;var h=c.Symbol,v=p.propertyIsEnumerable,g=h?h.isConcatSpreadable:void 0;var b=Math.max;function _(e,t,a,n,r){var i=-1,o=e.length;a||(a=O);r||(r=[]);while(++i<o){var s=e[i];t>0&&a(s)?t>1?_(s,t-1,a,n,r):d(r,s):n||(r[r.length]=s)}return r}function y(e,t){t=b(void 0===t?e.length-1:t,0);return function(){var a=arguments,n=-1,r=b(a.length-t,0),i=Array(r);while(++n<r)i[n]=a[t+n];n=-1;var o=Array(t+1);while(++n<t)o[n]=a[n];o[t]=i;return u(e,this,o)}}function k(e){return y(function(t){t=_(t,1);var n=t.length,r=n;e&&t.reverse();while(r--)if("function"!=typeof t[r])throw new TypeError(a);return function(){var e=0,a=n?t[e].apply(this,arguments):arguments[0];while(++e<n)a=t[e].call(this,a);return a}})}function O(e){return E(e)||w(e)||!!(g&&e&&e[g])}function w(e){return j(e)&&f.call(e,"callee")&&(!v.call(e,"callee")||m.call(e)==r)}var E=Array.isArray;function C(e){return null!=e&&I(e.length)&&!S(e)}function j(e){return N(e)&&C(e)}function S(e){var t=T(e)?m.call(e):"";return t==i||t==o}function I(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function N(e){return!!e&&"object"==typeof e}var A=k();e.exports=A}).call(this,a(49))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.yuv2rgb=n;t.rgb2yuv=r;function n(e){var t=e[0],a=e[1],n=e[2],r,i,o;r=1*t+0*a+1.13983*n;i=1*t+-.39465*a+-.5806*n;o=1*t+2.02311*a+0*n;r=Math.min(Math.max(0,r),1);i=Math.min(Math.max(0,i),1);o=Math.min(Math.max(0,o),1);return[255*r,255*i,255*o]}function r(e){var t=e[0]/255,a=e[1]/255,n=e[2]/255;var r=.299*t+.587*a+.114*n;var i=-.14713*t+-.28886*a+.436*n;var o=.615*t+-.51499*a+-.10001*n;return[r,i,o]}},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}},function(e,t,a){"use strict";t.__esModule=true;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var r=a(1);var i=l(r);var o=a(1345);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var a={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;a[n]=e[n]}return a}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f={actionBar:{paddingTop:8,paddingBottom:7,paddingLeft:16},payload:{margin:0,paddingLeft:16,overflow:"auto"}};var m=function(e){p(t,e);function t(a){u(this,t);var n=d(this,e.call(this,a));n.shouldExpandNode=n.shouldExpandNode.bind(n);return n}t.prototype.renderPayload=function e(t){return i.default.createElement("div",{style:n({},f.payload,{backgroundColor:this.props.theme.base00})},Object.keys(t).length>0?i.default.createElement(s.default,{theme:this.props.theme,invertTheme:false,keyPath:["action"],data:t,shouldExpandNode:this.shouldExpandNode}):"")};t.prototype.shouldExpandNode=function e(t,a,n){return this.props.expandActionRoot&&0===n};t.prototype.render=function e(){var t=this.props.action;var a=t.type;var r=c(t,["type"]);return i.default.createElement("div",{style:n({backgroundColor:this.props.theme.base02,color:this.props.theme.base06},this.props.style)},i.default.createElement("div",{style:f.actionBar,onClick:this.props.onClick},null!==a&&a.toString()),this.props.collapsed?"":this.renderPayload(r))};return t}(r.Component);t.default=m},function(e,t,a){(function(t){var a="Expected a function";var n=NaN;var r="[object Symbol]";var i=/^\s+|\s+$/g;var o=/^[-+]0x[0-9a-f]+$/i;var s=/^0b[01]+$/i;var l=/^0o[0-7]+$/i;var c=parseInt;var u="object"==typeof t&&t&&t.Object===Object&&t;var d="object"==typeof self&&self&&self.Object===Object&&self;var p=u||d||Function("return this")();var f=Object.prototype;var m=f.toString;var h=Math.max,v=Math.min;var g=function(){return p.Date.now()};function b(e,t,n){var r,i,o,s,l,c,u=0,d=false,p=false,f=true;if("function"!=typeof e)throw new TypeError(a);t=O(t)||0;if(_(n)){d=!!n.leading;p="maxWait"in n;o=p?h(O(n.maxWait)||0,t):o;f="trailing"in n?!!n.trailing:f}function m(t){var a=r,n=i;r=i=void 0;u=t;s=e.apply(n,a);return s}function b(e){u=e;l=setTimeout(w,t);return d?m(e):s}function y(e){var a=e-c,n=e-u,r=t-a;return p?v(r,o-n):r}function k(e){var a=e-c,n=e-u;return void 0===c||a>=t||a<0||p&&n>=o}function w(){var e=g();if(k(e))return E(e);l=setTimeout(w,y(e))}function E(e){l=void 0;if(f&&r)return m(e);r=i=void 0;return s}function C(){void 0!==l&&clearTimeout(l);u=0;r=c=i=l=void 0}function j(){return void 0===l?s:E(g())}function S(){var e=g(),a=k(e);r=arguments;i=this;c=e;if(a){if(void 0===l)return b(c);if(p){l=setTimeout(w,t);return m(c)}}void 0===l&&(l=setTimeout(w,t));return s}S.cancel=C;S.flush=j;return S}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function k(e){return"symbol"==typeof e||y(e)&&m.call(e)==r}function O(e){if("number"==typeof e)return e;if(k(e))return n;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var a=s.test(e);return a||l.test(e)?c(e.slice(2),a?2:8):o.test(e)?n:+e}e.exports=b}).call(this,a(49))},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},function(e,t,a){var r,i;(function(){var a=false;var o=this;var s=function(e){if(e instanceof s)return e;if(!(this instanceof s))return new s(e);this.EXIFwrapped=e};true;"undefined"!==typeof e&&e.exports&&(t=e.exports=s);t.EXIF=s;var l=s.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var c=s.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var u=s.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var d=s.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"};var p=s.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function f(e,t,a){e.addEventListener?e.addEventListener(t,a,false):e.attachEvent&&e.attachEvent("on"+t,a)}function m(e){return!!e.exifdata}function h(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"";e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");var a=atob(e);var n=a.length;var r=new ArrayBuffer(n);var i=new Uint8Array(r);for(var o=0;o<n;o++)i[o]=a.charCodeAt(o);return r}function v(e,t){var a=new XMLHttpRequest;a.open("GET",e,true);a.responseType="blob";a.onload=function(e){200!=this.status&&0!==this.status||t(this.response)};a.send()}function g(e,t){function n(a){var n=b(a);e.exifdata=n||{};var r=_(a);e.iptcdata=r||{};if(s.isXmpEnabled){var i=I(a);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var r=h(e.src);n(r)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){n(e.target.result)};v(e.src,function(e){i.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response);o=null};o.open("GET",e.src,true);o.responseType="arraybuffer";o.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){a&&console.log("Got file of length "+e.target.result.byteLength);n(e.target.result)};i.readAsArrayBuffer(e)}}function b(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var n=2,r=e.byteLength,i;while(n<r){if(255!=t.getUint8(n)){a&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n));return false}i=t.getUint8(n+1);a&&console.log(i);if(225==i){a&&console.log("Found 0xFFE1 marker");return S(t,n+4,t.getUint16(n+2)-2)}n+=2+t.getUint16(n+2)}}function _(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var n=2,r=e.byteLength;var i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(n<r){if(i(t,n)){var o=t.getUint8(n+7);o%2!==0&&(o+=1);0===o&&(o=4);var s=n+8+o;var l=t.getUint16(n+6+o);return k(e,s,l)}n++}}var y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function k(e,t,a){var n=new DataView(e);var r={};var i,o,s,l,c;var u=t;while(u<t+a){if(28===n.getUint8(u)&&2===n.getUint8(u+1)){l=n.getUint8(u+2);if(l in y){s=n.getInt16(u+3);c=s+5;o=y[l];i=j(n,u+5,s);r.hasOwnProperty(o)?r[o]instanceof Array?r[o].push(i):r[o]=[r[o],i]:r[o]=i}}u++}return r}function O(e,t,n,r,i){var o=e.getUint16(n,!i),s={},l,c,u;for(u=0;u<o;u++){l=n+12*u+2;c=r[e.getUint16(l,!i)];!c&&a&&console.log("Unknown tag: "+e.getUint16(l,!i));s[c]=w(e,l,t,n,i)}return s}function w(e,t,a,n,r){var i=e.getUint16(t+2,!r),o=e.getUint32(t+4,!r),s=e.getUint32(t+8,!r)+a,l,c,u,d,p,f;switch(i){case 1:case 7:if(1==o)return e.getUint8(t+8,!r);l=o>4?s:t+8;c=[];for(d=0;d<o;d++)c[d]=e.getUint8(l+d);return c;case 2:l=o>4?s:t+8;return j(e,l,o-1);case 3:if(1==o)return e.getUint16(t+8,!r);l=o>2?s:t+8;c=[];for(d=0;d<o;d++)c[d]=e.getUint16(l+2*d,!r);return c;case 4:if(1==o)return e.getUint32(t+8,!r);c=[];for(d=0;d<o;d++)c[d]=e.getUint32(s+4*d,!r);return c;case 5:if(1==o){p=e.getUint32(s,!r);f=e.getUint32(s+4,!r);u=new Number(p/f);u.numerator=p;u.denominator=f;return u}c=[];for(d=0;d<o;d++){p=e.getUint32(s+8*d,!r);f=e.getUint32(s+4+8*d,!r);c[d]=new Number(p/f);c[d].numerator=p;c[d].denominator=f}return c;case 9:if(1==o)return e.getInt32(t+8,!r);c=[];for(d=0;d<o;d++)c[d]=e.getInt32(s+4*d,!r);return c;case 10:if(1==o)return e.getInt32(s,!r)/e.getInt32(s+4,!r);c=[];for(d=0;d<o;d++)c[d]=e.getInt32(s+8*d,!r)/e.getInt32(s+4+8*d,!r);return c}}function E(e,t,a){var n=e.getUint16(t,!a);return e.getUint32(t+2+12*n,!a)}function C(e,t,a,n){var r=E(e,t+a,n);if(!r)return{};if(r>e.byteLength)return{};var i=O(e,t,t+r,d,n);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var o=t+i.JpegIFOffset;var s=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,o,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function j(e,t,a){var r="";for(n=t;n<t+a;n++)r+=String.fromCharCode(e.getUint8(n));return r}function S(e,t){if("Exif"!=j(e,t,4)){a&&console.log("Not valid EXIF data! "+j(e,t,4));return false}var n,r,i,o,s,d=t+6;if(18761==e.getUint16(d))n=false;else{if(19789!=e.getUint16(d)){a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}n=true}if(42!=e.getUint16(d+2,!n)){a&&console.log("Not valid TIFF data! (no 0x002A)");return false}var f=e.getUint32(d+4,!n);if(f<8){a&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!n));return false}r=O(e,d,d+f,c,n);if(r.ExifIFDPointer){o=O(e,d,d+r.ExifIFDPointer,l,n);for(i in o){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=p[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=p.Components[o[i][0]]+p.Components[o[i][1]]+p.Components[o[i][2]]+p.Components[o[i][3]];break}r[i]=o[i]}}if(r.GPSInfoIFDPointer){s=O(e,d,d+r.GPSInfoIFDPointer,u,n);for(i in s){switch(i){case"GPSVersionID":s[i]=s[i][0]+"."+s[i][1]+"."+s[i][2]+"."+s[i][3];break}r[i]=s[i]}}r["thumbnail"]=C(e,d,f,n);return r}function I(e){if(!("DOMParser"in self))return;var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var n=2,r=e.byteLength,i=new DOMParser;while(n<r-4){if("http"==j(t,n,4)){var o=n-1;var s=t.getUint16(n-2)-1;var l=j(t,o,s);var c=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),c);var u=l.indexOf("x:xmpmeta")+10;l=l.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(u);var d=i.parseFromString(l,"text/xml");return N(d)}n++}}function T(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var n=e.attributes.item(a);t["@attributes"][n.nodeName]=n.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes.item(r);var o=i.nodeName;if(null==t[o])t[o]=T(i);else{if(null==t[o].push){var s=t[o];t[o]=[];t[o].push(s)}t[o].push(T(i))}}return t}function N(e){try{var t={};if(e.children.length>0)for(var a=0;a<e.children.length;a++){var n=e.children.item(a);var r=n.attributes;for(var i in r){var o=r[i];var s=o.nodeName;var l=o.nodeValue;void 0!==s&&(t[s]=l)}var c=n.nodeName;if("undefined"==typeof t[c])t[c]=T(n);else{if("undefined"==typeof t[c].push){var u=t[c];t[c]=[];t[c].push(u)}t[c].push(T(n))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}s.enableXmp=function(){s.isXmpEnabled=true};s.disableXmp=function(){s.isXmpEnabled=false};s.getData=function(e,t){if((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)return false;m(e)?t&&t.call(e):g(e,t);return true};s.getTag=function(e,t){if(!m(e))return;return e.exifdata[t]};s.getIptcTag=function(e,t){if(!m(e))return;return e.iptcdata[t]};s.getAllTags=function(e){if(!m(e))return{};var t,a=e.exifdata,n={};for(t in a)a.hasOwnProperty(t)&&(n[t]=a[t]);return n};s.getAllIptcTags=function(e){if(!m(e))return{};var t,a=e.iptcdata,n={};for(t in a)a.hasOwnProperty(t)&&(n[t]=a[t]);return n};s.pretty=function(e){if(!m(e))return"";var t,a=e.exifdata,n="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?n+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":n+=t+" : ["+a[t].length+" values]\r\n":n+=t+" : "+a[t]+"\r\n");return n};s.readFromBinaryFile=function(e){return b(e)};true;!(r=[],i=function(){return s}.apply(t,r),void 0!==i&&(e.exports=i))}).call(this)},function(e,t,a){},,function(e,t,a){},,function(e,t){},,function(e,t,a){"use strict";var n=a(2);var r=a(0);var i=a.n(r);var o=a(4);var s=a(11);var l=a(3437);var c=a(480);var u=a(17);var d=a(1127);var p=a(189);var f=a(1007);var m=a(3);var h=a.n(m);var v=a(32);var g=a.n(v);var b=a(23);var _=a(19);var y=a(709);var k=a(122);var O=a(12);var w=a(312);var E=a(44);var C=a(26);var j=a(21);var S=a(62);var I=a(36);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.channel,n=e.userIsAway,r=e.userPresenceLastChanged,i=e.currentUserId,o=e.highlightWords,l=e.messages,c=void 0===l?[]:l;var u=0;var d=0;c.forEach(function(e){if(!e)return;if(Object(I["isMessageUnread"])(e,Object(O["getLastReadTs"])(a),i)){u+=1;Object(I["shouldMessageBadgeChannel"])({state:t,msg:e,channel:a,currentUserId:i,userIsAway:n,userPresenceLastChanged:r,highlightWords:o,isAppMsg:Object(I["isAppMessage"])(t,e),featureWtaNotifications:Object(s["isFeatureEnabled"])(t,"feature_wta_notifications"),teamId:Object(b["getTeamId"])(t)})&&(d+=1)}});return{unreadCnt:u,unreadHighlightCnt:d}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.start,n=e.reachedStart,r=e.reachedEnd,i=e.initialCounts,o=e.messages,s=e.channel,l=e.currentUser,c=e.userIsAway,u=e.userPresenceLastChanged,d=e.highlightWords;var p=0;var f=0;var m=true;if(r){var h=T({state:t,channel:s,messages:o,userIsAway:c,userPresenceLastChanged:u,currentUserId:l.id,highlightWords:d});p=h.unreadCnt;f=h.unreadHighlightCnt;if(a<=Object(O["getLastReadTs"])(s))m=false;else{i&&p<i.unreadCnt&&(p=i.unreadCnt);i&&f<i.unreadHighlightCnt&&(f=i.unreadHighlightCnt);m=o.length<42&&!n}}else if(i){p=i.unreadCnt;f=i.unreadHighlightCnt}return{unreadCnt:p,unreadHighlightCnt:f,needFetch:m}}function A(e){if(!e)return false;if(!e.was_archived_this_session){if(Object(O["isArchived"])(e))return false;if(Object(O["isPublicChannel"])(e)&&!Object(O["isMemberOfChannel"])(e))return false}return true}var R="COUNTS";var M=Object(o["e"])("Update unread counts",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var i=t();Object(s["isFeatureEnabled"])(i,"feature_tinyspeck")&&Object(S["e"])("rmsgs_updateUnreadCounts");var o=false;var c=Object(_["getChannelById"])(i,r,o);if(!c)return true;if(!A(c))return true;var d=Object(k["getTimestampsByChannelId"])(i,r,null),p=d.timestamps,f=d.start,m=d.reachedStart,h=d.reachedEnd;var v=Object(l["getInitialUnreadCountsByChannelId"])(i,r);var g=Object(n["map"])(p||[],function(e){return Object(E["getMessageByTimestamp"])(i,c.id,e)});var b=Object(C["getCurrentMember"])(i);var y="away"===Object(w["getPresenceByMemberId"])(i,b.id);var I=b._presence_last_changed||Object(s["getFromBootData"])(i,"start_ms");var T=N({state:i,start:f,reachedStart:m,reachedEnd:h,initialCounts:v,messages:g,channel:c,currentUser:b,userIsAway:y,userPresenceLastChanged:I,highlightWords:Object(j["getUserHighlightWords"])(i)}),M=T.unreadCnt,x=T.unreadHighlightCnt,P=T.needFetch;if(M!==Object(O["getUnreadCount"])(c)){Object(u["a"])({state:i}).info(R,"Updated unread_cnt for "+c.id+": "+M);e(Object(_["updateOneKeyForChannel"])({id:c.id,unread_cnt:M}))}if(x!==c.unread_highlight_cnt){Object(u["a"])({state:i}).info(R,"Updated unread_highlight_cnt for "+c.id+": "+x);e(Object(_["updateOneKeyForChannel"])({id:c.id,unread_highlight_cnt:x}))}Object(s["isFeatureEnabled"])(i,"feature_tinyspeck")&&Object(S["g"])("rmsgs_updateUnreadCounts","rmsgs_updateUnreadCounts");return!P});M.propTypes={channelId:i.a.string.isRequired};var x=M;var P="COUNTS";var D=function e(t,a){if(Object(O["isUnknownOrNonExistent"])(a)){var n=t.has_unreads,r=t.mention_count_display,i=t.unread_count_display,o=t.dm_count,s=t.latest,l=t.user_id,c=g()(t,["has_unreads","mention_count_display","unread_count_display","dm_count","latest","user_id"]);var u=h()({},c);u.is_im&&(u.user=l);return u}var d={};var p=Object(O["getLastReadTs"])(t);void 0!==p&&Object(O["getLastReadTs"])(a)!==p&&(d.last_read=p);var f=Object(O["getPriority"])(t);void 0!==f&&Object(O["getPriority"])(a)!==f&&(d.priority=f);var m=Object(O["isStarred"])(t);void 0!==m&&Object(O["isStarred"])(a)!==m&&(d.is_starred=m);var v=Object(O["isOpen"])(t);(Object(O["isIm"])(t)||Object(O["isMpim"])(t))&&void 0!==v&&Object(O["isOpen"])(a)!==v&&(d.is_open=v);return d};var F=Object(o["e"])("Apply counts to channel objects and update stores",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.counts,i=void 0===r?[]:r;var o=[];var c=t();var d={};var p=[];var f=[];var m=Object(s["isFeatureEnabled"])(c,"feature_degraded_boot");i.forEach(function(e){var t=Object(_["getChannelById"])(c,e.id,m);if(!t||Object(O["isNonExistent"])(t)){Object(u["a"])({state:c}).error(P,{id:e.id,has_unreads:e.has_unreads||!!e.dm_count||!!e.unread_count_display,nonExistent:Object(O["isNonExistent"])(t)},"applyCountsToChannels_missing_channel");return}if(m&&Object(O["isUnknown"])(t)){Object(u["a"])({state:c}).warn(P,"Unknown channel "+t.id+" in applyCountsToChannels");f.push(t.id)}if(Object(O["isArchived"])(t))return;if(Object(O["isPublicChannel"])(t)&&!Object(O["isMemberOfChannel"])(t))return;var a=m?D(e,t):{};var r=e.latest;r&&r!==t.latest&&(a.latest=r);var i=Object(k["getTimestampsByChannelId"])(c,t.id),s=i.reachedEnd;var l=e.has_unreads;var h=l?1:0;var v=0;var g=0;var b=false;if(Object(O["isIm"])(t)||Object(O["isIm"])(e))v=e.dm_count||h;else if(Object(O["isMpim"])(t)||Object(O["isMpim"])(e))v=e.unread_count_display||h;else{b=true;v=h;g=e.mention_count_display||0}if(!v&&g){Object(u["a"])({state:c}).warn(P,"Ignoring positive mention_count_display because has_unreads == false for "+t.id);g=0}d[t.id]={unreadCnt:v,unreadHighlightCnt:g};if(s)p.push(t.id);else{v!==Object(O["getUnreadCount"])(t)&&(a.unread_cnt=v);b&&g!==t.unread_highlight_cnt&&(a.unread_highlight_cnt=g)}if(!Object(n["isEmpty"])(a)){a.id=t.id;o.push(a)}});Object(n["isEmpty"])(o)||e(Object(_["bulkUpdateChannels"])({channels:o}));e(Object(l["setInitialUnreadCounts"])(d));p.forEach(function(t){e(x({channelId:t}))});m&&f.length&&Object(y["c"])(Object(b["getTeamId"])(c),f)});F.propTypes={counts:i.a.array.isRequired};var L={makeBasePayload:D};var B=F;var U="COUNTS";var q=Object(o["e"])("Apply counts to channels and threads",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channels,i=a.groups,o=a.ims,m=a.mpims,h=a.threads;var v=t();if(!Object(s["useReactMessages"])(v)||!Object(s["isClientApp"])(v))return;e(Object(l["setInitialUnreadCounts"])({}));var g=Object(n["compact"])(Object(n["concat"])(r,i,o,m));e(B({counts:g}));if(h){Object(d["c"])(h.has_unreads,h.mention_count,h.mention_count_by_channel);if(Object(s["isFeatureEnabled"])(v,"feature_react_threads")){Object(u["a"])({state:v}).info(U,"Threads has_unreads:"+h.has_unreads+" mention_count:"+h.mention_count);e(Object(c["updateUnreadThreads"])({hasUnreads:h.has_unreads,mentionCountByChannel:Object(n["isArray"])(h.mention_count_by_channel)?{}:h.mention_count_by_channel}))}}if(!Object(s["isFeatureEnabled"])(v,"feature_incremental_unread_counts")){Object(p["c"])();Object(f["a"])()}Object(u["a"])({state:v}).info(U,"Completed counts processing")});q.propTypes={channels:i.a.array,groups:i.a.array,ims:i.a.array,mpims:i.a.array,threads:i.a.object};var G=q;a.d(t,"a",function(){return G});a.d(t,false,function(){return B});a.d(t,"b",function(){return x})},function(e,t){},function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,function(e,t,a){var n={"./actions.js":3499,"./activity-session.js":3497,"./add-app-to-channel.js":3408,"./add-ephemeral-feedback.js":2093,"./api-unauthed.js":3470,"./api.js":3312,"./apps.js":2094,"./automount.js":2095,"./bots.js":2096,"./calls.js":3485,"./channels.js":2097,"./connectivity.js":3308,"./console.js":2098,"./constants.js":2099,"./enterprise.js":2100,"./enterprise/mount-create-workspace-modal.jsx":3296,"./enterprise/mount-dashboard-app-management.jsx":3449,"./enterprise/mount-dashboard-nav.jsx":3280,"./enterprise/mount-dashboard-team-apps.jsx":3294,"./enterprise/mount-migration-table.jsx":3300,"./enterprise/mount-move-channels-custom-message.jsx":3327,"./enterprise/mount-org-wide-settings-pane.jsx":3292,"./enterprise/mount-terms-of-service.jsx":3338,"./enterprise/mount-workspace-directory.jsx":3281,"./eventlog.js":2153,"./experiments-unauthed.js":3335,"./experiments.js":2154,"./flannel.js":2155,"./fuzzy-matcher.js":2156,"./greetings-earth.js":3332,"./infra/beacon-api-call.js":3330,"./infra/boot/index.js":3328,"./infra/connectivity.js":2157,"./infra/debug.js":2158,"./infra/metrics.js":2159,"./infra/rtm.js":2160,"./infra/run-cdn-download-test.js":3262,"./infra/socket-manager.js":2161,"./infra/supermodel.js":2162,"./infra/token-to-team-id.js":2163,"./lazy-filter-select.jsx":2164,"./member-counts.js":2165,"./members.js":3333,"./membership.js":2166,"./metrics-responsiveness.js":2167,"./mount-admin-member-modal.js":3323,"./mount-apps-browser.js":3305,"./mount-browser-incoming-call.js":3490,"./mount-channel-notification-settings.js":3325,"./mount-channel-options-dialog.js":3270,"./mount-channel-sidebar.js":3440,"./mount-connected-workspaces.js":2182,"./mount-custom-status-input.js":3334,"./mount-document-title.js":3474,"./mount-downloads-view.js":3301,"./mount-emoji-picker.js":3457,"./mount-favicon.js":3473,"./mount-file-upload-banner.js":3336,"./mount-files-flexpane.js":3278,"./mount-global-nav.js":3482,"./mount-image-viewer.js":3298,"./mount-keyboard-shortcuts.js":3293,"./mount-lazy-filter-select.js":3345,"./mount-member-directory-flexpane.js":3412,"./mount-menu.js":3348,"./mount-message-actions-menu.js":3349,"./mount-message-pane-banner.js":3355,"./mount-message-pane-drag-overlay.js":3446,"./mount-message-pane.js":3268,"./mount-migration-blocker.js":3309,"./mount-modal-container.js":3331,"./mount-notification-bar.js":3317,"./mount-oauth-confirm.jsx":3315,"./mount-org-retention-request.js":3282,"./mount-pricing-calculator.js":3340,"./mount-profile-flexpane.js":3310,"./mount-redox.js":3302,"./mount-scrollbar.js":3342,"./mount-service-import-mapping-form.js":3291,"./mount-starred-items-flexpane.js":3438,"./mount-thread-drag-overlay.js":3346,"./mount-threads-flexpane.js":3445,"./mount-toast.js":2286,"./mount-tooltip-tip.js":3351,"./mount-user-groups-flexpane.js":3352,"./mount-user-groups-list.js":3353,"./mpims.js":2296,"./open-app-management-modal.js":2297,"./open-app-permission-dialog.js":2298,"./open-channel-notification-settings-dialog.js":3329,"./prefs.js":3356,"./presence-manager.js":2299,"./reactions.js":2300,"./redux.js":3289,"./remove-app-from-channel.js":3341,"./rules.js":2307,"./rules/files.js":2308,"./rules/notifications.js":2309,"./search.js":3450,"./searcher.js":3347,"./send-message.js":2310,"./set-app-element-for-react-modal.js":2311,"./slash-command.js":3443,"./stars.js":2312,"./teams.js":2313,"./texty.js":3441,"./typing.js":2314,"./user-groups.js":2315,"./utility/a11y.js":3316,"./utility/broadcast-keywords.js":2316,"./utility/client-action-token.js":2317,"./utility/clipboard.js":2318,"./utility/clog.js":2319,"./utility/currency.js":2320,"./utility/date-time.js":2321,"./utility/desktop.js":3299,"./utility/environment.js":2322,"./utility/format.js":3354,"./utility/i18n.js":2323,"./utility/messages.js":2324,"./utility/search/autocomplete-suggestions.js":2325,"./utility/search/autocomplete.js":2326,"./utility/search/conversions.js":2327,"./utility/threads.js":2328,"./utility/url.js":2329,"./utility/utility.js":3494,"./utility/versions.js":2330};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}r.keys=function e(){return Object.keys(n)};r.resolve=i;e.exports=r;r.id=2091},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(0);var r=a.n(n);var i=a(22);var o=a(25);var s=Object(i["a"])("Calls users.counts endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.reason,r=void 0===n?"users-counts-api/fetchUsersCounts":n;return e(Object(o["a"])({method:"users.counts",args:{mpim_aware:true,only_relevant_ims:true,simple_unreads:true,include_threads:true,_x_reason:r}})).then(function(e){if(!e||!e.ok)return{};var t=e.channels,a=e.groups,n=e.ims,r=e.mpims,i=e.threads;return{channels:t,groups:a,ims:n,mpims:r,threads:i}})});s.propTypes={reason:r.a.string}},function(e,t,a){"use strict";a.r(t);var n=a(458);var r=a(51);Object(r["a"])("interop.addEphemeralFeedback",function(e){return TS.redux.dispatch(Object(n["b"])(e))})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(247);var i=a(315);var o=a(426);var s=a(875);var l=a(702);var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getBoundingClientRect?t.getBoundingClientRect():{}};Object(n["a"])("interop.apps",{getAppById:function e(t){return Object(r["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(r["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(r["clearApps"])())},isAppSpaceEnabled:function e(){return Object(r["isAppSpaceEnabled"])(TS.redux.getState())},isGlobalActionsEnabled:function e(){return Object(r["isGlobalActionsEnabled"])(TS.redux.getState())},openAppProfileCard:function e(t,a,n,r,i){return TS.redux.dispatch(Object(s["a"])({serviceId:t,homeWorkspaceId:a,memberId:n,coordinates:c(r),popoverProps:i}))},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(o["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},loadAppActions:function e(){return TS.redux.dispatch(Object(i["loadAppActions"])())},runAppAction:function e(t){return TS.redux.dispatch(Object(l["b"])(t))}})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(334);Object(n["a"])("interop.automount.mountAllWithStore",r["b"])},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(494);var o=a(51);var s=a(162);Object(o["a"])("interop.bots",r()({},i,{getBotState:function e(){return Object(s["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(s["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(s["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(s["getBotInfoByMsg"])(TS.redux.getState(),t)},getBotConfigureUrl:function e(t){return Object(s["getBotConfigureUrl"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(s["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(s["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},function(e,t,a){"use strict";a.r(t);var n=a(94);var r=a(709);var i=a(23);var o=a(353);var s=a(741);var l=a(135);var c=a(12);var u=a(51);var d=a(602);function p(e,t){var a=TS.redux.getState();var r=Object(n["f"])(a,e,t);return TS.redux.channels.interop.maybeWrapEntity(r)}function f(e,t){if(!e)return null;var a=p(e,t);if(a&&a.is_channel)return a;return null}function m(e,t){if(!e)return null;var a=p(e,t);if(a&&a.is_group&&!a.is_mpim)return a;return null}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(a&&a.is_group&&a.is_mpim)return a;return null}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(Object(c["isIm"])(a))return a;return null}function g(){return TS.redux.dispatch(Object(o["n"])())}function b(e,t){return TS.redux.dispatch(Object(o["G"])({channel:e,isBulkUpsert:t}))}function _(e){return TS.redux.dispatch(Object(l["c"])(e))}function y(e){return TS.redux.dispatch(Object(l["f"])(e))}function k(e){return TS.redux.dispatch(Object(l["e"])(e))}function O(e){return TS.redux.dispatch(Object(l["d"])(e))}function w(e){var t=TS.redux.getState();return Object(n["u"])(t,e)}function E(e,t){return TS.redux.dispatch(Object(l["A"])({channelId:e,topic:t}))}function C(e){var t=TS.redux.getState();var a=Object(i["getTeamId"])(t);Object(r["b"])(a,e)}function j(e){var t=TS.redux.getState();var a=Object(i["getTeamId"])(t);return Object(r["a"])(a,e)}function S(){return Object(r["e"])()}Object(u["a"])("interop.channels",{disconnectChannel:l["b"],getPublicChannelById:f,getEntityById:p,getGeneralChannel:g,getGroupById:m,getImById:v,getMpimById:h,getNeedsCreatedMessageState:function e(t){return Object(s["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(c["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationByMembers:Object(u["b"])(l["q"]),submitChannelPurpose:l["z"],submitChannelTopic:E,submitCreate:l["C"],submitDeclineSharedChannelInvite:function e(t){return TS.redux.dispatch(Object(l["D"])(t))},submitLeave:l["I"],joinConversationApi:o["p"],closeChannelApi:o["i"],updateOrgAccessForChannel:o["F"],upsertChannelSharesLocally:o["H"],upsertChannel:b,getChannelPinnedItemByMessage:c["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:c["channelTopicExceedsLimit"],getChannelTopicError:c["getChannelTopicError"],updateChannelLastTrigger:d["updateChannelLastTrigger"],fetchAndUpsertChannelsById:_,fetchAndUpsertChannelsWithQuery:y,fetchAndUpsertChannelsFromAPI:O,fetchAndUpsertChannelsFromFlannel:k,hasChannelWithId:w,markObjectsAsFresh:C,pauseRefetch:S,isObjectFresh:j,shouldStopChannelMentions:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return c["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(a))}})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(42);Object(n["a"])("interop.console",r)},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(51);var o=a(70);Object(i["a"])("interop.constants",r()({},o))},function(e,t,a){"use strict";a.r(t);var n=a(170);var r=a(51);function i(){var e=TS.redux.getState();return Object(n["getEnterpriseOrgURL"])(e)}Object(r["a"])("interop.enterprise",{getOrgURL:i,getPotentiallyUnknownEnterprise:function e(){return Object(n["getPotentiallyUnknownEnterprise"])(TS.redux.getState())}})},function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(827);var r=a(51);Object(r["a"])("interop.Eventlog",{createInstanceForTeam:n["a"],getInstanceForTeam:n["b"]})},function(e,t,a){"use strict";a.r(t);var n=a(351);var r=a(51);Object(r["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(n["getGroupForUser"])(TS.redux.getState(),t)},getAllAssignmentsForDebugging:function e(){return Object(n["getAllAssignmentsForDebugging"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var n=a(313);var r=a(51);var i=a(423);Object(r["a"])("interop.Flannel",{debugSetResponseDelay:n["b"],query:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(n["e"])({commandType:t,args:a,attemptNumber:r}))},fetchRawMembersWithQuery:function e(t,a){return TS.redux.dispatch(Object(i["e"])({query:t,limit:a}))},fetchRawChannelsWithQuery:function e(t,a){return TS.redux.dispatch(Object(i["c"])({query:t,limit:a}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(i["d"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(i["b"])({ids:t}))},getSocketStartArgs:function e(){return Object(n["d"])(TS.redux.getState())},useSocket:function e(){return Object(n["g"])(TS.redux.getState())},getFlannelConnectionUrl:n["c"]})},function(e,t,a){"use strict";a.r(t);var n=a(995);var r=a(51);Object(r["a"])("interop.FuzzyMatcher",n["a"])},function(e,t,a){"use strict";a.r(t);var n=a(612);var r=a(51);Object(r["a"])("interop.BandwidthChecker",n["a"])},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(130);Object(n["a"])("interop.debug",r)},function(e,t,a){"use strict";a.r(t);var n=a(870);var r=a(1005);var i=a(51);Object(i["a"])("interop.metrics",Object(n["a"])("timing"));Object(i["a"])("interop.metrics.start",function(){return r["a"].start()});Object(i["a"])("interop.metrics.sendDataAndEmptyQueue",function(){return r["a"].sendDataAndEmptyQueue()})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(53);Object(n["a"])("interop.rtm",{debugGetHandlers:r["d"],debugGetPendingMessages:function e(){return Object(r["e"])(TS.boot_data.team_id)}})},function(e,t,a){"use strict";a.r(t);var n=a(336);var r=a(3484);var i=a(51);function o(e){if(!n[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=n[e].apply(n,arguments);return TS.redux.dispatch(t)}}Object(i["a"])("interop.SocketManager",{clearFastReconnectUrl:o("clearFastReconnectUrl"),debugGetInstance:o("debugGetInstance"),debugGetState:o("debugGetState"),debugResetRateLimit:o("debugResetRateLimit"),debugSetFastReconnectsEnabled:o("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:o("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:o("debugSetSocketSendFlakiness"),debugTriggerError:o("debugTriggerError"),disconnect:o("disconnect"),finalizeProvisionalConnection:o("finalizeProvisionalConnection"),reconnectImmediately:o("reconnectImmediately"),send:o("send"),sleep:o("sleep"),start:o("start"),wake:o("wake"),maybeTickleMS:function e(){return TS.redux.dispatch(Object(r["a"])())}})},function(e,t,a){"use strict";a.r(t);var n=a(1e3);var r=a(51);Object(r["a"])("interop.supermodel",n)},function(e,t,a){"use strict";a.r(t);var n=a(671);var r=a(51);Object(r["a"])("interop.setTeamIdForToken",n["c"])},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(10);var l=a(51);var c=a(1411);var u=a(1412);var d=a(1165);var p=a(1166);function f(e){var t=new s["b"]("channel_browser");var a=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var a=t.text;return r.a.createElement("span",{key:e.id,className:"sk_dark_gray"},a)});return a}function m(e){var t=new s["b"]("channel_browser");var a=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var a=t.text;return r.a.createElement("span",{key:e.id,className:"sk_dark_gray"},a)});return a}function h(e){var t=new s["b"]("team_picker");var a=void 0;a=e?t.rt("No teams found matching <strong>{query}</strong>",{query:o.a.escape(e)}):t.t("No teams found");return a}function v(e){return r.a.createElement(c["a"],{item:e})}v.displayName="teamPickerListItem";function g(e){return r.a.createElement(u["a"],{item:e})}g.displayName="teamPickerToken";function b(e){return r.a.createElement(d["a"],{item:e})}b.displayName="memberListItem";function _(e){return r.a.createElement(p["a"],{item:e})}_.displayName="memberListToken";Object(l["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:f,channelBrowserSortByToken:m,teamPickerNoResults:h,teamPickerListItem:v,teamPickerToken:g,memberListItem:b,memberListToken:_})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(967);var i=a(203);function o(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(n["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:o,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(r["b"])())}})},function(e,t,a){"use strict";a.r(t);var n=a(264);var r=a(51);var i=a(615);function o(e){return function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return e.apply(void 0,[TS.redux.getState()].concat(a))}}function s(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(r["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:o(n["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];var i=n["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(a));return s(i)}})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(828);Object(n["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:r["f"],stopMonitoringResponsiveness:r["h"],storeResponsiveStats:r["j"],isEnabled:r["d"],getTotalBeachballCount:r["b"],getTotalStutterCount:r["c"]})},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1398);var r=a(51);Object(r["a"])("interop.mountConnectedWorkspaces",n["a"]);Object(r["a"])("interop.unmountConnectedWorkspaces",n["b"])},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(4);var o=a(180);var s=a(3306);var l=a(241);var c=a(471);var u=a(3475);var d=a(21);var p=a(240);var f=a(90);var m=a(37);var h=a(167);var v=a(798);var g=a(739);var b=a(165);var _=a(268);var y=Object(i["e"])("Open search UI",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.showAutocomplete,r=a.commitSearch;var i=a.query,s=a.openMethod,l=a.showTab,c=a.skipMountComponent,u=void 0!==c&&c,y=a.navigationOnly;n&&r&&(n=false);if(!i&&r){r=false;n=true}n||r||Object(m["getInterfaceMode"])(t())!==m["interfaceModes"].SEARCH_RESULTS&&(n=true);if(!Object(b["f"])())return;if(!Object(h["b"])(t())&&!Object(d["getUserHasSeenNewSearchUI"])(t())){e(Object(p["c"])({pref:"seen_new_search_ui",value:true}));window.$&&window.$(".search_new_pill").addClass("hidden")}e(Object(m["setLastOpenMethod"])({lastOpenMethod:s}));var k=Object(o["getSearchInputBoxDisplayQuery"])(t());k!==i&&e(Object(o["setSearchInputBoxUserQuery"])({textyString:i}));r&&e(Object(f["setEditableRequestQueryThenRequest"])({query:i}));l&&e(Object(m["setTabOnly"])({tab:l}));var O=n?m["interfaceModes"].EDIT:m["interfaceModes"].SEARCH_RESULTS;e(Object(m["setInterfaceMode"])({interfaceMode:O}));n&&e(Object(_["openSearchAutocomplete"])());Object(h["b"])(t())||u||Object(v["a"])(t().teamId);e(Object(_["setSearchAutocompleteMode"])({searchAutocompleteMode:y?_["searchAutocompleteModes"].NAVIGATION:_["searchAutocompleteModes"].OMNI}));e(Object(g["a"])({visible:true}))});y.propTypes={query:r.a.string.isRequired,showAutocomplete:r.a.bool.isRequired,commitSearch:r.a.bool.isRequired,openMethod:r.a.string.isRequired,showTab:r.a.string,skipMountComponent:r.a.bool};var k=y;a.d(t,"b",function(){return O});a.d(t,"c",function(){return w});a.d(t,"f",function(){return E});a.d(t,"a",function(){return C});a.d(t,"g",function(){return j});a.d(t,"e",function(){return S});a.d(t,"d",function(){return I});var O=Object(i["e"])("open search using command+f or menu on desktop",function(e,t){var a=!Object(c["b"])();var n=void 0;if(a)try{n=Object(s["a"])(t(),Object(l["f"])(t()))+" "}catch(e){n=""}else n="";e(k({query:n,showAutocomplete:true,commitSearch:false,openMethod:"key_f"}))});O.propTypes={};var w=Object(i["e"])("open search using command+g",function(e,t){var a=Object(o["getSearchInputBoxDisplayQuery"])(t());e(k({query:a||"",showAutocomplete:!a,commitSearch:false,openMethod:"key_g"}))});w.propTypes={};var E=Object(i["e"])("open search using command+k",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.key;var r=Object(u["c"])(t());e(k({query:"",showAutocomplete:true,commitSearch:false,openMethod:"key_"+n,navigationOnly:r}))});E.propTypes={key:r.a.string.isRequired};var C=Object(i["e"])("open search by clicking on input",function(e,t){var a=Object(o["getSearchInputBoxDisplayQuery"])(t());e(k({query:a||"",showAutocomplete:!a,commitSearch:false,openMethod:"click"}))});C.propTypes={};var j=Object(i["e"])("open search using slack command",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.query;var r=Object(o["getSearchInputBoxDisplayQuery"])(t());e(k({query:n||r,showAutocomplete:!!(n||r),commitSearch:!!n,openMethod:"command"}))});j.propTypes={};var S=Object(i["e"])("open by typing in the search input",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.query,r=void 0===n?"":n;e(k({query:r,showAutocomplete:true,commitSearch:false,openMethod:"key_tab"}))});S.propTypes={query:r.a.string};var I=Object(i["e"])("open by clicking on files menu in flexpane",function(e,t){e(k({query:""+Object(s["a"])(t(),Object(l["f"])(t())),showAutocomplete:false,commitSearch:true,openMethod:"files",showTab:"files"}))});I.propTypes={query:r.a.string}},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(212);var o=a(1087);var s=a(51);Object(s["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:r.a.createElement(o["a"],e)}))})},,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(135);var r=a(12);var i=a(51);Object(i["a"])("interop.mpims",{convertToPrivateChannel:n["a"],makeNameForMpim:function e(t){return Object(r["makeNameForMpim"])(TS.redux.getState(),t)},getMembersInDisplayOrder:function e(t){return Object(r["getMembersInDisplayOrder"])(TS.redux.getState(),t)}})},function(e,t,a){"use strict";a.r(t);var n=a(1136);var r=a(51);Object(r["a"])("interop.openAppManagementModal",n["a"])},function(e,t,a){"use strict";a.r(t);var n=a(1128);var r=a(51);Object(r["a"])("interop.openAppPermissionDialog",function(e){return TS.redux.dispatch(Object(n["a"])(e))})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(716);Object(n["a"])("interop.presenceManager",{addMemberToPresenceSubscription:r["a"],removeMemberFromPresenceSubscription:r["c"]})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(891);Object(n["a"])("interop.reactions",{fetchReactions:r["a"],getApiArgsFromReactionKey:r["b"],submitAddOrRemoveReaction:r["d"]})},function(e,t,a){},,function(e,t,a){var n={"./accessibility-store.js":651,"./all-unreads-store.js":480,"./boot-data-store.js":11,"./channel-sidebar-folders-store.js":685,"./channel-sidebar-store.js":729,"./connectivity-store.js":626,"./custom-emoji-store.js":894,"./deleted-messages-store.js":750,"./desktop-store.js":450,"./dnd-store.js":493,"./downloads-store.js":896,"./drafts-store.js":3419,"./emoji-translation-store.js":3492,"./ephemeral-messages-store.js":507,"./expandables-store.js":202,"./experiments-store.js":351,"./file-refresh-store.js":260,"./file-upload-store.js":499,"./files-flexpane-store.js":627,"./flexpane-store.js":650,"./global-nav-store.js":815,"./i18n-store.js":850,"./imports-store.js":166,"./incremental-boot-store.js":752,"./inline-file-previews-store.js":235,"./member-directory-flexpane-store.js":3303,"./message-edit-store.js":346,"./message-pane-banner-store.js":711,"./message-pane-store.js":116,"./modal-store.js":77,"./navigation-history-store.js":366,"./noop-store.js":1163,"./pending-open-channel-store.js":680,"./pins-store.js":610,"./prefs-store.js":21,"./presence-store.js":312,"./search-autocomplete-store.js":268,"./search-channels-users-store.js":751,"./search-input-box-store.js":180,"./search-results-store.js":90,"./search-session-store.js":699,"./search-ui-store.js":37,"./slash-command-store.js":653,"./socket-store.js":79,"./stars-store.js":611,"./thread-sub-store.js":428,"./threads-flexpane-store.js":712,"./toast-store.js":212,"./typing-store.js":451,"./ui-serialization-store.js":818,"./unread-counts-store.js":3437,"./user-groups-flexpane-store.js":616,"./users-counts-store.js":508};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}r.keys=function e(){return Object.keys(n)};r.resolve=i;e.exports=r;r.id=2303},function(e,t,a){var n={"./admin-members-store.js":128,"./app-permissions-store.js":243,"./app-profiles-store.js":426,"./apps-store.js":247,"./blocks-store.js":814,"./bots-store.js":162,"./canvases-store.js":625,"./current-member-user-group-regexp-store.js":259,"./customize-emoji-store.js":432,"./developer-actions-store.js":502,"./developer-apps-store.js":1385,"./emoji-store.js":681,"./enterprise-store.js":170,"./environment-store.js":816,"./idp-groups-store.js":679,"./last-network-send-store.js":893,"./member-counts-store.js":203,"./membership-store.js":264,"./messages-meta-store.js":279,"./notifications-store.ts":895,"./reactions-store.js":322,"./team-id-store.js":23,"./teams-store.js":50,"./user-group-membership-store.js":417,"./window-store.js":206};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}r.keys=function e(){return Object.keys(n)};r.resolve=i;e.exports=r;r.id=2304},function(e,t,a){var n={"./checkout-flow-store/index.js":219,"./pricing-plans-store/index.js":142,"./workspace-store/index.js":69};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}r.keys=function e(){return Object.keys(n)};r.resolve=i;e.exports=r;r.id=2305},function(e,t,a){var n={"./app-actions-store/index.js":315,"./channel-history-store/index.js":122,"./channels-store/index.js":19,"./files-store/index.js":78,"./members-store/index.js":26,"./messages-store/index.js":44,"./user-groups-store/index.js":123};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}r.keys=function e(){return Object.keys(n)};r.resolve=i;e.exports=r;r.id=2306},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(1413);var o=a(12);var s=a(61);var l=a(321);var c=a(16);var u=a(36);var d=a(465);var p=a(48);var f=a(207);var m=a(1961);var h=a(258);var v=a(105);var g=a(51);Object(g["a"])("interop.rules",{channels:r()({},o,{shouldStopChannelMentions:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return o["shouldStopChannelMentions"].apply(o,[TS.redux.getState()].concat(a))},getDisplayNameForChannel:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return o["getDisplayNameForChannel"].apply(o,[TS.redux.getState()].concat(a))},isYou:function e(t){return o["isYou"](TS.model.user.id,t)},isRelevantTeamForSharedChannel:function e(t){return o["isRelevantTeamForSharedChannel"](t,TS.model.user,TS.model.team.id,TS.model.team.enterprise_id,TS.boot_data.page_needs_enterprise,TS.boot_data.other_accounts)},shouldShowAtChannelWarning:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return o["shouldShowAtChannelWarning"].apply(o,[TS.redux.getState()].concat(a))},checkForBlockedAtChannelKeyword:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return o["checkForBlockedAtChannelKeyword"].apply(o,[TS.redux.getState()].concat(a))}}),messages:r()({isAutomatedSubtype:d["a"]},u),files:{extendFileWithPinnedInfo:s["extendFileWithPinnedInfo"],getFileType:s["getFileType"]},user:{canLeaveChannel:h["e"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["g"].apply(void 0,[TS.redux.getState()].concat(a))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["f"].apply(void 0,[TS.redux.getState()].concat(a))},canAtMentionEveryone:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["b"].apply(void 0,[TS.redux.getState()].concat(a))},canAtChannelOrGroup:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["a"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInGeneral:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["i"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInChannel:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["h"].apply(void 0,[TS.redux.getState()].concat(a))},canTriggerCustomResponses:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return h["k"].apply(void 0,[TS.redux.getState()].concat(a))}},unreads:r()({},m),user_groups:{isUnknownOrNonExistent:function e(){return v["p"].apply(void 0,arguments)}},emoji:{getEmojiMode:function e(t){return l["g"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return l["i"](TS.redux.getState())}},teams:r()({},p),members:r()({},c),admin:r()({},i),threads:r()({},f)})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(23);var o=a(373);var s=a(730);var l=a(61);var c=a(311);var u=a(51);var d=a(745);function p(e){var t=TS.redux.getState();var a=Object(i["getTeamId"])(t);Object(s["m"])(a,e)}function f(e){var t=TS.redux.getState();var a=Object(i["getTeamId"])(t);return Object(s["l"])(a,e)}Object(u["a"])("interop.files",r()({},l,{processFileForUpserting:function e(t){return Object(o["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:c["c"],fetchAndUpsertFilesById:c["d"],getFileMetaTemplate:d["b"],markObjectsAsFresh:p,isObjectFresh:f}))},function(e,t,a){"use strict";a.r(t);var n=a(350);var r=a(153);var i=a(807);var o=a(51);Object(o["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["i"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["k"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["j"].apply(void 0,[TS.redux.getState()].concat(a))},showNotification:function e(t,a){return TS.redux.dispatch(Object(i["c"])({message:t,modelObject:a}))},messageForSuppressedNotification:r["b"],getCalculatedDesktopNotifySetting:n["c"],getCalculatedMobileNotifySetting:n["d"],getDefaultDesktopNotifySetting:n["e"],getDefaultMobileNotifySetting:n["f"]})},function(e,t,a){"use strict";a.r(t);var n=a(683);var r=a(51);Object(r["a"])("interop.sendMessage.resolveMessage",n["d"])},function(e,t,a){"use strict";a.r(t);var n=a(333);var r=a.n(n);var i=a(51);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";r.a.setAppElement(e)})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(611);function i(e){return TS.redux.dispatch(Object(r["fetchStarsList"])(e))}Object(n["a"])("interop.stars",{getStarsList:i})},function(e,t,a){"use strict";a.r(t);var n=a(50);var r=a(23);var i=a(51);var o=a(993);function s(e){var t=TS.redux.getState();var a=Object(r["getTeamId"])(t);Object(n["markObjectsAsFresh"])(a,e)}function l(){return Object(n["pauseRefetch"])()}function c(e){return TS.redux.dispatch(Object(o["c"])(e))}Object(i["a"])("interop.teams",{markObjectsAsFresh:s,pauseRefetch:l,fetchAndUpsertTeamsWithQuery:c})},function(e,t,a){"use strict";a.r(t);var n=a(2);var r=a.n(n);var i=a(51);var o=a(451);var s=a(26);var l=a(16);function c(e){var t=TS.redux.getState();var a=Object(n["map"])(Object(o["getTyperIdsInChannel"])(t,e),function(e){return Object(s["getMemberById"])(t,e)});a.sort(function(e,a){return TS.interop.i18n.sorter(Object(l["getPrefCompliantMemberNameLowerCase"])(t,e),Object(l["getPrefCompliantMemberNameLowerCase"])(t,a))});return a}Object(i["a"])("interop.typing",{currentUserStartedTyping:o["currentUserStartedTyping"],currentUserEndedTyping:o["currentUserEndedTyping"],getTypersInChannel:c,memberStartedTyping:o["memberStartedTyping"],memberEndedTyping:o["memberEndedTyping"]})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(123);var l=a(267);var c=a(105);var u=a(259);var d=a(616);var p=a(417);var f=a(11);var m=a(51);function h(e){var t=TS.redux.getState();var a=Object(s["getUserGroupById"])(t,e);if(!a)return null;return a}function v(e){return TS.redux.dispatch(Object(l["h"])({subteam:e})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=h(e);if(!n||Object(c["p"])(n))return;TS.redux.dispatch(Object(s["bulkAddMembersToGroup"])({groupId:e,users:a}))}).then(function(){return h(e)})}function g(e,t){TS.redux.dispatch(Object(l["h"])({subteam:e})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=h(e);if(!n||Object(c["p"])(n))return;TS.redux.dispatch(Object(s["bulkAddMembersToGroup"])({groupId:e,users:a}))}).then(function(){var a=h(e);a&&t&&t(a)})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=h(e.subteam_id);if(!t||Object(c["p"])(t))return;var a=r()({},t);if(t.users){e.added_users&&(a.users=Object(i["union"])(t.users,e.added_users));e.removed_users&&(a.users=Object(i["difference"])(t.removed_users,e.removed_users))}a.user_count=parseInt(a.user_count,10)||0;a.user_count+=parseInt(e.added_users_count,10)||0;a.user_count=Math.max(0,a.user_count-(e.removed_users_count||0));a.date_previous_update=r()({},a,Object(i["pick"])(e,["date_update","date_previous_update"]));O(a)}function _(e){var t=TS.redux.getState();Object(f["isFeatureEnabled"])(t,"feature_lazy_user_groups")?TS.redux.dispatch(Object(p["upsertUserGroupMembership"])({groupId:e,isMember:true})):TS.redux.dispatch(Object(u["removeCurrentMemberUserGroupRegexp"])(e));var a=h(e);if(a&&!Object(c["p"])(a)&&Object(c["q"])(a)){Object(f["isFeatureEnabled"])(t,"feature_lazy_user_groups")||TS.redux.dispatch(Object(u["addCurrentMemberUserGroupRegexp"])(a));var n=Object(f["getCurrentUserId"])(t);TS.redux.dispatch(Object(s["addMemberToGroup"])({groupId:e,memberId:n}))}}function y(e){var t=TS.redux.getState();Object(f["isFeatureEnabled"])(t,"feature_lazy_user_groups")?TS.redux.dispatch(Object(p["upsertUserGroupMembership"])({groupId:e,isMember:false})):TS.redux.dispatch(Object(u["removeCurrentMemberUserGroupRegexp"])(e));var a=h(e);var n=Object(f["getCurrentUserId"])(t);a&&!Object(c["p"])(a)&&TS.redux.dispatch(Object(s["removeMemberFromGroup"])({groupId:e,memberId:n}))}function k(e){var t=TS.redux.getState();var a=Object(s["getActiveUserGroups"])(t,e);return a}function O(e){return TS.redux.dispatch(Object(s["upsertUserGroup"])({userGroup:e}))}function w(e){return TS.redux.dispatch(Object(s["upsertUserGroups"])({userGroups:e}))}function E(e){return TS.redux.dispatch(Object(l["f"])(e))}Object(m["a"])("interop.userGroups",{getUserGroupById:h,getActiveUserGroups:k,getUserGroupMembers:g,promiseToGetUserGroupMembers:v,removeSelfUserGroup:y,upsertSelfUserGroup:_,upsertUserGroup:O,upsertUserGroups:w,userGroupMembersChanged:b,createUserGroup:l["a"],updateUserGroup:l["l"],updateMembersOfUserGroup:l["k"],enableUserGroup:l["d"],disableUserGroup:l["c"],deleteUserGroup:l["b"],searchLocalUserGroups:function e(){return TS.redux.dispatch(Object(d["searchLocalUserGroups"])())},getSearchQuery:function e(){return Object(d["getSearchQuery"])(TS.redux.getState())},setSearchQuery:function e(t){return TS.redux.dispatch(Object(d["setSearchQuery"])(t))},bulkAddUserGroupMembership:function e(t){return TS.redux.dispatch(Object(p["bulkAddUserGroupMembership"])(t))},fetchAndUpsertUserGroupsWithQuery:E,canEditUserGroups:function e(){return Object(c["c"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(c["b"])(TS.redux.getState())},getCurrentMemberUserGroupRegExps:function e(){return Object(u["getCurrentMemberUserGroupRegExps"])(TS.redux.getState())},clearAllUserGroupMembership:function e(){return TS.redux.dispatch(Object(p["clearAllUserGroupMembership"])())}})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(70);var l=a(757);var c=a(51);function u(){return Object(i["map"])(s["BROADCAST_KEYWORDS"],function(e,t){return r()({alias:"BKchannel"===t?"group":null},Object(l["a"])(t))})}function d(e,t){return Object(i["map"])(Object(l["c"])(e,t),function(e){return r()({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(c["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:u,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return d.apply(void 0,[TS.redux.getState()].concat(a))}})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(51);var o=a(419);Object(i["a"])("interop.client_action_token",r()({},o["a"]))},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(361);Object(n["a"])("interop.clipboard",r)},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(55);Object(n["a"])("interop.clog",{instance:Object(r["a"])(),track:r["b"],trackClick:r["c"],trackClickWithContext:r["d"],trackForm:r["e"]})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(452);Object(n["a"])("interop.currency",{formatCurrency:r["a"]})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(113);var i=a(469);var o=a(144);var s=a(1071);var l=a(1068);var c=a(1073);var u=a(849);var d=a(360);var p=a(1072);var f=a(490);var m=a(1063);var h=a(692);var v=a(844);var g=a(846);var b=a(847);var _=a(415);var y=a(1066);var k=a(848);var O=a(672);var w=a(1070);var E=a(1064);var C=a(178);var j=a(491);var S=a(1067);var I=a(1069);var T=a(693);var N=a(1062);var A=a(464);var R=a(1061);var M=a(928);var x=a(489);var P=a(1065);var D=a(733);var F=a(728);var L=a(359);var B=a(845);Object(n["a"])("interop.datetime",{toDateObject:r["a"],toDate:i["a"],toTime:o["a"],toHourAmount:s["a"],toDayAmount:l["a"],toWeekAmount:c["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:p["a"],dateDifference:f["a"],distanceInDays:m["a"],distanceInMinutes:h["a"],distanceInSeconds:v["a"],isToday:g["a"],isYesterday:b["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:k["a"],toDayOfTheWeek:O["a"],toHour:w["a"],getActivityDayStamp:E["a"],toCalendarDate:C["a"],toCalendarDateOrNamedDay:j["a"],toCalendarDateIfYesterdayOrToday:S["a"],toFilenameFriendlyDate:I["a"],toHumanReadableDateAndTime:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return T["a"].apply(void 0,[TS.redux.getState()].concat(a))},convertISOtoUTCReadableDate:N["a"],toTimeAgo:A["a"],addDays:R["a"],daysToYearsPretty:M["a"],maybeGetRelativeDay:x["a"],millisecondsToPrettifiedTime:P["a"],prettifyDateString:D["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:B["a"]})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(51);var o=a(27);var s=o["desktopVersionFields"](),l=s.windowsAppVersion,c=s.windowsAppVersionMinor,u=s.macAppVersion,d=s.macAppVersionMinor,p=s.linuxAppVersion,f=s.linuxAppVersionMinor,m=s.desktopAppVersion;Object(i["a"])("interop.environment",r()({},o,{win_ssb_version:l,win_ssb_version_minor:c,mac_ssb_version:u,mac_ssb_version_minor:d,lin_ssb_version:p,lin_ssb_version_minor:f,desktop_app_version:m}))},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(51);var o=a(10);var s=a(27);var l=a(39);var c=a(169);var u=a(138);var d=new o["b"]("ns");var p={defaultNamespace:"ns",t:d.t};var f=[];var m=function e(t,a){var n=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.t(t,r()({},n,{ns:a}))};s["isDev"]&&(n.toString=function(){var e=a+"."+t;if(f.indexOf(e)>=0)return"";f.push(e);var n="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+a+"\n\t\t\tString: "+t;alert(n);return""});return n};Object(i["a"])("interop.i18n",{t:m,number:o["j"],percent:o["k"],deburr:o["a"],listify:o["f"],possessive:o["l"],fullPossessiveString:o["c"],safeString:o["m"],sorter:o["n"],mappedSorter:o["g"],localesEnabled:l["e"],supportedKeyboards:c["e"],keyCodeEquivalent:c["b"],keyEquivalent:c["c"],getReverseKeyCodeMap:c["a"],normalizeKeyboardFromDesktop:c["d"],locale:Object(l["f"])(),isPseudoLocale:l["d"],isLocaleCJK:l["c"],zdLocale:l["a"],number_abbreviations:u["d"],locales_number_formatting:u["c"],DEFAULT_LOCALE:o["b"].DEFAULT_LOCALE})},function(e,t,a){"use strict";a.r(t);var n=a(345);var r=a(11);var i=a(21);var o=a(23);var s=a(422);var l=a(1435);var c=a(36);var u=a(51);Object(u["a"])("interop.messages",{computeRollups:l["a"],getExpandableKey:n["a"],canCountAsUnreadForCurrentUser:c["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,a){return TS.redux.dispatch(Object(s["a"])({imsgs:[t],channelId:a}))[0]},preprocessImsgs:function e(t,a){return TS.redux.dispatch(Object(s["a"])({imsgs:t,channelId:a}))},containsMention:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(c["containsMention"])(t,Object(r["getCurrentUserId"])(TS.redux.getState()),Object(i["getUserHighlightWords"])(TS.redux.getState()),Object(o["getTeamId"])(TS.redux.getState()),{ignoreAtHereMentions:a,ignoreHighlightWords:n,ignoreAtEveryoneMentions:s,ignoreAtChannelMentions:l})},isReply:c["isReply"],canEditMessage:c["canEditMessage"],shouldRenderFileThread:function e(t){return Object(c["shouldRenderFileThread"])(t,{featureFileThreads:Object(r["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads"),featureFileThreadsDarkLaunch:Object(r["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads_dark_launch")})},shouldIgnoreHighlightWords:c["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(c["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:c["atEveryoneRegExp"],atChannelRegExp:c["atChannelRegExp"],atGroupRegExp:c["atGroupRegExp"],atHereRegExp:c["atHereRegExp"]})},function(e,t){},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(747);var i=a(47);var o=a(320);var s=a(1117);var l=a(746);var c=a(1116);Object(n["a"])("interop.search_autocomplete",{suggestions:r["c"],AutocompleteQuerySuggestion:o["f"],AutocompleteSuggestionType:i["b"],warmQuerySuggestionCache:function e(){var t=TS.redux.getState().teamId;var a=Object(c["a"])(t);a.get()},clearQueryHistoryCache:function e(){var t=TS.redux.getState().teamId;var a=Object(l["a"])(t);a.flushAll()},warmFileSuggestionCache:function e(){var t=TS.redux.getState().teamId;var a=Object(s["a"])(t);a.get()}})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(736);Object(n["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:r["a"]})},function(e,t,a){"use strict";a.r(t);var n=a(207);var r=a(51);Object(r["a"])("interop.threads",{getThreadKey:n["getThreadKey"]})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(51);var o=a(81);var s=a(473);Object(i["a"])("interop.url",r()({buildWorkspaceUrl:s["b"]},o))},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(414);Object(n["a"])("interop.versions",r)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(27);var r=a(17);function i(e,t,a){var i="noversion";var o=Date.now()/1e3;var s="/api/"+e+"?_x_id="+i+"-"+o;var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){l.onreadystatechange=null;var e={};if(200===l.status||429===l.status)try{e=JSON.parse(l.responseText)}catch(e){Object(r["b"])().warn("API","Unable to do anything with api response")}e=e||{ok:false};if(a)a(e.ok,e,t);else if(n["isDev"]){Object(r["b"])().warn("API","No callback provided. Printing response");Object(r["b"])().warn("API",e.ok,e,t)}}};var c=true;l.open("POST",s,c);var u=new FormData;var d=false;t?Object.keys(t).forEach(function(e){if("_"===e[0])return;u.append(e,t[e]);d=true}):n["isDev"]&&Object(r["b"])().warn("API","No args provided. Bold, very bold.");d?l.send(u):l.send()}window.callSlackAPIUnauthed=function(e,t,a){Object(r["b"])().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.js");i(e,t,a)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(4);var o=a(3479);var s=a(27);var l=a(271);var c=a(1134);var u=a(25);var d;(function(e){e["Accept"]="accept";e["Reject"]="reject";e["Busy"]="on_call";e["DoNotDisturb"]="dnd";e["Hangup"]="hangup"})(d||(d={}));var p=Object(i["b"])("Calls the screenhero.rooms.inviteResponse endpoint",function(e,t,a){var n=a.callId,r=a.response;var i=t();var s=Object(l["d"])(i,n);Object(o["a"])(!!s.inviterUserId,"Did not have inviter to respond with.");return e(Object(u["a"])({method:"screenhero.rooms.inviteResponse",args:{caller:s.inviterUserId,room:s.id,response:r}}))});p.propTypes=r.a.shape({callId:r.a.string,response:r.a.string});var f=a(3477);var m=a(1438);a.d(t,"b",function(){return h});a.d(t,"a",function(){return v});a.d(t,"c",function(){return g});var h=Object(i["e"])("Opens a call invite window",function(e,t,a){var n=a.room;var r=a.caller;e(Object(l["h"])({id:n,invitationStatus:c["a"].pending,inviterUserId:r}));e(Object(l["g"])(n));Object(s["isSSB"])()&&e(Object(f["a"])({appName:"calls",viewId:n,params:[r],windowOptions:{height:310,width:200,backgroundColor:m["a"].backgroundColor,show:false}}))});h.propTypes=r.a.shape({room:r.a.string,caller:r.a.string});var v=Object(i["e"])("Accept an invite within sonic or the call window",function(e,t){var a=t();var n=Object(l["c"])(a);Object(o["a"])(!!n);e(Object(l["h"])({id:n.id,invitationStatus:c["a"].accepted}));if(Object(s["isSSB"])()){var r=desktop.window.getGeometryForWindow({window_token:desktop.browserWindowId});desktop.window.setBounds({window_token:desktop.browserWindowId,animate:true,bounds:{x:r.x+(r.width-m["a"].width)/2,y:r.y+(r.height-m["a"].height)/2,height:m["a"].height,width:m["a"].width}})}else e(Object(f["a"])({appName:"calls",viewId:n.id}))});var g=Object(i["e"])("Reject an invite within sonic or the call window",function(e,t){var a=t();var n=Object(l["c"])(a);Object(o["a"])(!!n);e(Object(l["h"])({id:n.id,invitationStatus:c["a"].rejected}));e(p({callId:n.id,response:d.Reject}));Object(s["isSSB"])()&&window.close()})},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(365);var r=a(780);function i(e,t){var a=Object(n["b"])(e,{highlightWords:t,shouldRenderEmojiAsText:true,emojiNames:[]});return Object(r["a"])(a)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(2);var i=a(62);var o=a(102);var s=a(17);var l="CDN-DOWNLOAD-TEST";var c="https://a.slack-edge.com/bv1-4/cdn-download-test.838a524ba45462f63be8.min.js";var u="[1][3262]";function d(){var e=Object(s["b"])({label:l});e.info("Running test");var t=(Date.now()*Math.random()).toString(36);var a=c+"?_x="+t;var n=function t(){var n=Object(r["snakeCase"])(l+" success");Object(i["c"])(n);e.info(a+" SUCCESS")};var d=function t(){var n=Object(r["snakeCase"])(l+" failure");Object(i["c"])(n);e.info(a+" FAILED");Object(o["a"])("CDN download test failed: "+a,n)};var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",a);p.onload=function(){try{Object(r["get"])(Object(r["find"])(window.webpackJsonp,u),u)()}catch(e){return}window.cdnDownloadTestWorked?n(a):d(a)};p.onerror=function(){d(a)};document.body.appendChild(p)}Object(n["a"])("interop.runCdnDownloadTest",d)},,,,function(e,t,a){"use strict";a.r(t);var n=a(1176);var r=a(1182);var i=a(1189);var o=a(1190);var s=a(1191);var l=a(1192);var c=a(1193);var u=a(1194);var d=a(1195);var p=a(1196);var f=a(1197);var m=a(1201);var h=a(1202);var v=a(1205);var g=a(1206);var b=a(1207);var _=a(1209);var y=a(1210);var k=a(1211);var O=a(1212);var w=a(1213);var E=a(1214);var C=a(1215);var j=a(1216);var S=a(1218);var I=a(1219);var T=a(1220);var N=a(1221);var A=a(1224);var R=a(1225);var M=a(1226);var x=a(1227);var P=a(1228);var D=a(1229);var F=a(1230);var L=a(1231);var B=a(1232);var U=a(1233);var q=a(1234);var G=a(1235);var H=a(1236);var W=a(1237);var V=a(1238);var z=a(1239);var Q=a(1240);var K=a(1242);var Y=a(1244);var J=a(1245);var Z=a(1246);var X=a(1247);var $=a(1248);var ee=a(1249);var te=a(1250);var ae=a(1251);var ne=a(1252);var re=a(1253);var ie=a(1254);var oe=a(1255);var se=a(1256);var le=a(905);var ce=a(1257);var ue=a(1258);var de=a(1260);var pe=a(1261);var fe=a(1262);var me=a(1263);var he=a(1264);var ve=a(1265);var ge=a(1267);var be=a(1268);var _e=a(1269);var ye=a(1270);var ke=a(1271);var Oe=a(1272);var we=a(1273);var Ee=a(1274);var Ce=a(1275);var je=a(1276);var Se=a(1277);var Ie=a(1278);var Te=a(1279);var Ne=a(1280);var Ae=a(1281);var Re=a(1282);var Me=a(1283);var xe=a(1284);var Pe=a(1286);var De=a(1287);var Fe=a(1288);var Le=a(1290);var Be=a(1291);var Ue=a(1292);var qe=a(1293);var Ge=a(1294);var He=a(1);var We=a.n(He);var Ve=a(104);var ze=a.n(Ve);var Qe=a(691);var Ke=a(5);var Ye=a.n(Ke);var Je=a(6);var Ze=a.n(Je);var Xe=a(7);var $e=a.n(Xe);var et=a(8);var tt=a.n(et);var at=a(14);var nt=a(0);var rt=a.n(nt);var it=a(15);var ot=a.n(it);var st=a(10);var lt=a(11);var ct=a(493);var ut=a(69);var dt=a(94);var pt=a(167);var ft=a(54);var mt=a(121);var ht=a(18);var vt=a(41);var gt=a(1410);var bt=a(3);var _t=a.n(bt);var yt=a(2);var kt=a(21);var Ot=a(240);var wt=a(684);var Et=a(889);var Ct=a(151);var jt=a(12);var St=a(144);var It=a(469);var Tt=a(89);var Nt=a(113);var At=a(692);var Rt=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.currentTime,r=void 0===n?Object(Tt["a"])().unix():n;var i=Object(Nt["a"])(r);var o=Object(Nt["a"])(t);var s=Math.ceil(Object(At["a"])(o,i));if(s<60){var l=Tt["a"].localeData().timeAgo().compact.min45.replace(/%d/,s);return l}if(s>=60&&s%60===0){var c=s/60;var u=Tt["a"].localeData().timeAgo().compact.hrs24.replace(/%d/,c);return u}var d=s%60;var p=(s-d)/60;var f=Tt["a"].localeData().timeAgo().compact.min45.replace(/%d/,d);var m=Tt["a"].localeData().timeAgo().compact.hrs24.replace(/%d/,p);var h=m+" "+f;return h};var Mt=Rt;var xt=a(1001);var Pt=a(1011);var Dt=a(1445);var Ft=a(760);var Lt=a(1164);var Bt=a(1750);var Ut=new st["b"]("do_not_disturb");var qt={inDndBySnooze:rt.a.bool.isRequired,snoozeNotifications:rt.a.func.isRequired,endDndSnooze:rt.a.func.isRequired,endDndSchedule:rt.a.func.isRequired,snoozeEndTs:rt.a.number,dndEndTs:rt.a.number,do24hrTime:rt.a.bool,currentChannel:rt.a.object,featureSonicDnd:rt.a.bool,featureBetterSnooze:rt.a.bool,useGlobalNav:rt.a.bool,menuProps:rt.a.object,openDndDialog:rt.a.func,showCustomNewBadge:rt.a.bool,setUserPrefByApi:rt.a.func};var Gt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},featureSonicDnd:false,featureBetterSnooze:false,useGlobalNav:false,menuProps:{},openDndDialog:yt["noop"],showCustomNewBadge:true,setUserPrefByApi:yt["noop"]};var Ht=function(e){tt()(t,e);function t(e){Ye()(this,t);var a=$e()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(a);return a}Ze()(t,[{key:"getDndMenuHeaderSnoozeDescription",value:function e(){var t=this.props,a=t.snoozeEndTs,n=t.do24hrTime,r=t.featureBetterSnooze;if(!r)return null;var i=Object(Tt["a"])().format("YYYY-MM-DD");var o=Object(Tt["a"])().add(1,"day").format("YYYY-MM-DD");var s=Object(St["a"])(a,{do24hrTime:n});var l=Object(It["a"])(a,{omitTime:true});if(l===i)return Ut.rt("Notifications snoozed until {time}",{time:s});if(l===o)return Ut.rt("Notifications snoozed until tomorrow at {time}",{time:s});return Ut.rt("Notifications snoozed until {date} at {time}",{date:Object(Tt["a"])(l).format("dddd, MMMM Do"),time:s})}},{key:"renderDndMenuHeader",value:function e(){var t=this.props,a=t.inDndBySnooze,n=t.snoozeEndTs,r=t.dndEndTs,i=t.do24hrTime,o=t.featureBetterSnooze;var s=Object(St["a"])(r,{do24hrTime:i});var l=Ut.rt("Scheduled until {time}",{time:s});var c=a?n:r;var u=Object(xt["b"])(c,{do24hrTime:i,featureBetterSnooze:o});var d=We.a.createElement("div",{className:"p-dnd_menu__schedule_header"},We.a.createElement("div",{className:"p-dnd_menu__header_status"},We.a.createElement("div",null,We.a.createElement("strong",null,Ut.t("Do Not Disturb ON"))),We.a.createElement("div",null,o?u:l)));var p=Object(Tt["a"])().unix();var f=Ut.rt("Notifications snoozed for {duration}",{duration:Mt(n,{currentTime:p})});var m=We.a.createElement("div",{className:"p-dnd_menu__snooze_header"},We.a.createElement("div",{className:"p-dnd_menu__header_status"},We.a.createElement("div",null,We.a.createElement("strong",null,Ut.t("Do Not Disturb ON"))),We.a.createElement("div",null,o?u:f)));return a?m:d}},{key:"renderSubmenu",value:function e(t){var a=this;var n=this.props,r=n.featureSonicDnd,i=n.featureBetterSnooze,o=n.showCustomNewBadge;if(!r)return null;var s=void 0;var l=void 0;var c=void 0;var u=void 0;var d=void 0;if(i){s=Ut.t("Custom \u2026");l=Ut.rt("Custom \u2026 {new_badge}",{new_badge:We.a.createElement(Et["a"],{className:"p-dnd_menu__new_pill"},Ut.t("NEW"))});c=Ut.t("Until tomorrow");u=Ut.t("Until next week");d=Ut.t("30 minutes")}return We.a.createElement(ft["f"],_t()({},t,{width:i?200:140}),!i&&We.a.createElement(ft["b"],{label:Ut.t("20 minutes"),onSelected:function e(){return a.props.snoozeNotifications({duration:20})}}),i&&We.a.createElement(ft["b"],{label:d,onSelected:function e(){return a.props.snoozeNotifications({duration:30})}}),We.a.createElement(ft["b"],{label:Ut.t("1 hour"),onSelected:function e(){return a.props.snoozeNotifications({duration:60})}}),We.a.createElement(ft["b"],{label:Ut.t("2 hours"),onSelected:function e(){return a.props.snoozeNotifications({duration:120})}}),We.a.createElement(ft["b"],{label:Ut.t("4 hours"),onSelected:function e(){return a.props.snoozeNotifications({duration:240})}}),!i&&We.a.createElement(ft["b"],{label:Ut.t("8 hours"),onSelected:function e(){return a.props.snoozeNotifications({duration:480})}}),!i&&We.a.createElement(ft["b"],{label:Ut.t("24 hours"),onSelected:function e(){return a.props.snoozeNotifications({duration:1440})}}),i&&We.a.createElement(ft["b"],{label:c,onSelected:function e(){a.props.snoozeNotifications({duration:Object(xt["d"])()})}}),i&&We.a.createElement(ft["b"],{label:u,onSelected:function e(){a.props.snoozeNotifications({duration:Object(xt["c"])()})}}),i&&We.a.createElement(ft["b"],{label:o?l:s,onSelected:function e(){a.props.openDndDialog();a.props.setUserPrefByApi({pref:"dnd_custom_new_badge_seen",value:true})}}))}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,a=t.inDndBySnooze,n=t.featureSonicDnd,r=t.useGlobalNav;if(!n)return null;var i=We.a.createElement(ft["b"],{label:Ut.t("Adjust schedule \u2026"),onSelected:function e(){return Object(Ft["a"])("notifications","#prefs_dnd")}});var o=We.a.createElement(wt["a"],{label:Ut.t("Adjust time"),renderSubmenu:this.renderSubmenu,forceLeft:r});return a?o:i}},{key:"renderSettingsMenuItem",value:function e(){var t=this.props,a=t.currentChannel,n=t.featureSonicDnd;if(!n)return null;if(!a.id||Object(jt["isIm"])(a))return null;var r=We.a.createElement(Ct["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var i=Ut.rt("Settings for {name} \u2026",{name:We.a.createElement("strong",null,r)});return We.a.createElement(ft["b"],{label:i,onSelected:function e(){return Object(Lt["a"])(a.id)}})}},{key:"render",value:function e(){var t=this.props,a=t.inDndBySnooze,n=t.menuProps,r=t.featureSonicDnd,i=t.featureBetterSnooze;if(!r)return null;var o=void 0;i&&(o=Ut.t("Resume notifications now"));return We.a.createElement("div",null,this.renderDndMenuHeader(),We.a.createElement(ft["f"],_t()({},n,{menuClassNames:"p-dnd_menu"}),We.a.createElement(ft["b"],{label:i?o:Ut.t("Turn OFF"),onSelected:a?this.props.endDndSnooze:this.props.endDndSchedule}),this.renderAdjustMenuItem(),We.a.createElement(ft["d"],null),this.renderSettingsMenuItem(),We.a.createElement(ft["b"],{label:Ut.t("Your notification preferences \u2026"),onSelected:function e(){return Object(Ft["a"])("notifications")}})))}}]);return t}(He["PureComponent"]);Ht.displayName="DndEnabledMenu";Ht.defaultProps=Gt;var Wt=function e(t){var a=Object(lt["getCurrentUserId"])(t);var n=Object(ct["getDndScheduleByMemberId"])(t,a),r=n.nextDndEndTs;var i=Object(ct["getSnoozeScheduleForCurrentUser"])(t),o=i.snoozeEnabled,s=i.snoozeEndTs;return{inDndBySnooze:o,snoozeEndTs:s,dndEndTs:r,do24hrTime:Object(kt["getUserPref"])(t,"time24"),featureBetterSnooze:Object(lt["isFeatureEnabled"])(t,"feature_better_snooze"),showCustomNewBadge:!Object(kt["getUserPref"])(t,"dnd_custom_new_badge_seen")}};var Vt={snoozeNotifications:Pt["e"],openDndDialog:Dt["a"],endDndSnooze:Pt["b"],endDndSchedule:Pt["a"],setUserPrefByApi:Ot["c"]};var zt=Object(at["connect"])(Wt,Vt)(Ht);var Qt=new st["b"]("do_not_disturb");var Kt={inDnd:rt.a.bool.isRequired,currentChannel:rt.a.object,className:rt.a.string,menuPosition:rt.a.string,menuOffsetX:rt.a.number,menuOffsetY:rt.a.number,tooltipOffsetX:rt.a.number,tooltipOffsetY:rt.a.number,featureSonicDnd:rt.a.bool,useGlobalNav:rt.a.bool};var Yt={currentChannel:{},className:void 0,menuPosition:"bottom-left",menuOffsetX:-4,menuOffsetY:8,tooltipOffsetX:void 0,tooltipOffsetY:void 0,featureSonicDnd:false,useGlobalNav:false};var Jt=function(e){tt()(t,e);function t(e){Ye()(this,t);var a=$e()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}Ze()(t,[{key:"renderMenu",value:function e(t){var a=this.props,n=a.inDnd,r=a.currentChannel,i=a.featureSonicDnd;if(!i)return null;if(n)return We.a.createElement(zt,{featureSonicDnd:i,currentChannel:r,menuProps:t});return We.a.createElement(gt["a"],{featureSonicDnd:i,currentChannel:r,menuProps:t})}},{key:"render",value:function e(){var t=this.props,a=t.inDnd,n=t.className,r=t.menuPosition,i=t.menuOffsetX,o=t.menuOffsetY,s=t.tooltipOffsetX,l=t.tooltipOffsetY,c=t.featureSonicDnd,u=t.useGlobalNav;if(!c)return null;var d=a?"snooze-outline":"bell-o";var p=u?Qt.t("Notification preferences",{fallbackHash:"753a22b2eb617204efee4644795034b8ace1ee14"}):Qt.t("Notifications");return We.a.createElement(ft["e"],{renderMenu:this.renderMenu,position:r,offsetX:i,offsetY:o},We.a.createElement(vt["d"],{tip:p,position:"bottom",offsetX:s,offsetY:l},We.a.createElement(mt["a"],{className:ot()("p-dnd_button",n),"data-qa":"do_not_disturb_btn"},We.a.createElement(ht["b"],{type:d}))))}}]);return t}(He["PureComponent"]);Jt.displayName="DndButton";Jt.defaultProps=Yt;var Zt=function e(t){var a=Object(lt["getCurrentUserId"])(t);var n=Object(ut["getPrimaryView"])(t);return{inDnd:!!Object(ct["getDndByMemberId"])(t,a),currentChannel:Object(dt["f"])(t,n)||void 0,featureSonicDnd:Object(lt["isFeatureEnabled"])(t,"feature_sonic_dnd"),useGlobalNav:Object(pt["b"])(t)}};var Xt=Object(at["connect"])(Zt)(Jt);var $t=a(334);var ea=a(1159);Object($t["a"])({ToastContainer:Qe["a"],DndButton:Xt});Object(ea["a"])(a(2091));window.React=We.a;window.ReactDOM=ze.a;window.moment=Tt["a"]},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(3);var c=a.n(l);var u=a(2);var d=a.n(u);var p=a(262);var f=a(116);var m=a(374);var h=a(315);var v=a(279);var g=a(122);var b=a(19);var _=a(44);var y=a(21);var k=a(11);var O=a(602);var w=a(170);var E=a(69);var C=a(36);var j=a(12);var S=a(17);var I=a(269);var T=a(23);var N=a(206);var A=a(651);var R=a(1118);var M=a(873);var x=a(346);var P=a(167);var D=a(9);var F=a.n(D);var L=a(5);var B=a.n(L);var U=a(6);var q=a.n(U);var G=a(7);var H=a.n(G);var W=a(8);var V=a.n(W);var z=a(0);var Q=a.n(z);var K=a(15);var Y=a.n(K);var J=a(106);var Z=a.n(J);var X=a(72);var $=a(62);var ee=a(164);var te=a(444);var ae=a(218);var ne=a(29);var re=a(10);var ie=0;var oe=1;var se=2;function le(e,t,a,n,r,i,o,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!ve(r,i,ne["h"].PRQ_CHANNEL_SWITCH_USABLE))return;var u=void 0;var d=void 0;switch(n){case ie:default:u=ne["l"].COMPLETED;d=false;break;case oe:u=ne["l"].ABANDONED;d=true;break;case se:u=ne["l"].COMPLETED;d=true;break}var p=Object(te["b"])(1e3*e*1e3,0);var f=c()({elapsed_time:p,target_channel_id:a,required_sync:d,end_state:u},fe(o,t,s,l));var m={userId:s,teamId:r,enterpriseId:i,locale:Object(re["o"])()};Object(ee["a"])(m).track(ne["h"].PRQ_CHANNEL_SWITCH_USABLE,f)}function ce(e,t,a,n,r,i,o,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!ve(r,i,ne["h"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var u=void 0;var d=void 0;switch(n){case ie:default:u=ne["l"].COMPLETED;d=false;break;case oe:u=ne["l"].ABANDONED;d=true;break;case se:u=ne["l"].COMPLETED;d=false;break}var p=Object(te["b"])(1e3*e*1e3,0);var f=c()({elapsed_time:p,target_channel_id:a,required_sync:d,end_state:u},fe(o,t,s,l));var m={userId:s,teamId:r,enterpriseId:i,locale:Object(re["o"])()};Object(ee["a"])(m).track(ne["h"].PRQ_CHANNEL_SWITCH_VISIBLE,f)}function ue(e,t,a,n,r,i,o,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!ve(n,r,ne["h"].PRQ_TIME_TO_USABLE))return;var u=Object(te["b"])(1e3*e*1e3,0);var d=me(l);var p=c()({elapsed_time:u+d,desktop_elapsed_time:d,required_sync:a,end_state:s,start_type:ne["i"].COLD,target_type:ne["j"].CHANNEL},fe(i,t,o,l));var f={userId:o,teamId:n,enterpriseId:r,locale:Object(re["o"])()};Object(ee["a"])(f).track(ne["h"].PRQ_TIME_TO_USABLE,p)}function de(e,t,a,n,r,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!ve(n,r,ne["h"].PRQ_TIME_TO_VISIBLE))return;var l=Object(te["b"])(1e3*e*1e3,0);var u=me(s);var d=c()({elapsed_time:l+u,desktop_elapsed_time:u,required_sync:a,end_state:ne["l"].COMPLETED,start_type:ne["i"].COLD,target_type:ne["j"].CHANNEL},fe(i,t,o,s));var p={userId:o,teamId:n,enterpriseId:r,locale:Object(re["o"])()};Object(ee["a"])(p).track(ne["h"].PRQ_TIME_TO_VISIBLE,d)}function pe(e,t,a,n,r,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!ve(n,r,ne["h"].PRQ_SESSION_FRAME_STATS))return;var l=c()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:a},fe(i,void 0,o,s));var u={userId:o,teamId:n,enterpriseId:r,locale:Object(re["o"])()};Object(ee["a"])(u).track(ne["h"].PRQ_SESSION_FRAME_STATS,l)}function fe(e,t,a,n){var r="string"===typeof a&&a.startsWith("W");var i="undefined"!==typeof n&&null!==n&&n.stats&&n.stats.Id&&n.stats.Id.sessionId;var o={device:{id:"",make:navigator.platform,model:navigator.platform,os:i?"electron":"webapp",os_version:i?n.stats.Id.sessionId:""}};var s=void 0;if(t){o.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":s=ne["k"].APP_ICON;break;case"MSG_PANE":s=ne["k"].MSG_PANE;break;case"SIDE_BAR":s=ne["k"].SIDE_BAR;break;case"QUICK_SWITCH":s=ne["k"].QUICK_SWITCH;break;default:s=ne["k"].UNKNOWN;break}}var l=c()({contexts:o,session_id:e,time:Date.now(),app_id:"web",is_tablet:false,user_id:r?void 0:a,external_id:r?a:void 0},he(n));t&&(l.trigger=s);return l}function me(e){if("undefined"!==typeof e&&null!==e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0&&t.isInitialTeamBooted){var a=t["BOOT"];var n=t["PRELOAD_READY"];var r=e.stats.performance.calcHrTime(a,n);return r>0?1e6*r:0}}return 0}function he(e){if("undefined"!==typeof e&&null!==e&&e.app&&e.app.version){var t=e.app.version();var a=t.prerelease?" ("+t.prerelease+")":"";var n="string"===typeof t.prerelease?t.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&t.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production";var r=void 0;switch(n){case"alpha":case"electron3":r=ne["a"].ALPHA;break;case"beta":r=ne["a"].BETA;break;default:r=ne["a"].PRODUCTION;break}return{app_version:t.major+"."+t.minor+"."+t.patch+a,release_version:t.major+"."+t.minor+"."+t.patch,build_type:r}}return{app_version:"",release_version:"",build_type:ne["a"].PRODUCTION}}function ve(e,t,a){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(ae["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[ne["h"].PRQ_TIME_TO_USABLE,ne["h"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if([ne["h"].PRQ_TIME_TO_USABLE,ne["h"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if(a===ne["h"].PRQ_SESSION_FRAME_STATS)return Object(ae["a"])(10);return Object(ae["a"])(10)}var ge=a(828);var be=a(70);var _e=a(102);var ye=a(165);var ke=a(2086);var Oe=a(443);var we=a(1090);var Ee=a(113);var Ce=a(1427);var je={channelId:Q.a.string,channelType:Q.a.string,hasLimitedHistory:Q.a.bool,isShared:Q.a.bool,isSlackbotIm:Q.a.bool,isTeambotIm:Q.a.bool,newxpOnboardingStep:Q.a.string};var Se={channelId:null,channelType:null,hasLimitedHistory:false,isShared:false,isSlackbotIm:false,isTeambotIm:false,newxpOnboardingStep:null};var Ie=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.channelType,i=t.hasLimitedHistory,o=t.isShared,s=t.isSlackbotIm,l=t.isTeambotIm,c=t.newxpOnboardingStep;if(s){if(c&&c!==Wa.COMPLETE)return r.a.createElement(za,{step:c});return r.a.createElement(Ea,null)}if(l)return r.a.createElement(Aa,null);if(i)return r.a.createElement(ea,{channelId:a});if("channel"===n||"private"===n){if(o)return r.a.createElement(La,{channelId:a});return r.a.createElement(Ot,{channelId:a})}if("im"===n){if(o)return r.a.createElement(Qt,{channelId:a});return r.a.createElement(Lt,{channelId:a})}if("mpim"===n)return r.a.createElement(ba,{channelId:a});Object(S["b"])().warn('Unknown foreword type "'+n+'"');return null}}]);return t}(n["PureComponent"]);Ie.displayName="Foreword";Ie.defaultProps=Se;function Te(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return null;return{isShared:Object(j["isExternallySharedChannel"])(n),isSlackbotIm:Object(j["isSlackbot"])(n),isTeambotIm:Object(j["isTeambot"])(n,true),newxpOnboardingStep:Object(f["getNewxpOnboardingStep"])(e)}}var Ne=Object(i["connect"])(Te)(Ie);var Ae=a(26);var Re=a(171);var Me=a(16);var xe=a(316);var Pe=a(664);var De=a(151);var Fe=a(13);var Le=Object(Fe["c"])("TS.ui.purpose_dialog.start",d.a.noop);var Be=a(1423);var Ue=a(1003);var qe=a(677);var Ge=a(147);var He=a(18);var We=a(20);var Ve=new re["b"]("message_pane_foreword");var ze={onClick:Q.a.func};var Qe={onClick:d.a.noop};var Ke=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props.onClick;return r.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:t},r.a.createElement(He["a"],{type:"plus",inherit:true})," ",Ve.t("Add an app"))}}]);return t}(n["PureComponent"]);Ke.displayName="AppButton";Ke.defaultProps=Qe;var Ye=Ke;var Je=new re["b"]("message_pane_foreword");var Ze={isPrivate:Q.a.bool,onClick:Q.a.func};var Xe={isPrivate:false,onClick:d.a.noop};var $e=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props,a=t.isPrivate,n=t.onClick;var i=void 0;i=a?Je.t("Invite others to this private channel"):Je.t("Invite others to this channel");return r.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:n},r.a.createElement(He["a"],{type:"user",inherit:true})," ",i)}}]);return t}(n["PureComponent"]);$e.displayName="InviteButton";$e.defaultProps=Xe;var et=$e;var tt=new re["b"]("message_pane_foreword");var at={onClick:Q.a.func};var nt={onClick:d.a.noop};var rt=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=this.props.onClick;return r.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:t},r.a.createElement(He["a"],{type:"pencil",inherit:true})," ",tt.t("Set a purpose"))}}]);return t}(n["PureComponent"]);rt.displayName="PurposeButton";rt.defaultProps=nt;var it=rt;var ot={channelId:Q.a.string,purpose:Q.a.string,isUserRestricted:Q.a.bool,isUserUltraRestricted:Q.a.bool,isOrgShared:Q.a.bool,channelType:Q.a.string,clogger:Q.a.object.isRequired};var st={channelId:null,purpose:null,isUserRestricted:false,isUserUltraRestricted:false,isOrgShared:false,channelType:null};var lt=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(a);a.onInviteButtonClick=a.onInviteButtonClick.bind(a);a.onAppButtonClick=a.onAppButtonClick.bind(a);return a}q()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Le(t)}},{key:"onInviteButtonClick",value:function e(){var t=this.props.channelId;Object(Be["a"])(t)}},{key:"onAppButtonClick",value:function e(){var t;var a=this.props,n=a.channelId,r=a.clogger;var i=ne["h"].CHANNEL_FOREWORD;var o=(t={},F()(t,ne["n"].action,ne["m"].CLICK),F()(t,ne["n"].ui_element,ne["o"].BTN_ADD_APPS),t);r.track(i,{contexts:F()({},ne["b"].ui_context,o)});Object(qe["a"])()?Object(Ue["g"])(i,o):Object(Ge["g"])("/apps/new?channel="+n,"new")}},{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.isOrgShared,i=t.isUserRestricted,o=t.isUserUltraRestricted,s=t.purpose,l=t.channelType;var c=void 0;s||i||(c=r.a.createElement(it,{channelId:a,onClick:this.onPurposeButtonClick}));var u=void 0;n||i||(u=r.a.createElement(Ye,{onClick:this.onAppButtonClick}));var d=void 0;(!o||"channel"===l&&"private"===l)&&(d=r.a.createElement(et,{onClick:this.onInviteButtonClick,isPrivate:"private"===l}));return r.a.createElement("div",{className:"p-message_pane__foreword__buttons"},c,u,d)}}]);return t}(n["PureComponent"]);lt.displayName="ChannelForewordButtons";lt.defaultProps=st;function ct(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return{};var r=Object(Ae["getCurrentMember"])(e);var i=n.purpose?n.purpose.value:null;var o=Object(j["isOrgSharedPublicOrPrivateChannel"])(n);return{purpose:i,isUserRestricted:Object(Me["isRestricted"])(r),isUserUltraRestricted:Object(Me["isUltraRestricted"])(r),isOrgShared:o,channelType:Object(j["getChannelType"])(n),clogger:Object(ee["a"])({state:e})}}var ut=Object(i["connect"])(ct)(lt);var dt=a(87);var pt=new re["b"]("message_pane_foreword");var ft={channelId:Q.a.string,description:Q.a.node,purpose:Q.a.string,isUserRestricted:Q.a.bool};var mt={channelId:null,description:null,purpose:null,isUserRestricted:false};var ht=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(a);return a}q()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Le(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props.purpose;if(!t)return null;return r.a.createElement("span",null," ",pt.t("Purpose:")," ",r.a.createElement(dt["a"],{text:t}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,a=t.purpose,n=t.isUserRestricted;if(!a||n)return null;return r.a.createElement("span",{className:"no_wrap"}," ","(",r.a.createElement(We["a"],{type:"link",onClick:this.onPurposeButtonClick},pt.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return r.a.createElement("div",{className:"p-message_pane__foreword__description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(n["PureComponent"]);ht.displayName="ChannelForewordDescription";ht.defaultProps=mt;var vt=ht;var gt=new re["b"]("message_pane_foreword");var bt={channelId:Q.a.string,purpose:Q.a.string,creatorIsYou:Q.a.bool,createdById:Q.a.string,dateCreated:Q.a.number,isPrivate:Q.a.bool,isUserRestricted:Q.a.bool};var _t={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var yt=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"renderTitle",value:function e(){var t=this.props.channelId;var a={inherit:true,align:"baseline"};return r.a.createElement("h1",{className:"p-message_pane__foreword__title"},r.a.createElement(De["a"],{channelId:t,inline:true,iconProps:a}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,n=t.createdById,i=t.creatorIsYou,o=t.dateCreated,s=t.isPrivate,l=t.purpose,c=t.isUserRestricted;var u=void 0;if(o){u=Object(Re["h"])(o);u=Object(Re["d"])(o)||Object(Re["e"])(o)?u.toLowerCase():gt.t("on {date}",{date:u})}else u=gt.rt("on {date}",{date:r.a.createElement(xe["a"],{type:"unknown"})});var d={inherit:true,align:"baseline"};var p=r.a.createElement(De["a"],{channelId:a,inline:true,iconProps:d,className:"bold"});var f=void 0;if(i)f=s?gt.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:u,name:p}):gt.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:u,name:p});else{var m=n?r.a.createElement(Pe["a"],{id:n,showTooltip:true}):r.a.createElement(xe["a"],{type:"unknown"});f=s?gt.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:m,date:u,name:p}):gt.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:m,date:u,name:p})}return r.a.createElement(vt,{channelId:a,description:f,purpose:l,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.isPrivate;var i=Y()("p-message_pane__foreword",{"p-message_pane__foreword--private":n});return r.a.createElement("div",{className:i},this.renderTitle(),this.renderDescription(),r.a.createElement(ut,{channelId:a}))}}]);return t}(n["PureComponent"]);yt.displayName="ChannelForeword";yt.defaultProps=_t;function kt(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return{};var r=Object(Ae["getCurrentMember"])(e);var i=n.purpose?n.purpose.value:null;var o=Object(j["isPrivateChannel"])(n);return{purpose:i,creatorIsYou:r&&r.id===n.creator,createdById:n.creator,dateCreated:n.created,isPrivate:o,isUserRestricted:Object(Me["isRestricted"])(r)}}var Ot=Object(i["connect"])(kt)(yt);var wt=a(247);var Et=a(358);var Ct=a(754);var jt=new re["b"]("message_pane_foreword");var St={botName:Q.a.string,clogger:Q.a.object.isRequired};var It={botName:null};var Tt=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}q()(t,[{key:"onClick",value:function e(){Object(Ct["a"])("about");var t=this.props.clogger;t.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return r.a.createElement(We["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:this.onClick},r.a.createElement(He["a"],{type:"lightbulb-o",inherit:true})," ",jt.t("How does {name} work?",{name:Object(re["m"])(t)}))}}]);return t}(n["PureComponent"]);Tt.displayName="AppHelpButton";Tt.defaultProps=It;function Nt(e,t){var a=t.botId;var n=Object(Ae["getMemberById"])(e,a);var r=Object(ee["a"])({state:e});if(!n)return{clogger:r};var i=Object(Me["getMemberMentionName"])(n);return{botName:i,clogger:r}}var At=Object(i["connect"])(Nt)(Tt);var Rt=new re["b"]("message_pane_foreword");var Mt={isAppSpaceEnabled:Q.a.bool.isRequired,memberId:Q.a.string,type:Q.a.oneOf(["self","bot","member"]).isRequired};var xt={memberId:null};var Pt=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMemberClick=a.onMemberClick.bind(a);return a}q()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var a=this.props.memberId;Object(ye["h"])(a)}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return r.a.createElement("div",{className:"p-message_pane__foreword__avatars"},r.a.createElement(Et["a"],{id:t,size:"large",onClick:this.onMemberClick,showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.memberId,n=t.type;if("self"===n)return r.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},Rt.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var i=Rt.rt("This is the very beginning of your direct message history with {name}",{name:r.a.createElement(Pe["a"],{id:a,showTooltip:true})});return r.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},i)}},{key:"renderButtons",value:function e(){var t=this.props,a=t.isAppSpaceEnabled,n=t.memberId,i=t.type;if("bot"===i&&a)return r.a.createElement("div",{className:"p-message_pane__foreword__buttons"},r.a.createElement(At,{botId:n}));return null}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(n["PureComponent"]);Pt.displayName="BaseImForeword";Pt.defaultProps=xt;function Dt(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return{};var r=Object(Ae["getMemberById"])(e,Object(j["getMemberIdFromIm"])(n));var i=Object(k["getCurrentUserId"])(e);var o=void 0;o=Object(j["getMemberIdFromIm"])(n)===i?"self":Object(Me["isAppOrBot"])(r)?"bot":"member";return{isAppSpaceEnabled:Object(wt["isAppSpaceEnabled"])(e),memberId:Object(j["getMemberIdFromIm"])(n),type:o}}var Ft=Object(i["connect"])(Dt)(Pt);Ft.propTypes={channelId:Q.a.string};Ft.defaultProps={channelId:null};var Lt=Ft;var Bt=a(50);var Ut=a(48);var qt=a(481);var Gt=new re["b"]("message_pane_foreword");var Ht={memberId:Q.a.string,sharedTeam:Q.a.object};var Wt={memberId:void 0,sharedTeam:void 0};var Vt=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"renderAvatar",value:function e(){var t=this.props.memberId;return r.a.createElement("div",{className:"p-message_pane__foreword__avatars"},r.a.createElement(Et["a"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.sharedTeam,n=t.memberId;var i=!a||Object(Ut["isUnknown"])(a)?r.a.createElement(qt["a"],{type:"unknown"}):r.a.createElement("strong",null,Object(Ut["getTeamDisplayName"])(a));var o=Gt.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:r.a.createElement(Pe["a"],{id:n,showTooltip:true}),team:i});return r.a.createElement("div",{className:"p-message_pane__foreword__description"},o)}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]);return t}(n["PureComponent"]);Vt.displayName="ImSharedForeword";Vt.defaultProps=Wt;function zt(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return null;var r=Object(Ae["getMemberById"])(e,Object(j["getMemberIdFromIm"])(n));var i=Object(Me["getMemberTeamId"])(r);var o=Object(Bt["getTeamById"])(e,i);return{memberId:Object(j["getMemberIdFromIm"])(n),sharedTeam:o}}var Qt=Object(i["connect"])(zt)(Vt);var Kt=a(145);var Yt=new re["b"]("message_pane_foreword");var Jt={channelType:Q.a.string.isRequired,channelName:Q.a.string,clogger:Q.a.object.isRequired};var Zt={channelName:""};var Xt=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogLearnMoreClick=a.clogLearnMoreClick.bind(a);return a}q()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"clogLearnMoreClick",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}})}},{key:"render",value:function e(){var t=this.props,a=t.channelName,n=t.channelType;var i="";var o="";var s=void 0;"private"===n?s=a:"channel"===n&&(s="#"+a);if("mpim"===n||"im"===n){o=Yt.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");i=Yt.t("There\u2019s more to this conversation")}else{i=Yt.t("There\u2019s more to the conversation in {name}",{name:s});o=Yt.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}var l="/pricing?ui_step=42&ui_element="+this.getClogUiElementVal();return r.a.createElement("div",{className:"p-message_pane__limited_history_foreword","data-qa":"msg_lim_header"},r.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline"},r.a.createElement(Kt["b"],{text:":speech_balloon:",emojiSize:Kt["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",i),r.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading"},o),r.a.createElement(We["a"],{href:l,onClick:this.clogLearnMoreClick,target:"_blank","data-qa":"learn_more_btn",size:"small"},Yt.t("Learn More")))}}]);return t}(n["PureComponent"]);Xt.displayName="LimitedHistoryForeword";Xt.defaultProps=Zt;function $t(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return{};return{channelType:Object(j["getChannelType"])(n),channelName:Object(j["getDisplayName"])(n),clogger:Object(ee["a"])({state:e})}}var ea=Object(i["connect"])($t)(Xt);var ta=a(816);var aa=a(350);var na=a(173);var ra=a(1164);var ia=a(760);var oa=a(24);var sa=a.n(oa);var la=Object(p["createSelector"])(function(e,t){var a=t.channelId;return Object(b["getChannelById"])(e,a)},function(e){var t=Object(j["getSharedTeamIds"])(e)||[];var a=Object(j["getPendingSharedTeamIds"])(e)||[];return[].concat(sa()(t),sa()(a))});var ca=Object(p["createSelector"])(la,Bt["getAllTeams"],function(e,t){var a=Object(u["map"])(e,function(e){return t[e]});return Object(u["compact"])(a)});var ua=ca;var da=new re["b"]("message_pane_foreword");var pa={channelId:Q.a.string.isRequired,teamId:Q.a.string,memberIds:Q.a.arrayOf(Q.a.string),sharedTeams:Q.a.arrayOf(Q.a.object),notificationPermission:Q.a.string,notificationSetting:Q.a.oneOf(["everything","mentions_dms","nothing"]),featureReactMessages:Q.a.bool};var fa={teamId:void 0,memberIds:[],sharedTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:true};var ma=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openPrefsDialog=a.openPrefsDialog.bind(a);a.openChannelPrefsDialog=a.openChannelPrefsDialog.bind(a);a.state=Object(aa["g"])();return a}q()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(aa["g"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var a=this.state,n=a.notificationsEnabled,i=a.notificationDisabledType;if(n)return null;switch(i){case"not_yet_allowed":return da.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var a=e.key,n=e.text;return r.a.createElement(We["a"],{onClick:t.openPrefsDialog,key:a,type:"link"},n)});case"not_allowed":return da.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return da.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,a=e.text;return r.a.createElement("a",{target:"_blank",key:t,href:"/downloads"},a)});default:return null}}},{key:"openPrefsDialog",value:function e(){Object(ia["a"])("notifications")}},{key:"openChannelPrefsDialog",value:function e(){Object(ra["a"])(this.props.channelId)}},{key:"renderAvatars",value:function e(){var t=this.props.memberIds;var a=t.map(function(e){return r.a.createElement(na["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56})});return r.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}},{key:"renderTeamName",value:function e(t){if(Object(Ut["isUnknown"])(t))return r.a.createElement(qt["a"],{type:"unknown"});return Object(Ut["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.teamId,n=t.memberIds,i=t.sharedTeams,o=t.featureReactMessages;var s=Object(u["reject"])(i,{id:a});if(s.length&&o){var l=i.map(this.renderTeamName);var c=da.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(re["f"])(l,{noEscape:true,react:true,strong:true})});return r.a.createElement("div",{className:"p-message_pane__foreword__description"},c,this.renderDescriptionActions())}var d=n.map(function(e){return r.a.createElement(Pe["a"],{id:e,showTooltip:true})});var p=da.rt("This is the very beginning of your direct message history with {names}",{names:Object(re["f"])(d,{noEscape:true,react:true})});return r.a.createElement("div",{className:"p-message_pane__foreword__description"},p,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return r.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);if(!this.props.featureReactMessages)return null;var a=this.props.notificationSetting;if("everything"===a)return r.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},da.rt("You\u2019ll be notified for <strong>every new message</strong>.")," ",this.renderEditButton());if("mentions_dms"===a)return r.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},da.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return r.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},da.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){if(!this.props.featureReactMessages)return null;return r.a.createElement(We["a"],{onClick:this.openChannelPrefsDialog,type:"link"},da.rt("Edit"))}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(n["PureComponent"]);ma.displayName="BaseMpimForeword";ma.defaultProps=fa;var ha=Object(p["createSelector"])(function(e,t){var a=t.channelId;return Object(b["getChannelById"])(e,a)},k["getCurrentUserId"],function(e,t){var a=Object(j["getMemberIdsFromMpim"])(e);return Object(u["without"])(a,t)});function va(e,t){var a=t.channelId;return{teamId:Object(T["getTeamId"])(e),memberIds:ha(e,{channelId:a}),sharedTeams:ua(e,{channelId:a}),notificationPermission:Object(ta["getNotificationPermission"])(e),notificationSetting:Object(aa["c"])(e,a),featureReactMessages:Object(k["isFeatureEnabled"])(e,"feature_react_messages")}}var ga=Object(i["connect"])(va)(ma);ga.propTypes={channelId:Q.a.string};ga.defaultProps={channelId:null};var ba=ga;var _a=new re["b"]("message_pane_foreword");var ya="USLACKBOT";var ka=r.a.createElement("h1",{className:"p-message_pane__foreword__title"},_a.t("Hi, Slackbot here!"));var Oa=r.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},r.a.createElement(na["b"],{userId:ya,size:48,className:"p-message_pane__foreword__avatar"}),r.a.createElement("div",null,r.a.createElement("p",null,_a.rt("You can ask me simple questions about how Slack works, or just type a few keywords. For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.")),r.a.createElement("p",{className:"margin_0"},_a.rt("I\u2019m only a bot, but I\u2019ll do my best to answer! If I don\u2019t understand, I\u2019ll search the <a>Help Center</a>.",null,function(e){var t=e.key,a=e.text;return r.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)}))));var wa=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=Y()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return r.a.createElement("div",{className:t},ka,Oa)}}]);return t}(n["Component"]);wa.displayName="SlackbotForeword";var Ea=wa;var Ca=new re["b"]("message_pane_foreword");var ja={isUserRestricted:Q.a.bool,featureTeambot:Q.a.bool.isRequired};var Sa={isUserRestricted:false,featureTeambot:true};var Ia="UTEAMSBOT";var Ta=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=this.props,a=t.featureTeambot,n=t.isUserRestricted;var i=Y()("p-message_pane__foreword","p-message_pane__foreword--teambot");var o=r.a.createElement("h1",{className:"p-message_pane__foreword__title"},a?Ca.t("Hello, I\u2019m Teambot!"):"");var s=r.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},r.a.createElement(na["b"],{userId:Ia,size:48,className:"p-message_pane__foreword__avatar"}),r.a.createElement("div",null,r.a.createElement("p",null,a?Ca.rt("I can respond automatically to messages sent by you and your teammates in Slack. My custom responses (and the words that trigger them) are set by your team. There are a few places I\u2019ll respond when prompted: in your team\u2019s channels, in your direct messages to yourself, and here, in your direct messages with me."):""),r.a.createElement("p",null,a&&!n?Ca.rt("You can <a>learn more</a> on our Help Center or <c>see your team's custom responses</c>.",null,function(e){var t=e.key,a=e.text,n=e.tag;if("a"===n)return r.a.createElement("a",{href:"https://get.slack.help/hc/articles/360001724508",target:"_blank",key:t,rel:"noopener noreferrer"},a);if("c"===n)return r.a.createElement("a",{href:"/customize/responses",target:"_blank",key:t,rel:"noopener noreferrer"},a);return null}):""),r.a.createElement("p",null,a&&n?Ca.rt("You can <a>learn more</a> on our Help Center.",null,function(e){var t=e.key,a=e.text,n=e.tag;if("a"===n)return r.a.createElement("a",{href:"https://get.slack.help/hc/articles/360001724508",target:"_blank",key:t,rel:"noopener noreferrer"},a);return null}):"")));if(a)return r.a.createElement("div",{className:i},this.props.featureTeambot?o:"",this.props.featureTeambot?s:"");return null}}]);return t}(n["Component"]);Ta.displayName="TeambotForeword";Ta.defaultProps=Sa;var Na=function e(t){return{isUserRestricted:Object(Me["isRestricted"])(Object(Ae["getCurrentMember"])(t)),featureTeambot:Object(k["isFeatureEnabled"])(t,"feature_teambot")}};var Aa=Object(i["connect"])(Na)(Ta);var Ra=a(337);var Ma=new re["b"]("message_pane_foreword");var xa={channel:Q.a.object,channelId:Q.a.string,isPrivate:Q.a.bool,isPendingShared:Q.a.bool,currentTeam:Q.a.shape({id:Q.a.string.isRequired,name:Q.a.string.isRequired}),sharedTeams:Q.a.arrayOf(Q.a.shape({id:Q.a.string.isRequired,name:Q.a.string})),purpose:Q.a.string,isUserRestricted:Q.a.bool};var Pa={channel:null,channelId:null,isPrivate:false,isPendingShared:false,currentTeam:null,sharedTeams:[],purpose:null,isUserRestricted:false};var Da=function(e){V()(t,e);function t(){B()(this,t);var e=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderTeamName=e.renderTeamName.bind(e);return e}q()(t,[{key:"renderTitle",value:function e(){var t=this.props.channel;var a={inherit:true,align:"baseline"};return r.a.createElement("h1",{className:"p-message_pane__foreword__title"},r.a.createElement(De["a"],{channel:t,inline:true,iconProps:a}))}},{key:"renderAvatars",value:function e(){var t=this.props,a=t.sharedTeams,n=t.currentTeam,i=t.isPendingShared;if(d.a.isEmpty(a))return null;var o=d.a.uniqBy([n].concat(sa()(a)),"id");var s=o.map(function(e){var t=e.id;var a=n.id!==t&&i;return r.a.createElement(Ra["b"],{key:t,id:t,size:56,isPendingShared:a,className:"p-message_pane__foreword__avatar"})});return r.a.createElement("div",{className:"p-message_pane__foreword__avatars"},s)}},{key:"renderTeamName",value:function e(t){if(Object(Ut["isUnknown"])(t))return r.a.createElement(qt["a"],{type:"unknown"});return Object(Ut["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,n=t.purpose,i=t.currentTeam,o=t.sharedTeams,s=t.isPendingShared,l=t.isUserRestricted;var c=[i].concat(sa()(o));var u=c.map(this.renderTeamName);1===u.length&&u.push(r.a.createElement(qt["a"],{type:"unknown"}));var d=Object(re["f"])(u,{noEscape:true,react:true,strong:true});var p=s?Ma.rt("This is a shared channel. Waiting for {names} to join...",{names:d}):Ma.rt("This is a shared channel between {names}.",{names:d});return r.a.createElement(vt,{channelId:a,description:p,purpose:n,isUserRestricted:l})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.isPrivate;var i=Y()("p-message_pane__foreword",{"p-message_pane__foreword--private":n});return r.a.createElement("div",{className:i},this.renderAvatars(),this.renderTitle(),this.renderDescription(),r.a.createElement(ut,{channelId:a}))}}]);return t}(n["PureComponent"]);Da.displayName="SharedForeword";Da.defaultProps=Pa;function Fa(e,t){var a=t.channelId;var n=Object(b["getChannelById"])(e,a);if(!n)return null;var r=Object(Ae["getCurrentMember"])(e);var i=n.purpose?n.purpose.value:null;var o=Object(j["isPrivateChannel"])(n);var s=Object(j["isPendingExternallySharedChannel"])(n);var l=ua(e,{channelId:a});var c=Object(Bt["getTeamById"])(e,Object(T["getTeamId"])(e));return{currentTeam:c,channel:n,purpose:i,isPrivate:o,isPendingShared:s,sharedTeams:l,isUserRestricted:r.is_restricted}}var La=Object(i["connect"])(Fa)(Da);var Ba=a(65);var Ua=a(764);var qa=new re["b"]("newxp_onboarding");var Ga={step:Q.a.string};var Ha={step:null};var Wa={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var Va=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"renderHeaderAction",value:function e(){if(this.props.step===Wa.CANCELLED)return qa.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return r.a.createElement(Ba["a"],{key:t,onClick:Ua["b"]},a)});if(this.props.step===Wa.SLACKBOT)return qa.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return r.a.createElement(Ba["a"],{key:t,onClick:Ua["a"]},a)});return null}},{key:"renderFooter",value:function e(){if(this.props.step!==Wa.START)return null;return r.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},r.a.createElement(We["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:Ua["f"]},qa.rt("Explore Slack")),r.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},qa.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,a=e.text;return r.a.createElement(Ba["a"],{key:t,onClick:Ua["a"],"data-qa":"skip_tutorial"},a)})))}},{key:"render",value:function e(){var t=this.props.step;var a=Y()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t});return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},r.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_text"},qa.rt("Welcome!")),r.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},qa.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),r.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(n["PureComponent"]);Va.displayName="NewxpForeword";Va.defaultProps=Ha;var za=Va;var Qa=Ne;var Ka=new re["b"]("message_pane_foreword");var Ya={clogger:Q.a.object.isRequired};var Ja=35;var Za=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:Ja}}})}},{key:"render",value:function e(){var t="/pricing?ui_step=42&ui_element="+Ja;return r.a.createElement("div",{className:"p-message_pane__limited_history_alert"},r.a.createElement(Kt["b"],{text:":speech_balloon:",emojiSize:Kt["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",Ka.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",r.a.createElement("a",{href:t,target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},Ka.t("Learn More")))}}]);return t}(n["PureComponent"]);Za.displayName="LimitedHistoryAlert";var Xa=function e(t){return{clogger:Object(ee["a"])({state:t})}};var $a=Object(i["connect"])(Xa)(Za);var en=a(97);var tn=a.n(en);var an=a(673);var nn=a(783);function rn(e){var t={};for(var a=0;a<e.length;a++)t[e[a].key]={index:e[a].index,next:d.a.get(e[a+1],"key")};return t}var on=c()({},an["a"].propTypes,{stickyItems:Q.a.arrayOf(Q.a.shape({key:Q.a.string,index:Q.a.number})),stickyOffsetTop:Q.a.number,stickyZIndex:Q.a.number});var sn=c()({},an["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var ln=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.stickyItems=rn(e.stickyItems);return a}q()(t,[{key:"componentWillReceiveProps",value:function e(a){tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,a);this.stickyItems=rn(a.stickyItems)}},{key:"renderItem",value:function e(a,n){if(!(a in this.stickyItems))return tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,a,n);var i=0===n?-100:this.getTop(a);var o=this.layout.getHeight(a);var s=this.layout.getHeightValidity(a);var l=this.getContentHeight();var c=this.stickyItems[a].next;var u=c?this.getTop(c):l;var d=Math.max(0,l-u);var p=this.props.getAriaLabelForRow;var f=p&&p(n);return r.a.createElement("div",{key:""+a+i+d,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:i,bottom:d}},r.a.createElement(nn["a"],{id:a,height:o,validity:s,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},onHeightChange:this.setHeight,ariaLabel:f},this.props.rowRenderer(n)))}},{key:"renderItems",value:function e(){var a=tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var n=this.state.start;var r=d.a.sortedIndexBy(this.props.stickyItems,{index:n},function(e){return e.index})-1;var i=this.props.stickyItems[r];i&&a.unshift(this.renderItem(i.key,i.index));return a}}]);return t}(an["a"]);var cn=ln;ln.propTypes=on;ln.defaultProps=sn;var un=a(2230);var dn=new re["b"]("messages");var pn=20;var fn=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pendingUpdate=null;a.recomputeOffsets(e);a.overscan=Math.max(200,e.height/2);return a}q()(t,[{key:"componentDidUpdate",value:function e(){var a;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(a=tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(a,[this].concat(r));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(a){var n=a<this.getOffset();var r=a+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(n&&0!==this.state.start||r&&this.state.end!==this.props.keys.length){this.scrollTop=a;this.relayout()}tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,a-this.getOffset())}},{key:"scrollToOffset",value:function e(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.animate,i=n.absolute;if(!this.node)return;if(this.pendingUpdate)return;var o=i?a:a-this.getOffset();!i&&o<this.getLoadingOffsetTop()&&(o=0);var s=this.bracketScrollTop(o);if(!i&&s!==o){this.setScrollTop(a);return}if(r){this.scrollAnimation=this.node.scrollWithAnimation(s);return}tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,s)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var o=0===t&&r<=0;var s=a===n.keys.length&&r+n.height>=i;var l=!n.keys.length||i<=n.height||o;var c=!n.keys.length||i<=n.height||s;if(l&&c)return n.loadAround();if(l)return n.loadPre();if(c)return n.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,a){if(a.isLoading)return null;var n=e.start,r=e.end;var i=t.startKey;var o=t.endKey;t.recomputeOffsets(a,n,r);var s=t.node?t.node.scrollTop():0;var l=t.getScrollTop();var u=s-1<=0||l-1<=t.getOffset();var d=s+1>=t.getContentHeight()-a.height||l+1>=t.endBottom-a.height;var p={start:n,end:r};if(t.startKey!==i||t.endKey!==o||u&&0!==n||d&&r!==a.keys.length){e.scrolling&&(t.overscan=8e3);p=t.computeBounds(a,l);var f=p,m=f.start,h=f.end;t.recomputeOffsets(a,m,h);u=l-1<=t.getOffset();d=l+a.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(u&&0===p.start||d&&p.end===a.keys.length||t.layout.getTotalHeight()<a.height&&0===p.start)&&t.loadMore(n,r,a);var v=t.layout.getTops();if(p.start===n&&p.end===r&&v===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=l;return c()({},p,{tops:v})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var r=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[a];this.endKey=t.keys[n-1];this.startTop=r?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var n=arguments[1];var r=n-this.overscan;var i=n+a.height+this.overscan;var o=tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,r,i);return this.snapBounds(a,o)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments[1];var n=a.start,r=a.end;return{start:n<pn?0:n,end:t.keys.length-r<pn?t.keys.length:r}}},{key:"renderLoading",value:function e(t){if(!this.props.featureReactMessages)return null;var a=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var n=t?"degradedLoadingTop":"degradedLoadingBottom";return r.a.createElement("div",{key:n,className:"p-degraded_list__loading",style:a},dn.rt("Loading history..."))}},{key:"renderItems",value:function e(){var a=tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var n=this.props.keys.length>1&&(!this.props.reachedStart||this.state.start>0);var r=this.props.keys.length>1&&(!this.props.reachedEnd||this.state.end<this.props.keys.length);return[n&&this.renderLoading(true)].concat(sa()(a),[r&&this.renderLoading(false)])}}]);return t}(cn);var mn=fn;var hn=a(884);var vn=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));d.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(a.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return a}q()(t,[{key:"layout",value:function e(){tn()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var a=this.containerHeight-this.totalHeight;this.tops=d.a.mapValues(this.tops,function(e){return e+a});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[d.a.first(this.keys)]=0)}}]);return t}(hn["a"]);var gn=vn;var bn=a(874);var _n=a(1171);var yn=_n["a"];var kn=a(756);var On=a(217);var wn=a(63);var En=a(76);var Cn=new re["b"]("messages");var jn={ghost:Q.a.bool};var Sn={ghost:false};function In(e){var t=e.ghost;return r.a.createElement("div",{className:Y()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},r.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),r.a.createElement("span",{className:"c-message_list__unread_divider__label"},Cn.t("new messages")))}In.displayName="UnreadDivider";In.defaultProps=Sn;var Tn=Object(En["pure"])(In);var Nn=a(32);var An=a.n(Nn);var Rn=a(359);var Mn={date:Q.a.number.isRequired,isUnread:Q.a.bool,ghost:Q.a.bool};var xn={isUnread:false,ghost:false};function Pn(e){var t=e.isUnread,a=An()(e,["isUnread"]);var n=t?r.a.createElement(Tn,{ghost:a.ghost}):r.a.createElement("hr",{className:"c-message_list__day_divider__line"});return r.a.createElement("div",{className:"c-message_list__day_divider"},n)}Pn.displayName="DayDivider";Pn.defaultProps=xn;function Dn(e){var t=e.date,a=e.sticky;var n=t/1e3;var i=Object(Rn["a"])(n,"{day_divider_pretty}");var o=Y()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!a});return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},i))}Dn.displayName="DayDividerLabel";Dn.defaultProps={sticky:true};var Fn=Object(En["pure"])(Pn);var Ln=Object(En["pure"])(Dn);var Bn=function(e){V()(t,e);function t(){B()(this,t);var e=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isVisible:true};e.onMouseMove=e.onMouseMove.bind(e);return e}q()(t,[{key:"onMouseMove",value:function e(){this.setState(function(){return{isVisible:false}})}},{key:"render",value:function e(){var t=r.a.createElement("div",{className:"c-message_list__focus_indicator",onMouseMove:this.onMouseMove});return this.state.isVisible?t:null}}]);return t}(n["PureComponent"]);Bn.displayName="FocusIndicator";var Un=Bn;var qn=a(2232);var Gn={},Hn=Gn.getBootedWorkspaces;var Wn=cn;var Vn=mn;var zn={channelId:Q.a.string,timestamps:Q.a.arrayOf(Q.a.string),requestHistory:Q.a.func,lastReadTs:Q.a.string,isGhostLastRead:Q.a.bool,startTs:Q.a.string,startTsOffset:Q.a.number,highlightTs:Q.a.string,rollups:Q.a.objectOf(X["a"].Rollup()),setUnreadPoint:Q.a.func,isLoading:Q.a.bool,isLoadingOlder:Q.a.bool,reachedStart:Q.a.bool,reachedEnd:Q.a.bool,prevReachedEnd:Q.a.bool,oldest:Q.a.string,latest:Q.a.string,onScroll:Q.a.func,onVisibleRowsChanged:Q.a.func,doneHighlighting:Q.a.func,isLimited:Q.a.bool,isSlackbotIm:Q.a.bool,isTeambotIm:Q.a.bool,useStickyDayDividers:Q.a.bool,shouldIgnoreScrollKeys:Q.a.func,shouldIgnoreArrowKeys:Q.a.func,channelSessionId:Q.a.string,theme:Q.a.string,firstUnreadTs:Q.a.string,featureReactMessages:Q.a.bool,featureTinyspeck:Q.a.bool,featureJumpToUnreadShortcut:Q.a.bool,featureAriaApplicationMode:Q.a.bool,messageContainerType:Q.a.string,ariaLabel:Q.a.string.isRequired,teamId:Q.a.string,enterpriseId:Q.a.string,sessionId:Q.a.string,msgTriggers:Q.a.object,currentUserId:Q.a.string,jumpToTimestamp:Q.a.func,makeMessageSummary:Q.a.func,isScreenReaderEnabled:Q.a.bool,windowLastFocusEvent:Q.a.number,onFocusEnter:Q.a.func,onFocusLeave:Q.a.func};var Qn={channelId:null,timestamps:[],requestHistory:d.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,rollups:null,setUnreadPoint:d.a.noop,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:d.a.noop,onVisibleRowsChanged:d.a.noop,doneHighlighting:d.a.noop,isLimited:false,isSlackbotIm:false,isTeambotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureJumpToUnreadShortcut:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:d.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:d.a.noop,onFocusLeave:d.a.noop};var Kn=80;var Yn=60;var Jn=21;var Zn=64;var Xn=120;var $n="MESSAGE-LIST";var er={ABOVE:1,VISIBLE:2,BELOW:3};var tr="0000000000.000001";var ar=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=rr();a.state={degraded:n,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false,hasKeyboardFocus:false};a.DEFAULT_ROW_HEIGHT="light"===e.theme?Kn:Yn;a.STICKY_EPSILON=a.DEFAULT_ROW_HEIGHT/2;a.ANCHOR_OFFSET=n?Xn:Zn;a.heightCache=new bn["a"]({DEFAULT_HEIGHT:a.DEFAULT_ROW_HEIGHT});a.layout=new gn({heightCache:a.heightCache,stickToBottom:e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:a.isFirstRowLimitedHistoryForeword.bind(a),STICKY_EPSILON:a.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:a.ANCHOR_OFFSET});a.keys=[];a.rows=[];a.visibleRows=[];a.unreadIndex=null;a.list=null;a.useAnchor=true;a.useScroll=false;a.width=0;a.hasRenderedOneMessage=false;a.requestAround=a.requestAround.bind(a);a.requestOlder=a.requestOlder.bind(a);a.requestNewer=a.requestNewer.bind(a);a.renderRow=a.renderRow.bind(a);a.setListRef=a.setListRef.bind(a);a.getAriaLabelForRow=a.getAriaLabelForRow.bind(a);a.onScroll=a.onScroll.bind(a);a.onListScrolled=a.onListScrolled.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.debouncedOnListScrolled=Object(we["a"])(a.onListScrolled,150);a.shouldFocusNextItem=a.shouldFocusNextItem.bind(a);a.onSelectionChange=a.onSelectionChange.bind(a);a.onJumpToUnreadShortcut=a.onJumpToUnreadShortcut.bind(a);a.onPageUp=a.onPageUp.bind(a);a.onPageDown=a.onPageDown.bind(a);a.onHome=a.onHome.bind(a);a.onEnd=a.onEnd.bind(a);a.scrollToOffset=d.a.throttle(a.scrollToOffset.bind(a),200);a.unfurlLinkCache=new kn["a"];a.messagesRendered={};a.loadingHistoriesSeen=0;a.loadingHistoriesSeenHighEnd=0;a.loadingHistoriesPerHowManyMessages=84;a.loadingHistoriesPerHowManyMessagesHighEnd=500;a.scrollMetricsGatheringEnabled=Object(ae["a"])(1)||a.props.featureTinyspeck;if(a.scrollMetricsGatheringEnabled){a.debounceBatchMessagesSeen=d.a.debounce(function(){Object($["h"])("modern_history_load_seen_per_84_messages",a.loadingHistoriesSeen,{allow_zero:true});a.loadingHistoriesSeen=0},1e3);a.debounceBatchMessagesSeenHighEnd=d.a.debounce(function(){Object($["h"])("modern_history_load_seen_per_500_messages",a.loadingHistoriesSeenHighEnd,{allow_zero:true});a.loadingHistoriesSeenHighEnd=0},1e3)}a.debounceCountHistoryLoadSeen=d.a.debounce(function(){a.loadingHistoriesSeen+=1;a.loadingHistoriesSeenHighEnd+=1},1e3);a.prqMetrics={channelSwitch:{}};return a}q()(t,[{key:"componentDidMount",value:function e(){this.trackFirstMessagePaint()}},{key:"componentDidUpdate",value:function e(t){this.trackFirstMessagePaint();if(this.useScroll&&this.list){this.list.scrollToKey(this.useScroll,{lazy:this.lazyScroll});this.useScroll=false}this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t)}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var a=false;this.trackChannelSwitchWithSync(ce,a)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var n=true;this.trackChannelSwitchWithSync(le,n)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){le(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);ce(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}var a="start_channel_change_"+this.props.channelId;var n=Object($["f"])("channel_change_react_msgs",a,null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:n,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:ie,hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,a){var n="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;t(Object($["f"])("channel_change_not_stored",n,null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,se,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);if(a){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"trackFirstMessagePaint",value:function e(){if(!d.a.get(window,"performance.timing.fetchStart"))return;var t=this.props.timestamps.length>0&&false===this.hasRenderedOneMessage;if(t&&Object(wn["a"])()){var a=Object(s["b"])();var n=Hn(a.getState());t=1===n.length}if(t){this.hasRenderedOneMessage=true;Object(S["a"])({teamId:this.props.teamId}).info("PERF","First meaningful paint: "+(Date.now()-window.performance.timing.fetchStart)+"ms")}}},{key:"getTimestampForStartTs",value:function e(){var t=this.props,a=t.startTs,n=t.timestamps;if(!n.length)return false;if(!a)return null;return d.a.find(n,function(e){return e>=a})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var a=this.props,n=a.lastReadTs,r=a.jumpToTimestamp,i=a.isScreenReaderEnabled;var o=t&&"keydown"===t.type&&(i||this.state.hasKeyboardFocus);var s=d.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(o){this.focusFirstUnreadMsgAfterUpdate=true;if(s){this.forceUpdate();return}r({ts:n});return}if(s){this.list.scrollToKey(s);return}r({ts:n})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var a=this.layout.getTotalHeight();var n=this.height;return t+n>=Math.floor(a)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return er.ABOVE;if(!this.list)return er.ABOVE;var t=this.list.getVisibleRange(),a=t.start,n=t.end;if(this.unreadIndex<a)return er.ABOVE;if(this.unreadIndex<n)return er.VISIBLE;return er.BELOW}},{key:"getVisibleRows",value:function e(){if(!this.list)return[];var t=this.list.getVisibleRange(),a=t.start,n=t.end;var r=this.rows.slice(a,n);return r}},{key:"getScrollmarkForFocusedItem",value:function e(t){var a=t===tr?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(a)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;this.previouslyActiveItem=null;if(t)return this.getScrollmarkForFocusedItem(t);var a=this.list.getScrollTop();if(this.layout.shouldStickToBottom(a))return null;var n=this.props.timestamps;var r=this.layout.findAnchor(n,n,a+this.ANCHOR_OFFSET);var i=this.layout.getTop(r)-a;return{mark:r,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"shouldFocusNextItem",value:function e(t){var a=this.rows[t.index];return a&&("message"===a.type||"foreword"===a.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows();if(d.a.isEqual(t,this.visibleRows))return;this.visibleRows=t;this.props.onVisibleRowsChanged(t)}},{key:"onPageUp",value:function e(){var t=!this.state.hasKeyboardFocus;this.scrollToOffset(this.list.getScrollTop()-(this.height-Jn),{animate:t})}},{key:"onPageDown",value:function e(){var t=!this.state.hasKeyboardFocus;this.scrollToOffset(this.list.getScrollTop()+(this.height-Jn),{animate:t})}},{key:"onHome",value:function e(){this.scrollToOffset(0,{absolute:true})}},{key:"onEnd",value:function e(){this.props.reachedEnd?this.scrollToOffset(Infinity,{absolute:true}):this.props.jumpToTimestamp({ts:null})}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!this.props.featureJumpToUnreadShortcut)return;if(!On["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){a.props.onFocusEnter(t)})}},{key:"onFocusLeave",value:function e(t){var a=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=t.activeItem);this.setState(function(){return{hasKeyboardFocus:false}},function(){a.props.onFocusLeave(t)})}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,a=t.isLimited,n=t.isSlackbotIm;return a&&n}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,a=t.isLimited,n=t.isSlackbotIm;return a&&!n}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=d.a.first(this.rows);return t&&"foreword"===t.type}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(S["a"])({teamId:this.props.teamId}).info($n,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+d.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var a=this.props,n=a.oldest,r=a.latest,i=a.timestamps,o=a.startTs;if(d.a.isEmpty(i)&&!o)return this.props.requestHistory({});var s=n||i&&d.a.first(i)||o;var l=r||i&&d.a.last(i)||o;var c=this.props.requestHistory({latest:s,oldest:l});if(c){this.prqMetrics.channelSwitch.fetchHistoryState!==se&&(this.prqMetrics.channelSwitch.fetchHistoryState=oe);c.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=se});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return c}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,n=a.oldest,r=a.timestamps,i=a.startTs;var o=n||r&&d.a.first(r)||i;var s=this.props.requestHistory({latest:o});if(s){this.prqMetrics.channelSwitch.fetchHistoryState!==se&&(this.prqMetrics.channelSwitch.fetchHistoryState=oe);s.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=se});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return s}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,n=a.latest,r=a.timestamps,i=a.startTs;var o=n||r&&d.a.last(r)||i;var s=this.props.requestHistory({oldest:o});if(s){this.prqMetrics.channelSwitch.fetchHistoryState!==se&&(this.prqMetrics.channelSwitch.fetchHistoryState=oe);s.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=se});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return s}},{key:"renderMessage",value:function e(t,a){var n=a.hasFocus,i=a.isHovered;var o=t.ts,s=t.previousMessageTs;var l=d.a.last(this.props.timestamps);var c=o&&o===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var u=d.a.keys(this.messagesRendered).length;u%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();u%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}var p=r.a.createElement(yn,{ts:o,key:o,channelId:this.props.channelId,previousMessageTs:s,isLast:o===l,rollup:this.props.rollups[o],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:c,doneHighlighting:this.props.doneHighlighting,unfurlLinkCache:this.unfurlLinkCache,channelSessionId:this.props.channelSessionId,isHovered:i,messageContainerType:this.props.messageContainerType,renderActions:i||n,hasFocus:n,renderActionsOffscreen:this.state.hasKeyboardFocus});if(n)return[p,r.a.createElement(Un,{key:"message-list-focus-indicator"})];return p}},{key:"renderForeword",value:function e(t){var a=t.hasFocus;var n=r.a.createElement(Qa,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()});if(a)return[n,r.a.createElement(Un,{key:"message-list-focus-indicator"})];return n}},{key:"renderRow",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.hasFocus,i=a.isHovered;var o=this.rows[t];if(!o||!o.type)return null;switch(o.type){case"message":return this.renderMessage(o,{hasFocus:n,isHovered:i});case"dayDividerLabel":return r.a.createElement(Ln,{key:o.day,date:o.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return r.a.createElement(Fn,{key:o.day,date:o.day,isUnread:o.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return r.a.createElement(Tn,{key:"unread",ghost:this.props.isGhostLastRead});case"loading":this.debounceCountHistoryLoadSeen();return r.a.createElement("div",{key:"loading",className:Y()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme)});case"loadingSpinner":return r.a.createElement("div",{className:"c-message_list__spinner"},r.a.createElement(He["a"],{type:"spinner",animation:"spin"}));case"foreword":return this.renderForeword({hasFocus:n});case"limited_history":return r.a.createElement($a,null);default:return null}}},{key:"getAriaLabelForRow",value:function e(t){var a=this.rows[t];if(!a||!a.type)return;if("message"!==a.type)return;var n=a.ts,r=a.previousMessageTs,i=a.isFirstMsgForDay,o=a.isLastMsgForDay,s=a.isFirstUnreadMsg,l=a.day;var c=this.props,u=c.channelId,d=c.makeMessageSummary;var p=this.props.rollups[n];if(d)return d({channelId:u,ts:n,isFirstUnreadMsg:s,isFirstMsgForDay:i,isLastMsgForDay:o,previousMessageTs:r,day:l,rollup:p,hasFocus:this.state.hasKeyboardFocus})}},{key:"componentWillReceiveProps",value:function e(t){var a=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(S["a"])({teamId:a.props.teamId}).info($n,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+d.a.size(t.timestamps));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var n=t.startTs;var r=this.props.timestamps;var i=t.timestamps;if(d.a.inRange(n,d.a.floor(d.a.first(r)),d.a.ceil(d.a.last(r)))&&t.channelId===this.props.channelId){var o=d.a.findLast(i,function(e){return e<=t.startTs});this.useScroll=o;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.unfurlLinkCache=new kn["a"];this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(S["a"])({teamId:this.props.teamId}).info($n,"Switching channels: "+t.channelId+" timestamps: "+d.a.size(t.timestamps))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"render",value:function e(){var t=this;var a=d.a.groupBy(this.props.timestamps,function(e){var t=Object(Ee["a"])(e);var a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return a.getTime()});var n=d.a.keys(a).sort();var i=[];var o=[];var s=[];var l=this.getTimestampForStartTs();var c=this.props.firstUnreadTs;var u=l;if(this.props.reachedStart){o.push(tr);i.push({type:"foreword",ts:tr});if(this.shouldShowLimitedHistoryAlert()){o.push("limited_history");i.push({type:"limited_history"})}}this.unreadIndex=null;var p=d.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;d.a.forEach(n,function(e,r){var l=parseInt(e,10);var f=a[e];var m=e+"."+t.props.channelId;var h=p&&d.a.first(f)===c;if(h){t.unreadIndex=i.length;t.props.startTs===t.props.lastReadTs&&(u=m)}i.push({type:"dayDividerLabel",day:l,showDayDividerAsUnread:h});t.props.useStickyDayDividers&&s.push({key:m,index:o.length});o.push(m);if(r>0||t.props.reachedStart||t.state.degraded){i.push({type:"dayDivider",day:l,showDayDividerAsUnread:h});o.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===r&&t.state.isLoadingOlder){o.push("loading");i.push({type:"loading"})}var v=void 0;d.a.forEach(f,function(e,a){if(p&&0!==a&&e===c){t.unreadIndex=i.length;var s="unreadDivider";o.push(s);i.push({type:"unread"});t.props.startTs===t.props.lastReadTs&&(u=c)}var d=0===r&&t.props.reachedStart;var m=r===n.length-1&&t.props.reachedEnd;var h=0===a&&(r>0||t.props.reachedStart);var g=a===f.length-1&&(r<n.length-1||t.props.reachedEnd);var b=c===e;i.push({type:"message",ts:e,previousMessageTs:v,isFirstMsgForDay:h,isLastMsgForDay:g,isFirstUnreadMsg:b,day:{ts:l,isFirstDay:d,isLastDay:m}});o.push(e);v=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){o.push("loadingSpinner");i.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&u,this.useAnchor&&this.props.startTsOffset);this.keys=o;this.rows=i;var f={firstVisibleUnreadTs:c,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:d.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,isTeambotIm:this.props.isTeambotIm,useStickyDayDividers:this.props.useStickyDayDividers};var m=this.state.degraded?Vn:Wn;var h=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut}];var v=function(){if(t.focusFirstUnreadMsgAfterUpdate&&c){t.focusFirstUnreadMsgAfterUpdate=false;return c}return}();var g=function(){if(t.state.isLoading)return m.FIRST_ITEM_IN_VIEW;var e=i[i.length-1];var a=e&&e.type;var n=t.props.startTs===tr||false===l&&"foreword"===a;if(n)return tr;if(null===l&&"message"===a)return e.ts;if(c)return c;if(l)return l;return m.FIRST_ITEM_IN_VIEW}();return r.a.createElement(ke["a"],null,function(e){var a=e.width,n=e.height;if(0===a||0===n)return null;if(a!==t.width){t.heightCache.invalidate();t.width=a}t.height=n;return r.a.createElement(m,{ref:t.setListRef,className:"c-message_list",ariaLabel:t.props.ariaLabel,height:n,width:a,keys:o,rowRenderer:t.renderRow,getAriaLabelForRow:t.getAriaLabelForRow,layout:t.layout,itemToFocus:v,stickyItems:s,stickyOffsetTop:-21,stickyZIndex:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onPageUp:t.onPageUp,onPageDown:t.onPageDown,onHome:t.onHome,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,keyCommands:h,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,shouldFocusNextItem:t.shouldFocusNextItem,unrelatedUpdateProps:f,featureReactMessages:t.props.featureReactMessages,initialActiveItem:g,useAriaApplicationMode:t.props.featureAriaApplicationMode})})}}]);return t}(Oe["a"]);ar.displayName="MessageList";ar.propTypes=zn;ar.defaultProps=Qn;var nr=Object(Ce["a"])(ar);function rr(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}var ir=nr;var or=a(1391);var sr=or["a"];var lr=a(1441);var cr=a(663);var ur=a(1415);var dr=a(178);var pr=a(2075);var fr=new re["b"]("messages");var mr={firstTimestamp:Q.a.string.isRequired,lastTimestamp:Q.a.string.isRequired,jumpToRecent:Q.a.func.isRequired};var hr={};var vr=function(e){V()(t,e);function t(){B()(this,t);return H()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}q()(t,[{key:"render",value:function e(){var t=Object(dr["a"])(this.props.firstTimestamp,{shortenMonth:true});var a=Object(dr["a"])(this.props.lastTimestamp,{shortenMonth:true});return r.a.createElement("div",{className:"p-archives_banner"},r.a.createElement("span",{className:"p-archives_banner__date_range"},fr.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:a})),r.a.createElement("button",{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent},fr.t("Jump to recent messages"),r.a.createElement(He["a"],{type:"arrow_down"})))}}]);return t}(n["PureComponent"]);vr.displayName="ArchivesBanner";var gr=vr;vr.defaultProps=hr;var br=a(1419);var _r=a(41);var yr=a(144);var kr=a(656);var Or=a(85);var wr=a(27);var Er=new re["b"]("messages");var Cr=3e3;var jr=100;var Sr={hasUnreads:Q.a.bool.isRequired,displayCount:Q.a.number,since:Q.a.oneOfType([Q.a.string,Q.a.number]),known:Q.a.bool,do24hrTime:Q.a.bool,channelId:Q.a.string,ghost:Q.a.bool,unreadPlacement:Q.a.oneOf(Object(u["values"])(er)),jumpToUnread:Q.a.func,markMostRecentMsgRead:Q.a.func,featureJumpToUnreadShortcut:Q.a.bool};var Ir={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:er.VISIBLE,jumpToUnread:u["noop"],markMostRecentMsgRead:u["noop"],featureJumpToUnreadShortcut:false};var Tr=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.startFade=a.startFade.bind(a);a.onAnimationTick=a.onAnimationTick.bind(a);a.onAnimationEnd=a.onAnimationEnd.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.jumpOrMark=a.jumpOrMark.bind(a);a.markAsRead=a.markAsRead.bind(a);a.animation=null;a.delay=null;a.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return a}q()(t,[{key:"componentWillReceiveProps",value:function e(t){clearTimeout(this.delay);if(this.state.hasUnreads&&!t.hasUnreads){if(t.ghost){this.delay=setTimeout(this.startFade,Cr);return}this.startFade();return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.delay);this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function e(t){var a=t.value,n=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:a}});n()}},{key:"onAnimationEnd",value:function e(){this.setState(function(){return{hasUnreads:false,opacity:1}})}},{key:"onKeyDown",value:function e(t){var a=[Or["c"],Or["j"]];Object(u["includes"])(a,t.keyCode)&&this.jumpOrMark(t)}},{key:"startFade",value:function e(){this.animation=Object(kr["a"])({fromValue:1,toValue:0,duration:jr,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(S["b"])().action("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:be["MARKED_REASONS"].CLICKED});clearTimeout(this.delay);this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===er.VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpLabel",value:function e(){if(!this.props.featureJumpToUnreadShortcut)return Er.t("Jump");if(!Object(On["a"])())return Er.t("Jump");var t=Object(wr["isMac"])()?Er.t("Cmd"):Er.t("Ctrl");return Er.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:t},function(e){var t=e.text,a=e.key;return r.a.createElement("span",{key:a,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function e(){if(!this.props.featureJumpToUnreadShortcut)return;if(!Object(On["a"])())return;var t=Object(wr["isMac"])()?Er.t("Cmd"):Er.t("Ctrl");return Er.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===er.VISIBLE)return null;var a=t===er.ABOVE?"arrow_up":"arrow_down";var n=this.makeJumpLabel();var i=this.makeJumpAriaLabel();return r.a.createElement(We["c"],{ariaLabel:i,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},r.a.createElement(He["a"],{type:a,className:"p-message_pane__unread_banner__jump__arrow"}),n)}},{key:"renderClose",value:function e(){var t=Y()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==er.VISIBLE});return r.a.createElement(_r["d"],{tip:Er.t("Mark as read (esc)"),position:"bottom-right"},r.a.createElement(We["c"],{className:t,onClick:this.markAsRead,ariaLabel:Er.t("Mark as read")},r.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},Er.t("Mark as read")),r.a.createElement(He["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function e(){var t=this.state,a=t.hasUnreads,n=t.since,i=t.displayCount;var o=this.props,s=o.do24hrTime,l=o.known;if(!a||!n)return null;var c=Math.floor(parseFloat(n));if(!c)return null;var u=Object(dr["a"])(c,{excludeYear:true});var d=Object(yr["a"])(c,{do24hrTime:s});var p=l?"":"+";var f=i;!l&&f>10&&(f=10*Math.floor(f/10));var m=Er.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:p,count:f,time:d,date:u});f&&(1!==f||l)||(m=Er.t("New messages since {time} on {date}",{time:d,date:u}));return r.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},r.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),r.a.createElement(We["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},m)),this.renderClose())}}]);return t}(n["PureComponent"]);Tr.displayName="UnreadBanner";Tr.defaultProps=Ir;var Nr=function e(t,a){var n=a.since;if("0000000000.000000"===n){var r=Object(b["getChannelById"])(t,a.channelId);n=r.created}return{do24hrTime:Object(y["getUserPref"])(t,"time24"),since:n}};var Ar=Object(i["connect"])(Nr)(Tr);var Rr=a(278);var Mr=new re["b"]("messages");var xr={displayModelOrViewById:Q.a.func.isRequired,isHighlightsBackButtonVisible:Q.a.bool};var Pr={isHighlightsBackButtonVisible:false};var Dr=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.backToBriefings=a.backToBriefings.bind(a);return a}q()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return r.a.createElement(We["a"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},r.a.createElement(He["a"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),Mr.t("Back to my highlights"))}}]);return t}(n["PureComponent"]);Dr.displayName="BriefingsBackButton";Dr.defaultProps=Pr;var Fr=function e(t){return{isHighlightsBackButtonVisible:Object(f["isHighlightsBackButtonVisible"])(t)}};var Lr=function e(t){return{displayModelOrViewById:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.id;return t(Object(Rr["a"])({id:n}))}}};var Br=Object(i["connect"])(Fr,Lr)(Dr);var Ur={channelId:Q.a.string,channelDisplayName:Q.a.string,type:Q.a.oneOf(["channel","private","im","mpim"]),theme:Q.a.oneOf(["light","dense"]),timestamps:Q.a.arrayOf(Q.a.string),reachedStart:Q.a.bool,reachedEnd:Q.a.bool,prevReachedEnd:Q.a.bool,oldest:Q.a.string,latest:Q.a.string,fetchHistory:Q.a.func,fetchSliHighlights:Q.a.func,onMount:Q.a.func,lastReadTs:Q.a.string,isGhostLastRead:Q.a.bool,unreadCount:Q.a.number,unreadCountKnown:Q.a.bool,startTs:Q.a.string,startTsOffset:Q.a.number,highlightTs:Q.a.string,highlightLazy:Q.a.bool,rollups:Q.a.objectOf(X["a"].Rollup()),isLoading:Q.a.bool,isLoadingOlder:Q.a.bool,setUnreadPoint:Q.a.func,markMostRecentMsgRead:Q.a.func,setUnreadLineVisibility:Q.a.func,clearHighlightTs:Q.a.func,jumpToTimestamp:Q.a.func,saveScrollmark:Q.a.func,isArchived:Q.a.bool,isLimited:Q.a.bool,isSlackbotIm:Q.a.bool,overlayVisible:Q.a.bool,channelSessionId:Q.a.string,prevChannelSwitchTs:Q.a.string,newxpOnboardingStep:Q.a.string,firstUnreadTs:Q.a.string,featureReactMessages:Q.a.bool,featureTinyspeck:Q.a.bool,featureModernizeBanners:Q.a.bool,featureJumpToUnreadShortcut:Q.a.bool,useGlobalNav:Q.a.bool,featureAriaApplicationMode:Q.a.bool,teamId:Q.a.string,enterpriseId:Q.a.string,sessionId:Q.a.string,msgTriggers:Q.a.object,hasMessagePaneUnmounted:Q.a.bool,setMessagePaneHasUnmounted:Q.a.func,currentUserId:Q.a.string,isAppSpaceOpen:Q.a.bool,isShared:Q.a.bool,isOrgShared:Q.a.bool,isYou:Q.a.bool,isMuted:Q.a.bool,hasUnreads:Q.a.bool,hasDraft:Q.a.bool,badgeCount:Q.a.number,screenReaderOverride:Q.a.bool,windowLastBlurEvent:Q.a.number,windowLastFocusEvent:Q.a.number,makeMessageSummary:Q.a.func,isScreenReaderEnabled:Q.a.bool};var qr={channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:d.a.noop,fetchSliHighlights:d.a.noop,onMount:d.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:d.a.noop,markMostRecentMsgRead:d.a.noop,setUnreadLineVisibility:d.a.noop,clearHighlightTs:d.a.noop,jumpToTimestamp:d.a.noop,saveScrollmark:d.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureModernizeBanners:false,featureJumpToUnreadShortcut:false,useGlobalNav:false,featureAriaApplicationMode:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:d.a.noop,currentUserId:null,isAppSpaceOpen:false,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false};var Gr=function(e){V()(t,e);function t(e){B()(this,t);var a=H()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.list=null;a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onVisibleRowsChanged=a.onVisibleRowsChanged.bind(a);a.setListRef=a.setListRef.bind(a);a.shouldIgnoreScrollKeys=a.shouldIgnoreScrollKeys.bind(a);a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(a);a.requestHistory=a.requestHistory.bind(a);a.jumpToMostRecent=a.jumpToMostRecent.bind(a);a.jumpToUnread=a.jumpToUnread.bind(a);a.state={showingArchiveBanner:false,unreadPlacement:er.VISIBLE};a.historyRequests={};a.prqMetrics={usableVisible:{}};a.sendSessionFrameStats=a.sendSessionFrameStats.bind(a);a.recordSessionFrameStats=a.recordSessionFrameStats.bind(a);return a}q()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.onMount();var a=!!this.props.timestamps.length;var n=!!(this.props.unreadCount||this.props.unreadCountKnown);a&&n&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:d.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function e(t){var a=this;var n=this.props.channelId;this.setState(function(e){var n=a.getUnreadLinePlacement();if(!t.isLoading&&!d.a.isEmpty(t.timestamps)){var r=false===t.reachedEnd&&!t.prevReachedEnd;if(r!==e.showingArchiveBanner)return c()({},e,{unreadPlacement:n,showingArchiveBanner:r})}if(e.unreadPlacement!==n)return c()({},e,{unreadPlacement:n});return e});if(n&&t.channelId!==n){var r=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:n,scrollmark:r});this.historyRequests={};this.recordAndTrackTimeToUsable(ne["l"].ABANDONED)}var i=this.props.timestamps.length!==t.timestamps.length;var o=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!o||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:d.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs})}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(ne["l"].COMPLETED)}},{key:"componentWillUnmount",value:function e(){this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true)}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onVisibleRowsChanged",value:function e(){if(!this.list)return;var t=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:t}});var a=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(a)}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return er.VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var t=Object($["f"])("prq_time_to_visible","navigationStart",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.usableVisible=F()({},this.props.channelId,t);de(t,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);this.props.setMessagePaneHasUnmounted(true)}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var a=Object($["f"])("prq_time_to_usable","navigationStart",null,{return_unprocessed:true}).unprocessed;ue(a,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t,window.desktop);this.prqMetrics.usableVisible={}}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);ve(this.props.teamId,this.props.enterpriseId,ne["h"].PRQ_SESSION_FRAME_STATS)&&Object(ge["g"])()}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(ge["e"])())return;Object(ge["i"])();var t=Object(ge["a"])();if(0===t.durationMs)return;pe(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}},{key:"shouldIgnoreScrollKeys",value:function e(t){var a=t.target;var n=a===document.body;var r=this.hasFocus;var i=Object(ye["e"])();return!(n||r||i)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var a=t.target;var n=document.querySelector(".client_channels_list_container");var r=document.getElementById("col_flex");var i=n&&n.contains(a);var o=r&&r.contains(a);return!Object(ye["f"])()||o||i||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,a=t.isGhostLastRead,n=t.unreadCount,r=t.reachedEnd,i=t.isLoading;if(i)return false;if(!a&&this.list.getUnreadLinePlacement()===er.VISIBLE)return true;if(!n&&r&&this.list.isAtBottom())return true;return false}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var a=t?t.message:"";var n=t?t.stack:"";var r=Object(S["a"])({teamId:this.props.teamId});r.error("MessagePane componentDidCatch: "+a);n&&r.error(n)}},{key:"requestHistory",value:function e(t){var a=t.oldest,n=t.latest;var r=this.props,i=r.channelId,o=r.type,s=r.reachedStart,l=r.reachedEnd;if(s&&l)return false;var c=a;var u=n;if(u&&s){if(!c)return false;u=null}if(c&&l){if(!u)return false;c=null}if(this.shouldPreventHistoryRequest({oldest:a,latest:n})){Object(_e["a"])({channelId:i,latestTs:u,oldestTs:c},"message_pane_request_rate_limited");return false}var d="message-pane/requestHistory";var p=this.props.fetchHistory({channelId:i,type:o,oldest:c,latest:u,reason:d});p&&this.logHistoryRequest({oldest:c,latest:u});return p}},{key:"logHistoryRequest",value:function e(t){var a=t.oldest,n=t.latest,r=t.now,i=void 0===r?Date.now():r;var o=a+"_"+n;var s=this.historyRequests[o];if(!s){s={count:0,time:0};this.historyRequests[o]=s}if(i-1e4>s.time){s.count=1;s.time=i}else s.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var a=t.oldest,n=t.latest,r=t.now,i=void 0===r?Date.now():r;var o=this.historyRequests[a+"_"+n];if(!o)return false;if(o.count<=3)return false;if(o.time<i-1e4)return false;return true}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props.timestamps;if(d.a.isEmpty(t))return null;return r.a.createElement(gr,{firstTimestamp:d.a.first(t),lastTimestamp:d.a.last(t),jumpToRecent:this.jumpToMostRecent})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,a=t.unreadCount,n=t.unreadCountKnown,i=t.lastReadTs,o=t.channelId,s=t.isGhostLastRead,l=t.markMostRecentMsgRead,c=t.timestamps,u=t.reachedEnd,d=t.newxpOnboardingStep,p=t.overlayVisible,f=t.isArchived,m=t.featureJumpToUnreadShortcut;if(p)return null;if(d&&d!==Wa.CANCELLED&&d!==Wa.COMPLETE)return null;if(f)return null;var h=c.length&&u?c.filter(function(e){return e>i}).length:a;return r.a.createElement(Ar,{channelId:o,hasUnreads:a>0,displayCount:h,known:n,since:i,ghost:s,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:l,featureJumpToUnreadShortcut:m})}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,a=t.newxpOnboardingStep,n=t.overlayVisible;if(!this.props.featureModernizeBanners)return null;if(n)return null;if(a)return null;return r.a.createElement(sr,null)}},{key:"render",value:function e(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Wa.START)return r.a.createElement(za,{step:this.props.newxpOnboardingStep});if(!this.props.channelId)return null;var t=Z.a.msie||Z.a.msedge;var a=!this.props.overlayVisible&&!t;var n=Y()("p-message_pane",{"p-message_pane--ie":t,"p-message_pane--global-nav":this.props.useGlobalNav});var i=this.props,o=i.type,s=i.channelDisplayName,l=i.isShared,c=i.isOrgShared,u=i.isYou,d=i.isMuted,p=i.hasUnreads,f=i.hasDraft,m=i.isArchived,h=i.unreadCount,v=i.badgeCount;var g=Object(ur["a"])({type:o,displayName:s,isShared:l,isOrgShared:c,isYou:u,isMuted:d,hasUnreads:p,hasDraft:f,isArchived:m,unreadCount:h,badgeCount:v,isSelected:false,userActive:false,isTyping:false});return r.a.createElement(lr["a"],{component:this,order:1},r.a.createElement("div",{className:n,"data-qa":"message_pane"},r.a.createElement("div",{className:"p-message_pane__top_banners"},r.a.createElement(Br,null),r.a.createElement(br["a"],null),this.renderUnreadBanner()),this.renderMessagePaneBannerContainer(),r.a.createElement(ir,{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:g,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:a,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:be["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureJumpToUnreadShortcut:this.props.featureJumpToUnreadShortcut,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave}),this.renderArchivesBanner()))}}]);return t}(n["PureComponent"]);Gr.displayName="MessagePane";Gr.defaultProps=qr;var Hr=Object(cr["a"])(Gr,{updateStore:function e(t){var a=t.instance,n=t.dispatch;var r=a.list&&a.list.getScrollmark();n(r?Object(f["jumpToTimestamp"])({ts:r.mark,offset:r.offset}):Object(f["jumpToTimestamp"])({ts:null}))}});var Wr=a(1435);var Vr=Object(p["createSelectorCreator"])(p["defaultMemoize"],I["a"]);var zr=20;var Qr=Vr([g["getPotentiallyOutdatedTimestamps"],_["getMessagesByChannelId"],function(e,t,a){return a}],function(e,t,a){var n=e.timestamps,r=e.start,i=e.end,o=e.reachedStart,s=e.reachedEnd,l=e.prevReachedEnd;if(!s&&!l&&n&&n.length-d.a.sortedLastIndex(n,a)<zr)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var c=d()(n).map(function(e){return t[e]}).reject(C["isHidden"]).value();var u=Object(Wr["a"])(c),p=u.rollups,f=u.messages;return{messages:f,timestamps:d.a.map(f,function(e){return e.ts}),rollups:p,reachedStart:o,reachedEnd:s,prevReachedEnd:l,oldest:r,latest:i}});function Kr(e){var t=e.state,a=e.channelId,n=e.timestamps,r=e.rollups,i=e.lastReadTs;return d.a.find(n,function(e){var n=Object(_["getMessageByTimestamp"])(t,a,e);var o=Object(k["getCurrentUserId"])(t);if(!n)return false;if(r[e]){var s=d.a.values(r[e]);var l=d.a.map(s,"ts");var c=d.a.map(l,function(e){return Object(_["getMessageByTimestamp"])(t,a,e)});return d.a.some(c,function(e){return Object(C["isMessageUnread"])(e,i,o)})}return Object(C["isMessageUnread"])(n,i,o)})}var Yr=function e(t){var a=Object(E["getPrimaryView"])(t);var n=Object(b["getChannelById"])(t,a);var r=Object(k["isFeatureEnabled"])(t,"feature_react_messages");var i=Object(k["isFeatureEnabled"])(t,"feature_tinyspeck");var o=Object(k["isFeatureEnabled"])(t,"feature_modernize_banners");var s=Object(k["isFeatureEnabled"])(t,"feature_jump_to_unread_shortcut");var l=Object(P["b"])(t);var c=Object(k["isFeatureEnabled"])(t,"feature_aria_application_mode");var u=Object(k["getCurrentUserId"])(t);var p=Object(T["getTeamId"])(t);var h=Object(w["getEnterpriseId"])(t);var v=Object(f["getChannelSessionId"])(t);var _=Object(O["getChannelTriggers"])(t);var C=Object(f["getHasMessagePaneUnmounted"])(t);var S=Object(N["getWindowLastBlurEvent"])(t);var I=Object(N["getWindowLastFocusEvent"])(t);if(!n)return{featureReactMessages:r,featureTinyspeck:i,featureModernizeBanners:o,currentUserId:u,teamId:p,enterpriseId:h,sessionId:v,msgTriggers:_,hasMessagePaneUnmounted:C,windowLastBlurEvent:S,windowLastFocusEvent:I};var R=Object(g["getLoading"])(t,a);var M=Object(g["getLoadingOlder"])(t,a);var x=Object(j["getLastReadTs"])(n);var D=false;var F=Object(f["getGhostLastRead"])(t);if(F&&F!==x){x=F;D=true}var L=Object(f["getMessagePaneStartTs"])(t);var B=Object(f["getMessagePaneStartTsOffset"])(t);var U=Object(f["getMessagePaneHighlightTs"])(t);var q=Object(f["getMessagePaneHighlightLazy"])(t);var G=Object(j["getUnreadCount"])(n);var H=Object(g["getTimestampsByChannelId"])(t,a,x);var W=H&&H.reachedEnd;var V=Object(f["getChannelSessionId"])(t);var z=Object(f["getPrevChannelSwitchTs"])(t);var Q=Object(y["getUserMessagesTheme"])(t);var K=Qr(t,a,L),Y=K.timestamps,J=K.rollups,Z=K.reachedStart,X=K.reachedEnd,$=K.prevReachedEnd,ee=K.oldest,te=K.latest;(Object(j["isPublicChannel"])(n)&&!Object(j["isMemberOfChannel"])(n)||Object(j["isArchived"])(n))&&(x=d.a.last(Y));var ae=Kr({state:t,channelId:a,timestamps:Y,rollups:J,lastReadTs:x});var ne=Object(A["isScreenReaderEnabled"])(t);return{channelId:a,type:Object(j["getChannelType"])(n),channelDisplayName:Object(j["getDisplayName"])(n),timestamps:Y,reachedStart:Z,reachedEnd:X,prevReachedEnd:$,oldest:ee,latest:te,lastReadTs:x,isGhostLastRead:D,unreadCount:G,unreadCountKnown:W,startTs:L,startTsOffset:B,highlightTs:U,highlightLazy:q,rollups:J,isAppSpaceOpen:Object(f["isAppSpaceOpen"])(t),isArchived:Object(j["isArchived"])(n),isLoading:R,isLoadingOlder:M,isLimited:Object(g["getIsLimited"])(t,a),isSlackbotIm:Object(j["isSlackbot"])(n),overlayVisible:Object(f["isOverlayVisible"])(t),channelSessionId:V,prevChannelSwitchTs:z,theme:Q,newxpOnboardingStep:Object(f["getNewxpOnboardingStep"])(t),firstUnreadTs:ae,featureReactMessages:r,featureTinyspeck:i,featureModernizeBanners:o,featureJumpToUnreadShortcut:s,useGlobalNav:l,featureAriaApplicationMode:c,teamId:p,enterpriseId:h,sessionId:v,msgTriggers:_,hasMessagePaneUnmounted:C,windowLastBlurEvent:S,windowLastFocusEvent:I,currentUserId:u,badgeCount:Object(b["getBadgeCount"])(t,n),isShared:Object(j["isExternallySharedChannel"])(n),isOrgShared:Object(j["isOrgShared"])(n),isYou:Object(j["isYou"])(t,n),isMuted:Object(m["isChannelMutedById"])(t,a),hasUnreads:!!Object(j["getUnreadCount"])(n),hasDraft:Object(j["getHasDraft"])(t,a),isScreenReaderEnabled:ne}};function Jr(e){return function(t,a){var n=Object(f["isUnreadLineVisible"])(a());if(n!==e){Object(S["a"])({getState:a}).info("CHECK-UNREADS","unreadLineVisible updated: "+n+" -> "+e);t(Object(f["setUnreadLineVisibility"])(e))}}}function Zr(e){var t=e.channelId,a=e.ts,n=e.isFirstUnreadMsg,r=e.isFirstMsgForDay,i=e.isLastMsgForDay,o=e.previousMessageTs,s=e.day,l=e.rollup,u=e.hasFocus;return function(e,d){var p=d();var f=Object(A["isScreenReaderEnabled"])(p);var m=Object(x["getMessageEditData"])(p,{channelId:t,ts:a}),h=m.isEditing;if(h)return;if(!(f||u))return;var v=Object(M["a"])(p,{channelId:t,ts:a,previousMessageTs:o,rollup:l});return Object(R["a"])(c()({},v,{isFirstUnreadMsg:n,isFirstMsgForDay:r,isLastMsgForDay:i,day:s}))}}var Xr={fetchHistory:f["fetchHistory"],fetchSliHighlights:v["fetchSliHighlights"],setUnreadPoint:b["setUnreadPoint"],markMostRecentMsgRead:b["markMostRecentMsgRead"],setUnreadLineVisibility:Jr,clearHighlightTs:f["clearHighlightTs"],jumpToTimestamp:f["jumpToTimestamp"],saveScrollmark:f["maybeSaveScrollmark"],onMount:h["ensureFresh"],setMessagePaneHasUnmounted:f["setMessagePaneHasUnmounted"],makeMessageSummary:Zr};var $r=Object(i["connect"])(Yr,Xr)(Hr);var ei=$r;var ti=function e(t,a){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(o["a"])(r.a.createElement(i["Provider"],{store:Object(s["d"])(t)},r.a.createElement(ei,null)),a)};var ai=ti;var ni=a(51);Object(ni["a"])("interop.mountMessagePane",ai)},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(3);var d=a.n(u);var p=a(5);var f=a.n(p);var m=a(6);var h=a.n(m);var v=a(7);var g=a.n(v);var b=a(8);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(2);var w=a.n(O);var E=a(11);var C=a(77);var j=a(23);var S=a(170);var I=a(21);var T=a(17);var N=a(19);var A=a(26);var R=a(50);var M=a(803);var x=a(12);var P=a(135);var D=a(270);var F=a(48);var L=a(10);var B=a(357);var U=a(164);var q=a(13);var G=Object(q["c"])("TS.ui.channel_options_dialog.promiseToGetWhoCanPostListData",function(){return false});var H=Object(q["c"])("TS.ui.team_picker.createFilterFunction",function(){return function(){return Promise.resolve({items:[]})}});var W=Object(q["c"])("TS.permissions.members.canDisconnectSharedChannels",function(){return false});var V=Object(q["c"])("TS.ui.im_browser.showRequestToDisconnectSharedChannelModal",function(){return false});var z=a(761);var Q=a(1174);var K=a(944);var Y=a(851);var J=a(227);var Z=a(88);var X=a(213);var $=a(15);var ee=a.n($);var te=a(18);var ae=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(x["getDisplayName"])(a);var i=null;if(Object(x["isPublicChannel"])(a)||Object(x["isPrivateChannel"])(a)){var o=ee()({"c-icon--align-hashmark":!Object(x["isPrivateChannel"])(a)});i=r.a.createElement(te["a"],{className:o,inherit:true,align:"baseline",type:Object(x["isPrivateChannel"])(a)?"lock":"channel"})}var s=null;Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?s=r.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(x["isPendingExternallySharedChannel"])(a)?s=r.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(x["isSharedPublicOrPrivateChannel"])(a)&&(s=r.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels"}));return r.a.createElement("span",{key:t},i,n,s)};ae.displayName="formatChannelName";var ne=ae;var re=new L["b"]("channel_options");var ie={channel:k.a.object.isRequired};var oe={};var se=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.channel;return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("p",null,re.t("Archiving is useful if you don\u2019t think you\u2019ll need this channel any longer. Here\u2019s what will happen when you archive this channel:")),r.a.createElement("ul",null,r.a.createElement("li",null,re.t("No one will be able to send messages to it")),r.a.createElement("li",null,re.t("Apps installed in this channel will be disabled")),r.a.createElement("li",null,re.t("A message will be posted that you archived the channel"))),r.a.createElement("p",null,re.t("Messages from archived channels will still show up in search and archives, the same way they do today. You can always un-archive an archived channel later, if you need it again.")),r.a.createElement("p",null,re.rt("Are you sure you want to archive <strong>{channel}</strong>?",{channel:Object(x["getDisplayName"])(t)},function(e){var a=e.key;return ne(a,t)})))}}]);return t}(n["PureComponent"]);se.displayName="ArchiveChannel";se.defaultProps=oe;var le=se;var ce=a(676);function ue(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return 80;return 21}function de(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:21;var r=!t.trim();var i=Object(ce["a"])(t)>n;var o=/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(t.trim());var s=/^[-|_]+$/.test(t);var l=/[A-Z]/.test(t);var c=false;if(t!==a&&e){var u=Object(N["getChannelByName"])(e,t)||Object(A["memberExistsWithName"])(e,t);c=!!u}return{hasNameRequiredWarning:r,hasMaxLengthWarning:i,hasSpecialsWarning:o,hasPunctuationWarning:s,hasLowercaseWarning:l,hasNameTakenWarning:c}}var pe=a(92);var fe=a(349);var me=a(2174);var he=new L["b"]("channel_options");var ve=new L["b"]("ui_validation");var ge={teamId:k.a.string.isRequired,additionalVerificationError:k.a.oneOfType([k.a.string,k.a.object]),additionalVerificationGood:k.a.bool,channel:k.a.object.isRequired,nameNeedsChecking:k.a.bool,id:k.a.string.isRequired,isCheckingAdditionalVerification:k.a.bool,placeholder:k.a.string,onInvalid:k.a.func,onValid:k.a.func,shouldFix:k.a.bool,value:k.a.string.isRequired,workspaceName:k.a.string,featureLongerChannelNames:k.a.bool};var be={additionalVerificationError:"",additionalVerificationGood:false,nameNeedsChecking:false,isCheckingAdditionalVerification:false,placeholder:"",onInvalid:O["noop"],onValid:O["noop"],shouldFix:false,value:"",workspaceName:"",featureLongerChannelNames:false};var _e=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.renderWarning=a.renderWarning.bind(a);a.state={showInvalidCharactersWarning:false,showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:a.props.value};return a}h()(t,[{key:"componentDidMount",value:function e(){this.props.nameNeedsChecking&&this.onChange(this.props.value)}},{key:"onChange",value:function e(t){var a=t;var n=this.props,r=n.nameNeedsChecking,i=n.onInvalid,o=n.onValid,s=n.shouldFix,l=n.teamId,u=n.featureLongerChannelNames;s&&(a=this.fixName(a));var d=Object(c["c"])(l);var p=de(d,a,this.props.value,ue(u)),f=p.hasNameRequiredWarning,m=p.hasMaxLengthWarning,h=p.hasSpecialsWarning,v=p.hasPunctuationWarning,g=p.hasLowercaseWarning,b=p.hasNameTakenWarning;if(a===this.props.value&&!r){i({value:a});this.setState(function(){return{showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:a}});return}g||m||f||b||v||h?i({value:a}):o({value:a});this.setState(function(){return{showLowercaseWarning:g,showMaxLengthWarning:m,showNameRequiredWarning:f,showNameTakenWarning:b,showPunctuationWarning:v,showSpecialsWarning:h,value:a}})}},{key:"fixName",value:function e(t){var a=t.toLowerCase().replace(/^#+/,"");a=a.replace(/^\s+/,"");a=a.replace(/\s+$/,"");a=a.replace(/\s/g,"-");var n=this.state.showInvalidCharactersWarning;n=!(!a||a===t);this.setState(function(){return{showInvalidCharactersWarning:n}});return a}},{key:"maybeRenderAdditionalValidationMarks",value:function e(){var t=this.props,a=t.additionalVerificationGood,n=t.isCheckingAdditionalVerification;var i=this.state,o=i.showLowercaseWarning,s=i.showMaxLengthWarning,l=i.showNameRequiredWarning,c=i.showNameTakenWarning,u=i.showPunctuationWarning,d=i.showSpecialsWarning;if(o||s||l||c||u||d)return null;if(n)return r.a.createElement("span",{className:"p-channel_name_input--validating"},r.a.createElement(pe["a"],{size:"large",className:"inline_block"}));if(a)return r.a.createElement("span",{"data-qa":"channel_name_input_validation",className:"p-channel_name_input--validating sk_seafoam_green"},he.t("Available"),r.a.createElement(te["a"],{align:"baseline",type:"check_circle_o_large"}));return null}},{key:"maybeRenderAdditionalVerificationWarning",value:function e(){var t=this.props.additionalVerificationError;if(!t.length)return null;return this.renderWarning(t)}},{key:"renderRules",value:function e(){var t=this.props,a=t.channel,n=t.workspaceName;var r=false;if(Object(x["isExternallySharedChannel"])(a))return this.renderWarning(he.t("Names should be lowercase, with no spaces. Changes will only be visible to {workspaceName}.",{workspaceName:Object(L["m"])(n)}),r);return this.renderWarning(he.t("Names should be lowercase, with no spaces."),r)}},{key:"renderNameTakenWarning",value:function e(){return this.renderWarning(ve.t("{name} is already taken by a channel, username, or user group.",{name:this.state.value}))}},{key:"renderInvalidCharactersWarning",value:function e(){return this.renderWarning(he.t("You entered some disallowed characters in the name, which we\u2019ve fixed. Make sure it looks good to you, and try again!"))}},{key:"renderLowercaseWarning",value:function e(){return this.renderWarning(ve.t("Channel names must be all lowercase. Try again?"))}},{key:"renderMaxLengthWarning",value:function e(t){return this.renderWarning(ve.t("Blerg, that\u2019s a bit too long! Channel names must be fewer than {maxlength} characters.",{maxlength:t+1}))}},{key:"renderRequiredWarning",value:function e(){return this.renderWarning(ve.t("Don\u2019t forget to name your channel."))}},{key:"renderPunctuationWarning",value:function e(){return this.renderWarning(ve.t("Names can\u2019t consist solely of punctuation. Please elaborate!"))}},{key:"renderSpecialsWarning",value:function e(){return this.renderWarning(ve.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"))}},{key:"renderWarning",value:function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=r.a.createElement("span",{className:"flex_none small_right_margin"},r.a.createElement(te["a"],{type:"warning"}));var i=ee()("p-channel_name_input--input_note",{"p-channel_name_input--alert":a});return r.a.createElement("span",{className:i},a&&n,r.a.createElement("span",{className:"flex_one"},t))}},{key:"render",value:function e(){var t=this.props,a=t.additionalVerificationError,n=t.id,i=t.placeholder,o=t.featureLongerChannelNames;var s=this.state,l=s.showInvalidCharactersWarning,c=s.showLowercaseWarning,u=s.showMaxLengthWarning,d=s.showNameRequiredWarning,p=s.showNameTakenWarning,f=s.showPunctuationWarning,m=s.showSpecialsWarning,h=s.value;var v=l||c||u||d||p||f||m;a&&a.length&&(v=true);var g=ee()("c-input_text","p-channel_name_input--input",{"p-channel_name_input--input_with_warning":v});return r.a.createElement("div",{className:"position_relative"},r.a.createElement(fe["b"],{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:g,id:n,name:"channel_name_input",onChange:this.onChange,placeholder:i,value:h}),this.maybeRenderAdditionalValidationMarks(),r.a.createElement("div",{"data-qa":"channel_name_input_warnings",className:"p-channel_name_input--warnings"},l&&this.renderInvalidCharactersWarning(),c&&this.renderLowercaseWarning(),u&&this.renderMaxLengthWarning(ue(o)),d&&this.renderRequiredWarning(),p&&this.renderNameTakenWarning(),f&&this.renderPunctuationWarning(),m&&this.renderSpecialsWarning(),this.maybeRenderAdditionalVerificationWarning()),this.renderRules())}}]);return t}(n["PureComponent"]);_e.displayName="ChannelNameInput";_e.defaultProps=be;var ye=_e;function ke(e){return{workspaceName:Object(F["getTeamDisplayName"])(Object(R["getCurrentTeam"])(e)),teamId:Object(j["getTeamId"])(e),featureLongerChannelNames:Object(E["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var Oe=Object(s["connect"])(ke)(_e);var we=Oe;var Ee=a(1407);var Ce=new L["b"]("channel_options");var je={additionalVerificationError:k.a.oneOfType([k.a.string,k.a.object]),additionalVerificationGood:k.a.bool,isCheckingAdditionalVerification:k.a.bool,channel:k.a.object.isRequired,currentTeam:k.a.object,orgName:k.a.string,onInvalidName:k.a.func,onValidName:k.a.func};var Se={additionalVerificationError:"",additionalVerificationGood:false,isCheckingAdditionalVerification:false,currentTeam:{},orgName:"",onInvalidName:O["noop"],onValidName:O["noop"]};function Ie(e){var t=Object(x["getDisplayName"])(e.channel);"#"===t[0]&&(t=t.substr(1));var a=e.additionalVerificationError,n=e.additionalVerificationGood,i=e.isCheckingAdditionalVerification,o=e.channel,s=e.currentTeam,l=e.orgName,c=e.onInvalidName,u=e.onValidName;return r.a.createElement("div",{className:"top_margin p-channel-options--content_text"},r.a.createElement("p",null,Ce.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:Object(x["getDisplayName"])(o),orgName:l,teamName:Object(F["getTeamDisplayName"])(s)},function(e){var t=e.key,a=e.tag,n=e.text;if("strong"===a)return r.a.createElement("strong",{key:t+"-1"},ne(t,o));return r.a.createElement("strong",{key:t},n)})),r.a.createElement("label",{htmlFor:"channel_rename",className:"c-label"},r.a.createElement("span",{className:"c-label__text"},Ce.t("Channel name"))),r.a.createElement(we,{additionalVerificationError:a,additionalVerificationGood:n,channel:o,id:"channel_rename",isCheckingAdditionalVerification:i,onInvalid:c,onValid:u,placeholder:Ce.t("Rename {title}",{title:Object(x["getDisplayName"])(o)}),shouldFix:true,value:t}))}Ie.displayName="ChannelNameConflict";Ie.defaultProps=Se;function Te(e){return{currentTeam:Object(R["getCurrentTeam"])(e),orgName:Object(S["getEnterpriseOrgName"])(e)}}var Ne=Object(s["connect"])(Te)(Ie);var Ae=a(20);var Re=a(372);var Me=a(430);var xe=a(657);var Pe=a(454);var De=a(693);var Fe=a(143);var Le=a(242);var Be=a(1405);var Ue=new L["b"]("channel_options");var qe={channel:k.a.object.isRequired,maxLength:k.a.number,purpose:k.a.oneOfType([k.a.string,k.a.object]),purposeCreator:k.a.object,purposeDate:k.a.string,onChannelPurposeTextareaChange:k.a.func.isRequired,onChannelPurposeValidationChange:k.a.func,workspaceName:k.a.string};var Ge={maxLength:250,purpose:"",purposeCreator:null,purposeDate:"",numCharsOverLimit:0,onChannelPurposeValidationChange:null,workspaceName:""};var He="react_channel_purpose_input";function We(e){Object(Pe["a"])({e:e,input_to_fill:"#"+He,offset_y:-8})}var Ve=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setTextyRef=a.setTextyRef.bind(a);a.onTextChange=a.onTextChange.bind(a);a.texty=null;a.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";Object(xe["a"])(t,a.texty.container)},completers:["channels","emoji","members"]}};a.state={numCharsOverLimit:a.countCharsOverLimit()};return a}h()(t,[{key:"onTextChange",value:function e(){var t=this.props,a=t.onChannelPurposeValidationChange,n=t.onChannelPurposeTextareaChange;var r=this.state.numCharsOverLimit;var i=this.countCharsOverLimit();if(i>0||r>0){this.setState(function(){return{numCharsOverLimit:i}});a&&a(i>0)}i<1&&n({target:{value:this.getEditText()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props.purpose;var a=Object(O["isString"])(t)?t:t.value;if(this.texty)return Object(Le["j"])(this.texty.value(),{enableBroadcastKeywords:false});if(Object(O["isString"])(a))return a;return""}},{key:"countCharsOverLimit",value:function e(){var t=this.getEditText();var a=this.props.maxLength;if(!a||!t.length)return 0;return Math.max(0,t.length-a)}},{key:"renderTextarea",value:function e(){var t=this.props,a=t.maxLength,n=t.purpose;var i=this.state.numCharsOverLimit;var o=i+a;var s=Object(Fe["f"])(Object(O["isString"])(n)?n:n.value);var l=Ue.t("Channel purpose");var c=void 0;i>0&&(c=Ue.t("Text is too long! ({totalCharCount}/{maxLength} characters)",{totalCharCount:o,maxLength:a}));return r.a.createElement("div",{className:"p-channel_options--channel_purpose"},r.a.createElement(Me["g"],{id:He,ref:this.setTextyRef,className:"c-input_textarea c-channel_purpose_input",modules:this.textyModules,ariaLabel:l,initialText:s,onTextChange:this.onTextChange,focusOnMount:true,useLegacyCreate:true,enableBroadcastKeywords:false}),r.a.createElement(Ae["c"],{onClick:We,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},r.a.createElement(te["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),r.a.createElement(te["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),r.a.createElement(te["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})),c&&r.a.createElement("p",{className:"candy_red no_bottom_margin"},c))}},{key:"renderGuidance",value:function e(){var t=this.props,a=t.channel,n=t.workspaceName;return Object(x["isExternallySharedChannel"])(a)?Ue.t("Describe what this channel is for. This is only visible to {workspaceName}.",{workspaceName:Object(L["m"])(n)}):Ue.t("Describe what this channel is for.")}},{key:"render",value:function e(){var t=this.props,a=t.purposeCreator,n=t.purposeDate;var i=Ue.rt('Purpose <span className="normal">(optional)</span>',{fallbackHash:"a587fb8aa58d02ba9fd0f63b6a2fee69d374d87f"},function(e){var t=e.text,a=e.key;return r.a.createElement("span",{key:a,className:"normal"},t)});var o=void 0;n&&a&&n&&(o=Ue.rt("The purpose was last set by <span>{member}</span> {date}.",{member:a,date:n},function(e){var t=e.key,n=e.tag,i=e.text;if("span"===n)return r.a.createElement(Re["a"],{key:t,id:a.id});return r.a.createElement("span",{key:t},i)}));return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("label",{htmlFor:"purpose_input",className:"block"},i),this.renderTextarea(),r.a.createElement("p",{className:"mini small_top_margin no_bottom_margin"},this.renderGuidance()),o&&r.a.createElement("p",{className:"mini"},o))}}]);return t}(n["PureComponent"]);Ve.displayName="ChannelPurpose";Ve.defaultProps=Ge;function ze(e,t){var a=t.purpose;var n=Object(O["get"])(a,"creator");return{purposeCreator:n?Object(A["getMemberById"])(e,n):null,purposeDate:a.last_set&&Object(De["a"])(e,a.last_set),workspaceName:Object(F["getTeamDisplayName"])(Object(R["getCurrentTeam"])(e))}}var Qe=Object(s["connect"])(ze)(Ve);var Ke=new L["b"]("channel_options");var Ye={channel:k.a.object.isRequired,teamName:k.a.string.isRequired};var Je={};var Ze=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"shouldShowShareWarning",value:function e(){var t=this.props.channel;if(!t)return false;return Object(x["isSharedPublicOrPrivateChannel"])(t)}},{key:"renderShareWarning",value:function e(){var t=this.props,a=t.channel,n=t.teamName;if(!a)return null;if(!this.shouldShowShareWarning())return null;return r.a.createElement("li",null,Ke.rt("This update will only appear in {teamName}.",{teamName:r.a.createElement("strong",null,n)}))}},{key:"render",value:function e(){var t=this.props.teamName;return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement(X["a"],{type:"boxed",level:"warning",icon:"warning",align:"left",className:"margin_bottom_150"},Ke.t("This change can\u2019t be undone, so please proceed with care.")),r.a.createElement("p",{className:"small_bottom_margin"},r.a.createElement("strong",null,Ke.t("Things to note:"))),r.a.createElement("ul",null,this.renderShareWarning(),r.a.createElement("li",null,Ke.t("Channel history and members will not be affected by this change.")),r.a.createElement("li",null,Ke.rt("All files shared in this channel up until this point will remain publicly accessible to everyone in {teamName}.",{teamName:r.a.createElement("strong",null,t)}))))}}]);return t}(n["PureComponent"]);Ze.displayName="ConvertChannelToPrivate";Ze.defaultProps=Je;function Xe(e,t){var a=t.channel;var n=Object(R["getCurrentTeam"])(e);return{channel:a,teamName:Object(F["getTeamDisplayName"])(n)}}var $e=Object(s["connect"])(Xe)(Ze);var et=a(16);var tt=a(338);var at=a(660);var nt=a(1403);var rt=a(1161);function it(e){var t=e.retentionType,a=e.retentionDuration;if(!Object(O["isInteger"])(t))return false;var n=36500;return 0===t||1===t&&Object(O["isInteger"])(a)&&a>0&&a<n}function ot(e){var t=e.retentionDuration,a=e.retentionDurationUnit;if(!Object(O["isInteger"])(a))return t;return 0===a?t:365*t}var st=new L["b"]("channel_options");var lt={member:k.a.object.isRequired,team:k.a.object.isRequired,onDurationChange:k.a.func,onDurationUnitChange:k.a.func,onTypeChange:k.a.func,prefsLoaded:k.a.bool,retentionDuration:k.a.number,retentionDurationUnit:k.a.number,retentionType:k.a.number,teamRetentionDuration:k.a.number,teamRetentionType:k.a.number,durationInputRef:k.a.func};var ct={onDurationChange:O["noop"],onDurationUnitChange:O["noop"],onTypeChange:O["noop"],prefsLoaded:false,retentionDuration:0,retentionDurationUnit:0,retentionType:0,teamRetentionDuration:0,teamRetentionType:0,durationInputRef:O["noop"]};var ut=0;var dt=1;var pt=1;var ft=0;var mt=2;var ht=3;var vt=0;var gt=47;var bt=57;var _t=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.durationChange=a.durationChange.bind(a);a.durationUnitChange=a.durationUnitChange.bind(a);a.handleKeyPress=a.handleKeyPress.bind(a);return a}h()(t,[{key:"durationChange",value:function e(t){var a=this;t.persist();Object(O["debounce"])(function(){var e=Math.round(parseFloat(t.target.value,10));a.props.onDurationChange(e)},500)()}},{key:"durationUnitChange",value:function e(t){this.props.onDurationUnitChange(parseInt(t.target.value,10))}},{key:"handleKeyPress",value:function e(t){(t.charCode<gt||t.charCode>bt)&&t.preventDefault()}},{key:"maybeRenderOldDurationInput",value:function e(){var t=this.props,a=t.retentionDuration,n=t.retentionType;if(n===ut)return null;var i={width:"60px",backgroundColor:"white"};return r.a.createElement("div",{className:"flex_none left_margin"},r.a.createElement("label",{htmlFor:"retention_duration",className:"c-label c-label__text"},st.t("Duration")),r.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text align_right",defaultValue:a,id:"retention_duration",maxLength:"4",onChange:this.durationChange,style:i,type:"text"}),r.a.createElement("span",{className:"p-channel_options--retention_duration_add_on"},st.t("days")))}},{key:"maybeRenderDurationInput",value:function e(){var t=this.props,a=t.retentionDuration,n=t.retentionDurationUnit,i=t.retentionType,o=t.durationInputRef;if(i===ut)return null;var s=r.a.createElement("strong",null,st.t("Delete messages and their revisions after:"));return r.a.createElement(Z["a"],{className:"p-channel_options--retention_duration_label c-deprecated-icon c-icon--caret-down",text:s,htmlFor:"retention_duration"},r.a.createElement("div",{className:"display_flex"},r.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text",defaultValue:0===a?"":a,id:"retention_duration",onChange:this.durationChange,onKeyPress:this.handleKeyPress,type:"text",ref:o}),r.a.createElement("select",{className:"p-channel_options--retention_duration_unit c-input_select margin_left_100",id:"retention_duration_unit",defaultValue:n,onChange:this.durationUnitChange},r.a.createElement("option",{value:"0"},st.t("Days")),r.a.createElement("option",{value:"1"},st.t("Years")))))}},{key:"maybeRenderDurationWarning",value:function e(){var t=this.props,a=t.member,n=t.retentionType,i=t.retentionDuration,o=t.retentionDurationUnit,s=t.teamRetentionDuration,l=t.teamRetentionType;if(n===ut)return null;var c=void 0;var u=ot({retentionDuration:i,retentionDurationUnit:o});var d=5475;if(u>=36500)c=st.rt("When setting a time frame for deleting messages, please choose a duration less than 100 years.");else if(it({retentionType:n,retentionDuration:u}))if(u<30)c=st.rt("<strong>This will delete all messages older than {retentionDuration, plural, =1 {# day} other {# days}}</strong>. Please double-check with your team before setting such a short retention period.",{retentionDuration:i});else if(l===mt&&u>s)c=o===vt?Object(et["isAdmin"])(a)||Object(et["isOwner"])(a)?st.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:i}):st.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:i}):Object(et["isAdmin"])(a)||Object(et["isOwner"])(a)?st.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:i}):st.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:i});else{if(l!==pt&&l!==ft||!(u>d))return null;c=st.rt("Just a heads up: if you want to keep your messages forever, you can choose to follow your workspace\u2019s default retention settings.")}else c=st.rt("To delete messages after a period of time, set a value greater than zero.");return r.a.createElement(X["a"],{level:"warning"},c)}},{key:"renderSelectOption",value:function e(t,a){return r.a.createElement("option",{value:t},a)}},{key:"renderRadio",value:function e(){var t=this.props,a=t.onTypeChange,n=t.retentionType,i=t.team;var o="retention_type";var s=r.a.createElement("span",null,r.a.createElement("strong",null,st.t("Use the default retention settings for {teamName}",{teamName:Object(F["getTeamDisplayName"])(i)})),r.a.createElement("div",{className:"sk_dark_gray"},this.renderTeamPrefMessage()));var l=r.a.createElement("span",null,r.a.createElement("strong",null,st.t("Use custom retention settings for this conversation")),r.a.createElement("div",{className:"sk_dark_gray"},st.t("Delete messages after a set amount of time.")));return r.a.createElement("div",{className:"flex_one"},r.a.createElement(at["a"],{className:"margin_bottom_50"},r.a.createElement(Z["a"],{text:s,htmlFor:o+"_0",type:"inline",cursor:"pointer",className:"margin_bottom_75"},r.a.createElement(tt["a"],{id:o+"_0",name:o,value:0,checked:n===ut,onChange:a})),r.a.createElement(Z["a"],{text:l,htmlFor:o+"_1",type:"inline",cursor:"pointer"},r.a.createElement(tt["a"],{id:o+"_1",name:o,value:1,checked:n===dt,onChange:a}))))}},{key:"renderTeamPrefMessage",value:function e(){var t=this.props,a=t.teamRetentionDuration,n=t.teamRetentionType;var r=void 0;switch(n){case pt:r=st.t("By default, messages are kept forever.");break;case ft:r=st.t("By default, messages are kept forever, but revisions aren\u2019t tracked.");break;case mt:if(a>364){var i=Object(O["round"])(a/365,1);r=st.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted.",{durationDays:a,durationYears:i})}else r=st.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted.",{teamRetentionDuration:a});break;case ht:if(a>364){var o=Object(O["round"])(a/365,1);r=st.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted (full history still accessible via compliance export).",{durationDays:a,durationYears:o,fallbackHash:"91a2ec5b71549f51b20023decb759e38c488cd23"})}else r=st.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted (full history still accessible via compliance export).",{teamRetentionDuration:a,fallbackHash:"546ed739919d63b927945839040c80b6968a5d2f"});break;default:r=st.t("By default, messages are kept forever.");break}return r}},{key:"render",value:function e(){var t=this.props.prefsLoaded;if(!t)return r.a.createElement("div",{className:"p-channel_options--option_spinner"},r.a.createElement(pe["a"],{size:"jumbo"}));return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("p",null,st.t("If you\u2019d like, you can set custom message retention for this conversation.")),this.renderRadio(),r.a.createElement("div",{className:"p-channel-options__custom_retention_container"},this.maybeRenderDurationInput(),this.maybeRenderDurationWarning()))}}]);return t}(n["PureComponent"]);_t.displayName="DataRetention";_t.defaultProps=ct;var yt=_t;var kt=a(65);var Ot=new L["b"]("channel_options");var wt={channel:k.a.object.isRequired,showArchiveInstead:k.a.bool.isRequired,onChangeCheckbox:k.a.func.isRequired,onClickArchiveInstead:k.a.func.isRequired};var Et={};var Ct=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderArchiveInstead",value:function e(){var t=this.props,a=t.showArchiveInstead,n=t.onClickArchiveInstead;if(!a)return null;return Ot.rt("<strong>Note:</strong> <a>Archiving a channel</a> lets you close out a conversation without deleting its messages.",{fallbackHash:"7a1495254985f7cbea8f1975f9ee15921929ea5c"},function(e){var t=e.text,a=e.key,i=e.tag;if("strong"===i)return r.a.createElement("strong",{key:a},t);if("a"===i)return r.a.createElement(kt["a"],{key:a,onClick:n},t);return{text:t}})}},{key:"render",value:function e(){var t=this.props,a=t.channel,n=t.onChangeCheckbox;return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("p",null,Ot.rt("Are you sure you want to delete <strong>{channel}</strong>? All of the channel\u2019s messages will be removed from Slack immediately \u2014 files, however, will not be deleted. This cannot be undone.",{channel:Object(x["getDisplayName"])(a)},function(e){var t=e.key;return ne(t,a)})),r.a.createElement("p",null,this.renderArchiveInstead()),r.a.createElement("p",{className:"float_left very_small_top_margin"},r.a.createElement("label",{htmlFor:"delete_channel_cb",className:"c-label--pointer display_flex align_items_center"},r.a.createElement("input",{onChange:n,id:"delete_channel_cb",type:"checkbox",className:"c-input_checkbox inline small_right_margin"}),Ot.t("Yes, permanently delete this channel"))))}}]);return t}(n["PureComponent"]);Ct.displayName="DeleteChannel";Ct.defaultProps=Et;var jt=Ct;var St=new L["b"]("channel_options");function It(){return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("p",null,St.t("Exports can take a while \u2014 especially for lengthy conversations. Slackbot will ping you when your export is done.")))}It.displayName="ExportHistory";var Tt=It;var Nt=a(661);var At=a(1412);var Rt=a(1411);var Mt=new L["b"]("channel_options");var xt={channel:k.a.object,orgName:k.a.string,disabledTeamIds:k.a.arrayOf(k.a.string),filterFunction:k.a.func,isLoaded:k.a.bool,onShareWithChange:k.a.func,onTeamPickerChange:k.a.func,originatingTeamId:k.a.string,preselectedTeamIds:k.a.arrayOf(k.a.string),shareWith:k.a.string};var Pt={channel:null,orgName:"",disabledTeamIds:[],filterFunction:null,isLoaded:false,onShareWithChange:O["noop"],onTeamPickerChange:O["noop"],originatingTeamId:"",preselectedTeamIds:[],shareWith:"specific"};var Dt=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"maybeRenderWorkspacePicker",value:function e(){var t=this.props,a=t.disabledTeamIds,n=t.filterFunction,i=t.onTeamPickerChange,o=t.originatingTeamId,s=t.preselectedTeamIds,l=t.shareWith;if("all"===l)return null;var c=void 0;c=n||H({preselected_ids:s,disabled_ids:a});return r.a.createElement("div",{className:"margin_left_150"},r.a.createElement(Nt["a"],{approxItemHeight:32,dataPromise:c,onValueChange:i,placeholderText:Mt.t("Add workspaces"),template:function e(t){var a={item:t};t.team.id===o&&(a.additionalItemCopy=Mt.t("Owner"));return r.a.createElement(Rt["a"],a)},tokenTemplate:function e(t){var a={item:t};t.team.id===o&&(a.additionalItemCopy=Mt.t("Owner"));return r.a.createElement(At["a"],a)}}))}},{key:"renderAllWorkspaces",value:function e(){var t=this.props,a=t.onShareWithChange,n=t.shareWith,i=t.orgName;var o={className:"small_right_margin",id:"all-workspaces",name:"share_with",onClick:a,value:"all"};"all"===n&&(o.defaultChecked="checked");return r.a.createElement(Z["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"all-workspaces",text:Mt.t("All {orgName} workspaces",{orgName:i})},r.a.createElement(tt["a"],o))}},{key:"renderSpecificWorkspaces",value:function e(){var t=this.props,a=t.onShareWithChange,n=t.shareWith,i=t.orgName;var o={className:"small_right_margin",id:"specific-workspaces",name:"share_with",onClick:a,value:"specific"};"specific"===n&&(o.defaultChecked="checked");return r.a.createElement("div",null,r.a.createElement(Z["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"specific-workspaces",text:Mt.t("Specific {orgName} workspaces",{orgName:i})},r.a.createElement(tt["a"],o)),this.maybeRenderWorkspacePicker())}},{key:"render",value:function e(){var t=this.props,a=t.channel,n=t.isLoaded,i=t.orgName;if(!n)return r.a.createElement("div",{className:"p-channel_options--option_spinner"},r.a.createElement(pe["a"],{size:"jumbo"}));var o=void 0;o=Object(x["isPrivateChannel"])(a)?Mt.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:i}):Mt.t("Choose which {org_name} workspaces can find and join this channel.",{org_name:i});return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("p",null,o),this.renderSpecificWorkspaces(),this.renderAllWorkspaces())}}]);return t}(n["PureComponent"]);Dt.displayName="ManageWorkspaceAccess";Dt.defaultProps=Pt;function Ft(e){return{orgName:Object(S["getEnterpriseOrgName"])(e)}}var Lt=Object(s["connect"])(Ft)(Dt);var Bt=a(24);var Ut=a.n(Bt);var qt=a(481);var Gt=new L["b"]("channel_options");var Ht={allEnterpriseTeams:k.a.array,channel:k.a.object.isRequired,channelIsGlobalShared:k.a.bool,newChannelName:k.a.string,orgName:k.a.string,shareWith:k.a.string,teamId:k.a.string.isRequired,teamIdsSelected:k.a.arrayOf(k.a.string)};var Wt={allEnterpriseTeams:[],channelIsGlobalShared:false,newChannelName:"",orgName:"",shareWith:"specific",teamIdsSelected:[]};var Vt=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pointCounter=0;return a}h()(t,[{key:"makeChannelName",value:function e(){var t=this.props,a=t.channel,n=t.newChannelName;return n&&n.length?n:Object(x["getDisplayName"])(a)}},{key:"makeTeamNamesList",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=this.props,n=a.teamIdsSelected,i=a.teamId;var o=Object(c["c"])(i);var s=t.length?t:n;if(s.length>=5)return Gt.t("{workspaceCount} workspaces",{workspaceCount:s.length});var l=Object(O["map"])(s,function(e){var t=Object(R["getTeamById"])(o,e);return Object(F["isUnknown"])(t)?r.a.createElement(qt["a"],{type:"unknown"}):Object(F["getTeamDisplayName"])(t)});if(1===l.length)return l[0];return Object(L["f"])(l,{react:true,strong:true})}},{key:"renderChangesDetails",value:function e(){var t=this;var a=this.props,n=a.allEnterpriseTeams,i=a.channel,o=a.channelIsGlobalShared,s=a.orgName,l=a.shareWith,c=a.teamIdsSelected;var u=Object(O["map"])(n,"id");var p=o?u:Object(x["getSharedTeamIds"])(i);var f=Object(O["difference"])(c,Object(x["getSharedTeamIds"])(i));var m=O["without"].apply(void 0,[p].concat(Ut()(c)));var h=O["without"].apply(void 0,[Object(O["intersection"])(u,p)].concat(Ut()(m)));var v=[];var g=function e(a,n,r){t.pointCounter+=1;v.push({data:a,key:t.pointCounter,isHeading:!!n,iconType:r})};var b=[];var _={channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(f)};var y=function e(t){var a=t.key,n=t.tag,o=t.text;if("span"===n)return r.a.createElement("strong",{key:a},ne(a,i,o));return r.a.createElement("strong",{key:a},o)};var k=true;var w="ts_icon_org_shared_channel";var E="ts_icon_warning";if("all"===l){g(Gt.rt("Share <span>{channelName}</span> with all of <strong>{orgName}</strong>.",{channelName:this.makeChannelName(),orgName:s},y),k,w);if(Object(x["isPrivateChannel"])(i))g(Gt.rt("If invited, members of <strong>{orgName}</strong> will be able to join the channel and see its message history and files.",{orgName:s,channelName:this.makeChannelName()},y));else{g(Gt.rt("All members of <strong>{orgName}</strong> will be able to find and join the channel and see its message history and files.",{orgName:s}));g(Gt.t("Members of any workspaces created in the future will also have access."))}g(Gt.rt("The channel will be notified of these changes."))}else{o&&g(Gt.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(m)},y),k,E);if(!o&&f.length){g(Gt.rt("Share <span>{channelName}</span> with members of {teamNames}.",_,y),k,w);Object(x["isPrivateChannel"])(i)?f.length>1?g(Gt.rt("If invited, members of these workspaces will be able to join the channel and see its message history and files.")):g(Gt.rt("If invited, members of this workspace will be able to join the channel and see its message history and files.")):f.length>1?g(Gt.rt("All members of these workspaces will be able to find and join the channel and see its message history and files.")):g(Gt.rt("All members of this workspace will be able to find and join the channel and see its message history and files."))}f.length&&!m.length&&g(Gt.rt("The channel will be notified of these changes."));if(m.length){o||g(Gt.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(m)},y),k,E);m.length>1?g(Gt.rt("Members of these workspaces will lose access to this channel\u2019s message history and files.")):g(Gt.rt("All members of {workspace} will lose access to this channel\u2019s message history and files.",{workspace:this.makeTeamNamesList(m)}));m.length>1?g(Gt.rt("Apps installed by members of these workspaces will need to be installed again.")):g(Gt.rt("Apps installed by members of {workspace} will need to be added again.",{workspace:this.makeTeamNamesList(m)}));h.length&&g(Gt.rt("Members of {workspaces} will continue to have access to this channel.",{workspaces:this.makeTeamNamesList(h)}));g(Gt.rt("The channel will be notified of these changes."))}}g(Gt.rt("<a>Learn more</a> about sharing channels within your organization.",null,function(e){var t=e.key,a=e.text;return r.a.createElement("a",{key:t,href:"https://get.slack.help/hc/en-us/articles/115001399587-Create-a-shared-channel-on-Enterprise-Grid#how-they-work",target:"_blank",rel:"noopener noreferrer"},a)}));v.forEach(function(e){var t={className:e.isHeading?"p-channel-options--workspace_access_heading":"p-channel-options--workspace_access_line_item"};b.push(r.a.createElement("p",d()({key:e.key},t),e.iconType&&r.a.createElement("ts-icon",{class:e.iconType}),e.data))});return r.a.createElement("div",{className:"p-channel-options--content_text"},b)}},{key:"render",value:function e(){return r.a.createElement("div",null,this.renderChangesDetails())}}]);return t}(n["Component"]);Vt.displayName="ManageWorkspaceAccessReview";Vt.defaultProps=Wt;function zt(e,t){var a=t.channel;return{channelIsGlobalShared:Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(a),orgName:Object(S["getEnterpriseOrgName"])(e),teamId:Object(j["getTeamId"])(e),allEnterpriseTeams:Object(R["getAllEnterpriseTeams"])(e)}}var Qt=Object(s["connect"])(zt)(Vt);var Kt={children:k.a.any,dataActionTag:k.a.string,isDisabled:k.a.bool,message:k.a.any.isRequired,onClick:k.a.func.isRequired,title:k.a.string.isRequired};var Yt={children:null,dataActionTag:"",isDisabled:false};var Jt=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,n=t.dataActionTag,i=t.isDisabled,o=t.message,s=t.onClick,l=t.title;var c=ee()("channel_option_item",{"channel_option_item--disabled":i});var u=i?O["noop"]:s;return r.a.createElement(Ae["c"],{className:c,"data-action":n,onClick:u,type:"link"},r.a.createElement("h3",{className:"title"},l),r.a.createElement("p",{className:"sk_dark_grey no_bottom_margin"},o),a,r.a.createElement("div",{className:"channel_option_open"},r.a.createElement(te["a"],{className:"c-deprecated-icon--inherit",type:"arrow_large_right"})))}}]);return t}(n["PureComponent"]);Jt.displayName="Option";Jt.defaultProps=Yt;var Zt=Jt;var Xt=new L["b"]("channel_options");var $t={channel:k.a.object,disableConvertToPrivate:k.a.bool,disableRename:k.a.bool,isAdminUser:k.a.bool,modalClasses:k.a.string,onClickArchive:k.a.func,onClickConvertToPrivate:k.a.func,onClickDelete:k.a.func,onClickExport:k.a.func,onClickManageOrgAccess:k.a.func,onClickPostingPermissions:k.a.func,onClickPurpose:k.a.func,onClickRename:k.a.func,onClickShareExternal:k.a.func,onClickCancelExternalSharedChannelInvite:k.a.func,onClickStopShareExternal:k.a.func,orgName:k.a.string,pendingSharedExternalSharedTeamNames:k.a.array,showArchive:k.a.bool.isRequired,showConvertToPrivate:k.a.bool.isRequired,showDelete:k.a.bool.isRequired,showExport:k.a.bool.isRequired,showManageOrgAccess:k.a.bool.isRequired,showPostingPermissions:k.a.bool.isRequired,showPurpose:k.a.bool.isRequired,showRename:k.a.bool.isRequired,showShareExternal:k.a.bool.isRequired,showStopShareExternal:k.a.bool.isRequired,showSuccessAlert:k.a.bool,successAlertHeading:k.a.string,successAlertText:k.a.string};var ea={channel:{},disableConvertToPrivate:false,disableRename:false,isAdminUser:false,modalClasses:"",onClickArchive:O["noop"],onClickCancelExternalSharedChannelInvite:O["noop"],onClickConvertToPrivate:O["noop"],onClickDelete:O["noop"],onClickExport:O["noop"],onClickManageOrgAccess:O["noop"],onClickPostingPermissions:O["noop"],onClickPurpose:O["noop"],onClickRename:O["noop"],onClickShareExternal:O["noop"],onClickStopShareExternal:O["noop"],orgName:"",pendingSharedExternalSharedTeamNames:[],showSuccessAlert:false,successAlertHeading:"",successAlertText:""};var ta=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderArchive",value:function e(){var t=this.props.onClickArchive;return r.a.createElement(Zt,{dataActionTag:"archive",message:Xt.t("If you don\u2019t think it will be used anymore and you want to clean up, archive it. The channel can be unarchived later (but everyone will have been removed)."),onClick:t,title:Xt.t("Archive this channel")})}},{key:"renderShareExternal",value:function e(){var t=this;var a=this.props,n=a.channel,i=a.isAdminUser,o=a.onClickShareExternal,s=a.pendingSharedExternalSharedTeamNames;var l="";var c=Xt.t("Share this channel with another workspace");var u=Xt.rt("Shared channels link two workspaces together. People from both sides can send messages, share files, and search the channel\u2019s history. <a>Learn more</a>",null,function(e){var t=e.text,a=e.key;return r.a.createElement("a",{key:a,href:"https://get.slack.help/hc/articles/115004151203",target:"_blank",rel:"noopener noreferrer"},t)});n.unlinked&&(l=r.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},r.a.createElement("div",{className:"c-alert__message"},Xt.t("This channel was previously shared with another workspace and can\u2019t be shared again."))));if(s.length){var d=Object(L["f"])(s).join("");var p=Xt.rt("{listified_pending_team_name} was already invited to this channel.",{listified_pending_team_name:r.a.createElement("strong",null,d)});var f="";if(i){var m=n.pending_shared[0];f=r.a.createElement("a",{onClick:function e(){return t.props.onClickCancelExternalSharedChannelInvite(m)},role:"button",tabIndex:"0"},Xt.t("Cancel invitation"))}l=r.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},r.a.createElement("div",{className:"c-alert__message"},p,"\xa0",f))}var h=s.length>0||!!n.unlinked;return r.a.createElement(Zt,{dataActionTag:"share_external",isDisabled:h,message:u,onClick:o,title:c},l)}},{key:"renderStopShareExternal",value:function e(){var t=this.props.onClickStopShareExternal;return r.a.createElement(Zt,{dataActionTag:"stop_share_external",title:Xt.t("Stop sharing this channel"),message:Xt.t("You can stop sharing this channel at any time. Note that you won\u2019t be able to re-share this channel in the future."),onClick:t})}},{key:"renderConvertToPrivate",value:function e(){var t=this.props,a=t.disableConvertToPrivate,n=t.onClickConvertToPrivate;var i="";a&&(i=r.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},r.a.createElement("div",{className:"c-alert__message"},Xt.t("During the beta, shared channels can\u2019t be made private."))));return r.a.createElement(Zt,{dataActionTag:"convert_private",isDisabled:a,title:Xt.t("Change to a private channel"),message:Xt.t("Private channels can only be joined if you are added by a current member \u2014 they won\u2019t show up in your channel browser. This change can\u2019t be undone."),onClick:n},i)}},{key:"renderManageOrgAccess",value:function e(){var t=this.props,a=t.channel,n=t.onClickManageOrgAccess,i=t.orgName;var o=void 0;o=Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?Object(x["isPrivateChannel"])(a)?Xt.t("Manage which members of {org_name} can be invited to join this channel.",{org_name:i}):Xt.t("Manage which members of {org_name} can find and join this channel.",{org_name:i}):Object(x["isPrivateChannel"])(a)?Xt.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:i}):Xt.t("Anyone in the {org_name} workspaces you select will be able to find and join this channel.",{org_name:i});var s=void 0;s=Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?Xt.t("Sharing settings for this channel"):Xt.t("Share this channel with other {org_name} workspaces",{org_name:i});return r.a.createElement(Zt,{dataActionTag:"convert_ent_shared",message:o,onClick:n,title:s})}},{key:"renderRename",value:function e(){var t=this.props,a=t.disableRename,n=t.onClickRename;var i="";a&&(i=r.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},r.a.createElement("div",{className:"c-alert__message"},Xt.t("You don\u2019t have permission to rename this channel."))));return r.a.createElement(Zt,{dataActionTag:"rename",isDisabled:a,message:Xt.t("You can rename a channel at any time. But, use it sparingly: it might confuse or disorient your colleagues!"),onClick:n,title:Xt.t("Rename this channel")},i)}},{key:"renderPurpose",value:function e(){var t=this.props.onClickPurpose;var a=false;var n=void 0;n=a?Xt.t("Edit the channel purpose"):Xt.t("Set the channel purpose");var i=void 0;i=a?"":Xt.t("Channel purposes are especially useful to new members choosing which conversations to join.");return r.a.createElement(Zt,{dataActionTag:"set_purpose",message:i,onClick:t,title:n})}},{key:"renderPostingPermissions",value:function e(){var t=this.props.onClickPostingPermissions;return r.a.createElement(Zt,{dataActionTag:"posting_permissions",message:Xt.t("Change who is allowed to post messages in this channel."),onClick:t,title:Xt.t("Manage posting permissions")})}},{key:"renderExport",value:function e(){var t=this.props.onClickExport;return r.a.createElement(Zt,{dataActionTag:"export",message:Xt.t("Export the messages in this conversation as a JSON file."),onClick:t,title:Xt.t("Export message history")})}},{key:"renderDelete",value:function e(){var t=this.props.onClickDelete;return r.a.createElement(Zt,{dataActionTag:"delete",message:Xt.t("Deleting a channel will permanently remove all of its messages. This cannot be undone."),onClick:t,title:Xt.t("Delete this channel")})}},{key:"renderSuccessAlert",value:function e(){var t=this.props,a=t.successAlertHeading,n=t.successAlertText;var i={level:"success",heading:a};return r.a.createElement(X["a"],i,r.a.createElement("span",null,n))}},{key:"render",value:function e(){var t=this.props,a=t.showArchive,n=t.showConvertToPrivate,i=t.showDelete,o=t.showExport,s=t.showPostingPermissions,l=t.showPurpose,c=t.showRename,u=t.showShareExternal,d=t.showStopShareExternal,p=t.showManageOrgAccess,f=t.showSuccessAlert,m=t.modalClasses;return r.a.createElement("div",{className:m,role:"presentation"},f&&this.renderSuccessAlert(),a&&this.renderArchive(),u&&this.renderShareExternal(),d&&this.renderStopShareExternal(),n&&this.renderConvertToPrivate(),p&&this.renderManageOrgAccess(),c&&this.renderRename(),l&&this.renderPurpose(),s&&this.renderPostingPermissions(),o&&this.renderExport(),i&&this.renderDelete())}}]);return t}(n["PureComponent"]);ta.displayName="OptionsList";ta.defaultProps=ea;function aa(e){var t=Object(A["getCurrentMember"])(e);return{orgName:Object(S["getEnterpriseOrgName"])(e),isAdminUser:t.is_admin}}var na={};var ra=Object(s["connect"])(aa,na)(ta);var ia=a(159);var oa=a(1165);var sa={item:k.a.object};var la={item:{}};var ca=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.item;return r.a.createElement("div",{className:"c-lazy_filter_select__user_group_item"},r.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(n["PureComponent"]);ca.displayName="LazyFilterSelectUserGroupListItem";var ua=ca;ca.defaultProps=la;function da(e){if(e.member)return r.a.createElement(oa["a"],{item:e});return r.a.createElement(ua,{item:e})}da.displayName="getItemTemplate";var pa=a(1166);var fa={item:k.a.object};var ma={item:{}};var ha=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.item;return r.a.createElement("div",{className:"c-lazy_filter_select__user_group_token",key:t.id},r.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(n["PureComponent"]);ha.displayName="LazyFilterSelectUserGroupToken";var va=ha;ha.defaultProps=ma;function ga(e){if(e.member)return r.a.createElement(pa["a"],{item:e});return r.a.createElement(va,{item:e})}ga.displayName="getTokenTemplate";var ba=new L["b"]("channel_options");var _a={canThread:k.a.bool,isOrgDefault:k.a.bool,onChangeCheckbox:k.a.func.isRequired,onChangeRadio:k.a.func.isRequired,onChangeValueSelectedMembers:k.a.func.isRequired,postingPermissionsLoaded:k.a.bool,postingPermissionsSelectedMembers:k.a.array,whoCanPost:k.a.string,featureDefaultSharedChannels:k.a.bool.isRequired};var ya={canThread:false,isOrgDefault:false,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,whoCanPost:""};var ka=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"maybeRenderCheckbox",value:function e(){var t=this.props,a=t.canThread,n=t.isOrgDefault,i=t.onChangeCheckbox,o=t.featureDefaultSharedChannels;var s=ba.t("Allow members to start message threads?");var l=ba.t("With this selected, anyone will be able to add threaded replies to messages posted in this channel.");if(!o||!n)return null;return r.a.createElement("div",null,r.a.createElement("hr",{className:"top_margin bottom_margin"}),r.a.createElement(Z["a"],{htmlFor:"posting_permission_can_thread",type:"inline",cursor:"pointer",text:s,subtext:l},r.a.createElement(J["a"],{id:"posting_permission_can_thread",name:"can_thread",onChange:i,checked:a})))}},{key:"maybeRenderMemberPicker",value:function e(){var t=this.props,a=t.isOrgDefault,n=t.onChangeValueSelectedMembers,i=t.postingPermissionsSelectedMembers,o=t.whoCanPost;var s={};a&&(s.maxSelectedItems=100);var l=G(i);var c=32;if("multi"===o||"owner"===o)return r.a.createElement(Nt["a"],d()({onValueChange:n,template:da,tokenTemplate:ga,dataPromise:l,approxItemHeight:c},s));return null}},{key:"formatPermissionSettings",value:function e(){var t=this.props.featureDefaultSharedChannels;var a=void 0;var n=void 0;var r=void 0;if(t){a=ba.t("Org Admins/Owners");n=ba.t("Org Admins and Owners, plus select members");r="org_admin"}else{a=ba.t("Org Admins/Owners and Workspace Admins/Owners");n=ba.t("Org and Workspace Admin/Owner, selected members");r="admin"}return[{permissionType:"ra",label:ba.t("Everyone"),hideWhenOrgDefault:true},{permissionType:"regular",label:ba.t("Everyone, except guests"),hideWhenOrgDefault:true},{permissionType:r,label:a},{permissionType:"multi",label:n}]}},{key:"renderRadios",value:function e(){var t=this.props,a=t.isOrgDefault,n=t.onChangeRadio,i=t.whoCanPost;var o="owner"===i?"multi":i;!a||"ra"!==o&&"regular"!==o||(o="admin");var s=w.a.map(this.formatPermissionSettings(),function(e){if(a&&e.hideWhenOrgDefault)return null;var t=e.permissionType===o;return r.a.createElement("div",{key:e.permissionType},r.a.createElement(Z["a"],{htmlFor:"who_can_post_"+e.permissionType,type:"inline",cursor:"pointer",className:"p-channel_options--radio_label",text:e.label},r.a.createElement(tt["a"],{name:"who_can_post",value:e.permissionType,onChange:n,id:"who_can_post_"+e.permissionType,checked:t})))});return s}},{key:"render",value:function e(){var t=this.props.postingPermissionsLoaded;if(!t)return r.a.createElement("div",{className:"p-channel_options--option_spinner"},r.a.createElement(pe["a"],{size:"jumbo"}));var a=ba.t("Who can post in this channel?");return r.a.createElement("div",{className:"p-channel-options--content_text"},r.a.createElement("p",null,a),this.renderRadios(),this.maybeRenderMemberPicker(),this.maybeRenderCheckbox())}}]);return t}(n["PureComponent"]);ka.displayName="PostingPermissions";ka.defaultProps=ya;var Oa=Object(ia["a"])("feature_default_shared_channels")(ka);var wa=a(103);var Ea=new L["b"]("channel_options");var Ca={canThread:k.a.bool,onErrorDialogButtonClick:k.a.func.isRequired,channelPrefError:k.a.bool,whoCanPost:k.a.string,featureDefaultSharedChannels:k.a.bool.isRequired,openModal:k.a.func};var ja={canThread:false,whoCanPost:"",channelPrefError:false,openModal:w.a.noop};var Sa=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props.channelPrefError;!t.channelPrefError&&a&&this.props.openModal({element:this.renderError()})}},{key:"maybeRenderCanThreadLabel",value:function e(){var t=this.props.canThread;var a=Ea.rt("Additionally, <strong>anyone in this channel</strong> will be able to add threaded replies to messages in this channel.");if(t)return r.a.createElement("p",null,a);return null}},{key:"renderError",value:function e(){var t=this.props.onErrorDialogButtonClick;var a=Ea.t("OK");var n=Ea.t("For some weird reason, that didn\u2019t work. Please try again.");var i=Ea.t("Could not update settings");return r.a.createElement("div",null,r.a.createElement(wa["a"],{goButtonText:a,showCancelButton:false,onGo:t,onCancel:t,title:i},r.a.createElement("p",null,n)))}},{key:"renderWhoCanPostLabel",value:function e(){var t=void 0;t=this.props.featureDefaultSharedChannels?{ra:Ea.t("Everyone"),regular:Ea.t("Everyone, except guests"),org_admin:Ea.t("Only Org Admins and Owners"),multi:Ea.t("Only Org Admins and Owners, plus select members")}:{ra:Ea.t("Everyone"),regular:Ea.t("Everyone, except guests"),admin:Ea.t("Only Org Admins and Owners, and Workspace Admins and Owners"),multi:Ea.t("Org Admins and Owners, Workspace Admins and Owners, plus selected members")};var a=this.props.whoCanPost;var n=Ea.rt("<strong>{text}</strong> will be able to post",{text:w.a.get(t,a)});return r.a.createElement("p",null,n)}},{key:"render",value:function e(){var t=Ea.t("Please note that these changes may take some time to complete.");return r.a.createElement("div",{className:"p-channel-options--content_text"},this.renderWhoCanPostLabel(),this.maybeRenderCanThreadLabel(),t)}}]);return t}(n["PureComponent"]);Sa.displayName="PostingPermissionsReview";Sa.defaultProps=ja;var Ia={openModal:C["openModal"]};var Ta=Object(s["connect"])(null,Ia)(Sa);var Na=new L["b"]("channel_options");var Aa={additionalVerificationError:k.a.oneOfType([k.a.string,k.a.object]),additionalVerificationGood:k.a.bool,channelNameNeedsChecking:k.a.bool,channel:k.a.object.isRequired,isCheckingAdditionalVerification:k.a.bool,name:k.a.string,onInvalidName:k.a.func,onValidName:k.a.func};var Ra={additionalVerificationError:"",additionalVerificationGood:false,channelNameNeedsChecking:false,isCheckingAdditionalVerification:false,name:"",onInvalidName:O["noop"],onValidName:O["noop"]};var Ma=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.title=a.props.name;"#"===a.title[0]&&(a.title=a.title.substr(1));return a}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalVerificationError,n=t.additionalVerificationGood,i=t.channelNameNeedsChecking,o=t.channel,s=t.isCheckingAdditionalVerification,l=t.name,c=t.onInvalidName,u=t.onValidName;return r.a.createElement("div",{className:"top_margin"},r.a.createElement("label",{htmlFor:"channel_create_title",className:"c-label"},r.a.createElement("span",{className:"c-label__text"},Na.t("Name"))),r.a.createElement(we,{additionalVerificationError:a,additionalVerificationGood:n,channel:o,nameNeedsChecking:i,id:"channel_create_title",isCheckingAdditionalVerification:s,onInvalid:c,onValid:u,placeholder:Na.t("Rename {title}",{title:l}),shouldFix:true,value:this.title}))}}]);return t}(n["PureComponent"]);Ma.displayName="RenameChannel";Ma.defaultProps=Ra;var xa=Ma;var Pa={channel:k.a.object.isRequired,channelName:k.a.string,strong:k.a.bool};var Da={channel:{},channelName:"",strong:false};var Fa=function e(t){var a=t.channel,n=t.strong;var i=t.channelName||Object(x["getDisplayName"])(a);var o=null;if(Object(x["isPublicChannel"])(a)||Object(x["isPrivateChannel"])(a)){var s=ee()({"c-icon--align-hashmark":!Object(x["isPrivateChannel"])(a)});o=r.a.createElement(te["a"],{className:s,align:"baseline",inherit:true,type:Object(x["isPrivateChannel"])(a)?"lock":"channel"})}var l=null;Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?l=r.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(x["isPendingExternallySharedChannel"])(a)?l=r.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(x["isSharedPublicOrPrivateChannel"])(a)&&(l=r.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels"}));var c=ee()({bold:n});return r.a.createElement("span",{className:c},o,i,l)};Fa.displayName="FormattedChannelName";Fa.defaultProps=Da;var La=Fa;var Ba=new L["b"]("shared_channels");var Ua={channel:k.a.object.isRequired,team:k.a.object.isRequired,externalTeams:k.a.array.isRequired,showLastChannelWarning:k.a.bool,clogger:k.a.object.isRequired};var qa={channel:{},team:{},externalTeams:[],showLastChannelWarning:false,clogger:{}};var Ga=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.maybeRenderLastChannelWarning=a.maybeRenderLastChannelWarning.bind(a);return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,n=t.showLastChannelWarning;a.track("SHARED_CHANNELS_STOP_SHARING_MODAL_OPEN",{is_last_channel_with_team:n,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_CHANNEL_OPTIONS_STOP_SHARING_OPTION",ui_component:"CHANNEL_OPTIONS_DIALOG"}}})}},{key:"maybeRenderLastChannelWarning",value:function e(){if(!this.props.showLastChannelWarning)return null;var t=this.props.externalTeams.map(function(e){var t=e.name;return t});var a=Object(L["f"])(t,{react:true,strong:true});return r.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_error margin_bottom_150"},r.a.createElement("div",{className:"c-alert__message"},r.a.createElement("strong",null,Ba.rt("This is your only shared channel with {teamNames}",{teamNames:a})),r.a.createElement("br",null),Ba.t("If you stop sharing this channel, you won\u2019t be able to direct message members of their workspace.")))}},{key:"render",value:function e(){var t=this.props,a=t.channel,n=t.team,i=t.externalTeams;var o=i.map(function(e){return Object(F["getTeamDisplayName"])(e)});var s=Object(L["f"])(o,{react:true,strong:true});var l=Object(L["f"])([Object(F["getTeamDisplayName"])(n)].concat(Ut()(o)),{react:true,strong:true});return r.a.createElement("div",null,this.maybeRenderLastChannelWarning(),r.a.createElement("p",{className:"p-channel-options--content_text"},Ba.t("You can stop sharing this channel at any time. Here\u2019s what will happen:")),r.a.createElement("ul",{className:"p-channel-options--content_text"},r.a.createElement("li",null,Ba.rt("{teamNames} will keep separate copies of this channel.",{teamNames:l})),r.a.createElement("li",null,Ba.t("Each workspace can continue using their copy.")),r.a.createElement("li",null,Ba.t("Neither workspace will be able to re-share this channel."))),r.a.createElement("p",{className:"p-channel-options--content_text"},Ba.rt("Are you sure you want to stop sharing {channelName} with {teamNames}?",{channelName:r.a.createElement(La,{channel:a,strong:true}),teamNames:s})))}}]);return t}(n["PureComponent"]);Ga.displayName="StopSharingChannel";Ga.defaultProps=qa;function Ha(e,t){var a=t.channel;return{team:Object(R["getCurrentTeam"])(e),externalTeams:Object(x["getSharedTeamIds"])(a).map(function(t){return Object(R["getTeamById"])(e,t)}),clogger:Object(U["a"])({state:e})}}var Wa=Object(s["connect"])(Ha)(Ga);function Va(e){var t="";e&&(t="type:all");return t}function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n="";if("multi"===e){n=a?"type:org_admin":"type:admin";t&&t.length&&t.forEach(function(e){n+=",user:"+e})}else n="type:"+e;return n}var Qa=new L["b"]("channel_options");var Ka=new L["b"]("client");var Ya=new L["b"]("ui_validation");var Ja={0:"all_options",1:"archive",2:"share_external",3:"stop_sharing_external",4:"convert_private",5:"rename",6:"export",7:"delete",8:"purpose",9:"retention",10:"posting_privilege",11:"posting_privilege_review",12:"manage_org_access",13:"manage_org_access_name_conflict",14:"manage_org_access_review"};var Za={additionalParams:k.a.object,archiveChannelApi:k.a.func.isRequired,cancelExternalSharedChannelInviteApi:k.a.func.isRequired,callEnterpriseNameTaken:k.a.func.isRequired,channel:k.a.object,submitChannelPurpose:k.a.func.isRequired,channelRetentionDuration:k.a.number,channelRetentionType:k.a.number,convertToOrgShared:k.a.func.isRequired,convertChannelToPrivateApi:k.a.func.isRequired,currentMember:k.a.object,currentTeam:k.a.object,disableConvertToPrivate:k.a.bool,disableRename:k.a.bool,disconnectChannel:k.a.func.isRequired,dmRetentionDuration:k.a.number,dmRetentionType:k.a.number,externalSharedTeams:k.a.array,getChannelOrgOriginatingTeam:k.a.func.isRequired,getExternalTeamIdsConnectedOnlyByChannel:k.a.func.isRequired,groupRetentionDuration:k.a.number,groupRetentionType:k.a.number,onCancel:k.a.func.isRequired,orgName:k.a.string,pendingSharedExternalSharedTeamNames:k.a.array,preselectedSection:k.a.string,renameChannelApi:k.a.func.isRequired,showArchive:k.a.bool.isRequired,showConvertToPrivate:k.a.bool.isRequired,showDataRetention:k.a.bool.isRequired,showDelete:k.a.bool.isRequired,showExport:k.a.bool.isRequired,showManageOrgAccess:k.a.bool.isRequired,showPostingPermissions:k.a.bool.isRequired,showPurpose:k.a.bool.isRequired,showRename:k.a.bool.isRequired,showShareExternal:k.a.bool.isRequired,showStopShareExternal:k.a.bool.isRequired,teamId:k.a.string,featureDefaultSharedChannels:k.a.bool.isRequired,updateOrgAccessForChannel:k.a.func.isRequired,exportChannelHistory:k.a.func.isRequired,setChannelDeleted:k.a.func.isRequired,getChannelPref:k.a.func.isRequired,setChannelPrefs:k.a.func.isRequired,setChannelPurpose:k.a.func.isRequired,openModal:k.a.func,getDataRetention:k.a.func,setDataRetention:k.a.func,getExternalSharedChannelInviteDetails:k.a.func,featureDegradedSend:k.a.bool,clogger:k.a.object.isRequired};var Xa={additionalParams:{},channel:{},channelRetentionDuration:0,channelRetentionType:0,currentMember:{},currentTeam:{},disableConvertToPrivate:false,disableRename:false,dmRetentionDuration:0,dmRetentionType:0,externalSharedTeams:[],groupRetentionDuration:0,groupRetentionType:0,orgName:"",pendingSharedExternalSharedTeamNames:[],preselectedSection:"",teamId:"",openModal:O["noop"],getDataRetention:O["noop"],setDataRetention:O["noop"],getExternalSharedChannelInviteDetails:O["noop"],featureDegradedSend:false,clogger:{}};var $a={children:r.a.createElement("div",null),title:"",qa:"filler"};var en=0;var tn=1;var an=1;var nn=0;var rn=2;var on=0;var sn=function e(t){var a=Object(O["invert"])(Ja);return+a[t]};var ln=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.channelNameOnInvalidName=a.channelNameOnInvalidName.bind(a);a.channelNameOnValidName=a.channelNameOnValidName.bind(a);a.channelNameOrgValidation=a.channelNameOrgValidation.bind(a);a.closeAlertDialog=a.closeAlertDialog.bind(a);a.closeModal=a.closeModal.bind(a);a.getChannelRetentionPrefs=a.getChannelRetentionPrefs.bind(a);a.getPostingPermissionPrefs=a.getPostingPermissionPrefs.bind(a);a.goBackToAllOptions=a.goBackToAllOptions.bind(a);a.goBackToManageAccessPrevStep=a.goBackToManageAccessPrevStep.bind(a);a.goToStep=a.goToStep.bind(a);a.manageOrgAccessSave=a.manageOrgAccessSave.bind(a);a.onChangeCheckboxCanThread=a.onChangeCheckboxCanThread.bind(a);a.onChangeCheckboxDelete=a.onChangeCheckboxDelete.bind(a);a.onChangeManageOrgAccessShareWith=a.onChangeManageOrgAccessShareWith.bind(a);a.onChangeManageOrgAccessTeamPicker=a.onChangeManageOrgAccessTeamPicker.bind(a);a.onChangeRadioWhoCanPost=a.onChangeRadioWhoCanPost.bind(a);a.onChangeValueSelectedMembers=a.onChangeValueSelectedMembers.bind(a);a.onChannelPurposeTextareaChange=a.onChannelPurposeTextareaChange.bind(a);a.onChannelPurposeValidationChange=a.onChannelPurposeValidationChange.bind(a);a.onClickArchiveInsteadDelete=a.onClickArchiveInsteadDelete.bind(a);a.onClickArchiveOption=a.onClickArchiveOption.bind(a);a.onClickConvertToPrivateOption=a.onClickConvertToPrivateOption.bind(a);a.onClickDataRetentionOption=a.onClickDataRetentionOption.bind(a);a.onClickDeleteOption=a.onClickDeleteOption.bind(a);a.onClickExportOption=a.onClickExportOption.bind(a);a.onClickManageOrgAccessOption=a.onClickManageOrgAccessOption.bind(a);a.onClickPostingPermissionsOption=a.onClickPostingPermissionsOption.bind(a);a.onClickPurposeOption=a.onClickPurposeOption.bind(a);a.onClickRenameOption=a.onClickRenameOption.bind(a);a.onClickShareExternalOption=a.onClickShareExternalOption.bind(a);a.onClickCancelExternalSharedChannelInvite=a.onClickCancelExternalSharedChannelInvite.bind(a);a.onClickStopShareExternalOption=a.onClickStopShareExternalOption.bind(a);a.onErrorDialogButtonClick=a.onErrorDialogButtonClick.bind(a);a.onRetentionDurationChange=a.onRetentionDurationChange.bind(a);a.onRetentionDurationUnitChange=a.onRetentionDurationUnitChange.bind(a);a.onRetentionTypeChange=a.onRetentionTypeChange.bind(a);a.setManageOrgAccessLoaded=a.setManageOrgAccessLoaded.bind(a);a.setPostingPermissionsLoaded=a.setPostingPermissionsLoaded.bind(a);a.setPostingPermissionsSelectedMembers=a.setPostingPermissionsSelectedMembers.bind(a);a.setRetentionLoaded=a.setRetentionLoaded.bind(a);a.showAlertDialog=a.showAlertDialog.bind(a);a.showSuccessAlert=a.showSuccessAlert.bind(a);a.maybeDisableRetentionGoButton=a.maybeDisableRetentionGoButton.bind(a);a.saveRetention=a.saveRetention.bind(a);a.showRetentionDialog=a.showRetentionDialog.bind(a);a.hideRetentionDialog=a.hideRetentionDialog.bind(a);a.handleRetentionCheckboxChange=a.handleRetentionCheckboxChange.bind(a);a.durationInputRef=a.durationInputRef.bind(a);var n=a.props,r=n.channel,i=n.currentTeam;var o=[];var s=[];var l="";if(Object(x["isOrgSharedPublicOrPrivateChannel"])(r))Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(r)||(o=Object(x["getSharedTeamIds"])(r));else{s=[i.id];l=i.id}a.state={canThread:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false,channelNameOrgIsCheckingVerification:false,channelNameValid:false,channelPrefError:false,channelToBeShared:false,goButtonIsDisabled:false,goButtonIsPending:false,isOnlyChannelWithExternalTeam:false,manageOrgAccessDisabledTeamIds:s,manageOrgAccessLoaded:false,manageOrgAccessOriginatingTeamId:l,manageOrgAccessPreviousStep:"manage_org_access",manageOrgAccessShareWith:Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(a.props.channel)?"all":"specific",manageOrgAccessTeamIds:o,newChannelName:null,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,retentionDuration:0,retentionDurationUnit:0,retentionLoaded:false,retentionType:0,isRetentionCheckboxChecked:false,showBackButton:false,showCancelButton:false,showGoButton:false,showSuccessAlert:false,successAlertHeading:"",successAlertText:"",teamRetentionDuration:0,teamRetentionType:0,whoCanPost:null};a.debouncedChannelNameOrgValidation=Object(O["debounce"])(a.actuallyCallChannelNameOrgValidation,325,{trailing:true});a.modalRef=null;a.steps=[];a.pendingChannelNameOrgValidation=null;return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.preselectedSection,n=t.showArchive,r=t.showConvertToPrivate,i=t.showDataRetention,o=t.showDelete,s=t.showExport,l=t.showManageOrgAccess,c=t.showPostingPermissions,u=t.showPurpose,d=t.showRename;this.maybeCheckIfLastChannelWithExternalTeam();if(a.length)switch(a){case"archive":n&&this.onClickArchiveOption();break;case"convert_private":r&&this.onClickConvertToPrivateOption();break;case"convert_shared":case"manage_teams":l&&this.onClickManageOrgAccessOption();break;case"delete":o&&this.onClickDeleteOption();break;case"export":s&&this.onClickExportOption();break;case"posting_privilege":c&&this.onClickPostingPermissionsOption();break;case"purpose":u&&this.onClickPurposeOption();break;case"rename":d&&this.onClickRenameOption();break;case"retention":i&&this.onClickDataRetentionOption();break;default:break}}},{key:"componentDidUpdate",value:function e(t,a){var n=this.state.isRetentionCheckboxChecked;this.retentionDialog&&n!==a.isRetentionCheckboxChecked&&this.retentionDialog.render({goButtonIsDisabled:!n,goOnEnterPressed:n})}},{key:"onClickArchiveOption",value:function e(){this.goButtonIsDisabled(false);this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("archive")}},{key:"onClickShareExternalOption",value:function e(){Object(M["c"])({model_ob:this.props.channel,element:"shared_channels_channel_options_share_option"});this.closeModal()}},{key:"onClickCancelExternalSharedChannelInvite",value:function e(t){var a=this;var n=this.props,r=n.channel,i=n.currentMember,o=n.pendingSharedExternalSharedTeamNames;this.props.getExternalSharedChannelInviteDetails({channelId:r.id,targetTeamId:t}).then(function(e){var n=o[0];var s=e.invite.inviting_user;var l=Ka.t("Oops, something went wrong.");var c=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");if(s.id===i.id)a.props.cancelExternalSharedChannelInviteApi({channelId:r.id,targetTeamId:t}).then(function(){a.showSuccessAlert({heading:Qa.t("Canceled invitation"),text:Qa.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:n})})}).catch(function(e){a.showAlertDialog({message:c,title:l});throw e});else{var u=Qa.t("Cancel invitation?");var d=Qa.rt("This invitation was originally sent by <strong>{inviterName}</strong> to <strong>{targetTeamName}</strong>. Are you sure you want to cancel?",{inviterName:s.profile.real_name,targetTeamName:n});var p=function e(){return a.props.cancelExternalSharedChannelInviteApi({channelId:r.id,targetTeamId:t}).then(function(){a.closeAlertDialog();a.showSuccessAlert({heading:Qa.t("Canceled invitation"),text:Qa.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:n})})}).catch(function(e){a.showAlertDialog({message:c,title:l});throw e})};a.showAlertDialog({cancelButtonText:Qa.t("Never Mind"),goButtonText:Qa.t("Cancel Invitation"),goButtonType:"danger",message:d,onGo:p,onCancel:a.closeAlertDialog,showCancelButton:true,title:u})}})}},{key:"onClickStopShareExternalOption",value:function e(){if(W()){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("stop_sharing_external")}else{V(this.props.channel);this.closeModal()}}},{key:"onClickConvertToPrivateOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("convert_private")}},{key:"onClickRenameOption",value:function e(){var t=this;this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.hideSuccessAlert();var a=true;if(this.props.additionalParams.name&&this.props.additionalParams.name.length){a=false;this.setState(function(){return{newChannelName:t.props.additionalParams.name,channelNameNeedsChecking:true}})}this.goButtonIsDisabled(a);this.showGoButton(true);this.goToStep("rename")}},{key:"onClickExportOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("export")}},{key:"onClickDeleteOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.goButtonIsDisabled(true);this.hideSuccessAlert();this.goToStep("delete")}},{key:"onClickPurposeOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("purpose")}},{key:"onClickDataRetentionOption",value:function e(){this.goButtonIsPending(false);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("retention");this.getChannelRetentionPrefs()}},{key:"onClickPostingPermissionsOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("posting_privilege");this.getPostingPermissionPrefs()}},{key:"onClickManageOrgAccessOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("manage_org_access");this.maybeGetOriginatingTeamAndCurrentAccess();this.setState(function(){return{channelToBeShared:true}})}},{key:"onRetentionTypeChange",value:function e(t){var a=this;var n=parseInt(t.target.value,10);this.setState(function(){return{retentionType:n}},function(){a.maybeDisableRetentionGoButton();n===tn&&a.retentionDurationInput.focus()})}},{key:"onRetentionDurationChange",value:function e(t){this.setState(function(){return{retentionDuration:parseInt(t,10)}},this.maybeDisableRetentionGoButton)}},{key:"onRetentionDurationUnitChange",value:function e(t){this.setState(function(){return{retentionDurationUnit:t}},this.maybeDisableRetentionGoButton)}},{key:"onChangeManageOrgAccessShareWith",value:function e(t){var a=t.target.value;this.setState(function(){return{manageOrgAccessShareWith:a}})}},{key:"onChangeManageOrgAccessTeamPicker",value:function e(t){var a=[];this.goButtonIsDisabled(!t.length);if(t.length){t.forEach(function(e){a.push(e.team.id)});this.setState(function(){return{manageOrgAccessTeamIds:a}})}}},{key:"onChangeCheckboxDelete",value:function e(t){var a=t.target.checked;this.goButtonIsDisabled(!a)}},{key:"onClickArchiveInsteadDelete",value:function e(t){t.preventDefault();this.onClickArchiveOption()}},{key:"onChannelPurposeTextareaChange",value:function e(t){this.newChannelPurpose(t.target.value)}},{key:"onChannelPurposeValidationChange",value:function e(t){this.goButtonIsDisabled(t)}},{key:"onChangeCheckboxCanThread",value:function e(t){var a=t.target.checked;this.setCanThreadPermission(a)}},{key:"onChangeRadioWhoCanPost",value:function e(t){var a=t.target.value;this.setWhoCanPostPermission(a)}},{key:"onChangeValueSelectedMembers",value:function e(t){var a=[];t.forEach(function(e){e.member&&a.push(e.member.id)});this.setPostingPermissionsSelectedMembers(a)}},{key:"onErrorDialogButtonClick",value:function e(){this.setChannelPrefError(false)}},{key:"getChannelRetentionPrefs",value:function e(){var t=this;var a=this.props,n=a.channel,r=a.groupRetentionType,i=a.groupRetentionDuration,o=a.dmRetentionType,s=a.dmRetentionDuration,l=a.channelRetentionType,c=a.channelRetentionDuration;this.props.getDataRetention(n).then(function(e){var a=void 0;var u=void 0;if(Object(x["isPrivateChannel"])(n)){a=parseInt(r,10);u=parseInt(i,10)}else if(Object(x["isIm"])(n)||Object(x["isMpim"])(n)){a=parseInt(o,10);u=parseInt(s,10)}else{a=parseInt(l,10);u=parseInt(c,10)}var d=parseInt(e.retentionType,10);var p=parseInt(e.retentionDuration,10);t.setState(function(){return{retentionDuration:p,retentionType:d,teamRetentionDuration:u,teamRetentionType:a}});t.setRetentionLoaded(true)})}},{key:"setRetentionLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{retentionLoaded:t}})}},{key:"getPostingPermissionPrefs",value:function e(){var t=this;var a=this.props,n=a.channel,r=a.featureDefaultSharedChannels;var i=[this.props.getChannelPref({channelId:n.id,prefName:"who_can_post"})];r&&i.push(this.props.getChannelPref({channelId:n.id,prefName:"can_thread"}));Promise.all(i).then(function(e){var a=e[0];if(!a.ok||!a.pref_value)return;var n=a.pref_value;if(n.type)if(n.user&&n.user.length&&("admin"===n.type[0]||"owner"===n.type[0]||"org_admin"===n.type[0])){t.setWhoCanPostPermission("multi");t.setPostingPermissionsSelectedMembers(n.user)}else t.setWhoCanPostPermission(n.type[0]);else t.setWhoCanPostPermission("ra");if(r){var i=e[1];if(!i.ok||!i.pref_value)return;var o=i.pref_value;o.type?t.setCanThreadPermission("all"===o.type[0]):t.setCanThreadPermission(false)}t.setPostingPermissionsLoaded(true);t.showCancelButton(true);t.showGoButton(true)})}},{key:"setCanThreadPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{canThread:t}})}},{key:"setPostingPermissionsLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{postingPermissionsLoaded:t}})}},{key:"setWhoCanPostPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{whoCanPost:t}})}},{key:"setChannelPrefError",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{channelPrefError:t}})}},{key:"setPostingPermissionsSelectedMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{postingPermissionsSelectedMembers:t}})}},{key:"setManageOrgAccessLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{manageOrgAccessLoaded:t}})}},{key:"maybeDisableRetentionGoButton",value:function e(){var t=this.state,a=t.retentionType,n=t.retentionDuration,r=t.retentionDurationUnit;var i=r===on?n:365*n;this.goButtonIsDisabled(!it({retentionType:a,retentionDuration:i}))}},{key:"goToStep",value:function e(t){var a=sn(t);if(a){this.modalRef.setStepNumber(a+1);return}this.modalRef.setStepNumber(1)}},{key:"maybeGetOriginatingTeamAndCurrentAccess",value:function e(){var t=this;var a=this.props.channel;var n=this.state,r=n.manageOrgAccessDisabledTeamIds,i=n.manageOrgAccessLoaded,o=n.manageOrgAccessTeamIds;if(i){this.showCancelButton(true);this.showGoButton(true);return}var s=[];Object(x["isOrgSharedPublicOrPrivateChannel"])(a)&&s.push(this.props.getChannelOrgOriginatingTeam(a.id));Promise.all(s).then(function(e){var n=o;var i=r;var s=t.state.manageOrgAccessOriginatingTeamId;if(Object(x["isOrgSharedPublicOrPrivateChannel"])(a)){s=e[0].team.id;i=[s]}n=Object(O["uniq"])(t.state.manageOrgAccessTeamIds.concat(s));t.setState(function(){return{manageOrgAccessDisabledTeamIds:i,manageOrgAccessOriginatingTeamId:s,manageOrgAccessTeamIds:n}});t.manageOrgAccessFilterFunction=H({preselected_ids:n,disabled_ids:i,sort_items_function:function e(t,a){var n=t.name.toLowerCase();var r=a.name.toLowerCase();if(n<r)return-1;if(r<n)return 1;return 0},secondary_sort_items_function:function e(t,a){if(t.id===s)return-1;if(a.id===s)return 1;return 0}});t.manageOrgAccessFilterFunction("").then(function(){t.showCancelButton(true);t.showGoButton(true);t.setManageOrgAccessLoaded(true)})}).catch(function(e){var a=Ka.t("Oops, something went wrong.");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:n,title:a});throw e})}},{key:"maybeCheckIfLastChannelWithExternalTeam",value:function e(){var t=this;var a=this.props.channel;var n="channel-options/maybeCheckIfLastChannelWithExternalTeam";Object(x["isSharedPublicOrPrivateChannel"])(a)&&W()&&this.props.getExternalTeamIdsConnectedOnlyByChannel({channelId:a.id,reason:n}).then(function(e){t.setState(function(){return{isOnlyChannelWithExternalTeam:!!e.length}})})}},{key:"closeModal",value:function e(){this.alertDialog&&this.alertDialog.close();this.retentionDialog&&this.retentionDialog.close();this.props.onCancel()}},{key:"goBackToAllOptions",value:function e(){this.goButtonIsPending(false);this.showBackButton(false);this.showCancelButton(false);this.showGoButton(false);this.goButtonIsDisabled(false);this.goToStep("all_options")}},{key:"goButtonIsDisabled",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsDisabled:t}})}},{key:"goButtonIsPending",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsPending:t}})}},{key:"showBackButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showBackButton:t}})}},{key:"showCancelButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showCancelButton:t}})}},{key:"showGoButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showGoButton:t}})}},{key:"newChannelPurpose",value:function e(t){this.setState(function(){return{newChannelPurpose:t}})}},{key:"actuallyCallChannelNameOrgValidation",value:function e(t){var a=this;var n=this.props.channel;if(Object(x["getDisplayName"])(n)===t){this.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});this.goButtonIsDisabled(true);return}this.pendingChannelNameOrgValidation=this.props.callEnterpriseNameTaken({channel:n,newChannelName:t});this.pendingChannelNameOrgValidation.then(function(e){var i=a.props,o=i.currentTeam,s=i.orgName;var l=void 0;var c="";if(!e.ok||e.name_taken){l=false;c=a.state.channelToBeShared?Qa.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:t,orgName:s,teamName:Object(F["getTeamDisplayName"])(o)},function(e){var a=e.key,i=e.tag,o=e.text;if("strong"===i)return r.a.createElement("strong",{key:a+"-1"},ne(a,n,t));return r.a.createElement("strong",{key:a},o)}):Qa.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name.",{name:t,orgName:s,teamName:Object(F["getTeamDisplayName"])(o)},function(e){var a=e.key,i=e.tag,o=e.text;if("strong"===i)return r.a.createElement("strong",{key:a+"-1"},ne(a,n,t));return r.a.createElement("strong",{key:a},o)})}else l=true;a.goButtonIsDisabled(!l);a.setState(function(){return{channelNameAdditionalVerificationError:c,channelNameOrgIsCheckingVerification:false,channelNameValid:l}})}).catch(function(e){a.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});a.goButtonIsDisabled(true);var t=Ka.t("Oops, something went wrong.");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");a.showAlertDialog({message:n,title:t});throw e})}},{key:"channelNameOrgValidation",value:function e(t){this.setState(function(){return{channelNameOrgIsCheckingVerification:true}});this.pendingChannelNameOrgValidation&&this.pendingChannelNameOrgValidation.cancel();this.debouncedChannelNameOrgValidation(t)}},{key:"channelNameOnInvalidName",value:function e(){this.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false}});this.goButtonIsDisabled(true)}},{key:"channelNameOnValidName",value:function e(t){var a=t.value;var n=this.props.channel;var r=this.state.channelToBeShared;this.setState(function(){return{channelNameAdditionalVerificationError:"",newChannelName:a,channelNameNeedsChecking:false}});Object(x["isOrgSharedPublicOrPrivateChannel"])(n)||r?this.channelNameOrgValidation(a):this.goButtonIsDisabled(false)}},{key:"manageOrgAccessSave",value:function e(){var t=this;this.goButtonIsPending(true);var a=this.props,n=a.channel,r=a.teamId;var i=this.state,o=i.manageOrgAccessShareWith,s=i.manageOrgAccessTeamIds;var l="all"===o;var u={orgWide:l};if(Object(x["isOrgSharedPublicOrPrivateChannel"])(n)){l||(u.teamIds=s);this.props.updateOrgAccessForChannel(d()({channelId:n.id},u)).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var a=Qa.t("Could not update settings");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:n,title:a});throw e})}else{l||(u.targetDomains=s.map(function(e){var t=Object(c["c"])(r);var a=Object(R["getTeamById"])(t,e);return a.domain}));var p=[];this.makeChannelName()!==Object(x["getDisplayName"])(n)&&p.push(this.props.renameChannelApi({channel:n,newName:this.state.newChannelName}));Promise.all(p).then(function(){return t.props.convertToOrgShared(d()({channel:n},u))}).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var a=Qa.t("Could not update settings");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:n,title:a});throw e})}}},{key:"makeChannelName",value:function e(){var t=this.props.channel;var a=this.state.newChannelName;return a&&a.length?a:Object(x["getDisplayName"])(t)}},{key:"showAlertDialog",value:function e(t){var a=t.title,n=t.message,i=t.cancelButtonText,o=void 0===i?"":i,s=t.goButtonText,l=void 0===s?"":s,c=t.goButtonType,u=void 0===c?"primary":c,p=t.onGo,f=void 0===p?O["noop"]:p,m=t.onCancel,h=void 0===m?O["noop"]:m,v=t.onClose,g=void 0===v?this.closeAlertDialog:v,b=t.showCancelButton,_=void 0!==b&&b;var y={cancelButtonText:o,children:r.a.createElement("p",null,n),goButtonText:l,goButtonType:u,onCancel:h,onClose:g,onGo:f,showCancelButton:_,title:a};this.alertDialog?this.alertDialog.render(d()({},y)):this.alertDialog=this.props.openModal({element:r.a.createElement(z["a"],y),isStackable:true})}},{key:"closeAlertDialog",value:function e(){this.setState(function(){return{goButtonIsPending:false}});this.alertDialog=null}},{key:"showSuccessAlert",value:function e(t){var a=t.heading,n=t.text;this.setState(function(){return{showSuccessAlert:true,successAlertHeading:a,successAlertText:n}})}},{key:"hideSuccessAlert",value:function e(){this.setState(function(){return{showSuccessAlert:false}})}},{key:"goBackToManageAccessPrevStep",value:function e(){this.goToStep(this.state.manageOrgAccessPreviousStep)}},{key:"saveRetention",value:function e(){var t=this;var a=this.state,n=a.retentionType,r=a.retentionDuration,i=a.retentionDurationUnit;var o=this.props.channel;this.goButtonIsPending(true);this.props.setDataRetention({channel:o,retentionDuration:ot({retentionDuration:r,retentionDurationUnit:i}),retentionType:n}).then(function(e){t.goButtonIsPending(false);if(!e.ok){var a=Ka.t("Oops, something went wrong.");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:n,title:a});return}t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var a=Ka.t("Oops, something went wrong.");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:n,title:a});throw e})}},{key:"showRetentionDialog",value:function e(){this.retentionDialog=this.props.openModal({element:this.renderRetentionDialog(),isStackable:true})}},{key:"hideRetentionDialog",value:function e(){this.setState(function(){return{isRetentionCheckboxChecked:false}})}},{key:"handleRetentionCheckboxChange",value:function e(){this.setState(function(e){return{isRetentionCheckboxChecked:!e.isRetentionCheckboxChecked}})}},{key:"durationInputRef",value:function e(t){this.retentionDurationInput=t}},{key:"renderRetentionDialog",value:function e(){var t=this.state,a=t.retentionType,n=t.retentionDuration,i=t.retentionDurationUnit,o=t.teamRetentionType,s=t.teamRetentionDuration;var l=this.props.channel;var c=ot({retentionDuration:n,retentionDurationUnit:i});var u=void 0;switch(a){case en:switch(o){case an:u=Qa.t("Use the default workspace retention settings \u2014 Keep everything");break;case nn:u=Qa.t("Use the default workspace retention settings \u2014 Keep messages, but don\u2019t track revisions");break;case rn:u=Qa.t("Use the default workspace retention settings \u2014 Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted.",{duration:s,fallbackHash:"7480a828b3b52106d6407a4e8f29e489ed887722"});break;default:u=Qa.t("Use the default workspace retention settings \u2014 Keep everything");break}break;case tn:if(c>364){var d=Object(O["round"])(c/365,1);u=Qa.t("Messages older than {duration, plural, =1 {# day} other {# days}} ({durationInYears, plural, =1 {# year} other {# years}}) will be deleted",{duration:c,durationInYears:d,fallbackHash:"2641d4c8882584eb6bee3cdb1172b02f43b9881f"})}else u=Qa.t("Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted",{duration:c,fallbackHash:"1f76675f52cc8078d8373c5e7d241070bba730c3"});break;default:u=Qa.t("Use the default workspace retention settings");break}return r.a.createElement(Y["a"],{title:Qa.t("Apply new retention settings?"),goButtonText:Qa.t("Apply Settings"),goButtonType:"danger",onCancel:this.hideRetentionDialog,onGo:this.saveRetention,goButtonIsDisabled:!this.state.isRetentionCheckboxChecked,goOnEnterPressed:this.state.isRetentionCheckboxChecked,shouldCloseOnGo:false},r.a.createElement(X["a"],{level:"error"},Qa.rt("<strong>Warning:</strong> Messages deleted by retention settings are truly, permanently deleted. These messages can\u2019t be restored or recovered, even by Slack.")),r.a.createElement("strong",null,Qa.t("Here\u2019s what your new settings will be:")),r.a.createElement("ul",{className:"margin_top_100"},r.a.createElement("li",null,Object(x["isIm"])(l)||Object(x["isMpim"])(l)?Qa.t("In this conversation: {newSetting}",{newSetting:u}):Qa.t("In this channel: {newSetting}",{newSetting:u}))),r.a.createElement(Z["a"],{text:Qa.rt("<strong>Yes, apply these new settings</strong>"),htmlFor:"dataRetentionOverrideConfirm",type:"inline",cursor:"pointer"},r.a.createElement(J["a"],{id:"dataRetentionOverrideConfirm",isRequired:true,onChange:this.handleRetentionCheckboxChange})))}},{key:"renderOptionsListHeader",value:function e(t,a){var n=void 0;n=a||Qa.rt("Additional options for <span>{name}</span>",{name:Object(x["getDisplayName"])(t)},function(e){var a=e.key;return ne(a,t)});return r.a.createElement("span",{className:"channel_options_header"},n)}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.additionalParams,i=a.currentMember,o=a.channel,s=a.currentTeam,l=a.disableConvertToPrivate,c=a.disableRename,u=a.externalSharedTeams,p=a.onCancel,f=a.pendingSharedExternalSharedTeamNames,m=a.showArchive,h=a.showConvertToPrivate,v=a.showDataRetention,g=a.showDelete,b=a.showExport,_=a.showManageOrgAccess,y=a.showPostingPermissions,k=a.showPurpose,w=a.showRename,E=a.showShareExternal,C=a.showStopShareExternal;var j=this.state,S=j.canThread,I=j.channelNameAdditionalVerificationError,N=j.channelNameNeedsChecking,A=j.channelNameOrgIsCheckingVerification,R=j.channelNameValid,M=j.channelPrefError,P=j.goButtonIsDisabled,D=j.goButtonIsPending,F=j.manageOrgAccessDisabledTeamIds,L=j.manageOrgAccessLoaded,U=j.manageOrgAccessOriginatingTeamId,q=j.manageOrgAccessShareWith,G=j.manageOrgAccessTeamIds,H=j.newChannelName,W=j.newChannelPurpose,V=j.postingPermissionsLoaded,z=j.postingPermissionsSelectedMembers,Y=j.retentionDuration,J=j.retentionDurationUnit,Z=j.retentionLoaded,X=j.retentionType,$=j.showBackButton,ee=j.showCancelButton,te=j.showGoButton,ae=j.showSuccessAlert,re=j.successAlertHeading,ie=j.successAlertText,oe=j.teamRetentionDuration,se=j.teamRetentionType,ce=j.whoCanPost;var ue={buttonAlignment:"right",goButtonIsDisabled:P,goButtonIsPending:D,showBackButton:$,showCancelButton:ee,showGoButton:te,withHeader:true};this.steps=[d()({contentLabel:"Additional Options for "+Object(x["getDisplayName"])(o),title:this.renderOptionsListHeader(o),children:r.a.createElement(ra,{channel:o,disableConvertToPrivate:l,disableRename:c,modalClasses:"p-channel_options_section",name:Object(x["getDisplayName"])(o),onClickArchive:this.onClickArchiveOption,onClickConvertToPrivate:this.onClickConvertToPrivateOption,onClickDelete:this.onClickDeleteOption,onClickExport:this.onClickExportOption,onClickManageOrgAccess:this.onClickManageOrgAccessOption,onClickPostingPermissions:this.onClickPostingPermissionsOption,onClickPurpose:this.onClickPurposeOption,onClickRename:this.onClickRenameOption,onClickShareExternal:this.onClickShareExternalOption,onClickCancelExternalSharedChannelInvite:this.onClickCancelExternalSharedChannelInvite,onClickStopShareExternal:this.onClickStopShareExternalOption,pendingSharedExternalSharedTeamNames:f,showArchive:m,showConvertToPrivate:h,showDataRetention:v,showDelete:g,showExport:b,showManageOrgAccess:_,showPostingPermissions:y,showPurpose:k,showRename:w,showShareExternal:E,showStopShareExternal:C,showSuccessAlert:ae,successAlertHeading:re,successAlertText:ie}),qa:"all_options"},ue)];m?this.steps.push(d()({children:r.a.createElement(le,{channel:o}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.archiveChannelApi({channel:o});t.closeModal()},goButtonText:Qa.t("Yes, archive the channel"),title:this.renderOptionsListHeader(o,Qa.rt("Archive <strong>{name}</strong>",{name:Object(x["getDisplayName"])(o),fallbackHash:"0cf2d51d33550e37e96cafe433465fa5e0816923"},function(e){var t=e.key;return ne(t,o)})),contentLabel:"Archive "+Object(x["getDisplayName"])(o),qa:"archive"},ue)):this.steps.push($a);E?this.steps.push(d()({children:r.a.createElement("div",null,"Share external option"),onBack:this.goBackToAllOptions,title:"",qa:Ja[2]},ue)):this.steps.push($a);if(C){var de=Qa.rt("Stop sharing {channelName}",{channelName:r.a.createElement(La,{channel:o})});var pe=Qa.t("Stop Sharing");this.steps.push(d()({children:r.a.createElement(Wa,{channel:o,showLastChannelWarning:this.state.isOnlyChannelWithExternalTeam}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var a=Qa.t("This can\u2019t be undone");var n=Qa.rt("You won\u2019t be able to re-share {channelName} with {teamNames} or any other workspace.",{channelName:ne(o.id,o),teamNames:Object(B["a"])(u.map(function(e){var t=e.name;return t}),{react:true,strong:true,conj:"or"})});var r=t.props.clogger;r.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_MODAL_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});var i=function e(){r.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.props.disconnectChannel({channelId:o.id}).then(t.closeModal)};var s=function e(){r.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_CANCEL_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.closeAlertDialog()};t.showAlertDialog({goButtonText:pe,goButtonType:"danger",message:n,onGo:i,onCancel:s,showCancelButton:true,title:a})},goButtonText:pe,goButtonType:"danger",title:this.renderOptionsListHeader(o,de),contentLabel:"Stop sharing "+Object(x["getDisplayName"])(o),qa:"stop_sharing_external"},ue))}else this.steps.push($a);if(h){var fe=void 0;var me=void 0;if(Object(x["isPublicChannel"])(o)||Object(x["isPrivateChannel"])(o)){fe=Qa.rt("Change <strong>{channelName}</strong> to a private channel",{name:Object(x["getDisplayName"])(o)},function(e){var t=e.key;return ne(t,o)});me="Change "+Object(x["getDisplayName"])(o)+" to a private channel"}else{fe=Qa.rt("Convert this conversation to a private channel?",{fallbackHash:"5e50b350a369117078fafe9841785a5576fd4fc5"});me="Convert this conversation to a private channel?"}this.steps.push(d()({children:r.a.createElement($e,{channel:o}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var a=Qa.t("This can\u2019t be undone");var n=Qa.rt("Once {channelName} is made a private channel, it cannot be changed to a public channel again.",{channelName:ne(o.id,o)});var r=Qa.t("Change to Private");t.showAlertDialog({goButtonText:r,goButtonType:"danger",message:n,onGo:function e(){t.props.convertChannelToPrivateApi(o.id).then(t.closeModal)},showCancelButton:true,title:a})},goButtonType:"danger",goButtonText:Qa.t("Change to Private"),title:this.renderOptionsListHeader(o,fe),contentLabel:me,qa:"convert_private"},ue))}else this.steps.push($a);var he=Qa.t("Rename Channel");if(w){var ve={additionalVerificationError:I,additionalVerificationGood:R,channelNameNeedsChecking:N};Object(x["isOrgSharedPublicOrPrivateChannel"])(o)&&(ve.isCheckingAdditionalVerification=A);var ge=Object(x["getDisplayName"])(o);n.name&&(ge=n.name);var be=Qa.rt("Rename <strong>{channelName}</strong>",{channelName:Object(x["getDisplayName"])(o)},function(e){var t=e.key;return ne(t,o)});var _e="Rename "+Object(x["getDisplayName"])(o);this.steps.push(d()({children:r.a.createElement(xa,d()({},ve,{channel:o,name:ge,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName})),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,goButtonText:he,onGo:function e(){t.goButtonIsPending(true);t.props.renameChannelApi({channel:o,newName:H}).then(function(e){t.goButtonIsPending(false);if(!e.ok){if(e.error&&"name_taken"===e.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Ya.t("{name} is already taken by a channel, username, or user group.",{name:H})}});return}t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Ya.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}});return}t.setState(function(){return{channelNameValid:true,channelNameAdditionalVerificationError:""}});t.closeModal()}).catch(function(e){if(e.data&&"name_taken"===e.data.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Ya.t("{name} is already taken by a channel, username, or user group.",{name:H})}});return}t.goButtonIsPending(false);t.setState(function(){return{channelNameAdditionalVerificationError:Ya.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}})})},title:this.renderOptionsListHeader(o,be),contentLabel:_e,qa:"rename"},ue))}else this.steps.push($a);if(b){var ye=void 0;var ke=void 0;if(Object(x["isPublicChannel"])(o)||Object(x["isPrivateChannel"])(o)){ye=Qa.rt("Export message history for <strong>{name}</strong>",{name:Object(x["getDisplayName"])(o),fallbackHash:"7e98401bb334b4d48829e4fdbcd144dc8a101003"},function(e){var t=e.key;return ne(t,o)});ke="Export message history for "+Object(x["getDisplayName"])(o)}else{ye=Qa.rt("Export message history for this conversation",{fallbackHash:"c1d139527fa0d1b5faa28809a3b74d183f848622"});ke="Export message history for this conversation"}this.steps.push(d()({children:r.a.createElement(Tt,null),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.exportChannelHistory(o);t.closeModal()},goButtonText:Qa.t("Export"),title:this.renderOptionsListHeader(o,ye),contentLabel:ke,qa:"export"},ue))}else this.steps.push($a);g?this.steps.push(d()({children:r.a.createElement(jt,{channel:o,showArchiveInstead:this.props.showArchive,onClickArchiveInstead:this.onClickArchiveInsteadDelete,onChangeCheckbox:this.onChangeCheckboxDelete}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.setChannelDeleted(o.id);t.closeModal()},goButtonText:Qa.t("Delete Channel"),goButtonType:"danger",title:this.renderOptionsListHeader(o,Qa.rt("Delete <strong>{name}</strong>",{name:Object(x["getDisplayName"])(o),fallbackHash:"73bcca2ef24ed39c3f2a63fea6c8e9e15150d0d7"},function(e){var t=e.key;return ne(t,o)})),contentLabel:"Delete "+Object(x["getDisplayName"])(o),qa:"delete"},ue,{buttonAlignment:"float_right"})):this.steps.push($a);if(k){var Oe=Qa.rt("Set channel purpose for <strong>{channelName}</strong>",{channelName:Object(x["getDisplayName"])(o)},function(e){var t=e.key;return ne(t,o)});var we="Set channel purpose for "+Object(x["getDisplayName"])(o);this.steps.push(d()({children:r.a.createElement(Qe,{channel:o,purpose:o.purpose,onChannelPurposeTextareaChange:this.onChannelPurposeTextareaChange,onChannelPurposeValidationChange:this.onChannelPurposeValidationChange}),goButtonText:Qa.t("Update Purpose"),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);o.purpose.value!==W&&t.props.submitChannelPurpose({channelId:o.id,purpose:W}).then(function(e){if(t.props.featureDegradedSend){var a=Object(O["get"])(e,"channel.id");var n=Object(O["get"])(e,"channel.purpose");if(!a||!n)return;t.props.setChannelPurpose({id:a,purpose:n})}});t.closeModal()},title:this.renderOptionsListHeader(o,Oe),contentLabel:we,qa:"purpose"},ue))}else this.steps.push($a);if(v){var Ee=void 0;var Ce=void 0;if(Object(x["isPublicChannel"])(o)||Object(x["isPrivateChannel"])(o)){Ee=Qa.rt("Edit message retention for {name}",{name:r.a.createElement(K["b"],{channel:o,inline:true})});Ce="Edit message retention for "+Object(x["getDisplayName"])(o)}else{Ee=Qa.rt("Edit message retention for <strong>this conversation</strong>");Ce="Edit message retention for this conversation"}this.steps.push(d()({children:r.a.createElement(yt,{member:i,team:s,onDurationChange:this.onRetentionDurationChange,onDurationUnitChange:this.onRetentionDurationUnitChange,onTypeChange:this.onRetentionTypeChange,prefsLoaded:Z,retentionDuration:Y,retentionDurationUnit:J,retentionType:X,teamRetentionType:se,teamRetentionDuration:oe,durationInputRef:this.durationInputRef}),goButtonText:Qa.t("Save"),onGo:this.showRetentionDialog,onBack:function e(){t.setRetentionLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,title:this.renderOptionsListHeader(o,Ee),contentLabel:Ce,qa:"retention",stepModalClasses:"p-channel-options__retention_modal"},ue))}else this.steps.push($a);y?this.steps.push(d()({children:r.a.createElement(Oa,{onChangeCheckbox:this.onChangeCheckboxCanThread,onChangeRadio:this.onChangeRadioWhoCanPost,isOrgDefault:Object(x["isOrgDefaultChannel"])(o),canThread:S,whoCanPost:ce,postingPermissionsSelectedMembers:z,onChangeValueSelectedMembers:this.onChangeValueSelectedMembers,postingPermissionsLoaded:V}),onBack:function e(){t.setPostingPermissionsSelectedMembers(null);t.setPostingPermissionsLoaded(false);t.goBackToAllOptions()},goButtonText:Qa.t("Review"),contentLabel:"Manage posting permissions for "+Object(x["getDisplayName"])(o),title:this.renderOptionsListHeader(o,Qa.rt("Manage posting permissions for <strong>{name}</strong>",{name:Object(x["getDisplayName"])(o),fallbackHash:"6e82adeae0a793fe96592833d990efcaf1cc8ab3"},function(e){var t=e.key;return ne(t,o)})),qa:"posting_privilege"},ue),d()({children:r.a.createElement(Ta,{whoCanPost:ce,canThread:S,channelPrefError:M,onErrorDialogButtonClick:this.onErrorDialogButtonClick,featureDefaultSharedChannels:this.props.featureDefaultSharedChannels}),onGo:function e(){var a=t.props.featureDefaultSharedChannels;t.goButtonIsPending(true);var n=za(ce,z,a);var r={who_can_post:n};if(Object(x["isOrgDefaultChannel"])(o)){var i=Va(S);r.can_thread=i}t.props.setChannelPrefs({channelId:o.id,newPrefs:JSON.stringify(r)}).then(function(){t.setPostingPermissionsLoaded(false);t.closeModal()}).catch(function(){t.goButtonIsPending(false);t.setChannelPrefError(true)})},goButtonText:Qa.t("Set posting permissions"),title:this.renderOptionsListHeader(o,Qa.t("Review Changes")),contentLabel:"Review Changes",qa:"posting_privilege_review"},ue)):this.steps.push($a,$a);if(_){var je=Object(x["isOrgSharedPublicOrPrivateChannel"])(o);var Se=function e(){if(je||"specific"!==q){if(Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(o)){if("all"===q)return false}else if("specific"===q&&Object(x["getSharedTeamIds"])(o)&&Object(O["isEqual"])(G.sort(),Object(x["getSharedTeamIds"])(o).sort()))return false}else{if(!G.length)return false;if(1===G.length&&G.indexOf(s.id)>-1)return false}return true};var Ie=Qa.t("Done");Se()&&(Ie=Qa.t("Review Changes"));this.steps.push(d()({children:r.a.createElement(Lt,{channel:o,disabledTeamIds:F,originatingTeamId:U,filterFunction:this.manageOrgAccessFilterFunction,isLoaded:L,onShareWithChange:this.onChangeManageOrgAccessShareWith,onTeamPickerChange:this.onChangeManageOrgAccessTeamPicker,preselectedTeamIds:G,shareWith:q}),goButtonText:Ie,onBack:function e(){t.setManageOrgAccessLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);if(!Se()){t.closeModal();return}if(je){t.goToStep("manage_org_access_review");t.goButtonIsPending(false);return}t.props.callEnterpriseNameTaken({channel:o,newChannelName:Object(x["getDisplayName"])(o)}).then(function(e){t.goButtonIsPending(false);t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});if(!e.ok||e.name_taken){t.setState(function(){return{channelNameValid:false}});t.goButtonIsDisabled(true);t.modalRef.goToNextStep();return}t.goToStep("manage_org_access_review")}).catch(function(e){t.goButtonIsPending(false);t.setState(function(){return{channelNameValid:false}});var a=Ka.t("Oops, something went wrong.");var n=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:n,title:a});throw e})},title:this.renderOptionsListHeader(o,Qa.rt("Sharing settings for <strong>{name}</strong>",{name:Object(x["getDisplayName"])(o),fallbackHash:"14c24585b3cd497e35dfec78cc5d5aa63f7d4690"},function(e){var t=e.key;return ne(t,o)})),contentLabel:"Manage access to "+Object(x["getDisplayName"])(o),qa:"manage_org_access"},ue),d()({children:r.a.createElement(Ne,{additionalVerificationError:I,additionalVerificationGood:R,channel:o,isCheckingAdditionalVerification:A,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName}),onBack:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});t.goBackToManageAccessPrevStep()},onCancel:this.goBackToAllOptions,goButtonText:he,onGo:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access_name_conflict",channelToBeShared:false}});t.modalRef.goToNextStep()},title:this.renderOptionsListHeader(o,Qa.t("Rename this channel")),contentLabel:"Rename this channel",qa:"manage_org_access_name_conflict"},ue),d()({children:r.a.createElement(Qt,{channel:o,currentTeam:s,newChannelName:H,shareWith:q,teamIdsSelected:G}),goButtonText:Qa.t("Save Changes"),onBack:this.goBackToManageAccessPrevStep,onCancel:this.goBackToAllOptions,onGo:this.manageOrgAccessSave,title:this.renderOptionsListHeader(o,Qa.t("Review Changes")),contentLabel:"Review Changes",qa:"manage_org_access_review"},ue))}else this.steps.push($a,$a,$a);this.steps.length!==Object(O["keys"])(Ja).length&&Object(T["a"])({teamId:this.props.teamId}).error("ChannelOptions render error: It looks like the number of modal steps doesn\u2019t match the number of steps defined in the modal mapping. Please check that you have the correct number of filler steps added if your screen is not rendered.");return r.a.createElement("div",null,r.a.createElement(Q["a"],{modalClasses:"channel_options_modal",onCancel:p,position:"fixed",ref:function e(a){t.modalRef=a},showCloseTransition:true,showOpenTransition:true,steps:this.steps}))}}]);return t}(n["PureComponent"]);ln.displayName="ChannelOptions";ln.defaultProps=Xa;function cn(e,t){var a=t.channelId;var n=Object(N["getChannelById"])(e,a);if(!n)return{featureDefaultSharedChannels:Object(E["isFeatureEnabled"])(e,"feature_default_shared_channels")};var r=Object(R["getTeamsById"])(e,n.pending_shared).map(F["getTeamDisplayName"]);var i=[];Object(x["getSharedTeamIds"])(n)&&Object(x["getSharedTeamIds"])(n).length&&(i=Object(x["getSharedTeamIds"])(n).map(function(t){return Object(R["getTeamById"])(e,t)}));return{channel:n,currentMember:Object(A["getCurrentMember"])(e),currentTeam:Object(R["getCurrentTeam"])(e),dmRetentionDuration:Object(I["getTeamPref"])(e,"dm_retention_duration"),dmRetentionType:Object(I["getTeamPref"])(e,"dm_retention_type"),externalSharedTeams:i,groupRetentionDuration:Object(I["getTeamPref"])(e,"group_retention_duration"),groupRetentionType:Object(I["getTeamPref"])(e,"group_retention_type"),orgName:Object(S["getEnterpriseOrgName"])(e),pendingSharedExternalSharedTeamNames:r,channelRetentionDuration:Object(I["getTeamPref"])(e,"retention_duration"),channelRetentionType:Object(I["getTeamPref"])(e,"retention_type"),teamId:Object(j["getTeamId"])(e),featureDefaultSharedChannels:Object(E["isFeatureEnabled"])(e,"feature_default_shared_channels"),featureDegradedSend:Object(E["isFeatureEnabled"])(e,"feature_degraded_send"),clogger:Object(U["a"])({state:e})}}var un={archiveChannelApi:N["archiveChannelApi"],cancelExternalSharedChannelInviteApi:P["x"],callEnterpriseNameTaken:D["b"],submitChannelPurpose:P["z"],convertToOrgShared:D["f"],convertChannelToPrivateApi:N["convertChannelToPrivateApi"],openModal:C["openModal"],renameChannelApi:N["renameChannelApi"],updateOrgAccessForChannel:N["updateOrgAccessForChannel"],exportChannelHistory:N["exportChannelHistory"],setChannelDeleted:P["r"],getChannelOrgOriginatingTeam:D["m"],getChannelPref:P["l"],setChannelPrefs:P["s"],setChannelPurpose:N["setChannelPurpose"],getExternalTeamIdsConnectedOnlyByChannel:P["o"],disconnectChannel:P["b"],getDataRetention:P["m"],setDataRetention:P["v"],getExternalSharedChannelInviteDetails:P["n"]};var dn=Object(s["connect"])(cn,un)(ln);var pn=[{stepName:"archive",prop:"showArchive",stepIndex:1},{stepName:"share_external",prop:"showShareExternal",stepIndex:2},{stepName:"stop_sharing_external",prop:"showStopShareExternal",stepIndex:3},{stepName:"convert_private",prop:"showConvertToPrivate",stepIndex:4},{stepName:"rename",prop:"showRename",stepIndex:5},{stepName:"export",prop:"showExport",stepIndex:6},{stepName:"delete",prop:"showDelete",stepIndex:7},{stepName:"purpose",prop:"showPurpose",stepIndex:8},{stepName:"retention",prop:"showDataRetention",stepIndex:9},{stepName:"posting_privilege",prop:"showPostingPermissions",stepIndex:10},{stepName:"manage_org_access",prop:"showManageOrgAccess",stepIndex:12}];var fn=dn;var mn=function e(t,a,n){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(c["d"])(t);Object(l["a"])(r.a.createElement(s["Provider"],{store:i},r.a.createElement(fn,n)),a)};var hn=function e(t){o.a.unmountComponentAtNode(t)};var vn={mountChannelOptions:mn,unmountChannelOptions:hn};var gn=a(51);Object(gn["a"])("interop.mountChannelOptions",mn);Object(gn["a"])("interop.unmountChannelOptions",hn)},,function(e,t,a){},,function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(262);var g=a(2086);var b=a(2);var _=a(616);var y=a(123);var k=a(11);var O=a(10);var w=a(167);var E=a(673);var C=a(884);var j=a(20);var S=a(618);var I=a(1437);var T=a(105);var N=a(800);var A=a(35);var R=a.n(A);var M=a(762);var x=a(12);var P=a(19);var D=a(16);var F=a(41);var L=new O["b"]("user_groups");var B={userGroup:m.a.object,defaultChannelNames:m.a.arrayOf(m.a.string),featureLazyUserGroups:m.a.bool,showToggle:m.a.bool,creator:m.a.string};var U={userGroup:{},defaultChannelNames:void 0,featureLazyUserGroups:false,showToggle:false,creator:void 0};var q=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onButtonClick=a.onButtonClick.bind(a);return a}o()(t,[{key:"onButtonClick",value:function e(t,a){var n=this.props.userGroup;Object(M["c"])({action:a,userGroup:n})}},{key:"maybeRenderDescription",value:function e(t){if(!this.props.featureLazyUserGroups)return null;var a=this.props.userGroup;var n=Object(T["e"])(a);if(!n)return null;return p.a.createElement("p",{className:t},n)}},{key:"maybeRenderHandle",value:function e(){var t=this.props.userGroup;var a=Object(T["f"])(t,{includeAtSign:true});if(!a)return null;return p.a.createElement("span",{className:"subtle_silver"},a)}},{key:"maybeRenderToggle",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function e(a){return t.onButtonClick(a,"enable")},role:"link",tabIndex:"0"},p.a.createElement(F["d"],{position:"left",zIndex:"above_fs",tip:L.t("Enable group")},p.a.createElement("i",{className:"ts_icon ts_icon_power_off"}))))}},{key:"maybeRenderDefaultChannels",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.defaultChannelNames;if(!t||!t.length)return null;var a=Object(O["f"])(t,{react:true,noEscape:true}).join("");return p.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},p.a.createElement("span",{className:"bold"},L.t("Default channels: {channels}",{channels:a})))}},{key:"maybeRenderCreatedBy",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props,a=t.userGroup,n=t.creator;if(!a&&(!a.created_by||!a.date_create))return null;var r=L.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:n,creationDate:R()(1e3*a.date_create).format("MMMM Do, YYYY")});return p.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},r)}},{key:"maybeRenderDisableButton",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return p.a.createElement(F["d"],{position:"bottom",zIndex:"above_fs",tip:L.t("Disable group")},p.a.createElement(j["d"],{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+L.t("Disable"),"data-action":"disable_user_group",onClick:function e(a){return t.onButtonClick(a,"disable")}}))}},{key:"renderDeactivatedRow",value:function e(){var t=this.props.userGroup;var a=Object(T["h"])(t);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},p.a.createElement("p",{className:"no_bottom_margin subtle_silver"},p.a.createElement("span",{className:"bold"},a),L.t("(Disabled)"))),p.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function e(){var t=this.props.userGroup;var a=t.isExternal||Object(T["l"])(t)?p.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return p.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},a,p.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(T["k"])(t))}},{key:"renderSettingsButton",value:function e(){var t=this;return p.a.createElement(F["d"],{position:"bottom",tip:L.t("Edit group info"),zIndex:"above_fs"},p.a.createElement(j["d"],{size:"large",type:"outline",icon:"cog_o",title:""+L.t("Settings"),"data-action":"open_form",onClick:function e(a){return t.onButtonClick(a,"editInfo")}}))}},{key:"renderMemberButton",value:function e(){var t=this;var a=this.props.userGroup;var n=void 0;n=Object(T["l"])(a||a.is_external)?L.t("View group members"):L.t("Edit group members");return p.a.createElement(F["d"],{position:"bottom",tip:n,zIndex:"above_fs"},p.a.createElement(j["d"],{size:"large",type:"outline",icon:"user",title:""+L.t("Members"),"data-action":"edit_members",onClick:function e(a){return t.onButtonClick(a,"editMembers")}}))}},{key:"render",value:function e(){var t=this.props.userGroup;var a=Object(T["q"])(this.props.userGroup);if(!a)return this.renderDeactivatedRow();var n=Object(T["h"])(t);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},p.a.createElement("p",{className:"bold no_bottom_margin"},n," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),p.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),p.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]);return t}(d["Component"]);q.displayName="LegacyUserGroupBrowserListItem";q.defaultProps=U;var G=function e(t,a){var n=a.id;var r=Object(y["getUserGroupById"])(t,n);var i=Object(T["d"])(r,{includePrivateChannels:false});var o=i.map(function(e){if(!e)return null;var a=Object(P["getChannelById"])(t,e);if(!a)return null;var n=Object(x["getName"])(a);if(!n)return null;return"#"+n});o=Object(b["filter"])(o);var s=Object(D["getPrefCompliantMemberNameById"])(t,r.created_by);return{userGroup:r,featureLazyUserGroups:Object(k["isFeatureEnabled"])(t,"feature_lazy_user_groups"),defaultChannels:i,defaultChannelNames:o,creator:s,showDelete:!Object(T["l"])(r)&&!r.is_external,showToggle:Object(T["b"])(t)}};var H=Object(h["connect"])(G)(q);var W=new O["b"]("user_groups");var V={id:m.a.string.isRequired,userGroup:m.a.object,onClick:m.a.func,featureLazyUserGroups:m.a.bool,isUserGroupBrowser:m.a.bool};var z={userGroup:{},onClick:b["noop"],featureLazyUserGroups:false,isUserGroupBrowser:false};var Q=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}o()(t,[{key:"onClick",value:function e(t){this.props.onClick(t,this.props.id);return Object(N["c"])(t,this.props.id)}},{key:"maybeRenderDescription",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.userGroup;var a=Object(T["e"])(t);if(!a)return null;return p.a.createElement("p",null,a)}},{key:"maybeRenderCountOrHandle",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.userGroup;var a=Object(T["k"])(t);var n=Object(T["f"])(t,{includeAtSign:false});if(!(a||n))return null;var r=W.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a});n&&(r=r+" - "+Object(T["f"])(t));return p.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},r)}},{key:"renderRow",value:function e(){var t=this.props,a=t.userGroup,n=t.id,r=t.isUserGroupBrowser;if(r)return p.a.createElement(H,{id:n});return p.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},p.a.createElement("a",{"data-user-group-id":""+n,onClick:this.onClick,role:"link",tabIndex:"0"},p.a.createElement("h4",null,Object(T["h"])(a)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.id;return p.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+t},this.renderRow())}}]);return t}(d["Component"]);Q.displayName="LegacyUserGroupListItem";Q.defaultProps=z;var K=function e(t,a){var n=a.id;return{userGroup:Object(y["getUserGroupById"])(t,n),featureLazyUserGroups:Object(k["isFeatureEnabled"])(t,"feature_lazy_user_groups")}};var Y=Object(h["connect"])(K)(Q);var J=a(2081);var Z=new O["b"]("user_groups");var X={userGroups:m.a.arrayOf(m.a.object),scrollmark:m.a.shape({key:m.a.string,offset:m.a.number}),searchQuery:m.a.string,setCursorMark:m.a.func,fetchUserGroupsPost:m.a.func,fetchDeactivatedUserGroupsPost:m.a.func,saveScrollmark:m.a.func,onCreateUserGroup:m.a.func,isLegacy:m.a.bool,includeDeactivated:m.a.bool,isUserGroupBrowser:m.a.bool,featureLazyUserGroups:m.a.bool};var $={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:b["noop"],fetchUserGroupsPost:b["noop"],fetchDeactivatedUserGroupsPost:b["noop"],saveScrollmark:b["noop"],onCreateUserGroup:b["noop"],onGroupClick:b["noop"],isLegacy:false,includeDeactivated:false,isUserGroupBrowser:false,featureLazyUserGroups:false};var ee=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGroupClick=a.onGroupClick.bind(a);a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.fetchPost=a.fetchPost.bind(a);a.fetchDeactivatedGroups=a.fetchDeactivatedGroups.bind(a);a.fetchActiveGroups=a.fetchActiveGroups.bind(a);a.fetchAround=a.fetchAround.bind(a);a.renderRow=a.renderRow.bind(a);a.requestPost=null;a.keys=null;a.list=null;a.layout=new C["a"];a.groupsTotal=0;a.state={reachedEnd:false,fetchingDeactivatedGroups:false};return a}o()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,n=t.offset;this.layout.setAnchor(a,n);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){this.setState(function(){return{reachedEnd:false,fetchingDeactivatedGroups:false}});this.requestPost&&this.requestPost.cancel();this.requestPost=null;this.groupsTotal=0;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){if(this.requestPost){this.requestPost.cancel();this.requestPost=null}}},{key:"onGroupClick",value:function e(t,a){if(!this.list)return;if(!a)return;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"fetchDeactivatedGroups",value:function e(){var t=this;return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.items,n=e.num_found;(t.props.userGroups.length>=t.totalGroups+n||!a.length)&&t.setState(function(){return{reachedEnd:true}})})}},{key:"fetchActiveGroups",value:function e(){var t=this;return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.items,n=e.num_found;t.totalGroups=n;if(t.props.userGroups.length>=t.totalGroups||!a.length)if(t.props.includeDeactivated){t.props.setCursorMark(null);t.setState(function(){return{fetchingDeactivatedGroups:true}})}else t.setState(function(){return{reachedEnd:true}})})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.fetchPost()}},{key:"renderRow",value:function e(t){if(!this.props.featureLazyUserGroups)return null;var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return p.a.createElement("div",{className:"p-user_group_list__loading"},Z.t("Loading\u2026"));default:return this.renderUserGroup(t)}}},{key:"renderUserGroup",value:function e(t){var a=this.props,n=a.userGroups,r=a.isLegacy,i=a.featureLazyUserGroups,o=a.isUserGroupBrowser;var s=n[t].id;if(!s)return null;if(i&&r)return p.a.createElement(Y,{id:s,isUserGroupBrowser:o,onClick:this.onGroupClick});return p.a.createElement(I["a"],{id:s,onClick:this.onGroupClick})}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=void 0;var a=void 0;if(Object(S["a"])()){t=Z.t("Organize your team");a=p.a.createElement(j["d"],{type:"outline",size:"small",onClick:this.props.onCreateUserGroup},Z.t("Create a User Group"))}else t=Z.t("No user groups yet");return p.a.createElement("div",{className:"p-user_group_list__empty_list","data-qa":"searchable_ug_list_empty_state"},p.a.createElement("div",{className:"p-user_group_list__empty_list_header"},t),p.a.createElement("div",{className:"p-user_group_list__empty_list_subtext"},Z.t("User groups make it easy to get the attention of many members at once.")),a)}},{key:"render",value:function e(){var t=this;this.keys=this.props.includeDeactivated?this.props.userGroups.map(function(e){return e.id}):this.props.userGroups.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id});if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);return p.a.createElement("div",{className:"p-user_group_list"},p.a.createElement(g["a"],null,function(e){var a=e.width,n=e.height;return p.a.createElement(E["a"],{width:a,height:n,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.fetchPost})}))}}]);return t}(d["PureComponent"]);ee.displayName="SearchableUserGroupsList";ee.defaultProps=$;var te=function e(t,a){var n=a.map(function(e){var a=t[e];if(!a)return null;return{id:a.id,_name_lc:a._name_lc,isDeactivated:!!a.date_delete}}).filter(function(e){return e});return Object(b["sortBy"])(n,["isDeactivated","_name_lc"])};var ae=Object(v["createSelector"])([y["getAllUserGroups"],_["getFlexpaneUserGroups"]],te);var ne={getUserGroups:ae};var re=t["a"]=Object(h["connect"])(function(e){return{userGroups:ae(e),scrollmark:Object(_["getScrollmark"])(e),searchQuery:Object(_["getSearchQuery"])(e),featureLazyUserGroups:Object(k["isFeatureEnabled"])(e,"feature_lazy_user_groups"),useGlobalNav:Object(w["b"])(e)}},{fetchUserGroupsPost:_["fetchUserGroupsPost"],saveScrollmark:_["saveScrollmark"],setSearchQuery:_["setSearchQuery"],setCursorMark:_["setCursorMark"],fetchDeactivatedUserGroupsPost:_["fetchDeactivatedUserGroupsPost"]})(ee)},,,,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(0);var c=a.n(l);var u=a(650);var d=a(69);var p=a(11);var f=a(1156);var m=a(5);var h=a.n(m);var v=a(6);var g=a.n(v);var b=a(7);var _=a.n(b);var y=a(8);var k=a.n(y);var O=a(2);var w=a.n(O);var E=a(2086);var C=a(15);var j=a.n(C);var S=a(78);var I=a(21);var T=a(26);var N=a(162);var A=a(61);var R=a(16);var M=a(72);var x=a(171);var P=a(10);var D=a(63);var F=a(167);var L=a(1420);var B=a(352);var U=a(369);var q=a(495);var G=a(265);var H=a(121);var W=a(738);var V=a(3);var z=a.n(V);var Q=a(227);var K=a(88);var Y=a(1102);var J=a(2192);var Z=new P["b"]("snippet");var X={featureFileThreads:c.a.bool};var $={featureFileThreads:true};var ee=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onWrapLinesChange=a.onWrapLinesChange.bind(a);a.state={wrapLines:true};return a}g()(t,[{key:"onWrapLinesChange",value:function e(t){var a=t.target.checked;this.setState(function(e){return z()({},e,{wrapLines:!!a})})}},{key:"render",value:function e(){if(!this.props.featureFileThreads)return null;return[r.a.createElement(Y["a"],z()({key:"snippet"},this.props,{wrapLines:this.state.wrapLines})),r.a.createElement(K["a"],{key:"checkbox",text:Z.rt("Wrap"),htmlFor:"snippet-wrap",type:"inline",cursor:"pointer",className:"p-flexpane_snippet__wrap"},r.a.createElement(Q["a"],{checked:this.state.wrapLines,id:"snippet-wrap",onChange:this.onWrapLinesChange}))]}}]);return t}(n["PureComponent"]);ee.displayName="FlexpaneSnippet";ee.defaultProps=$;function te(e,t){var a=t.fileId;var n=Object(S["getFileById"])(e,a);if(!n)return{};var r=n.is_truncated,i=n.permalink;var o=n.content_highlight_html||n.preview_highlight||"";var s=false;return{file:n,snippetHtml:o,isTruncated:r,permalink:i,isExpandable:s,featureFileThreads:Object(p["isFeatureEnabled"])(e,"feature_file_threads")}}var ae=Object(i["connect"])(te)(ee);var ne=a(1153);function re(e,t){var a=t.fileId;var n=Object(S["getFileById"])(e,a);if(!n)return{};var r=n.content_html||n.preview||"";var i=false===Object(I["getUserPref"])(e,"a11y_animations");var o=false;var s=false;return{postHtml:r,file:n,timestamp:n.updated||n.timestamp,allowAnimations:!i,showActions:s,isExpandable:o}}var ie=Object(i["connect"])(re)(ne["a"]);var oe=a(1103);function se(e,t){var a=t.fileId;var n=Object(S["getFileById"])(e,a);if(!n)return{};var r=false;var i=true;return{file:n,sentToSelf:n.sent_to_self,sender:w.a.first(n.from),to:n.to,cc:n.cc,title:n.title,subject:n.subject,timestamp:n.timestamp,attachments:n.attachments,simplifiedHtml:n.simplified_html,do24hrTime:Object(I["getUserPref"])(e,"time24"),isExpandable:r,isExpanded:i}}var le=Object(i["connect"])(se)(oe["a"]);var ce=a(65);var ue=a(18);var de=a(742);var pe=a(1173);var fe=a(443);var me=a(159);var he=a(1421);var ve=a(2071);var ge={comments:c.a.array,featureFileThreads:c.a.bool,fileId:c.a.string};var be={comments:void 0,featureFileThreads:true,fileId:void 0};var _e=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggle=a.toggle.bind(a);a.state={expanded:false};return a}g()(t,[{key:"toggle",value:function e(){var t=this;this.setState(function(){return{expanded:!t.state.expanded}})}},{key:"render",value:function e(){var t=this.props,a=t.comments,n=t.featureFileThreads,i=t.fileId;var o=this.state.expanded;if(!n&&!Object(D["a"])())return null;if(Object(O["isEmpty"])(a))return null;var s=a.map(function(e){var t=e.id;return r.a.createElement(pe["a"],{key:t,comment:e,fileId:i})});var l=j()("p-comment_list",{"p-comment_list--expanded":o});return r.a.createElement("div",{className:l},r.a.createElement(he["a"],{expanded:o,commentCount:a.length,toggleList:this.toggle}),r.a.createElement("div",{className:"p-comment_list__comments"},s))}}]);return t}(fe["a"]);_e.displayName="CommentList";_e.propTypes=ge;_e.defaultProps=be;var ye=Object(me["a"])("feature_file_threads")(_e);var ke=pe["a"];var Oe=a(496);var we=a(652);var Ee=a(17);var Ce=a(150);var je=a(50);var Se=a(151);var Ie=a(735);var Te=a(36);var Ne=new P["b"]("file-details");var Ae={fileId:c.a.string.isRequired,share:c.a.shape({sharedTeamIds:c.a.arrayOf(c.a.string),teamId:c.a.string,channelId:c.a.string,channelName:c.a.string,isPublic:c.a.bool,ts:c.a.string,threadTs:c.a.string,replyCount:c.a.number}).isRequired,teamIdForIcon:c.a.string,teamDomain:c.a.string,openThread:c.a.func,featureFileThreads:c.a.bool};var Re={teamIdForIcon:void 0,teamDomain:void 0,openThread:w.a.noop,featureFileThreads:false};var Me=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onShareClick=a.onShareClick.bind(a);return a}g()(t,[{key:"onShareClick",value:function e(t){var a=this.props,n=a.share,r=a.fileId,i=a.openThread;t.preventDefault();var o=n.threadTs||n.ts;var s=o!==n.ts?n.ts:null;var l="file_details";var c=r;i({channelId:n.channelId,threadTs:o,highlightTs:s,origin:l,originId:c})}},{key:"getReplyCountText",value:function e(t,a,n){if(!this.props.featureFileThreads)return null;var i=t||{},o=i.replyCount,s=i.ts,l=i.threadTs;if(!o)return null;var c="";c=l&&s!==l?Ne.t("from a thread"):Ne.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:o});return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),r.a.createElement(ce["a"],{href:a,onClick:n},r.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},c)))}},{key:"render",value:function e(){var t=this.props,a=t.share,n=t.teamIdForIcon,i=t.teamDomain;var o=void 0;var s=false;var l=void 0;var c=void 0;if(n){o={id:a.channelId,name:a.channelName,is_channel:true,is_private:!a.isPublic,shared_team_ids:a.sharedTeamIds,team_id:n};s=true}else c=this.onShareClick;i&&(l=Object(Te["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:a.channelId,ts:a.ts,threadTs:a.threadTs}));return r.a.createElement("div",{className:"p-file_details__share",key:a.channelId+"_"+a.ts},r.a.createElement(ce["a"],{href:l,onClick:c,className:"p-file_details__share_channel_link"},r.a.createElement(Se["a"],{channel:o,channelId:a.channelId,className:"p-file_details__share_channel",iconProps:{inherit:true},showTeamIconForXwsChannels:s})),r.a.createElement("span",{className:"p-file_details__share_metadata"},r.a.createElement(Ie["a"],{timestamp:a.ts,relative:true}),this.getReplyCountText(a,l,c)))}}]);return t}(n["Component"]);Me.displayName="FileDetailsShareLocation";Me.defaultProps=Re;function xe(e,t){var a=t.share;var n=Object(je["getCurrentTeam"])(e);if(!n)return{};var r=n.id;var i=n.enterprise_id;var o=n.domain;var s=void 0;var l=a.teamId===i&&!w.a.isEmpty(a.sharedTeamIds)&&!w.a.includes(a.sharedTeamIds,r);var c=a.teamId&&a.teamId!==r&&a.teamId!==i;if(l||c){s=w.a.first(a.sharedTeamIds)||a.teamId;var u=Object(je["getTeamsById"])(e,[s]);o=Object(je["isTeamExistent"])(u&&u[0])?u[0].domain:null}return{teamIdForIcon:s,teamDomain:o,featureFileThreads:Object(p["isFeatureEnabled"])(e,"feature_file_threads")}}var Pe=Object(i["connect"])(xe,{openThread:Ce["g"]})(Me);var De=new P["b"]("file-details");var Fe={file:M["a"].File(),featureFileThreads:c.a.bool};var Le={file:null,featureFileThreads:false,openThread:w.a.noop};var Be=function(e){k()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"getFormattedSharesData",value:function e(t){var a=this;if(!t)return[];var n=[];w.a.forEach(t.public,function(e,t){w.a.forEach(e,function(e){var r=true;var i=a.formatShareData(e,t,r);i&&n.push(i)})});var r=[];w.a.forEach(t.private,function(e,t){w.a.forEach(e,function(e){var r=false;var i=a.formatShareData(e,t,r);i&&n.push(i)})});var i=n.concat(r);return w.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,a,n){if("0000000000.000000"===t.ts){Object(Ee["b"])().warn("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var r=t.reply_count||null;var i=t.reply_users;var o=t.reply_users_count;var s=t.latest_reply||t.ts;return{channelId:a,replyCount:r,replyUsers:i,replyUsersCount:o,latest:s,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:t.shared_team_ids,isPublic:n}}},{key:"render",value:function e(){var t=this.props,a=t.file,n=t.featureFileThreads;if(!n)return null;if("docs"===a.mode)return null;if(!a||!a.shares)return null;var i=a.shares;var o=this.getFormattedSharesData(i);return r.a.createElement("div",{className:"p-file_details__shares"},r.a.createElement("div",{className:"p-file_details__share_divider"},r.a.createElement("span",null,De.rt("Shared in")),r.a.createElement("hr",null)),o.map(function(e){return r.a.createElement(Pe,{key:e.ts+"-"+e.channelId,share:e,fileId:a.id})}))}}]);return t}(n["PureComponent"]);Be.displayName="FileDetailsShares";var Ue=Be;Be.defaultProps=Le;var qe=a(715);var Ge=a(20);var He=new P["b"]("file-details");var We={tryAgain:c.a.func,featureFileThreads:c.a.bool};var Ve={tryAgain:O["noop"],featureFileThreads:true};function ze(e){var t=e.tryAgain,a=e.featureFileThreads;if(!a)return null;return r.a.createElement("div",{className:"p-file_details__error"},r.a.createElement("p",{className:"p-file_details__error_header"},He.t("Couldn't load file")),r.a.createElement("p",null,He.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return r.a.createElement("a",{href:"https://slack.com/help/contact",target:"_blank",rel:"noopener noreferrer",key:a},t)})),r.a.createElement(Ge["d"],{type:"primary",onClick:t},He.t("Try Again")))}ze.displayName="FileDetailsError";ze.defaultProps=Ve;var Qe=new P["b"]("file-details");var Ke={featureFileThreads:c.a.bool};var Ye={featureFileThreads:true};function Je(e){var t=e.featureFileThreads;if(!t)return null;return r.a.createElement("div",{className:"p-file_details__tombstone"},r.a.createElement("div",{className:"p-file_details__tombstone_icon"},r.a.createElement(ue["b"],{type:"trash",size:"inherit"})),r.a.createElement("p",null,Qe.t("This file was deleted.")))}Je.displayName="FileDetailsTombstone";Je.defaultProps=Ye;var Ze=a(2197);var Xe=a(2072);var $e=new P["b"]("file-details");var et={file:M["a"].File(),origin:c.a.string,featureFileThreads:c.a.bool,useGlobalNav:c.a.bool,do24hrTime:c.a.bool,fileIsFetching:c.a.bool,reloadFile:c.a.func,userId:c.a.string,botId:c.a.string,ownerName:c.a.string};var tt={file:null,origin:null,featureFileThreads:false,useGlobalNav:false,do24hrTime:false,fileIsFetching:false,reloadFile:w.a.noop,userId:"",botId:"",ownerName:""};var at=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.goBack=a.goBack.bind(a);a.renderPreview=a.renderPreview.bind(a);a.renderImage=a.renderImage.bind(a);a.renderSnippet=a.renderSnippet.bind(a);a.renderPost=a.renderPost.bind(a);a.renderEmail=a.renderEmail.bind(a);a.renderGeneric=a.renderGeneric.bind(a);a.onNameClick=a.onNameClick.bind(a);return a}g()(t,[{key:"onNameClick",value:function e(t){if(Object(B["a"])(t))return;var a=this.props,n=a.userId,r=a.botId;if(!n&&!r)return;t.preventDefault();t.persist();r?Object(q["a"])(t,r):Object(U["a"])(t,n)}},{key:"goBack",value:function e(){var t=this.props.origin;Object(L["a"])(t)}},{key:"isImage",value:function e(){return"image"===Object(A["getFileType"])(this.props.file)}},{key:"renderImage",value:function e(){return r.a.createElement(W["a"],{file:this.props.file,stretch:true})}},{key:"renderSnippet",value:function e(){return r.a.createElement(ae,{fileId:this.props.file.id})}},{key:"renderPost",value:function e(){return r.a.createElement(ie,{fileId:this.props.file.id})}},{key:"renderEmail",value:function e(){return r.a.createElement(le,{fileId:this.props.file.id})}},{key:"renderGeneric",value:function e(){return r.a.createElement(G["d"],{file:this.props.file})}},{key:"renderPreview",value:function e(){var t=this.props.file;var a=Object(A["getFileType"])(t);if("image"===a)return this.renderImage();if("snippet"===a)return this.renderSnippet();if("post"===a)return this.renderPost();if("docs"===a)return this.renderPost();if("email"===a)return this.renderEmail();if("generic"===a)return this.renderGeneric();return null}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,a=t.file,n=t.do24hrTime,i=t.featureFileThreads,o=t.ownerName,s=t.userId,l=t.botId;var c="";!Object(A["isFilePublic"])(a)&&i&&(c=r.a.createElement("div",{className:"p-file_details__private"},$e.t("Private file")));var u="";u=l?"/services/"+l:"/team/"+s;return r.a.createElement("div",{className:"p-file_details__user_meta"},r.a.createElement(ce["a"],{href:u,className:"p-file_details__user_link",onClick:this.onNameClick},o),l&&i&&r.a.createElement(Oe["a"],null),r.a.createElement("div",{className:"p-file_details__upload_date"},$e.rt("{date} at {time}",{date:Object(x["h"])(a.timestamp),time:Object(x["l"])(a.timestamp,{do24hrTime:n})})),c)}},{key:"renderBackButtonAndTitle",value:function e(){var t=this.props,a=t.origin,n=t.featureFileThreads;if(!n&&!Object(D["a"])())return null;var i=$e.rt("Files");"member_preview"===a?i=$e.rt("Member"):"starred_items"===a?i=$e.rt("Starred Items"):"search_results"===a?i=$e.rt("Search Results"):"channel_page"===a?i=$e.rt("Channel Details"):"group_page"===a?i=$e.rt("Channel Info"):"im_page"===a?i=$e.rt("Conversation Details"):"mentions"===a&&(i=$e.rt("Activity"));return r.a.createElement(H["a"],{className:"p-file_details__header_back",onClick:this.goBack},r.a.createElement(ue["a"],{type:"chevron-medium-left",className:"p-file_details__header_back_icon"}),r.a.createElement("span",null,i))}},{key:"renderComments",value:function e(){var t=this.props.file;if(w.a.isEmpty(t.comments))return null;return r.a.createElement("div",{className:"p-file_details__comments"},r.a.createElement("hr",{className:"p-file_details__comment_separator"}),r.a.createElement(ye,{comments:t.comments,fileId:t.id}))}},{key:"renderBody",value:function e(){var t=this.props,a=t.file,n=t.featureFileThreads,i=t.fileIsFetching,o=t.reloadFile;var s=n||Object(D["a"])();if(i&&!a)return null;if(!a)return r.a.createElement(ze,{tryAgain:o,featureFileThreads:s});if(Object(A["isTombstone"])(a))return r.a.createElement(Je,{featureFileThreads:s});var l={};if(this.isImage()){l.maxWidth=(a.thumb_480_w||a.thumb_360_w)+"px";l.maxHeight=(a.thumb_480_h||a.thumb_360_h)+"px"}var c=Object(A["getFileType"])(a);var u="image"===c||"snippet"===c;var d=j()("p-file_details__meta",{"p-file_details__meta--show_filename":u});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-file_details__meta_container"},r.a.createElement("div",{className:d},u?r.a.createElement(G["c"],{file:a,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),r.a.createElement(we["a"],{file:a,inFileDetails:true})),r.a.createElement("div",{className:"p-file_details__preview",style:l},this.renderPreview()),this.renderComments(),r.a.createElement(Ue,{file:a,featureFileThreads:s}))}},{key:"render",value:function e(){var t=this;var a=!this.props.useGlobalNav&&r.a.createElement(qe["a"],null,this.renderBackButtonAndTitle());return r.a.createElement("div",{className:"p-file_flexpane"},a,r.a.createElement("div",{className:"p-file_flexpane__content"},r.a.createElement(E["a"],null,function(e){var a=e.width,n=e.height;return r.a.createElement(de["b"],{width:a,height:n,fade:true},r.a.createElement("div",{className:"p-file_details"},t.renderBody()))})))}}]);return t}(n["PureComponent"]);at.displayName="FileDetails";at.defaultProps=tt;var nt=function e(t,a){var n=a.fileId;if(!n)return{};var r=Object(S["getFileById"])(t,n);if(!r)return{};var i=Object(A["getFileEntityId"])(r),o=i.userId,s=i.botId;var l=o?Object(T["getMemberById"])(t,o):null;var c=l?Object(R["getBotIdFromMember"])(l):null;var u=s||c;var d="";if(u){var f=Object(N["getBotById"])(t,u);f&&f.name&&(d=f.name)}!d&&l&&(d=Object(R["getPrefCompliantMemberName"])(t,l));d||(d=r.username);return{file:Object(S["getFileById"])(t,n),featureFileThreads:Object(p["isFeatureEnabled"])(t,"feature_file_threads"),useGlobalNav:Object(F["b"])(t),do24hrTime:Object(I["getUserPref"])(t,"time24"),userId:o,botId:u,ownerName:d}};var rt=Object(i["connect"])(nt)(at);var it=Object(G["e"])(rt,{alwaysFetchOnMount:true});var ot=a(262);var st=a(627);var lt=a(673);var ct=a(884);var ut=a(1422);var dt=a(1074);var pt=a(164);var ft=a(1115);var mt=a(263);var ht=a(347);var vt=a(358);var gt=new P["b"]("files");var bt={member:c.a.object,onChange:c.a.func};var _t={member:null,onChange:O["noop"]};var yt=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.state={value:e.member?e.member.id:null,selectedOption:e.member?kt(e.member.id):null};return a}g()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?kt(t.member.id):null}})}},{key:"onChange",value:function e(t,a){this.setState(function(){return{value:t,selectedOption:{value:t,label:a}}});this.props.onChange(t)}},{key:"render",value:function e(){return r.a.createElement(ht["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:gt.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:Ot,optionsRowHeight:30})}}]);return t}(n["PureComponent"]);yt.displayName="FilesFlexpaneMembersSelect";yt.defaultProps=_t;function kt(e){return{value:e,label:r.a.createElement("div",{className:"p-file_list__select__member"},r.a.createElement(vt["a"],{id:e,size:"small",showPresence:true}))}}function Ot(e){return Object(mt["a"])(e,{members:{include_self:true},sort:{allow_empty_query:true,frecency:true,self_first:true}}).then(function(e){return{options:e.map(function(e){var t=e.model_ob;return kt(t.id)})}})}var wt=Object(i["connect"])(function(e,t){var a=t.userId;return{member:Object(T["getMemberById"])(e,a)}})(yt);var Et=a(2200);var Ct=new P["b"]("files");var jt=Object(dt["a"])(ut["a"]);var St={files:c.a.arrayOf(M["a"].File()),filetype:c.a.string,user:c.a.string,scrollmark:c.a.shape({key:c.a.string,offset:c.a.number}),fetchFilesPre:c.a.func,fetchFilesPost:c.a.func,saveScrollmark:c.a.func,setFiletype:c.a.func,setUser:c.a.func,clogger:c.a.object.isRequired,featureFileThreads:c.a.bool,useGlobalNav:c.a.bool};var It={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:O["noop"],fetchFilesPost:O["noop"],saveScrollmark:O["noop"],setFiletype:O["noop"],setUser:O["noop"],featureFileThreads:false,useGlobalNav:false};var Tt=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onFileClick=a.onFileClick.bind(a);a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.fetchPre=a.fetchPre.bind(a);a.fetchPost=a.fetchPost.bind(a);a.fetchAround=a.fetchAround.bind(a);a.renderRow=a.renderRow.bind(a);a.renderFile=a.renderFile.bind(a);a.requestPre=null;a.requestPost=null;a.keys=null;a.list=null;a.layout=new ct["a"];a.state={reachedStart:false,reachedEnd:false};return a}g()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,n=t.offset;this.layout.setAnchor(a,n);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props,n=a.filetype,r=a.user;if(t.filetype!==n||t.user!==r){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.setState(function(){return{reachedStart:false,reachedEnd:false}});this.layout&&this.layout.setAnchor(false)}}},{key:"onFileClick",value:function e(t,a){if(!this.list)return;if(!a)return;var n=this.props.clogger;n.track("FLEXPANE_FILE_CLICKED",{click_file_id:a.id});this.props.saveScrollmark({key:a.id,offset:this.layout.getOffsetForKey(a.id)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.state.reachedStart)return false;var a=this.props,n=a.filetype,r=a.user;this.requestPre=this.props.fetchFilesPre({types:n,user:r});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var n=a.page;1===n&&t.setState(function(){return{reachedStart:true}})}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;var a=this.props,n=a.filetype,r=a.user;this.requestPost=this.props.fetchFilesPost({types:n,user:r});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var n=a.page,r=a.pages;n>=r&&t.setState(function(){return{reachedEnd:true}})}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.state.reachedEnd)return this.fetchPre();if(this.state.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"renderRow",value:function e(t){if(!this.props.featureFileThreads&&!Object(D["a"])())return null;var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return r.a.createElement("div",{className:"p-file_list__loading"},Ct.t("Loading\u2026"));case"P":return r.a.createElement("div",{className:"p-file_list__empty"},Ct.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var a=this.props.files[t];if(!a)return null;var n=t===this.props.files.length-1;var i=j()("p-file_list__file",{"p-file_list__file--last":n});return r.a.createElement(jt,{onClick:this.onFileClick,file:a,fileId:a.id,className:i,fullWidth:true})}},{key:"render",value:function e(){var t=this;this.keys=this.props.files.map(function(e){return e.id});this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);!this.keys.length&&this.state.reachedStart&&this.state.reachedEnd&&this.keys.push("Placeholder");var a=this.props.useGlobalNav?"p-file_list__filters p-file_list__filters--global-nav":"p-file_list__filters";var n=this.props.useGlobalNav?null:r.a.createElement(qe["a"],{className:"p-file_list__header"},r.a.createElement("span",null,Ct.rt("Files")));return r.a.createElement("div",{className:"p-file_flexpane p-file_flexpane--list"},n,r.a.createElement("div",{className:a},r.a.createElement(ft["a"],{filetype:this.props.filetype,onChange:this.props.setFiletype}),r.a.createElement(wt,{userId:this.props.user,onChange:function e(a){t.props.setUser(a)}})),r.a.createElement("div",{className:"p-file_list"},r.a.createElement(E["a"],null,function(e){var a=e.width,n=e.height;return r.a.createElement(lt["a"],{width:a,height:n,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost})})))}}]);return t}(n["PureComponent"]);Tt.displayName="FileList";Tt.defaultProps=It;var Nt=Object(ot["createSelector"])([S["getAllFiles"],st["getFlexpaneFiles"]],function(e,t){return t.map(function(t){return e[t]}).filter(function(e){return e})});var At=Object(i["connect"])(function(e){return{files:Nt(e),scrollmark:Object(st["getScrollmark"])(e),filetype:Object(st["getFiletype"])(e),user:Object(st["getUser"])(e),featureFileThreads:Object(p["isFeatureEnabled"])(e,"feature_file_threads"),useGlobalNav:Object(F["b"])(e),clogger:Object(pt["a"])({state:e})}},{fetchFilesPre:st["fetchFilesPre"],fetchFilesPost:st["fetchFilesPost"],saveScrollmark:st["saveScrollmark"],setFiletype:st["setFiletype"],setUser:st["setUser"]})(Tt);function Rt(e){if(e.fileId)return r.a.createElement(it,e);if(e.list)return r.a.createElement(At,e);return null}Rt.defaultProps={fileId:null,list:false,origin:null};function Mt(e){var t=Object(u["getFlexpaneState"])(e),a=t.flexName,n=t.flexExtra,r=t.flexOrigin;if(Object(p["isFeatureEnabled"])(e,"feature_remove_flexpane_store")){a=Object(d["getSecondaryView"])(e);n=Object(d["getFlexParams"])(e)[0];r=Object(d["getFlexOrigin"])(e)}var i=Object(f["a"])(n);return{list:"files"===a&&!i,fileId:"files"===a&&i?n:null,origin:"files"===a?r:null}}var xt=Object(i["connect"])(Mt)(Rt);var Pt=xt;var Dt=function e(t,a){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(Pt,null)),a)};var Ft=Dt;var Lt=a(51);Object(Lt["a"])("interop.mountFilesFlexpane",Ft)},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(15);var k=a.n(y);var O=a(2);var w=a.n(O);var E=a(20);var C=a(2118);var j={name:_.a.string,avatar:_.a.string,onClick:_.a.oneOfType([_.a.func,_.a.string]).isRequired,scrollTop:_.a.bool};var S={name:"",avatar:"",scrollTop:false};var I=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this;var a=k()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var n={backgroundImage:"url('"+this.props.avatar+"')"};return r.a.createElement("div",{className:a},r.a.createElement(E["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:n,type:"link"}),r.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(n["PureComponent"]);I.displayName="DashboardNavHeader";I.defaultProps=S;var T=I;var N=T;var A=a(9);var R=a.n(A);var M=a(18);var x=a(2120);var P={isOpen:_.a.bool,icon:_.a.string.isRequired,iconColor:_.a.oneOf(["blue","yellow","red","green","purple"]).isRequired,name:_.a.string.isRequired,onClick:_.a.func.isRequired};var D={isOpen:false};var F=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t,a=this;var n=k()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},R()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),R()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-"+Object(O["camelCase"])(this.props.name);return r.a.createElement(E["c"],{onClick:function e(){return a.props.onClick(a.props.name)},className:n,"data-qa":i},r.a.createElement(M["a"],{type:this.props.icon}),r.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(n["PureComponent"]);F.displayName="DashboardNavItemPrimary";F.defaultProps=D;var L=F;var B=L;var U=a(2122);var q={subItems:_.a.array.isRequired,animateClose:_.a.bool};var G={animateClose:false};var H=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSecondaryItems=a.renderSecondaryItems.bind(a);return a}f()(t,[{key:"renderSecondaryItems",value:function e(){var t=w.a.map(this.props.subItems,function(e){var t=k()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var a="ent-nav-"+w.a.camelCase(e.name);return r.a.createElement(E["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:t,"data-qa":a},e.name," ",r.a.createElement(M["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return t}},{key:"render",value:function e(){var t=k()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return r.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(n["PureComponent"]);H.displayName="DashboardNavItemSecondary";H.defaultProps=G;var W=H;var V=W;var z=a(2124);var Q={isOpen:_.a.bool,animateClose:_.a.bool,icon:_.a.string.isRequired,iconColor:_.a.oneOf(["blue","yellow","red","green","purple"]).isRequired,name:_.a.string.isRequired,onClick:_.a.func.isRequired,subItems:_.a.array};var K={isOpen:false,animateClose:false,subItems:null};var Y=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleAnimation=a.toggleAnimation.bind(a);a.shouldAnimateClosed=a.shouldAnimateClosed.bind(a);return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=w.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var a=w.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=w.a.head(a)+"px");this.props.isOpen&&(t.style.maxHeight=w.a.sum(a)+"px")}}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var a=w.a.head(t.children).offsetHeight;var n=1;var r=a-n;var i=a+n;if(t.style.maxHeight>=r+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"render",value:function e(){var t=this;var a=R()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var n=k()("p-ent_nav_item",a);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=r.a.createElement(V,{subItems:this.props.subItems,animateClose:this.props.animateClose}));return r.a.createElement("div",{ref:function e(a){t.element=a},className:n},r.a.createElement(B,{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),r.a.createElement("div",null,i))}}]);return t}(n["PureComponent"]);Y.displayName="DashboardNavItem";Y.defaultProps=K;var J=Y;var Z=J;var X=a(2126);var $={avatar:_.a.string,name:_.a.string,onClick:_.a.func.isRequired};var ee={name:"",avatar:""};var te=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this;var a={backgroundImage:"url('"+this.props.avatar+"')"};return r.a.createElement("button",{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-qa":"ent-nav-user_menu","data-popover-trigger":"user_menu"},r.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:a}),r.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),r.a.createElement(M["a"],{type:"chevron-down"}))}}]);return t}(n["PureComponent"]);te.displayName="DashboardNavUserMenu";te.defaultProps=ee;var ae=te;var ne=ae;var re=a(2128);var ie={header:_.a.shape({name:_.a.string,avatar:_.a.string,onClick:_.a.oneOfType([_.a.func,_.a.string]).isRequired,scrollTop:_.a.bool}).isRequired,navItems:_.a.arrayOf(_.a.shape({isOpen:_.a.bool,toClose:_.a.bool,icon:_.a.string.isRequired,iconColor:_.a.oneOf(["blue","yellow","red","green","purple"]).isRequired,name:_.a.string.isRequired,onClick:_.a.func.isRequired,subItems:_.a.array})).isRequired,userMenu:_.a.shape({avatar:_.a.string,name:_.a.string,onClick:_.a.func.isRequired}).isRequired};var oe=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderNavItems=a.renderNavItems.bind(a);a.makeScrollable=a.makeScrollable.bind(a);a.onWindowResize=a.onWindowResize.bind(a);a.state={scrollTop:false,scrollBottom:false};return a}f()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var a=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(a===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=w.a.map(this.props.navItems,function(e){return r.a.createElement(Z,{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var a=this.props.header,n=a.name,i=a.avatar,o=a.onClick;var s=k()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return r.a.createElement("div",{className:"p-ent_nav"},r.a.createElement(N,{name:n,avatar:i,onClick:o,scrollTop:this.state.scrollTop}),r.a.createElement("div",{ref:function e(a){t.element=a},onScroll:this.makeScrollable,className:s},this.renderNavItems()),r.a.createElement(ne,{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(n["PureComponent"]);oe.displayName="DashboardNav";var se=oe;var le=se;Object(c["a"])("interop.dashboardNav",{render:function e(t,a,n){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(le,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(104);var l=a.n(s);var c=a(14);var u=a(139);var d=a(33);var p=a(32);var f=a.n(p);var m=a(9);var h=a.n(m);var v=a(5);var g=a.n(v);var b=a(7);var _=a.n(b);var y=a(6);var k=a.n(y);var O=a(8);var w=a.n(O);var E=a(0);var C=a.n(E);var j=a(15);var S=a.n(j);var I=a(2);var T=a(3324);var N=a(866);var A=a(170);var R=a(26);var M=a(16);var x=a(212);var P=a(77);var D=a(11);var F=a(17);var L=a(21);var B=a(240);var U=a(10);var q=a(270);var G=a(257);var H=a(18);var W=a(283);var V=a(691);var z=a(65);var Q=a(92);var K=a(456);var Y=a(408);var J=a(898);var Z=a(1144);var X=a(103);var $=a(1147);var ee=a(174);var te=a(2144);var ae=new U["b"]("workspace_directory");var ne={team:C.a.shape({admins:C.a.arrayOf(C.a.shape({real_name:C.a.string})),can_leave:C.a.bool,cannot_leave_reasons:C.a.array,created:C.a.number,deleted:C.a.bool,description:C.a.string,discoverable:C.a.string,domain:C.a.string,enterprise_id:C.a.string,date_requested_join:C.a.oneOfType([C.a.string,C.a.number]),icon:C.a.object,id:C.a.string,is_member:C.a.bool,joined_date:C.a.number,name:C.a.string,user_counts:C.a.object}).isRequired,callLeaveWorkspace:C.a.func,onClose:C.a.func,onActionReject:C.a.func,onActionResolve:C.a.func,fetchEnterpriseTeamById:C.a.func,onLeaveReject:C.a.func,onLeaveResolve:C.a.func,onDone:C.a.func,fetchTeam:C.a.func,isGuest:C.a.bool,displayDirectoryInModal:C.a.bool,channelRedirect:C.a.string,postLaunchAction:C.a.string,userIdFromURL:C.a.string};var re={callLeaveWorkspace:I["noop"],onClose:I["noop"],onActionResolve:I["noop"],onActionReject:I["noop"],fetchEnterpriseTeamById:I["noop"],onLeaveReject:I["noop"],onLeaveResolve:I["noop"],onDone:I["noop"],fetchTeam:I["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null};var ie=function(e){w()(t,e);function t(e){g()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={team:{},loading:false};a.onDialogClose=a.onDialogClose.bind(a);a.onKeyPress=a.onKeyPress.bind(a);a.onWorkspaceLeave=a.onWorkspaceLeave.bind(a);a.setLoading=a.setLoading.bind(a);return a}k()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function e(t){var a=this.props,n=a.team,i=a.onLeaveReject,s=a.onLeaveResolve,l=a.onDone;t.preventDefault();return this.props.callLeaveWorkspace({teamId:n.id}).then(function(){return s({workspace:r()({},n,{is_member:false})})}).then(function(){return l()}).catch(function(e){return i({node:o.a.createElement("span",null,ae.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"onKeyPress",value:function e(t,a){t.preventDefault();if("Enter"===t.key)switch(a){case"leave":return this.onWorkspaceLeave();default:}return null}},{key:"onDialogClose",value:function e(t){if(t){t.stopPropagation();t.preventDefault()}this.props.onClose()}},{key:"setWorkspace",value:function e(t,a){this.setState(function(){return{team:t}},a)}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getTitleAria",value:function e(){var t=this.state.team.name,a=void 0===t?"":t;if(!a)return"Workspace Name";return a}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,a=t.is_member,n=t.can_leave;var r=this.props.isGuest;return a&&n&&!r}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var a=this.props.team.id;this.setLoading(true);return this.props.fetchEnterpriseTeamById({teamId:a,additionalOptions:{include_admins:true}}).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var a=Object(I["map"])(t,function(e){return Object(M["getMemberRealName"])(e)});return Object(U["f"])(a,{noEscape:true})}},{key:"renderDialogHeaderCaption",value:function e(t){var a=this.state.loading;if(a)return null;if(!t)return null;return o.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},o.a.createElement(H["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderButton",value:function e(){var t=this.props,a=t.onActionReject,n=t.onActionResolve;var r=this.state,i=r.team,s=r.loading;if(s)return null;var l=!Object(N["a"])();return o.a.createElement($["a"],{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:true,onActionReject:a,onActionResolve:n,anchorPage:"workspace_directory",tabIndex:"0",size:"medium",doLaunchInNewTab:l,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true})}},{key:"renderDialogHeader",value:function e(t){var a=this.state.team;var n=a.name,r=void 0===n?"":n,i=a.domain,s=void 0===i?"":i;var l=S()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(ee["c"])()});return o.a.createElement("div",{className:l},o.a.createElement(K["a"],{entityType:"workspace",dimension:100,entityData:a,featureReactMessages:true,featureReactMemberProfileCard:true}),o.a.createElement("div",{className:"p-workspace_directory_dialog__name"},ae.t("{name}",{name:Object(U["m"])(r)})),o.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},ae.t("{domain}.slack.com",{domain:s})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderInfiniteSpinner",value:function e(){return o.a.createElement("div",{className:"overflow_hidden margin_100"},o.a.createElement(Q["a"],{size:"jumbo",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,a=t.description,n=t.admins,r=t.user_counts;var i=[];a&&i.push({heading:ae.t("About"),text:a,key:"dialog-description"});i.push({heading:ae.t("Active members"),text:ae.t("{activeMembers}",{activeMembers:Object(U["j"])(Object(I["get"])(r,"active_members",0))}),key:"dialog-active-members"},{heading:ae.t("Workspace admins"),text:this.listifyAdminRealNames(n),key:"dialog-admins"});var s=function e(t){return o.a.createElement("div",{key:t.key},o.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),o.a.createElement("p",null,t.text))};return o.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return s(e)}))}},{key:"renderDialogFooter",value:function e(){var t=this;return o.a.createElement("span",{className:"p-workspace_directory_dialog__leave",role:"button",tabIndex:"0",onClick:this.onWorkspaceLeave,onKeyPress:function e(a){return t.onKeyPress(a,"leave")}},ae.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function e(t){var a=this.canLeaveWorkspace();return o.a.createElement(Y["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),o.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),a&&this.renderDialogFooter()))}},{key:"render",value:function e(){var t=this.state.team;var a=Object(ee["f"])(t,{context:"dialog"});if(Object(ee["c"])())return this.renderDialogOnMobile(a);var n=this.props.displayDirectoryInModal;var i=S()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!n});var s={contentLabel:a,className:i,showCloseButton:true,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(a),titleAria:this.getTitleAria(),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true,onClose:this.onDialogClose,onCancel:this.onDialogClose};this.canLeaveWorkspace()&&(s=r()({},s,{showFooter:true,footerText:this.renderDialogFooter()}));return o.a.createElement(X["a"],s,this.renderDialogBody())}}]);return t}(i["Component"]);ie.displayName="WorkspaceDirectoryDialog";ie.defaultProps=re;var oe={callLeaveWorkspace:q["d"],fetchEnterpriseTeamById:q["j"]};var se=Object(c["connect"])(null,oe)(ie);var le=se;var ce=a(871);var ue=a(608);var de=a(2146);var pe={workspaces:C.a.array.isRequired,scrollElement:C.a.any,onScroll:C.a.func,renderWorkspaceCard:C.a.func,topOffset:C.a.number};var fe={scrollElement:window,onScroll:I["noop"],renderWorkspaceCard:I["noop"],topOffset:0};var me=function(e){w()(t,e);k()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var a=t.currentRow,n=void 0===a?0:a,r=t.prevColumns,i=void 0===r?0:r,o=t.updatedColumns,s=void 0===o?0:o;if(!n)return 0;if(i===s)return n;var l=n*i;return Math.floor(l/s)}}]);function t(e){g()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);a.state={columns:3};a.list=null;a.keys=[];a.rowsByIndex=[];a.currentRow=0;return a}k()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(a,n){if(this.state.columns!==n.columns){var r=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:n.columns,updatedColumns:this.state.columns});this.currentRow=r;var i=this.getKeyForRow(r);this.keys&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),a=t.start;this.currentRow=a||0;this.calculateColumns()}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"getWorkspacesByRowIndex",value:function e(t){var a=this.state.columns;var n=this.props.workspaces;var r=this.rowsByIndex[t];var i=Math.min(r+a,n.length);return Object(I["range"])(r,i)}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var a=3;a=Object(ee["c"])(t)?1:Object(ee["d"])(t)?2:3;this.state.columns!==a&&this.setColumns(a)}},{key:"renderCell",value:function e(t){var a=this.props,n=a.workspaces,r=a.renderWorkspaceCard;var i=n[t];if(!i)return null;return o.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},r(i))}},{key:"renderRow",value:function e(t){var a=this;var n=this.getWorkspacesByRowIndex(t);var r=S()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return o.a.createElement("div",{className:r},n.map(function(e){return a.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,a=t.topOffset,n=t.scrollElement,i=f()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(I["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return o.a.createElement(ue["a"],r()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(i["PureComponent"]);me.displayName="WorkspaceGridList";me.defaultProps=fe;var he=me;var ve=he;var ge=a(20);var be=a(473);var _e=a(54);var ye=a(1010);var ke=a(2148);var Oe=new U["b"]("workspace_directory");var we={enterprise:C.a.shape({icon:C.a.object,id:C.a.string,name:C.a.string}).isRequired,user:C.a.shape({id:C.a.string,is_admin:C.a.bool,is_owner:C.a.bool,is_primary_owner:C.a.bool,profile:C.a.object}).isRequired,displayManageOrgButton:C.a.bool,displaySearchBar:C.a.bool,isMobileView:C.a.bool,signoutUrl:C.a.string.isRequired,prefCompliantMemberName:C.a.string,organizationUrl:C.a.string,selectedSearchOption:C.a.object,onOptionSelected:C.a.func,onClearHeaderInput:C.a.func};var Ee={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:I["noop"],onClearHeaderInput:I["noop"]};var Ce=function(e){w()(t,e);function t(e){g()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return a}k()(t,[{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"onMenuItemSelected",value:function e(t){var a=this.props.signoutUrl;var n=window.location.origin+"/account/settings";switch(t){case"settings":window.open(n,"_self");break;case"signout":window.open(a,"_self");break;default:}return null}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=Oe.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return o.a.createElement(ge["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank",tabIndex:"0"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return o.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},o.a.createElement(ce["a"],{prepopulatedOption:t,featureZeroWorkspaceOnboarding:true,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function e(){return o.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function e(t){var a=this;var n=this.props,i=n.prefCompliantMemberName,s=n.enterprise,l=n.signoutUrl;var c=function e(){return o.a.createElement(_e["b"],{key:"workspace_directory_user_menu_name",label:o.a.createElement("span",{className:"black"},i),description:Oe.t("Account Settings"),href:"/account/settings",onSelected:function e(){return a.onMenuItemSelected("settings")},className:"no_underline",role:"link"})};var u=function e(){return o.a.createElement(_e["b"],{key:"workspace_directory_user_menu_sign_out",label:Oe.t("Sign out of {orgName}",{orgName:Object(U["m"])(s.name)}),href:l,onSelected:function e(){return a.onMenuItemSelected("signout")},className:"no_underline",danger:true,role:"link"})};return o.a.createElement(_e["f"],r()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),c(),o.a.createElement(_e["d"],null),u())}},{key:"renderAvatar",value:function e(){var t=this.props.user;return o.a.createElement(_e["e"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},o.a.createElement(ge["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon",tabIndex:"0"},o.a.createElement(K["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true})))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,n=t.isMobileView,r=t.organizationUrl;var i=n?Oe.t("Directory"):Oe.t("Workspace Directory");return o.a.createElement(ye["a"],{"data-qa":"ws_directory_header",title:i,team:a,isEnterprise:true,logoAriaLabel:"Slack",logoLink:r,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(i["Component"]);Ce.displayName="WorkspaceDirectoryHeader";Ce.defaultProps=Ee;var je=function e(t,a){var n=a.user,r=a.enterprise,i=void 0===r?{}:r;return{signoutUrl:Object(D["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(M["getPrefCompliantMemberName"])(t,n),organizationUrl:Object(be["a"])(t,i.domain)}};var Se=Object(c["connect"])(je)(Ce);var Ie=Se;var Te=a(2150);var Ne={title:C.a.node,description:C.a.node,showCloseButton:C.a.bool,onClose:C.a.func,className:C.a.string,isHidden:C.a.bool};var Ae={title:"",description:"",showCloseButton:false,onClose:I["noop"],className:"",isHidden:true};var Re=function(e){w()(t,e);function t(e){g()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClose=a.onClose.bind(a);a.onKeyPress=a.onKeyPress.bind(a);return a}k()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return o.a.createElement(ge["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},o.a.createElement(H["b"],{type:"times"}))}},{key:"renderBannerText",value:function e(){var t=this.props,a=t.title,n=t.description;return o.a.createElement("div",{className:"p-workspace_directory_banner__text"},o.a.createElement("div",{className:"p-workspace_directory_banner__title"},a),o.a.createElement("span",{className:"p-workspace_directory_banner__description"},n))}},{key:"render",value:function e(){var t=this.props,a=t.showCloseButton,n=t.className;var r=S()("p-workspace_directory_banner",n);return o.a.createElement("div",{className:r},this.renderBannerText(),a&&this.renderCloseButton())}}]);return t}(i["PureComponent"]);Re.displayName="WorkspaceDirectoryBanner";Re.defaultProps=Ae;var Me=Re;var xe=Me;var Pe=a(2068);var De=new U["b"]("workspace_directory");var Fe={enterprise:C.a.shape({id:C.a.string,name:C.a.string,domain:C.a.string,icon:C.a.object,locale:C.a.string}).isRequired,user:C.a.shape({id:C.a.string,name:C.a.string,is_admin:C.a.bool,is_owner:C.a.bool,profile:C.a.object}),fetchDirectoryWorkspaces:C.a.func.isRequired,fetchEnterpriseTeamById:C.a.func.isRequired,enqueueToast:C.a.func,fetchRawMembersFromAPI:C.a.func.isRequired,openModal:C.a.func,closeModal:C.a.func,allowWorkspaceRequest:C.a.bool,showRequestDialog:C.a.func,launchTeamId:C.a.string,displayDirectoryInModal:C.a.bool,onClose:C.a.func,hasSeenOnboardingBanner:C.a.bool,queryString:C.a.object,setUserPrefByApi:C.a.func};var Le={organizationName:"",organizationIcon:"https://vignette.wikia.nocookie.net/plantsvszombies/images/4/42/Shrek_emoji.png/revision/latest?cb=20160413203711",user:{},enqueueToast:I["noop"],openModal:I["noop"],closeModal:I["noop"],allowWorkspaceRequest:false,showRequestDialog:I["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:I["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:I["noop"]};var Be=300;var Ue=Object(F["b"])();var qe=function(e){w()(t,e);k()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(I["sortBy"])(t,function(e){return e.name})}}]);function t(e){g()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};a.dialog=null;a.headerPaneHeight=null;a.clientHeight=null;a.page=null;a.pageSearch=null;a.listRefs={allWorkspaces:null,yourWorkspaces:null};a.windowScroller=null;a.onboardingBannerHeight=0;a.trackingCode="";Object(I["bindAll"])(a,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return a}k()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(ee["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(ee["m"])({trackingCode:this.trackingCode});var a=this.props.queryString&&Object(I["get"])(this.props.queryString,"user",null);a&&this.fetchSingleMemberToPrepopulate(a)}},{key:"componentDidUpdate",value:function e(t,a){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var n=this.getListHeight("yourWorkspaces");n!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:n});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(s["findDOMNode"])(this.onboardingBanner).clientHeight);!a.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();a.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(ee["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var a=t.currentTarget.scrollTop;var n=a>=this.headerPaneHeight;n&&this.pageSearch.getWrappedInstance().blur();n!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(n)}},{key:"onWindowScrollerScroll",value:function e(t){var a=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:a})}},{key:"onModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return Ue.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function e(t){var a=t.node,n=t.err;a&&this.setToastText(a);Ue.error("Error with Workspace Action in WorkspaceDirectory - ",n)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.node,n=t.workspace;if(n&&n.is_member){this.onWorkspaceJoin({workspace:n});if(this.props.displayDirectoryInModal)return this.onModalClose()}a&&this.setToastText(a);return this.closeDialog()}},{key:"onWorkspaceJoin",value:function e(a){var n=this;var i=a.workspace;this.setState(function(e){var a=n.maybeUpsertWorkspaceToSearchResults(e,i);var o=e.yourWorkspaces.workspaces;var s=Object(I["unionBy"])([i],o,"id");var l=e.yourWorkspaces.totalWorkspaces+1;var c={yourWorkspaces:r()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(s),totalWorkspaces:l}),searchResults:r()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return c})}},{key:"onWorkspaceLeave",value:function e(a){var n=this;var i=a.workspace;this.setState(function(e){var a=n.maybeUpsertWorkspaceToSearchResults(e,i);var o=e.yourWorkspaces.workspaces;var s=Object(I["filter"])(o,function(e){return e.id!==i.id});var l=e.yourWorkspaces.totalWorkspaces-1;var c=e.allWorkspaces.workspaces;var u=Object(I["unionBy"])([i],c,"id");var d={yourWorkspaces:r()({},e.yourWorkspaces,{workspaces:s,totalWorkspaces:l}),allWorkspaces:r()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(u)}),searchResults:r()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return d},function(){n.closeDialog()})}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onClearHeaderInput",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setListRef",value:function e(t){var a=t.workspaceListKey,n=t.ref;this.listRefs[a]=n}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setListTopOffset",value:function e(t){var a=t.workspaceListKey,n=t.topOffset;this.setState(function(e){return h()({},a,r()({},e[a],{topOffset:n}))})}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHasApiError",value:function e(t,a){this.setState(function(e){return h()({},t,r()({},e[t],{hasApiError:a}))})}},{key:"setLoadingWorkspaces",value:function e(t,a){this.setState(function(e){return h()({},t,r()({},e[t],{loadingWorkspaces:a}))})}},{key:"setDialogWorkspaceDetail",value:function e(t,a){this.setState(function(){return{dialogWorkspaceDetail:t}},a)}},{key:"setWorkspaceFetchOptions",value:function e(t,a){var n=a.workspaces,i=void 0===n?[]:n,o=a.totalWorkspaces,s=void 0===o?0:o,l=a.onWorkspaces,c=void 0!==l&&l,u=a.nextCursorMark,d=void 0===u?null:u;this.setState(function(e){return h()({},t,r()({},e[t],{workspaces:i,totalWorkspaces:s,onWorkspaces:c,nextCursorMark:d}))})}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:o.a.createElement(W["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getListHeading",value:function e(t){var a=this.state.selectedOption;if("allWorkspaces"===t){var n=this.state.allWorkspaces.totalWorkspaces;var r=this.state.yourWorkspaces.totalWorkspaces;return De.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(n-r,0)})}if("yourWorkspaces"===t)return De.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,s=i.loadingWorkspaces,l=i.totalWorkspaces;var c=Object(I["get"])(a,"selectedOptionData");if(s)return null;if("member"===Object(I["get"])(a,"type")){var u=Object(M["getMemberRealName"])(c);var d=De.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:u,workspaceCount:l});return o.a.createElement(o.a.Fragment,null,o.a.createElement(K["a"],{entityType:"member",dimension:28,entityData:c,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),d)}if("workspace"===Object(I["get"])(a,"type")&&0===l)return De.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(I["get"])(a,"type")||c.id===ee["b"])&&l>0)return De.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:l,searchQuery:Object(I["get"])(c,"displayValue")});if("workspace"===Object(I["get"])(a,"type")&&l>0)return De.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:l,workspaceName:Object(I["get"])(a,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var a=this.state.allWorkspaces.workspaces;var n=this.state.yourWorkspaces.workspaces;return Object(I["differenceBy"])(a,n,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,a){var n=Object(I["get"])(t.searchResults,"workspaces",[]);var r=Object(I["find"])(n,function(e){return a.id===e.id});return r?Object(I["unionBy"])([a],n,"id"):n}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var a=this.props.showRequestDialog;return a({displayModernToast:function e(a){var n=a.type,r=a.errorType,i=a.teamName;var s=Object(ee["g"])({type:n,errorType:r,teamName:i});t.setToastText(o.a.createElement("div",{className:"display_flex"},"success"===n&&o.a.createElement(H["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),o.a.createElement("span",null,s)))}})}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,a=t.selectedOptionData,n=t.type;var r={};if(!a)return;this.setLoadingWorkspaces("searchResults",true);if(Object(I["get"])(a,"id")===ee["b"])r.searchTerm=a.displayValue;else{r.id=a.id;r.type="member"===n?"single_user":"single_workspace"}Object(ee["j"])({searchType:n});this.fetchWorkspacesWithArgs(r)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var a=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};a.setState(t)})}},{key:"openDialog",value:function e(t){var a=this;var n=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+n.id);Object(ee["n"])({teamId:n.id,trackingCode:this.trackingCode});this.setDialogWorkspaceDetail(n,function(){a.dialog=a.props.openModal({element:a.renderDialog()})})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/");this.props.closeModal()}},{key:"fetchWorkspacesWithArgs",value:function e(t){var a=t.type,n=t.id,r=t.searchTerm;var i=this.props.user.id;var o=this.state.selectedOption;var s=Object(I["isEmpty"])(o);var l=n===i&&s?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:l,additionalOptions:{type:a,id:n,searchTerm:r}})}},{key:"fetchTeam",value:function e(t){var a=this;return this.props.fetchEnterpriseTeamById({teamId:t}).then(function(e){a.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});a.openDialog({team:e})}).catch(function(e){a.setViewingHiddenWorkspace(true);Ue.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.additionalOptions,i=a.workspaceListKey,o=void 0===i?"allWorkspaces":i;var s=this.state[o].nextCursorMark;this.setHasApiError(o,false);return this.props.fetchDirectoryWorkspaces(r()({nextCursorMark:s},n)).then(function(e){var a=e.num_found,n=e.on_workspaces,r=e.items;var i=r;s&&(i=Object(I["unionBy"])(t.state[o].workspaces,i,"id"));t.setWorkspaceFetchOptions(o,{workspaces:i,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(o,false)}).catch(function(e){t.setHasApiError(o,true);t.setLoadingWorkspaces(o,false);Ue.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,n=t.scrollTop;return a-(n+this.clientHeight)<Be}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop;var n=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var r=this.getListHeight("yourWorkspaces");"allWorkspaces"===n&&(r+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:r});i&&!this.hasFetchedAllWorkspaces(n)?this.setLoadingWorkspaces(n,true):!i&&this.hasFetchedAllWorkspaces(n)&&this.setLoadingWorkspaces(n,false)}},{key:"renderDialog",value:function e(){var t=this.state,a=t.dialogWorkspaceDetail,n=t.displayDirectoryInModal;var r=this.props.user;var i=Object(I["get"])(this.props.queryString,"channel",null);var s=Object(I["get"])(this.props.queryString,"action",null);var l=Object(I["get"])(this.props.queryString,"user",null);var c=Object(M["isGuest"])(r);return o.a.createElement(le,{team:a,displayDirectoryInModal:n,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:true,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:c,channelRedirect:i,postLaunchAction:s,userIdFromURL:l})}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.renderFullPage;var n=S()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!a});return o.a.createElement("div",{className:n},o.a.createElement(Q["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(I["isEmpty"])(t))return null;var a=!Object(N["a"])();return o.a.createElement(Z["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:a,doUpsertJoin:true})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return o.a.createElement("div",{className:"p-workspace_directory__title"},De.t("Workspaces at {name}",{name:Object(U["m"])(t)}))}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return o.a.createElement("div",{className:"p-workspace_directory__search"},o.a.createElement(ce["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(I["get"])(t,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,a=t.displayDirectoryInModal,n=t.user;var r=S()("p-workspace_directory__header_pane",{margin_top_75:a});return o.a.createElement("div",{className:r,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!a&&this.renderTitle(),!Object(M["isGuest"])(n)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function e(t){return o.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderList",value:function e(t){var a=this;var n=t.listProps,i=t.workspaceListKey;var s=this.getWorkspacesForList(i);var l=this.state[i].loadingWorkspaces;if("searchResults"===i&&Object(I["isEmpty"])(s)&&!l)return this.renderSearchEmptyState();if(Object(I["isEmpty"])(s)&&!l)return null;var c=this.getWorkspaceListTopOffset(i);var u=this.getListHeading(i);return o.a.createElement(o.a.Fragment,null,this.renderListHeading(u),o.a.createElement("div",{className:"p-workspace_directory__list"},o.a.createElement(ve,r()({scrollElement:this.page,workspaces:s,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:c,ref:function e(t){return a.setListRef({workspaceListKey:i,ref:t})}},n))),l&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function e(){var t=this;var a=this.state,n=a.searchResults,r=a.selectedOption;var i=Object(I["get"])(r,"selectedOptionData");var s=void 0;var l=void 0;if(Object(ee["h"])(i)){var c=Object(I["get"])(n,"totalWorkspaces");var u=Object(I["get"])(n,"onWorkspaces");var d=Object(M["getMemberRealName"])(i);if(Object(J["c"])({totalWorkspaces:c,onWorkspaces:u})&&!Object(J["b"])({totalWorkspaces:c,onWorkspaces:u})){s=De.t("{memberName} hasn\u2019t joined any workspaces",{memberName:d});l=De.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var a=e.text,n=e.key,r=e.tag;if("a"===r)return o.a.createElement(z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:n},a);return{text:a}})}if(Object(J["b"])({totalWorkspaces:c,onWorkspaces:u})){s=De.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:d});l=De.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:d},function(e){var a=e.text,n=e.key,r=e.tag;if("a"===r)return o.a.createElement(z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:n},a);return{text:a}})}return o.a.createElement("div",{className:"align_center"},o.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},o.a.createElement(K["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),s),o.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},l))}s=De.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(I["get"])(i,"displayValue")});l=De.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var a=e.text,n=e.key,r=e.tag;if("a"===r)return o.a.createElement(z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:n},a);return{text:a}});return o.a.createElement("div",{className:"align_center"},o.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s),o.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},l))}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var a=this.state.hideOnboardingBanner;var n=S()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":a});var r=De.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return o.a.createElement(xe,{title:De.t("What is a workspace?"),description:r,className:n,onClose:this.onOnboardingBannerDismiss,isHidden:a,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var a=this.props.allowWorkspaceRequest;if(!a)return null;var n=De.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var a=e.text;return o.a.createElement(z["a"],{onClick:t.openWorkspaceRequestForm},a)});return o.a.createElement(xe,{title:De.t("Can\u2019t find your workspace?"),description:n,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:I["noop"]})}},{key:"renderDirectoryLists",value:function e(t){var a=this.state.selectedOption;var n=t.onChildScroll,i=t.registerChild,s=f()(t,["onChildScroll","registerChild"]);var l=r()({onScroll:n,scrollElement:this.page},s);var c=!!Object(I["get"])(a,"selectedOptionData");if(c)return o.a.createElement("div",{ref:i},this.renderSearchResults(l));return o.a.createElement("div",{ref:i},this.renderYourWorkspaces(l),this.renderAllWorkspaces(l))}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var a=this.state,n=a.searchResults,r=a.hideOnboardingBanner;var i=S()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!r});var s={};this.onboardingBannerHeight&&!r&&(s.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return o.a.createElement(o.a.Fragment,null,this.renderOnboardingBanner(),o.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:s},o.a.createElement(T["a"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(I["get"])(n,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderEmptyState",value:function e(t){var a=this.props.enterprise;return o.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},o.a.createElement(Je,r()({enterprise:a},t)))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var a=this.state.viewingHiddenWorkspace;var n=this.state.allWorkspaces,r=n.workspaces,i=n.loadingWorkspaces;var s=this.state.yourWorkspaces,l=s.workspaces,c=s.loadingWorkspaces;var u=!c&&Object(I["isEmpty"])(l);var d=!i&&Object(I["isEmpty"])(r);if(u&&Object(M["isGuest"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(d&&u)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(a)return this.renderEmptyState({isHiddenWorkspace:true});return o.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,a=t.user,n=t.enterprise;var r=this.state,i=r.isMobileView,s=r.hasScrolledPastHeaderPane,l=r.selectedOption;var c=a.is_admin||a.is_owner;return o.a.createElement(Ie,{enterprise:n,displayManageOrgButton:c,displaySearchBar:this.headerPane&&s,"data-js":"workspace_directory_sticky_header",user:a,isMobileView:i,selectedSearchOption:Object(I["get"])(l,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var a=S()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return o.a.createElement(Y["a"],{onCancel:this.onModalClose,showCancelButton:false,showGoButton:false,title:De.t("Workspaces at {orgName}",{orgName:t.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},o.a.createElement("div",{className:a,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var a=this.state.allWorkspaces,n=a.workspaces,r=a.loadingWorkspaces;var i=this.state.yourWorkspaces,s=i.workspaces,l=i.loadingWorkspaces;var c=l&&Object(I["isEmpty"])(s);var u=r&&Object(I["isEmpty"])(n);var d=c||u;if(t)return this.renderDirectoryInModal();return o.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),d&&this.renderInfiniteSpinner({renderFullPage:true}),o.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),o.a.createElement(V["a"],null))}}]);return t}(i["Component"]);qe.displayName="WorkspaceDirectory";qe.defaultProps=Le;var Ge=function e(t,a){var n=a.userId;var i=Object(A["getEnterprise"])(t);var o=Object(R["getMemberById"])(t,n);var s=Object(L["getOrgPref"])(t,"enterprise_team_creation_request");var l=s&&s.is_enabled&&!Object(M["isGuest"])(o);var c=Object(D["isClientApp"])(t);var u=Object(L["getUserPref"])(t,"seen_onboarding_banner");return{enterprise:i,user:r()({id:n},o),allowWorkspaceRequest:l,displayDirectoryInModal:c,hasSeenOnboardingBanner:u}};var He={enqueueToast:x["enqueueToast"],openModal:P["openModal"],closeModal:P["closeModal"],fetchRawMembersFromAPI:G["g"],setUserPrefByApi:B["c"],fetchEnterpriseTeamById:q["j"],fetchDirectoryWorkspaces:q["i"]};var We=Object(c["connect"])(Ge,He)(qe);var Ve=new U["b"]("workspace_directory");var ze={enterprise:C.a.shape({id:C.a.string,name:C.a.string,domain:C.a.string,icon:C.a.object,locale:C.a.string}).isRequired,isZeroWorkspaceGuest:C.a.bool,isZeroWorkspaceOrg:C.a.bool,isHiddenWorkspace:C.a.bool,directoryUrl:C.a.string};var Qe={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var Ke=function(e){w()(t,e);function t(e){g()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.redirectToDirectory=a.redirectToDirectory.bind(a);return a}k()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function e(){var t=this.props,a=t.enterprise,n=t.isHiddenWorkspace;var r=n?Ve.t("No workspace found"):Ve.t("No available workspaces");return o.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},o.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},o.a.createElement(K["a"],{entityType:"org",dimension:28,entityData:a,customClasses:"flex_none",featureReactMessages:true})),r)}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return o.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Ve.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(U["m"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return o.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Ve.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(U["m"])(t.name)}))}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return o.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Ve.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(U["m"])(t.name)}))}},{key:"renderBody",value:function e(){var t=this.props,a=t.isZeroWorkspaceGuest,n=t.isZeroWorkspaceOrg,r=t.isHiddenWorkspace;if(a)return this.renderZeroWorkspaceGuestBody();if(n)return this.renderZeroWorkspaceOrgBody();if(r)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return o.a.createElement(z["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},Ve.t("View all {orgName} workspaces",{orgName:Object(U["m"])(t.name)}),o.a.createElement(H["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"render",value:function e(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(i["PureComponent"]);Ke.displayName="WorkspaceDirectoryEmptyState";Ke.defaultProps=Qe;var Ye=function e(t,a){var n=a.enterprise;return{directoryUrl:Object(be["a"])(t,n.domain)}};var Je=Object(c["connect"])(Ye)(Ke);var Ze=We;var Xe=function e(t,a,n){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var i=Object(d["d"])(t);var s=r()({},n,{onClose:function e(){return l.a.unmountComponentAtNode(a)}});Object(u["a"])(o.a.createElement(c["Provider"],{store:i},o.a.createElement(Ze,s)),a)};var $e=function e(t){l.a.unmountComponentAtNode(t)};var et={mountWorkspaceDirectory:Xe,unmountWorkspaceDirectory:$e};var tt=a(51);Object(tt["a"])("interop.mountWorkspaceDirectory",Xe);Object(tt["a"])("interop.unmountWorkspaceDirectory",$e)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(0);var c=a.n(l);var u=a(25);var d=a(22);var p=Object(d["a"])("Fetches org retention settings",function(e,t,a){return e(Object(u["a"])({method:"mc.enterprise.retention.get",args:{enterprise:a}}))});p.propTypes=c.a.string.isRequired;var f=Object(d["a"])("Submits retention request to API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.type,r=a.requestData;return e(Object(u["a"])({method:"newRequest"===n?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest",args:r}))});f.propTypes={type:c.a.string.isRequired,requestData:c.a.object};var m=a(147);var h=a(9);var v=a.n(h);var g=a(3);var b=a.n(g);var _=a(5);var y=a.n(_);var k=a(6);var O=a.n(k);var w=a(7);var E=a.n(w);var C=a(8);var j=a.n(C);var S=a(2);var I=a.n(S);var T=a(10);var N=a(159);var A=a(15);var R=a.n(A);var M=a(18);var x=a(469);var P=new T["b"]("policy-retention");function D(e){return{channels:P.t("Channel Retention"),private_channels:P.t("Private Channel Retention"),dms:P.t("Direct Message Retention"),allow_override:e?P.t("Member & Admin Override"):P.t("Direct Message and Private Channel Override"),files:P.t("File Retention")}}function F(e){return{channels:[{value:4,label:e?P.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):P.t("No policy; teams can modify their own retention settings")},{value:0,label:e?P.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):P.t("Retain all messages")},{value:1,label:e?P.t("Keep all messages, including revision history"):P.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?P.t("Delete messages and their revisions after a set number of days"):P.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):P.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?P.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):P.t("No policy; teams can modify their own retention settings")},{value:0,label:e?P.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):P.t("Retain all messages")},{value:1,label:e?P.t("Keep all messages, including revision history"):P.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?P.t("Delete messages and their revisions after a set number of days"):P.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):P.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?P.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):P.t("Retain all messages")},{value:1,label:e?P.t("Keep all messages, including revision history"):P.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?P.t("Delete messages and their revisions after a set number of days"):P.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):P.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?P.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):P.t("No policy; teams can set their own override policy")},{value:0,label:e?P.t("Don\u2019t allow channel and DM overrides"):P.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?P.t("Always allow channel and DM overrides"):P.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?P.t("Keep files"):P.t("Retain all files")},{value:1,label:e?P.t("Keep files, but only for a set number of days"):P.t("Retain all files for only a specific number of days"),showDuration:true}]}}function L(e){var t=e.policyType,a=e.featureGdprExports;var n=D(a);return n[t]}function B(e){var t=e.policyType,a=e.featureGdprExports;var n=F(a);return n[t]}function U(e){return I.a.includes(["channels","private_channels","allow_override"],e)}function q(e){var t=e.policyType,a=e.retentionType,n=e.featureGdprExports;var r=B({policyType:t,featureGdprExports:n});return I.a.get(I.a.find(r,function(e){return e.value===a}),"showDuration",false)}function G(e){var t=e.policyType,a=e.retentionType,n=e.policyDurationValue,r=e.featureGdprExports;if(I.a.isUndefined(t)||I.a.isUndefined(a))return"";var i=q({policyType:t,retentionType:a,featureGdprExports:r});var o=i?n:0;if(0===I.a.parseInt(o)||4===I.a.parseInt(a)){var s=B({policyType:t,featureGdprExports:r});var l=I.a.find(s,function(e){return e.value===a}),c=l.label;return c}if("files"===t)return r?P.t("Keep files for {policyDurationValue} days",{policyDurationValue:n}):P.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:n});switch(I.a.parseInt(a)){case 2:return r?P.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:n}):P.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:n});case 3:return r?P.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:n}):P.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:n});default:return""}}function H(e){var t=e.policyType,a=e.settingValues,n=e.featureGdprExports;var r=a.retention_type;if(4===r){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var i=b()({},a,{is_locked:true});if(!q({policyType:t,retentionType:r,featureGdprExports:n}))return b()({},i,{retention_duration:0});return i}var W=new T["b"]("policy-retention");var V={orgName:c.a.string.isRequired,requesterName:c.a.string.isRequired,onConfirm:c.a.func.isRequired,onCancel:c.a.func.isRequired,requestedPolicies:c.a.object,currentPolicies:c.a.object,requestDate:c.a.string,cancelRequest:c.a.bool,featureGdprExports:c.a.bool.isRequired};var z={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var Q=function(e){j()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickCloseOrCancelButton=a.onClickCloseOrCancelButton.bind(a);a.onClickSubmitButton=a.onClickSubmitButton.bind(a);return a}O()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildRequestModalContent",value:function e(){var t=this.props,a=t.requesterName,n=t.orgName;return r.a.createElement("div",null,r.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},r.a.createElement("p",{className:"p-org_retention_request--font_bump"},r.a.createElement("strong",null,a,"\u2019s")," ","requested changes are listed below. Once you\u2019ve clicked"," ",r.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",n," to confirm the change."),r.a.createElement("p",null,r.a.createElement("strong",null,"Your name will be included with this request."))),r.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"buildCancelModalContent",value:function e(){var t=Object(x["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return r.a.createElement("div",null,r.a.createElement("h2",{className:"margin_bottom_150"},W.t("Are you sure you\u2019d like to cancel the retention policy update request?")),r.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",r.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",r.a.createElement("strong",null,t)," as expired."))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var a=this.props.featureGdprExports;return I.a.map(this.props.requestedPolicies,function(e,n){var i=e.retention_type,o=e.retention_duration,s=e.is_locked;var l=0!==i&&"allow_override"!==n||s?i:4;var c=I.a.get(t.props.currentPolicies,n);var u=c.retention_type,d=c.retention_duration,p=c.is_locked;var f=0!==u&&"allow_override"!==n||p?u:4;return r.a.createElement("div",{key:n,className:"p-org_retention_request__modal_section"},r.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},L({policyType:n,featureGdprExports:a})),r.a.createElement("div",null,r.a.createElement("div",{className:"bold"}," ","\ud83d\udc49\ud83c\udffe"," ",r.a.createElement("span",{className:"margin_left_50"},W.t("New:")," ",G({policyType:n,retentionType:l,policyDurationValue:o,featureGdprExports:a}))),r.a.createElement("div",null," ","\ud83d\udc74\ud83c\udffb"," ",r.a.createElement("span",{className:"margin_left_50"},W.t("Old:")," ",G({policyType:n,retentionType:f,policyDurationValue:d,featureGdprExports:a})))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":W.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var a=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var n=this.props.cancelRequest?W.t("Confirm Cancellation"):W.t("Confirm with Customer");var i=R()("btn",{btn_danger:this.props.cancelRequest});return r.a.createElement("div",{className:"c-modal c-modal--active"},r.a.createElement("div",{className:"c-modal__background"}),r.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},r.a.createElement(M["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),r.a.createElement("div",{className:"c-modal__header"},r.a.createElement("h2",{className:"margin_bottom_0"},t)),r.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},a,r.a.createElement("div",{className:"margin_bottom_400"},r.a.createElement("button",{type:"button",className:"btn btn_outline margin_right_75",onClick:this.onClickCloseOrCancelButton},W.t("Cancel")),r.a.createElement("button",{type:"button",className:i,onClick:this.onClickSubmitButton},n)))))}}]);return t}(r.a.PureComponent);Q.displayName="PolicyRequestModal";Q.defaultProps=z;var K=Object(N["a"])("feature_gdpr_exports")(Q);var Y=a(76);var J=new T["b"]("policy-retention");var Z=function e(t){var a=Object(x["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var n=J.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:a});var i=J.t("If you need to modify this request, please cancel it and initiate a new one. ");return r.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},r.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),r.a.createElement("strong",null,n),r.a.createElement("p",{className:"no_margin"},i))};Z.displayName="PendingRequestAlert";var X=Object(Y["pure"])(Z);var $=new T["b"]("policy-retention");var ee={users:c.a.object.isRequired,onUpdateUserSelection:c.a.func,currentSelectionValue:c.a.string,isFormPending:c.a.bool};var te={onUpdateUserSelection:I.a.noop,currentSelectionValue:"",isFormPending:false};var ae=function(e){j()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onOptionSelection=a.onOptionSelection.bind(a);return a}O()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:a})}},{key:"renderOptions",value:function e(){return I.a.map(this.props.users,function(e){return r.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return r.a.createElement("div",{className:"margin_bottom_200"},r.a.createElement("label",{htmlFor:"policy-requester"},$.t("Requester")),r.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},r.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},r.a.createElement("option",{value:"",disabled:true},$.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(r.a.Component);ae.displayName="RequesterSelect";ae.defaultProps=te;var ne=ae;var re=new T["b"]("policy-retention");var ie={onUpdateUserInput:c.a.func,currentUserValue:c.a.string,placeholder:c.a.string,isDisabled:c.a.bool};var oe={onUpdateUserInput:I.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var se=function(e){j()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUpdateInput=a.onUpdateInput.bind(a);return a}O()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return r.a.createElement("div",{className:"margin_bottom_200"},r.a.createElement("label",{htmlFor:"mc-user"},re.t("Your Full Name")),r.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},r.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(r.a.Component);se.displayName="McUserInput";se.defaultProps=oe;var le=se;var ce=new T["b"]("policy-retention");var ue={options:c.a.array.isRequired,onUpdatePolicySelection:c.a.func,currentSelectionValue:c.a.number,currentDurationValue:c.a.oneOfType([c.a.string,c.a.number]),isDeactivated:c.a.bool};var de={onUpdatePolicySelection:I.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var pe=function(e){j()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onTextInput=a.onTextInput.bind(a);a.onOptionSelection=a.onOptionSelection.bind(a);return a}O()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target.value;var n=4!==I.a.parseInt(a);this.props.onUpdatePolicySelection({retention_type:I.a.parseInt(a),is_locked:n})}},{key:"onTextInput",value:function e(t){var a=I.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:a})}},{key:"maybeRenderDuration",value:function e(){var t=this;var a=I.a.find(this.props.options,function(e){return e.value===I.a.parseInt(t.props.currentSelectionValue)}),n=a.showDuration;if(n)return r.a.createElement("div",{className:"p-org_retention_request__duration_group "},r.a.createElement("span",{className:"p-org_retention_request__duration_label"},ce.t("Duration")),r.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),r.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return I.a.map(this.props.options,function(e){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},r.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},r.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(r.a.Component);pe.displayName="PolicySelect";pe.defaultProps=de;var fe=pe;var me=new T["b"]("policy-retention");var he={displaySettings:c.a.shape({is_locked:c.a.bool,retention_duration:c.a.oneOfType([c.a.string,c.a.number]),retention_type:c.a.number}).isRequired,policyType:c.a.oneOf(["channels","private_channels","dms","allow_override","files"]).isRequired,policyLabel:c.a.string.isRequired,currentSettings:c.a.shape({is_locked:c.a.bool,retention_duration:c.a.number,retention_type:c.a.number}),onUpdatePolicy:c.a.func,pendingSettings:c.a.shape({is_locked:c.a.bool,retention_duration:c.a.number,retention_type:c.a.number}),isFormPending:c.a.bool,featureGdprExports:c.a.bool.isRequired};var ve={pendingSettings:{},currentSettings:{},onUpdatePolicy:I.a.noop,isFormPending:false};var ge=function(e){j()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUpdatePolicy=a.onUpdatePolicy.bind(a);return a}O()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,a=t.featureGdprExports,n=t.policyType;if(!I.a.isEmpty(this.props.pendingSettings)){var i=this.props.currentSettings,o=i.retention_type,s=i.retention_duration,l=i.is_locked;var c=0!==o&&"allow_override"!==this.props.policyType||l?o:4;var u=G({policyType:n,retentionType:c,policyDurationValue:s,featureGdprExports:a});var d=me.t("Current:");return r.a.createElement("p",null,d," ",u)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,a=t.isFormPending,n=t.policyType,i=t.featureGdprExports;var o=B({policyType:n,featureGdprExports:i});var s=this.props.displaySettings;!I.a.isEmpty(this.props.pendingSettings)&&a&&(s=this.props.pendingSettings);var l=s,c=l.is_locked,u=l.retention_duration,d=l.retention_type;var p="allow_override"===n&&!c||0===d&&!c&&U(n)?4:d;return r.a.createElement(fe,{id:"policy_select_"+this.props.policyType,options:o,currentSelectionValue:p,currentDurationValue:u,isDeactivated:a,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},r.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(r.a.Component);ge.displayName="PolicyItem";ge.defaultProps=ve;var be=Object(N["a"])("feature_gdpr_exports")(ge);var _e=a(2243);var ye=new T["b"]("policy-retention");var ke={orgId:c.a.string.isRequired,hasPermission:c.a.bool.isRequired,orgName:c.a.string.isRequired,orgOwners:c.a.object.isRequired,currentSettings:c.a.object.isRequired,submitRequest:c.a.func.isRequired,pendingData:c.a.object,featureGdprExports:c.a.bool.isRequired};var Oe={pendingData:{}};var we=function(e){j()(t,e);function t(e){y()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false,isSubmittable:false};a.onUpdatePolicySelect=a.onUpdatePolicySelect.bind(a);a.onUpdateRequesterSelect=a.onUpdateRequesterSelect.bind(a);a.onMcUserInput=a.onMcUserInput.bind(a);a.onSubmitRequest=a.onSubmitRequest.bind(a);a.onCancelRequest=a.onCancelRequest.bind(a);a.onCloseModal=a.onCloseModal.bind(a);a.onOpenModal=a.onOpenModal.bind(a);return a}O()(t,[{key:"onUpdatePolicySelect",value:function e(t){var a=t.policyType,n=t.data;var r=this.props.featureGdprExports;var i=this.state.requestedSettings;var o=i[a]||{};var s=this.props.currentSettings[a];var l=b()({},s,o,n);var c=void 0;var u=H({policyType:a,settingValues:l,featureGdprExports:r});c=I.a.isEqual(s,u)?I.a.omit(i,a):b()({},this.state.requestedSettings,v()({},a,l));this.setState(function(){return{requestedSettings:c}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onSubmitRequest",value:function e(){var t=this;var a=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",a)})}},{key:"onCancelRequest",value:function e(){var t=this;var a={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",a)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var a=this.state,n=a.requestedSettings,r=a.mcUser,i=a.requester;var o=I.a.reduce(n,function(e,a,n){e[n]=H({policyType:n,settingValues:a,featureGdprExports:t});return e},{});return{mc_user:r,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(o)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var a=this.state.requestedSettings;return I.a.every(a,function(e,a){var n=e.retention_duration,r=e.retention_type;return!(q({policyType:a,retentionType:r,featureGdprExports:t})&&(0===n||""===n))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,a=t.requestedSettings,n=t.mcUser,r=t.requester;return this.isFormDataValid()&&!I.a.isEmpty(a)&&!I.a.isUndefined(n)&&!I.a.isEmpty(n)&&!I.a.isUndefined(r)&&!I.a.isEmpty(r)}},{key:"maybeRenderPendingAlert",value:function e(t,a,n){if(t)return r.a.createElement(X,{requestTimestamp:I.a.parseInt(n),requesterName:a});return null}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t=void 0;var a=!I.a.isEmpty(this.props.pendingData);var n=this.props.pendingData,i=n.date_create,o=n.requester;if(a){var s=o.name;t=r.a.createElement(K,{orgName:this.props.orgName,requestDate:i,requesterName:s,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var l=this.state.requester.name;t=r.a.createElement(K,{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:l,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"renderPolicyItem",value:function e(t,a,n){var i=this.props.featureGdprExports;return r.a.createElement(be,{displaySettings:I.a.get(this.state.requestedSettings,t)||I.a.get(this.props.currentSettings,t),currentSettings:n?I.a.get(this.props.currentSettings,t):{},pendingSettings:I.a.get(a,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:L({policyType:t,featureGdprExports:i}),isFormPending:n})}},{key:"renderButtons",value:function e(){var t=!I.a.isEmpty(this.props.pendingData);var a=this.isFormSubmittable();var n=void 0;n=t?r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn_outline disabled margin_right_75",disabled:true},ye.t("Request Submitted")),r.a.createElement("button",{className:"btn btn_outline",onClick:this.onOpenModal},ye.t("Cancel"))):a?r.a.createElement("div",null,r.a.createElement("button",{className:"btn",onClick:this.onOpenModal},ye.t("Continue"))):r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn_outline disabled",disabled:true},ye.t("Continue")));return n}},{key:"render",value:function e(){var t=!I.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var a=this.props.pendingData,n=a.requested_settings,i=a.mc_user,o=a.requester,s=a.date_create;return r.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),r.a.createElement("div",null,this.maybeRenderPendingAlert(!I.a.isEmpty(this.props.pendingData),i,s),r.a.createElement("div",{className:"p-org_retention_request__section_header"},ye.t("Message Retention")),r.a.createElement("div",null,this.renderPolicyItem("channels",n,t)),r.a.createElement("div",null,this.renderPolicyItem("private_channels",n,t)),r.a.createElement("div",null,this.renderPolicyItem("dms",n,t)),r.a.createElement("div",null,this.renderPolicyItem("allow_override",n,t)),r.a.createElement("div",{className:"p-org_retention_request__section_header"},ye.t("File Retention")),r.a.createElement("div",null,this.renderPolicyItem("files",n,t)),r.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},ye.t("Authorization")),r.a.createElement("p",{className:"margin_bottom_200"},ye.t("Please include information about who is requesting this update, and your name.")),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(ne,{users:this.props.orgOwners,currentSelectionValue:I.a.get(this.state.requester,"id")||I.a.get(o,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),r.a.createElement(le,{currentUserValue:this.state.mcUser||i,isDisabled:t,placeholder:ye.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(r.a.Component);we.displayName="OrgRetentionRequest";we.defaultProps=Oe;var Ee=Object(N["a"])("feature_gdpr_exports")(we);var Ce=Ee;var je=function e(t,a,n,l){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var c=Object(s["d"])(t);var u=function r(i,o){Object(s["a"])(t,f({type:i,requestData:o})).then(function(){e(t,a,n,l)}).catch(function(e){return Object(m["f"])("Failed to submit retention request:",e)})};Object(s["a"])(t,p(n)).then(function(e){var t=e.id,n=e.has_permission,s=e.all_org_owners,d=e.current_settings,p=e.pending;Object(o["a"])(r.a.createElement(i["Provider"],{store:c},r.a.createElement(Ce,{submitRequest:u,orgId:t,orgName:l,hasPermission:n,orgOwners:s,currentSettings:d,pendingData:p})),a)}).catch(function(e){return Object(m["f"])("Failed to fetch retention settings:",e)})};var Se=je;var Ie=a(51);Object(Ie["a"])("interop.mountOrgRetentionRequest",Se)},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(3498);var l=a(24);var c=a.n(l);var u=a(32);var d=a.n(u);var p=a(9);var f=a.n(p);var m=a(25);var h=a(313);var v=a(3495);var g=a(1132);var b="@SLACK_STORE_RESET_ACTION_TYPE";var _=function e(t){return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];function i(t,a){if(a.type===b)return e(void 0,a);for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(void 0,[t,a].concat(r))}return t.apply(void 0,[i].concat(n))}};var y=_;var k="@SLACK_TEST_ONLY_MODIFY_STATE";var O=function e(t){return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];function i(t,a){if(a&&a.type===k)return a.payload;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(void 0,[t,a].concat(r))}return t.apply(void 0,[i].concat(n))}};var w=O;var E=a(1133);var C=a(903);var j=a(33);var S=a(185);var I;var T="TEST_TEAM_ID";var N=Object(S["a"])()?(I={},f()(I,m["a"].getType(),function(){throw new Error("apiCall called in test. Did you forget to mock a fetcher?")}),f()(I,m["b"].getType(),function(){throw new Error("apiCallExpedited called in test. Did you forget to mock a fetcher?")}),f()(I,h["e"].getType(),function(){throw new Error("Flannel query called in test. Did you forget to mock a fetcher?")}),I):{};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.teamId,a=void 0===t?T:t,n=e.middlewares,i=void 0===n?v["a"]:n,l=e.customEnhancers,u=void 0===l?g["a"]:l,p=e.mockedThunks,f=void 0===p?N:p,m=d()(e,["teamId","middlewares","customEnhancers","mockedThunks"]);var h=Object(s["a"])(r()({teamId:a,middlewares:[C["b"]].concat(c()(i)),customEnhancers:[].concat(c()(u),[y,w])},m));if(!o.a.get(h,"dispatch."+C["a"])){if(window.__REDUX_DEVTOOLS_EXTENSION__)throw new Error("Tests won't work when the Redux extension is enabled; please disable your Redux extension and try again");throw new Error("\n\t\t\tUnable to spy on dispatch in tests. You have likely added a redux\n\t\t\tstore enhancer that breaks tests. Please talk to @drew or @afong\n\t\t\tand we'll get this sorted out.\n\t\t")}var _=h.dispatch[C["a"]];var O=_;var S=[];var I=r()({},f);function A(e){S.push(e);var t=e&&e.type;if(I[t]){var a=R.getState;return I[t](A,a,e.payload)}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return O.apply(void 0,[e].concat(r))}h.dispatch[C["a"]]=A;var R=r()({},h,{resetState:function e(){this.dispatch({type:b});this._initStore()},modifyState:function e(t){var a=this.getState();var n=t(o.a.cloneDeep(a));this.dispatch({type:k,payload:n})},getActions:function e(){return S},resetActions:function e(){S=[]},flush:h[E["a"]],mockDispatch:function e(t){var a=t(_);if(!o.a.isFunction(a))throw new Error("\n\t\t\t\t\tmockDispatch expects a factory function that returns a\n\t\t\t\t\tdispatch function, not the dispatch function itself.\n\t\t\t\t");O=a},resetDispatch:function e(){O=_},mockThunk:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.a.noop;I[t.getType()]=a},unmockThunk:function e(t){delete I[t.getType()]},resetThunks:function e(){I=r()({},f)},loadFixture:function e(t,a){return h.dispatch(t(a))},reset:function e(){this.resetThunks();this.resetDispatch();this.resetState();this.resetActions()},_isTestStore:true});Object(j["e"])(a,R);return R}var R=a(683);var M=a(371);var x=a(336);var P=a(990);var D=a(1167);var F=a(1439);var L=a(1138);var B=a(1);var U=a.n(B);var q=a(0);var G=a.n(q);var H=a(31);var W=a(77);var V=a(5);var z=a.n(V);var Q=a(6);var K=a.n(Q);var Y=a(7);var J=a.n(Y);var Z=a(8);var X=a.n(Z);var $=a(14);var ee=a(15);var te=a.n(ee);var ae=a(11);var ne=a(19);var re=a(143);var ie=a(13);var oe=Object(ie["c"])("TS.files.gdrive.create");var se=Object(ie["c"])("TS.menu.file.onGDriveCreateComplete");var le=a(859);var ce=a(10);var ue=a(70);var de=a(118);var pe=a(103);var fe=a(88);var me=a(227);var he=a(190);var ve=a(961);var ge=a(966);var be=a(808);var _e=a(968);var ye=a(1404);var ke=new ce["b"]("create-gdoc-dialog");var Oe={type:G.a.string,closeModal:G.a.func,getShareableChannelId:G.a.func,featureFileThreads:G.a.bool,msgText:G.a.string,setMsgText:G.a.func,selectedChannel:G.a.object,setSelectedChannel:G.a.func,disallowedKeywordInMsgText:G.a.string,canPostInSelectedChannel:G.a.bool};var we={type:void 0,closeModal:o.a.noop,getShareableChannelId:o.a.noop,featureFileThreads:false,msgText:"",setMsgText:o.a.noop,selectedChannel:void 0,setSelectedChannel:o.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false};var Ee=function(e){X()(t,e);function t(e){z()(this,t);var a=J()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.a.bindAll(a,["onTextChange","onShareChannelChange","onGo","onCancel","onTitleInputChange","onShareWithChange","setTitleInputRef"]);a.titleInput=null;a.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:false};return a}K()(t,[{key:"onTextChange",value:function e(t){var a=t.text,n=t.overLimit;this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:n}})}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onCancel",value:function e(){se(false)}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"getCleanMsgText",value:function e(){var t=Object(re["a"])(this.props.msgText);return o.a.trim(t)}},{key:"getDialogTitle",value:function e(){var t=this.props,a=t.type,n=t.featureFileThreads;if(!n)return null;switch(a){case"document":return ke.t("Create a Google Document");case"presentation":return ke.t("Create a Google Presentation");case"spreadsheet":return ke.t("Create a Google Spreadsheet");default:return ke.t("Create a Google file")}}},{key:"setTitleInputRef",value:function e(t){if(!t)return;this.titleInput=t;this.focusTitleInput()}},{key:"focusTitleInput",value:function e(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,a=t.disallowedKeywordInMsgText,n=t.canPostInSelectedChannel;var r=this.state,i=r.overMsgLengthLimit,o=r.titleInputValue,s=r.submitting;var l=o&&o.length>ue["MAX_FILENAME_LENGTH"];return!n||!!a||i||l||s}},{key:"createGDocOnGo",value:function e(){var t=this;var a=this.props,n=a.selectedChannel,r=a.getShareableChannelId,i=a.type;var o=this.state,s=o.titleInputValue,l=o.shareWith;var c=n&&n.id;if(!c)return;r({channelOrMemberId:c}).then(function(e){var a=t.getCleanMsgText();var n=s||"Untitled";var r={title:n,channel:l?e:null,comment:l?a:null};oe(i,r).then(function(){t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.featureFileThreads,n=t.selectedChannel;var r=this.state.shareWith;if(!a)return null;var i=n&&n.id;return U.a.createElement(ge["a"],{onChange:this.onShareChannelChange,initialChannelId:i,isDisabled:!r})}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var a=Object(_e["a"])(r()({},this.props));if(!a)return null;return U.a.createElement("div",{className:"p-share_dialog__section"},U.a.createElement(de["d"],{type:"inline",level:"warning"},a))}},{key:"renderShareWith",value:function e(){var t=this.props.featureFileThreads;var a=this.state.shareWith;if(!t)return null;var n="create-gdoc-share-with";return U.a.createElement(fe["a"],{text:ke.t("Share with:"),htmlFor:n,type:"inline"},U.a.createElement(me["a"],{id:n,defaultChecked:a,onChange:this.onShareWithChange}))}},{key:"renderTitleInput",value:function e(){var t=this.props.featureFileThreads;var a=this.state.titleInputValue;if(!t)return null;var n="p-create_gdoc_dialog__title";return U.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},U.a.createElement(fe["a"],{htmlFor:n,text:ke.t("Title"),optional:true},U.a.createElement(he["a"],{id:n,name:n,maxCharacterLimit:ue["MAX_FILENAME_LENGTH"],counterMinimumCharacters:ue["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:a,ref:this.setTitleInputRef})))}},{key:"renderShareWithPicker",value:function e(){return U.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__create_gdoc_share_with"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function e(){var t=this.props,a=t.featureFileThreads,n=t.msgText;var r=this.state.shareWith;if(!a)return null;var i=ke.t("Add a message, if you\u2019d like.");var o=te()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input",{"p-share_dialog__create_gdoc_message_input--hide":!r});return U.a.createElement("div",{className:o},U.a.createElement(ve["a"],{text:n,onTextChange:this.onTextChange,placeholder:i,ariaLabel:i,onEnter:this.onGo}))}},{key:"render",value:function e(){var t=this.props.featureFileThreads;if(!t)return null;var a=false;return U.a.createElement(pe["a"],{className:"p-create_gdoc_dialog__modal",title:this.getDialogTitle(),shouldCloseOnOverlayClick:a,useSlackScrollbarWithPadding:true,goButtonText:ke.t("Create"),onGo:this.onGo,onClose:this.onCancel,onCancel:this.onCancel,goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareWithPicker(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(B["Component"]);Ee.displayName="CreateGDocDialog";Ee.defaultProps=we;function Ce(e,t){var a=t.selectedChannelId;var n=Object(be["b"])(e,t);var i=Object(ne["getChannelById"])(e,a)||Object(ne["getImByMemberId"])(e,a);return r()({},n,{selectedChannel:i,featureFileThreads:Object(ae["isFeatureEnabled"])(e,"feature_file_threads")})}var je={closeModal:W["closeModal"],getShareableChannelId:le["a"]};var Se=Object($["connect"])(Ce,je)(Ee);var Ie=Object(be["a"])(Se);var Te=Object(H["b"])("Opens the create gdoc file dialog",function(e,t,a){e(Object(W["openModal"])({element:U.a.createElement(Ie,a)}))});Te.propTypes={type:G.a.string,displayType:G.a.string,initialChannelId:G.a.string};var Ne=Te;var Ae=a(1148);var Re=a(21);var Me=Object(ie["c"])("TS.codemirror.legacyLoadCodemirror",function(){return Promise.reject()});var xe=Object(ie["c"])("TS.codemirror.legacyAttachToTextArea");var Pe=a(2301);var De=new ce["b"]("snippet-dialog");var Fe={wrapLongLines:G.a.bool,featureFileThreads:G.a.bool};var Le={wrapLongLines:true,featureFileThreads:true};var Be=function(e){X()(t,e);function t(e){z()(this,t);var a=J()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onFileNameChange","setTextAreaRef"]);a.state={fileName:"",overFileNameLimit:false};return a}K()(t,[{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>ue["MAX_FILENAME_LENGTH"]}})}},{key:"setTextAreaRef",value:function e(t){var a=this.props.wrapLongLines;this.textarea=t;this.editor=xe(this.textarea,{lineNumbers:true,matchBrackets:true,indentUnit:4,indentWithTabs:true,enterMode:"keep",tabMode:"shift",viewportMargin:10,autofocus:false,lineWrapping:a})}},{key:"render",value:function e(){var t=this.props.featureFileThreads;var a=this.state.fileName;if(!t)return null;var n="p-snippet_dialog";var r=De.t("Create snippet");var i=false;return U.a.createElement(pe["a"],{className:n,title:r,shouldCloseOnOverlayClick:i,useSlackScrollbarWithPadding:true},U.a.createElement("div",{className:"p-snippet_dialog__section"},U.a.createElement(he["a"],{id:"snippet-dialog-name",name:"snippet-dialog-name",value:a,onChange:this.onFileNameChange,placeholder:De.t("Title (optional)"),maxCharacterLimit:ue["MAX_FILENAME_LENGTH"],counterMinimumCharacters:ue["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"]})),U.a.createElement("div",{className:"p-snippet_dialog__section"},U.a.createElement("textarea",{ref:this.setTextAreaRef})))}}]);return t}(B["PureComponent"]);Be.displayName="SnippetDialog";Be.defaultProps=Le;function Ue(e){return{wrapLongLines:Object(Re["getUserPref"])(e,"snippet_editor_wrap_long_lines"),featureFileThreads:Object(ae["isFeatureEnabled"])(e,"feature_file_threads")}}var qe=Object($["connect"])(Ue)(Be);var Ge=Object(H["b"])("Opens the snippet dialog",function(e,t,a){Object(ae["isFeatureEnabled"])(t(),"feature_file_threads")&&e(Object(W["openModal"])({element:U.a.createElement(qe,a)}))});Ge.propTypes={initialText:G.a.string,initialChannelId:G.a.string,threadTs:G.a.string};var He=Ge;var We=a(739);var Ve=a(978);var ze=a(1143);var Qe=a(1129);var Ke=a(681);var Ye=a(22);var Je=Object(Ye["a"])("Fetch custom emoji from the API",function(e){return e(Object(m["a"])({method:"emoji.list",args:{include_complex_values:1}})).then(function(e){return{emoji:e.emoji,cacheTs:e.cache_ts}})});Je.propTypes=null;var Ze=a(23);var Xe=a(811);var $e=a(810);var et=a(936);var tt=a(3444);var at=Object(H["b"])("Load native and custom emoji",function(e,t){e(Object(Ke["setStandardEmoji"])({standardEmojiData:$e,standardEmojiCategories:et,standardEmojiKeywords:tt}));return e(Je()).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.emoji,r=a.cacheTs;if(Object(i["isEmpty"])(n))return;var o=t();var s=Object(Ze["getTeamId"])(o);var l=Object(Xe["e"])(n),c=l.emojis,u=l.aliases;e(Object(Ke["bulkAddCustomEmoji"])({teamId:s,cacheTs:r,emojis:c,aliases:u}))})});at.propTypes=null;var nt=at;var rt=a(1130);var it=a(806);var ot=a(374);var st=a(1131);var lt=a(741);var ct=a(602);var ut=a(51);var dt=a(1159);var pt=Object(dt["a"])(a(2303));var ft=Object(dt["a"])(a(2304));var mt=Object(dt["a"])(a(2305));var ht=Object(dt["a"])(a(2306));function vt(e){var t=o.a.camelCase(e);if(-1===t.indexOf("Store"))return null;t=t.slice(0,t.lastIndexOf("Store"));return t}function gt(e){return o.a.reduce(e,function(e,t,a){var n=vt(a);n&&(e[n]=t);return e},{})}var bt=r()({},gt(pt),gt(mt));var _t=r()({},gt(ft),gt(ht));Object(ut["a"])("interop.redux",{configureStore:s["a"],actions:{sendMessage:R["a"],prepareAndSendMessage:R["b"],saveMessageEdit:P["a"],removeMessageAndTimestamp:M["a"],openCustomStatusDialog:D["a"],openFileUploadDialog:F["a"],openShareDialog:L["a"],getChannelIdForSharing:le["a"],openRenameFileDialog:Ae["a"],openCreateGDocDialog:Ne,openSnippetDialog:He,universalSearchSetVisible:We["a"],clearSearchInput:Ve["a"],editLastUserMessageText:ze["a"],maybeAnimateDeleteMessage:Qe["a"],loadEmoji:nt},features:bt,middleware:{socketManager:x},models:r()({},_t,{channelsMeta:{channelNamesToIds:rt,inviters:it,mutedChannels:ot,needsApiMarking:st,needsCreatedMessage:lt,prqMetrics:ct}}),test:{createTestStore:A}})},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(3);var d=a.n(u);var p=a(24);var f=a.n(p);var m=a(9);var h=a.n(m);var v=a(5);var g=a.n(v);var b=a(6);var _=a.n(b);var y=a(7);var k=a.n(y);var O=a(8);var w=a.n(O);var E=a(0);var C=a.n(E);var j=a(2086);var S=a(2);var I=a(88);var T=a(20);var N=a(227);var A=a(285);var R=a(608);var M=a(161);var x=a(26);var P=a(1078);var D=a(1079);var F=a(10);var L=a(147);function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(a,n){var r=Object(L["k"])(a.email).error_key;if(!r&&("invite"===a.mapping||"create"===a.mapping)){var i=e.some(function(e,t){return t!==n&&e.email===a.email});var o=!i&&t.some(function(e){return e.profile.email===a.email});var s=i||o;r=s?"duped":r}return d()({},a,{email_state:r||"ok"})})}function U(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var q={makeUserLFSItem:U,validateEmails:B};var G=a(18);var H=a(661);var W=a(1165);function V(e){if(e.member)return r.a.createElement(W["a"],{item:e});return e.label}var z=a(1166);function Q(e){if(e.member)return r.a.createElement(z["a"],{item:e});return e.label}var K=a(2076);var Y=new F["b"]("imports");var J={userMapping:C.a.shape({id:C.a.oneOfType([C.a.string,C.a.number]).isRequired,name:C.a.string.isRequired,import_email:C.a.string.isRequired,email:C.a.string.isRequired,email_state:C.a.string.isRequired,mapping:C.a.string.isRequired}).isRequired,allMembers:C.a.object.isRequired,onUserMappingChange:C.a.func};var Z={onUserMappingChange:S["noop"]};var X=[{label:Y.t("Choose one:"),value:"-",id:"-"},{label:Y.t("Create & invite user"),value:"invite",id:"invite"},{label:Y.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:Y.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:Y.t("Skip user completely, importing no messages"),value:"0",id:"0"}];function $(e){return[].concat(X,f()(Object.values(e.allMembers).map(U))).map(function(t){return t.value===e.userMapping.mapping?d()({},t,{preselected:true}):t})}function ee(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var te=function(e){w()(t,e);function t(e){g()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEmailChange=a.onEmailChange.bind(a);a.onMappingChange=a.onMappingChange.bind(a);return a}_()(t,[{key:"componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems($(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(d()({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var a=void 0;var n=this.props.allMembers[t];a=n&&n.profile&&n.profile.email?n.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(d()({},this.props.userMapping,{mapping:t,email:a}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var a=this.props.userMapping,n=a.mapping,i=a.email,o=a.email_state,s=a.import_email,l=a.id;if(i===s&&"ok"===o)return null;if(i===s&&"create"!==n&&"invite"!==n)return null;if(ee(n))return null;return r.a.createElement("input",{type:"email",name:"email_"+l,defaultValue:i,onChange:function e(a){return t.onEmailChange(a.target.value)},placeholder:Object(L["a"])(),className:"small small_top_margin"})}},{key:"renderErrors",value:function e(){var t=void 0;switch(this.props.userMapping.email_state){case"duped":t=Y.t("Another user has this email.");break;case"empty":t=Y.t("An email address is required.");break;case"invalid":t=Y.t("This address is invalid.");break;case"ok":default:break}var a=["control-group","small_top_margin",{error:!ee(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return r.a.createElement("div",{className:a},t&&r.a.createElement("span",{className:"small_left_margin help-inline"},r.a.createElement(G["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return r.a.createElement(H["a"],{ref:function e(a){t.lazyFilterSelect=a},items:$(this.props),template:V,tokenTemplate:Q,onValueChange:function e(a){return t.onMappingChange(a[0].value)},single:true})}},{key:"renderAction",value:function e(){return r.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},r.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||Y.t("no email")),this.renderAction())}}]);return t}(n["PureComponent"]);te.displayName="ServiceImportUserMapping";te.defaultProps=Z;var ae=te;var ne=new F["b"]("imports");var re={service:C.a.string.isRequired,crumb:C.a.string.isRequired,allMembers:C.a.object.isRequired,initialUserMappings:C.a.arrayOf(C.a.shape({id:C.a.oneOfType([C.a.string,C.a.number]).isRequired,name:C.a.string.isRequired,import_email:C.a.string.isRequired,email:C.a.string.isRequired,email_state:C.a.string.isRequired,mapping:C.a.string.isRequired})).isRequired,initialChannelMappings:C.a.array.isRequired,ignoreApiUsers:C.a.bool};var ie={ignoreApiUsers:false};var oe=[{label:ne.t("Map users when possible, and manually configure the rest"),value:"-"},{label:ne.t("Create and invite users"),value:"invite"},{label:ne.t("Create deactivated users, without inviting anyone"),value:"create"},{label:ne.t("Do not create users, leaving messages as bot messages"),value:"bot"},{label:ne.t("Skip users, without importing their messages"),value:"0"}];var se=function(e){w()(t,e);function t(e){g()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={batchUserAction:"-",isUserMappingFormExpanded:false,userMappings:e.initialUserMappings,ignoreApiUsers:e.ignoreApiUsers};a.onUserMappingChange=a.onUserMappingChange.bind(a);a.onChange=a.onChange.bind(a);a.renderUserMapping=a.renderUserMapping.bind(a);a.onApplyBatchUserActionToAll=a.onApplyBatchUserActionToAll.bind(a);a.onApplyBatchUserActionToUnmapped=a.onApplyBatchUserActionToUnmapped.bind(a);return a}_()(t,[{key:"onChange",value:function e(t,a){this.setState(function(){return h()({},t,a)})}},{key:"onUserMappingChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.id)return;var n=this.state.userMappings;var r=Object(S["findIndex"])(n,function(e){return e.id===a.id});if(-1===r)return;var i=[].concat(f()(n.slice(0,r)),[a],f()(n.slice(r+1)));this.setState(function(){return{userMappings:B(i,Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:B(e.userMappings.map(function(a,n){return d()({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[n].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:B(e.userMappings.map(function(a,n){return ee(a.mapping)?a:d()({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[n].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"maybeRenderIgnoreApiUsersInput",value:function e(){var t=this;return"hipchat"!==this.props.service?null:r.a.createElement(M["a"],{enabled:["feature_service_import_lfs"]},r.a.createElement(I["a"],{text:ne.t('Also import "api" messages from the HipChat logs'),htmlFor:"service_import_ignore_api_user",type:"inline",cursor:"pointer"},r.a.createElement(N["a"],{id:"service_import_ignore_api_user",name:"service_import_ignore_api_user",value:!this.state.ignoreApiUsers,checked:!this.state.ignoreApiUsers,onChange:function e(){return t.onChange("ignoreApiUsers",!t.state.ignoreApiUsers)}})))}},{key:"renderUserMapping",value:function e(t){return r.a.createElement(ae,{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"renderUserMappingForm",value:function e(){var t=this;var a=this.state.userMappings.map(function(e){return String(e.id)});return r.a.createElement(M["a"],{enabled:["feature_service_import_lfs"]},r.a.createElement("div",null,r.a.createElement("div",{className:"display_flex align_items_center justify_content_between bottom_margin"},r.a.createElement("h4",{className:"medium_bottom_margin col span_3_of_6"},ne.t("View Users ({userCount})",{userCount:this.state.userMappings.length})),r.a.createElement(T["d"],{type:"outline",onClick:function e(){return t.onChange("isUserMappingFormExpanded",!t.state.isUserMappingFormExpanded)}},this.state.isUserMappingFormExpanded?ne.t("close"):ne.t("expand"))),r.a.createElement(P["a"],{isExpanded:this.state.isUserMappingFormExpanded},r.a.createElement("div",{className:"p-service_import_mapping_form--user_mappings"},r.a.createElement(j["a"],null,function(e){var n=e.width,i=e.height;return r.a.createElement(R["b"],{width:n,height:i,keys:a,rowRenderer:t.renderUserMapping})})))))}},{key:"renderUserImportMappingForm",value:function e(){var t=this;var a=this.state.batchUserAction;return r.a.createElement(M["a"],{enabled:["feature_service_import_lfs"]},r.a.createElement("div",null,r.a.createElement("h3",null,ne.t("Users")),r.a.createElement("h4",{className:"medium_bottom_margin"},ne.t("Batch Actions")),r.a.createElement("div",{className:"p-service_import_mapping_form--batch_actions display_flex justify_content_between"},r.a.createElement("div",{className:"flex_one"},r.a.createElement(A["d"],{id:"batchUserAction",name:"batchUserAction",onChange:function e(a){return t.onChange("batchUserAction",a)},options:oe,value:a,usePlaceholderOption:false})),r.a.createElement("div",{className:"flex_one align_right"},r.a.createElement(T["d"],{type:"outline",className:"right_margin",onClick:this.onApplyBatchUserActionToAll},ne.t("Apply to All Users")),r.a.createElement(T["d"],{type:"outline",onClick:this.onApplyBatchUserActionToUnmapped},ne.t("Apply to Unmapped Users")))),this.renderUserMappingForm(),this.maybeRenderIgnoreApiUsersInput()))}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var a=JSON.stringify(this.props.initialChannelMappings);var n=this.state.userMappings.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),r.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var i=this.props.initialChannelMappings.map(function(e){return r.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});var o="hipchat"!==this.props.service?null:r.a.createElement("input",{type:"hidden",value:this.state.ignoreApiUsers?1:0,name:"ignore_api_user"});return r.a.createElement("div",null,r.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),r.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),n,i,r.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),r.a.createElement("input",{type:"hidden",value:a,name:"channel_list"}),o)}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},this.renderUserImportMappingForm(),r.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),r.a.createElement(T["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(n["PureComponent"]);se.displayName="ServiceImportMappingForm";se.defaultProps=ie;function le(e){var t=Object(x["getAllMembers"])(e);return{allMembers:t}}var ce=Object(s["connect"])(le)(se);var ue=ce;var de=function e(t,a,n){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(l["a"])(r.a.createElement(s["Provider"],{store:Object(c["d"])(t)},r.a.createElement(ue,n)),a)};var pe=o.a.unmountComponentAtNode;var fe={mountServiceImportMappingForm:de,unmountServiceImportMappingForm:pe};var me=a(51);Object(me["a"])("interop.mountServiceImportMappingForm",de);Object(me["a"])("interop.unmountServiceImportMappingForm",pe)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(10);var k=a(2134);var O={title:_.a.string,subtitle:_.a.string,description:_.a.node};var w={title:"",subtitle:"",description:null};var E=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;return r.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return r.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return r.a.createElement("p",{className:"padding_top_50 margin_0 sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(n["PureComponent"]);E.displayName="SettingsHeader";E.defaultProps=w;var C=E;var j=a(32);var S=a.n(j);var I=a(3);var T=a.n(I);var N=a(2);var A=a(140);var R=a(77);var M=a(103);var x=a(1174);var P=a(227);var D=a(88);var F=new y["b"]("enterprise_settings");var L={membersShowAll:_.a.bool,guestsShowAll:_.a.bool,onSubmit:_.a.func.isRequired};var B={membersShowAll:true,guestsShowAll:true,onSubmit:N["noop"]};var U=function e(t){var a=t.type,n=t.value,i=t.label,o=t.onChange;return r.a.createElement(D["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},r.a.createElement(P["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:n,onChange:o}))};U.displayName="renderCheckbox";var q=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={membersShowAll:a.props.membersShowAll,guestsShowAll:a.props.guestsShowAll};Object(N["bindAll"])(a,["onMembersShowAllChange","onGuestsShowAllChange"]);return a}f()(t,[{key:"onMembersShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{membersShowAll:a}})}},{key:"onGuestsShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{guestsShowAll:a}})}},{key:"submit",value:function e(t){var a=this.state,n=a.membersShowAll,r=a.guestsShowAll;var i={membersShowAll:n,guestsShowAll:r};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:F.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return U(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:F.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return U(t)}},{key:"render",value:function e(){var t=F.t("Require existing members to accept the new Terms of Service?");var a=F.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return r.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},r.a.createElement("h3",{className:"margin_bottom_100"},t),r.a.createElement("p",{className:"margin_bottom_200"},a),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(n["PureComponent"]);q.displayName="CustomTOSAcceptForm";q.defaultProps=B;var G=q;var H=a(9);var W=a.n(H);var V=a(15);var z=a.n(V);var Q=a(478);var K=a(18);var Y=a(65);var J=a(338);var Z=a(660);var X=a(190);var $=a(799);var ee=a(2136);var te=new y["b"]("enterprise_settings");var ae="members";var ne="guests";var re="text";var ie="url";var oe="all";var se="not_all";var le="/custom_tos_view";var ce=16e3;var ue={membersUrl:_.a.string,membersText:_.a.string,membersContentType:_.a.oneOf([re,ie]),guestsUrl:_.a.string,guestsText:_.a.string,guestsContentType:_.a.oneOf([re,ie]),onSubmit:_.a.func.isRequired};var de={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text",onSubmit:N["noop"]};var pe=te.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_dark_grey cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,a=e.key,n=e.text;return"a"===t?r.a.createElement("a",{key:a,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},n):null});var fe=function e(t){var a=t.error,n=t.url,i=t.type,o=t.onChange;var s=te.t("https://\u2026");return r.a.createElement(X["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:n,onChange:o,errorText:a,errorLevel:"error",placeholder:s})};fe.displayName="renderInput";var me=function e(t){var a=t.error,n=t.text,i=t.type,o=t.onChange;return r.a.createElement($["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:n,hintText:pe,onChange:o,errorText:a,errorLevel:"error"})};me.displayName="renderTextarea";var he=function e(t,a){if(!Object(Q["d"])(a)){if(t===ae)return te.t("Please enter Terms of Service for Members.");if(t===ne)return te.rt("Please enter Terms of Service for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(a.length>=ce)return te.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:ce});return""};var ve=function e(t,a){if(!Object(Q["d"])(a)){if(t===ae)return te.t("Please enter Terms of Service URL for Members.");if(t===ne)return te.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(Q["b"])(a))return te.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var ge=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={all:a.props.guestsText||a.props.guestsUrl?se:oe,membersUrl:a.props.membersUrl,membersText:a.props.membersText,membersContentType:a.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:a.props.guestsUrl,guestsText:a.props.guestsText,guestsContentType:a.props.guestsContentType,guestsUrlError:"",guestsTextError:""};a.onAllChange=a.onAllChange.bind(a);a.onMembersTextChange=a.onTextChange.bind(a,ae);a.onGuestsTextChange=a.onTextChange.bind(a,ne);a.onMembersUrlChange=a.onUrlChange.bind(a,ae);a.onGuestsUrlChange=a.onUrlChange.bind(a,ne);a.onMembersToggle=a.onToggle.bind(a,ae);a.onGuestsToggle=a.onToggle.bind(a,ne);return a}f()(t,[{key:"onAllChange",value:function e(t){var a=t.target.value;this.setState(function(){return{all:a}})}},{key:"onToggle",value:function e(t){var a=this;var n=t+"ContentType";this.setState(function(){return W()({},n,a.state[n]===re?ie:re)})}},{key:"onTextChange",value:function e(t,a){this.setState(function(){var e;return e={},W()(e,t+"Text",a),W()(e,t+"TextError",""),e})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){var e;return e={},W()(e,t+"Url",a),W()(e,t+"UrlError",""),e})}},{key:"validate",value:function e(t){var a=this.state,n=a.all,r=a.membersUrl,i=a.membersText,o=a.membersContentType,s=a.guestsUrl,l=a.guestsText,c=a.guestsContentType;var u={};o===re&&(u.membersTextError=he(ae,i));o===ie&&(u.membersUrlError=ve(ae,r));if(n!==oe){c===re&&(u.guestsTextError=he(ne,l));c===ie&&(u.guestsUrlError=ve(ne,s))}this.setState(function(){return u},t)}},{key:"submit",value:function e(t){var a=this.state,n=a.all,r=S()(a,["all"]);var i=T()({all:n===oe},r);this.props.onSubmit(i,t)}},{key:"isValid",value:function e(){var t=this.state,a=t.all,n=t.membersUrl,r=t.membersText,i=t.membersContentType,o=t.membersUrlError,s=t.membersTextError,l=t.guestsUrl,c=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,p=t.guestsTextError;var f=i===re&&r&&!s||i===ie&&n&&!o;if(a===oe||!f)return f;var m=u===re&&c&&!p||u===ie&&l&&!d;return m}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==ie)return null;var t=this.state,a=t.membersUrl,n=t.membersUrlError;var r={error:n,url:a,type:ae,onChange:this.onMembersUrlChange};return fe(r)}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===oe)return null;if(this.state.guestsContentType!==ie)return null;var t=this.state,a=t.guestsUrl,n=t.guestsUrlError;var r={error:n,url:a,type:ne,onChange:this.onGuestsUrlChange};return fe(r)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==re)return null;var t=this.state,a=t.membersText,n=t.membersTextError;var r={error:n,text:a,type:ae,onChange:this.onMembersTextChange};return me(r)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===oe)return null;if(this.state.guestsContentType!==re)return null;var t=this.state,a=t.guestsText,n=t.guestsTextError;var r={error:n,text:a,type:ne,onChange:this.onGuestsTextChange};return me(r)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,a=t.all,n=t.guestsUrl,r=t.guestsText,i=t.guestsContentType;if(a===oe)return null;var o=!r&&i===re||!n&&i===ie;var s={previewIsDisabled:o,contentType:i,content:i===re?r:n,type:ne,onToggle:this.onGuestsToggle};return this.renderInputBar(s)}},{key:"renderMembersInputBar",value:function e(){var t=this.state,a=t.membersUrl,n=t.membersText,r=t.membersContentType;var i=!n&&r===re||!a&&r===ie;var o={previewIsDisabled:i,contentType:r,content:r===re?n:a,type:ae,onToggle:this.onMembersToggle};return this.renderInputBar(o)}},{key:"renderPreviewButton",value:function e(t){var a=this;var n=t.previewIsDisabled,i=t.contentType,o=t.content,s=t.type;var l=te.t("Preview");var c=i===ie;var u=c?function(){var e=window.open((Object(N["startsWith"])(o.toLowerCase(),"http")?"":"http://")+o,"_blank");e.opener=null}:function(){return a["tos_preview_"+s].submit()};var d=z()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_dark_grey:n});var p=r.a.createElement(Y["a"],{disabled:n,onClick:u},r.a.createElement("span",{className:d},l," ",r.a.createElement(K["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return r.a.createElement("form",{action:le,method:"POST",ref:function e(t){a["tos_preview_"+s]=t},target:"_blank"},r.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:o}),p)}},{key:"renderInputBar",value:function e(t){var a=t.contentType,n=t.onToggle;var i=te.t("Terms of Service");var o=a===re?te.t("Enter URL"):te.t("Enter text");var s=z()("p-ent_custom_tos_input_form__small_text","padding_left_50");return r.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},r.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),r.a.createElement(Y["a"],{onClick:n},r.a.createElement("span",{className:s},o)))}},{key:"renderRadio",value:function e(t){var a=this.state.all;var n=t.value,i=t.label;return r.a.createElement("div",{key:"tos_type_"+n},r.a.createElement(D["a"],{id:"tos_type_"+n+"_label",htmlFor:"tos_type_"+n+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:i},r.a.createElement(J["a"],{id:"tos_type_"+n+"_radio",value:n,onChange:this.onAllChange,checked:n===a})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:oe,label:te.t("Use the same Terms of Service as Full Members")},{value:se,label:te.t("Use a different Terms of Service")}];return r.a.createElement(Z["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"render",value:function e(){var t=te.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var a=te.t("Full Members");var n=te.t("Guests");return r.a.createElement("div",null,r.a.createElement("p",null,t),r.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),r.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},n),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(n["PureComponent"]);ge.displayName="CustomTOSInputForm";ge.defaultProps=de;var be=ge;var _e=a(1443);var ye=new y["b"]("enterprise_settings");var ke="text";var Oe="url";var we={saving:_.a.bool,customTos:_.a.bool,membersTos:_.a.string,membersContentType:_.a.string,guestsTos:_.a.string,guestsContentType:_.a.string,openModal:_.a.func};var Ee={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:N["noop"]};var Ce=function e(t){var a=t.customTos,n=t.membersTos,r=t.membersContentType,i=t.guestsTos,o=t.guestsContentType;return{all:!i,membersUrl:r===Oe?n:"",membersText:r===ke?n:"",membersShowAll:!a,membersContentType:r,guestsUrl:o===Oe?i:"",guestsText:o===ke?i:"",guestsShowAll:!a,guestsContentType:o}};var je=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state=T()({},Ce(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(N["bindAll"])(a,["onClick","onEnable","onDisable","onEdit","onEnd","onCancelEnable","onConfirmDisable","onConfirmEnable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return a}f()(t,[{key:"componentDidUpdate",value:function e(t,a){!this.props.saving&&this.state.isPending&&this.onEnd();this.dialog&&a.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}})}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}})}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}})}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}},this.onEnd)}},{key:"onConfirmDisable",value:function e(){this.setIsPending(true);Object(A["b"])(Object(A["a"])().settings.deactivateOrgCustomTOSSettings())}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,a=t.all,n=t.membersUrl,r=t.membersText,i=t.membersShowAll,o=t.membersContentType,s=t.guestsUrl,l=t.guestsText,c=t.guestsShowAll,u=t.guestsContentType;var d=o===ke?r:n;var p=this.props.customTos;var f={customTos:p,membersTos:d,membersShowAll:i,membersContentType:o,guestsShowAll:c};if(!a){var m=u===ke?l:s;f.guestsTos=m;f.guestsContentType=u}Object(A["b"])(Object(A["a"])().settings.createOrgCustomTOSSettings(f))}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"setFormSettings",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N["noop"];this.setState(function(){return t},a)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"reset",value:function e(t){var a=this;this.setState(function(){return T()({},Ce(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"buildEnableSteps",value:function e(){var t=this;var a=this.renderInputForm();var n=this.renderAcceptForm();var r=function e(){return t.props.customTos?ye.t("Edit Custom Terms of Service"):ye.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?ye.t("Update Custom Terms of Service"):ye.t("Enable Custom Terms of Service")};var o=ye.t("Next");var s=ye.t("Cancel");var l=this.state.isPending;return[{children:a,goButtonText:o,cancelText:s,title:r(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:n,goButtonText:i(),goButtonIsPending:l,cancelText:s,title:r(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;return r.a.createElement(x["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,steps:this.buildEnableSteps(),position:"fixed",ref:function e(a){t.settingsModalRef=a}})}},{key:"renderDisable",value:function e(){var t=ye.t("Disable");var a="danger";var n=ye.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var i=ye.t("Disable Custom Terms of Service");var o=this.state.isPending;return r.a.createElement(M["a"],{goButtonText:t,goButtonType:a,goButtonIsPending:o,title:i,onGo:this.onConfirmDisable,shouldCloseOnGo:false},r.a.createElement("p",null,n))}},{key:"renderInputForm",value:function e(){var t=this;var a=this.state,n=a.all,i=a.isValid,o=a.isPending,s=a.showEnable,l=a.showEdit,c=S()(a,["all","isValid","isPending","showEnable","showEdit"]);var u=T()({},c,{onSubmit:this.setFormSettings});return r.a.createElement(be,T()({},u,{ref:function e(a){t.inputForm=a}}))}},{key:"renderAcceptForm",value:function e(){var t=this;var a=!this.props.customTos;var n={membersShowAll:a,guestsShowAll:a,onSubmit:this.setFormSettings};return r.a.createElement(G,T()({},n,{ref:function e(a){t.acceptForm=a}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var a={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var n=ye.t("Custom Terms of Service");var i=t?ye.t("Enabled"):ye.t("Disabled");var o=ye.t("You can require members of your organization to accept custom Terms of Service before they can use Slack.");return r.a.createElement(_e["a"],{label:n,state:i,description:o,onClick:this.onClick,control:a})}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting(),this.maybeRenderEnable())}}]);return t}(n["PureComponent"]);je.displayName="CustomTOSSetting";je.defaultProps=Ee;var Se={openModal:R["openModal"]};var Ie=Object(s["connect"])(null,Se)(je);var Te=Ie;var Ne=a(2138);var Ae=new y["b"]("enterprise_settings");var Re={loading:_.a.bool,saving:_.a.bool,customTos:_.a.bool,membersTos:_.a.string,guestsTos:_.a.string,membersContentType:_.a.string,guestsContentType:_.a.string};var Me={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text"};var xe=function e(){return r.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};xe.displayName="renderLoadingContainer";var Pe=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,a=t.saving,n=t.customTos,i=t.membersTos,o=t.guestsTos,s=t.membersContentType,l=t.guestsContentType;var c={saving:a,customTos:n,membersTos:i,guestsTos:o,membersContentType:s,guestsContentType:l};return r.a.createElement(Te,c)}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-org_wide_settings_pane"},r.a.createElement(C,{title:Ae.t("Organization Settings")}),xe(),this.maybeRenderCustomTOS())}}]);return t}(n["PureComponent"]);Pe.displayName="OrgWideSettingsPane";Pe.defaultProps=Me;var De=Pe;var Fe=Pe;var Le=Fe;Object(c["a"])("interop.orgWideSettingsPane",{render:function e(t,a,n){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(Le,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(0);var g=a.n(v);var b=a(2);var _=a.n(b);var y=a(2086);var k=a(850);var O=a(650);var w=a(69);var E=a(11);var C=a(169);var j=a(10);var S=a(167);var I=a(63);var T=a(742);var N=a(715);var A=a(13);var R=Object(A["c"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var M=Object(A["c"])("TS.client.unread.isEnabled",function(){return null});var x=a(15);var P=a.n(x);var D=a(41);var F=a(18);var L=a(62);var B=a(2208);var U=a(2210);var q={os:g.a.oneOf(["windows","mac","linux"]),browser:g.a.string,keyboardLocale:g.a.string,localeBlackList:g.a.array,title:g.a.string,keys:g.a.array,keysLinux:g.a.array,keysWin:g.a.array,hasInfoButton:g.a.bool,infoButtonMessage:g.a.string,id:g.a.string,isSsbOnly:g.a.bool,browserBlackList:g.a.array};var G={os:null,browser:null,keyboardLocale:null,localeBlackList:null,title:"Basic",keys:[],keysLinux:null,keysWin:null,hasInfoButton:false,infoButtonMessage:"",id:null,isSsbOnly:false,browserBlackList:[]};var H={"\u2191":"arrow_up_medium","\u2193":"arrow_down_medium","\u2190":"arrow_left_medium","\u2192":"arrow_right_medium"};var W=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getKeys",value:function e(){var t=this.props,a=t.keys,n=t.keysWin,r=t.keysLinux,i=t.os;if(null!=n&&"windows"===i)return n;if(null!=r&&"linux"===i)return r;return a}},{key:"execShortcut",value:function e(t){R(t);Object(L["c"])("clicked_keyboard_shortcut")}},{key:"renderKeyLabel",value:function e(t){var a=this.props.os;var n="windows"===a||"linux"===a;if(H[t])return r.a.createElement(F["a"],{type:H[t]});if(("Cmd"===t||"Control"===t)&&n)return"Ctrl";if("Option"===t&&n)return"Alt";if("CtrlAlternative"===t)return"Ctrl";if("ShiftAlternative"===t)return"Shift";return t}},{key:"renderKeys",value:function e(){var t=this;return this.getKeys().map(function(e){var a=e.split("key_")[1];if(!a)return e;var n=!!H[a];var i=P()({"p-shortcuts_flexpane__arrow_key":n,"c-keyboard_key":true});return r.a.createElement("div",{key:t.props.title+" "+e,className:i},t.renderKeyLabel(a))})}},{key:"renderInfoButton",value:function e(){if(this.props.hasInfoButton)return r.a.createElement(D["d"],{tip:this.props.infoButtonMessage,delay:D["b"]},r.a.createElement(F["a"],{align:"top",className:"p-shortcuts_flexpane__tip",type:"question_circle"}));return null}},{key:"renderTitle",value:function e(){var t=this;if(null==this.props.id)return r.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},r.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title",key:"title "+this.props.title},this.props.title,this.renderInfoButton()));var a=P()("p-shortcuts_flexpane__shortcut_title","btn_link",this.props.id);return r.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},r.a.createElement("button",{type:"button",onClick:function e(){return t.execShortcut(t.props.id)},className:a,key:this.props.title+" shortcut_title"},this.props.title,this.renderInfoButton()))}},{key:"render",value:function e(){var t="ssb"===this.props.browser;if(this.props.isSsbOnly&&!t)return null;var a=null==this.props.browserBlackList?[]:this.props.browserBlackList;var n=Object(b["includes"])(a,this.props.browser)||Object(b["includes"])(a,this.props.os);if(n)return null;var i=null==this.props.localeBlackList?[]:this.props.localeBlackList;var o=Object(b["includes"])(i,this.props.keyboardLocale);if(o)return null;if("open_all_unreads"===this.props.id&&!M())return null;var s=null==this.props.id?"":"p-shortcuts_flexpane__shortcut_hoverable";var l=P()("p-shortcuts_flexpane__shortcut",s);return r.a.createElement("li",{className:l,key:this.props.title+" shortcut"},this.renderTitle(),r.a.createElement("span",{className:"p-shortcuts_flexpane__shortcut_keys",key:this.props.title+" shortcut_keys"},this.renderKeys()))}}]);return t}(r.a.PureComponent);W.displayName="Shortcut";W.defaultProps=G;var V=W;var z=a(2212);var Q={os:g.a.oneOf(["windows","mac","linux"]),browser:g.a.string,keyboardLocale:g.a.string,id:g.a.string,title:g.a.string,shortcuts:g.a.arrayOf(g.a.shape({os:g.a.oneOf(["windows","mac","linux"]),browser:g.a.string,title:g.a.string,keys:g.a.array,keysLinux:g.a.array,keysWin:g.a.array,hasInfoButton:g.a.bool,infoButtonMessage:g.a.string,id:g.a.string,isSsbOnly:g.a.bool,browserBlackList:g.a.array,localeBlackList:g.a.array}))};var K={os:null,browser:null,keyboardLocale:null,title:null,id:null,shortcuts:[]};var Y=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderShortcuts",value:function e(){var t=this;return _.a.map(this.props.shortcuts,function(e){return r.a.createElement(V,{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,localeBlackList:e.localeBlackList,key:e.title+e.keys,title:e.title,isSsbOnly:e.isSsbOnly,keys:e.keys,keysLinux:e.keysLinux,keysWin:e.keysWin,hasInfoButton:e.hasInfoButton,infoButtonMessage:e.infoButtonMessage,id:e.id,browserBlackList:e.browserBlackList})})}},{key:"render",value:function e(){if("all_unreads"===this.props.id&&!M())return null;if("workspaces"===this.props.id&&"ssb"!==this.props.os)return null;return r.a.createElement("div",{className:"p-shortcuts_flexpane__section_container"},r.a.createElement("h3",{className:"p-shortcuts_flexpane__title"},this.props.title),r.a.createElement("ul",{className:"p-shortcuts_flexpane__list"},this.renderShortcuts()))}}]);return t}(r.a.PureComponent);Y.displayName="ShortcutsSection";Y.defaultProps=K;var J=Y;var Z=a(27);var X=a(217);var $=new j["b"]("shortcuts_flexpane");function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.featureJumpToUnreadShortcut,n=t.featureA11yCustomStatus,r=t.featureThreadsCopyChange;var i=[{title:$.t("Basics"),id:"basics",shortcuts:[{title:$.t("Quick Switcher"),keys:["key_Cmd","key_K","  or  ","key_T"],hasInfoButton:true,infoButtonMessage:$.t("Jump to another conversation by just typing its name",{fallbackHash:"137fbaf2c3cf03812df6ffc1116ae35390b63057"}),id:"quick_switcher",isSsbOnly:true},{title:$.t("Quick Switcher"),keys:["key_Cmd","key_K"],hasInfoButton:true,infoButtonMessage:$.t("Jump to another conversation by just typing its name",{fallbackHash:"137fbaf2c3cf03812df6ffc1116ae35390b63057"}),id:"quick_switcher",browserBlackList:["ssb"]},{title:$.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:$.t("Edit last message (in empty text input)"),keys:["key_\u2191"]},{title:$.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","es","fr","ja"]},{title:$.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","es","fr","ja"]},{title:$.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:r?$.t("Threads"):$.t("All Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:true},{title:$.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:true},{title:$.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:$.t("Navigation"),id:"navigation",shortcuts:[{title:$.t("Move focus to the next element"),keys:["key_Tab"]},{title:$.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:$.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:$.t("Move focus to the next section"),keys:Object(X["a"])()?["key_F6"]:["key_Cmd","key_F6"]},{title:$.t("Move focus to the previous section"),keys:Object(X["a"])()?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:$.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:$.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:$.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:$.t("Scroll up"),keys:["key_fn","key_\u2191","  or  ","key_Page Up"]},{title:$.t("Scroll down"),keys:["key_fn","key_\u2193","  or  ","key_Page Down"]},{title:$.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:true,browserBlackList:["windows","linux"]},{title:$.t("Open or close right pane"),keys:["key_Cmd","key_"+Object(C["c"])(".",{kb:e})]},{title:$.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:true},{title:$.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome_desktop","chrome_mobile"]},{title:$.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["ff"]},{title:$.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"]},{title:$.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:$.t("Messaging"),id:"messaging",shortcuts:[{title:$.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:$.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:$.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:$.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(C["c"])("\\",{kb:e})]},{title:$.t("Autocomplete @username"),keys:["key_@"]},{title:$.t("Autocomplete channel"),keys:["key_#"]},{title:$.t("Autocomplete emoji"),keys:["key_:"]}]},{title:$.t("Mark Messages Read and Unread"),shortcuts:[{title:$.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:$.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:$.t("Mark a message as unread"),keys:["key_Alt",$.t("  and click message")]}]},{title:$.t("Channels & Direct Messages"),shortcuts:[{title:$.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:$.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:$.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:$.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:$.t("All Unreads"),id:"all_unreads",shortcuts:[{title:$.t("Next channel"),keys:["key_\u2192"]},{title:$.t("Previous channel"),keys:["key_\u2190"]},{title:$.t("Mark channel as read"),keys:["key_R"]}]},{title:$.t("Files and Snippets"),shortcuts:[{title:$.t("Upload a file"),keys:["key_Cmd","key_U"]},{title:$.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:$.t("Calls"),shortcuts:[{title:$.t("Toggle mute"),keys:["key_M"]},{title:$.t("Toggle video"),keys:["key_V"]},{title:$.t("Invite list"),keys:["key_+",$.t("  or  "),"key_A"]},{title:$.t("Emoji reactions"),keys:["key_E",$.t("  then 1-9")]}]},{title:$.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:$.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["]},{title:$.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"]},{title:$.t("A specific workspace"),keys:["key_Cmd",$.t("  and 1-9")]}]}];var o=i[Object(b["findIndex"])(i,["id","basics"])].shortcuts;var s=i[Object(b["findIndex"])(i,["id","navigation"])].shortcuts;var l=i[Object(b["findIndex"])(i,["id","messaging"])].shortcuts;a&&Object(X["a"])()&&s.push({title:$.t("Jump to unread messages"),keys:["key_Cmd","key_J"]});l.push({title:$.t("Bold text"),keys:["key_Cmd","key_B"]});l.push({title:$.t("Italic text"),keys:["key_Cmd","key_I"]});l.push({title:$.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]});l.push({title:$.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]});if(!Object(X["a"])()||Object(Z["isSSBAndAtLeastVersion"])("3.0.0")){l.push({title:$.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]});l.push({title:$.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})}l.push({title:$.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]});n&&o.push({title:$.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});return i}var te=a(2214);var ae={os:g.a.oneOf(["windows","mac","linux"]),browser:g.a.string,keyboardLocale:g.a.string,sections:g.a.arrayOf(g.a.shape({os:g.a.oneOf(["windows","mac","linux"]),browser:g.a.string,title:g.a.string,shortcuts:g.a.arrayOf(g.a.shape({os:g.a.oneOf(["windows","mac","linux"]),browser:g.a.string,title:g.a.string,keys:g.a.array,keysLinux:g.a.array,keysWin:g.a.array,hasInfoButton:g.a.bool,infoButtonMessage:g.a.string,id:g.a.string,isSsbOnly:g.a.bool,browserBlackList:g.a.array}))})).isRequired,isShowing:g.a.bool,useGlobalNav:g.a.bool};var ne={os:null,browser:null,keyboardLocale:null,isShowing:true,useGlobalNav:false};var re=new j["b"]("shortcuts_flexpane");var ie=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderSections",value:function e(){var t=this;return _.a.map(this.props.sections,function(e){return r.a.createElement(J,{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,key:e.id+e.title,title:e.title,id:e.id,shortcuts:e.shortcuts})})}},{key:"renderHeading",value:function e(){if(this.props.useGlobalNav)return null;var t="mac"===this.props.os?re.t("Cmd"):re.t("Ctrl");var a=Object(C["c"])("/",{kb:this.props.keyboardLocale});var n=re.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:t,headerSlashButton:a});return r.a.createElement(N["a"],null,r.a.createElement("span",{id:"shortcuts_tab_aria_label"},re.t("Keyboard Shortcuts")),r.a.createElement("span",{className:"p-shortcuts_flexpane__sub_heading block"},n))}},{key:"render",value:function e(){var t=this;var a=this.props.isShowing;if(!a)return null;return r.a.createElement("div",{className:"p-shortcuts_flexpane"},this.renderHeading(),r.a.createElement("div",{className:"p-shortcuts_flexpane__section"},r.a.createElement(y["a"],null,function(e){var a=e.width,n=e.height;return r.a.createElement(T["a"],{serializationKey:"keyboard-shortcuts-scrollbar",width:a,height:n,monkey:true},t.renderSections())})))}}]);return t}(r.a.PureComponent);ie.displayName="KeyboardShortcutsList";ie.defaultProps=ne;function oe(e,t){var a=Object(k["getKeyboardLocale"])(e);var n=void 0;n=Object(E["isFeatureEnabled"])(e,"feature_remove_flexpane_store")?"shortcuts"===Object(w["getSecondaryView"])(e):Object(I["a"])()||"shortcuts"===Object(O["getFlexpaneState"])(e).flexName;var r=Object(E["isFeatureEnabled"])(e,"feature_jump_to_unread_shortcut");var i=Object(E["isFeatureEnabled"])(e,"feature_custom_status_expiry");var o=Object(E["isFeatureEnabled"])(e,"feature_threads_copy_change");return{sections:t.sections||ee(a,{featureJumpToUnreadShortcut:r,featureCustomStatusExpiry:i,featureThreadsCopyChange:o}),isShowing:n,useGlobalNav:Object(S["b"])(e)}}var se=Object(i["connect"])(oe)(ie);var le=se;var ce=function e(t,a,n){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(s["d"])(t);var c=n;Object(o["a"])(r.a.createElement(i["Provider"],{store:l},r.a.createElement(le,c)),a)};var ue=ce;var de=a(51);Object(de["a"])("interop.mountKeyboardShortcuts",ue)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(2);var k=a(10);var O=a(140);var w=a(344);var E=a(20);var C=a(41);var j=a(18);var S=a(15);var I=a.n(S);var T={headerAction:_.a.node};var N={headerAction:null};var A=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){return r.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(n["PureComponent"]);A.displayName="OrgDashboardHeaderItem";A.defaultProps=N;var R=A;var M={title:_.a.node.isRequired,headerActions:_.a.array,headerClassName:_.a.string};var x={headerActions:[],headerClassName:""};var P=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(y["map"])(t,function(e,t){return r.a.createElement(R,{key:t,headerAction:e})});return a}},{key:"render",value:function e(){var t=this.props.headerClassName;var a=I()("margin_left_75","display_flex","justify_content_between",""+t);return r.a.createElement("div",{className:a},r.a.createElement("h1",null,this.props.title),r.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(n["PureComponent"]);P.displayName="OrgDashboardHeader";P.defaultProps=x;var D=P;var F=D;var L=a(2130);var B=new k["b"]("enterprise_dashboard");var U={pageHeader:_.a.string};var q={pageHeader:""};var G=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=B.t("No apps have been installed on this workspace.");return r.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},r.a.createElement(F,{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),r.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},r.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),r.a.createElement("h3",{className:"black margin_bottom_75"},a)))}}]);return t}(n["PureComponent"]);G.displayName="TeamAppsEmptyState";G.defaultProps=q;var H=G;var W=a(714);var V=a(159);var z=new k["b"]("enterprise_dashboard");var Q={teamApps:_.a.array,teamId:_.a.string.isRequired,teamAppsApiCursor:_.a.string,teamAppsApiTotal:_.a.number,teamAppsLoading:_.a.bool,headerItemOnClick:_.a.func,pageSize:_.a.number,sortBy:_.a.string,sortDir:_.a.string,searchQuery:_.a.string,rowHeaderItemClassName:_.a.string,rowClassName:_.a.string,featureWtaOrgLevelApps:_.a.bool};var K={teamApps:[],headerItemOnClick:y["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureWtaOrgLevelApps:false};var Y="asc";var J="desc";var Z="caret_down";var X="caret_up";var $={};$[Y]=Z;$[J]=X;var ee=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=a.props,i=n.featureWtaOrgLevelApps,o=n.sortBy,s=n.sortDir;a.state={rowListItems:[],sortBy:o,sortDir:s,offset:0,height:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);a.appSources={internal:z.t("Internal"),"app directory":z.t("App Directory"),unknown:z.t("Unknown")};a.sourceTooltipStrings={"app directory":z.t("This app has been installed from the Slack App Directory."),internal:z.t("This app was created by someone within your organization."),unknown:z.t("This app was installed from an unknown external source.")};a.rowTemplate={items:[{value:function e(t){var n=t&&t.icons&&t.icons.image_72;return r.a.createElement("button",{className:"p-app_management_table_view_app_name",onClick:function e(){return a.onAppNameClick(t.id)}},n&&r.a.createElement("img",{src:n,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var a=t.installed_by&&t.installed_by.count;return z.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:a})}},{value:function e(t){var a=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var n=new Date(1e3*a).toLocaleDateString();return""+n}},{value:function e(t){var n=a.sourceTooltipStrings[t.source];var i=a.appSources[t.source]||a.appSources.unknown;return r.a.createElement("div",null,r.a.createElement(C["d"],{tip:n,position:"top"},r.a.createElement("span",null,i)))}}]};a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var n=z.rt("No apps were found matching <b>{query}</b>",{query:a});return r.a.createElement("div",{className:"align_center"},n)}}]};a.headerData=[{id:"name",value:z.t("Name"),sortable:true},{id:"installed_by",value:i?z.t("Authorized By"):z.t("Installed By"),sortable:true},{id:"installed_on",value:i?z.t("Authorized On"):z.t("Installed On"),sortable:true},{id:"source",value:z.t("Source"),sortable:true}];return a}f()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.teamApps,n=t.sortBy;var r=this.state.offset;a.length?this.updateRowListItemsData(r):Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(n))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,n=a.teamApps,r=a.teamAppsApiTotal;if(r&&n.length>=r)return;var i={offset:t};this.setState(function(){return i},function(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))})}},{key:"onAppNameClick",value:function e(t){return Object(O["b"])(Object(O["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.teamAppsLoading;a&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(a));this.resetTeamAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var n=this.props,r=n.searchQuery,i=n.teamApps,o=n.teamAppsLoading;t.teamApps===i&&t.searchQuery===r&&t.teamAppsLoading===o||this.updateRowListItemsData(a)}},{key:"headerItemOnClick",value:function e(t){var a=this;var n=this.state,r=n.sortBy,i=n.sortDir;var e=this.props.headerItemOnClick;var o=r;var s=i;if(t.id===r){s=i&&i!==Y?Y:J;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(s))}else{o=t.id;s=t.defaultSortType?t.defaultSortType===Y?J:Y:J;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(s));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(o))}var l={sortBy:o,sortDir:s};this.setState(function(){return l},function(){a.resetTeamAppsState();e&&e(t)})}},{key:"resetTeamAppsState",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiTotal(null));Object(O["b"])(Object(O["a"])().teams.resetTeamAppsApiCursor());Object(O["b"])(Object(O["a"])().teams.resetTeamApps());Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var n=a.getBoundingClientRect();var r=0;var i=t-(n&&n.top);var o=64;var s=Math.max(o,i-r);var l={height:s+"px"};this.setState(l)}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var n=[];t.forEach(function(e){n.push(a.makeHeader(e))});return n}},{key:"determineSortState",value:function e(t,a){var n=this.state,r=n.sortBy,i=n.sortDir;var o=a.defaultSortType||Y;var s=$[o];if(!r||r!==t)return s;var l=void 0;l=i?i===Y?Z:X:$[o];return l}},{key:"resetAPICursorMark",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,n=t.sortDir;var r=this.props,i=r.pageSize,o=r.searchQuery,s=r.teamAppsApiCursor,l=r.teamId;var c={limit:i};a&&(c.sort=a);n&&(c.sort_dir=n);null!==o&&void 0!==o&&Object(y["trim"])(o).length&&(c.query=o);s&&(c.cursor=s);c.team=l;Object(O["b"])(Object(O["a"])().teams.getAppsByWorkspace(l,c))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var n=this.props,r=n.teamApps,i=n.teamAppsLoading;var o=[];var s=t||0;var l=0;var c={rowListItems:o};function u(){l+=1;return"row_"+s+"_item"+l}function d(e,t){var a={id:"row_"+s,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var n={value:t.value(e),id:u()};t.className&&(n.className=t.className);a.items.push(n)});s+=1;return a}if(r&&r.length)r.forEach(function(e){o.push(d(e,a.rowTemplate))});else if(!i){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var f=[{searchQuery:p}];f.forEach(function(e){o.push(d(e,a.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var a=this.state,n=a.sortBy,i=a.sortDir,o=a.height,s=a.rowListItems,l=a.offset;var c=this.props,u=c.rowHeaderItemClassName,d=c.rowClassName,p=c.searchQuery,f=c.teamAppsLoading;var m=this.makeHeaders(this.headerData);return r.a.createElement("div",null,r.a.createElement(W["a"],{rows:s,headers:m,rowHeaderItemClassName:u,rowClassName:d,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:n,sortDir:i,searchQuery:p,height:o,isLoading:f,newQuery:!l,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(n["PureComponent"]);ee.displayName="TeamAppsList";ee.defaultProps=K;var te=Object(V["a"])("feature_wta_org_level_apps")(ee);var ae=new k["b"]("enterprise_dashboard");var ne={teamId:_.a.string.isRequired,teamApps:_.a.array,teamAppsApiCursor:_.a.string,teamAppsApiTotal:_.a.number,teamAppsCount:_.a.number,teamAppsLoading:_.a.bool,teamAppsSearchQuery:_.a.string,teamAppsTeamUrl:_.a.string,teamAppsSortBy:_.a.string,teamAppsSortDir:_.a.string};var re={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var ie=333;var oe=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSearchInputChange=Object(y["debounce"])(a.onSearchInputChange,ie,{trailing:true}).bind(a);a.generateTeamsForAppCSV=a.generateTeamsForAppCSV.bind(a);return a}f()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var a=Object(y["get"])(t,"target.value","");Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(a))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!isNaN(t))return ae.t("{count} Apps",{count:this.props.teamAppsCount});return ae.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(O["b"])(Object(O["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var a=t&&t+"apps/manage"||null;var n=ae.t("Manage Apps");if(a)return r.a.createElement("a",{href:a,target:"_blank"},r.a.createElement(E["d"],{type:"outline"},n,r.a.createElement(j["a"],{type:"external_link",className:"p-export_csv_button_caret"})));var i=ae.t("You must join this workspace to manage its apps.");return r.a.createElement(C["d"],{tip:i,position:"top"},r.a.createElement("div",null,r.a.createElement(E["d"],{type:"outline",disabled:true},n,r.a.createElement(j["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"renderAppFilterInput",value:function e(){var t=ae.t("Filter by name...");return r.a.createElement(w["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(y["isNull"])(this.props.teamAppsSearchQuery)){var a=ae.t("Apps");return r.a.createElement(H,{pageHeader:a})}var n=this.getTeamAppListProps();return r.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},r.a.createElement(F,{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),r.a.createElement("div",{className:"p-app_management_team_apps_list"},r.a.createElement(te,n)))}}]);return t}(n["PureComponent"]);oe.displayName="TeamApps";oe.defaultProps=re;var se=oe;var le=se;Object(c["a"])("interop.teamApps",{render:function e(t,a,n){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(le,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(3);var d=a.n(u);var p=a(5);var f=a.n(p);var m=a(6);var h=a.n(m);var v=a(7);var g=a.n(v);var b=a(8);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(2);var w=a(15);var E=a.n(w);var C=a(140);var j=a(10);var S=a(1174);function I(e){var t=e.workspaceName,a=e.workspaceDomain,n=e.workspaceDesc,r=e.accessSetting;var i={name:t,domain:a};if(n||r)return d()({},i,{description:n,access_setting:r});return i}var T=a(32);var N=a.n(T);var A=a(9);var R=a.n(A);var M=a(88);var x=a(190);var P=a(799);var D=a(266);var F=new j["b"]("enterprise_dashboard");var L=/^[a-z0-9-]+$/i;var B=/[a-z]+/i;var U=/^[a-z0-9]/i;var q=/[a-z0-9]$/i;var G=void 0;function H(){G={empty_domain:F.t("Please fill in a workspace domain."),invalid_domain_characters:F.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:F.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:F.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(D["b"])(re),empty_name:F.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(D["b"])(ie),empty_description:F.t("Please fill in a workspace description."),maximum_description_length_reached:Object(D["b"])(oe)};return null}function W(e){return q.test(e)}function V(e){return e.length<=re}function z(e){return e.length<=ie}function Q(e){return e.length<=oe}function K(e){return U.test(e)}function Y(e){return e.trim().length>0}function J(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e))return G.empty_name;if(!z(e))return G.maximum_workspace_name_length_reached;return""}function Z(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e)||"organization"===e)return G.empty_domain;if(!V(e))return G.maximum_domain_length_reached;if(!L.test(e))return G.invalid_domain_characters;if(!B.test(e))return G.domain_minimum_one_letter;if(!K(e)||!W(e))return G.domain_no_start_end_dash;return""}function X(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e))return G.empty_description;if(!Q(e))return G.maximum_description_length_reached;return""}function $(e){H();var t=e.workspaceName,a=e.workspaceDomain,n=e.workspaceDesc;var r=J(t);var i=Z(a);var o=X(n);if(!r&&!i&&!o)return{};return{workspaceName:r,workspaceDomain:i,workspaceDesc:o}}var ee={};Object.defineProperty(ee,"isValidWorkspaceName",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty(ee,"isValidWorkspaceDomain",{get:function e(){return Z},set:function e(t){Z=t}});Object.defineProperty(ee,"isValidWorkspaceDescription",{get:function e(){return X},set:function e(t){X=t}});var te=new j["b"]("enterprise_dashboard");var ae={workspaceName:k.a.string,workspaceDomain:k.a.string,workspaceDesc:k.a.string,errors:k.a.object,onSubmit:k.a.func.isRequired};var ne={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null,onSubmit:O["noop"]};var re=21;var ie=255;var oe=255;var se=function e(t){Object(C["b"])(Object(C["a"])().teams.setCreateTeamErrors(t))};var le=function e(t,a){Object(C["b"])(Object(C["a"])().teams.setCreateTeamError(t,a))};var ce=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={values:{workspaceDomain:a.props.workspaceDomain,workspaceName:a.props.workspaceName,workspaceDesc:a.props.workspaceDesc},errors:a.props.errors};return a}h()(t,[{key:"onInputChanged",value:function e(t,a){this.setFormValue(t,a);le(t,"")}},{key:"setFormValue",value:function e(t,a){this.setState(function(e){return{values:d()({},e.values,R()({},t,a))}})}},{key:"bindArgs",value:function e(t){for(var a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return t.bind.apply(t,[this].concat(n))}},{key:"submit",value:function e(t){var a=$(this.state.values);if(!Object(O["isEmpty"])(a)){se(a);return}this.props.onSubmit(this.state.values,t)}},{key:"renderTextInput",value:function e(t){var a=t.suffix,n=t.name,i=N()(t,["suffix","name"]);return r.a.createElement(x["a"],d()({},i,{name:n,suffix:a,onChange:this.bindArgs(this.onInputChanged,n)}))}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var a=Object(O["get"])(this.props.errors,"workspaceName");var n="workspace_input_name";var r={name:"workspaceName",inputLabel:te.t("Workspace Name"),maxCharacterLimit:ie,value:t,id:n,labelId:n+"_label"};a&&(r=d()({},r,{errorText:a}));return this.renderTextElement(r)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var a=Object(O["get"])(this.props.errors,"workspaceDomain");var n="workspace_input_domain";var r={name:"workspaceDomain",inputLabel:te.t("Workspace Domain"),hintText:te.t("Letters, numbers, and hyphens only."),maxCharacterLimit:re,suffix:te.t(".slack.com"),placeholder:te.t("workspace-url"),value:t,id:n,labelId:n+"_label"};a&&(r=d()({},r,{errorText:a}));return this.renderTextElement(r)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var a=Object(O["get"])(this.props.errors,"workspaceDesc");var n="workspace_input_description";var r={name:"workspaceDesc",inputLabel:te.t("Workspace Description"),hintText:te.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:oe,value:t,id:n,labelId:n+"_label"};a&&(r=d()({},r,{errorText:a}));return this.renderTextareaElement(r)}},{key:"renderTextareaElement",value:function e(t){var a=t.labelId,n=t.inputLabel,i=t.sublabelText,o=t.id,s=t.name,l=N()(t,["labelId","inputLabel","sublabelText","id","name"]);return r.a.createElement(M["a"],{id:a,htmlFor:o,className:"p-ent_workspace_create__label",text:n,subtext:i},r.a.createElement(P["a"],d()({},l,{id:o,name:s,onChange:this.bindArgs(this.onInputChanged,s),resize:"none"})))}},{key:"renderTextElement",value:function e(t){var a=t.inputLabel,n=t.labelId,i=t.sublabelText,o=t.id,s=N()(t,["inputLabel","labelId","sublabelText","id"]);return r.a.createElement(M["a"],{id:n,htmlFor:o,className:"p-ent_workspace_create__label",text:a,subtext:i},this.renderTextInput(d()({id:o},s)))}},{key:"render",value:function e(){return r.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(n["Component"]);ce.displayName="CreateWorkspaceModalNameForm";ce.defaultProps=ne;var ue=ce;var de=a(338);var pe=a(660);var fe=new j["b"]("enterprise_dashboard");var me={accessSetting:k.a.string,onSubmit:k.a.func.isRequired};var he={accessSetting:null,onSubmit:O["noop"]};var ve=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={accessSetting:a.props.accessSetting};Object(O["bindAll"])(a,["renderAccessSettingRadio","handleAccessSettingChange"]);return a}h()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"updateOnAccessSettingChange",value:function e(t){var a=t.accessSetting!==this.props.accessSetting;a&&this.setAccessSetting(t.accessSetting)}},{key:"submit",value:function e(t){var a=this.getAccessSetting();this.props.onSubmit(a,t)}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"renderAccessSettingRadio",value:function e(t){var a=this.state.accessSetting;var n=t.accessType,i=t.accessName,o=t.descriptionText;return r.a.createElement("div",{key:n},r.a.createElement(M["a"],{id:n,htmlFor:"workspace_access_type_"+n,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:i,subtext:o},r.a.createElement(de["a"],{id:"workspace_access_type_"+n,value:n,onChange:this.handleAccessSettingChange,checked:n===a})))}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:fe.t("Open"),descriptionText:fe.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:fe.t("By Request"),descriptionText:fe.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:fe.t("Invite Only"),descriptionText:fe.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:fe.t("Hidden"),descriptionText:fe.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var a=t.map(this.renderAccessSettingRadio);return r.a.createElement(pe["a"],{field:"workspaceAccessSetting",noTouch:true},a)}},{key:"render",value:function e(){return r.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(n["Component"]);ve.displayName="CreateWorkspaceModalAccessForm";ve.defaultProps=he;var ge=ve;var be=a(2101);var _e=new j["b"]("enterprise_dashboard");var ye={workspaceName:k.a.string,workspaceDomain:k.a.string,accessSetting:k.a.string,workspaceDesc:k.a.string,apiCallCount:k.a.number,errors:k.a.object,ui:k.a.object,open:k.a.bool,onSubmit:k.a.func.isRequired,onCancel:k.a.func.isRequired};var ke={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",apiCallCount:null,errors:{},ui:{},open:true,onSubmit:O["noop"],onCancel:O["noop"]};var Oe=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={workspaceName:a.props.workspaceName,workspaceDomain:a.props.workspaceDomain,workspaceDesc:a.props.workspaceDesc,accessSetting:a.props.accessSetting,isPending:false};Object(O["bindAll"])(a,["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return a}h()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnApiCountChange(t);this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setWorkspaceInfo",value:function e(t,a){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},a)}},{key:"setAccessSetting",value:function e(t,a){this.setState(function(){return{accessSetting:t}},a)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"updateOnApiCountChange",value:function e(t){var a=t.apiCallCount!==this.props.apiCallCount;if(a){var n=t.apiCallCount>0;this.setPendingState(n)}}},{key:"updateOnModalClose",value:function e(t){var a=this.props.open&&!t.open;a&&this.reset()}},{key:"reset",value:function e(){var t=ke.workspaceName,a=ke.workspaceDomain,n=ke.workspaceDesc,r=ke.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:a,workspaceDesc:n},O["noop"]);this.setAccessSetting(r);this.setPendingState(ke.isPending)}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"submit",value:function e(t){this.props.onSubmit(t)}},{key:"buildModalSteps",value:function e(){var t=this;var a=function e(){var a={header:_e.t("Set up your workspace"),subtitle:_e.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(a)};var n=function e(){var a={header:_e.t("Set access for this workspace"),subtitle:_e.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(a)};var r=function e(){var a=function e(){var a=t.state,n=a.workspaceName,r=a.workspaceDomain;Object(C["b"])(Object(C["a"])().teams.getWorkspaceInfoAvailability({workspaceName:n,workspaceDomain:r}))};t.chooseNameForm.submit(a)};var i=function e(){var a=t.getWorkspaceInfo();t.setPendingState(true);t.submit(I(a));t.createWorkspaceModalRef.goToNextStep()};var o=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var s=[{children:a,goButtonText:_e.t("Next"),title:_e.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:r,onCancel:this.props.onCancel},{children:n,goButtonText:_e.t("Create Workspace"),title:_e.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(C["b"])(Object(C["a"])().ui.updateModalStepIndex(0))},onGo:o,cancelText:_e.t("Cancel"),onCancel:this.props.onCancel}];return s}},{key:"renderSubtitle",value:function e(t){if(t)return r.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"renderChooseNamePane",value:function e(){var t=this;var a=this.state,n=a.workspaceName,i=a.workspaceDomain,o=a.workspaceDesc;var s=this.props.errors;return r.a.createElement(ue,{workspaceName:n,workspaceDomain:i,workspaceDesc:o,errors:s,onSubmit:this.setWorkspaceInfo,ref:function e(a){t.chooseNameForm=a}})}},{key:"renderAccessSettingPane",value:function e(){var t=this;var a=this.state.accessSetting;return r.a.createElement(ge,{accessSetting:a,onSubmit:this.setAccessSetting,ref:function e(a){t.accessSettingForm=a}})}},{key:"renderModalPane",value:function e(t){var a=t.header,n=t.subtitle,i=t.renderInnerPane;var o=E()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":n});return r.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},r.a.createElement("div",{className:"p-ent_workspace_create__pane"},r.a.createElement("div",{className:"p-ent_workspace_create__form"},r.a.createElement("h3",{className:o},a),this.renderSubtitle(n),i())))}},{key:"render",value:function e(){var t=this;var a=_e.t("Set up");var n=_e.t("Set access");var i=[a,n];var o={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return r.a.createElement(S["a"],d()({},o,{ref:function e(a){t.createWorkspaceModalRef=a}}))}}]);return t}(n["Component"]);Oe.displayName="CreateWorkspaceModal";Oe.defaultProps=ke;var we=Oe;var Ee=we;Object(c["a"])("interop.createWorkspaceModal",{render:function e(t,a,n){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(Ee,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(3);var d=a.n(u);var p=a(5);var f=a.n(p);var m=a(6);var h=a.n(m);var v=a(7);var g=a.n(v);var b=a(8);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(15);var w=a.n(O);var E=a(159);var C=a(18);var j=a(2);var S=a(41);var I=a(10);var T=a(819);var N=a(2074);var A=1e3;var R=new I["b"]("image_viewer");var M={className:k.a.string,handleZoomIn:k.a.func,handleZoomOut:k.a.func,handleReset:k.a.func,handleZoomToActualPixels:k.a.func,handleSlider:k.a.func,handlePan:k.a.func,level:k.a.number,displayLevel:k.a.oneOfType([k.a.string,k.a.number]),isVisible:k.a.bool,featureModernImageViewer:k.a.bool.isRequired,onMouseEnter:k.a.func,onMouseLeave:k.a.func};var x={className:null,handleZoomIn:j["noop"],handleZoomOut:j["noop"],handleReset:j["noop"],handleZoomToActualPixels:j["noop"],handleSlider:j["noop"],handlePan:j["noop"],level:.5,displayLevel:.5,isVisible:true,onMouseEnter:j["noop"],onMouseLeave:j["noop"]};var P="p-zoom__slider";var D=function e(t,a){return r.a.createElement(n["Fragment"],null,r.a.createElement("div",null,t),r.a.createElement("div",{className:"sk_light_gray"},a))};D.displayName="makeTooltipContentWithSubtext";var F=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.inputWidth=0;a.onKeyDown=a.onKeyDown.bind(a);a.onKeyUp=a.onKeyUp.bind(a);a.handleSliderChange=a.handleSliderChange.bind(a);a.handleInactivity=a.handleInactivity.bind(a);a.throttledOnActivity=Object(j["throttle"])(a.onActivity.bind(a),200,{leading:true,trailing:true});a.state={isHoveringTooltip:false,isRecentlyActive:false};return a}h()(t,[{key:"componentDidMount",value:function e(){this.inputWidth=this.tooltip.tooltipContent.getBoundingClientRect().width;this.forceUpdate();document.addEventListener("keydown",this.onKeyDown);document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillReceiveProps",value:function e(t){t.level!==this.props.level&&this.throttledOnActivity()}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.activityTimeout);this.throttledOnActivity.cancel();document.removeEventListener("keydown",this.onKeyDown);document.removeEventListener("keyup",this.onKeyUp)}},{key:"onKeyDown",value:function e(t){var a=t.shiftKey?300:50;t.ctrlKey&&(this.isCtrlHeld=true);if(Object(T["a"])()&&!t.target.classList.contains(P))return;"+"===t.key||"="===t.key?t.metaKey||this.props.handleZoomIn():"-"===t.key?t.metaKey||this.props.handleZoomOut():" "!==t.key||t.repeat?"0"!==t.key||0===this.props.level||t.repeat?"ArrowDown"===t.key||"Down"===t.key?this.props.handlePan({x:0,y:-a},true):"ArrowUp"===t.key||"Up"===t.key?this.props.handlePan({x:0,y:a},true):"ArrowRight"===t.key||"Right"===t.key?this.props.handlePan({x:-a,y:0},true):"ArrowLeft"!==t.key&&"Left"!==t.key||this.props.handlePan({x:a,y:0},true):t.metaKey||this.props.handleReset():0===this.props.level?this.props.handleZoomToActualPixels():this.props.handleReset()}},{key:"onKeyUp",value:function e(t){t.ctrlKey||(this.isCtrlHeld=false);" "===t.key&&t.preventDefault()}},{key:"onActivity",value:function e(){clearTimeout(this.activityTimeout);this.activityTimeout=setTimeout(this.handleInactivity,A);this.state.isRecentlyActive||this.setState(function(){return{isRecentlyActive:true}})}},{key:"setIsHoveringTooltip",value:function e(t){this.setState(function(){return{isHoveringTooltip:t,isRecentlyActive:false}})}},{key:"handleInactivity",value:function e(){this.setState(function(){return{isRecentlyActive:false}})}},{key:"handleSliderChange",value:function e(t){this.props.handleSlider(Number(t.target.value),this.isCtrlHeld)}},{key:"calcTooltipOffset",value:function e(){var t=12;var a=.5;return(this.props.level-a)*(this.inputWidth-t)}},{key:"_makeSharedTooltipOptions",value:function e(){var t=this;return{zIndex:"above_fs",onMouseEnter:function e(){return t.setIsHoveringTooltip(true)},onMouseLeave:function e(){return t.setIsHoveringTooltip(false)}}}},{key:"renderSlider",value:function e(){var t=this;return r.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{ref:function e(a){t.tooltip=a},offsetX:this.calcTooltipOffset(),tip:this.props.displayLevel,shouldForceVisible:this.state.isRecentlyActive&&!this.state.isHoveringTooltip}),r.a.createElement("input",{className:P,type:"range",min:0,max:1,value:this.props.level,onChange:this.handleSliderChange,step:.01,onKeyDown:function e(t){return t.preventDefault()},onKeyPress:function e(t){return t.preventDefault()}}))}},{key:"render",value:function e(){var t=this;var a=this.props.level>0;if(!this.props.featureModernImageViewer)return null;return r.a.createElement("div",{className:w()("p-zoom",this.props.className,{"p-zoom--hidden":!this.props.isVisible}),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},r.a.createElement("div",{className:"p-zoom__control_group"},r.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{tip:D(R.t("Zoom out"),R.t("Press -"))}),r.a.createElement(C["b"],{type:"minus",className:"p-zoom__button--zoom_out",onClick:function e(){return t.props.handleZoomOut()}})),this.renderSlider(),r.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{tip:D(R.t("Zoom in"),R.t("Press + or ="))}),r.a.createElement(C["b"],{type:"plus",className:"p-zoom__button--zoom_in",onClick:function e(){return t.props.handleZoomIn()}}))),r.a.createElement(S["d"],d()({},this._makeSharedTooltipOptions(),{tip:D(R.t("Reset"),R.t("Press space"))}),r.a.createElement(C["b"],{type:"collapse-vertical",className:"p-zoom__control_group p-zoom__button--reset",disabled:!a,onClick:this.props.handleReset})))}}]);return t}(n["PureComponent"]);F.displayName="ZoomControl";F.defaultProps=x;var L=Object(E["a"])("feature_modern_image_viewer")(F);var B=a(106);var U=a.n(B);var q=function e(t){var a=t.value,n=t.min,r=t.max;return Math.max(n,Math.min(r,a))};var G=function e(t){var a=t.value,n=t.min,r=t.max;return(a-n)/(r-n)};var H=function e(t){var a=t.value,n=t.min,r=t.max;return a*(r-n)+n};var W=function e(t,a){return{left:Math.min(t.x,a.x),top:Math.min(t.y,a.y),width:Math.abs(t.x-a.x),height:Math.abs(t.y-a.y)}};var V=function e(t){return{x:t.left+t.width/2,y:t.top+t.height/2}};var z=function e(t,a){return d()({},t,{left:t.left-a.left,top:t.top-a.top})};function Q(e){if(U.a.mac)return e.metaKey;return e.ctrlKey}var K=function e(t){var a=t.scale,n=t.translate,r=t.minScale,i=t.size;var o=d()({},n);Math.abs(n.y)>i.height/2*(a-r)&&(o.y=Math.sign(n.y)*(i.height/2)*(a-r));Math.abs(n.x)>i.width/2*(a-r)&&(o.x=Math.sign(n.x)*(i.width/2)*(a-r));return o};var Y=function e(t){var a=t.value,n=t.direction,r=t.steps;var i=1===n;var o=i?r:r.slice().reverse();var s=function e(t,a){return(i?t<a:t>a)&&t!==a};return Object(j["find"])(o,function(e){return s(a,e)})};var J=function e(t){var a=t.point,n=t.containerRect,r=t.targetRect,i=t.prevScale,o=t.newScale,s=t.prevTranslate,l=t.minScale,c=t.maxScale;var u=q({value:o,min:l,max:c});var d=u-i;var p=V(n);var f={x:(a.x-s.x-p.x)/i,y:(a.y-s.y-p.y)/i};var m=K({scale:u,translate:{x:s.x-f.x*d,y:s.y-f.y*d},minScale:l,size:r});return{scale:u,translate:m}};var Z=function e(t){var a=t.rect,n=t.prevScale,r=t.prevTranslate,i=t.minScale,o=t.maxScale,s=t.containerRect,l=t.targetRect;var c=V(s);var u=V(a);var d=Math.min(s.width/a.width,s.height/a.height);var p=q({value:n*d,min:i,max:o});var f=K({scale:p,translate:{x:r.x*(p/n)-(u.x-c.x)*(p/n),y:r.y*(p/n)-(u.y-c.y)*(p/n)},minScale:i,size:l});return{scale:p,translate:f}};var X=function e(t){var a=t.delta,n=t.targetRect,r=t.prevScale,i=t.prevTranslate,o=t.minScale;var s=K({scale:r,translate:{x:i.x+a.x,y:i.y+a.y},minScale:o,size:n});return{translate:s}};var $={children:k.a.node.isRequired,handleZoomIn:k.a.func,handleZoomOut:k.a.func,handlePan:k.a.func,handleZoomDelta:k.a.func,handleBoxZoom:k.a.func,handleReset:k.a.func,canZoomIn:k.a.bool,canZoomOut:k.a.bool,containerRect:k.a.object};var ee={children:null,handleZoomIn:j["noop"],handleZoomOut:j["noop"],handlePan:j["noop"],handleZoomDelta:j["noop"],handleBoxZoom:j["noop"],handleReset:j["noop"],canZoomIn:false,canZoomOut:false,containerRect:null};var te=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseDown=a.onMouseDown.bind(a);a.onMouseUp=a.onMouseUp.bind(a);a.onMouseMove=a.onMouseMove.bind(a);a.onMouseWheel=a.onMouseWheel.bind(a);a.onDocumentCaptureClick=a.onDocumentCaptureClick.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.onKeyUp=a.onKeyUp.bind(a);a.state={cursor:"default",dragBoxCSSPosition:null};return a}h()(t,[{key:"componentDidMount",value:function e(){this.targetNode.addEventListener("click",function(e){return e.stopPropagation()});this.targetNode.addEventListener("mousedown",this.onMouseDown);document.addEventListener("wheel",this.onMouseWheel);document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("mousemove",this.onMouseMove);document.addEventListener("keydown",this.onKeyDown);document.addEventListener("keyup",this.onKeyUp);document.addEventListener("click",this.onDocumentCaptureClick,true)}},{key:"componentWillReceiveProps",value:function e(t){var a=this.determineCursor(t);this.setCursor(a)}},{key:"componentWillUnmount",value:function e(){this.targetNode.removeEventListener("click",function(e){return e.stopPropagation()});this.targetNode.removeEventListener("mousedown",this.onMouseDown);document.removeEventListener("wheel",this.onMouseWheel);document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("mousemove",this.onMouseMove);document.removeEventListener("keydown",this.onKeyDown);document.removeEventListener("keyup",this.onKeyUp);document.removeEventListener("click",this.onDocumentCaptureClick,true)}},{key:"onMouseDown",value:function e(t){t.stopPropagation();this.isMouseDown=0===t.button;this.dragOrigin={x:t.x,y:t.y};this.numMouseMoves=0;this.wasPlatformCtrlDownAtStart=Q(t);this.wasAltKeyDownAtStart=t.altKey;this.setCursor()}},{key:"onMouseMove",value:function e(t){this.isAltKeyDown=t.altKey;this.isPlatformCtrlDown=Q(t);this.setCursor();if(!this.isMouseDown)return;this.numMouseMoves+=1;if(this.wasPlatformCtrlDownAtStart){var a=W(this.dragOrigin,{x:t.clientX,y:t.clientY});var n=z(a,this.props.containerRect);this.setState(function(){return{dragBoxCSSPosition:n}})}else{if(!this.props.canZoomOut)return;this.props.handlePan({x:t.movementX,y:t.movementY})}t.stopPropagation();t.preventDefault()}},{key:"onMouseUp",value:function e(t){var a=this.isMouseDown;var n=this.wasAltKeyDownAtStart;var r=this.wasPlatformCtrlDownAtStart;var i=this.numMouseMoves>5;var o=!i||n;var s=!n&&i&&r;this.shouldCancelClickEvent=a;this.isMouseDown=false;this.isRightClick=false;if(!a)return;t.stopPropagation();t.preventDefault();if(s){var l=W(this.dragOrigin,{x:t.clientX,y:t.clientY});this.props.handleBoxZoom(l);this.setState(function(){return{dragBoxCSSPosition:null}})}else if(o){var c={x:t.x,y:t.y};n?this.props.handleZoomOut(c):this.props.canZoomIn?this.props.handleZoomIn(c):this.props.handleReset()}this.setCursor()}},{key:"onDocumentCaptureClick",value:function e(t){this.shouldCancelClickEvent&&t.stopPropagation()}},{key:"onMouseWheel",value:function e(t){t.preventDefault();t.stopPropagation();var a={x:t.clientX,y:t.clientY};if(0===t.deltaMode){var n=.01;var r=.6;t.ctrlKey?this.props.handleZoomDelta(a,-t.deltaY*n):this.props.handlePan({x:-t.deltaX*r,y:-t.deltaY*r})}else{var i=.01;this.props.handleZoomDelta(a,-t.deltaY*i)}}},{key:"onKeyDown",value:function e(t){t.altKey&&(this.isAltKeyDown=true);Q(t)&&(this.isPlatformCtrlDown=true);this.setCursor()}},{key:"onKeyUp",value:function e(t){t.altKey||(this.isAltKeyDown=false);Q(t)||(this.isPlatformCtrlDown=false);this.setCursor()}},{key:"setCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.determineCursor();this.setState(function(){return{cursor:t}})}},{key:"determineCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.isPlatformCtrlDown)return"crosshair";if(t.canZoomOut&&this.isMouseDown&&this.numMouseMoves>5)return U.a.webkit?"-webkit-grabbing":"grabbing";if(t.canZoomOut&&this.isAltKeyDown||!t.canZoomIn)return"zoom-out";if(t.canZoomIn)return"zoom-in";return U.a.webkit?"-webkit-grab":"grab"}},{key:"render",value:function e(){var t=this;var a=r.a.Children.only(this.props.children);var i=r.a.cloneElement(a,{ref:function e(a){t.targetNode=a},style:d()({},a.props.style,{cursor:this.state.cursor})});return r.a.createElement(n["Fragment"],null,i,this.state.dragBoxCSSPosition&&r.a.createElement("div",{className:"p-zoom__box",style:d()({},this.state.dragBoxCSSPosition)}))}}]);return t}(n["PureComponent"]);te.displayName="ZoomMouseInteraction";var ae=te;te.defaultProps=ee;var ne=a(2206);var re=1800;var ie=new I["b"]("image_viewer");var oe=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.08;if(t<a+n&&t>a-n)return a;return t};var se=function e(t){var a=t.width,n=t.height;return{width:a,height:n}};var le=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;var r=t.width/t.height;return Math.min(r*(a.height-n),a.width-n)/t.width};var ce={image:k.a.any,onDidZoomLevelChange:k.a.func,featureModernImageViewer:k.a.bool.isRequired};var ue={image:null,onDidZoomLevelChange:j["noop"]};var de=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={scale:0,translate:{x:0,y:0},shouldAnimate:true,isUserRecentlyActive:false};a.scaleSteps=[0,.5,1,1.5,2];a.minScale=a.scaleSteps[0];a.maxScale=a.scaleSteps[a.scaleSteps.length-1];a.throttledOnUserActivity=Object(j["throttle"])(a.onUserActivity.bind(a),200,{leading:true,trailing:true});a.handleSlider=a.handleSlider.bind(a);a.handleZoomIn=a.handleZoomIn.bind(a);a.handleZoomOut=a.handleZoomOut.bind(a);a.handleZoomDelta=a.handleZoomDelta.bind(a);a.handleZoomToActualPixels=a.handleZoomToActualPixels.bind(a);a.handleBoxZoom=a.handleBoxZoom.bind(a);a.handleReset=a.handleReset.bind(a);a.handlePan=a.handlePan.bind(a);a.debouncedViewportResize=Object(j["debounce"])(a.updateViewport.bind(a),200);a.handleUserInactivity=a.handleUserInactivity.bind(a);return a}h()(t,[{key:"componentDidMount",value:function e(){this.updateViewport();window.addEventListener("resize",this.debouncedViewportResize)}},{key:"componentDidUpdate",value:function e(t,a){t.image.url!==this.props.image.url&&this.updateViewport();if(a.scale!==this.state.scale){this.props.onDidZoomLevelChange(this.normalizeScale());this.throttledOnUserActivity()}}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.userActivityTimeout);this.throttledOnUserActivity.cancel();this.debouncedViewportResize.cancel();window.removeEventListener("resize",this.debouncedViewportResize)}},{key:"onUserActivity",value:function e(){clearTimeout(this.userActivityTimeout);this.userActivityTimeout=setTimeout(this.handleUserInactivity,re);this.state.isUserRecentlyActive||this.setState(function(){return{isUserRecentlyActive:true}})}},{key:"handleUserInactivity",value:function e(){if(this.mouseIsOverControl)return;this.setState(function(){return{isUserRecentlyActive:false}})}},{key:"updateViewport",value:function e(){var t=this;if(!this.containerElement)return;this.setState(function(e){var a=t.minScale;var n=t.containerElement.getBoundingClientRect();t.minScale=Math.min(1,le(se(t.props.image),n));if(e.scale===a)return{shouldAnimate:0!==a,scale:t.minScale,containerRect:n};return{containerRect:n}})}},{key:"handleZoomIn",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(this.state.containerRect);this.setState(function(e){if(e.scale===t.maxScale)return e;var n=J(d()({},t._buildScaleOptions(e),{newScale:Y({direction:1,value:e.scale,steps:t.scaleSteps}),point:a}));return d()({},n,{shouldAnimate:true})})}},{key:"handleZoomOut",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(this.state.containerRect);this.setState(function(e){if(e.scale===t.minScale)return e;var n=J(d()({},t._buildScaleOptions(e),{newScale:Y({direction:-1,value:e.scale,steps:t.scaleSteps}),point:a}));return d()({},n,{shouldAnimate:true})})}},{key:"handleZoomDelta",value:function e(t,a){var n=this;this.setState(function(e){if(e.scale===n.minScale&&a<0||e.scale===n.maxScale&&a>0)return e;var r=J(d()({},n._buildScaleOptions(e),{newScale:e.scale+a,point:t}));return d()({},r,{shouldAnimate:a>2})})}},{key:"handleReset",value:function e(){var t=this;this.setState(function(){return{shouldAnimate:true,scale:t.minScale,translate:{x:0,y:0}}})}},{key:"handleZoomToActualPixels",value:function e(){this.setState(function(){return{shouldAnimate:true,scale:1}})}},{key:"handlePan",value:function e(t){var a=this;var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState(function(e){return d()({shouldAnimate:n},X({prevScale:e.scale,prevTranslate:e.translate,delta:t,minScale:a.minScale,targetRect:se(a.props.image)}))})}},{key:"handleBoxZoom",value:function e(t){var a=this;this.setState(function(e){return d()({shouldAnimate:true},Z({rect:t,prevScale:e.scale,prevTranslate:e.translate,maxScale:a.maxScale,minScale:a.minScale,targetRect:se(a.props.image),containerRect:e.containerRect}))})}},{key:"handleSlider",value:function e(t,a){var n=this;this.setState(function(e){var r=H({value:t,min:n.minScale,max:n.maxScale});a||(r=oe(r,1,.02));var i=J(d()({},n._buildScaleOptions(e),{newScale:r}));if(i.scale===e.scale)return{};return d()({},i,{shouldAnimate:true})})}},{key:"normalizeScale",value:function e(){return G({value:this.state.scale,min:this.minScale,max:this.maxScale})}},{key:"_buildScaleOptions",value:function e(t){return{point:V(t.containerRect),prevTranslate:t.translate,prevScale:t.scale,maxScale:this.maxScale,minScale:this.minScale,targetRect:se(this.props.image),containerRect:t.containerRect}}},{key:"render",value:function e(){var t=this;var a=se(this.props.image);if(!this.props.featureModernImageViewer)return null;return r.a.createElement("div",{className:"p-image_viewer",ref:function e(a){t.containerElement=a}},r.a.createElement(ae,{handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleZoomDelta:this.handleZoomDelta,handlePan:this.handlePan,handleBoxZoom:this.handleBoxZoom,handleReset:this.handleReset,canZoomIn:this.state.scale!==this.maxScale,canZoomOut:this.state.scale!==this.minScale,containerRect:this.state.containerRect},r.a.createElement("img",{className:"p-image_viewer__image",src:this.props.image.url,width:a.width,height:a.height,onMouseMove:this.throttledOnUserActivity,onDragStart:function e(a){(Q(a)||t.state.scale!==t.minScale)&&a.preventDefault()},alt:"",style:{transition:this.state.shouldAnimate?"200ms transform ease":"",transform:"translate3d("+this.state.translate.x+"px, "+this.state.translate.y+"px, 0) scale("+this.state.scale+")"}})),r.a.createElement("div",{className:"p-image_viewer__zoom_positioner"},r.a.createElement(L,{className:"p-image_viewer__zoom_control",isVisible:this.state.isUserRecentlyActive,handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleSlider:this.handleSlider,handleReset:this.handleReset,handleZoomToActualPixels:this.handleZoomToActualPixels,handlePan:this.handlePan,level:this.normalizeScale(),onMouseEnter:function e(){t.mouseIsOverControl=true},onMouseLeave:function e(){t.mouseIsOverControl=false},displayLevel:ie.t("{imageScale}%",{imageScale:Math.round(100*this.state.scale)})})))}}]);return t}(n["PureComponent"]);de.displayName="ImageViewerWithZoom";de.defaultProps=ue;var pe=Object(E["a"])("feature_modern_image_viewer")(de);var fe=pe;var me=function e(t,a,n){var i=n.image,o=n.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var u=Object(c["d"])(t);Object(l["a"])(r.a.createElement(s["Provider"],{store:u},r.a.createElement(fe,{image:i,onDidZoomLevelChange:o})),a)};var he=function e(t){o.a.unmountComponentAtNode(t)};var ve=a(51);Object(ve["a"])("interop.mountImageViewer",me);Object(ve["a"])("interop.unmountImageViewer",he)},function(e,t,a){"use strict";a.r(t);var n={};a.r(n);a.d(n,"supportsCallWindowStatus",function(){return u});a.d(n,"setCallWindowBusy",function(){return d});a.d(n,"isCallWindowBusy",function(){return p});a.d(n,"setCallWindowToken",function(){return f});a.d(n,"clearCallWindowToken",function(){return m});a.d(n,"getCallWindowToken",function(){return h});a.d(n,"setCallWindowTeamId",function(){return v});a.d(n,"clearCallWindowTeamId",function(){return g});a.d(n,"getCallWindowTeamId",function(){return b});a.d(n,"setCallWindowTeamName",function(){return _});a.d(n,"clearCallWindowTeamName",function(){return y});a.d(n,"getCallWindowTeamName",function(){return k});a.d(n,"setIncomingCallWindowBusy",function(){return O});a.d(n,"isIncomingCallWindowBusy",function(){return w});a.d(n,"setIncomingCallWindowToken",function(){return E});a.d(n,"clearIncomingCallWindowToken",function(){return C});a.d(n,"getIncomingCallWindowToken",function(){return j});a.d(n,"setIncomingCallWindowTeamId",function(){return S});a.d(n,"clearIncomingCallWindowTeamId",function(){return I});a.d(n,"getIncomingCallWindowTeamId",function(){return T});a.d(n,"setIncomingCallWindowTeamName",function(){return N});a.d(n,"clearIncomingCallWindowTeamName",function(){return A});a.d(n,"getIncomingCallWindowTeamName",function(){return R});var r=a(3);var i=a.n(r);var o=a(2);var s=a(51);var l=a(75);var c=a(57);function u(){return Object(l["hasDeviceStorage"])()}function d(e){Object(l["setItem"])("isCallWindowBusy",e)}var p=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("isCallWindowBusy"));case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function f(e){Object(l["setItem"])("callWindowToken",e)}function m(){Object(l["removeItem"])("callWindowToken")}var h=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("callWindowToken"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function v(e){Object(l["setItem"])("callWindowTeamId",e)}function g(){Object(l["removeItem"])("callWindowTeamId")}var b=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("callWindowTeamId"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function _(e){Object(l["setItem"])("callWindowTeamName",e)}function y(){Object(l["removeItem"])("callWindowTeamName")}var k=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("callWindowTeamName"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function O(e){Object(l["setItem"])("isIncomingCallWindowBusy",e)}var w=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("isIncomingCallWindowBusy"));case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function E(e){Object(l["setItem"])("incomingCallWindowToken",e)}function C(){Object(l["removeItem"])("incomingCallWindowToken")}var j=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("incomingCallWindowToken"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function S(e){Object(l["setItem"])("incomingCallWindowTeamId",e)}function I(){Object(l["removeItem"])("incomingCallWindowTeamId")}var T=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("incomingCallWindowTeamId"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function N(e){Object(l["setItem"])("incomingCallWindowTeamName",e)}function A(){Object(l["removeItem"])("incomingCallWindowTeamName")}var R=function(){var e=Object(c["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["resolve"])(Object(l["getItem"])("incomingCallWindowTeamName"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();var M=a(32);var x=a.n(M);var P=a(1416);var D=a(807);var F=a(17);var L=a(3484);var B=a(651);var U=a(11);var q=a(450);var G=a(44);var H=a(21);var W=a(312);var V=a(69);var z=a(170);var Q=a(225);var K=a(748);var Y=a(55);var J=a(167);var Z=a(67);var X=a.n(Z);var $=a(5);var ee=a.n($);var te=a(6);var ae=a.n(te);var ne=a(164);var re=function(){function e(){ee()(this,e)}ae()(e,[{key:"reportLocale",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getLocaleInformation"])();t&&Object(ne["a"])().track("SYSTEM_LOCALE",t)}},{key:"reportCrash",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getCrashInformation"])();t&&Object(ne["a"])().track("DESKTOP_CRASH",t)}},{key:"reportHang",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getHangInformation"])();t&&Object(ne["a"])().track("DESKTOP_HANG",t)}},{key:"reportDisplays",value:function e(){if(!l["isDesktop"])return;var t=Object(l["getDisplayInformation"])();if(!t||!t.displays||!t.windowFrame)return;var a=t.displays,n=t.windowFrame;var r=n.size,i=n.position;var o=X()(r,2),s=o[0],c=o[1];var u=X()(i,2),d=u[0],p=u[1];var f=[s||0,c||0,d||0,p||0];var m=[];a.forEach(function(e){if(e&&e.size&&e.size.width&&e.size.height){m.push(e.size.width);m.push(e.size.height)}m.push(e.scaleFactor||1)});Object(ne["a"])().track("DISPLAY_INFO",{display_resolutions:m,window_frame:f})}}]);return e}();var ie=a(27);var oe=function(){function e(){ee()(this,e)}ae()(e,[{key:"updateElements",value:function e(t){var a=this;var n=[];Array.isArray(t)&&t.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return n.push(a.updateElement(e))});return n}},{key:"updateElement",value:function e(t,a){var n=a||t.id||t.type+"."+t.classList.toString().replace(/ /g,".");var r=t.getBoundingClientRect();var i={id:n,width:Math.round(r.width+2),height:Math.round(r.height+2),top:Math.round(r.top),left:Math.round(r.left)};var o=Object(ie["isSSBAndAtLeastVersion"])("3.0.0");if(i.width<2&&i.height<2&&o){var s=Object(l["getNoDragRegions"])();var c=s.filter(function(e){return e.id!==i.id});s.length>c.length&&Object(l["updateNoDragRegion"])(c)}else Object(l["updateNoDragRegion"])(i);return i}}]);return e}();var se=a(949);var le=a(459);var ce=a(471);var ue=a(858);var de=a(165);var pe=a(2247);var fe=a(1100);var me=a(13);var he=Object(me["c"])("TS.inline_videos.maybeStopInlineVideoPlayback");var ve=a(763);var ge=a(697);var be=a(242);var _e=a(81);var ye={},ke=ye.setFocusedWorkspace,Oe=ye.focusNextWorkspace,we=ye.focusPreviousWorkspace;var Ee=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com"];var Ce=["files/import/gdrive","files/create/gdrive/auth","files/import/onedrive"];var je=Object(F["b"])();function Se(e){e(Object(B["setScreenReaderEnabled"])(Object(l["isScreenReaderEnabled"])()))}function Ie(e,t){if(!t)return false;if(t.startsWith("chrome://"))return true;if(Object(_e["isGantryUrl"])(t))return true;if(Ee.some(function(e){return t.startsWith(e)}))return true;var a=Object(U["getFromBootData"])(e,"team_url");return Ce.some(function(e){return t.startsWith(""+a+e)})}function Te(e,t,a,n){je.info("DESKTOP","notificationActivated",{channelId:t,messageTs:a,threadTs:n});e(Object(D["a"])({channelId:t,messageTs:a,threadTs:n}))}function Ne(e){var t=Object(V["getPrimaryView"])(e);var a=[];if(t){a=Object(o["take"])(Object(o["values"])(Object(G["getMessagesByChannelId"])(e,t)),50);Object(ie["isMac"])()||Object(ie["isSSBAndAtLeastVersion"])("3.3.0")||(a=a.map(function(e){return e.subtype?e:Object(o["omit"])(e,"subtype")}))}return{user_id:Object(U["getCurrentUserId"])(e),msgs:a}}function Ae(e,t,a){if(!e||!t){je.warn("sendMsgFromUser failed: Bad arguments",{channelId:e,text:t});return false}if(!Object(de["j"])(e,t,a)){je.warn("sendMsgFromUser failed: Legacy adapter method failed");return false}return true}function Re(e){return Object(Q["b"])(e).name}function Me(e){try{var t=JSON.parse(Object(H["getUserPref"])(e,"sidebar_theme_custom_values"));return Object(J["b"])(e)?i()({},t,Object(J["a"])(t)):t}catch(e){return K["a"]}}function xe(){var e=document.activeElement;var t=Object(be["b"])(e);return Object(be["e"])(e,t.start,t.length)}function Pe(e){return Object(U["isFeatureEnabled"])(e,"feature_winssb_beta_channel")}function De(e){switch(e){case"prefs":Object(ve["d"])();break;case"shortcuts":Object(ve["e"])();break;default:je.warn("openDialog failed, unrecognized dialog: "+e);break}}function Fe(){Object(se["a"])({bustCache:true})}function Le(e,t){Object(ve["f"])();Object(de["b"])();he();e(Object(q["setActiveTeam"])(t))}var Be=i()({analytics:new re,nodrag:new oe},fe,{accessibilitySupportChanged:Se,canOpenURLInWindow:Ie,closeCall:ge["a"],focusNextWorkspace:Oe,focusPreviousWorkspace:we,getCurrentUserId:U["getCurrentUserId"],getCurrentUserName:Re,getEnterpriseId:z["getEnterpriseId"],getSelectedInputText:xe,getThemeValues:Me,getTokenFromBootData:U["getTokenFromBootData"],getUserPref:H["getUserPref"],handleContextMenuCallback:P["b"],handleDeepLinkWithArgs:ce["d"],isOnBetaReleaseChannel:Pe,maybeTickleMS:L["a"],notificationActivated:Te,openDialog:De,openFromCmdF:pe["b"],recentMessagesFromCurrentChannel:Ne,reload:le["b"],replyToNotification:Ae,setCurrentMemberPresence:W["setCurrentMemberPresence"],setFocusedWorkspace:ke,ssbChromeClicked:o["noop"],systemTextSettingsChanged:Fe,teamSelectionChanged:Le,track:Y["b"],updateDownloadsView:ue["b"]});var Ue=a(31);var qe=a(33);var Ge=a(217);var He=Object(Ue["b"])("Create the delegate object that the desktop app can access",function(e,t){return We(function(){return e},function(){return t})});He.propTypes=null;function We(e,t,a){if(!Object(Ge["a"])())return;if(!l["isDesktop"]){var n=Object(ne["a"])({state:t()});n.track("DESKTOP_SCRIPTS_MISSING");return}var r=Ve(e,t);Object(o["assign"])(window.desktop,{delegate:r});a&&a(ze(r))}function Ve(e,t){var a=Be.accessibilitySupportChanged,n=Be.canOpenURLInWindow,r=Be.focusNextWorkspace,o=Be.focusPreviousWorkspace,s=Be.getCurrentUserId,l=Be.getCurrentUserName,c=Be.getEnterpriseId,u=Be.getThemeValues,d=Be.getTokenFromBootData,p=Be.getUserPref,f=Be.isOnBetaReleaseChannel,m=Be.maybeTickleMS,h=Be.notificationActivated,v=Be.recentMessagesFromCurrentChannel,g=Be.setCurrentMemberPresence,b=Be.setFocusedWorkspace,_=Be.teamSelectionChanged,y=Be.openFromCmdF,k=x()(Be,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","isOnBetaReleaseChannel","maybeTickleMS","notificationActivated","recentMessagesFromCurrentChannel","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","openFromCmdF"]);var O=function t(a){return function(){return e()(a.apply(void 0,arguments))}};var w=function t(a){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.apply(void 0,[e()].concat(n))}};var E=function e(t){return function(){return Object(qe["b"])().dispatch(t.apply(void 0,arguments))}};var C=function e(a){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return a.apply(void 0,[t()()].concat(n))}};return i()({accessibilitySupportChanged:w(a),canOpenURLInWindow:C(n),focusNextWorkspace:E(r),focusPreviousWorkspace:E(o),getCurrentUserId:C(s),getCurrentUserName:C(l),getEnterpriseId:C(c),getThemeValues:C(u),getTokenFromBootData:C(d),getUserPref:C(p),isOnBetaReleaseChannel:C(f),maybeTickleMS:O(m),notificationActivated:w(h),openFromCmdF:O(y),recentMessagesFromCurrentChannel:C(v),setCurrentMemberPresence:O(g),teamSelectionChanged:w(_),setFocusedWorkspace:E(b),startSearch:O(y)},k)}function ze(e){var t=e.canOpenURLInWindow,a=e.getCurrentUserId,n=e.getSelectedInputText,r=e.getTokenFromBootData,o=e.notificationActivated,s=e.replyToNotification,l=e.openFromCmdF,c=x()(e,["canOpenURLInWindow","getCurrentUserId","getSelectedInputText","getTokenFromBootData","notificationActivated","replyToNotification","openFromCmdF"]);return i()({canUrlBeOpenedInSSBWindow:t,focusTabAndSwitchToChannel:o,getAPIToken:r,getUserId:a,getSelectedInputTxt:n,searchForTxt:l,sendMsgFromUser:s},c)}var Qe="interop.webapp";We(function(){return TS.redux.dispatch},function(){return TS.redux.getState},function(e){Object(s["a"])(Qe,e);Object(o["assign"])(window.TSSSB,i()({},window.TSSSB,e))});Object(s["a"])("interop.desktop",i()({},l,n))},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(3);var d=a.n(u);var p=a(5);var f=a.n(p);var m=a(6);var h=a.n(m);var v=a(7);var g=a.n(v);var b=a(8);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(2);var w=a(10);var E=a(701);var C=a(24);var j=a.n(C);var S=a(9);var I=a.n(S);var T=a(1155);var N=a(1397);var A=a(18);var R=a(92);var M=a(283);var x=a(691);var P=a(178);var D=a(144);var F=a(270);var L=a(473);var B=a(11);var U=a(212);var q=a(77);var G=a(65);var H=a(20);var W=a(41);var V=new w["b"]("migration_table");var z={statusPageURL:k.a.string,migrationInfo:k.a.object.isRequired,isOrgOwner:k.a.bool,disableActions:k.a.bool,onApprove:k.a.func,onDecline:k.a.func,featureMigrationOrgApprovals:k.a.bool.isRequired};var Q={statusPageURL:null,isOrgOwner:false,disableActions:false,onApprove:O["noop"],onDecline:O["noop"]};var K=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderStatusLink",value:function e(){var t=this.props,a=t.statusPageURL,n=t.featureMigrationOrgApprovals;var i=void 0;i=n?r.a.createElement(G["a"],{href:a},V.t("View status")):r.a.createElement("div",{className:"p-migration_table__link"},r.a.createElement(G["a"],{href:a},r.a.createElement("span",null,V.t("View Migration Status"))),r.a.createElement(A["b"],{type:"chevron-right"}));return i}},{key:"renderPendingResponse",value:function e(){var t=this.props,a=t.isOrgOwner,i=t.disableActions,o=t.onApprove,s=t.onDecline,l=t.migrationInfo,c=t.featureMigrationOrgApprovals;if(!c)return null;var u=null;u=a?r.a.createElement("div",{className:"p-migration_table__buttons"},r.a.createElement(H["d"],{type:"outline",size:"small",disabled:i,onClick:function e(){return s(l.id)}},V.t("Decline")),r.a.createElement(H["d"],{type:"primary",size:"small",disabled:i,onClick:function e(){return o(l.id)},className:"margin_left_50"},V.t("Approve"))):r.a.createElement(n["Fragment"],null,V.t("Pending approval")," ",r.a.createElement(W["d"],{tip:V.t("Migrations can only be approved by an Organization Owner"),position:"top"},r.a.createElement(A["b"],{type:"question-circle",inline:true,className:"sk_light_gray"})));return u}},{key:"renderInviteResponse",value:function e(){var t=this.props,a=t.migrationInfo,n=t.featureMigrationOrgApprovals;var i=null;n&&(a.date_declined?i=V.t("Declined"):a.date_approved&&a.approver&&(i=V.rt("Approved <div>by {name}</div>",{name:a.approver.real_name},function(e){var t=e.key,a=e.text;return r.a.createElement("div",{key:t,className:"sk_dark_grey"},a)})));return i}},{key:"renderScheduled",value:function e(){var t=(new Date).getTime()/1e3;var a=t+28800;var n=this.props.migrationInfo;var r=null;r=n.date_approved||n.date_declined?n.date_scheduled>t&&n.date_scheduled<=a?this.renderStatusLink():this.renderInviteResponse():this.renderPendingResponse();return r}},{key:"renderInProgress",value:function e(){var t=void 0;t=this.props.featureMigrationOrgApprovals?r.a.createElement("div",{className:"p-migration_table__in_progress"},r.a.createElement(R["a"],{color:"blue",size:"large"}),r.a.createElement("div",null,V.rt("In progress"),r.a.createElement("br",null),this.renderStatusLink())):this.renderStatusLink();return t}},{key:"render",value:function e(){var t=this.props.migrationInfo;var a=null;switch(t.status){case"scheduled":a=this.renderScheduled();break;case"in_progress":a=this.renderInProgress();break;case"complete":case"invite_rejected":a=this.renderInviteResponse();break;default:break}return a}}]);return t}(n["PureComponent"]);K.displayName="MigrationStatusRowItem";K.defaultProps=Q;var Y=K;var J=Y;var Z=a(54);var X=new w["b"]("migration_table");var $={statusPageURL:k.a.string,migrationInfo:k.a.object.isRequired,isOrgOwner:k.a.bool,disableActions:k.a.bool,onDecline:k.a.func,featureMigrationOrgApprovals:k.a.bool.isRequired};var ee={statusPageURL:null,isOrgOwner:false,disableActions:false,onDecline:O["noop"]};var te=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}h()(t,[{key:"renderMenu",value:function e(t){var a=this;var n=this.props,i=n.migrationInfo,o=n.statusPageURL,s=n.isOrgOwner,l=n.onDecline,c=n.disableActions;return r.a.createElement(Z["f"],d()({},t,{width:"auto",ref:function e(t){a.menuRef=t}}),r.a.createElement(Z["b"],{label:X.t("View status"),href:o,disabled:c}),s?r.a.createElement(Z["b"],{danger:true,label:X.t("Decline"),onSelected:function e(){return l(i.id)},disabled:c}):null)}},{key:"renderMenuTrigger",value:function e(){var t=this.props.disableActions;return r.a.createElement(Z["e"],{renderMenu:this.renderMenu,position:"bottom-right"},r.a.createElement(H["c"],{disabled:t},r.a.createElement(A["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){var t=this.props,a=t.migrationInfo,n=t.featureMigrationOrgApprovals;if(!n)return null;var r=null;"scheduled"!==a.status||!a.date_approved||(r=this.renderMenuTrigger());return r}}]);return t}(n["PureComponent"]);te.displayName="MigrationTableRowMenu";te.defaultProps=ee;var ae=te;var ne=ae;var re=a(103);var ie=new w["b"]("migration_table");var oe="approve";var se="decline";var le={action:k.a.oneOf([oe,se]).isRequired,migrations:k.a.array.isRequired,onSubmit:k.a.func,featureMigrationOrgApprovals:k.a.bool.isRequired};var ce={onSubmit:O["noop"],featureMigrationOrgApprovals:false};var ue=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isPending:false};a.handleSubmit=a.handleSubmit.bind(a);return a}h()(t,[{key:"handleSubmit",value:function e(){var t=this;this.setState(function(){return{isPending:true}});return this.props.onSubmit().finally(function(){return t.setState(function(){return{isPending:false}})})}},{key:"renderContent",value:function e(){var t=this.props,a=t.migrations,n=t.action,r=t.featureMigrationOrgApprovals;if(!r)return null;var i=null;if(a.length>1);else{var o=a[0];i=n===oe?ie.rt("Approve the migration of the workspace <strong>{name}</strong> for <strong>{date} at {time}</strong>?",{name:o.team.name,date:Object(P["a"])(o.migration_info.date_scheduled),time:Object(D["a"])(o.migration_info.date_scheduled)}):ie.rt("If you decline this migration of <strong>{name}</strong>, you\u2019ll need to contact Slack to reschedule it.",{name:o.team.name})}return i}},{key:"render",value:function e(){var t=this.props,a=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;return r.a.createElement(re["a"],{cancelText:ie.t("Cancel"),goButtonText:a===oe?ie.t("Approve"):ie.t("Decline"),goButtonType:a===oe?"primary":"danger",goButtonIsPending:this.state.isPending,goButtonIsDisabled:this.state.isPending,onGo:this.handleSubmit,title:a===oe?ie.t("Approve migration?"):ie.t("Decline migration?")},this.renderContent())}}]);return t}(n["PureComponent"]);ue.displayName="MigrationResponseConfirmDialog";ue.defaultProps=ce;var de=ue;var pe=de;var fe=new w["b"]("migration_table");var me={enterpriseName:k.a.string.isRequired,orgURL:k.a.string,scheduled:k.a.bool,isOrgOwner:k.a.bool,fetchCompletedMigrations:k.a.func.isRequired,fetchScheduledMigrations:k.a.func.isRequired,approveMigrations:k.a.func.isRequired,declineMigrations:k.a.func.isRequired,enqueueToast:k.a.func,openModal:k.a.func,featureMigrationOrgApprovals:k.a.bool.isRequired};var he={enqueueToast:O["noop"],openModal:O["noop"],scheduled:false,isOrgOwner:false,orgURL:null};var ve="approve";var ge="decline";function be(e){return Object(P["a"])(e)+" - "+Object(D["a"])(e)}var _e=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={completedMigrations:[],scheduledMigrations:[],pendingUpdates:[],recentlyUpdated:[],isCompletedLoading:true,isScheduledLoading:true,errorAlert:false};return a}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}},{key:"componentDidUpdate",value:function e(t){var a=this.props.scheduled;if(a!==t.scheduled){if(a)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}return O["noop"]}},{key:"getStatusPageURL",value:function e(t){return this.props.orgURL+"/migrations/"+t+"/status"}},{key:"fetchScheduledMigrations",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n=this.props.featureMigrationOrgApprovals;a||this.setState(function(){return{isScheduledLoading:true}});return this.props.fetchScheduledMigrations().then(function(e){var a=Object(O["sortBy"])(e,[function(e){var t=void 0;t=!n||e.migration_info.date_approved||e.migration_info.date_declined?["in_progress","scheduled","invite_rejected"].indexOf(e.migration_info.status):-Infinity;return t},function(e){return e.migration_info.date_scheduled}]);t.setState(function(){return{scheduledMigrations:a,isScheduledLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isScheduledLoading:false}})})}},{key:"fetchCompletedMigrations",value:function e(){var t=this;this.setState(function(){return{isCompletedLoading:true}});return this.props.fetchCompletedMigrations().then(function(e){var a=Object(O["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);t.setState(function(){return{completedMigrations:a,isCompletedLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isCompletedLoading:false}})})}},{key:"showResponseConfirmDialog",value:function e(t,a){var n=this;this.props.openModal({element:r.a.createElement(pe,{migrations:t,action:a,onSubmit:function e(){return n.respondToInvite(t,a)},featureMigrationOrgApprovals:this.props.featureMigrationOrgApprovals})})}},{key:"respondToInvite",value:function e(t,a){var n,i=this;if(!this.props.featureMigrationOrgApprovals)return null;var o=(n={},I()(n,ve,this.props.approveMigrations),I()(n,ge,this.props.declineMigrations),n)[a];var s=t.map(function(e){return e.migration_info.id});this.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:Object(O["union"])(t,s)}});return o({migrationIds:s}).then(function(){return i.fetchScheduledMigrations(true)}).then(function(){var e=a===ve?fe.t("Migration approved"):fe.t("Migration declined");i.props.enqueueToast({element:r.a.createElement(M["b"],null,e)});i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:Object(O["union"])(t,s)}});setTimeout(function(){i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:O["without"].apply(void 0,[t].concat(j()(s)))}})},N["b"].HIGHLIGHT_DURATION)}).catch(function(){i.props.enqueueToast({element:r.a.createElement(M["b"],null,fe.t("Something\u2019s gone wrong. Mind trying again in a moment?"))})}).finally(function(){return i.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:O["without"].apply(void 0,[t].concat(j()(s)))}})})}},{key:"createHeaders",value:function e(){var t=this.props,a=t.featureMigrationOrgApprovals,n=t.scheduled;var r=n?fe.t("Scheduled for"):fe.t("Completed on");var i=[{id:"workspace",value:fe.t("Workspace"),className:"p-migration_table__workspace",noHover:true},{id:"date",value:r,className:"p-migration_table__date",noHover:true},{id:"status",value:a?fe.t("Status"):"",className:"p-migration_table__status",noHover:true}];a&&n&&i.push({id:"contextMenu",value:"",className:"p-migration_table__context_menu",noHover:true});return i}},{key:"makeTableRows",value:function e(t,a){var n=this;var i=this.props,o=i.isOrgOwner,s=i.featureMigrationOrgApprovals;var l=this.state,c=l.pendingUpdates,u=l.recentlyUpdated;var d={workspace:function e(t){return n.renderWorkspaceRow(t.team.icon.image_34,t.team.name,t.team.domain)},date:function e(t){return n.renderDateRow(t.migration_info)},status:function e(t){return r.a.createElement(J,{statusPageURL:n.getStatusPageURL(t.migration_info.id),isOrgOwner:o,migrationInfo:t.migration_info,featureMigrationOrgApprovals:s,disableActions:c.includes(t.migration_info.id),onApprove:function e(){return n.showResponseConfirmDialog([t],ve)},onDecline:function e(){return n.showResponseConfirmDialog([t],ge)}})},contextMenu:function e(t){return r.a.createElement(ne,{statusPageURL:n.getStatusPageURL(t.migration_info.id),isOrgOwner:o,migrationInfo:t.migration_info,featureMigrationOrgApprovals:s,disableActions:c.includes(t.migration_info.id),onDecline:function e(){return n.showResponseConfirmDialog([t],ge)}})}};return t.map(function(e){return{id:"mig-"+e.migration_info.id,highlight:u.includes(e.migration_info.id),items:a.map(function(t){var a=t.id,n=t.className;return{id:a,className:n,value:d[a]&&d[a](e)}})}})}},{key:"displayErrorAlert",value:function e(){return r.a.createElement("div",{className:"p-migration_table__empty_state","data-qa-migration-table-error-alert":true},r.a.createElement("span",{className:"p-migration_table__empty_state_icon"},r.a.createElement(A["b"],{type:"warning-filled"})),r.a.createElement("div",{className:"p-migration_table__empty_state_title"},fe.rt("Unable to load past migrations")),r.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},fe.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,a=e.text;return r.a.createElement("a",{key:t,href:"https://slack.com/help/contact"},a)})))}},{key:"renderMigrationCount",value:function e(t){var a=fe.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return a}},{key:"renderTable",value:function e(t){var a=this.createHeaders();return r.a.createElement("div",{className:"c-migration_table_indent_half"},r.a.createElement(N["b"],{headers:a,rows:this.makeTableRows(t,a),height:"700px","data-qa-migration-table-rows":true}))}},{key:"renderWorkspaceRow",value:function e(t,a,i){return r.a.createElement(n["Fragment"],null,r.a.createElement("img",{className:"p-migration_table__workspace_image_container",src:t,alt:a}),r.a.createElement("div",{className:"p-migration_table__workspace_text"},r.a.createElement("div",{className:"p-migration_table__workspace_name"},a),r.a.createElement("div",{className:"p-migration_table__workspace_domain"},i+".slack.com")))}},{key:"renderDateRow",value:function e(t){var a=this.props.featureMigrationOrgApprovals;var n=void 0;switch(t.status){case"in_progress":n=a?be(t.date_scheduled):r.a.createElement("div",{className:"p-migration_table__in_progress"},r.a.createElement(R["a"],{color:"blue",size:"large"}),r.a.createElement("b",null,fe.rt("In Progress")));break;case"scheduled":n=be(t.date_scheduled);break;case"complete":n=be(t.date_finished);break;default:break}return n}},{key:"renderLoadingState",value:function e(){return r.a.createElement("div",{className:"p-migration_table__loading"},r.a.createElement(R["a"],{color:"blue",size:"jumbo","data-qa-migration-loading-spinner":true}))}},{key:"renderScheduled",value:function e(){var t=this.state,a=t.isScheduledLoading,n=t.scheduledMigrations;if(!a){var i=0===n.length?this.renderEmptyScheduled():r.a.createElement("div",null,r.a.createElement(T["a"],{title:this.renderMigrationCount(n.length),"data-qa-migration-count-action-bar":true}),this.renderTable(n));return i}return this.renderLoadingState()}},{key:"renderCompleted",value:function e(){var t=this.state,a=t.isCompletedLoading,n=t.completedMigrations;if(!a){var r=0===n.length?this.renderEmptyCompleted():this.renderTable(n);return r}return this.renderLoadingState()}},{key:"renderEmptyScheduled",value:function e(){var t=this.props.enterpriseName;return r.a.createElement("div",{className:"p-migration_table__empty_state","data-qa-migration-empty-scheduled":true},r.a.createElement("div",{className:"p-migration_table__empty_state_title"},fe.rt("No scheduled migrations.")),r.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},fe.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:t})))}},{key:"renderEmptyCompleted",value:function e(){var t=this.props.enterpriseName;return r.a.createElement("div",{className:"p-migration_table__empty_state","data-qa-migration-empty-completed":true},r.a.createElement("div",{className:"p-migration_table__empty_state_title"},fe.rt("No past migrations.")),r.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},fe.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:t})))}},{key:"render",value:function e(){var t=this.props.scheduled;var a=this.state.errorAlert;if(a)return this.displayErrorAlert();return r.a.createElement(n["Fragment"],null,t?this.renderScheduled():this.renderCompleted(),r.a.createElement(x["a"],null))}}]);return t}(n["PureComponent"]);_e.displayName="MigrationTableView";_e.defaultProps=he;var ye=function e(t,a){var n=a.enterpriseDomain;return{orgURL:Object(L["a"])(t,n),featureMigrationOrgApprovals:Object(B["isFeatureEnabled"])(t,"feature_migration_org_approvals")}};var ke={enqueueToast:U["enqueueToast"],openModal:q["openModal"],fetchCompletedMigrations:F["h"],fetchScheduledMigrations:F["l"],approveMigrations:F["a"],declineMigrations:F["g"]};var Oe=_e;var we=Object(s["connect"])(ye,ke)(_e);var Ee=we;var Ce=a(2132);var je=new w["b"]("migration_table");var Se={enterpriseName:k.a.string.isRequired,enterpriseDomain:k.a.string.isRequired,isOrgOwner:k.a.bool,tabActionOnClick:k.a.func,defaultTabId:k.a.string};var Ie={isOrgOwner:false,tabActionOnClick:O["noop"],defaultTabId:""};var Te=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderHeader",value:function e(){var t=je.t("Migrations");return r.a.createElement("div",{className:"c-migration_table_indent","data-qa-migration-header":true},r.a.createElement("h1",null,t))}},{key:"render",value:function e(){var t=this.props,a=t.tabActionOnClick,n=t.defaultTabId;var i=[{title:je.t("Scheduled Migrations"),id:"scheduled",content:r.a.createElement(Ee,d()({},this.props,{scheduled:true})),onClick:a},{title:je.t("Past Migrations"),id:"past",content:r.a.createElement(Ee,this.props),onClick:a}];return r.a.createElement("div",{className:"p-migration_table","data-qa-migration-page":true},this.renderHeader(),r.a.createElement("div",{className:"p-migration_table_migrations"},r.a.createElement(E["a"],{"data-qa-migration-tabs":true,tabs:i,defaultTabId:n})))}}]);return t}(n["PureComponent"]);Te.displayName="MigrationTable";Te.defaultProps=Ie;var Ne=Te;var Ae=Ne;Object(c["a"])("interop.migrationTable",{render:function e(t,a,n){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(Ae,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(2);var s=a.n(o);var l=a(139);var c=a(33);var u=a(262);var d=a(650);var p=a(69);var f=a(11);var m=a(206);var h=a(896);var v=a(3);var g=a.n(v);var b=a(131);function _(e,t){var a=t||Object(b["i"])(e.id)||{};return g()({},e,{fileName:a.name,imageSource:a.thumb_160||a.thumb_80,fileType:a.filetype,prettyType:a.pretty_type,fileSize:a.size})}var y=a(5);var k=a.n(y);var O=a(7);var w=a.n(O);var E=a(6);var C=a.n(E);var j=a(8);var S=a.n(j);var I=a(0);var T=a.n(I);var N=a(15);var A=a.n(N);var R=a(10);var M=a(75);var x=a(167);var P=a(177);var D=a(18);var F=a(715);var L=a(89);var B=a(1151);var U=a(27);var q=a(420);var G=a(2186);var H=new R["b"]("downloads");var W={id:T.a.string.isRequired,downloadPath:T.a.string,downloadState:T.a.string,startTime:T.a.number,progress:T.a.number,isPaused:T.a.bool,fileName:T.a.string,imageSource:T.a.string,fileType:T.a.string,prettyType:T.a.string,fileSize:T.a.number,highlight:T.a.bool};var V={id:"",downloadPath:"",downloadState:"",startTime:0,progress:0,isPaused:false,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false};var z=function(e){S()(t,e);C()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var a=t.downloadState,n=t.progress,r=t.startTime;if("progressing"!==a)return"";if(n>=1)return"";if(-1===n)return"";if(!n)return"";var i=Date.now()-r;var o=i*(1/n);var s=o-i;return H.t("{duration} remaining",{duration:L["a"].duration(s,"milliseconds").humanize()})}}]);function t(e){k()(this,t);var a=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={};a.onRootDivClick=a.onRootDivClick.bind(a);a.onCancel=a.onCancel.bind(a);a.onRetry=a.onRetry.bind(a);a.onRemove=a.onRemove.bind(a);a.onPause=a.onPause.bind(a);a.onResume=a.onResume.bind(a);return a}C()(t,[{key:"onRootDivClick",value:function e(t){var a=this.props,n=a.id,r=a.downloadState;if("completed"===r){t.stopPropagation();t.shiftKey?Object(M["openDownload"])(n):Object(M["showDownload"])(n)}else if("cancelled"===r||"interrupted"===r){t.stopPropagation();Object(M["retryDownload"])(n)}}},{key:"onCancel",value:function e(t){t.stopPropagation();Object(M["cancelDownload"])(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();Object(M["retryDownload"])(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();Object(M["removeDownload"])(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();Object(M["pauseDownload"])(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();Object(M["resumeDownload"])(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,a=t.fileType,n=t.imageSource;var i=function e(){return r.a.createElement(D["a"],{className:"filetype_icon "+a+" s48 download_icon download_filetype"})};if(n)return r.a.createElement(B["a"],{src:n,renderPending:i,width:"32",height:"32",className:"download_icon p-download_item__image",alt:"icon"});return i()}},{key:"renderExtraActions",value:function e(){var t=this.props.isPaused?r.a.createElement("a",{className:"p-download_item__link--resume",onClick:this.onResume,role:"button"},H.t("Resume")):r.a.createElement("a",{className:"p-download_item__link--pause",onClick:this.onPause,role:"button"},H.t("Pause"));return r.a.createElement("span",{className:"p-download_item__extra_actions"},t,r.a.createElement("a",{className:"p-download_item__link--cancel",onClick:this.onCancel,role:"button"},H.t("Cancel")))}},{key:"render",value:function e(){var a=this.props,n=a.downloadPath,i=a.downloadState,o=a.progress,s=a.fileName,l=a.imageSource,c=a.fileType,u=a.prettyType,d=a.fileSize,p=a.highlight;var f=s||n.split(/\/|\\/).reverse()[0];var m="completed"===i?100:100*o;var h="progressing"===i&&o?o*d:void 0;var v=void 0;v=h?H.t("{partialSize} of {size} {prettyType}",{partialSize:Object(q["a"])(h,2),size:Object(q["a"])(d),prettyType:u}):Object(q["a"])(d)+" "+u;var g=t.getEstimatedTimeRemaining(this.props);var b=A()("p-download_item","clearfix",i,{highlight:p});var _=A()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!l,fileType:c});var y=Object(U["isMac"])()?H.t("Show in Finder"):H.t("Open containing folder");var k={width:m+"%"};return r.a.createElement("div",{className:b,onClick:this.onRootDivClick,role:"presentation"},r.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),r.a.createElement(D["a"],{className:_})),r.a.createElement(D["a"],{type:"times_circle",className:"p-download_item__link--remove",onClick:this.onRemove}),r.a.createElement("div",{className:"p-download_item__container"},r.a.createElement("div",{className:"p-download_item__name_row"},r.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},f),this.renderExtraActions()),r.a.createElement("div",{className:"p-download_item__size_row"},r.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},r.a.createElement("span",{className:"p-download_item__partial_size"},v)),r.a.createElement("span",{className:"p-download_item__actions"},r.a.createElement("a",{className:"p-download_item__link--show"},y),r.a.createElement("a",{className:"p-download_item__link--open"},H.t("Click to open")),r.a.createElement("a",{className:"p-download_item__link--retry",onClick:this.onRetry,role:"button"},H.t("Retry"))),r.a.createElement("span",{className:"p-download_item__time_remaining"},g)),r.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},r.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:k}))))}}]);return t}(r.a.Component);z.displayName="DownloadItem";z.defaultProps=V;var Q=z;var K=a(2188);var Y={downloads:T.a.array.isRequired,fileIdsToFetch:T.a.array.isRequired,fetchFileInfo:T.a.func.isRequired,isWindowFocused:T.a.bool,isShowing:T.a.bool,useGlobalNav:T.a.bool};var J={downloads:[],fileIdsToFetch:[],fetchFileInfo:s.a.noop,isWindowFocused:false,isShowing:true,useGlobalNav:false};var Z=new R["b"]("page_client");var X=function(e){S()(t,e);C()(t,null,[{key:"renderEmptyView",value:function e(){var t=void 0;try{t=r.a.createElement("img",{src:cdn_url+"/0180/img/downloads_empty.png",alt:""})}catch(e){t=null}var a=Z.rt("You can download files by clicking the {download_icon} button.",{download_icon:r.a.createElement(D["a"],{type:"cloud_download",className:"p-downloads_list__empty_download_icon"})});return r.a.createElement("div",{className:"p-downloads_list__empty"},t,r.a.createElement("p",{className:"p-downloads_list__empty_hint_text"},a))}},{key:"renderShiftHint",value:function e(){var t=Z.rt("Hold {shift_key} to open the file.",{shift_key:r.a.createElement("span",{className:"c-keyboard_key"},"Shift")});return r.a.createElement("div",{className:"p-downloads_list__shift_hint"},t)}},{key:"renderClearAllButton",value:function e(){return r.a.createElement("button",{type:"button",className:"p-downloads_list__clear_all btn_basic",onClick:M["clearDownloads"]},Z.t("Clear all"))}}]);function t(e){k()(this,t);var a=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={};return a}C()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=function e(a,n){a&&a.preventDefault();t.setState(function(){return{isShiftDown:n}})};this.keyCommands=new P["a"];this.keyCommands.bindAll([{keys:"shift",action:"keydown",handler:function e(t){return a(t,true)}},{keys:"shift",action:"keyup",handler:function e(t){return a(t,false)}}]);this.element.focus()}},{key:"componentWillReceiveProps",value:function e(t){var a=t.isWindowFocused;this.props.isWindowFocused!==a&&this.setState(function(){return{isShiftDown:false}})}},{key:"componentWillUpdate",value:function e(t){var a=t.fileIdsToFetch;if(this.props.fileIdsToFetch===a)return;if(0===a.length)return;if(s.a.isEqual(this.props.fileIdsToFetch,a))return;this.props.fetchFileInfo({ids:a})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"renderDownloadItems",value:function e(){return r.a.createElement("div",{id:"downloads_scroller",className:"flex_content_scroller"},this.props.downloads.map(function(e){return r.a.createElement(Q,g()({key:e.id},e))}))}},{key:"renderHeader",value:function e(){if(this.props.useGlobalNav)return null;var a=this.props.downloads.length>=2?t.renderClearAllButton():null;return r.a.createElement(F["a"],null,r.a.createElement("div",{className:"p-downloads_list__header_items"},r.a.createElement("span",null,Z.t("Downloads")),a))}},{key:"renderContent",value:function e(){var a=this.props.isShowing;if(!a)return null;var n=this.props.downloads.length>0?this.renderDownloadItems():null;var i=this.props.downloads.length>0?t.renderShiftHint():t.renderEmptyView();return r.a.createElement(r.a.Fragment,null,this.renderHeader(),n,i)}},{key:"render",value:function e(){var t=this;var a=A()({"p-downloads_list":true,"p-downloads_list--shift_down":this.state.isShiftDown});return r.a.createElement("div",{className:a,ref:function e(a){t.element=a},tabIndex:"-1"},this.renderContent())}}]);return t}(r.a.Component);X.displayName="DownloadsList";X.defaultProps=J;var $=function e(t){return{useGlobalNav:Object(x["b"])(t)}};var ee=Object(i["connect"])($)(X);var te=function e(t){return t.files};var ae=function e(t,a){return a.startTime-t.startTime};var ne=Object(u["createSelector"])([h["getDownloads"],te],function(e,t){return e.map(function(e){return _(e,t[e.id])}).sort(ae)});var re=Object(u["createSelector"])([h["getDownloadIds"],te],function(e,t){return e.filter(function(e){return!t[e]})});var ie=function e(t){var a=void 0;a=Object(f["isFeatureEnabled"])(t,"feature_remove_flexpane_store")?Object(p["getSecondaryView"])(t):Object(d["getFlexpaneState"])(t).flexName;return{downloads:ne(t),fileIdsToFetch:re(t),isWindowFocused:Object(m["isWindowFocused"])(t),isShowing:"downloads"===a}};var oe={fetchFileInfo:h["fetchFileInfo"]};var se=Object(i["connect"])(ie,oe)(ee);var le=se;var ce=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var o=Object(c["d"])(t);Object(l["a"])(r.a.createElement(i["Provider"],{store:o},r.a.createElement(le,null)),a,n)};var ue=ce;var de=a(51);Object(de["a"])("interop.mountDownloadsView",ue)},function(e,t,a){"use strict";a.r(t);var n=a(2);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(104);var l=a.n(s);var c=a(14);var u=a(139);var d=a(33);var p=a(3);var f=a.n(p);var m=a(5);var h=a.n(m);var v=a(6);var g=a.n(v);var b=a(7);var _=a.n(b);var y=a(8);var k=a.n(y);var O=a(0);var w=a.n(O);var E=a(74);var C=a(31);var j=a(354);var S=a(356);var I=a(355);var T=a(187);var N=a(15);var A=a.n(N);var R=a(408);var M=a(121);var x=a(344);var P=a(18);var D=a(701);var F={};F.SelectorInfo=w.a.shape({selector:w.a.func.isRequired,name:w.a.string.isRequired,file:w.a.string.isRequired,usageCount:w.a.number.isRequired,reducers:w.a.arrayOf(w.a.string)});F.ActionOrThunkInfo=w.a.shape({action:w.a.func,thunk:w.a.func,name:w.a.string.isRequired,description:w.a.string.isRequired,file:w.a.string.isRequired,usageCount:w.a.number.isRequired,sideEffectsCount:w.a.number,props:w.a.arrayOf(w.a.string),reducers:w.a.arrayOf(w.a.string),isThunk:w.a.bool.isRequired,isFetcher:w.a.bool.isRequired});F.ReducerInfo=w.a.shape({reducer:w.a.func.isRequired,name:w.a.string.isRequired,file:w.a.string.isRequired,actions:w.a.arrayOf(w.a.string).isRequired,selectors:w.a.arrayOf(w.a.string).isRequired});F.MiddlewareInfo=w.a.shape({middleware:w.a.func.isRequired,name:w.a.string.isRequired,file:w.a.string.isRequired,description:w.a.string.isRequired});var L=F;var B=a(2245);var U=L.ActionOrThunkInfo,q=L.SelectorInfo,G=L.ReducerInfo,H=L.MiddlewareInfo;var W={actions:w.a.arrayOf(U).isRequired,selectors:w.a.arrayOf(q).isRequired,reducers:w.a.arrayOf(G).isRequired,middlewares:w.a.arrayOf(H).isRequired,onClose:w.a.func};var V={onClose:r.a.noop};var z={name:"asc",usageCount:"desc",reducers:"asc",actions:"asc",selectors:"asc",file:"asc",isThunk:"desc",isFetcher:"desc",sideEffectsCount:"desc"};var Q=function(e){k()(t,e);function t(){h()(this,t);var e=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.a.bindAll(e,["renderReducers","renderSelectors","renderMiddlewares","renderActionsAndThunks","onSearchTermChange","renderSearchInput","filterResults","changeToTabAndUpdateSearch","onTabChange","sortCollection","updateSort","renderColumnHeader"]);e.state={searchTerm:"",defaultTabId:"selectors",sort:{selectors:{direction:"desc",key:"usageCount"},actionsAndThunks:{direction:"desc",key:"usageCount"},reducers:{direction:"asc",key:"name"},middlewares:{direction:"asc",key:"name"}}};return e}g()(t,[{key:"onSearchTermChange",value:function e(t){t.preventDefault();var a=t.target.value;this.setState(function(){return{searchTerm:a}})}},{key:"onTabChange",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"updateSort",value:function e(t,a){this.setState(function(e){var n=f()({},e.sort);if(n[t].key===a)n[t].direction="asc"===n[t].direction?"desc":"asc";else{n[t].key=a;n[t].direction=z[a]||"asc"}return{sort:n}})}},{key:"sortCollection",value:function e(t,a){var n=this.state.sort;var i=r.a.sortBy(t,n[a].key);"desc"===n[a].direction&&i.reverse();return i}},{key:"changeToTabAndUpdateSearch",value:function e(t,a){var n=this;this.setState(function(){return{defaultTabId:null}},function(){n.setState(function(){return{defaultTabId:t}},function(){n.setState(function(){return{searchTerm:a}})})})}},{key:"filterResults",value:function e(t,a,n){if(!t)return a;var i=t.toLowerCase();var o=a.filter(function(e){var t=false;n.forEach(function(a){var n=e&&e[a];r.a.isArray(n)&&(n=n.join(","));n.toLowerCase().indexOf(i)>=0&&(t=true)});return t});return o}},{key:"renderSearchInput",value:function e(){var t=this.state.searchTerm;return o.a.createElement(x["a"],{className:"p-redox__search_input margin_top_150 margin_bottom_150",value:t,onChange:this.onSearchTermChange,placeholder:"search"})}},{key:"renderColumnHeader",value:function e(t,a,n){var r=this;var i=this.state.sort;var s={};var l=void 0;var c=false;if(a&&n){c=true;s.onClick=function(){r.updateSort(a,n)};i[a].key===n&&(l="asc"===i[a].direction?o.a.createElement(P["b"],{className:"nudge_top_2",inline:true,type:"caret-up"}):o.a.createElement(P["b"],{className:"nudge_top_2",inline:true,type:"caret-down"}))}var u=A()("p-redox__table_cell","p-redox__table_column_header","p-redox__table_column_header--"+n,{"p-redox__table_column_header--sortable":c});return o.a.createElement("td",f()({className:u},s),t,l)}},{key:"renderReducers",value:function e(){var t=this;var a=this.props.reducers;var n=this.state.searchTerm;var r=this.filterResults(n,a,["name","file","actions","selectors"]);var i=this.sortCollection(r,"reducers");return o.a.createElement(o.a.Fragment,null,this.renderSearchInput(),o.a.createElement("table",{className:"p-redox__table"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","reducers","name"),this.renderColumnHeader("Actions"),this.renderColumnHeader("Selectors"),this.renderColumnHeader("File","reducers","file")),i.map(function(e,a){return o.a.createElement(J,{key:""+e.name+a,reducer:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderMiddlewares",value:function e(){var t=this.props.middlewares;var a=this.state.searchTerm;var n=this.filterResults(a,t,["name","description","file"]);var r=this.sortCollection(n,"middlewares");return o.a.createElement(o.a.Fragment,null,this.renderSearchInput(),o.a.createElement("table",{className:"p-redox__table"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","middlewares","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("File","middlewares","file")),r.map(function(e,t){return o.a.createElement(Z,{key:""+e.name+t,middleware:e})}))))}},{key:"renderSelectors",value:function e(){var t=this;var a=this.props.selectors;var n=this.state.searchTerm;var r=this.filterResults(n,a,["name","file"]);var i=this.sortCollection(r,"selectors");return o.a.createElement(o.a.Fragment,null,this.renderSearchInput(),o.a.createElement("table",{className:"p-redox__table"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","selectors","name"),this.renderColumnHeader("Usage Count","selectors","usageCount"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("File","selectors","file")),i.map(function(e,a){return o.a.createElement(Y,{key:""+e.name+a,selector:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderActionsAndThunks",value:function e(){var t=this;var a=this.props.actions;var n=this.state.searchTerm;var r=this.filterResults(n,a,["name","description","file"]);var i=this.sortCollection(r,"actionsAndThunks");var s=o.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","actionsAndThunks","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("Usage Count","actionsAndThunks","usageCount"),this.renderColumnHeader("Thunk?","actionsAndThunks","isThunk"),this.renderColumnHeader("Fetcher?","actionsAndThunks","isFetcher"),this.renderColumnHeader("Props"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("# Side Effects","actionsAndThunks","sideEffectsCount"),this.renderColumnHeader("File","actionsAndThunks","file"));return o.a.createElement(o.a.Fragment,null,this.renderSearchInput(),o.a.createElement("table",{className:"p-redox__table"},o.a.createElement("tbody",null,i.map(function(e,a){return o.a.createElement(o.a.Fragment,{key:""+e.name+a},a%30===0?s:null,o.a.createElement(K,{action:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch}))}))))}},{key:"render",value:function e(){var t=this.state.defaultTabId;var a=[{title:"Selectors",id:"selectors",content:this.renderSelectors()},{title:"Actions and Thunks",id:"actionsAndThunks",content:this.renderActionsAndThunks()},{title:"Reducers",id:"reducers",content:this.renderReducers()},{title:"Middleware",id:"middlewares",content:this.renderMiddlewares()}];return o.a.createElement(R["a"],{modalClasses:"p-redox_modal",title:"Redox",showCancelButton:false,showGoButton:false,onCancel:this.props.onClose},o.a.createElement(D["a"],{defaultTabId:t,tabs:a,onTabChange:this.onTabChange}))}}]);return t}(i["Component"]);Q.displayName="Redox";Q.defaultProps=V;var K=function e(t){var a=t.action,n=t.changeToTabAndUpdateSearch;var r=void 0;if(a.isThunk)r=o.a.createElement("td",{className:"p-redox__table_cell"},"n/a");else if(a.reducers&&a.reducers.length){var i=a.reducers;r=o.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e){return o.a.createElement(M["a"],{key:e,className:"p-redox__search_term_link",onClick:function t(){n("reducers",e)}},e)}))}else r=o.a.createElement("td",{className:"p-redox__table_cell"});return o.a.createElement("tr",{className:"p-redox__table_row"},o.a.createElement("td",{className:"p-redox__table_cell"},a.name),o.a.createElement("td",{className:"p-redox__table_cell"},a.description),o.a.createElement("td",{className:"p-redox__table_cell"},a.usageCount),o.a.createElement("td",{className:"p-redox__table_cell"},a.isThunk?"x":""),o.a.createElement("td",{className:"p-redox__table_cell"},a.isFetcher?"x":""),o.a.createElement("td",{className:"p-redox__table_cell"},a.props.map(function(e){return o.a.createElement("div",{key:e},e)})),r,o.a.createElement("td",{className:"p-redox__table_cell"},a.sideEffectsCount),o.a.createElement("td",{className:"p-redox__table_cell"},a.file))};K.displayName="ActionThunkRow";var Y=function e(t){var a=t.selector,n=t.changeToTabAndUpdateSearch;var r=void 0;if(a.reducers&&a.reducers.length){var i=a.reducers;r=o.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return o.a.createElement(M["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){n("reducers",e)}},e)}))}else r=o.a.createElement("td",{className:"p-redox__table_cell"});return o.a.createElement("tr",{className:"p-redox__table_row"},o.a.createElement("td",{className:"p-redox__table_cell"},a.name),o.a.createElement("td",{className:"p-redox__table_cell"},a.usageCount),r,o.a.createElement("td",{className:"p-redox__table_cell"},a.file))};Y.displayName="SelectorRow";var J=function e(t){var a=t.reducer,n=t.changeToTabAndUpdateSearch;var r=void 0;if(a.actions&&a.actions.length){var i=a.actions;r=o.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return o.a.createElement(M["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){n("actionsAndThunks",e)}},e)}))}else r=o.a.createElement("td",{className:"p-redox__table_cell"});var s=void 0;if(a.selectors&&a.selectors.length){var l=a.selectors;s=o.a.createElement("td",{className:"p-redox__table_cell"},l.map(function(e,t){return o.a.createElement(M["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){n("selectors",e)}},e)}))}else s=o.a.createElement("td",{className:"p-redox__table_cell"});return o.a.createElement("tr",{className:"p-redox__table_row"},o.a.createElement("td",{className:"p-redox__table_cell"},a.name),r,s,o.a.createElement("td",{className:"p-redox__table_cell"},a.file))};J.displayName="ReducerRow";var Z=function e(t){var a=t.middleware;return o.a.createElement("tr",{className:"p-redox__table_row"},o.a.createElement("td",{className:"p-redox__table_cell"},a.name),o.a.createElement("td",{className:"p-redox__table_cell"},a.description),o.a.createElement("td",{className:"p-redox__table_cell"},a.file))};Z.displayName="MiddlewareRow";var X=Q;var $=Object(j["a"])();var ee=Object(C["a"])();var te=Object(S["a"])();var ae=Object(I["a"])();var ne=Object(T["a"])();var re={onClose:w.a.func};var ie={onClose:r.a.noop};var oe=function(e){k()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"componentDidMount",value:function e(){var t=this;this.interval=setInterval(function(){t.forceUpdate()},1e3)}},{key:"componentWillUnmount",value:function e(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function e(){var t=pe();return o.a.createElement(X,f()({onClose:this.props.onClose},t))}}]);return t}(i["Component"]);oe.displayName="ConnectedRedox";oe.defaultProps=ie;function se(e){if(!e)return["(no props)"];if(!r.a.isFunction(e)&&r.a.isObject(e))return Object.keys(e);return["(single unnamed payload)"]}function le(e){var t=[];ae.forEach(function(a){a&&a.has&&a.has(e)&&t.push(a&&a.meta&&a.meta.name)});return t}function ce(e){var t=r.a.values($);if(e&&e.has){var a=t.filter(function(t){return e.has(t)});return a.map(function(e){return e.meta.name})}return[]}function ue(e){if(e&&e.meta&&e.meta.file){var t=e.meta.file.replace(/-store.*/,"");var a=te.filter(function(e){var a=e&&e.meta&&e.meta.file&&e.meta.file.replace(/-store.*/,"");return a&&a===t});return a.map(function(e){return e.meta.name})}return[]}function de(e){if(!e||!e.meta||!e.meta.file)return"";var t=[];var a=e.meta.file.replace(/-store.*/,"");ae.forEach(function(e){if(e&&e.meta&&e.meta.file){var n=e.meta.file.replace(/-store.*/,"");a===n&&t.push(e&&e.meta&&e.meta.name)}});return t}function pe(){var e=r.a.map($,function(e){var t=e.meta,a=t.name,n=t.description,r=t.file,i=t.usageCount;return{action:e,name:a,description:n,file:r,usageCount:i||0,isThunk:false,isFetcher:false,props:se(e.propTypes),reducers:le(e),sideEffectsCount:E["c"][e]?E["c"][e].length:0}});var t=r.a.map(ee,function(e){var t=e.meta,a=t.name,n=t.description,r=t.file,i=t.usageCount;return{thunk:e,name:a,description:n,file:r,usageCount:i||0,isThunk:true,isFetcher:!!e.isFetcherCreator,props:se(e.propTypes),sideEffectsCount:0}});var a=r.a.map(te,function(e){var t=e.meta,a=t.name,n=t.file,r=t.usageCount;return{selector:e,name:a,file:n,reducers:de(e),usageCount:r||0}});var n=r.a.map(ae,function(e){var t=e.meta||{},a=t.name,n=t.file;return{reducer:e,name:a||"",file:n||"",actions:ce(e),selectors:ue(e)}});var i=r.a.map(ne,function(e){var t=e.meta||{},a=t.name,n=t.file,r=t.description;return{middleware:e,name:a||"",file:n||"",description:r||""}});return{actions:e.concat(t),selectors:a,reducers:n,middlewares:i}}var fe=oe;var me=fe;var he=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.noop;if(!t)throw new Error("mountRedox must be called with a teamId parameter");var i=Object(d["d"])(t);Object(u["a"])(o.a.createElement(c["Provider"],{store:i},o.a.createElement(me,{onClose:n})),a)};var ve=function e(t){l.a.unmountComponentAtNode(t)};var ge={mountRedox:he,unmountRedox:ve};var be=a(27);var _e=a(17);var ye=a(51);var ke=a(130);var Oe="redox-container";var we=false;var Ee=Object(_e["b"])();function Ce(){if(we)return;if(!be["isDev"]&&!be["isJsPath"]){Ee.warn("Redox only works in a development environment");return}var e=document.getElementById(Oe);if(!e){e=document.createElement("div");e.id=Oe;document.body.appendChild(e)}we=true;he(TS.boot_data.team_id,e,je)}function je(){if(!be["isDev"]&&!be["isJsPath"]){Ee.warn("Redox only works in a development environment");return}we=false;ve(document.getElementById(Oe))}Object(ye["a"])("interop.mountRedox",Ce);Object(ye["a"])("interop.unmountRedox",je);Object(ke["exportToGlobalDebugger"])("redox",Ce);Object(ke["exportToGlobalDebugger"])("unmountRedox",je)},function(e,t,a){"use strict";a.r(t);a.d(t,"addMemberIds",function(){return b});a.d(t,"addNonExactMatchMemberIds",function(){return _});a.d(t,"saveScrollmark",function(){return y});a.d(t,"setMarker",function(){return k});a.d(t,"setSearchQuery",function(){return O});a.d(t,"setFilter",function(){return w});a.d(t,"getFlexpaneMemberIds",function(){return j});a.d(t,"getFlexpaneNonExactMatchMemberIds",function(){return S});a.d(t,"getScrollmark",function(){return I});a.d(t,"getMarker",function(){return T});a.d(t,"getSearchQuery",function(){return N});a.d(t,"getFilter",function(){return A});a.d(t,"listAndUpsertMembers",function(){return P});a.d(t,"fetchMembersPost",function(){return D});a.d(t,"test",function(){return F});var n=a(32);var r=a.n(n);var i=a(9);var o=a.n(i);var s=a(3);var l=a.n(s);var c=a(2);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(4);var m=a(257);var h=a(39);var v=a(21);var g;var b=Object(f["a"])("Add member IDs to the flexpane");b.propTypes=p.a.arrayOf(p.a.string).isRequired;var _=Object(f["a"])("Add non-exact match member IDs to the flexpane");_.propTypes=p.a.arrayOf(p.a.string).isRequired;var y=Object(f["a"])("Set the member directory flexpane scroll offset");y.propTypes=p.a.object;var k=Object(f["a"])("Set the marker");k.propTypes=p.a.string;var O=Object(f["a"])("Set the search query");O.propTypes=p.a.string;var w=Object(f["a"])("Set the filter");w.propTypes=p.a.string;var E={searchQuery:"",scrollmark:null,marker:"",memberIds:[],nonExactMatchMemberIds:[],filter:""};var C=Object(f["c"])((g={},o()(g,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;var a=E.nonExactMatchMemberIds;return l()({},e,{memberIds:Object(c["union"])(e.memberIds,t),nonExactMatchMemberIds:a})}),o()(g,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{nonExactMatchMemberIds:Object(c["union"])(e.memberIds,t)})}),o()(g,y,function(e,t){return l()({},e,{scrollmark:t})}),o()(g,k,function(e,t){return l()({},e,{marker:t})}),o()(g,O,function(e,t){if(t===e.searchQuery)return e;var a=E.memberIds,n=E.nonExactMatchMemberIds,r=E.scrollmark,i=E.marker;return l()({},e,{memberIds:a,nonExactMatchMemberIds:n,scrollmark:r,marker:i,searchQuery:t})}),o()(g,w,function(e,t){if(t===e.filter)return e;var a=E.memberIds,n=E.nonExactMatchMemberIds,r=E.scrollmark,i=E.marker;return l()({},e,{memberIds:a,nonExactMatchMemberIds:n,scrollmark:r,marker:i,filter:t})}),g),E);t["default"]=C;var j=Object(f["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds});var S=Object(f["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds});var I=Object(f["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark});var T=Object(f["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker});var N=Object(f["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery});var A=Object(f["d"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter});var R=10;var M=100;var x=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.searchQuery,n=void 0===a?"":a,r=t.marker,i=void 0===r?"":r,o=t.index,s=void 0===o?"":o,l=t.filter,c=void 0===l?"":l;var u={count:n?M:R,index:s,locale:Object(h["f"])(),filter:c};if(n){u.query=n;u.search_profile_fields=true}else u.marker=i;return u};var P=Object(f["e"])("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.isNonExactMatchMembersSearch,i=void 0!==n&&n,o=r()(a,["isNonExactMatchMembersSearch"]);var s=x(o);return e(Object(m["d"])({query:s})).then(function(t){var a=t.members,n=void 0===a?[]:a,r=t.next_marker;var o=n.map(function(e){return e.id});e(i?_(o):b(o));r&&e(k(r));return{members:n,nextMarker:r}})});P.propTypes={searchQuery:p.a.string,marker:p.a.string,index:p.a.string,filter:p.a.string,isNonExactMatchMembersSearch:p.a.bool};var D=Object(f["e"])("Fetch and upsert members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.isNonExactMatchMembersSearch,r=void 0!==n&&n;var i=t();var o=N(i);var s=T(i);var l=r?"everyone":A(i);var c=Object(v["shouldDisplayRealNames"])(i)?"users_by_realname":"users_by_display_name";return e(P({searchQuery:o,marker:s,index:c,filter:l,isNonExactMatchMembersSearch:r}))});D.propTypes={isNonExactMatchMembersSearch:p.a.bool};var F={};Object.defineProperty(F,"buildQueryParams",{get:function e(){return x}})},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(3);var d=a.n(u);var p=a(24);var f=a.n(p);var m=a(5);var h=a.n(m);var v=a(6);var g=a.n(v);var b=a(7);var _=a.n(b);var y=a(8);var k=a.n(y);var O=a(0);var w=a.n(O);var E=a(15);var C=a.n(E);var j=a(2);var S=a.n(j);var I=a(21);var T=a(22);var N=a(25);var A=Object(T["a"])("Fetches apps from the `apps.index.list` endpoint",function(e,t,a){return e(Object(N["a"])({method:"apps.index.list",args:a}))});A.propTypes={limit:w.a.number};var R=Object(T["a"])("Submits a search query and fetches results from `apps.index.search`",function(e,t,a){return e(Object(N["a"])({method:"apps.index.search",args:a}))});R.propTypes={query:w.a.string};var M=a(164);var x=a(1003);var P=a(421);var D=a(10);var F=a(1006);var L=a(11);var B=a(69);var U=a(20);var q=a(344);var G=a(92);var H=a(151);var W=a(2170);var V=50;var z=new D["b"]("apps_browser");var Q={channelId:w.a.string,featureWtaAddRemoveM11n:w.a.bool,hasSeenAppSpaceTutorial:w.a.bool,isInternetExplorer:w.a.bool,isFirefoxAndWindows:w.a.bool,isFirefoxAndMac:w.a.bool,isMacSsbBuild:w.a.bool,scrollThreshold:w.a.number,addAppsVariant:w.a.bool,isUnpaid:w.a.bool,fetchAppsIndexList:w.a.func,submitAppsIndexSearch:w.a.func,clogger:w.a.object.isRequired};var K={channelId:void 0,featureWtaAddRemoveM11n:false,hasSeenAppSpaceTutorial:false,isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,scrollThreshold:500,addAppsVariant:false,isUnpaid:false,fetchAppsIndexList:S.a.noop,submitAppsIndexSearch:S.a.noop};var Y={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var J={id:"tutorial_category",name:"",display_name:"",apps:[{name:z.t("What are apps?"),short_description:z.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/436da/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}]};var Z=function(e){k()(t,e);function t(e){h()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.lastRequestId=0;a.currentDisplayedId=0;a.isMouseMoveEnabled=true;a.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;a.runningAppIndex=0;a.showLimitMeter=false;a.appsForLimitMeter=null;a.cloggedLimitMeterImpression=false;a.LimitMeterClogId=null;a.appLimitMeterClogPayload={};a.isPaginating=false;a.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],selectedAppIndex:null,showLoadingIndicator:false,showPaginationIndicator:false};a.handleKeydown=a.handleKeydown.bind(a);a.handleMouseMove=a.handleMouseMove.bind(a);a.handleAppsListScroll=a.handleAppsListScroll.bind(a);a.handleAppDirectoryButtonClick=a.handleAppDirectoryButtonClick.bind(a);a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.handleAppClick=a.handleAppClick.bind(a);a.handleAppMouseLeave=a.handleAppMouseLeave.bind(a);a.handleAppLimitMeterClickClog=a.handleAppLimitMeterClickClog.bind(a);a.fillDefaultAppsList=a.fillDefaultAppsList.bind(a);a.searchApps=a.searchApps.bind(a);a.completeRequest=a.completeRequest.bind(a);a.enableMouseMove=a.enableMouseMove.bind(a);a.throttledSearchApps=S.a.throttle(a.searchApps,500,{leading:false});a.debouncedEnableMouseMove=S.a.debounce(a.enableMouseMove,200);return a}g()(t,[{key:"componentDidMount",value:function e(){var t=this;document.body.addEventListener("keydown",this.handleKeydown);document.body.addEventListener("mousemove",this.handleMouseMove);this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);var a=this.props.fetchAppsIndexList({limit:V}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.defaultAppCategories=[J].concat(f()(e.categories));return{categories:t.defaultAppCategories}});this.completeRequest(a,Y.listEnpoint,false,this.fillDefaultAppsList)}},{key:"componentWillReceiveProps",value:function e(t){var a=this;var n=this.getSelectedApp();"tutorial_app"===S.a.get(n,"dataset.app_id")&&!this.props.hasSeenAppSpaceTutorial&&t.hasSeenAppSpaceTutorial&&this.setState(function(){return{selectedAppIndex:null}},function(){a.firstSelectableAppIndex=a.state.isShowingDefaultAppCategories?1:0})}},{key:"componentWillUpdate",value:function e(t,a){this.state.isShowingDefaultAppCategories!==a.isShowingDefaultAppCategories&&(this.firstSelectableAppIndex=a.isShowingDefaultAppCategories&&t.hasSeenAppSpaceTutorial?1:0)}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.handleKeydown);document.body.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getAppsListHeight",value:function e(){return document.querySelector("[data-apps_list]").scrollHeight}},{key:"getAppIcon",value:function e(t){return Object(P["a"])(t,72)}},{key:"getSelectedApp",value:function e(){return document.querySelector("[data-app_index='"+this.state.selectedAppIndex+"']")}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var a=0;a<this.state.appCategories.length;a++)t+=S.a.get(this.state.appCategories[a],"apps",[]).length;return t}},{key:"enableMouseMove",value:function e(){this.isMouseMoveEnabled=true}},{key:"handleKeydown",value:function e(t){var a=this;var n=0;for(var r=0;r<this.state.appCategories.length;r++)n+=this.state.appCategories[r].apps.length;if(0===n)return;var i=void 0;switch(t.which){case 40:case 9:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var t=void 0;t=null===e.selectedAppIndex?a.firstSelectableAppIndex:e.selectedAppIndex===n-1?e.selectedAppIndex:e.selectedAppIndex+1;return{selectedAppIndex:t}},function(){a.scrollSelectedAppIntoView(false);a.debouncedEnableMouseMove()});break;case 38:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var n=void 0;n=null===e.selectedAppIndex?a.firstSelectableAppIndex:e.selectedAppIndex===a.firstSelectableAppIndex?a.firstSelectableAppIndex:t.getModifierState("Shift")?a.firstSelectableAppIndex:e.selectedAppIndex-1;return{selectedAppIndex:n}},function(){a.scrollSelectedAppIntoView(false);a.debouncedEnableMouseMove()});break;case 13:i=this.getSelectedApp();i&&this.selectApp(i.dataset);break;default:break}}},{key:"isElementTextInput",value:function e(t){return"text"===t.type}},{key:"scrollSelectedAppIntoView",value:function e(){var t=this.getSelectedApp();if(!t)return;var a=document.querySelector("[data-apps_list]");var n=document.querySelector("[data-category_header]");var r=n?n.offsetHeight:0;t.offsetTop<a.scrollTop?a.scrollTop=t.offsetTop-r:t.offsetTop+t.offsetHeight>a.scrollTop+a.offsetHeight&&(a.scrollTop=t.offsetTop+t.offsetHeight-a.offsetHeight)}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleAppMouseLeave",value:function e(t){this.getSelectedApp()===t.currentTarget&&this.setState(function(){return{selectedAppIndex:null}})}},{key:"selectApp",value:function e(t){var a=this.props.clogger;var n={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)Object(x["f"])();else if("app_limit_meter"===t.app_id){var r=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){window.open(window.location.origin+"/pricing?ui_step=280&ui_element=5'");a.track("GROWTH_PRICING",{num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{window.open(window.location.origin+"/apps");a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)Object(x["a"])(t);else if("true"===t.is_installed){Object(x["e"])(t);a.track("APP_INDEX_VIEW_CLICK",n)}else{window.open(window.location.origin+"/apps/"+t.app_id);a.track("APP_INDEX_INSTALL_CLICK",n)}}},{key:"handleMouseMove",value:function e(t){if(!this.isMouseMoveEnabled)return;var a=t.target.closest("[data-app]");a&&this.setState(function(){return{selectedAppIndex:parseInt(a.dataset.app_index,10)}})}},{key:"handleAppsListScroll",value:function e(t){var a=t.currentTarget;var n=a.offsetHeight+a.scrollTop+this.props.scrollThreshold;this.state.isShowingDefaultAppCategories&&n>a.scrollHeight&&this.loadMoreApps(this.state.appCategories[1],Y.listEnpoint)}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;window.open(window.location.origin+"/apps");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK")}},{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}});this.throttledSearchApps(a)}},{key:"fillDefaultAppsList",value:function e(){var t=this.state.appCategories[1];if(t.next_cursor&&window.innerHeight-230>this.getAppsListHeight())this.loadMoreApps(t,Y.listEnpoint,this.fillDefaultAppsList);else{this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}}},{key:"loadMoreApps",value:function e(t,a,n){var r=this;if(this.isPaginating)return;if(!t.next_cursor)return;var i={category:t.id,cursor:t.next_cursor,limit:V};a===Y.searchEndpoint&&(i.query=this.state.searchTerm);var o=setTimeout(function(){r.setState(function(){return{showPaginationIndicator:true}})},300);this.isPaginating=true;this.lastRequestId+=1;var s=this.lastRequestId;var l=a===Y.searchEndpoint?this.props.submitAppsIndexSearch:this.props.fetchAppsIndexList;l(i).then(function(e){if(s<r.lastRequestId)return;var i=e.categories[0];if(!i)return;r.setState(function(e){if(s<r.lastRequestId)return{};for(var n=0;n<e.appCategories.length;n++)if(e.appCategories[n].id===t.id){var o=[].concat(f()(e.appCategories[n].apps),f()(i.apps));var l=d()({},e.appCategories[n]);l.apps=o;l.next_cursor=i.next_cursor;var c=[].concat(f()(e.appCategories));c[n]=l;a===Y.listEnpoint&&(r.defaultAppCategories=c);return{appCategories:c,showPaginationIndicator:false}}return{}},function(){r.isPaginating=false;clearTimeout(o);n&&"function"===typeof n&&n()})})}},{key:"searchApps",value:function e(t){var a=this;var n=this.props.clogger;if(t){var r=setTimeout(function(){a.setState(function(){return{isSearching:true}})},300);var i=this.props.submitAppsIndexSearch({query:t}).then(function(e){clearTimeout(r);a.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e});this.completeRequest(i,Y.searchEndpoint,true);n.track("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:a.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,a,n,r){var i=this;this.lastRequestId+=1;var o=this.lastRequestId;t.then(function(e){if(o>i.currentDisplayedId){i.currentDisplayedId=o;var t={appCategories:e.categories,selectedAppIndex:S.a.get(e,"categories[0].apps",[]).length&&a===Y.searchEndpoint?0:null};n&&(t.showLoadingIndicator=false);if(i.props.addAppsVariant){var s=S()(e.categories).flatMap("apps").filter("bot_user_id").map("bot_user_id").value();Object(x["d"])(s).then(function(){i.updateAfterRequest(t,r)})}else i.updateAfterRequest(t,r)}}).catch(S.a.noop)}},{key:"updateAfterRequest",value:function e(t,a){this.setState(function(){return t},function(){a&&"function"===typeof a&&a()})}},{key:"createAppCategoryMarkup",value:function e(t,a){var n=this;return t.apps.map(function(e,t){var i=a+t;var o=C()("p-apps_browser__app",{"p-apps_browser__app--selected":i===n.state.selectedAppIndex});var s="app-"+e.app_id+"-"+e.bot_id;var l=n.getAppIcon(e);var c=n.props.addAppsVariant&&e.is_installed&&Object(x["c"])(e.bot_user_id);var u=z.t("Install");"tutorial_app"===e.app_id?u=z.t("Start"):c?u=z.t("Add"):e.is_installed&&(u=z.t("View"));return r.a.createElement("div",{key:s,className:o,onClick:n.handleAppClick,onMouseLeave:n.handleAppMouseLeave,"data-app":true,"data-app_index":i,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":c||null,role:"presentation"},r.a.createElement("img",{className:"p-apps_browser__app_icon",src:l,alt:"App icon"}),r.a.createElement("div",{className:"p-apps_browser__app_info"},r.a.createElement("div",{className:"p-apps_browser__app_name"},r.a.createElement("strong",null,e.name)),r.a.createElement("div",{className:"p-apps_browser__app_description"},Object(F["a"])(e.short_description,function(e,t){return r.a.createElement("strong",{key:t},e)}))),r.a.createElement(U["d"],{className:"p-apps_browser__app_action",type:"outline"},u))})}},{key:"createAppCategoriesMarkup",value:function e(){var t=this;this.runningAppIndex=0;return this.state.appCategories.map(function(e){if(!S.a.get(e,"apps",[]).length)return null;var a="category-"+e.id;var n=C()("p-apps_browser__category_section",{"p-apps_browser__category_section--tutorial":"tutorial_category"===e.id},{"p-apps_browser__category_section--hidden":"tutorial_category"===e.id&&(t.props.hasSeenAppSpaceTutorial||!t.state.isShowingDefaultAppCategories||t.showLimitMeter)});var i=C()("p-apps_browser__category_header");var o=t.createAppCategoryMarkup(e,t.runningAppIndex);t.runningAppIndex+=e.apps.length;return r.a.createElement("section",{key:a,className:n},r.a.createElement("div",{className:i,"data-category_header":true},e.display_name),o)},this)}},{key:"createColorLimitMeterMarkup",value:function e(){return this.appsForLimitMeter.map(function(e,t){var a="color-meter-"+t;var n=C()({hidden:0===t,first:1===t,meter_first_green:t<4&&"blank_box"!==e.short_description,meter_second_green:4===t&&"blank_box"!==e.short_description,meter_third_green:5===t&&"blank_box"!==e.short_description,meter_fourth_green:6===t&&"blank_box"!==e.short_description,meter_yellow:7===t&&"blank_box"!==e.short_description,meter_orange:8===t&&"blank_box"!==e.short_description,meter_red:9===t&&"blank_box"!==e.short_description,on:"blank_box"!==e.short_description,off:"blank_box"===e.short_description&&1!==t});return r.a.createElement("li",{className:n,key:a})})}},{key:"createAppsForLimitMeterMarkup",value:function e(t){var a=this;if(!S.a.get(t,"apps",[]).length)return null;var n=10;this.appsForLimitMeter=JSON.parse(JSON.stringify(t.apps));var i=n-t.apps.length;while(i>0){var o={app_id:i,name:"Try a new app",short_description:"blank_box"};this.appsForLimitMeter.push(o);i-=1}this.appsForLimitMeter[0].align="ts_tip_left";this.appsForLimitMeter[n-1].align="ts_tip_right";return this.appsForLimitMeter.map(function(e,t){var n="limit-apps-"+t;var i=C()("p-apps_browser__app_limit_meter__apps","inline_block","ts_tip","ts_tip_bottom",{"p-apps_browser__app_limit_meter__blank_app_box":"blank_box"===e.short_description,is_ff_and_win:a.props.isFirefoxAndWindows,is_ff_and_mac:a.props.isFirefoxAndMac,is_ie:a.props.isInternetExplorer,ts_tip_right:"ts_tip_right"===e.align,ts_tip_left:"ts_tip_left"===e.align,no_left_margin:"ts_tip_left"===e.align});var o=C()("ts_tip_tip",{large_top_margin:"blank_box"===e.short_description,medium_top_margin:"blank_box"!==e.short_description});var s="blank_box"===e.short_description?null:a.getAppIcon(e);return r.a.createElement("div",{className:i,key:n},r.a.createElement("img",{className:"align_top",src:s,alt:""}),r.a.createElement("span",{className:o},e.name))})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var a=10;var n=S.a.get(e,"apps",[]).length;var i=t.props,o=i.isUnpaid,s=i.isFirefoxAndWindows,l=i.isFirefoxAndMac,c=i.clogger;if(!n||n>a||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var u=t.getSelectedApp();var d="num_of_apps="+n;var p=!!n;var f="limit-meter-"+e.id;t.showLimitMeter=p&&o;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var m=void 0;var h=void 0;var v=void 0;var g=void 0;var b=void 0;var _=C()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:s});var y=C()("p-apps_browser__app_limit_meter",{is_ff_and_mac:l});if(n<6){m=z.t("Add apps to get things done");h=z.t("Schedule meetings, share docs, and more \u2014\xa0straight from Slack. ");v=z.t("See app suggestions");g="/apps";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";b="link_app_directory"}else if(n>5){m=z.t("Upgrade for unlimited apps");h=z.t("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. ",{numOfApps:n});v=z.t("Learn more");g="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";b="pricing_link"}t.appLimitMeterClogPayload={num_of_apps:n,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:b}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){c.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);c.track("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else c.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);t.cloggedLimitMeterImpression=true}var k=C()({hidden:t.props.isMacSsbBuild&&"pricing_link"===b,bold:"app_limit_meter"===S.a.get(u,"dataset.app_id")});var O=t.createAppsForLimitMeterMarkup(e);var w=t.createColorLimitMeterMarkup();return r.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:f},r.a.createElement("div",{className:y},r.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},r.a.createElement("b",null,m)),r.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph"},h,r.a.createElement("a",{className:k,href:g,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":d,onClick:t.handleAppLimitMeterClickClog},v)),r.a.createElement("div",null,r.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},O),r.a.createElement("ul",{className:_},w))))})}},{key:"render",value:function e(){var t=this.props,a=t.addAppsVariant,n=t.channelId,i=t.featureWtaAddRemoveM11n;var o=void 0;var s=C()("p-apps_browser__apps_list",{"p-apps_browser__apps_list--loading":this.state.showLoadingIndicator,"p-apps_browser__apps_list--paginating":this.state.showPaginationIndicator});var l=void 0;l=a?i&&n?r.a.createElement("h2",null,z.rt("Add apps to {channelName}",{channelName:r.a.createElement(H["a"],{channelId:n})})):r.a.createElement("h2",{dangerouslySetInnerHTML:{__html:Object(x["b"])()}}):r.a.createElement("h2",null,z.t("Browse Apps"));o=!this.getTotalAppsCount()&&this.state.searchTerm?r.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results"},z.t("There are no apps matching"),"\xa0",r.a.createElement("strong",null,this.state.searchTerm)):this.createAppCategoriesMarkup();var c=this.createAppLimitMeterMarkup();return r.a.createElement("div",{className:"p-apps_browser"},r.a.createElement("div",{className:"p-apps_browser__filter_container"},r.a.createElement("div",{className:"p-apps_browser__filter_header"},l,r.a.createElement(U["d"],{className:"p-apps_browser__browse_apps",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},z.t("View App Directory"))),r.a.createElement("div",null,r.a.createElement(q["a"],{placeholder:z.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),r.a.createElement("div",{className:s,onScroll:this.handleAppsListScroll,"data-apps_list":true},c,o,r.a.createElement(G["a"],{className:"p-apps_browser__spinner",size:"jumbo"})))}}]);return t}(n["Component"]);Z.displayName="AppsBrowser";Z.defaultProps=K;var X=function e(t){var a=Object(I["getUserPref"])(t,"seen_app_space_tutorial");var n=Object(B["getPrimaryView"])(t);return{channelId:n,featureWtaAddRemoveM11n:Object(L["isFeatureEnabled"])(t,"feature_wta_add_remove_m11n"),hasSeenAppSpaceTutorial:a,clogger:Object(M["a"])({state:t})}};var $={fetchAppsIndexList:A,submitAppsIndexSearch:R};var ee=Object(s["connect"])(X,$)(Z);var te=ee;var ae=function e(t,a,n){if(!t)throw new Error("mountAppsBrowser must be called with a teamId parameter");Object(l["a"])(r.a.createElement(s["Provider"],{store:Object(c["d"])(t)},r.a.createElement(te,n)),a)};var ne=function e(t){o.a.unmountComponentAtNode(t)};var re={mountAppsBrowser:ae};var ie=a(51);Object(ie["a"])("interop.mountAppsBrowser",ae);Object(ie["a"])("interop.unmountAppsBrowser",ne)},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(26);var r=a(16);var i=a(12);var o=a(658);var s=a(47);function l(e,t){var a=void 0;if(Object(i["isIm"])(t)){var l=Object(n["getMemberById"])(e,t.user);var c=Object(r["getPrefCompliantMemberName"])(e,l);a="<@"+l.id+"|@"+c+">"}else a=Object(i["isMpim"])(t)?""+Object(o["b"])(e,t):Object(i["isChannel"])(t)||Object(i["isPrivateChannel"])(t)?"#"+t.name:""+t.name;return s["e"].in+":"+a}},,function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(626);function i(){return Object(r["isOnline"])(TS.redux.getState())}function o(){return Object(r["getMaximumSocketWait"])(TS.redux.getState())}Object(n["a"])("interop.connectivity",{isOnline:i,getMaximumSocketWait:o})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(0);var g=a.n(v);var b=a(15);var _=a.n(b);var y=a(20);var k=a(18);var O=a(10);var w=a(2235);var E=new O["b"]("migration_blocker_page");var C={enterpriseName:g.a.string,sendEmail:g.a.bool,teamName:g.a.string,migrationID:g.a.string,isOrgOwner:g.a.bool,isWorkspaceOwner:g.a.bool,isOrgAdmin:g.a.bool,isWorkspaceAdmin:g.a.bool,teamURL:g.a.string};var j={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamName:null};var S=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderMigrationTitle",value:function e(){var t=this.props,a=t.teamName,n=t.enterpriseName;return r.a.createElement("h3",{className:"p-migration_blocker_page__title"},E.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:a,enterpriseName:n}))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,a=t.enterpriseName,n=t.sendEmail;var i=E.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:a,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return r.a.createElement("div",{className:"p-migration_blocker_page__description"},i,n?E.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function e(){var t=this.props,a=t.migrationID,n=t.isOrgOwner,i=t.isWorkspaceOwner,o=t.isOrgAdmin,s=t.isWorkspaceAdmin,l=t.teamURL;if(!n&&!i&&!o&&!s)return null;return r.a.createElement(y["c"],{className:"p-migration_blocker_page__button",href:l+"migrations/"+a+"/status"},r.a.createElement("div",{className:"p-migration_blocker_page__button__text"},r.a.createElement("span",{className:"p-migration_blocker_page__button__title"},E.t("View migration status")),r.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},E.t("Migration status is only visible to owners and admins."))),r.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},r.a.createElement(k["b"],{type:"chevron-large-right"})))}},{key:"render",value:function e(){var t=_()("p-migration_blocker_page","p-migration_blocker_page--large");return r.a.createElement("div",{className:t,role:"button",tabIndex:"0"},r.a.createElement("div",{className:"p-migration_blocker_text"},r.a.createElement("div",{className:"p-migration_blocker_icon"}),this.renderMigrationTitle(),this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(n["Component"]);S.displayName="MigrationBlockerPage";S.defaultProps=j;var I={};var T=S;var N=T;var A=function e(t,a,n){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(o["a"])(r.a.createElement(i["Provider"],{store:Object(s["d"])(t)},r.a.createElement(N,n)),a)};var R=A;var M=a(51);Object(M["a"])("interop.mountMigrationBlocker",R)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(3);var c=a.n(l);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(451);var k=a(18);var O=a(2);var w=a(19);var E=a(26);var C=a(50);var j=a(16);var S=a(1092);var I=a(1093);var T={text:_.a.string,userId:_.a.string.isRequired,title:_.a.string,username:_.a.string,imageUrl:_.a.string,imageUrlSmall:_.a.string,isDeleted:_.a.bool,isError:_.a.bool,isRestricted:_.a.bool.isRequired,isUltraRestricted:_.a.bool.isRequired,isExternal:_.a.bool.isRequired,team:_.a.shape({name:_.a.string})};var N={text:"default",activeChannel:void 0,statusText:"",statusEmoji:"",title:void 0,username:void 0,isBot:false,botID:void 0,imageUrl:"",imageUrlSmall:"",menuProps:{},hasImHistory:false,isSelf:false,isStranger:false,isDeleted:false,isOwner:false,isError:false,isRestricted:false,isUltraRestricted:false,isExternal:false,team:{},canUserBeRemovedFromActiveChannel:false,startImByMemberId:O["noop"]};var A=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props,a=t.userId,n=t.username,i=t.imageUrl,o=t.imageUrlSmall,s=t.title,l=t.isError,c=t.team;var u=r.a.createElement(I["a"],{isRestricted:this.props.isRestricted,isUltraRestricted:this.props.isUltraRestricted,isExternal:this.props.isExternal,isDeleted:this.props.isDeleted,team:c});var d=r.a.createElement(S["a"],{imageUrl:i,imageUrlSmall:o,userId:a,username:n,title:s,isError:l,restriction:u});var p=this.props.text;return r.a.createElement("div",null,r.a.createElement("h1",null,"Chanan made a new MemberProfilePane component ",r.a.createElement(k["a"],{type:"sparkles"}),"!"),r.a.createElement("div",null,"And it has a text property set to ",p),r.a.createElement("div",null,"And it has user ID: ",this.props.userId),d)}}]);return t}(n["PureComponent"]);A.displayName="MemberProfilePane";A.defaultProps=N;function R(e,t){var a=t.userId;var n=Object(E["getMemberById"])(e,a);return c()({},t,{imageUrl:n.profile.image_512,imageUrlSmall:n.profile.image_48,username:n.profile.real_name||n.profile.display_name||n.name,botId:n.bot_id,hasImHistory:!!Object(w["getImByMemberId"])(e,n.id),isBot:n.is_bot,isExternal:Object(j["isExternal"])(n),isOwner:Object(j["isOwner"])(n),isRestricted:Object(j["isRestricted"])(n),isSelf:Object(j["isSelf"])(n),isStranger:Object(j["isStranger"])(n),isDeleted:Object(j["isDeleted"])(n),isUltraRestricted:Object(j["isUltraRestricted"])(n),prefCompliantMemberName:Object(j["getPrefCompliantMemberNameById"])(e,n.id),team:Object(C["getTeamById"])(e,n.team_id),title:n.profile.title})}var M={updateTyping:y["updateTyping"]};var x=Object(i["connect"])(R,M)(A);var P=x;var D=function e(t,a,n){if(!t)throw new Error("mountProfileFlexpane must be called with a teamId parameter");var l=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:l},r.a.createElement(P,n)),a)};var F=D;var L=a(51);Object(L["a"])("interop.mountProfileFlexpane",F)},,function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(2);var o=a(25);var s=a(51);var l=a(869);var c=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","enterprise.channels.search","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function u(e){return c.includes(e)}var d=c;var p=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function f(e){return p.includes(e)}var m=p;var h=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function v(e){return h.includes(e)}var g=h;var b=0;function _(e){var t=e.data,a=e.method,n=e.args;var i=r()({},t,{args:null});var o=false===a.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(i,a,n&&n.channel);var s=false===a.startsWith("users.")&&false===f(a)&&TS.members.legacyEnsureMembersInDataArePresent(i,a);var l=false===a.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(i,"api/ensureModelForLegacy for method: "+a);var c=false===v(a)&&TS.shared.legacyEnsureModelObsInDataArePresent(i,a);return TS.ensureFullyBooted().then(function(){return c}).then(function(){return Promise.join(o,s,l)}).catch(TS.error)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,a=void 0!==t&&t;return function(e,t,n,i){var s={method:e,args:t,EXPEDITED:a,SET_ACTIVE:!TS.client&&!i};var l=function a(n){return{ok:n.ok,request_id:n.request_id,data:n,method:e,args:t}};var c=TS.redux.dispatch(Object(o["a"])(s)).then(l).tap(u(e)&&_).catch(function(e){e.args=r()({_attempts:e.attempts},e.args);throw e});"function"===typeof n&&(c=c.then(function(e){return n(true,e.data,t)}).catch(function(e){return n(false,e.data,t)}));return b?Promise.delay(b).then(function(){return c}):c}}function k(){return Object(l["c"])(TS.redux.getState())}function O(){return k().isPaused()}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];k().awaitEmptyQ().then(e)}function E(e){b=e}var C=y();var j=y({expedited:true});Object(s["a"])("interop.api",{call:C,callExpedited:j,callImmediately:j,getQueue:k,isPaused:O,callFuncWhenApiQisEmpty:w,debugSetResponseDelay:E})},,,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(3);var c=a.n(l);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(2);var k=a(10);var O=a(20);var w=a(1150);var E=a(88);var C=a(1400);var j=a(1009);var S=a(1149);var I=a(338);var T=a(18);var N=a(65);var A=a(41);var R=a(1172);var M=a(159);var x=a(164);var P=a(325);var D=a(799);var F=a(76);var L={appIcon:_.a.string.isRequired,appName:_.a.string.isRequired,teamIcon:_.a.string.isRequired,teamName:_.a.string.isRequired};var B={appIcon:void 0,appName:void 0,teamIcon:void 0,teamName:void 0};var U=function e(t){var a=t.appIcon,n=t.appName,i=t.teamIcon,o=t.teamName;return r.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},r.a.createElement("img",{className:"p-oauth_flow__logo_img",src:a,alt:n,title:n}),r.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_light_grey"},r.a.createElement(T["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),r.a.createElement(T["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),r.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:n,title:o}))};U.displayName="OAuthPageLogos";U.defaultProps=B;var q=Object(F["pure"])(U);var G=a(2241);var H=new k["b"]("pages_oauth");var W=_.a.arrayOf(P["a"]);var V={featureOauthReactWta:_.a.bool.isRequired,appIsReviewed:_.a.bool,appIsInternalIntegration:_.a.bool,authRowIdentifier:_.a.string.isRequired,crumbKey:_.a.string.isRequired,appIcon:_.a.string.isRequired,appName:_.a.string.isRequired,teamIcon:_.a.string.isRequired,teamName:_.a.string.isRequired,denyUrl:_.a.string.isRequired,safeTeamScopeInfo:W,dangerousTeamScopeInfo:W,safeChannelScopeInfo:W,dangerousChannelScopeInfo:W,needSecondStep:_.a.bool.isRequired,needTeamPicker:_.a.bool.isRequired,singleChannel:_.a.bool,channelItems:_.a.shape({channels:_.a.object,group_channels:_.a.object,im_channels:_.a.object,mpim_channels:_.a.object}),appId:_.a.string,appType:_.a.string,appIsInstalled:_.a.bool,initialSelectedTeamID:_.a.string,teamsList:_.a.arrayOf(_.a.shape({href:_.a.string.required,teamId:_.a.string.required,teamImg:_.a.string.required,teamName:_.a.string.required})),signInUrl:_.a.string,switchTeamUrlPathAndQuery:_.a.string,onTeamSelected:_.a.func,orgName:_.a.string,appDevelopmentTeamName:_.a.string,featureOauthInternalIntegrationBanner:_.a.bool,featureWtaAppDetailOauthUpdates:_.a.bool,featureAppApprovalsScopeAwareness:_.a.bool,isRequest:_.a.bool,isRequestNoteRequired:_.a.bool,teamId:_.a.string,enterpriseId:_.a.string,userId:_.a.string};var z={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:y["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,channelItems:{},orgName:void 0,appDevelopmentTeamName:void 0,appCreatedOnTeam:false,featureOauthInternalIntegrationBanner:false,featureWtaAppDetailOauthUpdates:false,featureAppApprovalsScopeAwareness:false,isRequest:false,isRequestNoteRequired:false,teamId:void 0,userId:void 0,enterpriseId:void 0};var Q=300;var K=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var Y=function e(t,a,n){return t.map(function(e){var t={id:e.encoded_id,channelType:a};t.label="im"===a?"@"+e.username:"channel"===a||"private"===a?"#"+e.name:e.name;n&&n.find(function(t){return t.id===e.encoded_id})&&(t.preselected=true);return t})};var J=function e(t,a){var n=[];t.channels&&n.push({id:"channels",label:"Channels",group:true,children:Y(Object(y["values"])(t.channels),"channel",a)});t.group_channels&&n.push({id:"group_channels",label:"Private Channels",group:true,children:Y(Object(y["values"])(t.group_channels),"private",a)});if(t.im_channels||t.mpim_channels){var r=[];var i=[];t.im_channels&&(r=Y(Object(y["values"])(t.im_channels),"im",a));t.mpim_channels&&(i=Y(Object(y["values"])(t.mpim_channels),"mpim",a));var o=r.concat(i);n.push({id:"im_mpim_channels",label:"Direct Messages",group:true,children:o})}return n};var Z=function e(t,a,n,r){var i=Object(y["compact"])(t.concat(a,n,r));return Object(y["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var X=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=a.props,r=n.appId,i=n.appName,o=n.safeTeamScopeInfo,s=n.dangerousTeamScopeInfo,l=n.safeChannelScopeInfo,c=n.dangerousChannelScopeInfo,u=n.userId,p=n.teamId,f=n.enterpriseId;a.trackingProps={app_scopes:Z(o,s,l,c),app_name:i,app_id:r};a.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],lfsInputValue:"",requestNote:""};a.clogger=Object(x["a"])({userId:u,teamId:p,enterpriseId:f,locale:Object(k["o"])()});Object(y["bindAll"])(a,["onRequestNoteChange","onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef"]);return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.appIsInstalled,n=t.appId,r=t.appType;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:a,app_id:n,app_type:r});this.clogger.track("OAUTH_REVIEWS_SCOPES",this.trackingProps);this.clogger.trackForm("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps)}},{key:"onDenyClick",value:function e(){this.clogger.track("OAUTH_DENY",this.trackingProps)}},{key:"onContinueClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(){return{step:1}})}},{key:"onBackClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0}})}},{key:"onInputKeyUp",value:function e(){var t=Object(y["get"])(this,"lfs.input.value","");this.setState(function(){return{lfsInputValue:t}})}},{key:"onRequestNoteChange",value:function e(t){this.setState(function(){return{requestNote:t}})}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{lfsInputValue:"",selectedChannelValues:t,selectedRadioValue:"specific-channels"}})}},{key:"changeRadioButtonCheck",value:function e(t){var a=t.target.id;this.setState(function(){return{selectedRadioValue:a}})}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,a=t.dangerousTeamScopeInfo,n=t.safeTeamScopeInfo;return Object(y["isEmpty"])(a)&&Object(y["isEmpty"])(n)}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,a=t.dangerousChannelScopeInfo,n=t.safeChannelScopeInfo;return Object(y["isEmpty"])(a)&&Object(y["isEmpty"])(n)}},{key:"isChannelInputRequired",value:function e(){var t=this.state.step;var a=this.props,n=a.appIsInstalled,r=a.isRequest,i=a.singleChannel,o=a.needSecondStep,s=a.channelItems,l=a.featureAppApprovalsScopeAwareness,c=a.featureWtaAppDetailOauthUpdates;if(l&&r)return false;if(Object(y["isEmpty"])(s)||this.noChannelScopesUsed())return false;if(1===t&&c&&!i&&n)return false;if(0===t&&o&&!this.noWorkspaceScopesUsed())return false;return true}},{key:"isRequiredChannelMissing",value:function e(){var t=false;var a=this.state,n=a.selectedChannelValues,r=a.selectedRadioValue,i=a.lfsInputValue;var o=this.props.singleChannel;this.isChannelInputRequired()&&(o?t=0===n.length:"specific-channels"===r&&(t=0===n.length||i.length>0));return t}},{key:"isLastStep",value:function e(){var t=this.state.step;var a=this.props,n=a.needSecondStep,r=a.featureWtaAppDetailOauthUpdates;if(r&&this.noWorkspaceScopesUsed())return true;return!n||1===t}},{key:"shouldRequestNoteBeVisible",value:function e(){var t=this.props,a=t.featureAppApprovalsScopeAwareness,n=t.isRequest;return this.isLastStep()&&a&&n}},{key:"isRequestNoteRequired",value:function e(){var e=this.props.isRequestNoteRequired;return this.shouldRequestNoteBeVisible()&&e}},{key:"isRequiredRequestNoteMissing",value:function e(){var t=this.state.requestNote;return this.isRequestNoteRequired()&&0===t.trim().length}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var a=this.state.step;if(t&&1===a)return r.a.createElement(N["a"],{role:"button",className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},r.a.createElement(T["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,a=t.needTeamPicker,n=t.initialSelectedTeamID,i=t.teamsList,o=t.signInUrl,s=t.switchTeamUrlPathAndQuery;var l=this.state.step;if(a&&0===l){var u=i;s&&(u=Object(y["map"])(i,function(e){return c()({},e,{href:window.location.protocol+"//"+window.location.hostname+s+"&switch_to_team="+e.teamId})}));return r.a.createElement("div",{className:"p-oauth_flow__team_switcher position_relative"},r.a.createElement(R["a"],{initialSelectedTeamID:n,teamsList:u,signInUrl:o}))}return false}},{key:"renderAlert",value:function e(){var t=this.props,a=t.appDevelopmentTeamName,n=t.appIsInternalIntegration,i=t.appIsReviewed,o=t.featureOauthReactWta,s=t.featureOauthInternalIntegrationBanner,l=t.orgName,c=t.teamName;if(i)return null;var u=void 0;s?u=n?a?H.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(k["m"])(l),teamName:Object(k["m"])(a)}):H.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(k["m"])(c)}):H.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,a=e.text;return r.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},a)}):o&&(u=H.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>",null,function(e){var t=e.key,a=e.text;return r.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},a)}));return r.a.createElement(w["a"],{type:n?"neutral":"warning",text:u,showCloseButton:false})}},{key:"renderConfirmTitle",value:function e(){var t=this.props,a=t.appIsInstalled,n=t.appName,r=t.featureOauthReactWta,i=t.featureWtaAppDetailOauthUpdates,o=t.needSecondStep,s=t.singleChannel,l=t.teamName;var c=this.state.step;var u=void 0;i?u=1===c?s?H.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:n}):a?H.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:n}):H.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:n}):a?this.noWorkspaceScopesUsed()?o?s?H.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:n,teamName:l}):H.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:n,teamName:l}):this.noChannelScopesUsed()?H.t("{appName} is already installed on {teamName}.",{teamName:Object(k["m"])(l),appName:Object(k["m"])(n)}):H.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(k["m"])(l),appName:Object(k["m"])(n)}):H.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(k["m"])(l),appName:Object(k["m"])(n)}):H.t("On {teamName}, {appName} would like to:",{teamName:Object(k["m"])(l),appName:Object(k["m"])(n)}):r&&(u=1===c?H.rt("{app_name} would like to do the following in the <strong>selected channels:</strong>",{app_name:n}):H.t("On {team}, {app_name} would like to:",{team:Object(k["m"])(l),app_name:Object(k["m"])(n)}));return u}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state.step;var a=this.props,n=a.featureOauthReactWta,i=a.needSecondStep,o=a.appIsInstalled,s=a.appId,l=a.appType,c=a.featureWtaAppDetailOauthUpdates,u=a.singleChannel,d=a.featureAppApprovalsScopeAwareness,p=a.isRequest;var f=this.isRequiredChannelMissing();var m=this.isRequiredRequestNoteMissing();var h=f||m;var v=void 0;var g=void 0;var b=void 0;var _=void 0;var y=void 0;var k=void 0;var w=void 0;if(n){_=H.t("Continue");y=d&&p?H.t("Request"):H.t("Install")}c&&(k=H.t("Allow"));if(0!==t||!i||c&&this.noWorkspaceScopesUsed()){v=c&&o?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?_:k:y;g=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:o,app_id:s,app_type:l})};b="submit"}else{v=_;g=this.onContinueClick;b="button"}c&&f?w=u?H.t("Select channel"):H.t("Select channels"):d&&m&&(w=H.t("You need to add a note for your Admins"));return r.a.createElement(O["d"],{"data-qa":"oauth_flow_button_next",className:"p-oauth_flow__button",htmlType:b,onClick:g,disabled:h},v,w&&r.a.createElement(A["d"],{tip:w},r.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderChannelSelections",value:function e(){var t=this.state,a=t.selectedChannelValues,n=t.selectedRadioValue;var i=this.props,o=i.channelItems,s=i.featureOauthReactWta,l=i.appName;var c=void 0;var u=void 0;var d=void 0;var p=void 0;var f=void 0;var m=void 0;var h=void 0;if(s){c=H.t("Select channels");u=H.t("All Public Channels");d=H.t("Any channel accessible to full members of your team.");p=H.t("Specific channels");f=H.t("Search for channels");m=H.t("No channels");h=H.t("{app_name} will still be able to access a private conversation with you",{app_name:l})}var v=J(o,a);var g=a.map(function(e){return'"'+e.id+'"'}).join(",");return r.a.createElement("div",{className:"margin_auto no_right_padding"},r.a.createElement("div",{className:"large_top_margin"},r.a.createElement("p",{className:"p-oauth_flow__para bold"},c),r.a.createElement("div",{className:"margin_bottom_100"},r.a.createElement(E["a"],{text:u,htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},r.a.createElement(I["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===n,onChange:this.changeRadioButtonCheck}))),r.a.createElement("div",{className:"margin_bottom_100"},r.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},r.a.createElement("div",{className:"c-label__text full_width"},r.a.createElement("span",{className:"bold"},p)),r.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+g+"]",checked:"specific-channels"===n,onChange:this.changeRadioButtonCheck})),r.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},r.a.createElement(j["a"],{ref:this.setLfsRef,items:v,scrollThreshold:Q,placeholderText:f,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:K}))),r.a.createElement("div",{className:"margin_bottom_100"},r.a.createElement(E["a"],{text:m,htmlFor:"no-channels",type:"inline",subtext:h,cursor:"pointer"},r.a.createElement(I["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===n,onChange:this.changeRadioButtonCheck})))))}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props,a=t.channelItems,n=t.featureOauthReactWta,i=t.featureWtaAppDetailOauthUpdates,o=t.needSecondStep;var s=this.state.selectedChannelValues;var l=s.map(function(e){return e.id});var c=J(a,s);var u=void 0;var d=void 0;if(n){u=H.t("Post to");d=H.t("Select Channel")}var p=r.a.createElement(j["a"],{ref:this.setLfsRef,items:c,scrollThreshold:Q,placeholderText:d,onValueChange:this.updateSpecificChannelsValues,listItemClass:K,single:true});return o&&i?r.a.createElement("div",{className:"margin_top_200"},r.a.createElement("p",{className:"p-oauth_flow__para bold"},H.t("Select a channel")),r.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},p),r.a.createElement("input",{type:"hidden",name:"channel",value:l})):r.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},r.a.createElement("span",{className:"margin_right_50"},u),r.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},p),r.a.createElement("input",{type:"hidden",name:"channel",value:l}))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var a=this.props,n=a.isRequest,r=a.appIsInstalled,i=a.singleChannel,o=a.needSecondStep,s=a.channelItems,l=a.featureAppApprovalsScopeAwareness,c=a.featureWtaAppDetailOauthUpdates;if(l&&n||Object(y["isEmpty"])(s)||this.noChannelScopesUsed())return null;if(1===t){if(c&&!i&&r)return null}else if(o&&!this.noWorkspaceScopesUsed())return null;return i?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"renderRequestNoteSection",value:function e(){var t=this.props,a=t.isRequestNoteRequired,n=t.featureAppApprovalsScopeAwareness;if(!n||!this.shouldRequestNoteBeVisible())return null;var i=this.state.requestNote;return r.a.createElement("div",{className:"large_top_margin"},r.a.createElement(E["a"],{htmlFor:"note",id:"note_label",text:H.t("Add a message for your Admins"),optional:!a},r.a.createElement(D["a"],{id:"note",name:"note",className:"p-oauth_flow__textarea",isRequired:a,labelId:"note_label",value:i,onChange:this.onRequestNoteChange})))}},{key:"render",value:function e(){var t=this.state.step;var a=this.props,n=a.appIcon,i=a.appName,o=a.teamIcon,s=a.teamName,l=a.safeTeamScopeInfo,c=a.dangerousTeamScopeInfo,u=a.safeChannelScopeInfo,d=a.dangerousChannelScopeInfo,p=a.authRowIdentifier,f=a.crumbKey,m=a.denyUrl,h=a.needSecondStep,v=a.featureOauthReactWta,g=a.featureWtaAppDetailOauthUpdates;var b={appIcon:n,appName:i,teamIcon:o,teamName:s};var _=void 0;_=0!==t||g&&this.noWorkspaceScopesUsed()&&h?u.concat(d):Object(y["compact"])(l.concat(c));var k=void 0;v&&(k=H.t("Cancel"));return r.a.createElement("div",null,this.renderAlert(),r.a.createElement("header",{className:"p-oauth_flow__nav"},r.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),r.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),r.a.createElement("section",{className:"p-oauth_flow__header align_center"},r.a.createElement(q,b),r.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),r.a.createElement("section",{className:"p-oauth_flow__body"},r.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+p,method:"post","accept-encoding":"UTF-8"},r.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),r.a.createElement("input",{type:"hidden",name:"crumb",value:f}),r.a.createElement("div",{className:"p-oauth_flow__scopes_container"},r.a.createElement(S["a"],{scopeInfo:_}),this.renderSingleChannelOrChannelSelections(),this.renderRequestNoteSection(),r.a.createElement("div",{className:"p-oauth_flow__buttons_container"},r.a.createElement(O["d"],{type:"outline",onClick:this.onDenyClick,href:m,className:"p-oauth_flow__button",target:"_self"},k),this.renderContinueOrInstallButton())))))}}]);return t}(n["PureComponent"]);X.displayName="OAuthConfirm";X.defaultProps=z;X.displayName="OAuthConfirm";var $=X;var ee=Object(M["a"])("feature_oauth_react_wta","feature_oauth_internal_integration_banner","feature_wta_app_detail_oauth_updates","feature_app_approvals_scope_awareness")(X);var te=function e(t,a,n){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(o["a"])(r.a.createElement(i["Provider"],{store:Object(s["d"])(t)},r.a.createElement(ee,n)),a)};var ae=te;var ne=a(51);Object(ne["a"])("interop.mountOAuthConfirm",ae)},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(10);var i=new r["b"]("a11y");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isCurrent,n=e.hasNotifications,r=e.isStarred,o=e.isMuted,s=e.hasDraft,l=e.featureLabelsForCoreObjects;if(!l)return null;var c=function(){if(a&&n&&o&&r&&s)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!a&&n&&o&&r&&s)return i.t("has notifications, muted, starred, has a draft message");if(a&&!n&&o&&r&&s)return i.t("current conversation, muted, starred, has a draft message");if(!a&&!n&&o&&r&&s)return i.t("muted, starred, has a draft message");if(a&&n&&!o&&r&&s)return i.t("current conversation, has notifications, starred, has a draft message");if(!a&&n&&!o&&r&&s)return i.t("has notifications, starred, has a draft message");if(a&&!n&&!o&&r&&s)return i.t("current conversation, starred, has a draft message");if(!a&&!n&&!o&&r&&s)return i.t("starred, has a draft message");if(a&&n&&o&&!r&&s)return i.t("current conversation, has notifications, muted, has a draft message");if(!a&&n&&o&&!r&&s)return i.t("has notifications, muted, has a draft message");if(a&&!n&&o&&!r&&s)return i.t("current conversation, muted, has a draft message");if(!a&&!n&&o&&!r&&s)return i.t("muted, has a draft message");if(a&&n&&!o&&!r&&s)return i.t("current conversation, has notifications, has a draft message");if(!a&&n&&!o&&!r&&s)return i.t("has notifications, has a draft message");if(a&&!n&&!o&&!r&&s)return i.t("current conversation, has a draft message");if(!a&&!n&&!o&&!r&&s)return i.t("has a draft message");if(a&&n&&o&&r&&!s)return i.t("current conversation, has notifications, muted, starred");if(!a&&n&&o&&r&&!s)return i.t("has notifications, muted, starred");if(a&&!n&&o&&r&&!s)return i.t("current conversation, muted, starred");if(!a&&!n&&o&&r&&!s)return i.t("muted, starred");if(a&&n&&!o&&r&&!s)return i.t("current conversation, has notifications, starred");if(!a&&n&&!o&&r&&!s)return i.t("has notifications, starred");if(a&&!n&&!o&&r&&!s)return i.t("current conversation, starred");if(!a&&!n&&!o&&r&&!s)return i.t("starred");if(a&&n&&o&&!r&&!s)return i.t("current conversation, has notifications, muted");if(!a&&n&&o&&!r&&!s)return i.t("has notifications, muted");if(a&&!n&&o&&!r&&!s)return i.t("current conversation, muted");if(!a&&!n&&o&&!r&&!s)return i.t("muted");if(a&&n&&!o&&!r&&!s)return i.t("current conversation, has notifications");if(!a&&n&&!o&&!r&&!s)return i.t("has notifications");if(a&&!n&&!o&&!r&&!s)return i.t("current conversation");return""}();if(t&&c)return i.t("{name} ({context})",{name:t,context:c});if(t)return t;return""}var s=new r["b"]("a11y");function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,a=e.previousChannelName,n=e.workspaceName,r=e.orgName,i=e.isOrgGlobalSharedPublicOrPrivateChannel,o=e.isOrgSharedPublicOrPrivateChannel,l=e.isExternallySharedChannel,c=e.isArchived,u=e.isCurrent,d=e.hasUnreads,p=e.hasNotifications,f=e.isPrivate,m=e.isNotMember,h=e.isMuted,v=e.isStarred,g=e.hasDraft,b=e.featureLabelsForCoreObjects;if(!b)return null;var _=function(){if(l&&n)return s.t("shared with {workspaceName}",{workspaceName:n});if(i&&r)return s.t("shared across all {orgName} workspaces",{orgName:r});if(o)return s.t("shared channel");return""}();var y=function(){if(c)return s.t("archived channel");if(u&&d&&p&&f&&m&&h&&v&&g)return s.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(!u&&d&&p&&f&&m&&h&&v&&g)return s.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(u&&!d&&p&&f&&m&&h&&v&&g)return s.t("current channel, has notifications, private, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&f&&m&&h&&v&&g)return s.t("has notifications, private, not a member, muted, starred, has a draft message");if(u&&d&&!p&&f&&m&&h&&v&&g)return s.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&f&&m&&h&&v&&g)return s.t("has unread messages, private, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&f&&m&&h&&v&&g)return s.t("current channel, private, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&f&&m&&h&&v&&g)return s.t("private, not a member, muted, starred, has a draft message");if(u&&d&&p&&!f&&m&&h&&v&&g)return s.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message");if(!u&&d&&p&&!f&&m&&h&&v&&g)return s.t("has unread messages and notifications, not a member, muted, starred, has a draft message");if(u&&!d&&p&&!f&&m&&h&&v&&g)return s.t("current channel, has notifications, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&!f&&m&&h&&v&&g)return s.t("has notifications, not a member, muted, starred, has a draft message");if(u&&d&&!p&&!f&&m&&h&&v&&g)return s.t("current channel, has unread messages, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&!f&&m&&h&&v&&g)return s.t("has unread messages, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&!f&&m&&h&&v&&g)return s.t("current channel, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&!f&&m&&h&&v&&g)return s.t("not a member, muted, starred, has a draft message");if(u&&d&&p&&f&&!m&&h&&v&&g)return s.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message");if(!u&&d&&p&&f&&!m&&h&&v&&g)return s.t("has unread messages and notifications, private, muted, starred, has a draft message");if(u&&!d&&p&&f&&!m&&h&&v&&g)return s.t("current channel, has notifications, private, muted, starred, has a draft message");if(!u&&!d&&p&&f&&!m&&h&&v&&g)return s.t("has notifications, private, muted, starred, has a draft message");if(u&&d&&!p&&f&&!m&&h&&v&&g)return s.t("current channel, has unread messages, private, muted, starred, has a draft message");if(!u&&d&&!p&&f&&!m&&h&&v&&g)return s.t("has unread messages, private, muted, starred, has a draft message");if(u&&!d&&!p&&f&&!m&&h&&v&&g)return s.t("current channel, private, muted, starred, has a draft message");if(!u&&!d&&!p&&f&&!m&&h&&v&&g)return s.t("private, muted, starred, has a draft message");if(u&&d&&p&&!f&&!m&&h&&v&&g)return s.t("current channel, has unread messages and notifications, muted, starred, has a draft message");if(!u&&d&&p&&!f&&!m&&h&&v&&g)return s.t("has unread messages and notifications, muted, starred, has a draft message");if(u&&!d&&p&&!f&&!m&&h&&v&&g)return s.t("current channel, has notifications, muted, starred, has a draft message");if(!u&&!d&&p&&!f&&!m&&h&&v&&g)return s.t("has notifications, muted, starred, has a draft message");if(u&&d&&!p&&!f&&!m&&h&&v&&g)return s.t("current channel, has unread messages, muted, starred, has a draft message");if(!u&&d&&!p&&!f&&!m&&h&&v&&g)return s.t("has unread messages, muted, starred, has a draft message");if(u&&!d&&!p&&!f&&!m&&h&&v&&g)return s.t("current channel, muted, starred, has a draft message");if(!u&&!d&&!p&&!f&&!m&&h&&v&&g)return s.t("muted, starred, has a draft message");if(u&&d&&p&&f&&m&&!h&&v&&g)return s.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message");if(!u&&d&&p&&f&&m&&!h&&v&&g)return s.t("has unread messages and notifications, private, not a member, starred, has a draft message");if(u&&!d&&p&&f&&m&&!h&&v&&g)return s.t("current channel, has notifications, private, not a member, starred, has a draft message");if(!u&&!d&&p&&f&&m&&!h&&v&&g)return s.t("has notifications, private, not a member, starred, has a draft message");if(u&&d&&!p&&f&&m&&!h&&v&&g)return s.t("current channel, has unread messages, private, not a member, starred, has a draft message");if(!u&&d&&!p&&f&&m&&!h&&v&&g)return s.t("has unread messages, private, not a member, starred, has a draft message");if(u&&!d&&!p&&f&&m&&!h&&v&&g)return s.t("current channel, private, not a member, starred, has a draft message");if(!u&&!d&&!p&&f&&m&&!h&&v&&g)return s.t("private, not a member, starred, has a draft message");if(u&&d&&p&&!f&&m&&!h&&v&&g)return s.t("current channel, has unread messages and notifications, not a member, starred, has a draft message");if(!u&&d&&p&&!f&&m&&!h&&v&&g)return s.t("has unread messages and notifications, not a member, starred, has a draft message");if(u&&!d&&p&&!f&&m&&!h&&v&&g)return s.t("current channel, has notifications, not a member, starred, has a draft message");if(!u&&!d&&p&&!f&&m&&!h&&v&&g)return s.t("has notifications, not a member, starred, has a draft message");if(u&&d&&!p&&!f&&m&&!h&&v&&g)return s.t("current channel, has unread messages, not a member, starred, has a draft message");if(!u&&d&&!p&&!f&&m&&!h&&v&&g)return s.t("has unread messages, not a member, starred, has a draft message");if(u&&!d&&!p&&!f&&m&&!h&&v&&g)return s.t("current channel, not a member, starred, has a draft message");if(!u&&!d&&!p&&!f&&m&&!h&&v&&g)return s.t("not a member, starred, has a draft message");if(u&&d&&p&&f&&!m&&!h&&v&&g)return s.t("current channel, has unread messages and notifications, private, starred, has a draft message");if(!u&&d&&p&&f&&!m&&!h&&v&&g)return s.t("has unread messages and notifications, private, starred, has a draft message");if(u&&!d&&p&&f&&!m&&!h&&v&&g)return s.t("current channel, has notifications, private, starred, has a draft message");if(!u&&!d&&p&&f&&!m&&!h&&v&&g)return s.t("has notifications, private, starred, has a draft message");if(u&&d&&!p&&f&&!m&&!h&&v&&g)return s.t("current channel, has unread messages, private, starred, has a draft message");if(!u&&d&&!p&&f&&!m&&!h&&v&&g)return s.t("has unread messages, private, starred, has a draft message");if(u&&!d&&!p&&f&&!m&&!h&&v&&g)return s.t("current channel, private, starred, has a draft message");if(!u&&!d&&!p&&f&&!m&&!h&&v&&g)return s.t("private, starred, has a draft message");if(u&&d&&p&&!f&&!m&&!h&&v&&g)return s.t("current channel, has unread messages and notifications, starred, has a draft message");if(!u&&d&&p&&!f&&!m&&!h&&v&&g)return s.t("has unread messages and notifications, starred, has a draft message");if(u&&!d&&p&&!f&&!m&&!h&&v&&g)return s.t("current channel, has notifications, starred, has a draft message");if(!u&&!d&&p&&!f&&!m&&!h&&v&&g)return s.t("has notifications, starred, has a draft message");if(u&&d&&!p&&!f&&!m&&!h&&v&&g)return s.t("current channel, has unread messages, starred, has a draft message");if(!u&&d&&!p&&!f&&!m&&!h&&v&&g)return s.t("has unread messages, starred, has a draft message");if(u&&!d&&!p&&!f&&!m&&!h&&v&&g)return s.t("current channel, starred, has a draft message");if(!u&&!d&&!p&&!f&&!m&&!h&&v&&g)return s.t("starred, has a draft message");if(u&&d&&p&&f&&m&&h&&!v&&g)return s.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message");if(!u&&d&&p&&f&&m&&h&&!v&&g)return s.t("has unread messages and notifications, private, not a member, muted, has a draft message");if(u&&!d&&p&&f&&m&&h&&!v&&g)return s.t("current channel, has notifications, private, not a member, muted, has a draft message");if(!u&&!d&&p&&f&&m&&h&&!v&&g)return s.t("has notifications, private, not a member, muted, has a draft message");if(u&&d&&!p&&f&&m&&h&&!v&&g)return s.t("current channel, has unread messages, private, not a member, muted, has a draft message");if(!u&&d&&!p&&f&&m&&h&&!v&&g)return s.t("has unread messages, private, not a member, muted, has a draft message");if(u&&!d&&!p&&f&&m&&h&&!v&&g)return s.t("current channel, private, not a member, muted, has a draft message");if(!u&&!d&&!p&&f&&m&&h&&!v&&g)return s.t("private, not a member, muted, has a draft message");if(u&&d&&p&&!f&&m&&h&&!v&&g)return s.t("current channel, has unread messages and notifications, not a member, muted, has a draft message");if(!u&&d&&p&&!f&&m&&h&&!v&&g)return s.t("has unread messages and notifications, not a member, muted, has a draft message");if(u&&!d&&p&&!f&&m&&h&&!v&&g)return s.t("current channel, has notifications, not a member, muted, has a draft message");if(!u&&!d&&p&&!f&&m&&h&&!v&&g)return s.t("has notifications, not a member, muted, has a draft message");if(u&&d&&!p&&!f&&m&&h&&!v&&g)return s.t("current channel, has unread messages, not a member, muted, has a draft message");if(!u&&d&&!p&&!f&&m&&h&&!v&&g)return s.t("has unread messages, not a member, muted, has a draft message");if(u&&!d&&!p&&!f&&m&&h&&!v&&g)return s.t("current channel, not a member, muted, has a draft message");if(!u&&!d&&!p&&!f&&m&&h&&!v&&g)return s.t("not a member, muted, has a draft message");if(u&&d&&p&&f&&!m&&h&&!v&&g)return s.t("current channel, has unread messages and notifications, private, muted, has a draft message");if(!u&&d&&p&&f&&!m&&h&&!v&&g)return s.t("has unread messages and notifications, private, muted, has a draft message");if(u&&!d&&p&&f&&!m&&h&&!v&&g)return s.t("current channel, has notifications, private, muted, has a draft message");if(!u&&!d&&p&&f&&!m&&h&&!v&&g)return s.t("has notifications, private, muted, has a draft message");if(u&&d&&!p&&f&&!m&&h&&!v&&g)return s.t("current channel, has unread messages, private, muted, has a draft message");if(!u&&d&&!p&&f&&!m&&h&&!v&&g)return s.t("has unread messages, private, muted, has a draft message");if(u&&!d&&!p&&f&&!m&&h&&!v&&g)return s.t("current channel, private, muted, has a draft message");if(!u&&!d&&!p&&f&&!m&&h&&!v&&g)return s.t("private, muted, has a draft message");if(u&&d&&p&&!f&&!m&&h&&!v&&g)return s.t("current channel, has unread messages and notifications, muted, has a draft message");if(!u&&d&&p&&!f&&!m&&h&&!v&&g)return s.t("has unread messages and notifications, muted, has a draft message");if(u&&!d&&p&&!f&&!m&&h&&!v&&g)return s.t("current channel, has notifications, muted, has a draft message");if(!u&&!d&&p&&!f&&!m&&h&&!v&&g)return s.t("has notifications, muted, has a draft message");if(u&&d&&!p&&!f&&!m&&h&&!v&&g)return s.t("current channel, has unread messages, muted, has a draft message");if(!u&&d&&!p&&!f&&!m&&h&&!v&&g)return s.t("has unread messages, muted, has a draft message");if(u&&!d&&!p&&!f&&!m&&h&&!v&&g)return s.t("current channel, muted, has a draft message");if(!u&&!d&&!p&&!f&&!m&&h&&!v&&g)return s.t("muted, has a draft message");if(u&&d&&p&&f&&m&&!h&&!v&&g)return s.t("current channel, has unread messages and notifications, private, not a member, has a draft message");if(!u&&d&&p&&f&&m&&!h&&!v&&g)return s.t("has unread messages and notifications, private, not a member, has a draft message");if(u&&!d&&p&&f&&m&&!h&&!v&&g)return s.t("current channel, has notifications, private, not a member, has a draft message");if(!u&&!d&&p&&f&&m&&!h&&!v&&g)return s.t("has notifications, private, not a member, has a draft message");if(u&&d&&!p&&f&&m&&!h&&!v&&g)return s.t("current channel, has unread messages, private, not a member, has a draft message");if(!u&&d&&!p&&f&&m&&!h&&!v&&g)return s.t("has unread messages, private, not a member, has a draft message");if(u&&!d&&!p&&f&&m&&!h&&!v&&g)return s.t("current channel, private, not a member, has a draft message");if(!u&&!d&&!p&&f&&m&&!h&&!v&&g)return s.t("private, not a member, has a draft message");if(u&&d&&p&&!f&&m&&!h&&!v&&g)return s.t("current channel, has unread messages and notifications, not a member, has a draft message");if(!u&&d&&p&&!f&&m&&!h&&!v&&g)return s.t("has unread messages and notifications, not a member, has a draft message");if(u&&!d&&p&&!f&&m&&!h&&!v&&g)return s.t("current channel, has notifications, not a member, has a draft message");if(!u&&!d&&p&&!f&&m&&!h&&!v&&g)return s.t("has notifications, not a member, has a draft message");if(u&&d&&!p&&!f&&m&&!h&&!v&&g)return s.t("current channel, has unread messages, not a member, has a draft message");if(!u&&d&&!p&&!f&&m&&!h&&!v&&g)return s.t("has unread messages, not a member, has a draft message");if(u&&!d&&!p&&!f&&m&&!h&&!v&&g)return s.t("current channel, not a member, has a draft message");if(!u&&!d&&!p&&!f&&m&&!h&&!v&&g)return s.t("not a member, has a draft message");if(u&&d&&p&&f&&!m&&!h&&!v&&g)return s.t("current channel, has unread messages and notifications, private, has a draft message");if(!u&&d&&p&&f&&!m&&!h&&!v&&g)return s.t("has unread messages and notifications, private, has a draft message");if(u&&!d&&p&&f&&!m&&!h&&!v&&g)return s.t("current channel, has notifications, private, has a draft message");if(!u&&!d&&p&&f&&!m&&!h&&!v&&g)return s.t("has notifications, private, has a draft message");if(u&&d&&!p&&f&&!m&&!h&&!v&&g)return s.t("current channel, has unread messages, private, has a draft message");if(!u&&d&&!p&&f&&!m&&!h&&!v&&g)return s.t("has unread messages, private, has a draft message");if(u&&!d&&!p&&f&&!m&&!h&&!v&&g)return s.t("current channel, private, has a draft message");if(!u&&!d&&!p&&f&&!m&&!h&&!v&&g)return s.t("private, has a draft message");if(u&&d&&p&&!f&&!m&&!h&&!v&&g)return s.t("current channel, has unread messages and notifications, has a draft message");if(!u&&d&&p&&!f&&!m&&!h&&!v&&g)return s.t("has unread messages and notifications, has a draft message");if(u&&!d&&p&&!f&&!m&&!h&&!v&&g)return s.t("current channel, has notifications, has a draft message");if(!u&&!d&&p&&!f&&!m&&!h&&!v&&g)return s.t("has notifications, has a draft message");if(u&&d&&!p&&!f&&!m&&!h&&!v&&g)return s.t("current channel, has unread messages, has a draft message");if(!u&&d&&!p&&!f&&!m&&!h&&!v&&g)return s.t("has unread messages, has a draft message");if(u&&!d&&!p&&!f&&!m&&!h&&!v&&g)return s.t("current channel, has a draft message");if(!u&&!d&&!p&&!f&&!m&&!h&&!v&&g)return s.t("has a draft message");if(u&&d&&p&&f&&m&&h&&v&&!g)return s.t("current channel, has unread messages and notifications, private, not a member, muted, starred");if(!u&&d&&p&&f&&m&&h&&v&&!g)return s.t("has unread messages and notifications, private, not a member, muted, starred");if(u&&!d&&p&&f&&m&&h&&v&&!g)return s.t("current channel, has notifications, private, not a member, muted, starred");if(!u&&!d&&p&&f&&m&&h&&v&&!g)return s.t("has notifications, private, not a member, muted, starred");if(u&&d&&!p&&f&&m&&h&&v&&!g)return s.t("current channel, has unread messages, private, not a member, muted, starred");if(!u&&d&&!p&&f&&m&&h&&v&&!g)return s.t("has unread messages, private, not a member, muted, starred");if(u&&!d&&!p&&f&&m&&h&&v&&!g)return s.t("current channel, private, not a member, muted, starred");if(!u&&!d&&!p&&f&&m&&h&&v&&!g)return s.t("private, not a member, muted, starred");if(u&&d&&p&&!f&&m&&h&&v&&!g)return s.t("current channel, has unread messages and notifications, not a member, muted, starred");if(!u&&d&&p&&!f&&m&&h&&v&&!g)return s.t("has unread messages and notifications, not a member, muted, starred");if(u&&!d&&p&&!f&&m&&h&&v&&!g)return s.t("current channel, has notifications, not a member, muted, starred");if(!u&&!d&&p&&!f&&m&&h&&v&&!g)return s.t("has notifications, not a member, muted, starred");if(u&&d&&!p&&!f&&m&&h&&v&&!g)return s.t("current channel, has unread messages, not a member, muted, starred");if(!u&&d&&!p&&!f&&m&&h&&v&&!g)return s.t("has unread messages, not a member, muted, starred");if(u&&!d&&!p&&!f&&m&&h&&v&&!g)return s.t("current channel, not a member, muted, starred");if(!u&&!d&&!p&&!f&&m&&h&&v&&!g)return s.t("not a member, muted, starred");if(u&&d&&p&&f&&!m&&h&&v&&!g)return s.t("current channel, has unread messages and notifications, private, muted, starred");if(!u&&d&&p&&f&&!m&&h&&v&&!g)return s.t("has unread messages and notifications, private, muted, starred");if(u&&!d&&p&&f&&!m&&h&&v&&!g)return s.t("current channel, has notifications, private, muted, starred");if(!u&&!d&&p&&f&&!m&&h&&v&&!g)return s.t("has notifications, private, muted, starred");if(u&&d&&!p&&f&&!m&&h&&v&&!g)return s.t("current channel, has unread messages, private, muted, starred");if(!u&&d&&!p&&f&&!m&&h&&v&&!g)return s.t("has unread messages, private, muted, starred");if(u&&!d&&!p&&f&&!m&&h&&v&&!g)return s.t("current channel, private, muted, starred");if(!u&&!d&&!p&&f&&!m&&h&&v&&!g)return s.t("private, muted, starred");if(u&&d&&p&&!f&&!m&&h&&v&&!g)return s.t("current channel, has unread messages and notifications, muted, starred");if(!u&&d&&p&&!f&&!m&&h&&v&&!g)return s.t("has unread messages and notifications, muted, starred");if(u&&!d&&p&&!f&&!m&&h&&v&&!g)return s.t("current channel, has notifications, muted, starred");if(!u&&!d&&p&&!f&&!m&&h&&v&&!g)return s.t("has notifications, muted, starred");if(u&&d&&!p&&!f&&!m&&h&&v&&!g)return s.t("current channel, has unread messages, muted, starred");if(!u&&d&&!p&&!f&&!m&&h&&v&&!g)return s.t("has unread messages, muted, starred");if(u&&!d&&!p&&!f&&!m&&h&&v&&!g)return s.t("current channel, muted, starred");if(!u&&!d&&!p&&!f&&!m&&h&&v&&!g)return s.t("muted, starred");if(u&&d&&p&&f&&m&&!h&&v&&!g)return s.t("current channel, has unread messages and notifications, private, not a member, starred");if(!u&&d&&p&&f&&m&&!h&&v&&!g)return s.t("has unread messages and notifications, private, not a member, starred");if(u&&!d&&p&&f&&m&&!h&&v&&!g)return s.t("current channel, has notifications, private, not a member, starred");if(!u&&!d&&p&&f&&m&&!h&&v&&!g)return s.t("has notifications, private, not a member, starred");if(u&&d&&!p&&f&&m&&!h&&v&&!g)return s.t("current channel, has unread messages, private, not a member, starred");if(!u&&d&&!p&&f&&m&&!h&&v&&!g)return s.t("has unread messages, private, not a member, starred");if(u&&!d&&!p&&f&&m&&!h&&v&&!g)return s.t("current channel, private, not a member, starred");if(!u&&!d&&!p&&f&&m&&!h&&v&&!g)return s.t("private, not a member, starred");if(u&&d&&p&&!f&&m&&!h&&v&&!g)return s.t("current channel, has unread messages and notifications, not a member, starred");if(!u&&d&&p&&!f&&m&&!h&&v&&!g)return s.t("has unread messages and notifications, not a member, starred");if(u&&!d&&p&&!f&&m&&!h&&v&&!g)return s.t("current channel, has notifications, not a member, starred");if(!u&&!d&&p&&!f&&m&&!h&&v&&!g)return s.t("has notifications, not a member, starred");if(u&&d&&!p&&!f&&m&&!h&&v&&!g)return s.t("current channel, has unread messages, not a member, starred");if(!u&&d&&!p&&!f&&m&&!h&&v&&!g)return s.t("has unread messages, not a member, starred");if(u&&!d&&!p&&!f&&m&&!h&&v&&!g)return s.t("current channel, not a member, starred");if(!u&&!d&&!p&&!f&&m&&!h&&v&&!g)return s.t("not a member, starred");if(u&&d&&p&&f&&!m&&!h&&v&&!g)return s.t("current channel, has unread messages and notifications, private, starred");if(!u&&d&&p&&f&&!m&&!h&&v&&!g)return s.t("has unread messages and notifications, private, starred");if(u&&!d&&p&&f&&!m&&!h&&v&&!g)return s.t("current channel, has notifications, private, starred");if(!u&&!d&&p&&f&&!m&&!h&&v&&!g)return s.t("has notifications, private, starred");if(u&&d&&!p&&f&&!m&&!h&&v&&!g)return s.t("current channel, has unread messages, private, starred");if(!u&&d&&!p&&f&&!m&&!h&&v&&!g)return s.t("has unread messages, private, starred");if(u&&!d&&!p&&f&&!m&&!h&&v&&!g)return s.t("current channel, private, starred");if(!u&&!d&&!p&&f&&!m&&!h&&v&&!g)return s.t("private, starred");if(u&&d&&p&&!f&&!m&&!h&&v&&!g)return s.t("current channel, has unread messages and notifications, starred");if(!u&&d&&p&&!f&&!m&&!h&&v&&!g)return s.t("has unread messages and notifications, starred");if(u&&!d&&p&&!f&&!m&&!h&&v&&!g)return s.t("current channel, has notifications, starred");if(!u&&!d&&p&&!f&&!m&&!h&&v&&!g)return s.t("has notifications, starred");if(u&&d&&!p&&!f&&!m&&!h&&v&&!g)return s.t("current channel, has unread messages, starred");if(!u&&d&&!p&&!f&&!m&&!h&&v&&!g)return s.t("has unread messages, starred");if(u&&!d&&!p&&!f&&!m&&!h&&v&&!g)return s.t("current channel, starred");if(!u&&!d&&!p&&!f&&!m&&!h&&v&&!g)return s.t("starred");if(u&&d&&p&&f&&m&&h&&!v&&!g)return s.t("current channel, has unread messages and notifications, private, not a member, muted");if(!u&&d&&p&&f&&m&&h&&!v&&!g)return s.t("has unread messages and notifications, private, not a member, muted");if(u&&!d&&p&&f&&m&&h&&!v&&!g)return s.t("current channel, has notifications, private, not a member, muted");if(!u&&!d&&p&&f&&m&&h&&!v&&!g)return s.t("has notifications, private, not a member, muted");if(u&&d&&!p&&f&&m&&h&&!v&&!g)return s.t("current channel, has unread messages, private, not a member, muted");if(!u&&d&&!p&&f&&m&&h&&!v&&!g)return s.t("has unread messages, private, not a member, muted");if(u&&!d&&!p&&f&&m&&h&&!v&&!g)return s.t("current channel, private, not a member, muted");if(!u&&!d&&!p&&f&&m&&h&&!v&&!g)return s.t("private, not a member, muted");if(u&&d&&p&&!f&&m&&h&&!v&&!g)return s.t("current channel, has unread messages and notifications, not a member, muted");if(!u&&d&&p&&!f&&m&&h&&!v&&!g)return s.t("has unread messages and notifications, not a member, muted");if(u&&!d&&p&&!f&&m&&h&&!v&&!g)return s.t("current channel, has notifications, not a member, muted");if(!u&&!d&&p&&!f&&m&&h&&!v&&!g)return s.t("has notifications, not a member, muted");if(u&&d&&!p&&!f&&m&&h&&!v&&!g)return s.t("current channel, has unread messages, not a member, muted");if(!u&&d&&!p&&!f&&m&&h&&!v&&!g)return s.t("has unread messages, not a member, muted");if(u&&!d&&!p&&!f&&m&&h&&!v&&!g)return s.t("current channel, not a member, muted");if(!u&&!d&&!p&&!f&&m&&h&&!v&&!g)return s.t("not a member, muted");if(u&&d&&p&&f&&!m&&h&&!v&&!g)return s.t("current channel, has unread messages and notifications, private, muted");if(!u&&d&&p&&f&&!m&&h&&!v&&!g)return s.t("has unread messages and notifications, private, muted");if(u&&!d&&p&&f&&!m&&h&&!v&&!g)return s.t("current channel, has notifications, private, muted");if(!u&&!d&&p&&f&&!m&&h&&!v&&!g)return s.t("has notifications, private, muted");if(u&&d&&!p&&f&&!m&&h&&!v&&!g)return s.t("current channel, has unread messages, private, muted");if(!u&&d&&!p&&f&&!m&&h&&!v&&!g)return s.t("has unread messages, private, muted");if(u&&!d&&!p&&f&&!m&&h&&!v&&!g)return s.t("current channel, private, muted");if(!u&&!d&&!p&&f&&!m&&h&&!v&&!g)return s.t("private, muted");if(u&&d&&p&&!f&&!m&&h&&!v&&!g)return s.t("current channel, has unread messages and notifications, muted");if(!u&&d&&p&&!f&&!m&&h&&!v&&!g)return s.t("has unread messages and notifications, muted");if(u&&!d&&p&&!f&&!m&&h&&!v&&!g)return s.t("current channel, has notifications, muted");if(!u&&!d&&p&&!f&&!m&&h&&!v&&!g)return s.t("has notifications, muted");if(u&&d&&!p&&!f&&!m&&h&&!v&&!g)return s.t("current channel, has unread messages, muted");if(!u&&d&&!p&&!f&&!m&&h&&!v&&!g)return s.t("has unread messages, muted");if(u&&!d&&!p&&!f&&!m&&h&&!v&&!g)return s.t("current channel, muted");if(!u&&!d&&!p&&!f&&!m&&h&&!v&&!g)return s.t("muted");if(u&&d&&p&&f&&m&&!h&&!v&&!g)return s.t("current channel, has unread messages and notifications, private, not a member");if(!u&&d&&p&&f&&m&&!h&&!v&&!g)return s.t("has unread messages and notifications, private, not a member");if(u&&!d&&p&&f&&m&&!h&&!v&&!g)return s.t("current channel, has notifications, private, not a member");if(!u&&!d&&p&&f&&m&&!h&&!v&&!g)return s.t("has notifications, private, not a member");if(u&&d&&!p&&f&&m&&!h&&!v&&!g)return s.t("current channel, has unread messages, private, not a member");if(!u&&d&&!p&&f&&m&&!h&&!v&&!g)return s.t("has unread messages, private, not a member");if(u&&!d&&!p&&f&&m&&!h&&!v&&!g)return s.t("current channel, private, not a member");if(!u&&!d&&!p&&f&&m&&!h&&!v&&!g)return s.t("private, not a member");if(u&&d&&p&&!f&&m&&!h&&!v&&!g)return s.t("current channel, has unread messages and notifications, not a member");if(!u&&d&&p&&!f&&m&&!h&&!v&&!g)return s.t("has unread messages and notifications, not a member");if(u&&!d&&p&&!f&&m&&!h&&!v&&!g)return s.t("current channel, has notifications, not a member");if(!u&&!d&&p&&!f&&m&&!h&&!v&&!g)return s.t("has notifications, not a member");if(u&&d&&!p&&!f&&m&&!h&&!v&&!g)return s.t("current channel, has unread messages, not a member");if(!u&&d&&!p&&!f&&m&&!h&&!v&&!g)return s.t("has unread messages, not a member");if(u&&!d&&!p&&!f&&m&&!h&&!v&&!g)return s.t("current channel, not a member");if(!u&&!d&&!p&&!f&&m&&!h&&!v&&!g)return s.t("not a member");if(u&&d&&p&&f&&!m&&!h&&!v&&!g)return s.t("current channel, has unread messages and notifications, private");if(!u&&d&&p&&f&&!m&&!h&&!v&&!g)return s.t("has unread messages and notifications, private");if(u&&!d&&p&&f&&!m&&!h&&!v&&!g)return s.t("current channel, has notifications, private");if(!u&&!d&&p&&f&&!m&&!h&&!v&&!g)return s.t("has notifications, private");if(u&&d&&!p&&f&&!m&&!h&&!v&&!g)return s.t("current channel, has unread messages, private");if(!u&&d&&!p&&f&&!m&&!h&&!v&&!g)return s.t("has unread messages, private");if(u&&!d&&!p&&f&&!m&&!h&&!v&&!g)return s.t("current channel, private");if(!u&&!d&&!p&&f&&!m&&!h&&!v&&!g)return s.t("private");if(u&&d&&p&&!f&&!m&&!h&&!v&&!g)return s.t("current channel, has unread messages and notifications");if(!u&&d&&p&&!f&&!m&&!h&&!v&&!g)return s.t("has unread messages and notifications");if(u&&!d&&p&&!f&&!m&&!h&&!v&&!g)return s.t("current channel, has notifications");if(!u&&!d&&p&&!f&&!m&&!h&&!v&&!g)return s.t("has notifications");if(u&&d&&!p&&!f&&!m&&!h&&!v&&!g)return s.t("current channel, has unread messages");if(!u&&d&&!p&&!f&&!m&&!h&&!v&&!g)return s.t("has unread messages");if(u&&!d&&!p&&!f&&!m&&!h&&!v&&!g)return s.t("current channel");return""}();if(a&&!_&&!y)return s.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:a});if(!a&&!_&&y)return s.t("{channelName} ({context})",{channelName:t,context:y});if(a&&!_&&y)return s.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:a,context:y});if(!a&&_&&!y)return s.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_});if(a&&_&&!y)return s.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_,previousChannelName:a});if(!a&&_&&y)return s.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,context:y});if(a&&_&&y)return s.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,previousChannelName:a,context:y});if(t)return t;return""}var c=a(976);var u=new r["b"]("a11y");function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isGuest,n=e.isSelf,r=e.isAppOrBot,i=e.isDeleted,o=e.isPrescenceAway,s=e.isPrescenceDND,l=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,f=e.hasNotifications,m=e.isStarred,h=e.isMuted,v=e.hasDraft,g=e.featureLabelsForCoreObjects;if(!g)return null;var b=function(){if(i)return u.t("deactivated");if(r)return u.t("APP");if(a&&!o&&s)return u.t("guest, do not disturb");if(a&&o&&!s)return u.t("guest, away");if(a&&!o&&!s)return u.t("guest");if(n&&!o&&s)return u.t("you, do not disturb");if(n&&!o&&!s)return u.t("you");if(!a&&!o&&s)return u.t("do not disturb");if(!a&&o&&!s)return u.t("away");return""}();var _=l&&Object(c["a"])(l);var y=function(){if(_&&!d)return u.t("{statusEmoji} emoji",{statusEmoji:_});if(_&&d)return u.t("{statusEmoji} emoji {statusText}",{statusEmoji:_,statusText:d});if(!_&&d)return d;return""}();var k=function(){if(p&&f&&h&&m&&v)return u.t("current conversation, has notifications, muted, starred, has a draft message");if(!p&&f&&h&&m&&v)return u.t("has notifications, muted, starred, has a draft message");if(p&&!f&&h&&m&&v)return u.t("current conversation, muted, starred, has a draft message");if(!p&&!f&&h&&m&&v)return u.t("muted, starred, has a draft message");if(p&&f&&!h&&m&&v)return u.t("current conversation, has notifications, starred, has a draft message");if(!p&&f&&!h&&m&&v)return u.t("has notifications, starred, has a draft message");if(p&&!f&&!h&&m&&v)return u.t("current conversation, starred, has a draft message");if(!p&&!f&&!h&&m&&v)return u.t("starred, has a draft message");if(p&&f&&h&&!m&&v)return u.t("current conversation, has notifications, muted, has a draft message");if(!p&&f&&h&&!m&&v)return u.t("has notifications, muted, has a draft message");if(p&&!f&&h&&!m&&v)return u.t("current conversation, muted, has a draft message");if(!p&&!f&&h&&!m&&v)return u.t("muted, has a draft message");if(p&&f&&!h&&!m&&v)return u.t("current conversation, has notifications, has a draft message");if(!p&&f&&!h&&!m&&v)return u.t("has notifications, has a draft message");if(p&&!f&&!h&&!m&&v)return u.t("current conversation, has a draft message");if(!p&&!f&&!h&&!m&&v)return u.t("has a draft message");if(p&&f&&h&&m&&!v)return u.t("current conversation, has notifications, muted, starred");if(!p&&f&&h&&m&&!v)return u.t("has notifications, muted, starred");if(p&&!f&&h&&m&&!v)return u.t("current conversation, muted, starred");if(!p&&!f&&h&&m&&!v)return u.t("muted, starred");if(p&&f&&!h&&m&&!v)return u.t("current conversation, has notifications, starred");if(!p&&f&&!h&&m&&!v)return u.t("has notifications, starred");if(p&&!f&&!h&&m&&!v)return u.t("current conversation, starred");if(!p&&!f&&!h&&m&&!v)return u.t("starred");if(p&&f&&h&&!m&&!v)return u.t("current conversation, has notifications, muted");if(!p&&f&&h&&!m&&!v)return u.t("has notifications, muted");if(p&&!f&&h&&!m&&!v)return u.t("current conversation, muted");if(!p&&!f&&h&&!m&&!v)return u.t("muted");if(p&&f&&!h&&!m&&!v)return u.t("current conversation, has notifications");if(!p&&f&&!h&&!m&&!v)return u.t("has notifications");if(p&&!f&&!h&&!m&&!v)return u.t("current conversation");return""}();if(t&&b&&y&&k)return u.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:b,status:y,context:k});if(t&&!b&&y&&k)return u.t("{name}, status: {status} ({context})",{name:t,status:y,context:k});if(t&&b&&!y&&k)return u.t("{name} ({userInfo}) ({context})",{name:t,userInfo:b,context:k});if(t&&!b&&!y&&k)return u.t("{name} ({context})",{name:t,context:k});if(t&&b&&y&&!k)return u.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:b,status:y});if(t&&!b&&y&&!k)return u.t("{name}, status: {status}",{name:t,status:y});if(t&&b&&!y&&!k)return u.t("{name} ({userInfo})",{name:t,userInfo:b});if(t)return t;return""}var p=a(75);var f=a(1441);Object(n["a"])("interop.a11y",{makeAriaLabelForMPIM:o,makeAriaLabelForChannel:l,makeAriaLabelForMember:d,isScreenReaderEnabled:p["isScreenReaderEnabled"],focusableSectionManager:f["b"]})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(2);var g=a(0);var b=a.n(g);var _=a(15);var y=a.n(_);var k=a(65);var O=a(41);var w=a(10);var E=a(18);var C=a(39);var j=a(310);var S=a(70);var I=a(2237);var T=new w["b"]("notification_bar");var N={offline:b.a.bool,typingNames:b.a.array,snippetCallback:b.a.func,inputText:b.a.string};var A={offline:null,typingNames:null,snippetCallback:v["noop"],inputText:""};var R=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getTooLongCount",value:function e(){return Math.max(0,this.props.inputText.length-S["MAX_MESSAGE_INPUT_LENGTH"])}},{key:"renderLeft",value:function e(){if(this.props.offline){var t=this.props.inputText?T.t("Slack is trying to connect, so messages can\u2019t be sent yet."):T.t("Slack is trying to connect.");return r.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},t," ",r.a.createElement(E["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(this.props.typingNames&&this.props.typingNames.length>0){var a=T.t("several people are typing");1===this.props.typingNames.length?a=T.rt("<b>{name}</b> is typing",{name:this.props.typingNames[0]}):2===this.props.typingNames.length&&(a=T.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:this.props.typingNames[0],other_name:this.props.typingNames[1]}));return r.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},a)}return null}},{key:"renderRight",value:function e(){var t=this;var a=this.getTooLongCount();if(!this.props.offline&&a>0){var n=T.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:a});var i=T.t("Make a snippet instead?");var o=T.t("A snippet is a text file that can be much longer than a normal message.");return r.a.createElement("div",null,r.a.createElement("span",null,n," "),r.a.createElement(O["d"],{tip:o},r.a.createElement("span",null,r.a.createElement(k["a"],{tabIndex:"5",onClick:this.props.snippetCallback},i))))}var s=function(){if(t.props.offline)return"";if(C["c"])return T.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>");return T.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return r.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},s)}},{key:"render",value:function e(){var t=this.getTooLongCount();var a=this.props.inputText.length>2;var n=y()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":!this.props.offline&&(a||t>0)});return r.a.createElement("div",{className:"p-notification_bar"},r.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),r.a.createElement("div",{className:n},this.renderRight()))}}]);return t}(n["PureComponent"]);R.displayName="NotificationBar";R.defaultProps=A;var M=function e(t,a){var n=a.inputText;return{inputText:Object(j["a"])(t,n)}};var x=Object(i["connect"])(M)(R);var P=x;var D=function e(t,a,n){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var l=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:l},r.a.createElement(P,n)),a)};var F={mountNotificationBar:D};var L=a(51);Object(L["a"])("interop.mountNotificationBar",D)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(2);var p=a(1);var f=a.n(p);var m=a(0);var h=a(14);var v=a(15);var g=a.n(v);var b=a(11);var _=a(19);var y=a(50);var k=a(12);var O=a(48);var w=a(10);var E=a(2228);var C=new w["b"]("files");var j=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={spriteLoaded:false};return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=new Image;this.spritePromise=new Promise(function(e){a.onload=function(){e()};a.src=cdn_url+"/be529/img/dragdrop_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,a=t.featureFileThreads,n=t.teamName,r=t.channelName,i=t.isImOrMpim,o=t.useNightIllustration;var s=this.state.spriteLoaded;if(!a)return null;var l=false;if(Object(d["isBoolean"])(o))l=o;else{var c=new Date;var u=c.getHours();l=u>=20||u<8}var p=g()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!l});var m="";m=i?C.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:r}):C.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:r});var h="";s&&(h=f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),f.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),f.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),f.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"})));return f.a.createElement("div",{className:p},f.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},f.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},h),f.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},C.rt("Upload to {teamName}",{teamName:n})),f.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},m)))}}]);return t}(p["PureComponent"]);j.displayName="MessagePaneDragOverlay";j.defaultProps={featureFileThreads:true,teamName:"",channelName:"",isImOrMpim:false,useNightIllustration:void 0};function S(e,t){var a=t.channelId;var n=Object(_["getChannelById"])(e,a);var r=Object(y["getCurrentTeam"])(e);return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads"),channelName:Object(k["getDisplayNameForChannel"])(e,n,{imIncludeAtSign:false}),teamName:Object(O["getTeamDisplayName"])(r),isImOrMpim:Object(k["isIm"])(n)||Object(k["isMpim"])(n)}}var I=Object(h["connect"])(S)(j);var T=t["a"]=I},,,,,function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(104);var l=a.n(s);var c=a(14);var u=a(2);var d=a.n(u);var p=a(139);var f=a(33);var m=a(5);var h=a.n(m);var v=a(6);var g=a.n(v);var b=a(7);var _=a.n(b);var y=a(8);var k=a.n(y);var O=a(0);var w=a.n(O);var E=a(62);var C=a(164);var j=a(17);var S=a(128);var I=a(679);var T=a(50);var N=a(48);var A=a(10);var R=a(408);var M=a(1392);var x=a(1381);var P=a(1328);var D=a(2168);var F=new A["b"]("admin");var L={onClose:w.a.func.isRequired,isEnterprise:w.a.bool.isRequired,fetchNewPage:w.a.func.isRequired,loadIDPGroups:w.a.func.isRequired,clogger:w.a.object.isRequired};var B={onClose:d.a.noop,isEnterprise:false,fetchNewPage:d.a.noop,loadIDPGroups:d.a.noop};var U=function(e){k()(t,e);function t(){h()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isEnterprise,n=t.clogger;var r="admin_manage_members_modal_load";Object(E["e"])(r+"_mark");var i=[this.props.fetchNewPage()];a&&i.push(this.props.loadIDPGroups());var o=Object(j["b"])();Promise.all(i).then(function(){var e=Object(E["g"])(r,r+"_mark");var t={contexts:{perf:{elapsed_time:e}}};o.warn("\u23f2\ufe0f Admin Manage Member modal load time: "+e+"ms");n.track("ADMIN_MODAL_MANAGE_MEMBERS_TIME_TO_USABLE",t)}).catch(function(e){o.error("Failed to load data for table",e)})}},{key:"render",value:function e(){var t=this.props.onClose;return o.a.createElement(R["a"],{showCancelButton:false,showGoButton:false,onCancel:t,modalBodyClasses:"p-admin_member_modal__body",fullBleedModalBodyContent:true,title:F.t("Manage members")},o.a.createElement(x["a"],null),o.a.createElement(M["a"],null))}}]);return t}(i["Component"]);U.displayName="AdminMemberModal";U.defaultProps=B;var q=function e(t){return{isEnterprise:Object(N["isEnterpriseTeam"])(Object(T["getCurrentTeam"])(t)),clogger:Object(C["a"])({state:t})}};var G=function e(t){return{fetchNewPage:function e(){return t(Object(S["fetchNewPage"])())},loadIDPGroups:function e(){return t(Object(I["loadIDPGroups"])())}}};var H=Object(c["connect"])(q,G)(U);var W=function e(t,a){var n=document.getElementById("admin_member_modal_mount_point");if(!t)throw new Error("mountAdminMemberModal must be called with a teamId parameter");var i=Object(f["d"])(t);var s=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(n)})};Object(p["a"])(o.a.createElement(c["Provider"],{store:i},o.a.createElement(H,r()({},a,{onClose:s}))),n)};var V=function e(t){l.a.unmountComponentAtNode(t)};var z={mountAdminMemberModal:W,unmountAdminMemberModal:V};var Q=a(51);Object(Q["a"])("interop.mountAdminMemberModal",W);Object(Q["a"])("interop.unmountAdminMemberModal",V)},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a(10);var y=a(20);var k=a(1414);var O=new _["b"]("prefs");var w=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.onClose,i=t.onReset;return r.a.createElement("div",null,r.a.createElement(k["a"],{channelId:a,onClose:n}),r.a.createElement("div",{className:"p-channel_notification_settings_embedded_actions"},r.a.createElement(y["a"],{onClick:i,type:"link"},O.rt("Reset to your default notification settings")),r.a.createElement(y["a"],{onClick:n},O.rt("Done"))))}}]);return t}(n["PureComponent"]);w.displayName="ChannelNotificationSettingsEmbedded";var E=w;function C(e,t,a){if(!e)throw new Error("mountChannelNotificationSettings must be called with a teamId parameter");Object(l["a"])(r.a.createElement(s["Provider"],{store:Object(c["d"])(e)},r.a.createElement(E,a)),t)}function j(e){o.a.unmountComponentAtNode(e)}var S=a(51);Object(S["a"])("interop.mountChannelNotificationSettings",C);Object(S["a"])("interop.unmountChannelNotificationSettings",j)},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(2);var k=a(159);var O=a(140);var w=a(88);var E=a(799);var C=a(227);var j=a(10);var S=new j["b"]("enterprise_moving_channels");var I=/\r?\n|\r/g;var T={onInputChange:_.a.func,onCheckboxChange:_.a.func,customMessageError:_.a.string,featureDeleteMovedChannels:_.a.bool.isRequired};var N={onInputChange:y["noop"],onCheckboxChange:y["noop"],customMessageError:null};var A=300;var R=void 0;var M=function e(t){return R[t]};var x=function e(t){t&&t.length>A?Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError())};var P=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={includeCustomMessage:false,customMessage:""};a.onInputChange=a.onInputChange.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.onCheckboxChange=a.onCheckboxChange.bind(a);a.props.featureDeleteMovedChannels&&(R={message_too_long:S.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:A}),message_empty:S.t("Please fill in a custom message.")});return a}f()(t,[{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"onInputChange",value:function e(t){var a=t.replace(I," ");this.setCustomMessage(a);this.props.onInputChange(a);x(a)}},{key:"onCheckboxChange",value:function e(t){t.persist();var a=t.target.checked;this.setIncludeCustomMessage(a);this.props.onCheckboxChange(a);a?x(this.state.customMessage):Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError())}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"renderCheckbox",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;var a=S.t("Add a custom message to channel members");var n=S.t("This message will appear within the Slackbot notification that each member will receive.");return r.a.createElement("div",null,r.a.createElement(w["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:a,subtext:n,type:"inline"},r.a.createElement(C["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange,"data-qa":"mvch_message_checkbox"})))}},{key:"renderCustomMessageTextarea",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.customMessage;var a=this.props.customMessageError;var n=S.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return r.a.createElement("div",{className:"margin_left_150"},r.a.createElement(E["a"],{id:"ent_mvch_custom_message","data-qa":"ent_mvch_custom_message_input",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:n,maxCharacterLimit:A,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:M(a)||a,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;return r.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(n["PureComponent"]);P.displayName="MoveChannelsCustomMessage";P.defaultProps=N;var D=Object(k["a"])("feature_delete_moved_channels")(P);var F=D;Object(c["a"])("interop.moveChannelsCustomMessage",{render:function e(t,a,n){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(F,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var n={};a.r(n);a.d(n,"hydrateStartData",function(){return S});a.d(n,"getStartData",function(){return N});var r=a(3);var i=a.n(r);var o=a(57);var s=a(2);var l=a.n(s);var c=a(31);var u=a(0);var d=a(12);var p=a(423);var f=a(22);var m=a(25);var h=Object(f["a"])("Fetch legacy start data",function(e){return e(Object(m["b"])({method:"client.boot",args:{flannel_api_ver:4}}))});var v=a(13);var g=Object(v["c"])("TS.ensureFullyBooted",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var b=a(241);var _=a(135);var y=a(257);var k=a(102);var O=a(17);var w=a(26);var E=a(19);var C=a(11);var j=a(890);var S=Object(c["b"])("Hydrate start data by fetching any required objects",function(){var e=Object(o["method"])(function(e,t,a){var n=a.startData;var r=Object(O["a"])({getState:t});var o=t();var s=i()({},n.rtm_start);var c=l.a.get(n,"self",l.a.get(s,"self"));var u=l.a.get(c,"id");var p=s.channels||n.channels;var f=s.channels_latest||n.my_channels;if(p&&f){var m=s.last_read,h=void 0===m?{}:m,v=s.channels_priority,g=void 0===v?{}:v,b=s.is_open,_=void 0===b?[]:b,y=s.starred,S=void 0===y?[]:y;var N=_.reduce(function(e,t){e[t]=true;return e},{});var A=S.reduce(function(e,t){e[t]=true;return e},{});var R=[];var M=[];var x=p.length;for(var P=0;P<x;P++){var D=p[P];var F=D.id;var L=f[F];var B=!!L;var U=h[F];var q=g[F];var G=!!A[F];var H=!!N[F];var W=Object(d["isMpim"])(D)?i()({},D,{is_member:B,latest:L,last_read:U,priority:q,is_starred:G,is_open:H}):i()({},D,{is_member:B,latest:L,last_read:U,priority:q,is_starred:G});(D.is_group?R:M).push(W)}s.groups=R;s.channels=M}delete s.users;delete s.updated_users;delete s.updated_bots;s.bots=[];if(Object(C["isFeatureEnabled"])(o,"feature_legacy_cfm")){s.users=[c];return Promise.resolve(s)}var V=void 0;var z=Object(C["getFromBootData"])(o,"file");if(z){var Q=l.a.map(z.comments||[],"user");V=Q.concat(z.user)}var K=void 0;var Y=void 0;if(!Object(j["a"])()){K=l.a.map(Object(w["getAllMembers"])(o),"id");Y=l.a.map(Object(E["getAllChannels"])(o),"id")}var J=l()([u]).concat(V).concat(K).uniq().compact().value();var Z=l.a.difference(Y,l.a.keys(f));if(!J.length&&!Z.length){Object(k["d"])(123)&&r.info("Got rtm.start data and don't need to fetch anything");s.users=[];return Promise.resolve(s)}Object(k["d"])(123)&&r.info("Got rtm.start data but need to fetch "+J.length+" members and "+Z.length+" channels");if(Object(k["d"])(1989)){r.info(J.join(", "));r.info(Z.join(", "))}I(e,t,J).catch(function(e){r.error("Got error while trying to fetch "+J.length+" members for runaway start data :(",e);r.info("Members we were trying to fetch: "+J.join(", "))});T(e,t,Z).catch(function(e){r.error("Got error while trying to fetch "+Z.length+" channels for runaway start data :(",e);r.info("Channels we were trying to fetch: "+Z.join(", "))});s.users=[c];return Promise.resolve(s)});return function(t,a,n){return e.apply(this,arguments)}}());S.propTypes={startData:u["PropTypes"].object.isRequired};function I(e,t,a){return e(Object(p["d"])({ids:a})).catch(function(t){Object(k["a"])("infra/boot/data: Got error from fetchMembersById; falling back to version with API fallback. Error: "+t+". Stack: "+t.stack);var n="infra/boot/data: fetchMembersById failed";return e(Object(y["g"])({ids:a,reason:n})).then(function(e){var t=e.members;return{objects:t}})}).tap(function(){return g()}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.objects;return Object(b["i"])(t)})}function T(e,t,a){return e(Object(p["b"])({ids:a})).catch(function(t){Object(k["a"])("infra/boot/data: Got error from fetchChannelsById; falling back to version with API fallback. Error: "+t+". Stack: "+t.stack);var n="infra/boot/data: fetchChannelsById failed";return e(Object(_["k"])({ids:a,reason:n})).then(function(e){var t=e.channels;return{objects:t}})}).tap(function(){return g()}).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.objects;return e(Object(E["upsertChannels"])({channels:a}))})}var N=Object(c["b"])("Fetch start data",function(){var e=Object(o["method"])(function(e){return e(h()).then(function(t){return e(S({startData:{rtm_start:t}}))})});return function(t){return e.apply(this,arguments)}}());N.propTypes={};var A=a(51);Object(A["a"])("interop.boot",{data:n})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(77);var l=a(31);var c=a(5);var u=a.n(c);var d=a(6);var p=a.n(d);var f=a(7);var m=a.n(f);var h=a(8);var v=a.n(h);var g=a(14);var b=a(2);var _=a(11);var y=a(10);var k=a(760);var O=a(20);var w=a(103);var E=a(151);var C=a(1414);var j=new y["b"]("prefs");var S=function(e){v()(t,e);function t(e){u()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.closeAndOpenPreferences=a.closeAndOpenPreferences.bind(a);return a}p()(t,[{key:"closeAndOpenPreferences",value:function e(){this.props.onClose();Object(k["a"])("notifications")}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.channelId,i=a.onClose,o=a.featureTurnMpdmNotifsOn;if(!o)return null;var s=r.a.createElement(E["a"],{channelId:n,inline:true});var l=r.a.createElement("span",null,j.rt("Notification Preferences: {displayName}",{displayName:s}));var c=r.a.createElement("span",null,j.rt("Set your default notifications settings in your <Button>Account Preferences</Button>",null,function(e){var a=e.text;return r.a.createElement(O["a"],{type:"link",onClick:t.closeAndOpenPreferences},a)}));var u={title:l,contentLabel:j.t("Notification Preferences"),showCancelButton:false,goButtonText:j.t("Done"),onGo:i,onCancel:i,footerText:c};return r.a.createElement(w["a"],u,r.a.createElement(C["a"],{channelId:n,onClose:i}))}}]);return t}(n["PureComponent"]);S.displayName="ChannelNotificationSettingsDialog";S.defaultProps={onClose:b["noop"],featureTurnMpdmNotifsOn:false};function I(e){return{featureTurnMpdmNotifsOn:Object(_["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var T=Object(g["connect"])(I)(S);var N=Object(l["b"])("Open channel notification settings dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=r.a.createElement(T,a);e(Object(s["openModal"])({element:n}))});N.propTypes={channelId:o.a.string.isRequired};var A=N;var R=a(51);Object(R["a"])("interop.openChannelNotificationSettingsDialog",function(e){return TS.redux.dispatch(A(e))})},function(e,t,a){"use strict";a.r(t);var n=window.navigator&&"function"===typeof window.navigator.sendBeacon;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,a=e.method,r=e.token,i=e.args,o=void 0===i?{}:i,s=e.versionTs,l=void 0===s?"":s,c=e.versionUid,u=void 0===c?"":c;var d=false;var p=""+t+a+"?_x_id="+u.substring(0,8)+"-"+Date.now()/1e3;var f=new FormData;f.append("token",r);Object.keys(o).forEach(function(e){return f.append(e,o[e])});if(n)d=navigator.sendBeacon(p,f);else{var m=new XMLHttpRequest;m.addEventListener("load",function(){var e=m.readyState,t=m.status,a=m.DONE;e===a&&200===t&&(d=true)});m.open("POST",p,true);m.setRequestHeader("X-Slack-Version-Ts",l);m.send(f)}return d}var i=a(51);Object(i["a"])("interop.beaconApiCall",r)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(901);var d=function e(t,a){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var n=Object(c["d"])(t);Object(l["a"])(r.a.createElement(s["Provider"],{store:n},r.a.createElement(u["a"],null)),a)};var p=function e(t){o.a.unmountComponentAtNode(t)};var f={mountModalContainer:d,unmountModalContainer:p};var m=a(51);Object(m["a"])("interop.modalContainer",{mountModalContainer:d,unmountModalContainer:p})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(17);var i=Object(r["b"])();function o(){i.info("Greetings Earth!")}function s(){i.info("\ud83d\udc7d")}Object(n["a"])("interop.greetingsEarth",{greet:o,takeMeToYourLeader:s})},function(e,t,a){"use strict";a.r(t);var n=a(67);var r=a.n(n);var i=a(2);var o=a(26);var s=a(704);var l=a(2802);var c=a(3344);var u=a(619);var d=a(23);var p=a(21);var f=a(11);var m=a(79);var h=a(257);var v=a(16);var g=a(313);var b=a(245);var _=a(326);function y(e,t){var a=Object(_["e"])(e);var n=Object(_["e"])(t);return Object(b["a"])(a,n)}var k=a(51);function O(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var n=Object(o["getMemberById"])(a,t);if(!n)return null;if(n.isUnknown)return null;if(n.isNonExistent)return null;return n}function w(e){return Object(i["isString"])(e)?O(e):e}function E(e){return Object(s["b"])(TS.redux.getState(),e)}function C(e){return TS.redux.dispatch(Object(h["a"])(e))}function j(e){return TS.redux.dispatch(Object(h["d"])(e))}function S(e){return TS.redux.dispatch(Object(h["c"])(e))}function I(e){return TS.redux.dispatch(Object(c["a"])(e))}function T(e){return TS.redux.dispatch(Object(l["a"])(e))}function N(e){var t=TS.redux.getState();var a=Object(d["getTeamId"])(t);Object(u["b"])(a,e)}function A(e){var t=TS.redux.getState();var a=Object(d["getTeamId"])(t);return Object(u["a"])(a,e)}function R(){return Object(u["d"])()}function M(e){var t=TS.redux.getState();var a=Object(i["uniq"])(e);var n=Object(i["partition"])(a,function(e){return Object(o["hasMemberWithId"])(t,e)}),s=r()(n,2),l=s[0],c=s[1];var u=l.map(function(e){return Object(o["getMemberById"])(t,e)});var d=Object(f["isLegacyCallsApp"])(t)&&!Object(m["isConnecting"])(t);if(d||!Object(g["g"])(t))return TS.redux.dispatch(Object(h["b"])({ids:c,reason:"ensureMembersArePresent isEarlyCallsBoot"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved;return u.concat(t)});return TS.redux.dispatch(Object(h["a"])({ids:c,reason:"ensureMembersArePresent"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved;return u.concat(t)})}Object(k["a"])("interop.members",{getMemberById:O,shouldDisplayRealNames:function e(){return Object(p["shouldDisplayRealNames"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(p["getUserHighlightWords"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return v["getPrefCompliantMemberName"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return v["getPrefCompliantMemberNameById"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameLowerCase:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return v["getPrefCompliantMemberNameLowerCase"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByName:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return o["getMemberByName"].apply(void 0,[TS.redux.getState()].concat(a))},memberExistsWithName:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return o["memberExistsWithName"].apply(void 0,[TS.redux.getState()].concat(a))},isAppmin:function e(){return Object(o["isAppmin"])(TS.redux.getState())},isExternal:v["isExternal"],isExternalById:function e(t){return Object(v["isExternalById"])(TS.redux.getState(),t)},isMemberOnTeam:v["isMemberOnTeam"],fetchMemberProfileExtras:function e(t,a){return TS.redux.dispatch(Object(h["e"])({userId:t,keys:a}))},memberSorterByName:y,getMemberCurrentStatus:o["getMemberCustomStatus"],getMemberMentionName:v["getMemberMentionName"],getMemberMentionRegExp:v["getMemberMentionRegExp"],getMemberRealName:function e(t){return Object(v["getMemberRealName"])(w(t))},getMemberRealNameLowerCase:function e(t){return Object(v["getMemberRealNameLowerCase"])(w(t))},getMemberProfileFieldDisplayName:function e(t){return Object(v["getMemberProfileFieldDisplayName"])(w(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(v["getMemberProfileFieldDisplayNameLowerCase"])(w(t))},getMemberSecondaryName:function e(t){return Object(v["getMemberSecondaryName"])(TS.redux.getState(),w(t))},ensureMembersArePresent:M,processMemberForUpserting:E,fetchAndUpsertMembersById:C,fetchAndUpsertMembersWithQuery:j,fetchAndUpsertMembersFromFlannel:S,markObjectsAsFresh:N,isObjectFresh:A,pauseRefetch:R,updateCurrentMemberPresence:T,updateCurrentMemberProfile:I})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(62);var d=a(759);var p=function e(t,a,n){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i="react_custom_status_input_render";Object(u["e"])(i+"_mark");Object(l["a"])(r.a.createElement(s["Provider"],{store:Object(c["d"])(t)},r.a.createElement(d["c"],n)),a,function(){return Object(u["g"])(i,i+"_mark")})};var f=o.a.unmountComponentAtNode;var m=a(51);Object(m["a"])("interop.mountCustomStatusInput",p);Object(m["a"])("interop.unmountCustomStatusInput",f)},function(e,t,a){"use strict";a.r(t);var n=a(2);var r=a(164);var i=a(17);var o=a(2781);var s=Object(i["b"])();function l(){return new Promise(function(e){Object(o["a"])("experiments.getByVisitor",{},function(t,a){t&&a.assignments&&m(a.assignments);e(t)})})}function c(e){if(void 0===e){s.warn("fetchLeadAssignments requires a leadId");return Promise.resolve(false)}return new Promise(function(t){Object(o["a"])("experiments.getByLead",{lead_id:e},function(e,a){e&&a.assignments&&m(a.assignments);t(e)})})}function u(e){if(void 0===e){s.warn("fetchUserAssignments requires a token");return Promise.resolve(false)}return new Promise(function(t){Object(o["a"])("experiments.getByUser",{token:e},function(e,a){e&&a.assignments&&m(a.assignments);t(e)})})}var d={};var p={};function f(e){var t=d[e];if(!t)return null;t.log_exposures&&h(e,t);return t.group}function m(e){Object(n["forEach"])(e,function(e,t){Object(n["isEqual"])(p[t],e)||(p[t]=null);d[t]=e})}function h(e,t){if(!Object(n["isEqual"])(p[e],t)){Object(r["a"])().track("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});p[e]=t}}var v=a(51);Object(v["a"])("interop.experiments_unauthed",{fetchLeadAssignments:c,fetchVisitorAssignments:l,fetchUserAssignments:u,getGroup:f})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(1419);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var n=Object(c["d"])(e);Object(l["a"])(r.a.createElement(s["Provider"],{store:n},r.a.createElement(u["a"],a)),t)}function p(e){o.a.unmountComponentAtNode(e)}var f=a(51);Object(f["a"])("interop.mountFileUploadBanner",d);Object(f["a"])("interop.unmountFileUploadBanner",p)},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(104);var s=a.n(o);var l=a(139);var c=a(33);var u=a(1394);var d=function e(t,a,n){if(!t)throw new Error("mountToast must be called with a teamId parameter");var o=Object(c["d"])(t);Object(l["a"])(r.a.createElement(i["Provider"],{store:o},r.a.createElement(u["a"],n)),a)};var p=function e(t){s.a.unmountComponentAtNode(t)};var f={mountTermsOfService:d,unmountTermsOfService:p};var m=a(51);Object(m["a"])("interop.mountTermsOfService",d);Object(m["a"])("interop.unmountTermsOfService",p)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(14);var v=a(2);var g=a.n(v);var b=a(78);var _=a(26);var y=a(150);var k=a(16);var O=a(352);var w=a(72);var E=a(265);var C=a(369);var j=a(1119);var S={file:w["a"].File(["name","permalink"]).isRequired,followup:p.a.bool,userId:p.a.string,userName:p.a.string,previewFile:p.a.func};var I={followup:false,userId:null,userName:null,previewFile:v["noop"]};var T=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.previewFile=a.previewFile.bind(a);a.onUserClick=a.onUserClick.bind(a);return a}o()(t,[{key:"onUserClick",value:function e(t){if(Object(O["a"])(t))return;t.preventDefault();Object(C["a"])(t,this.props.file.user)}},{key:"previewFile",value:function e(t){if(Object(O["a"])(t))return;t.preventDefault();this.props.previewFile({fileId:this.props.file.id})}},{key:"renderUserLink",value:function e(){var t=this.props,a=t.userId,n=t.userName;return m.a.createElement("a",{className:"c-message__file_meta_user member",href:"/team/"+a,"data-member-id":a,onClick:this.onUserClick},n)}},{key:"renderFileLink",value:function e(){var t=this.props.file;return m.a.createElement("a",{className:"c-message__file_link file_preview_link",href:t.permalink,"data-file-id":t.id,onClick:this.previewFile},m.a.createElement(E["c"],{file:t}))}},{key:"render",value:function e(){var t=this.props,a=t.file,n=t.followup,r=t.userId,i=t.userName;var o=Object(j["a"])({plainText:false,isFollowup:n,fileMode:a.mode,fileLink:this.renderFileLink(),userId:r,userName:i,userLink:this.renderUserLink()});return m.a.createElement("span",{className:"c-message__file_meta"},o)}}]);return t}(f["PureComponent"]);T.displayName="FileCommentMeta";T.defaultProps=I;var N=function e(t,a){var n=a.fileId,r=a.comment;if(!n||!r)return{};var i=Object(b["getFileById"])(t,n);if(!i)return{};if(i.user===r.user)return{file:i};var o=i.user;var s=Object(_["getMemberById"])(t,o);return{file:i,userId:o,userName:Object(k["getPrefCompliantMemberName"])(t,s)}};t["a"]=Object(h["connect"])(N,{previewFile:y["c"]})(T)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(1393);function c(e,t,a){if(!e)throw new Error("mountPricingCalculator must be called with a teamId parameter");var n=Object(s["d"])(e);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(l["a"],a)),t)}var u=a(51);Object(u["a"])("interop.mountPricingCalculator",c)},function(e,t,a){"use strict";a.r(t);var n=a(9);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(0);var l=a.n(s);var c=a(2);var u=a(77);var d=a(31);var p=a(29);var f=a(164);var m=a(26);var h=a(16);var v=a(375);var g=a(11);var b=a(1146);var _="APP_CHANNEL_REMOVE_DIALOG";var y=Object(d["b"])("Removes app from channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.appUser,i=a.appUserId,s=a.channelId,l=a.onError,d=void 0===l?c["noop"]:l,y=a.onConfirm,k=a.referringEventId,O=a.referringUiContext,w=a.sendEphemeralErrorMessage,E=void 0!==w&&w;var C=k;var j=O;var S=t();var I=Object(g["isFeatureEnabled"])(S,"feature_wta_add_remove_m11n");var T=I?Object(m["getMemberById"])(S,i):n;var N=Object(f["a"])({state:S});var A=function e(t){var a,n;var i=r()({},p["n"].action,t);N.track(_,r()({contexts:(n={},r()(n,p["b"].ui_context,i),r()(n,p["b"].referring_ui_context,j),r()(n,p["b"].core,(a={},r()(a,p["c"].app_id,Object(h["getAppIdFromMember"])(T)),r()(a,p["c"].channel_id,s),a)),n)},p["b"].referring_event_id,C));C=_;j=i};var R={appName:Object(h["getMemberRealName"])(T),channelId:s,onConfirm:function t(){A(p["m"].OK);return I?e(Object(v["h"])({appUserId:i,channelId:s,sendEphemeralErrorMessage:E})).catch(d):y()},onCancel:function e(){A(p["m"].CLOSE)}};var M=o.a.createElement(b["a"],R);e(Object(u["openModal"])({element:M}));A(p["m"].IMPRESSION)});y.propTypes={appUserId:l.a.string,appUser:l.a.object,channelId:l.a.string.isRequired,onConfirm:l.a.func,onError:l.a.func,referringEventId:l.a.string,referringUiContext:l.a.object,sendEphemeralErrorMessage:l.a.bool};var k=y;var O=a(51);Object(O["a"])("interop.removeAppFromChannel",function(e){return TS.redux.dispatch(k(e))})},function(e,t,a){"use strict";a.r(t);var n=a(32);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(104);var l=a.n(s);var c=a(14);var u=a(139);var d=a(33);var p=a(742);var f=function e(t,a,n){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["d"])(t);var s=n.safeHtml,l=r()(n,["safeHtml"]);Object(u["a"])(o.a.createElement(c["Provider"],{store:i},o.a.createElement(p["b"],l,o.a.createElement("div",{dangerouslySetInnerHTML:{__html:s}}))),a)};var m=function e(t){l.a.unmountComponentAtNode(t)};var h={mountScrollbar:f,unmountScrollbar:m};var v=a(51);Object(v["a"])("interop.mountScrollbar",f);Object(v["a"])("interop.unmountScrollbar",m)},function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(2);var o=a(31);var s=a(813);var l=a(653);var c=a(25);var u=a(22);var d=Object(u["a"])("Fetch a list of Slash Commands",function(e){return e(Object(c["a"])({method:"commands.list",SET_ACTIVE:false})).then(function(e){return e&&{commands:e.commands,cacheTs:e.cache_ts}})});var p=Object(o["b"])("Load local and remote Slash commands into Redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.resetPreviousCommands,r=void 0!==n&&n;e(Object(l["bulkAddLocalCommands"])({commands:Object(s["a"])()}));e(d()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.commands;if(r){e(Object(l["resetCommands"])());e(Object(l["bulkAddLocalCommands"])({commands:Object(s["a"])()}));e(Object(l["bulkAddServerCommands"])({commands:Object(i["values"])(a)}))}else e(Object(l["bulkAddServerCommands"])({commands:Object(i["values"])(a)}))})});p.propTypes={resetPreviousCommands:r.a.bool};var f=t["a"]=p},function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(31);var l=a(704);var c=a(225);var u=a(11);var d=a(257);var p=a(107);var f=a(17);var m=a(326);var h=Object(s["b"])("Updates the profile of the currently authenticated user",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.profile;return e(Object(d["j"])({profile:n})).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.profile;if(Object(u["isFeatureEnabled"])(t(),"feature_degraded_send")){var i=Object(c["b"])(t());var o=r()({},i,{profile:n});Object(p["a"])()?e(Object(l["a"])({members:[o]})):Object(m["f"])(o)}}).catch(function(e){var a=Object(f["a"])({getState:t});a.error("Error submitting member profile change: "+e)})});h.propTypes={profile:o.a.object.isRequired};t["a"]=h},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(661);var c=function e(t,a,n){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var c=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:c},r.a.createElement(l["a"],n)),a)};var u=c;var d=a(51);Object(d["a"])("interop.mountLazyFilterSelect",u)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(1436);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var n=Object(c["d"])(e);Object(l["a"])(r.a.createElement(s["Provider"],{store:n},r.a.createElement(u["a"],a)),t)}function p(e){o.a.unmountComponentAtNode(e)}var f=a(51);Object(f["a"])("interop.mountThreadDragOverlay",d);Object(f["a"])("interop.unmountThreadDragOverlay",p)},function(e,t,a){"use strict";a.r(t);var n=a(2);var r=a.n(n);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(r.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}var o=a(3491);var s=a(51);Object(s["a"])("interop.searcher",{isNewMemberSearch:i,emojiSkiplist:o["a"]})},function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(104);var l=a.n(s);var c=a(14);var u=a(139);var d=a(33);var p=a(62);var f=a(188);var m=a(54);var h=function e(t,a,n,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var s=function e(){return a};var l="react_menu_render";Object(p["e"])(l+"_mark");Object(u["a"])(o.a.createElement(c["Provider"],{store:Object(d["d"])(t)},o.a.createElement(f["a"],r()({},i,{parentSelector:s,shouldFade:false}),o.a.createElement(m["a"],n))),a,function(){return Object(p["g"])(l,l+"_mark")})};var v=l.a.unmountComponentAtNode;var g={mountMenu:h,unmountMenu:v};var b=a(51);Object(b["a"])("interop.mountMenu",h);Object(b["a"])("interop.unmountMenu",v)},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(1);var i=a.n(r);var o=a(14);var s=a(139);var l=a(33);var c=a(427);var u=a(188);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(s["a"])(i.a.createElement(o["Provider"],{store:Object(l["d"])(e)},i.a.createElement(u["a"],n,n.isOpen?i.a.createElement(c["a"],a):i.a.createElement("span",null))),t)}var p=d;var f=a(70);Object(n["a"])("interop.mountMessageActionsMenu",p);Object(n["a"])("interop.mountMessageActionsMenu.actionIds",f["SLACK_ACTION_IDS"])},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(817);var d=a(358);var p=function e(t,a,n,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var o=Object(c["d"])(t);n?Object(l["a"])(r.a.createElement(s["Provider"],{store:o},r.a.createElement(u["a"],i,r.a.createElement(d["a"],{id:n,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),a):Object(l["a"])(r.a.createElement(s["Provider"],{store:o},r.a.createElement(u["a"],i)),a)};var f=function e(t){o.a.unmountComponentAtNode(t)};var m={mountTooltipTip:p,unmountTooltipTip:f};var h=a(51);Object(h["a"])("interop.mountTooltipTip",p);Object(h["a"])("interop.unmountTooltipTip",f)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(104);var s=a.n(o);var l=a(139);var c=a(33);var u=a(1396);var d=function e(t,a){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var n=Object(c["d"])(t);Object(l["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(u["f"],null)),a)};var p=function e(t){s.a.unmountComponentAtNode(t)};var f=a(51);Object(f["a"])("interop.mountUserGroupsFlexpane",d);Object(f["a"])("interop.unmountUserGroupsFlexpane",p)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(104);var s=a.n(o);var l=a(139);var c=a(33);var u=a(3274);var d=function e(t,a,n){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var o=Object(c["d"])(t);Object(l["a"])(r.a.createElement(i["Provider"],{store:o},r.a.createElement(u["a"],n)),a)};var p=function e(t){s.a.unmountComponentAtNode(t)};var f=a(51);Object(f["a"])("interop.mountUserGroupsList",d);Object(f["a"])("interop.unmountUserGroupsList",p)},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(707);var i=a(802);var o=a(856);var s=a(857);var l=a(2);var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.prefix,n=e.suffix;if(!t)return t;var r=t;if(a&&!Object(l["startsWith"])(r,a)){var i=r.search(/\S/);r=i>0?r.slice(0,i)+a+r.slice(i):a+r}if(n&&!Object(l["endsWith"])(r,n)){var o=r.search(/\s+$/);o>0?r=r.slice(0,o)+n+r.slice(o):r+=n}return r};var u=a(937);var d=a(310);Object(n["a"])("interop.format",{formatBroadcastCommand:r["a"],formatChannelName:i["a"],formatTeamName:o["a"],locateHighlightWords:s["a"],surroundTextWith:c,replaceUnicodeDoppelgangers:u["a"],cleanMessageTextWithState:d["a"]})},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(1391);var d=function e(t,a){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(l["a"])(r.a.createElement(s["Provider"],{store:Object(c["d"])(t)},r.a.createElement(u["a"],null)),a)};var p=function e(t){o.a.unmountComponentAtNode(t)};var f=a(51);Object(f["a"])("interop.mountMessagePaneBanner",d);Object(f["a"])("interop.unmountMessagePaneBanner",p)},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(21);var i=a(2);var o=a(937);var s=/[,\uff0c\u3001]/;function l(e){if(!Object(i["isString"])(e))return"";return Object(o["a"])(e).split(s).map(i["trim"]).filter(i["identity"]).join(",")}var c=a(240);Object(n["a"])("interop.prefs",{getHighlightWords:function e(){var t=TS.redux.getState();return Object(r["getUserHighlightWords"])(t)},cleanHighlightWords:l,setUserPrefByApi:c["c"],getUserPref:r["getUserPref"]})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return s});a.d(t,"b",function(){return l});a.d(t,"c",function(){return c});var n=a(206);var r=a(69);var i=a(77);var o=a(37);var s={MESSAGE_PANE:"message_pane",WINDOW_NOT_FOCUSED:"window_not_focused",WORKSPACE_NOT_FOCUSED:"workspace_not_focused",MODAL:"fs_modal_is_showing",SEARCH:"universal_search_is_showing"};function l(e){if(!Object(r["isWorkspaceFocused"])(e))return s.WORKSPACE_NOT_FOCUSED;if(!Object(n["isWindowFocused"])(e))return s.WINDOW_NOT_FOCUSED;if(Object(i["isModalOpen"])(e))return s.MODAL;if(Object(o["getVisible"])(e))return s.SEARCH;return s.MESSAGE_PANE}function c(e){return l(e)===s.MESSAGE_PANE}},function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(2);var o=a.n(i);var s=a(31);var l=a(375);var c=a(1128);var u=a(72);var d="APP_CHANNEL_ADD_DIALOG";var p=Object(s["b"])("Adds app to channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.appUserId,r=a.channelId,o=a.inviteMessageTs,s=a.onError,u=void 0===s?i["noop"]:s,p=a.referringEventId,f=a.referringUiContext,m=a.scopeInfo,h=a.sendEphemeralErrorMessage,v=void 0!==h&&h;var g=m?Promise.resolve(m):e(Object(l["a"])({appUserId:n,channelId:r,didConfirm:false,sendEphemeralErrorMessage:v}));g.then(function(t){e(Object(c["a"])({appUserId:n,channelId:r,eventId:d,onAuthorize:function t(){return e(Object(l["a"])({appUserId:n,channelId:r,didConfirm:true,inviteMessageTs:o,sendEphemeralErrorMessage:v})).catch(u)},onDismiss:function t(){return e(Object(l["b"])({appUserId:n,channelId:r,inviteMessageTs:o}))},referringEventId:p,referringUiContext:f,scopeInfo:t}))})});p.propTypes={appUserId:r.a.string.isRequired,channelId:r.a.string.isRequired,inviteMessageTs:r.a.string,onError:r.a.func,referringEventId:r.a.string,referringUiContext:r.a.object,scopeInfo:r.a.arrayOf(u["a"].ScopeInfo),sendEphemeralErrorMessage:r.a.bool};t["a"]=p},function(e,t,a){"use strict";a.r(t);var n=a(3407);var r=a(51);Object(r["a"])("interop.addAppToChannel",function(e){return TS.redux.dispatch(Object(n["a"])(e))})},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(2);var k=a(11);var O=a(10);var w=a(167);var E=a(3303);var C=a(715);var j=a(18);var S=a(344);var I=a(54);var T=a(20);var N=a(2086);var A=a(673);var R=a(884);var M=a(358);var x=a(3410);var P=new O["b"]("member_directory");var D={memberIds:_.a.arrayOf(_.a.string),scrollmark:_.a.shape({key:_.a.string,offset:_.a.number}),searchQuery:_.a.string,filter:_.a.string,fetchMembersPost:_.a.func,saveScrollmark:_.a.func,nonExactMatchMemberIds:_.a.arrayOf(_.a.string),isEnterprise:_.a.bool,featureSonicMemberDirectory:_.a.bool};var F={memberIds:[],scrollmark:void 0,searchQuery:void 0,filter:"everyone",fetchMembersPost:y["noop"],saveScrollmark:y["noop"],onMemberClick:y["noop"],nonExactMatchMemberIds:[],isEnterprise:false,featureSonicMemberDirectory:false};var L=100;var B=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["bindAll"])(a,["onMemberClick","onScroll","setListRef","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys"]);a.requestPost=null;a.requestNonExactMatchMembers=null;a.keys=null;a.list=null;a.layout=new R["a"];a.state={reachedEnd:false};a.debouncedFetchPost=Object(y["debounce"])(a.fetchPost,L);return a}f()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,n=t.offset;this.layout.setAnchor(a,n);this.props.saveScrollmark(null)}},{key:"componentDidUpdate",value:function e(t){var a=this.props,n=a.searchQuery,r=a.filter;if(t.searchQuery===n&&t.filter===r)return;this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel();this.requestPost=null;this.requestNonExactMatchMembers=null;this.state.reachedEnd&&this.setReachedEnd(false);this.layout&&this.layout.setAnchor(false)}},{key:"onMemberClick",value:function e(t,a){if(!this.list)return;if(!a)return;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setReachedEnd",value:function e(t){this.setState(function(){return{reachedEnd:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"getListKeys",value:function e(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getFilterLabel",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,a=t.filter,n=t.isEnterprise;switch(a){case"everyone":return P.t("members");case"admins":return n?P.t("workspace admins"):P.t("admins");case"bots":return P.t("bots");case"org_members":return P.t("members");case"org_admins":return P.t("org admins");case"guests":return P.t("guests");case"deactivated":return P.t("deactivated members");default:return P.t("members")}}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.fetchMembers();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"fetchMembers",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:a}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.nextMarker,n=e.members;!t.props.searchQuery&&a||t.setReachedEnd(true);0===n.length&&"everyone"!==t.props.filter&&t.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function e(){var t=this;if(this.requestNonExactMatchMembers)return false;var a=true;this.requestNonExactMatchMembers=this.fetchMembers(a);return this.requestNonExactMatchMembers.finally(function(){t.requestNonExactMatchMembers=null})}},{key:"renderRow",value:function e(t){if(!this.props.featureSonicMemberDirectory)return null;var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return r.a.createElement("div",{className:"p-member-directory__loading"},P.t("Loading\u2026"));default:return this.renderMember(a)}}},{key:"renderMember",value:function e(t){return r.a.createElement("span",{className:"p-member_directory__member_row"},r.a.createElement(M["a"],{id:t,size:"medium"}))}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,a=t.searchQuery,n=t.nonExactMatchMemberIds;var i=this.getFilterLabel();var o=void 0;if(n.length){o=P.rt("No {filterLabel} matching <strong>{searchQuery}</strong> but there are other members who do",{searchQuery:a,filterLabel:i});return r.a.createElement("div",{className:"p-member-directory__empty_list"},r.a.createElement("span",null,o))}o=P.rt("No {filterLabel} matching <strong>{searchQuery}</strong>",{searchQuery:a,filterLabel:i});return r.a.createElement("div",{className:"p-member-directory__empty_list"},r.a.createElement("span",null,o))}},{key:"render",value:function e(){var t=this;this.keys=this.getListKeys();if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);return r.a.createElement("div",{className:"p-member_directory__member_list"},r.a.createElement(N["a"],null,function(e){var a=e.width,n=e.height;return r.a.createElement(A["a"],{width:a,height:n,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.debouncedFetchPost})}))}}]);return t}(n["PureComponent"]);B.displayName="SearchableMemberList";B.defaultProps=F;var U=Object(s["connect"])(function(e){return{scrollmark:Object(E["getScrollmark"])(e),searchQuery:Object(E["getSearchQuery"])(e),filter:Object(E["getFilter"])(e),memberIds:Object(E["getFlexpaneMemberIds"])(e),nonExactMatchMemberIds:Object(E["getFlexpaneNonExactMatchMemberIds"])(e),isEnterprise:Object(k["pageNeedsEnterprise"])(e),featureSonicMemberDirectory:Object(k["isFeatureEnabled"])(e,"feature_sonic_member_directory")}},{fetchMembersPost:E["fetchMembersPost"],saveScrollmark:E["saveScrollmark"],setSearchQuery:E["setSearchQuery"],setFilter:E["setFilter"]})(B);var q=a(24);var G=a.n(q);var H=a(50);var W=a(170);var V=a(48);var z=a(2218);var Q=new O["b"]("member_directory");var K={featureSonicMemberDirectory:_.a.bool,isEnterprise:_.a.bool,selectedFilter:_.a.string,onMenuItemSelected:_.a.func,workspaceName:_.a.string,enterpriseOrgName:_.a.string,externalWorkspaces:_.a.array};var Y={featureSonicMemberDirectory:false,isEnterprise:false,selectedFilter:void 0,onMenuItemSelected:y["noop"],workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[]};var J={everyone:"everyone",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};var Z=function(e){g()(t,e);f()(t,null,[{key:"menuSeparator",value:function e(){return{type:"separator"}}}]);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.memberDirectoryStrings=a.props.featureSonicMemberDirectory?{everyone:Q.t("Everyone"),org_members:Q.t("All Members"),org_admins:Q.t("Org Admins"),members:Q.t("All Members"),admins:a.props.isEnterprise?Q.t("Workspace Admins"):Q.t("Admins"),bots:Q.t("Bots"),guests:Q.t("Guests"),deactivated:Q.t("Deactivated accounts")}:null;return a}f()(t,[{key:"getLabel",value:function e(t){return this.memberDirectoryStrings[t]}},{key:"getWorkspaceSectionLabel",value:function e(){var t=this.props,a=t.isEnterprise,n=t.externalWorkspaces,r=t.workspaceName,i=t.featureSonicMemberDirectory;if(!i)return null;var o=n.length>0;if(a)return Q.t("{workspaceName} (current workspace)",{workspaceName:r});return o?r:""}},{key:"buildMenuItemTemplate",value:function e(t){var a=this.props,n=a.selectedFilter,i=a.onMenuItemSelected;var o=r.a.createElement(j["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var s="p-member_directory_menu--selected-item";return{label:this.getLabel(t),click:function e(){return i(t)},icon:n===t?o:null,className:n===t?s:""}}},{key:"maybeBuildOrgFilterSection",value:function e(){var a=this.props,n=a.isEnterprise,r=a.enterpriseOrgName;if(!n)return[];var i={type:"header",label:r};return[t.menuSeparator(),i,this.buildMenuItemTemplate(J.orgMembers),this.buildMenuItemTemplate(J.orgAdmins)]}},{key:"buildWorkspaceFilterSection",value:function e(){var a=this.getWorkspaceSectionLabel();var n={type:"header",label:a};return[t.menuSeparator(),n,this.buildMenuItemTemplate(J.workspaceMembers),this.buildMenuItemTemplate(J.workspaceAdmins),this.buildMenuItemTemplate(J.guests),this.buildMenuItemTemplate(J.bots)]}},{key:"maybeBuildExternalWorkspaceSection",value:function e(){var a=this.props,n=a.workspaceName,i=a.externalWorkspaces,o=a.selectedFilter,s=a.onMenuItemSelected,l=a.featureSonicMemberDirectory;if(!l)return null;var c=i.length>0;var u=r.a.createElement(j["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var d="p-member_directory_menu--selected-item";if(!c)return[];var p=Q.t("Outside {workspaceName}",{workspaceName:n});var f={type:"header",label:p};var m=i.map(function(e){var t=Object(V["getTeamId"])(e);return{label:Object(V["getTeamDisplayName"])(e),click:function e(){return s(t)},icon:o===t?u:null,className:o===t?d:""}});return[t.menuSeparator(),f].concat(G()(m))}},{key:"render",value:function e(){var a=this.props.featureSonicMemberDirectory;if(!a)return null;var n=[this.buildMenuItemTemplate(J.everyone)].concat(G()(this.maybeBuildOrgFilterSection()),G()(this.buildWorkspaceFilterSection()),G()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(J.deactivatedMembers)]);return r.a.createElement(I["a"],{template:n})}}]);return t}(n["PureComponent"]);Z.displayName="MemberDirectoryMenu";var X=function e(t){var a=Object(H["getCurrentTeam"])(t);var n=Object(k["pageNeedsEnterprise"])(t);var r={featureSonicMemberDirectory:Object(k["isFeatureEnabled"])(t,"feature_sonic_member_directory"),workspaceName:Object(V["getTeamDisplayName"])(a),isEnterprise:n,externalWorkspaces:Object(H["getAllExternalTeams"])(t)};n&&(r.enterpriseOrgName=Object(W["getEnterpriseOrgName"])(t));return r};Z.defaultProps=Y;var $=Object(s["connect"])(X)(Z);var ee=a(2216);var te=new O["b"]("member_directory");var ae={useGlobalNav:_.a.bool,isEnterprise:_.a.bool,setSearchQuery:_.a.func,searchQuery:_.a.string,setFilter:_.a.func,filter:_.a.string,featureSonicMemberDirectory:_.a.bool};var ne={useGlobalNav:false,isEnterprise:false,setSearchQuery:y["noop"],setFilter:y["noop"],searchQuery:"",filter:"everyone",featureSonicMemberDirectory:false};var re=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["bindAll"])(a,["onSearchInputChange","onMenuItemSelected","renderMenu"]);return a}f()(t,[{key:"onSearchInputChange",value:function e(t){var a=t.target.value||"";this.props.setSearchQuery(a)}},{key:"onMenuItemSelected",value:function e(t){this.props.setFilter(t)}},{key:"getHeaderLabel",value:function e(){var t=this.props,a=t.featureSonicMemberDirectory,n=t.isEnterprise;if(!a)return null;return n?te.t("Organization Directory"):te.t("Workspace Directory")}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;return r.a.createElement("div",{className:"p-member_directory__search"},r.a.createElement(S["a"],{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:te.t("Search by name or title"),icon:"search"}))}},{key:"renderHeader",value:function e(){if(this.props.useGlobalNav)return null;return r.a.createElement(C["a"],null,r.a.createElement("span",{className:"p-member_directory__header"},this.getHeaderLabel()))}},{key:"renderMenu",value:function e(){return r.a.createElement($,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter})}},{key:"renderFilterIconButton",value:function e(){return r.a.createElement(I["e"],{renderMenu:this.renderMenu,position:"bottom-left"},r.a.createElement(T["c"],{"data-qa":"p-member_directory_menu_trigger"},r.a.createElement(j["b"],{type:"filters"})))}},{key:"render",value:function e(){return r.a.createElement(r.a.Fragment,null,this.renderHeader(),r.a.createElement("div",{className:"p-member_directory__search_filter_container"},this.renderSearch(),this.renderFilterIconButton()),r.a.createElement(U,null))}}]);return t}(n["PureComponent"]);re.displayName="MemberDirectoryFlexpane";re.defaultProps=ne;var ie=function e(t){return{featureSonicMemberDirectory:Object(k["isFeatureEnabled"])(t,"feature_sonic_member_directory"),useGlobalNav:Object(w["b"])(t),isEnterprise:Object(k["pageNeedsEnterprise"])(t),searchQuery:Object(E["getSearchQuery"])(t),filter:Object(E["getFilter"])(t)}};var oe={setSearchQuery:E["setSearchQuery"],setFilter:E["setFilter"]};var se=Object(s["connect"])(ie,oe)(re);var le=se;var ce=function e(t,a){if(!t)throw new Error("mountMemberDirectoryFlexpane must be called with a teamId parameter");var n=Object(c["d"])(t);Object(l["a"])(r.a.createElement(s["Provider"],{store:n},r.a.createElement(le,null)),a)};var ue=function e(t){o.a.unmountComponentAtNode(t)};var de=a(51);Object(de["a"])("interop.mountMemberDirectoryFlexpane",ce);Object(de["a"])("interop.unmountMemberDirectoryFlexpane",ue)},,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(1);var r=a.n(n);var i=a(14);var o=a(44);var s=function e(t,a){var n=a.ts,r=a.channelId;return{msg:Object(o["getMessageByTimestamp"])(t,r,n)}};function l(e){return Object(i["connect"])(s)(function(t){if(!t.msg)return null;return r.a.createElement(e,t)})}},,,,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(104);var s=a.n(o);var l=a(139);var c=a(33);var u=a(5);var d=a.n(u);var p=a(6);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(8);var g=a.n(v);var b=a(0);var _=a.n(b);var y=a(2);var k=a(11);var O=a(715);var w=a(10);var E=new w["b"]("starred_items");var C={featureModernStarredItems:_.a.bool.isRequired};var j={featureModernStarredItems:false};var S=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){if(!this.props.featureModernStarredItems)return null;return r.a.createElement(O["a"],null,E.t("Starred Items"))}}]);return t}(n["PureComponent"]);S.displayName="StarredItemsFlexpaneHeader";S.defaultProps=j;var I=function e(t){var a=Object(k["isFeatureEnabled"])(t,"feature_modern_starred_items");return{featureModernStarredItems:a}};var T=Object(i["connect"])(I)(S);var N=a(3);var A=a.n(N);var R=a(2086);var M=a(611);var x=a(673);var P=a(92);var D=a(3417);var F=a(15);var L=a.n(F);var B=a(860);var U=a(861);var q=a(862);var G=a(863);var H=a(36);var W=a(87);var V=a(3339);var z=a(3409);var Q={msg:_.a.object.isRequired};function K(e){var t=e.msg;var a=t.file,n=t.files,i=t.comment,o=t.user;var s=a||n&&n[0];if(!Object(H["isFileComment"])(t))return null;if(!s||!i)return null;return r.a.createElement("span",{className:"c-message_kit__comment"},r.a.createElement(V["a"],{fileId:s,comment:i}),r.a.createElement("br",null),r.a.createElement(W["a"],{text:i.comment,memberId:o}))}K.displayName="MessageFileComment";var Y=a(1107);var J=a(145);var Z=a(322);var X=a(323);var $=a(776);var ee=a(2249);var te={msg:_.a.object.isRequired,reactions:_.a.arrayOf(_.a.shape($["b"])),className:_.a.string};var ae={className:null,reactions:null};var ne=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"getReactions",value:function e(){var t=this.props,a=t.msg,n=t.reactions;if(!n)return a.reactions;return n}},{key:"render",value:function e(){var t=this.getReactions();if(!t||0===t.length)return null;var a=Object(y["chain"])(t).sortBy("count").take(2).value();var n=Object(y["sumBy"])(t,"count");var i=null;n>0&&(i=r.a.createElement("span",{className:"c-message_kit__reaction_condensed__reactions_count"},1===n?n+" reaction":n+" reactions"));var o=L()(this.props.className,"c-message_kit__reaction_condensed c-message_kit__reaction_condensed--reactions");return r.a.createElement("div",{className:o},Object(y["map"])(a,function(e){return r.a.createElement(J["b"],{text:":"+e.name+":",key:e.name,emojiSize:J["a"].SMALL})}),i)}}]);return t}(r.a.PureComponent);ne.displayName="CondensedReactionBar";ne.defaultProps=ae;var re=function e(t,a){var n=a.msg;if(!n)return null;var r=Object(X["b"])(n);return{reactions:Object(Z["getReactionsForKey"])(t,r)}};var ie=Object(i["connect"])(re)(ne);var oe=a(18);var se=a(121);var le=a(150);var ce=a(2251);var ue={className:_.a.string,msg:_.a.shape({reply_count:_.a.number,replies:_.a.array}),showThread:_.a.func.isRequired};var de={className:"",msg:{replies:[],reply_count:0}};var pe=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}f()(t,[{key:"onClick",value:function e(){var t=this.props.msg;var a=t.channel,n=t.ts;this.props.showThread({channelId:a,threadTs:n,origin:"starred_items"})}},{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.className;var i=L()(n,"c-message_kit__replies_count");if(Object(H["getReplyCount"])(a))return r.a.createElement(se["a"],{className:i,onClick:this.onClick},r.a.createElement(oe["b"],{type:"comment-alt"}),1===a.reply_count?a.reply_count+" reply":a.reply_count+" replies");return null}}]);return t}(n["PureComponent"]);pe.displayName="CondensedReplyCount";pe.defaultProps=de;var fe={showThread:le["g"]};var me=Object(i["connect"])(null,fe)(pe);var he=a(864);var ve=a(977);var ge=a(865);var be=a(12);var _e=a(94);var ye=a(2253);var ke={msg:_.a.object.isRequired,className:_.a.string,channelName:_.a.string.isRequired,featureModernStarredItemsFlexpane:_.a.bool.isRequired,showThread:_.a.func.isRequired};var Oe={className:null};var we=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}f()(t,[{key:"onClick",value:function e(){var t=this.props.msg;var a=t.channel,n=t.ts,r=t.thread_ts;this.props.showThread({channelId:a,threadTs:r,highlightTs:n,origin:"starred_items"})}},{key:"render",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;var t=this.props,a=t.msg,n=t.className,i=t.channelName;var o=L()("c-message_kit__inline_channel_context","bold",n);if(Object(H["isReply"])(a))return r.a.createElement(se["a"],{className:o,onClick:this.onClick},"Thread in "+i);return r.a.createElement("div",{className:o},i)}}]);return t}(r.a.PureComponent);we.displayName="InlineChannelContext";we.defaultProps=Oe;var Ee=function e(t,a){var n=Object(k["isFeatureEnabled"])(t,"feature_modern_starred_items");var r=Object(_e["f"])(t,a.msg.channel,true);var i=Object(be["getDisplayNameForChannel"])(t,r);return{channelName:i,featureModernStarredItemsFlexpane:n}};var Ce={showThread:le["g"]};var je=Object(i["connect"])(Ee,Ce)(we);var Se=a(1170);var Ie=a(1954);var Te={msg:_.a.object.isRequired,className:_.a.string};var Ne={className:void 0};var Ae=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props.msg;var a=L()("p-starred_item__message",this.props.className);return r.a.createElement(ge["a"],{className:a},r.a.createElement(ve["a"],{msg:t},r.a.createElement(Se["a"],{msg:t,position:"inside",className:"p-starred_item__message_actions",showComment:false,showShare:false,showReact:false,showJump:true,jumpOrigin:"starred_items"},r.a.createElement(he["a"],{light:r.a.createElement(B["a"],{msg:t,size:36})},r.a.createElement(U["a"],{msg:t}),"\xa0\xa0",r.a.createElement(q["a"],{msg:t,full:true}),r.a.createElement("br",null),r.a.createElement(G["a"],{msg:t,className:"c-message_kit__contextual_message"}),r.a.createElement(K,{msg:t}),r.a.createElement(Y["a"],{msg:t}),r.a.createElement(je,{msg:t}),r.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies"},r.a.createElement(ie,{msg:t}),r.a.createElement(me,{msg:t}))))))}}]);return t}(n["PureComponent"]);Ae.displayName="StarredItemMessage";Ae.defaultProps=Ne;var Re=Ae;var Me=a(78);var xe=a(1422);var Pe={file:_.a.object.isRequired,id:_.a.string.isRequired,className:_.a.string,useRowAction:_.a.bool};var De={className:void 0,useRowAction:true};var Fe=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=L()("p-starred_item__message",this.props.className);if(!this.props.file)return null;return r.a.createElement(xe["a"],{file:this.props.file,className:t,key:this.props.id,useRowAction:this.props.useRowAction,fullWidth:true})}}]);return t}(n["PureComponent"]);Fe.displayName="StarredItemFile";Fe.defaultProps=De;var Le=function e(t,a){var n=a.id;return{file:Object(Me["getFileById"])(t,n)}};var Be=Object(i["connect"])(Le)(Fe);var Ue={comment:_.a.object,fileId:_.a.string,className:_.a.string};var qe={comment:void 0,fileId:void 0,className:void 0};var Ge=function(e){g()(t,e);function t(){d()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,n=t.fileId,i=t.className;if(!a)return null;var o={user:a.user,ts:a.timestamp.toString(),subtype:"file_comment",comment:a,files:[n]};return r.a.createElement(Re,{msg:o,className:i})}}]);return t}(n["PureComponent"]);Ge.displayName="StarredItemFileComment";Ge.defaultProps=qe;var He=function e(t,a){var n=a.fileId,r=a.commentId;return{comment:Object(Me["getFileCommentById"])(t,n,r)}};var We=Object(i["connect"])(He)(Ge);var Ve=Object(D["a"])(Re);var ze={featureModernStarredItemsFlexpane:_.a.bool.isRequired,featureGlobalNav:_.a.bool.isRequired,starredItems:_.a.array.isRequired,currentPage:_.a.number.isRequired,totalPages:_.a.number.isRequired,isLoading:_.a.bool.isRequired,onLoad:_.a.func.isRequired,fetchNextPage:_.a.func.isRequired};var Qe={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Ke=new w["b"]("starred_items");var Ye=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["bindAll"])(a,["renderItem","renderMsg","renderFile","renderFileComment","renderLoadingState","fetchNextPage"]);a.state={reachedEnd:false,isInitialLoad:true,itemsAdded:false,scrollToTop:false};a.listRef=r.a.createRef();return a}f()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad()}},{key:"componentDidUpdate",value:function e(t){!this.props.isLoading&&this.state.isInitialLoad&&this.updateInitialLoadingState(false);if(this.props.starredItems.length){var a=this.props.starredItems.length>t.starredItems.length;this.updateItemsAddedState(a)}}},{key:"getStarredItemId",value:function e(t){switch(t.type){case Qe.MESSAGE:return t.channel+t.ts;case Qe.FILE:return t.id;case Qe.FILE_COMMENT:return t.id;default:return null}}},{key:"updateInitialLoadingState",value:function e(t){this.setState(function(){return{isInitialLoad:t}})}},{key:"updateItemsAddedState",value:function e(t){var a=this.listRef.current&&this.listRef.current.getVisibleRange().start;var n=t&&1===a;this.setState(function(){return{scrollToTop:n}})}},{key:"fetchNextPage",value:function e(){var t=this.props.currentPage+1;t<=this.props.totalPages&&!this.props.isLoading&&this.props.fetchNextPage(t)}},{key:"renderMsg",value:function e(t){if(!t)return null;return r.a.createElement(Ve,{channelId:t.channel,ts:t.ts,key:t.channel+t.ts,className:"p-starred_item"})}},{key:"renderFile",value:function e(t){if(!t)return null;return r.a.createElement(Be,{id:t.id,key:t.id,className:"p-starred_item"})}},{key:"renderFileComment",value:function e(t){return r.a.createElement(We,{fileId:t.fileId,commentId:t.id,key:t.id,className:"p-starred_item"})}},{key:"renderItem",value:function e(t){var a=this.props.starredItems[t];switch(a.type){case Qe.MESSAGE:return this.renderMsg(a);case Qe.FILE:return this.renderFile(a);case Qe.FILE_COMMENT:return this.renderFileComment(a);default:return null}}},{key:"renderEmptyList",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;return r.a.createElement("div",{className:"p-starred_items__empty_list"},r.a.createElement("div",{className:"p-starred_items__empty_list_header"},Ke.t("No starred items")),r.a.createElement("div",{className:"p-starred_items__empty_list_subtext"},Ke.t("Star a message or file to save it here. Mark you to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!")))}},{key:"renderLoadingState",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;return r.a.createElement("div",{className:"p-starred_items__empty_list"},r.a.createElement(P["a"],null))}},{key:"render",value:function e(){var t=this;if(!this.props.featureModernStarredItemsFlexpane)return null;var a=this.props.starredItems;var n=this.props.featureGlobalNav?0:59;this.keys=a.map(function(e){return t.getStarredItemId(e)});if(this.state.isInitialLoad)return this.renderLoadingState();if(!a.length)return this.renderEmptyList();var i=this.state.scrollToTop?this.keys[0]:void 0;return r.a.createElement(R["a"],null,function(e){var a=e.width,o=e.height;return r.a.createElement(x["a"],{width:a,height:o-n,keys:t.keys,rowRenderer:t.renderItem,itemToScroll:i,loadPre:y["noop"],loadPost:t.fetchNextPage,loadAround:t.fetchNextPage,ref:t.listRef,animateOnScroll:false})})}}]);return t}(n["PureComponent"]);Ye.displayName="StarredItemsList";var Je=function e(t){var a=Object(k["isFeatureEnabled"])(t,"feature_modern_starred_items");var n=Object(M["getAllStarredItems"])(t)||[];var r=Object(M["getCurrentPageNumber"])(t);var i=Object(M["getTotalPages"])(t);var o=Object(M["getLoadingState"])(t);var s=Object(k["isFeatureEnabled"])(t,"feature_global_nav");return{featureModernStarredItemsFlexpane:a,starredItems:n,currentPage:r,totalPages:i,isLoading:o,featureGlobalNav:s}};var Ze=function e(t){var a={exclude:"Ch,Gh,Dh",count:20};return{onLoad:function e(){return t(Object(M["fetchStarsList"])(a))},fetchNextPage:function e(n){return t(Object(M["fetchStarsList"])(A()({page:n},a)))}}};var Xe=Object(i["connect"])(Je,Ze)(Ye);var $e={featureModernStarredItemsFlexpane:_.a.bool.isRequired,featureGlobalNav:_.a.bool.isRequired};var et={};var tt=function(e){g()(t,e);function t(e){d()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["bindAll"])(a,["maybeRenderStarredItemsList"]);return a}f()(t,[{key:"maybeRenderStarredItemsList",value:function e(){return r.a.createElement(Xe,null)}},{key:"maybeRenderStarredItemsHeader",value:function e(){if(this.props.featureGlobalNav)return null;return r.a.createElement(T,null)}},{key:"render",value:function e(){if(!this.props.featureModernStarredItemsFlexpane)return null;return r.a.createElement("div",{className:"full_height"},this.maybeRenderStarredItemsHeader(),this.maybeRenderStarredItemsList())}}]);return t}(n["PureComponent"]);tt.displayName="StarredItemsFlexpane";tt.defaultProps=et;var at=function e(t){var a=Object(k["isFeatureEnabled"])(t,"feature_modern_starred_items");var n=Object(k["isFeatureEnabled"])(t,"feature_global_nav");return{featureModernStarredItemsFlexpane:a,featureGlobalNav:n}};var nt=Object(i["connect"])(at)(tt);var rt=nt;var it=function e(t,a){if(!t)throw new Error("mountStarredItemsFlexpane must be called with a teamId parameter");var n=Object(c["d"])(t);Object(l["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(rt,null)),a)};var ot=function e(t){s.a.unmountComponentAtNode(t)};var st=a(51);Object(st["a"])("interop.mountStarredItemsFlexpane",it);Object(st["a"])("interop.unmountStarredItemsFlexpane",ot)},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(19);var c=a(278);var u=a(62);var d=a(1059);var p=a(351);var f=a(2);var m=a.n(f);var h=a(13);var v=Object(h["c"])("TS.client.channel_pane.openChannelBrowser",m.a.noop);var g=Object(h["c"])("TS.client.channel_pane.openChannelBrowserToSharedChannels",m.a.noop);var b=Object(h["c"])("TS.client.channel_pane.openCreateChannelDialog",m.a.noop);var _=Object(h["c"])("TS.client.channel_pane.openDMBrowser",m.a.noop);var y=Object(h["c"])("TS.client.channel_pane.openAppsBrowser",m.a.noop);var k=Object(h["c"])("TS.ui.share_channel_dialog.start",m.a.noop);var O=a(821);var w=a(3);var E=a.n(w);var C=a(752);var j=a(729);var S=a(685);var I=a(21);var T=a(374);var N=a(480);var A=a(26);var R=a(11);var M=a(602);var x=a(69);var P=a(258);var D=a(3418);var F=a(218);var L=a(167);var B=a(3267);var U=a(269);var q=a(63);var G=a(262);var H=a(247);var W=a(3419);var V=a(50);var z=a(12);var Q=a(16);var K=a(10);var Y=["starred","sharedChannels","channels","orgWideChannels","ims","apps"];var J={starred:{channelsOrdered:[],hasHeading:true},sharedChannels:{channelsOrdered:[],hasHeading:true},channels:{channelsOrdered:[],hasHeading:true},orgWideChannels:{channelsOrdered:[],hasHeading:true},ims:{channelsOrdered:[],hasHeading:true},apps:{channelsOrdered:[],hasHeading:true}};var Z=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","teambot","you","imsMentions","ims"];var X=m.a.invert(Z);var $={default:Z.map(function(){return[]}),muted:Z.map(function(){return[]})};var ee=function e(t){var a=t.channel,n=t.members,r=t.isCurrentlySelected,i=t.isMuted,o=t.shouldHideReadChannels,s=t.shouldHideReadChannelsUnlessStarred,l=t.featureReactMessages,c=t.hasDraft;if(Object(z["isFromAnotherTeam"])(a))return false;if(Object(z["isUnknownOrNonExistent"])(a))return false;if(r)return true;if(Object(z["isArchived"])(a))return false;if(Object(z["isImAndIsMemberDeleted"])(a,n[Object(z["getMemberIdFromIm"])(a)]))return false;if(!Object(z["isMemberOfChannel"])(a))return false;if((Object(z["isIm"])(a)||Object(z["isMpim"])(a))&&!Object(z["isOpen"])(a)&&Object(z["isRead"])(a))return false;if(Object(z["isIm"])(a)&&!Object(Q["haveMembersForIds"])({members:n,dangerouslyOverrideCreateSelectorSanityCheck:true},[Object(z["getMemberIdFromIm"])(a)]))return false;if(Object(z["isMpim"])(a)&&!Object(Q["haveMembersForIds"])({members:n,dangerouslyOverrideCreateSelectorSanityCheck:true},Object(z["getMemberIdsFromMpim"])(a)))return false;if(s&&Object(z["isStarred"])(a))return true;if(c)return true;if(i&&Object(z["shouldShowWithoutUnreads"])(a)&&!l)return true;if((s||o)&&Object(z["isRead"])(a))return false;return true};var te=function e(t){var a=t.channel,n=t.isApp,r=t.isAppSpaceEnabled,i=t.shouldSeparateSharedChannels,o=t.shouldSeparateOrgWideChannels;if(Object(z["isStarred"])(a))return"starred";if(Object(z["isSharedPublicOrPrivateChannel"])(a)&&i)return"sharedChannels";if(Object(z["isOrgGlobalSharedPublicOrPrivateChannel"])(a)&&!Object(z["isPrivateChannel"])(a)&&o)return"orgWideChannels";if(n&&r)return"apps";if(Object(z["isIm"])(a)||Object(z["isMpim"])(a))return"ims";return"channels"};var ae=function e(t){var a=t.channel,n=t.currentUserId,r=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,o=t.shouldBumpMention;if(Object(z["isSlackbot"])(a))return X.slackbot;if(Object(z["isTeambot"])(a,true))return X.teambot;if(Object(z["isUserId"])(a,n))return X.you;if(Object(z["isIm"])(a)||Object(z["isMpim"])(a))return o?X.imsMentions:X.ims;if(r&&Object(z["isPrivateChannel"])(a))return o?X.privateMentions:X.private;if(i&&Object(z["isSharedPublicOrPrivateChannel"])(a))return o?X.sharedMentions:X.shared;return o?X.defaultMentions:X.default};var ne=function e(t,a){return Object(K["n"])(Object(z["getDisplayName"])(t),Object(z["getDisplayName"])(a))};var re=function e(t,a){var n=t.priority||-1;var r=a.priority||-1;if(n===r)return ne(t,a);return r-n};var ie=function e(t){var a=t.sortPref,n=t.currentTeam;if("priority"===a&&""!==n.plan)return re;return ne};var oe=function e(t){var a=t.channel,n=t.members;var r=Object(z["getMemberIdFromIm"])(a);var i=n&&n[r]||null;return Object(Q["isAppOrBot"])(i)};var se=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,n=t.currentlySelectedId,r=t.mutedChannels,i=t.members,o=t.sidebarBehaviorPref,s=t.featureReactMessages,l=t.draftChannelIds;var c="hide_read_channels"===o;var u="hide_read_channels_unless_starred"===o;var d=[];var p=false;var f=false;var m=false;var h=Object.keys(a);for(var v=0;v<h.length;v+=1){var g=a[h[v]];var b=-1!==l.indexOf(g.id);Object(q["a"])()||(b=Object(z["legacyGetHasDraft"])(g));var _=ee({channel:g,members:i,isCurrentlySelected:n===g.id,isMuted:!!r[g.id],shouldHideReadChannels:c,shouldHideReadChannelsUnlessStarred:u,featureReactMessages:s,hasDraft:b});_&&d.push(g);p||(p=Object(z["isSharedPublicOrPrivateChannel"])(g)&&(Object(z["isMemberOfChannel"])(g)||n===g.id));f||(f=Object(z["isOrgGlobalSharedPublicOrPrivateChannel"])(g)&&!Object(z["isPrivateChannel"])(g));m||(m=Object(z["isStarred"])(g))}return{channelsVisible:d,belongsToOrPreviewingAnySharedChannels:p,belongsToAnyOrgChannels:f,hasAStarredChannel:m}};var le=function e(t){return Object(I["getUserPref"])(t,"sidebar_behavior")};var ce=function e(t){return Object(I["getUserPref"])(t,"channel_sort")};var ue=function e(t){return Object(I["getUserPref"])(t,"separate_private_channels")};var de=function e(t){return Object(I["getUserPref"])(t,"separate_shared_channels")};var pe=function e(t){return Object(I["getUserPref"])(t,"ent_org_wide_channels_sidebar")};var fe=Object(G["createSelector"])([R["useReactMessages"],V["getCurrentTeam"],le,ce,ue,de,pe,l["getAllChannels"],T["getMutedChannels"],A["getAllMembers"],W["getAllDraftChannelIds"],x["getPrimaryView"],R["getCurrentUserId"],H["isAppSpaceEnabled"]],function(e,t,a,n,r,i,o,s,l,c,u,d,p,f){var h={};var v=Y.concat();v.forEach(function(e){h[e]=E()({},J[e]);h[e].channelsOrdered=m.a.cloneDeep($)});var g=se({channels:s,currentlySelectedId:d,mutedChannels:l,members:c,sidebarBehaviorPref:a,featureReactMessages:e,draftChannelIds:u}),b=g.channelsVisible,_=g.belongsToOrPreviewingAnySharedChannels;var y=ie({sortPref:n,currentTeam:t});var k=b.sort(y);var O=[];k.forEach(function(t){Object(z["isIm"])(t)&&O.push(Object(z["getMemberIdFromIm"])(t));var a=te({channel:t,isApp:oe({channel:t,members:c}),isAppSpaceEnabled:f,shouldSeparateSharedChannels:i,shouldSeparateOrgWideChannels:o});var s=!!l[t.id];var u=Object(z["getBadgeCountWithMuted"])(t,s,e);var d=u>0;var m=ae({channel:t,currentUserId:p,shouldSeparatePrivateChannels:r,shouldSeparateSharedChannels:i,shouldBumpMention:"priority"===n&&d});var v=s?"muted":"default";var g=h[a].channelsOrdered[v][m];g.push(t.id)});var w=m.a.mapValues(h,function(e){return E()({},e,{channelsOrdered:m.a.flatten(e.channelsOrdered.default.concat(e.channelsOrdered.muted))})});if(w.starred.channelsOrdered.length<1){delete w.starred;m.a.remove(v,function(e){return"starred"===e})}if(!i||!_){delete w.sharedChannels;m.a.remove(v,function(e){return"sharedChannels"===e})}if(!o||w.orgWideChannels.channelsOrdered.length<1){delete w.orgWideChannels;m.a.remove(v,function(e){return"orgWideChannels"===e})}if(!f){delete w.apps;m.a.remove(v,function(e){return"apps"===e})}return{sidebarSectionsOrdered:v,sidebarSections:w,idsNeedingPresenceSubscription:O}});var me=fe;var he=12;var ve=18;var ge=26;var be=52;var _e={id:null,type:"topPadding",height:he};var ye={id:null,type:"spacer",height:ve};var ke={id:"Vquick_switcher",type:"quickswitcherButton",height:be};var Oe={id:"Vall_unreads",type:"allUnreadsLink",height:ge};var we={id:"Vall_threads",type:"allThreadsLink",height:ge};var Ee={id:"Vsearch",type:"searchLink",height:ge};var Ce={id:null,type:"sectionHeading",name:"",height:ge};var je={id:null,type:"folderHeading",name:"",height:ge};var Se={id:null,type:"channel",index:null,height:ge};var Ie={id:null,type:"invitePeopleLink",dim:false,height:ge};var Te={id:null,type:"installAppsLink",dim:false,height:ge};var Ne={id:null,type:"emptyState",index:null,height:ge};var Ae=Object(G["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];var c=[];var u={};var d=0;e?c.push(E()({},ke,{scrollTop:d,scrollBottom:d+=ke.height})):c.push(E()({},_e,{scrollTop:d,scrollBottom:d+=_e.height}));t&&!Object(q["a"])()&&c.push(E()({},Oe,{scrollTop:d,scrollBottom:d+=Oe.height}));c.push(E()({},we,{scrollTop:d,scrollBottom:d+=we.height}));a&&c.push(E()({},Ee,{scrollTop:d,scrollBottom:d+=Ee.height}));var p=0;s&&l.forEach(function(e){"folderHeading"!==Object(f["last"])(c).type&&c.push(E()({},ye,{scrollTop:d,scrollBottom:d+=ye.height}));c.push(E()({},je,{id:e.name,name:e.name}));e.channelIds.forEach(function(t){var a=false;i.forEach(function(e){var n=o[e]||{};var r=n.channelsOrdered||[];a=a||r.filter(function(e){return e===t}).length>0});if(!a)return;if(!e.isCollapsed){c.push(E()({},Se,{id:t,index:p,scrollTop:d,scrollBottom:d+=Se.height,sectionName:e.name}));p+=1}u[t]=true})});i.forEach(function(e){var t=o[e]||{};var a=t.channelsOrdered||[];("sectionHeading"!==Object(f["last"])(c).type||a.length>0)&&c.push(E()({},ye,{scrollTop:d,scrollBottom:d+=ye.height}));t.hasHeading&&c.push(E()({},Ce,{name:e,scrollTop:d,scrollBottom:d+=Ce.height,sectionName:e}));r&&t.hasHeading&&0===a.length&&c.push(E()({},Ne,{name:e,scrollTop:d,scrollBottom:d+=Ne.height}));t.channelsOrdered.forEach(function(t){if(u[t])return;c.push(E()({},Se,{id:t,index:p,scrollTop:d,scrollBottom:d+=Se.height,sectionName:e}));p+=1});if("ims"===e&&n){c.push(E()({},ye,{scrollTop:d,scrollBottom:d+=ye.height}));c.push(E()({},Ie,{dim:"dim"===n,height:Ie.height,scrollTop:d,scrollBottom:d+=Ie.height}))}if("apps"===e){c.push(E()({},ye,{scrollTop:d,scrollBottom:d+=ye.height}));c.push(E()({},Te,{height:Te.height,scrollTop:d,scrollBottom:d+=Te.height}))}});c.push(E()({},ye,{scrollTop:d,scrollBottom:d+=ye.height}));c.push(E()({},ye,{scrollTop:d,scrollBottom:d+=ye.height}));return{rows:c,rowsMap:Object(f["keyBy"])(c,"id"),rowIds:Object(f["map"])(c,"id")}});var Re=Ae;var Me=a(5);var xe=a.n(Me);var Pe=a(6);var De=a.n(Pe);var Fe=a(7);var Le=a.n(Fe);var Be=a(8);var Ue=a.n(Be);var qe=a(0);var Ge=a.n(qe);var He=a(15);var We=a.n(He);var Ve=a(107);var ze=a(1088);var Qe=a(1084);var Ke=a(242);var Ye=a(161);var Je=a(255);var Ze=a(20);var Xe=a(177);var $e=a(3466);var et=a(2086);var tt=a(17);var at=a(656);var nt=a(742);var rt=a(451);var it=a(312);var ot=a(443);var st=a(164);var lt=a(18);var ct=a(416);var ut=a(482);var dt=a(992);var pt=a(372);var ft=a(41);var mt=a(775);var ht=a(1060);var vt=a(75);var gt={className:Ge.a.string,children:Ge.a.node.isRequired,renderWebappMenu:Ge.a.func,getTemplate:Ge.a.func.isRequired};var bt={className:"",renderWebappMenu:null};var _t=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onDesktopContextMenu=a.onDesktopContextMenu.bind(a);a.renderWebappMenu=a.renderWebappMenu.bind(a);return a}De()(t,[{key:"onDesktopContextMenu",value:function e(){var t=this;return function(){var e=t.props.getTemplate();window.desktop.contextMenu(e)}}},{key:"renderWebappMenu",value:function e(t){if(this.props.renderWebappMenu)return this.props.renderWebappMenu(t);return r.a.createElement(ht["a"],E()({},t,{template:this.props.getTemplate(),width:200}))}},{key:"render",value:function e(){var t=this;if(vt["isDesktop"]){if(window.desktop.contextMenu){var a=r.a.Children.map(this.props.children,function(e){return r.a.cloneElement(e,{onContextMenu:t.onDesktopContextMenu()})});return a[0]}return this.props.children}var n=this.props.className;return r.a.createElement(mt["a"],E()({},this.props,{useMouseCoordinatesAsTargetBounds:true,onContextMenu:this.renderWebappMenu,className:n,renderMenu:this.renderWebappMenu}),this.props.children)}}]);return t}(n["PureComponent"]);_t.displayName="ContextMenuTrigger";var yt=_t;_t.defaultProps=bt;var kt=a(1415);var Ot=a(76);var wt=a(2177);var Et={className:Ge.a.string,count:Ge.a.number.isRequired,maxCount:Ge.a.number};var Ct={className:void 0,maxCount:9};var jt=function e(t,a){return t>a?a+"+":String(t)};var St=function e(t){var a=t.className,n=t.count,i=t.maxCount;if(!n||n<0)return null;var o=We()(a,"c-mention_badge");return r.a.createElement("span",{"data-qa":"mention_badge",className:o},jt(n,i))};St.displayName="MentionBadge";St.defaultProps=Ct;var It=Object(Ot["pure"])(St);var Tt=It;var Nt="CHANNEL-SIDEBAR";var At={LOG_LABEL:Nt};var Rt=a(1416);var Mt=new K["b"]("channel_sidebar");var xt={isPendingShared:Ge.a.bool,isShared:Ge.a.bool,isOrgShared:Ge.a.bool,type:Ge.a.oneOf(["channel","private","im","mpim"]),isSlackbot:Ge.a.bool,isYou:Ge.a.bool,isMuted:Ge.a.bool,hasUnreads:Ge.a.bool,hasDraft:Ge.a.bool,isArchived:Ge.a.bool,sharedTeamIds:Ge.a.arrayOf(Ge.a.string),displayName:Ge.a.string,isSelected:Ge.a.bool,unreadCount:Ge.a.number,badgeCount:Ge.a.number,userCount:Ge.a.number,userId:Ge.a.string,userActive:Ge.a.bool,id:Ge.a.string.isRequired,priority:Ge.a.number,selectItem:Ge.a.func,closeIM:Ge.a.func,isTyping:Ge.a.bool,isStarred:Ge.a.bool,members:Ge.a.arrayOf(Ge.a.string),memberPresences:Ge.a.arrayOf(Ge.a.string),onContextMenu:Ge.a.func,featureSidebarContextMenu:Ge.a.bool.isRequired,index:Ge.a.number.isRequired,sidebarFoldersIsEnabled:Ge.a.bool,onDragStart:Ge.a.func,onDragEnd:Ge.a.func,onDrop:Ge.a.func,onDragOver:Ge.a.func,featureSonicPresenceManager:Ge.a.bool,clogger:Ge.a.object.isRequired};var Pt={isSelected:false,isPendingShared:false,isShared:false,isOrgShared:false,type:"channel",isSlackbot:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,isArchived:false,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:true,priority:null,selectItem:m.a.noop,closeIM:m.a.noop,isTyping:false,isStarred:false,members:null,memberPresences:null,onContextMenu:m.a.noop,sidebarFoldersIsEnabled:false,onDragStart:m.a.noop,onDragEnd:m.a.noop,onDrop:m.a.noop,onDragOver:m.a.noop,featureSonicPresenceManager:false,clogger:{}};var Dt=Object(tt["b"])();var Ft=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.closeIM=a.closeIM.bind(a);return a}De()(t,[{key:"onClick",value:function e(t){t.preventDefault();Dt.action(Nt,"Selected "+this.props.id);this.props.selectItem(this.props.id);this.clogClick()}},{key:"closeIM",value:function e(t){t.preventDefault();t.stopPropagation();Dt.action(Nt,"Closed "+this.props.id);this.props.closeIM({channelId:this.props.id})}},{key:"clogClick",value:function e(){var t=this.props,a=t.id,n=t.index,r=t.isMuted,i=t.isStarred,o=t.hasUnreads,s=t.isArchived,l=t.isSelected,c=t.badgeCount,u=t.clogger;u.track("SIDEBAR_ITEM_CLICK",{item_type:a[0],item_id:a,index:n,is_muted:r,is_starred:i,has_unreads:o,is_archived:s,is_selected:l,badge_count:c})}},{key:"shouldShowPresence",value:function e(){var t=this.props,a=t.type,n=t.isSlackbot,r=t.isSelected,i=t.hasDraft,o=t.isTyping,s=t.isArchived;if("im"!==a)return false;if(n)return false;if(i&&!r)return false;if(o&&!r)return false;if(s)return false;return true}},{key:"shouldShowClose",value:function e(){var t=this.props,a=t.type,n=t.hasUnreads;if("im"!==a&&"mpim"!==a)return false;if(n)return false;return true}},{key:"shouldShowExternalSharedIcon",value:function e(){var t=this.props,a=t.isShared,n=t.type;return a&&!("im"===n||"mpim"===n)}},{key:"shouldShowOrgSharedIcon",value:function e(){var t=this.props,a=t.isOrgShared,n=t.type;return a&&!("im"===n||"mpim"===n)}},{key:"buildName",value:function e(){var t=this.props.type;if("im"===t)return this.buildImName();if("mpim"===t)return this.buildMpimName();return r.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"},this.props.displayName)}},{key:"buildImName",value:function e(){var t=this.props,a=t.userId,n=t.isYou,i=t.userActive;var o=r.a.createElement(pt["a"],{id:a});var s=r.a.createElement(ut["a"],{memberId:a});var l=n&&r.a.createElement("span",{className:"p-channel_sidebar__you_label"},Mt.t("(you)"));return r.a.createElement("span",{className:We()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":!i}),"data-qa":"channel_sidebar_name"},s,o,l)}},{key:"buildMpimName",value:function e(){var t=this.props,a=t.type,n=t.members,i=t.memberPresences;if("mpim"!==a||!n||!i)return null;var o=m.a.flatMap(n,function(e,t){return[r.a.createElement(pt["a"],{id:e,key:e}),t<n.length-1?", ":null]});return r.a.createElement(ft["d"],{tip:o,position:"top-left",delay:ft["a"]},r.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"},o))}},{key:"buildAriaLabel",value:function e(){var t=this.props,a=t.type,n=t.displayName,r=t.isShared,i=t.isOrgShared,o=t.isYou,s=t.isMuted,l=t.hasUnreads,c=t.hasDraft,u=t.isArchived,d=t.unreadCount,p=t.badgeCount,f=t.isSelected,m=t.userActive,h=t.isTyping;return Object(kt["a"])({type:a,displayName:n,isShared:r,isOrgShared:i,isYou:o,isMuted:s,hasUnreads:l,hasDraft:c,isArchived:u,unreadCount:d,badgeCount:p,isSelected:f,userActive:m,isTyping:h})}},{key:"renderPresence",value:function e(t){return r.a.createElement(ct["a"],{memberId:t,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(Ve["a"])(),inline:false})}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.id,i=a.type,o=a.isPendingShared,s=a.isSlackbot,l=a.isYou,c=a.isMuted,u=a.hasUnreads,d=a.hasDraft,p=a.isArchived,f=a.badgeCount,m=a.isSelected,h=a.userCount,v=a.displayName,g=a.userId,b=a.priority,_=a.isTyping,y=a.isStarred,k=a.sharedTeamIds,O=a.onContextMenu,w=a.featureSidebarContextMenu;var C=We()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===i,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===i,"p-channel_sidebar__channel--im":"im"===i,"p-channel_sidebar__channel--im-slackbot":s,"p-channel_sidebar__channel--im-you":l,"p-channel_sidebar__channel--selected":m,"p-channel_sidebar__channel--muted":c,"p-channel_sidebar__channel--unread":u&&!p,"p-channel_sidebar__channel--draft":d&&!m,"p-channel_sidebar__channel--archived":p,"p-channel_sidebar__channel--typing":_&&!m});var j=r.a.createElement(Tt,{count:f,className:"p-channel_sidebar__badge"});var S={"data-user-count":h};var I=this.shouldShowPresence()&&this.renderPresence(g);var T=this.buildName();var N=this.shouldShowExternalSharedIcon()&&r.a.createElement(dt["a"],{tooltip:true,sharedTeamIds:k,className:"p-channel_sidebar__icon",pending:o});var A=r.a.createElement("a",E()({href:"/messages/"+n,className:C,onClick:this.onClick,onContextMenu:O},S,{"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-is-selected":m,"data-qa-channel-sidebar-channel-id":n,"data-qa-channel-sidebar-channel-type":i,"data-qa-channel-sidebar-is-starred":y,"data-qa-channel-sidebar-priority":b,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":n,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),I,T,j,N);if(this.shouldShowClose()){var R=r.a.createElement(Ze["c"],{onClick:this.closeIM,className:"p-channel_sidebar__close","aria-label":Mt.t("Close Direct Message with {name}",{name:v})},r.a.createElement(lt["a"],{type:"times-circle-medium"}));A=r.a.createElement("div",{className:"p-channel_sidebar__close_container"},A,R)}if(w){var M=function e(){return Object(Rt["a"])(t.props)};return r.a.createElement(yt,{getTemplate:M},A)}return A}}]);return t}(ot["a"]);Ft.displayName="Channel";Ft.propTypes=xt;Ft.defaultProps=Pt;var Lt=function e(t){return{clogger:Object(st["a"])({state:t})}};var Bt=Object(i["connect"])(Lt)(Ft);var Ut={closeIM:l["closeChannelApi"]};var qt=function e(t,a){var n=a.id;var r=Object(l["getChannelById"])(t,n);if(!r)return{id:n,featureSidebarContextMenu:Object(R["isFeatureEnabled"])(t,"feature_sidebar_context_menu")};var i=Object(z["isMpim"])(r)?Math.min(Math.max(m.a.get(r,"members.length",1)-1,2),9):0;var o=Object(z["getChannelType"])(r);var s="im"===o&&Object(I["getUserPref"])(t,"show_typing")&&Object(rt["getTyperIdsInChannel"])(t,n).length>0;var c="im"!==o||"active"===Object(it["getPresenceByMemberId"])(t,Object(z["getMemberIdFromIm"])(r));var u=Object(R["getCurrentUserId"])(t);var d="mpim"===o&&Object(z["getMemberIdsFromMpim"])(r)&&m.a.filter(Object(z["getMemberIdsFromMpim"])(r),function(e){return e!==u});var p="mpim"===o&&d&&m.a.map(d,function(e){return Object(it["getPresenceByMemberId"])(t,e)});var f=!Object(z["isMpim"])(r)&&!Object(z["isIm"])(r)||Object(z["isPrivateChannel"])(r);var h=!Object(z["isMpim"])(r)&&!Object(z["isIm"])(r);var v=Object(z["isMemberOfChannel"])(r)||Object(z["isPrivateChannel"])(r);return{isSelected:Object(x["getPrimaryView"])(t)===n,isPendingShared:Object(z["isPendingExternallySharedChannel"])(r),isShared:Object(z["isExternallySharedChannel"])(r),isOrgShared:Object(z["isOrgShared"])(r),isSlackbot:Object(z["isSlackbot"])(r),isYou:Object(z["isYou"])(u,r),isMuted:Object(T["isChannelMutedById"])(t,n),hasUnreads:!!Object(z["getUnreadCount"])(r),hasDraft:Object(z["getHasDraft"])(t,n),isArchived:Object(z["isArchived"])(r),sharedTeamIds:Object(z["getMaybePendingSharedTeamIds"])(r),displayName:Object(z["getDisplayName"])(r),unreadCount:Object(z["getUnreadCount"])(r),badgeCount:Object(l["getBadgeCount"])(t,r),userCount:i,userId:Object(z["getMemberIdFromIm"])(r)||r.user_id,userActive:c,type:o,id:n,isTyping:s,isStarred:Object(z["isStarred"])(r),members:d||null,memberPresences:p||null,name:Object(z["getDisplayName"])(r),priority:r.priority,isPrivateChannel:Object(z["isPrivateChannel"])(r),isMemberOfChannel:z["isMemberOfChannel"],canMute:f,canLeave:v,isChannel:h,featureSidebarContextMenu:Object(R["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureSonicPresenceManager:Object(R["isFeatureEnabled"])(t,"feature_sonic_presence_manager")}};var Gt=Object(i["connect"])(qt,Ut)(Bt);var Ht=a(240);var Wt=a(145);var Vt=a(27);var zt=a(1417);var Qt=a(1158);var Kt=a(2069);var Yt=new K["b"]("channel_sidebar");var Jt={coachmarkState:Ge.a.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),setJumperCoachmarkState:Ge.a.func,setUserPrefByApi:Ge.a.func,clogger:Ge.a.object.isRequired};var Zt={coachmarkState:void 0,setJumperCoachmarkState:f["noop"],setUserPrefByApi:f["noop"],clogger:{}};var Xt=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.hideCoachmark=a.hideCoachmark.bind(a);a.hideButton=a.hideButton.bind(a);a.onShowContinue=a.onShowContinue.bind(a);a.onShowSkip=a.onShowSkip.bind(a);a.onHideContinue=a.onHideContinue.bind(a);a.onHideSkip=a.onHideSkip.bind(a);a.onButtonClick=a.onButtonClick.bind(a);return a}De()(t,[{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onButtonClick",value:function e(){var t=this.props.clogger;t.track("QUICKSWITCHER_ACTION",{trigger:"sidebar_btn",action:"opened",quickswitcher_session_id:Object(zt["a"])()});Object(zt["b"])()}},{key:"clog",value:function e(t){var a=this.props,n=a.clogger,r=a.coachmarkState;var i={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[r];n.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:i}}})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function e(t){var a={SHOW:{title:Yt.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,a=e.key;if("sparkles"===t)return r.a.createElement(Wt["b"],{key:a,text:":sparkles:",emojiSize:Wt["a"].MEDIUM});return null}),content:Yt.rt("To jump to any channel or conversation, try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(Vt["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:Yt.t("Hide the sidebar button"),continueButtonText:Yt.t("OK")},HIDE:{title:Yt.t("You\u2019re a pro at keyboard shortcuts"),content:Yt.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(Vt["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:Yt.t("No thanks, I like the button"),continueButtonText:Yt.t("Hide Button")}};var n={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return r.a.createElement(Qt["a"],E()({},n,a.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return r.a.createElement(Qt["a"],E()({},n,a.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=r.a.createElement(Ze["c"],{type:"button",className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":Yt.t("Open the Quick Switcher to jump to a conversation.")},r.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},r.a.createElement(lt["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),Yt.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),r.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(Vt["isMac"])()?"\u2318K":"ctrl+K"));return this.maybeRenderCoachmark(t)}}]);return t}(n["Component"]);Xt.displayName="QuickswitcherButton";Xt.defaultProps=Zt;var $t=function e(t){return{coachmarkState:Object(j["getJumperCoachmarkState"])(t),clogger:Object(st["a"])({state:t})}};var ea={setJumperCoachmarkState:j["setJumperCoachmarkState"],setUserPrefByApi:Ht["c"]};var ta=Object(i["connect"])($t,ea)(Xt);var aa=new K["b"]("channel_sidebar");var na={id:Ge.a.string.isRequired,label:Ge.a.string.isRequired,labelUnread:Ge.a.string,hasUnreads:Ge.a.bool,badgeCount:Ge.a.number,isSelected:Ge.a.bool,selectItem:Ge.a.func,isDim:Ge.a.bool};var ra={isSelected:false,selectable:true,label:"",labelUnread:"",hasUnreads:false,badgeCount:0,selectItem:m.a.noop,isDim:false};var ia=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.state={};return a}De()(t,[{key:"onClick",value:function e(t){t.preventDefault();Object(tt["b"])().action(Nt,"Selected "+this.props.id);this.props.selectItem(this.props.id,t)}},{key:"render",value:function e(){var t=this.props,a=t.id,n=t.label,i=t.labelUnread,o=t.hasUnreads,s=t.badgeCount,l=t.isSelected,c=t.isDim;var u=We()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===a,"p-channel_sidebar__link--all-threads":"Vall_threads"===a,"p-channel_sidebar__link--search":"Vsearch"===a,"p-channel_sidebar__link--invites":"Vinvites"===a,"p-channel_sidebar__link--selected":l,"p-channel_sidebar__link--unread":o,"p-channel_sidebar__link--dim":c});var d=o&&i?i:n;var p=r.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"},d);var f=m.a.filter([l?aa.t("selected"):null,o&&!s?aa.t("has unreads"):null,s?aa.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:s}):null],m.a.identity);var h=d+(f.length?" ("+f.join(", ")+")":"");var v=r.a.createElement(Tt,{count:s,className:"p-channel_sidebar__badge"});return r.a.createElement(Ze["c"],{className:u,onClick:this.onClick,"aria-label":h},p,v)}}]);return t}(n["PureComponent"]);ia.displayName="Link";ia.defaultProps=ra;var oa=ia;var sa=new K["b"]("channel_sidebar");var la="Vall_unreads";var ca=function e(t){return{id:la,label:sa.t("All Unreads"),hasUnreads:Object(N["hasUnreads"])(t),isSelected:Object(x["getPrimaryView"])(t)===la}};var ua=Object(i["connect"])(ca)(oa);var da=ua;var pa=new K["b"]("channel_sidebar");var fa="Vall_threads";var ma=function e(t){return{id:fa,label:Object(R["isFeatureEnabled"])(t,"feature_threads_copy_change")?pa.t("Threads"):pa.t("All Threads"),labelUnread:Object(R["isFeatureEnabled"])(t,"feature_threads_copy_change")?pa.t("Threads"):pa.t("New Threads"),hasUnreads:Object(N["hasUnreadThreads"])(t),badgeCount:Object(N["getThreadsMentionCount"])(t),isSelected:Object(x["getPrimaryView"])(t)===fa}};var ha=Object(i["connect"])(ma)(oa);var va=ha;var ga=new K["b"]("channel_sidebar");var ba="Vsearch";var _a=function e(t){var a="";Object(R["isFeatureEnabled"])(t,"feature_primary_search")&&Object(B["a"])(t)&&(a=ga.t("Search Results"));return{id:ba,label:a,isSelected:Object(x["getPrimaryView"])(t)===ba}};var ya=Object(i["connect"])(_a)(oa);var ka=ya;var Oa=new K["b"]("channel_sidebar");var wa=function e(t){var a=t.selectItem,n=t.dim;return r.a.createElement(oa,{key:"Vinvites",id:"Vinvites",label:Oa.t("Invite People"),selectItem:a,isDim:n})};wa.displayName="InviteLink";wa.defaultProps={selectItem:m.a.noop,dim:true};var Ea=Object(Ot["pure"])(wa);var Ca=a(170);var ja=a(967);var Sa=new K["b"]("channel_sidebar");var Ia={isAppWhitelistEnabled:Ge.a.bool,isEnterprise:Ge.a.bool,installAppsString:Ge.a.string,fetchMemberCountsForTeam:Ge.a.func.isRequired,clogger:Ge.a.object.isRequired};var Ta={isAppWhitelistEnabled:false,isEnterprise:false,installAppsString:"",clogger:{}};var Na=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={numBots:0,numMembers:0};a._isMounted=false;a.handleAppsBrowserClick=a.handleAppsBrowserClick.bind(a);return a}De()(t,[{key:"componentWillMount",value:function e(){var t=this;return this.props.fetchMemberCountsForTeam().then(function(e){var a=e.bots,n=e.members;t._isMounted&&t.setState(function(){return{numBots:a,numMembers:n}})})}},{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"handleAppsBrowserClick",value:function e(){var t=this.props.clogger;t.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK");y()}},{key:"render",value:function e(){var t=this.state,a=t.numBots,n=t.numMembers;if(n<10||a>=3||this.props.isEnterprise||this.props.isAppWhitelistEnabled)return null;return r.a.createElement(Ze["c"],{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick},"+ ",this.props.installAppsString)}}]);return t}(n["Component"]);Na.displayName="InstallAppsLink";Na.defaultProps=Ta;var Aa={fetchMemberCountsForTeam:ja["b"]};function Ra(e){var t=Sa.t("Add Apps");return{isAppWhitelistEnabled:Object(I["getTeamPref"])(e,"app_whitelist_enabled"),isEnterprise:!m.a.isEmpty(Object(Ca["getEnterprise"])(e)),installAppsString:t,clogger:Object(st["a"])({state:e})}}var Ma=Object(i["connect"])(Ra,Aa)(Na);var xa=a(1160);var Pa=new K["b"]("channel_browser_coachmark");var Da={label:Ge.a.string.isRequired,qaLabel:Ge.a.string,iconClass:Ge.a.string,tooltip:Ge.a.string,tooltipClassName:Ge.a.string,tooltipArrowOffset:Ge.a.number,onLabelClick:Ge.a.func,showPlus:Ge.a.bool,plusTooltip:Ge.a.string,onPlusClick:Ge.a.func,seenChannelBrowserCoachmark:Ge.a.bool,hasRecentlySharedAChannel:Ge.a.bool,setUserPrefByApi:Ge.a.func};var Fa={label:"",qaLabel:"",iconClass:null,tooltip:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:m.a.noop,showPlus:false,plusTooltip:"",onPlusClick:m.a.noop,seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setUserPrefByApi:m.a.noop};var La=Object(tt["b"])();var Ba=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLabelClick=a.onLabelClick.bind(a);a.onPlusClick=a.onPlusClick.bind(a);a.setTooltipRef=a.setTooltipRef.bind(a);a.setPlusTooltipRef=a.setPlusTooltipRef.bind(a);return a}De()(t,[{key:"onLabelClick",value:function e(t){t.preventDefault();La.action(Nt,"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function e(t){t.preventDefault();La.action(Nt,"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip()}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"renderIconMaybe",value:function e(){var t=this.props.iconClass;if(!t)return null;return r.a.createElement(lt["a"],{type:t})}},{key:"renderPlusButtonMaybe",value:function e(){var t=this.props,a=t.showPlus,n=t.plusTooltip;if(!a)return null;var i=n||"";var o=this.props.onPlusClick===this.props.onLabelClick;var s=o?"-1":void 0;var l=o?"true":void 0;var c=r.a.createElement(Ze["c"],{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":i,tabIndex:s});var u=n?r.a.createElement(ft["d"],{tip:n,position:"top",ref:this.setPlusTooltipRef,delay:ft["a"]},c):c;return r.a.createElement("div",{className:"p-channel_sidebar__section_heading_right","aria-hidden":l},u)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var a=this;var n=this.props,i=n.seenChannelBrowserCoachmark,o=n.hasRecentlySharedAChannel,s=n.qaLabel;if("shared_channels"!==s||i)return t;var l=function e(){a.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var c=function e(){l();v();Object(xa["a"])()};return r.a.createElement("div",null,r.a.createElement(Qt["a"],{hasSkipButton:true,skipButtonText:Pa.t("Close"),hasSkipLink:false,hasCloseButton:false,continueButtonText:Pa.t("Show Me"),title:Pa.t("View and manage shared channels"),content:Pa.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),shouldShow:o,onSkip:l,onContinue:c,delay:100,position:"right"},t))}},{key:"render",value:function e(){var t=this.props,a=t.label,n=t.qaLabel,i=t.tooltip,o=t.tooltipClassName,s=t.tooltipArrowOffset,l=t.onLabelClick;var c=void 0;var u=l!==m.a.noop;c=u?r.a.createElement(Ze["c"],{className:We()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":i},this.renderIconMaybe()," ",a):r.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",a);var d=i?r.a.createElement(ft["d"],{tip:i,tipClassName:o,position:"top-left",tipArrowOffset:s,ref:this.setTooltipRef,delay:ft["a"]},this.renderSharedChannelsCoachmarkMaybe(c)):c;var p=u?r.a.createElement("h2",{className:"offscreen"},a):null;var f=this.props.onPlusClick!==this.props.onLabelClick;var h=f?"group":void 0;var v=f?a:void 0;return r.a.createElement("div",{className:"p-channel_sidebar__section_heading","data-qa-channel-sidebar-section-heading":n,role:h,"aria-label":v},p,d,this.renderPlusButtonMaybe())}}]);return t}(r.a.PureComponent);Ba.displayName="SectionHeading";Ba.defaultProps=Fa;var Ua=function e(t){return{seenChannelBrowserCoachmark:Object(I["getUserPref"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(I["getUserPref"])(t,"has_recently_shared_a_channel")}};var qa={setUserPrefByApi:Ht["c"]};var Ga=Object(i["connect"])(Ua,qa)(Ba);var Ha=new K["b"]("channel_sidebar");var Wa=function e(t){return r.a.createElement(Ga,E()({},t,{label:Ha.t("Starred"),qaLabel:"starred"}))};Wa.displayName="StarredHeading";var Va=Object(Ot["pure"])(Wa);var za=a(618);var Qa=new K["b"]("channel_sidebar");var Ka=Qa.t("Create a shared channel");var Ya={sharedChannelsEnabled:Ge.a.bool};var Ja={sharedChannelsEnabled:false};var Za=function e(t){return{sharedChannelsEnabled:1===Object(I["getTeamPref"])(t,"enable_shared_channels")}};var Xa=function e(t){return r.a.createElement(Ga,E()({},t,{tooltip:Qa.t("Browse all shared channels"),tooltipArrowOffset:50,label:Qa.t("Shared Channels"),qaLabel:"shared_channels",showPlus:t.sharedChannelsEnabled&&Object(za["h"])(),plusTooltip:Ka}))};Xa.displayName="SharedChannelsHeading";Xa.defaultProps=Ja;var $a=Object(Ot["pure"])(Xa);var en=Object(i["connect"])(Za)($a);var tn=new K["b"]("channel_sidebar");var an=tn.t("Create a channel");var nn={showPlus:Ge.a.bool};var rn={showPlus:true};var on=function e(t){return r.a.createElement(Ga,E()({},t,{label:tn.t("Channels"),qaLabel:"channels",tooltip:tn.t("Browse all channels"),tooltipArrowOffset:30,showPlus:t.showPlus,plusTooltip:an}))};on.displayName="ChannelsHeading";on.defaultProps=rn;var sn=function e(){return{showPlus:Object(za["b"])()||Object(za["d"])()}};var ln=Object(i["connect"])(sn)(on);var cn=a(117);var un={name:Ge.a.string,setIsRenaming:Ge.a.func,saveFolderData:Ge.a.func,renameFolder:Ge.a.func,toggleFolderCollapse:Ge.a.func,setFolderCollapse:Ge.a.func,badgeCount:Ge.a.number,hasUnreads:Ge.a.bool,isCollapsed:Ge.a.bool,isRenaming:Ge.a.bool,onDragStart:Ge.a.func,onDragEnd:Ge.a.func,onDrop:Ge.a.func,onDragOver:Ge.a.func};var dn={name:"",setIsRenaming:m.a.noop,saveFolderData:m.a.noop,renameFolder:m.a.noop,toggleFolderCollapse:m.a.noop,setFolderCollapse:m.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:m.a.noop,onDragEnd:m.a.noop,onDrop:m.a.noop,onDragOver:m.a.noop};var pn=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleFolderCollapse=a.toggleFolderCollapse.bind(a);a.renameFolder=a.renameFolder.bind(a);a.showRenameBox=a.showRenameBox.bind(a);a.setRenamingLabel=a.setRenamingLabel.bind(a);a.setInputRef=a.setInputRef.bind(a);a.onBlur=a.onBlur.bind(a);a.state={renamingLabel:a.props.name,hasTyped:false};return a}De()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var a=this.props.name;var n=t.target.value;this.props.renameFolder({oldName:a,newName:n});this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function e(t){var a=t.target.value;this.setState(function(){return{renamingLabel:a,hasTyped:true}})}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(t){t.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"renameFolder",value:function e(t){var a=this.props.name;var n=void 0;"Enter"===t.key&&(n=t.target.value);"Escape"===t.key&&(n=this.props.name);if(void 0!==n){this.props.renameFolder({oldName:a,newName:n});this.props.saveFolderData()}}},{key:"render",value:function e(){var t=this.props.isRenaming?"":r.a.createElement(Ze["c"],{className:We()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var a="";var n=Object(cn["d"])(this.props.name,{include_text:false,include_title:false});var i=void 0;i=this.props.isRenaming?r.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):m.a.includes(this.props.name,"<")?r.a.createElement(Ze["c"],{className:We()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":a},this.props.name):r.a.createElement(Ze["c"],{className:We()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":a,dangerouslySetInnerHTML:{__html:n}});var o=this.props.isCollapsed?r.a.createElement(Ze["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},r.a.createElement(Tt,{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return r.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},r.a.createElement("h2",{className:"offscreen"},this.props.name),i,o,t)}}]);return t}(r.a.PureComponent);pn.displayName="FolderHeading";pn.defaultProps=dn;var fn=function e(t,a){var n=a.name;var r=Object(S["getFolderByName"])(t,n);var i=r?m.a.map(r.channelIds,function(e){return Object(l["getChannelById"])(t,e)}):[];var o=!!r&&r.isCollapsed;var s=!!r&&r.isRenaming;var c=i.length>0?m.a.sum(m.a.map(i,function(e){return Object(l["getBadgeCount"])(t,e)})):0;var u=i.length>0&&!!m.a.find(i,function(e){return Object(z["isUnread"])(e)&&!Object(T["isChannelMutedById"])(t,e.id)});return{isCollapsed:o,isRenaming:s,hasUnreads:u,badgeCount:c}};var mn={toggleFolderCollapse:S["toggleFolderCollapse"],setFolderCollapse:S["setFolderCollapse"],saveFolderData:S["saveFolderData"],renameFolder:S["renameFolder"],setIsRenaming:S["setIsRenaming"]};var hn=Object(i["connect"])(fn,mn)(pn);var vn=new K["b"]("channel_sidebar");var gn={orgName:Ge.a.string.isRequired};var bn={orgName:""};var _n=function e(t){return r.a.createElement(Ga,E()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:vn.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:vn.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50}))};_n.displayName="OrgWideChannelsHeading";_n.defaultProps=bn;var yn=Object(Ot["pure"])(_n);var kn=function e(t){var a=Object(Ca["getEnterpriseOrgName"])(t);return{orgName:a}};var On=Object(i["connect"])(kn)(yn);var wn=new K["b"]("channel_sidebar");var En=function e(t){return r.a.createElement(Ga,E()({},t,{label:wn.t("Direct Messages"),qaLabel:"ims",tooltip:wn.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:wn.t("Open a direct message")}))};En.displayName="DirectMessagesHeading";var Cn=Object(Ot["pure"])(En);var jn=new K["b"]("channel_sidebar");var Sn=function e(t){return r.a.createElement(Ga,E()({},t,{label:jn.t("Apps"),qaLabel:"apps",tooltip:jn.t("Browse apps"),tooltipArrowOffset:16,showPlus:true,plusTooltip:jn.t("Browse apps")}))};Sn.displayName="AppsHeading";var In=Object(Ot["pure"])(Sn);var Tn=new K["b"]("channel_sidebar");var Nn={rows:Ge.a.arrayOf(Ge.a.shape({type:Ge.a.string,scrollBottom:Ge.a.number})).isRequired,onItemSelect:Ge.a.func,onInviteClick:Ge.a.func,onBrowseChannelsClick:Ge.a.func,onBrowseSharedChannelsClick:Ge.a.func,onCreateChannelClick:Ge.a.func,onCreateSharedChannelClick:Ge.a.func,onOpenDMClick:Ge.a.func,onBrowseAppsClick:Ge.a.func,onResize:Ge.a.func,onScroll:Ge.a.func,sidebarFoldersIsEnabled:Ge.a.bool,onDragStart:Ge.a.func,onDragEnd:Ge.a.func,onDrop:Ge.a.func,onDragOver:Ge.a.func,onCreateFolder:Ge.a.func};var An={rows:[],onItemSelect:m.a.noop,selectedItemId:"",onItemClick:m.a.noop,onInviteClick:m.a.noop,onBrowseChannelsClick:m.a.noop,onBrowseSharedChannelsClick:m.a.noop,onCreateChannelClick:m.a.noop,onCreateSharedChannelClick:m.a.noop,onOpenDMClick:m.a.noop,onBrowseAppsClick:m.a.noop,onResize:m.a.noop,onScroll:m.a.noop,sidebarFoldersIsEnabled:false,onDragStart:m.a.noop,onDragEnd:m.a.noop,onDrop:m.a.noop,onDragOver:m.a.noop,onCreateFolder:m.a.noop};var Rn=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setScrollbarRef=a.setScrollbarRef.bind(a);a.getCurrentScrollTop=a.getCurrentScrollTop.bind(a);a.resetCurrentScrollTopMaybe=a.resetCurrentScrollTopMaybe.bind(a);a.setListRef=a.setListRef.bind(a);a.onResize=a.onResize.bind(a);a.onScroll=a.onScroll.bind(a);a.onItemClick=a.onItemClick.bind(a);a.onInviteClick=a.onInviteClick.bind(a);a.renderRow=a.renderRow.bind(a);a.renderRowWithWrapper=a.renderRowWithWrapper.bind(a);a.currentScrollTop=0;a.height=0;return a}De()(t,[{key:"componentDidUpdate",value:function e(t){this.List&&t.rows!==this.props.rows&&this.List.recomputeRowHeights()}},{key:"onResize",value:function e(t){var a=t.height;this.resetCurrentScrollTopMaybe(a);this.height=a;this.props.onResize({height:a})}},{key:"onScroll",value:function e(t,a){var n=a.scrollTop;this.currentScrollTop=n;this.List&&this.List.Grid.handleScrollEvent({scrollTop:n});this.props.onScroll&&this.props.onScroll(n)}},{key:"onItemClick",value:function e(t,a){t.preventDefault();this.props.onItemSelect(a)}},{key:"onInviteClick",value:function e(t,a){this.props.onInviteClick(a)}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(a)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var a=this;var n=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(at["a"])({fromValue:this.currentScrollTop,toValue:n,duration:200,easing:"easeOutQuad",onTick:function e(t){var n=t.value,r=t.nextTick;a.Scrollbar.scrollTop(n);r()}})}},{key:"renderRowWithWrapper",value:function e(t,a){var n=t.height,i=t.id,o=t.type;var s=i||a+"-"+o;var l={quickswitcherButton:"listitem",allUnreadsLink:"listitem",allThreadsLink:"listitem",searchLink:"listitem",sectionHeading:"listitem",channel:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[o];return r.a.createElement("div",{key:s,style:{height:n},role:l},this.renderRow(t))}},{key:"renderRow",value:function e(t){var a=this.props.onItemSelect;switch(t.type){case"quickswitcherButton":return r.a.createElement(ta,null);case"allUnreadsLink":return r.a.createElement(da,{selectItem:a});case"allThreadsLink":return r.a.createElement(va,{selectItem:a});case"searchLink":return r.a.createElement(ka,{selectItem:a});case"sectionHeading":return this.renderSectionHeading(t.name);case"folderHeading":return this.renderFolderHeading(t.name);case"channel":return this.renderChannel(t.id,t.index);case"invitePeopleLink":return r.a.createElement(Ea,{selectItem:this.onInviteClick,dim:t.dim});case"installAppsLink":return r.a.createElement(Ma,null);case"spacer":return null;case"topPadding":return null;default:Object(tt["b"])().warn("Row type "+t.type+" not implemented",t)}return null}},{key:"renderSectionHeading",value:function e(t){var a=this.props,n=a.onBrowseChannelsClick,i=a.onBrowseSharedChannelsClick,o=a.onCreateChannelClick,s=a.onCreateSharedChannelClick,l=a.onOpenDMClick,c=a.onBrowseAppsClick;switch(t){case"starred":if(this.props.sidebarFoldersIsEnabled)return r.a.createElement(Ga,{label:Tn.t("Starred"),qaLabel:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder});return r.a.createElement(Va,null);case"sharedChannels":return r.a.createElement(en,{onLabelClick:i,onPlusClick:s});case"channels":return r.a.createElement(ln,{onLabelClick:n,onPlusClick:o});case"orgWideChannels":return r.a.createElement(On,null);case"ims":return r.a.createElement(Cn,{onLabelClick:l,onPlusClick:l});case"apps":return r.a.createElement(In,{onLabelClick:c,onPlusClick:c});default:return null}}},{key:"renderFolderHeading",value:function e(t){return r.a.createElement(hn,{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderChannel",value:function e(t,a){if(this.props.sidebarFoldersIsEnabled)return r.a.createElement(Gt,{key:t,id:t,selectItem:this.props.onItemSelect,index:a,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var n=r.a.createElement(Gt,{key:t,id:t,selectItem:this.props.onItemSelect,index:a});return n}},{key:"render",value:function e(){var t=this;return r.a.createElement(et["a"],{onResize:this.onResize},function(e){var a=e.width,n=e.height;return r.a.createElement(nt["a"],{width:a,height:n,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef,serializationKey:"channel-list-scrollbar"},r.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Tn.t("Channels and direct messages"),role:"list"},t.props.rows.map(t.renderRowWithWrapper)))})}}]);return t}(r.a.PureComponent);Rn.displayName="ChannelList";Rn.defaultProps=An;var Mn=Rn;var xn=new K["b"]("channel_sidebar");var Pn={isShowing:Ge.a.bool.isRequired,linkedId:Ge.a.oneOfType([Ge.a.string,Ge.a.bool]),isMention:Ge.a.bool,position:Ge.a.oneOf(["top","bottom"]),ensureRowInView:Ge.a.func};var Dn={isShowing:false,linkedId:null,isMention:false,position:"top",ensureRowInView:m.a.noop};var Fn=function(e){Ue()(t,e);function t(){xe()(this,t);var e=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onClick=e.onClick.bind(e);return e}De()(t,[{key:"onClick",value:function e(t){var a=this.props,n=a.linkedId,r=a.ensureRowInView;t.preventDefault();n&&r(n)}},{key:"render",value:function e(){var t=this.props,a=t.isShowing,n=t.position,i=t.isMention,o=t.linkedId;if(!a)return null;var s=We()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":i,"p-channel_sidebar__banner--unreads":!i,"p-channel_sidebar__banner--top":"top"===n,"p-channel_sidebar__banner--bottom":"bottom"===n});var l="top"===n?"up":"down";var c=i?xn.t("Unread Mentions"):xn.t("More Unreads");return r.a.createElement(Ze["c"],{className:s,onClick:this.onClick,"data-qa-linked-id":o},c,r.a.createElement(lt["b"],{type:"arrow_"+l,inline:true,className:"p-channel_sidebar__banner_icon"}))}}]);return t}(r.a.PureComponent);Fn.displayName="UnreadBanner";Fn.defaultProps=Dn;var Ln=Fn;var Bn=a(1418);var Un=new K["b"]("channel_sidebar");var qn="react_channel_sidebar_update";var Gn=Object(F["a"])(1);var Hn=2;var Wn=10;var Vn=24;var zn={isBooted:Ge.a.bool,selectedItemId:Ge.a.string,unreadIds:Ge.a.arrayOf(Ge.a.string),mutedMentionIds:Ge.a.arrayOf(Ge.a.string),rows:Ge.a.arrayOf(Ge.a.object).isRequired,rowsMap:Ge.a.object.isRequired,rowIds:Ge.a.arrayOf(Ge.a.string).isRequired,idsNeedingPresenceSubscription:Ge.a.arrayOf(Ge.a.string),onItemSelect:Ge.a.func,onInviteClick:Ge.a.func,onBrowseChannelsClick:Ge.a.func,onBrowseSharedChannelsClick:Ge.a.func,onCreateChannelClick:Ge.a.func,onCreateSharedChannelClick:Ge.a.func,onOpenDMClick:Ge.a.func,onBrowseAppsClick:Ge.a.func,jumperCoachmarkState:Ge.a.string,useGlobalNav:Ge.a.bool,featureGlobalNavLayout:Ge.a.bool,sidebarFoldersIsEnabled:Ge.a.bool,initializeFolderData:Ge.a.func,createFolder:Ge.a.func,dragFolderOrChannel:Ge.a.func,ariaLandmarkLabel:Ge.a.string,onDevToolsClick:Ge.a.func,featureSonicPresenceManager:Ge.a.bool};var Qn={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:m.a.noop,onInviteClick:m.a.noop,onBrowseChannelsClick:m.a.noop,onBrowseSharedChannelsClick:m.a.noop,onCreateChannelClick:m.a.noop,onCreateSharedChannelClick:m.a.noop,onOpenDMClick:m.a.noop,onBrowseAppsClick:m.a.noop,jumperCoachmarkState:null,useGlobalNav:false,featureGlobalNavLayout:false,sidebarFoldersIsEnabled:false,initializeFolderData:m.a.noop,createFolder:m.a.noop,dragFolderOrChannel:m.a.noop,ariaLandmarkLabel:null,onDevToolsClick:m.a.noop,featureSonicPresenceManager:false};var Kn={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var Yn=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setRef=a.setRef.bind(a);a.ensureRowInView=a.ensureRowInView.bind(a);a.onResize=a.onResize.bind(a);a.onScroll=a.onScroll.bind(a);a.onItemSelect=a.onItemSelect.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onFocusWithin=a.onFocusWithin.bind(a);a.onDragStart=a.onDragStart.bind(a);a.onDragEnd=a.onDragEnd.bind(a);a.onDragOver=a.onDragOver.bind(a);a.onDrop=a.onDrop.bind(a);a.onCreateFolder=a.onCreateFolder.bind(a);a.state=E()({},a.getUnreadRows(e),{scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasInitializedFolderData:false,hasKeyboardFocus:Kn.NOT_FOCUSED});a.presenceList=Object(ze["a"])(a.props.idsNeedingPresenceSubscription);a.commands=[{keys:["option+up"],handler:a.gotoNext.bind(a,"up",false)},{keys:["option+down"],handler:a.gotoNext.bind(a,"down",false)},{keys:["option+shift+up"],handler:a.gotoNext.bind(a,"up",true)},{keys:["option+shift+down"],handler:a.gotoNext.bind(a,"down",true)}];a.pendingEnsureRowInView=false;return a}De()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new Xe["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadFolderData()}},{key:"componentWillReceiveProps",value:function e(t){var a=this;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(Ve["a"])()&&!Object(U["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var n="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var r=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(n||r)&&this.ChannelList&&this.ChannelList.Scrollbar&&this.ChannelList.Scrollbar.scrollTop(0);this.setState(function(e){var n=E()({},e,a.getUnreadRows(t));a.ChannelList&&a.ChannelList.resetCurrentScrollTopMaybe(n.listHeight,t.rows);return E()({},n,a.getBannerState(n))})}},{key:"componentWillUpdate",value:function e(){Gn&&Object(u["e"])(qn+"_mark")}},{key:"componentDidUpdate",value:function e(t){var a=this.props,n=a.selectedItemId,r=a.isBooted,i=a.jumperCoachmarkState;var o="SHOW_BUTTON"===i||"HIDE_BUTTON"===i;var s=t.selectedItemId!==n;var l=r&&!t.isBooted;o||!s&&!l||this.ensureRowInView(n);this.maybeLoadFolderData();Gn&&Object(u["g"])(qn,qn+"_mark")}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.dataTransfer;a.effectAllowed="move";a.dropEffect="move";var n=t.target;while(n&&!n.attributes["data-drag-type"])n=n.parentNode;var r={src:{type:n.attributes["data-drag-type"].value,id:n.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:r}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDrop",value:function e(t){var a=this;if(!this.props.sidebarFoldersIsEnabled)return;var n=t.target;while(n&&!n.attributes["data-drag-type"])n=n.parentNode;this.setState(function(){return{dragData:E()({},a.state.dragData,{dest:{type:n.attributes["data-drag-type"].value,id:n.attributes["data-drag-id"].value}})}})}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"onResize",value:function e(t){var a=this;var n=t.height;this.setState(function(e){var t=E()({},e,{listHeight:n});return E()({},t,a.getBannerState(t))},function(){false!==a.pendingEnsureRowInView&&a.ensureRowInView(a.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent,n=t.target,r=t.currentTarget;if(a&&"mousedown"===a.type)return;var i=n===r?Kn.CONTAINER_FOCUSED:Kn.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:Kn.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:Kn.NOT_FOCUSED}})}},{key:"onItemSelect",value:function e(t){return this.props.onItemSelect(t)}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"getUnreadRows",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.rowsMap,n=t.unreadIds,r=t.mentionIds;return{firstUnread:a[m.a.first(n)],lastUnread:a[m.a.last(n)],firstMention:a[m.a.first(r)],lastMention:a[m.a.last(r)]}}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.firstMention,n=t.firstUnread,r=t.lastMention,i=t.lastUnread,o=t.listHeight;var s=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;var l=n&&n.scrollBottom-Wn<=s;var c=i&&i.scrollTop+Wn>=s+o;var u=a&&a.scrollBottom-Wn-(l?Vn:0)<=s;var d=r&&r.scrollTop+Wn+(c?Vn:0)>=s+o;return{scrolledBelowFirstMention:u,scrolledBelowFirstUnread:l,scrolledAboveLastMention:d,scrolledAboveLastUnread:c}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return E()({},e,{hasInitializedFolderData:true})})}}},{key:"ensureRowInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var a=this.props,n=a.rows,r=a.rowsMap,i=a.rowIds;var o=r[t];if(!o)return;var s=this.ChannelList.currentScrollTop;var l=this.state.listHeight;if(0===l){this.pendingEnsureRowInView=t;return}this.pendingEnsureRowInView=false;var c=Math.max(i.indexOf(t)-Hn,0);var u=n[c].scrollTop;if(u<s){this.ChannelList.scrollToTarget(u);return}var d=Math.min(i.indexOf(t)+Hn,n.length-1);var p=n[d].scrollBottom-l;p>s&&this.ChannelList.scrollToTarget(p)}},{key:"gotoNext",value:function e(t,a){var n=this;var r=Object(Qe["a"])();var i=Object(Ke["f"])(r);if(Object(Ke["g"])(r)&&i>0){if(Object(Ke["i"])(r))return;var o=Object(Ke["b"])(r).start;if("up"===t&&0!==o)return;if("down"===t&&o!==i)return}var s=this.props,l=s.rows,c=s.rowIds,u=s.selectedItemId;var d=c.indexOf(u);var p=m()(l).map(function(e,t){return E()({},e,{index:t})}).filter(function(e){return"channel"===e.type}).filter(function(e){return!a||m.a.indexOf(n.props.unreadIds,e.id)>=0||m.a.indexOf(n.props.mutedMentionIds,e.id)>=0}).value();if(0===p.length)return;var f=void 0;f="down"===t?m.a.find(p,function(e){return e.index>d}):m.a.findLast(p,function(e){return e.index<d});void 0===f&&(f="down"===t?m.a.first(p):m.a.last(p));this.props.onItemSelect(f.id)}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===Kn.CONTAINER_FOCUSED)return r.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,a=t.rows,n=t.onInviteClick,i=t.onBrowseChannelsClick,o=t.onBrowseSharedChannelsClick,s=t.onCreateChannelClick,l=t.onCreateSharedChannelClick,c=t.onOpenDMClick,u=t.onBrowseAppsClick,d=t.selectedItemId,p=t.useGlobalNav,f=t.featureGlobalNavLayout,m=t.sidebarFoldersIsEnabled,h=t.ariaLandmarkLabel,v=t.onDevToolsClick;var g=this.state,b=g.scrolledBelowFirstMention,_=g.scrolledBelowFirstUnread,y=g.scrolledAboveLastMention,k=g.scrolledAboveLastUnread,O=g.firstMention,w=g.firstUnread,E=g.lastMention,C=g.lastUnread;var j=this.state.hasKeyboardFocus!==Kn.NOT_FOCUSED;var S=this.state.hasKeyboardFocus===Kn.CONTAINER_FOCUSED?"-1":null;var I=We()("p-channel_sidebar",{focusablesection:j,"p-channel_sidebar--global_nav":p,"p-channel_sidebar--global_nav_layout":f});var T=null;p&&(T=f?r.a.createElement($e["a"],null):r.a.createElement("div",{className:"p-global_nav__sidebar_divider"}));return r.a.createElement(Je["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},r.a.createElement("nav",{className:I,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":d,"data-is-focusable-section":true,"aria-labelledby":h,tabIndex:S},r.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},Un.t("Channel Sidebar")),!p&&r.a.createElement(Bn["a"],null),T,r.a.createElement("div",{className:"p-channel_sidebar__list"},r.a.createElement(Ln,{position:"top",isShowing:b||_,isMention:b,linkedId:b&&O.id||_&&w.id,ensureRowInView:this.ensureRowInView}),r.a.createElement(Mn,{rows:a,onItemSelect:this.onItemSelect,onInviteClick:n,onBrowseChannelsClick:i,onBrowseSharedChannelsClick:o,onCreateChannelClick:s,onCreateSharedChannelClick:l,onOpenDMClick:c,onBrowseAppsClick:u,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:m,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef}),r.a.createElement(Ln,{position:"bottom",isShowing:y||k,isMention:y,linkedId:y&&E.id||k&&C.id,ensureRowInView:this.ensureRowInView})),r.a.createElement(Ye["a"],{enabled:["feature_redux_dev_tools"]},r.a.createElement(Ze["d"],{size:"small",onClick:v},"Redux Dev Tools")),this.renderFocusOutline()))}}]);return t}(n["PureComponent"]);Yn.displayName="ChannelSidebar";Yn.defaultProps=Qn;var Jn=Yn;var Zn="react_channel_sidebar_selector_factory";var Xn=Object(F["a"])(1);var $n=function e(t){return Xn&&Object(u["e"])(t+"_mark")};var er=function e(t){return Xn&&Object(u["g"])(t,t+"_mark")};var tr=function e(t){if(!Object(P["c"])(t))return false;var a=m()(Object(A["getAllMembers"])(t)).filter(function(e){return!e.is_slackbot}).size();if(a>25)return false;if(a>=2)return"dim";return true};var ar=function e(t){var a=Object(L["b"])(t);var n=me(t),r=n.sidebarSections,i=n.sidebarSectionsOrdered,o=n.idsNeedingPresenceSubscription;var s="enabled"===Object(p["getGroupForUser"])(t,"folders_sidebar")&&Object(I["getUserPref"])(t,"folders_enabled");var l=s?Object(S["getFolders"])(t):[];var c=Re({hasQuickswitcherButton:!Object(q["a"])()&&!a&&Object(I["getUserPref"])(t,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:true===Object(I["getUserPref"])(t,"enable_unread_view"),hasInvitePeopleLink:tr(t),hasSearchLink:Object(B["a"])(t),sidebarSectionsOrdered:i,sidebarSections:r,sidebarFoldersIsEnabled:s,sidebarFolders:l}),u=c.rows,d=c.rowsMap,f=c.rowIds;return{rows:u,rowsMap:d,rowIds:f,idsNeedingPresenceSubscription:o}};var nr=function e(t){var a=void 0;var n=void 0;var r=void 0;var i=void 0;var o=void 0;var s=void 0;var c=void 0;var u=void 0;var d=void 0;var f=void 0;var h=void 0;var v=void 0;return function(e,g){$n(Zn);var b=Object(C["isFullyBooted"])(e);if(!b)return{isBooted:b};var _=Object(x["getPrimaryView"])(e);var y=g.onItemSelect;var k=ar(e),O=k.rows,w=k.rowsMap,A=k.rowIds,P=k.idsNeedingPresenceSubscription;var F=m.a.filter(A,function(t){return Object(l["isMentionById"])(e,t)&&!Object(T["isChannelMutedById"])(e,t)});var B=m.a.filter(A,function(t){return Object(l["isUnreadById"])(e,t)&&!Object(T["isChannelMutedById"])(e,t)});var G=m.a.filter(A,function(t){return Object(l["isMentionById"])(e,t)&&Object(T["isChannelMutedById"])(e,t)});Object(N["getThreadsMentionCount"])(e)&&F.unshift("Vall_threads");Object(N["hasUnreadThreads"])(e)&&B.unshift("Vall_threads");var H=Object(j["getJumperCoachmarkState"])(e);var W=Object(I["getUserPref"])(e,"sidebar_behavior");var V="enabled"===Object(p["getGroupForUser"])(e,"folders_sidebar")&&Object(I["getUserPref"])(e,"folders_enabled");var z=Object(L["b"])(e);var Q=Object(R["isFeatureEnabled"])(e,"feature_global_nav_layout");var K=Object(R["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var Y=Object(R["isFeatureEnabled"])(e,"feature_degraded_send");if(_===n&&Object(U["a"])(B,r)&&Object(U["a"])(F,i)&&Object(U["a"])(G,o)&&Object(U["a"])(A,s)&&H===c&&W===u&&V===d&&z===f&&Q===h&&Object(U["a"])(g,v))return a;var J=E()({},g,{isBooted:b,rows:O,rowsMap:w,rowIds:A,selectedItemId:_,unreadIds:B,mentionIds:F,mutedMentionIds:G,jumperCoachmarkState:H,useGlobalNav:z,featureGlobalNavLayout:Q,idsNeedingPresenceSubscription:P,featureSonicPresenceManager:K,sidebarFoldersIsEnabled:V,initializeFolderData:function e(){return t(Object(S["initializeFolderData"])())},dragFolderOrChannel:function e(a){var n=a.src,r=a.dest;t(Object(S["dragFolderOrChannel"])({src:n,dest:r}));t(Object(S["saveFolderData"])())},createFolder:function e(){return t(Object(S["createFolder"])())},onItemSelect:function e(a){Y&&_===a&&t(Object(D["a"])({channelId:a}));Object(q["a"])()?t(Object(x["setPrimaryView"])({id:a})):y&&y(a).then(function(){t(Object(M["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}).catch(m.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label"});a=J;n=_;r=B;i=F;o=G;s=A;c=H;u=W;d=V;f=z;h=Q;v=g;er(Zn);return J}};var rr={withRef:true};var ir=Object(i["connectAdvanced"])(nr,rr)(Jn);var or=ir;var sr=a(662);var lr=a(104);var cr=a(1113);var ur=function e(t){var a=window.open(null,"Redux DevTools","menubar=no,location=no,resizable=yes,scrollbars=no,status=no");a.location.reload();setTimeout(function(){a.document.write('<div id="react-devtools-root"></div>');Object(lr["render"])(r.a.createElement(cr["a"],{store:t}),a.document.getElementById("react-devtools-root"))},10)};var dr=ur;var pr=a(31);var fr=a(77);var mr=a(22);var hr=a(25);var vr=Object(mr["a"])("Send a batch of invites",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.invites,r=a.channels,i=a.extraMessage;if(!n.length)return Promise.reject(new Error("missing_invites"));var o={invites:JSON.stringify(n)};r&&r.length&&(o.channels=JSON.stringify(r));i&&(o.extra_message=i);return e(Object(hr["a"])({method:"users.admin.inviteBulk",args:o})).catch(function(e){Object(tt["a"])({getState:t}).error("Failed to send invites.");throw e})});vr.propTypes={invites:Ge.a.array.isRequired,channels:Ge.a.array,extraMessage:Ge.a.string};var gr=a(48);var br=a(1112);var _r=a(408);var yr=a(88);var kr=a(190);var Or=new K["b"]("invite");var wr={featureModernizeInvites:Ge.a.bool,invites:Ge.a.arrayOf(Ge.a.shape({email:Ge.a.string,emailError:Ge.a.string,name:Ge.a.string})),getCopy:Ge.a.func,updateInviteEmail:Ge.a.func,updateInviteName:Ge.a.func,deleteInviteRow:Ge.a.func};var Er={featureModernizeInvites:false,invites:[],getCopy:f["noop"],updateInviteEmail:f["noop"],updateInviteName:f["noop"],deleteInviteRow:f["noop"]};var Cr=function(e){Ue()(t,e);function t(){xe()(this,t);return Le()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}De()(t,[{key:"updateInviteEmail",value:function e(t){var a=this;return function(e){return a.props.updateInviteEmail(e,t)}}},{key:"updateInviteName",value:function e(t){var a=this;return function(e){return a.props.updateInviteName(e,t)}}},{key:"deleteInviteRow",value:function e(t){var a=this;return function(){return a.props.deleteInviteRow(t)}}},{key:"render",value:function e(){var t=this;if(!this.props.featureModernizeInvites)return null;var a=this.props,n=a.invites,i=a.getCopy;return n.map(function(e,a){var o=We()("p-invite_modal__invite_row_field","p-invite_modal__invite_row_field--name",{"p-invite_modal__invite_row_field--name_without_close_button":1===n.length});var s="invite_"+a;var l={};var c={};if(0===a){l.labelId=i("initial_email_label_id");c.labelId=i("initial_name_label_id")}else{l["aria-label"]=i("email_address_label");c["aria-label"]=i("name_label")}return r.a.createElement("div",{className:"p-invite_modal__invite_row","data-qa":"invite_modal_invite_row",key:s},r.a.createElement("div",{className:"p-invite_modal__invite_row_field p-invite_modal__invite_row_field--email-address","data-qa":"invite_modal_invite_email"},r.a.createElement(kr["a"],E()({name:"invite_modal_email_"+a,id:"invite_modal_email_"+a,placeholder:Or.t("name@example.com"),value:e.email,onChange:t.updateInviteEmail(a),spellCheck:"false",errorText:e.emailError||""},l))),r.a.createElement("div",{className:o,"data-qa":"invite_modal_invite_name"},r.a.createElement(kr["a"],E()({name:"invite_modal_name_"+a,id:"invite_modal_name_"+a,value:e.name,onChange:t.updateInviteName(a),spellCheck:"false"},c))),1!==n.length&&r.a.createElement("button",{className:"p-invite_modal__invite_row_delete_button",onClick:t.deleteInviteRow(a),"data-qa":"invite_modal_delete_row_button",type:"button"},r.a.createElement(lt["b"],{type:"times",size:20})))})}}]);return t}(n["Component"]);Cr.displayName="InviteModalInviteRows";Cr.defaultProps=Er;var jr=Cr;var Sr=new K["b"]("invite");var Ir={onClickAddRowButton:Ge.a.func.isRequired,featureModernizeInvites:Ge.a.bool};var Tr={featureModernizeInvites:false};var Nr=function e(t){var a=t.onClickAddRowButton,n=t.featureModernizeInvites;if(!n)return null;return r.a.createElement("span",{className:"p-invite_modal__add_row_and_bulk_copy"},Sr.rt("<AddRowButton>Add another</AddRowButton> or <BulkInviteButton>add many at once</BulkInviteButton>",null,function(e){var t=e.text,n=e.tag;switch(n){case"AddRowButton":return r.a.createElement("button",{className:"p-invite_modal__add_row_and_bulk_button",onClick:a,"data-qa":"invite_modal_add_row_button",type:"button"},r.a.createElement(lt["b"],{type:"plus_circle",size:20,className:"p-invite_modal__add_row_icon"})," ",t);case"BulkInviteButton":return r.a.createElement("button",{className:"p-invite_modal__add_row_and_bulk_button",type:"button"},t);default:return null}}))};Nr.displayName="InviteModalAddRowButtons";Nr.defaultProps=Tr;var Ar=Nr;var Rr=new K["b"]("invite");var Mr={currentTeamName:Ge.a.string,onSubmit:Ge.a.func,getCopy:Ge.a.func,addInviteRow:Ge.a.func,featureModernizeInvites:Ge.a.bool,invites:Ge.a.arrayOf(Ge.a.object),updateInviteEmail:Ge.a.func,updateInviteName:Ge.a.func,deleteInviteRow:Ge.a.func};var xr={currentTeamName:"",onSubmit:f["noop"],getCopy:f["noop"],addInviteRow:f["noop"],featureModernizeInvites:false,invites:[],updateInviteEmail:f["noop"],updateInviteName:f["noop"],deleteInviteRow:f["noop"]};var Pr=function e(t){if(!t.featureModernizeInvites)return null;var a=t.currentTeamName,i=t.onSubmit,o=t.getCopy,s=t.addInviteRow,l=t.invites,c=t.updateInviteEmail,u=t.updateInviteName,d=t.deleteInviteRow,p=t.featureModernizeInvites;return r.a.createElement(n["Fragment"],null,r.a.createElement("header",{className:"p-invite_modal__header"},r.a.createElement(lt["b"],{type:"paper_plane",className:"p-invite_modal__header_icon",size:"inherit"}),r.a.createElement("h1",{className:"p-invite_modal__header_copy"},Rr.rt("Invite people to <strong>{currentTeamName}</strong>",{currentTeamName:a}))),r.a.createElement("form",{onSubmit:i,"data-qa":"invite_modal_form"},r.a.createElement("div",{className:"p-invite_modal__invite_row"},r.a.createElement(yr["a"],{className:"p-invite_modal__invite_row_field p-invite_modal__invite_row_field--email-address",text:o("email_address_label"),htmlFor:"invite_modal_email_0",id:o("initial_email_label_id")}),r.a.createElement(yr["a"],{className:"p-invite_modal__invite_row_field p-invite_modal__invite_row_field--name p-invite_modal__invite_row_field--name_without_close_button",text:o("name_label"),htmlFor:"invite_modal_name_0",id:o("initial_name_label_id")})),r.a.createElement(jr,{featureModernizeInvites:p,invites:l,getCopy:o,updateInviteEmail:c,updateInviteName:u,deleteInviteRow:d}),r.a.createElement(Ar,{onClickAddRowButton:s,featureModernizeInvites:p}),r.a.createElement("div",{className:"p-invite_modal__invitation_buttons"},r.a.createElement("span",{className:"p-invite_modal__show_invite_link_view_wrapper"},r.a.createElement("button",{className:"p-invite_modal__show_invite_link_view",type:"button"},r.a.createElement(lt["b"],{type:"link"}),r.a.createElement("span",{className:"p-invite_modal__show_invite_link_view_copy"},Rr.t("Get an invite link to share")))),r.a.createElement(Ze["d"],{size:"large",htmlType:"submit"},Rr.t("Send Invitations")))))};Pr.displayName="InviteModalSendInvitesForm";Pr.defaultProps=xr;var Dr=Pr;var Fr=new K["b"]("invite");var Lr={invites:Ge.a.arrayOf(Ge.a.shape({email:Ge.a.string.isRequired,ok:Ge.a.bool.isRequired,apiError:Ge.a.string,userType:Ge.a.string,issue:Ge.a.string,name:Ge.a.string})),featureModernizeInvites:Ge.a.bool,onClickDoneButton:Ge.a.func,onClickTryAgainButton:Ge.a.func};var Br={invites:[],featureModernizeInvites:false,onClickDoneButton:f["noop"],onClickTryAgainButton:f["noop"]};var Ur=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.errorMap={};e.featureModernizeInvites&&(a.errorMap={url_in_message:Fr.t("Sorry, but URLs are not allowed in the custom message. Please remove it and try again!"),invalid_email:Fr.t("That doesn\u2019t look like a valid email address!"),already_in_team:Fr.t("This person is already in your workspace."),user_disabled:Fr.rt('This person is already in your workspace, but their account is deactivated. You can <a href="https://my.slack.com/admin">manage</a> their account.'),already_invited:Fr.t("This person has already been invited to your workspace."),sent_recently:Fr.t("This person was recently invited. No need to invite them again just yet."),invite_failed:Fr.t("Something went wrong with this invite :("),ura_limit_reached:Fr.t("You\u2019ve reached your workspace limit for Single-channel Guests. You must invite more paid members first."),user_limit_reached:Fr.t("You\u2019ve reached the maximum number of users for this workspace."),not_allowed:Fr.t("You can\u2019t invite this type of account based on your current SSO settings."),custom_message_not_allowed:Fr.t("Sorry, you can\u2019t add a custom message to this invite. Please remove it and try again!"),domain_mismatch:Fr.t("Your SSO settings prevent you from inviting people from this email domain."),invite_limit_reached:Fr.rt("Your workspace has exceeded the limit on invitations. After more people have accepted the ones your workspace has sent, you can send more. Revoking invitations will not lift the limit. Our Help Center has <a href='https://get.slack.help/hc/articles/201330256?#invitation_limits'>more details on invitation limits</a>."),too_long:Fr.t("This person\u2019s name exceeds the 35-character limit."),org_user_is_disabled:Fr.t("This person has a deactivated account for your organization."),org_user_is_disabled_but_present:Fr.t("This person is already in your workspace, but they have been deactivated by your organization. Contact an organization administrator to re-enable their account."),mismatch_with_pending_team_invite:function e(t){var a=t.userType;switch(a){case"ultra_restricted":return Fr.t("This person can\u2019t be invited, because they have already been invited as a Single-Channel Guest to your organization.");case"restricted":return Fr.t("This person can\u2019t be invited, because they have already been invited as a Multi-Channel Guest to your organization.");default:return Fr.t("This person can\u2019t be invited, because they have already been invited as a Full Member to your organization.")}},user_type_mismatch:function e(t){var a=t.issue;switch(a){case"org_user_is_restricted":return Fr.t("This person already has a Multi-Channel Guest account for your organization, so you can only invite them in that role.");case"org_user_is_ultra_restricted":return Fr.t("This person already has a Single-Channel Guest account for your organization, so you can only invite them in that role.");case"org_user_not_restricted":case"org_user_not_ultra_restricted":return Fr.t("This person already has a Full Member account for your organization, so you can only invite them in that role.");default:return Fr.t("This person already has an account for your organization")}}});return a}De()(t,[{key:"onClickTryAgainButton",value:function e(t){var a=this;return function(){return a.props.onClickTryAgainButton(t)}}},{key:"getCopy",value:function e(t){var a=t.successfulInvitesCount,n=t.unsuccessfulInvitesCount;if(!this.props.featureModernizeInvites)return{};if(a&&n)return{headerCopy:Fr.t("That was only a partial success."),headerQaAttr:"invite_modal_invites_sent_header_copy_partial_success",subheaderCopy:Fr.rt("You\u2019ve invited <strong>{successfulInvitesCount, plural, =1 {# Member} other {# Members}},</strong> but <strong>{unsuccessfulInvitesCount, plural, =1 {# invitation} other {# invitations}} didn\u2019t send.</strong> Review the {unsuccessfulInvitesCount, plural, =1 {error} other {errors}} below.",{successfulInvitesCount:a,unsuccessfulInvitesCount:n}),tryAgainCopy:Fr.t("Try Again"),tryAgainQaAttr:"invite_modal_invites_sent_try_again_success_and_failure"};if(a)return{headerCopy:Fr.t("Your {successfulInvitesCount, plural, =1 {# invitation has} other {# invitations have}} been sent!",{successfulInvitesCount:a}),headerQaAttr:"invite_modal_invites_sent_header_copy_success",subheaderCopy:Fr.rt("You\u2019ve invited <strong>{successfulInvitesCount, plural, =1 {# Member} other {# Members}}</strong> to your workspace.",{successfulInvitesCount:a}),tryAgainCopy:Fr.t("Invite More People"),tryAgainQaAttr:"invite_modal_invites_sent_try_again_success"};return{headerCopy:Fr.t("That didn\u2019t work!"),headerQaAttr:"invite_modal_invites_sent_header_copy_failure",subheaderCopy:Fr.rt("<strong>{unsuccessfulInvitesCount, plural, =1 {# invitation} other {# invitations}} didn\u2019t send.</strong> Review the {unsuccessfulInvitesCount, plural, =1 {error} other {errors}} below.",{unsuccessfulInvitesCount:n}),tryAgainCopy:Fr.t("Try Again"),tryAgainQaAttr:"invite_modal_invites_sent_try_again_failure"}}},{key:"sortInvites",value:function e(){var t=[];var a=[];this.props.invites.forEach(function(e){var n=e.email,r=e.ok,i=e.apiError,o=e.userType,s=e.issue,l=e.name;r?t.push({email:n,name:l}):a.push({email:n,apiError:i,userType:o,issue:s})});return{successfulInvites:t,unsuccessfulInvites:a}}},{key:"maybeRenderSuccessfulInvites",value:function e(t){if(0===t.length||!this.props.featureModernizeInvites)return null;return r.a.createElement("table",{className:"p-invite_modal__sent_invites_table","data-qa":"invite_modal_invites_sent_successful_invites"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_header_cell--successful"},Fr.t("Email Address")),r.a.createElement("th",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_header_cell--successful"},Fr.t("Name")))),r.a.createElement("tbody",null,t.map(function(e){var t=e.email,a=e.name;return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_cell--non_header"},t),r.a.createElement("td",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_cell--non_header"},a))})))}},{key:"maybeRenderUnsuccessfulInvites",value:function e(t){var a=this;if(0===t.length||!this.props.featureModernizeInvites)return null;var n=t.map(function(e,t){var n=e.email,i=e.apiError,o=e.userType,s=e.issue;var l=a.errorMap[i];Object(f["isFunction"])(a.errorMap[i])&&(l=l({userType:o,issue:s}));var c=""+n+t;return r.a.createElement("tr",{key:c},r.a.createElement("td",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_cell--non_header"},n),r.a.createElement("td",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_cell--non_header"},l))});return r.a.createElement("table",{className:"p-invite_modal__sent_invites_table","data-qa":"invite_modal_invites_sent_unsuccessful_invites"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_header_cell--unsuccessful"},Fr.t("Email Address")),r.a.createElement("th",{className:"p-invite_modal__sent_invites_cell p-invite_modal__sent_invites_header_cell--unsuccessful"},Fr.t("What went wrong")))),r.a.createElement("tbody",null,n))}},{key:"render",value:function e(){var t=this.props,a=t.invites,i=t.onClickDoneButton;var o=this.sortInvites(a),s=o.successfulInvites,l=o.unsuccessfulInvites;var c=this.getCopy({successfulInvitesCount:s.length,unsuccessfulInvitesCount:l.length}),u=c.headerCopy,d=c.headerQaAttr,p=c.subheaderCopy,f=c.tryAgainCopy,m=c.tryAgainQaAttr;return r.a.createElement(n["Fragment"],null,r.a.createElement("header",{className:"p-invite_modal__header","data-qa":d},r.a.createElement("h1",{className:"p-invite_modal__header_copy"},u),r.a.createElement("h3",{className:"p-invite_modal__subheader_copy"},p)),this.maybeRenderSuccessfulInvites(s),this.maybeRenderUnsuccessfulInvites(l),r.a.createElement("div",{className:"p-invite_modal__post_send_buttons"},r.a.createElement("div",{className:"p-invite_modal__left_post_send_buttons"},r.a.createElement("a",{className:"p-invite_modal__pending_invites c-button c-button--outline c-button--large null--outline null--large",href:"/admin/invites",target:"admin_invites"},Fr.t("View Pending Invites")),r.a.createElement(Ze["d"],{size:"large",type:"outline",onClick:this.onClickTryAgainButton(l),"data-qa":m},f)),r.a.createElement(Ze["d"],{size:"large",onClick:i,"data-qa":"invite_modal_invites_sent_done_button"},"Done")))}}]);return t}(n["Component"]);Ur.displayName="InviteModalInvitesSent";Ur.defaultProps=Br;var qr=Ur;var Gr=a(2180);var Hr=new K["b"]("invite");var Wr={regular:"regular",restricted:"restricted",ultraRestricted:"ultra_restricted"};var Vr={sendInvitesForm:"sendInvitesForm",invitesSent:"invitesSent"};var zr={currentTeam:Ge.a.object.isRequired,onClose:Ge.a.func.isRequired,submitSendInvites:Ge.a.func.isRequired,closeModal:Ge.a.func,featureModernizeInvites:Ge.a.bool};var Qr={currentTeam:{},onClose:m.a.noop,featureModernizeInvites:false,closeModal:m.a.noop};var Kr=function(e){Ue()(t,e);function t(e){xe()(this,t);var a=Le()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={invites:[{},{},{}],view:Vr.sendInvitesForm};a.getCopy=a.getCopy.bind(a);a.updateInviteEmail=a.updateInviteEmail.bind(a);a.updateInviteName=a.updateInviteName.bind(a);a.addInviteRow=a.addInviteRow.bind(a);a.deleteInviteRow=a.deleteInviteRow.bind(a);a.submitForm=a.submitForm.bind(a);a.showSentInvites=a.showSentInvites.bind(a);a.showSendInvitesForm=a.showSendInvitesForm.bind(a);return a}De()(t,[{key:"getCopy",value:function e(t){if(!this.props.featureModernizeInvites)return;switch(t){case"email_address_label":return Hr.t("Email Address");case"name_label":return Hr.t("Name (optional)");case"initial_email_label_id":return"invite_modal_initial_email_label";case"initial_name_label_id":return"invite_modal_initial_name_label";default:return}}},{key:"deleteInviteRow",value:function e(t){this.setState(function(e){var a=e.invites;var n=m.a.clone(a);n.splice(t,1);return{invites:n}})}},{key:"addInviteRow",value:function e(){this.setState(function(e){var t=e.invites;var a=t.concat([{}]);return{invites:a}})}},{key:"updateInviteEmail",value:function e(t,a){this.updateInviteValue({email:t,emailError:void 0},a)}},{key:"updateInviteName",value:function e(t,a){this.updateInviteValue({name:t},a)}},{key:"updateInviteValue",value:function e(t,a){this.setState(function(e){var n=e.invites;var r=m.a.clone(n);m.a.assign(r[a],t);return{invites:r}})}},{key:"submitForm",value:function e(t){var a=this;t.preventDefault();this.setState(function(e){var t=e.invites;return{invites:a.validateInvites(t)}},this.sendInvites)}},{key:"validateInvites",value:function e(t){var a=[];t.forEach(function(e){var t=e.email,n=e.name;t&&t.trim()&&a.push({email:t,emailError:Object(br["a"])(t)?void 0:Hr.t("That doesn\u2019t look like a valid email address!"),name:n})});0===a.length&&a.push({});return a}},{key:"sendInvites",value:function e(){var t=this.state.invites;var a=this.showSentInvites;if(m.a.get(t,"[0].email")&&!m.a.some(t,"emailError")){var n=t.map(function(e){var t=e.email,a=e.name;return{email:t,real_name:a,type:Wr.regular,source:"invite_modal",mode:"manual"}});this.props.submitSendInvites({invites:n}).then(function(e){var t=e.ok,n=e.invites;t&&n&&a(n)})}}},{key:"showSentInvites",value:function e(t){this.setState(function(e){var a=e.invites;return{view:Vr.invitesSent,invites:t.map(function(e){var t=e.email,n=e.ok,r=e.error,i=e.user_type,o=e.issue;var s=m.a.find(a,function(e){return m.a.isUndefined(r)&&e.email===t&&!m.a.isUndefined(e.name)});var l=s&&s.name;return{email:t,ok:n,apiError:r,userType:i,issue:o,name:l}})}})}},{key:"showSendInvitesForm",value:function e(t){var a=t.map(function(e){var t=e.email;return{email:t}});0===a.length&&a.push({},{},{});this.setState(function(){return{view:Vr.sendInvitesForm,invites:a}})}},{key:"renderCurrentView",value:function e(){switch(this.state.view){case Vr.sendInvitesForm:return r.a.createElement(Dr,{currentTeamName:Object(gr["getTeamDisplayName"])(this.props.currentTeam),onSubmit:this.submitForm,getCopy:this.getCopy,addInviteRow:this.addInviteRow,featureModernizeInvites:this.props.featureModernizeInvites,invites:this.state.invites,updateInviteEmail:this.updateInviteEmail,updateInviteName:this.updateInviteName,deleteInviteRow:this.deleteInviteRow});case Vr.invitesSent:return r.a.createElement(qr,{invites:this.state.invites,featureModernizeInvites:this.props.featureModernizeInvites,onClickDoneButton:this.props.closeModal,onClickTryAgainButton:this.showSendInvitesForm});default:return null}}},{key:"render",value:function e(){if(!this.props.featureModernizeInvites)return null;return r.a.createElement(_r["a"],{onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,modalClasses:"p-invite_modal",contentLabel:"invite-modal"},this.renderCurrentView())}}]);return t}(n["Component"]);Kr.displayName="InviteModal";Kr.defaultProps=Qr;var Yr=function e(t){return{currentTeam:Object(V["getCurrentTeam"])(t),featureModernizeInvites:Object(R["isFeatureEnabled"])(t,"feature_modernize_invites")}};var Jr={submitSendInvites:vr,closeModal:fr["closeModal"]};var Zr=Object(i["connect"])(Yr,Jr)(Kr);var Xr=Zr;var $r=Object(pr["b"])("Opens the invite (new users) modal",function(e){e(Object(fr["openModal"])({element:r.a.createElement(Xr)}))});var ei=$r;var ti="shared_channels_channel_sidebar_plus_btn";var ai="react_channel_sidebar_display_item";var ni=Object(F["a"])(1);var ri=function e(t,a,n){ni&&Object(u["e"])(ai+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(c["a"])({id:n})).catch(function(e){Object(sr["c"])("beep");throw e}).finally(function(){ni&&Object(u["g"])(ai,ai+"_mark")})};var ii=function e(t){return Object(O["a"])(t,true)};var oi=function e(){return k({element:ti})};var si=function e(t,a,n){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var c=Object(s["d"])(t);var u=c.getState();var f=Object(p["getGroupForUser"])(u,"speedy_sidebar_boot");"experiment"===f&&c.dispatch(Object(l["bulkAddChannels"])({channels:Object(d["a"])()}));var m=function e(t){return ri(c.dispatch,c.getState,t)};var h=function e(){return dr(c)};var k=Object(R["isFeatureEnabled"])(u,"feature_modernize_invites")?function(){return c.dispatch(ei())}:ii;Object(o["a"])(r.a.createElement(i["Provider"],{store:c},r.a.createElement(or,{onItemSelect:m,onBrowseChannelsClick:v,onBrowseSharedChannelsClick:g,onCreateChannelClick:b,onCreateSharedChannelClick:oi,onOpenDMClick:_,onBrowseAppsClick:y,onInviteClick:k,onDevToolsClick:h,ref:n})),a)};var li=si;var ci=a(51);Object(ci["a"])("interop.mountChannelSidebar",li)},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(430);var i=a(124);var o=a(365);var s=a(1094);var l=a(780);var c=a(16);function u(e){if(!e)return"";return"<@"+e.id+"|@"+Object(c["getMemberMentionName"])(e)+">"}var d=a(731);var p=a(1098);var f=a(868);var m=a(2964);var h=a(1095);var v=a(505);var g=a(621);var b=a(804);var _=a(1096);var y=a(3314);Object(n["a"])("interop.texty",{Delta:r["a"],PlainClipboardModule:r["b"],Quill:r["c"],SlackKeyboardModule:r["d"],TabCompleteModule:r["e"],TextyClass:r["f"],isRangeInCode:i["i"],convertContentsStringToContents:o["b"],convertContentsToString:s["a"],convertContentsToStringForDisplay:l["a"],getMemberAsContentsString:u,shouldHighlightMention:d["a"],convertContentsStringForSlashCommands:p["a"],convertContentsStringForEncodedMembers:f["a"],CONTENTS_STRING_MENTION_REGEX:o["a"],convertContentsStringToDisplayString:m["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getBroadcastMatch:v["a"],getDisplayTextForSearchResult:g["a"],trimAllowedMatchPrefix:b["a"],getContentsFromClipboard:h["a"],detachInvalidMentionsFromContents:_["a"],replacePotentialMentionsSynchronously:y["a"]})},,function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(483);var i=a(981);var o=a(653);var s=a(999);var l=a(3343);var c=a(70);var u=c["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(n["a"])("interop.slashCommand",{UNKNOWN_COMMAND:u,looksLikeSlashCommand:i["a"],parseEditLastMessageCommand:r["e"],parseArgs:r["d"],loadSlashCommands:l["a"],executeCommand:o["executeCommand"],sonicCommand:s["a"]})},function(e){e.exports={100:["100","full","hundred","score"],1234:["1234","input","numbers"],"skin-tone-2":["skin tone","type 1\u20132"],"skin-tone-3":["skin tone","type 3"],"skin-tone-4":["skin tone","type 4"],"skin-tone-5":["skin tone","type 5"],"skin-tone-6":["skin tone","type 6"],grinning:["face","grin","people","person"],grin:["eye","face","grin","smile","people","person"],joy:["face","joy","laugh","tear","happy","person","people"],rolling_on_the_floor_laughing:["face","floor","laugh","rolling"],smiley:["face","mouth","open","smile","person","people"],smile:["eye","face","mouth","open","smile","person","people"],sweat_smile:["cold","face","open","smile","sweat","person","people"],laughing:["face","laugh","mouth","open","satisfied","smile","person","people","funny","lol"],wink:["face","wink","person","people"],blush:["blush","eye","face","smile","person","people"],yum:["delicious","face","savouring","smile","um","yum","person","people"],sunglasses:["bright","cool","eye","eyewear","face","glasses","smile","sun","sunglasses","shades","person","people"],heart_eyes:["eye","face","love","smile","heart","person","people"],kissing_heart:["face","kiss","person","people","heart"],kissing:["face","kiss","person","people"],kissing_smiling_eyes:["eye","face","kiss","smile","person","people"],kissing_closed_eyes:["closed","eye","face","kiss","person","people"],relaxed:["face","outlined","relaxed","smile","people","person"],slightly_smiling_face:["face","smile"],hugging_face:["face","hug","hugging"],"star-struck":["eyes","face","grinning","star"],thinking_face:["face","thinking"],face_with_raised_eyebrow:["distrust","skeptic"],neutral_face:["deadpan","face","neutral","nonplussed","people","person"],expressionless:["expressionless","face","inexpressive","unexpressive","deadpan","people","person"],no_mouth:["face","mouth","quiet","silent","person","people"],face_with_rolling_eyes:["eyes","face","rolling"],smirk:["face","smirk","person","people"],persevere:["face","persevere","person","people"],disappointed_relieved:["disappointed","face","relieved","whew","phew","person","people"],open_mouth:["face","mouth","open","sympathy","surprised","people","person"],zipper_mouth_face:["face","mouth","zipper"],hushed:["face","hushed","stunned","surprised","person","people"],sleepy:["face","sleep","person","people"],tired_face:["face","tired","tantrum","person","people"],sleeping:["face","sleep","zzz","person","people"],relieved:["face","relieved","people","person"],stuck_out_tongue:["face","tongue","person","people"],stuck_out_tongue_winking_eye:["eye","face","joke","tongue","wink","person","people"],stuck_out_tongue_closed_eyes:["eye","face","horrible","taste","tongue","person","people"],drooling_face:["drooling","face"],unamused:["face","unamused","unhappy","unimpressed","person","people"],sweat:["cold","face","sweat","person","people"],pensive:["dejected","face","pensive","person","people"],confused:["confused","face","person","people"],upside_down_face:["face","upside-down"],money_mouth_face:["face","money","mouth"],astonished:["astonished","face","shocked","totally","people","person"],white_frowning_face:["face","frown"],slightly_frowning_face:["face","frown"],confounded:["confounded","face","dumbfounded","person","people"],disappointed:["disappointed","face","person","people"],worried:["face","worried","person","people"],triumph:["face","triumph","won","hmph","person","people"],cry:["cry","face","sad","tear","tears","people","person"],sob:["cry","face","sad","sob","tear","person","people"],frowning:["face","frown","mouth","open","people","person"],anguished:["anguished","face","upset","shocked","people","person"],fearful:["face","fear","fearful","scared","people","person"],weary:["face","tired","weary","person","people"],exploding_head:["shocked"],grimacing:["face","grimace","people","person"],cold_sweat:["blue","cold","face","mouth","open","rushed","sweat","nervous","person","people"],scream:["face","fear","fearful","munch","scared","scream","person","people"],flushed:["dazed","face","flushed","embarrassed","people","person"],zany_face:["eye","goofy","large","small"],dizzy_face:["dizzy","face","person","people"],rage:["angry","face","mad","pouting","rage","red","anger","person","people"],angry:["angry","face","mad","anger","people","person"],face_with_symbols_on_mouth:["swearing"],mask:["cold","doctor","face","mask","medicine","sick"],face_with_thermometer:["face","ill","sick","thermometer"],face_with_head_bandage:["bandage","face","hurt","injury"],nauseated_face:["face","nauseated","vomit"],face_vomiting:["sick","vomit"],sneezing_face:["face","gesundheit","sneeze"],innocent:["angel","face","fairy tale","fantasy","halo","innocent","smile","saint","person","people"],face_with_cowboy_hat:["cowboy","cowgirl","face","hat"],clown_face:["clown","face"],lying_face:["face","lie","pinocchio"],shushing_face:["quiet","shush"],face_with_hand_over_mouth:["whoops"],face_with_monocle:["stuffy"],nerd_face:["face","geek","nerd"],smiling_imp:["face","fairy tale","fantasy","horns","smile","person","people","devil","evil"],imp:["demon","devil","face","fairy tale","fantasy","imp","evil","person","people"],japanese_ogre:["creature","face","fairy tale","fantasy","monster","ogre"],japanese_goblin:["creature","face","fairy tale","fantasy","monster","goblin"],skull:["death","face","fairy tale","monster","dead","skeleton","scary"],skull_and_crossbones:["crossbones","death","face","monster","skull"],ghost:["creature","face","fairy tale","fantasy","monster","ghoul","scary"],alien:["creature","extraterrestrial","face","fairy tale","fantasy","monster","ufo","martian","space"],space_invader:["alien","creature","extraterrestrial","face","fairy tale","fantasy","monster","ufo","video","game"],robot_face:["face","monster","robot"],hankey:["comic","dung","face","monster","poo","poop","shit"],smiley_cat:["cat","face","mouth","open","smile","animal"],smile_cat:["cat","eye","face","grin","smile","animal"],joy_cat:["cat","face","joy","tear","happy","animal"],heart_eyes_cat:["cat","eye","face","love","smile","heart","animal"],smirk_cat:["cat","face","ironic","smile","wry","animal"],kissing_cat:["cat","eye","face","kiss","animal"],scream_cat:["cat","face","oh","surprised","weary","animal"],crying_cat_face:["cat","cry","face","sad","tear","animal"],pouting_cat:["cat","face","pouting","animal","sad"],see_no_evil:["evil","face","forbidden","gesture","monkey","no","not","prohibited","see","animal"],hear_no_evil:["evil","face","forbidden","gesture","hear","monkey","no","not","prohibited","animal"],speak_no_evil:["evil","face","forbidden","gesture","monkey","no","not","prohibited","speak","animal"],baby:["young","infant","face","people","person"],child:["gender-neutral","young"],boy:["young","person","people","face"],girl:["Virgo","young","zodiac","person","people","face"],adult:["gender-neutral"],older_adult:["gender-neutral","old"],older_man:["man","old","senior","elder","person","people","face"],older_woman:["old","woman","senior","elder","people","person","face"],"male-doctor":["doctor","healthcare","man","nurse","therapist"],"female-doctor":["doctor","healthcare","nurse","therapist","woman"],"male-student":["graduate","man","student"],"female-student":["graduate","student","woman"],"male-teacher":["instructor","man","professor","teacher"],"female-teacher":["instructor","professor","teacher","woman"],"male-judge":["justice","man","scales"],"female-judge":["judge","scales","woman"],"male-farmer":["farmer","gardener","man","rancher"],"female-farmer":["farmer","gardener","rancher","woman"],"male-cook":["chef","cook","man"],"female-cook":["chef","cook","woman"],"male-mechanic":["electrician","man","mechanic","plumber","tradesperson"],"female-mechanic":["electrician","mechanic","plumber","tradesperson","woman"],"male-factory-worker":["assembly","factory","industrial","man","worker"],"female-factory-worker":["assembly","factory","industrial","woman","worker"],"male-office-worker":["architect","business","man","manager","office","white-collar"],"female-office-worker":["architect","business","manager","office","white-collar","woman"],"male-scientist":["biologist","chemist","engineer","man","mathematician","physicist","scientist"],"female-scientist":["biologist","chemist","engineer","mathematician","physicist","scientist","woman"],"male-technologist":["coder","developer","inventor","man","software","technologist"],"female-technologist":["coder","developer","inventor","software","technologist","woman"],"male-singer":["actor","entertainer","man","rock","singer","star"],"female-singer":["actor","entertainer","rock","singer","star","woman"],"male-artist":["artist","man","palette"],"female-artist":["artist","palette","woman"],"male-pilot":["man","pilot","plane"],"female-pilot":["pilot","plane","woman"],"male-astronaut":["astronaut","man","rocket"],"female-astronaut":["astronaut","rocket","woman"],"male-firefighter":["firefighter","firetruck","man"],"female-firefighter":["firefighter","firetruck","woman"],cop:["cop","officer","police","people","person","face"],"male-police-officer":["cop","man","officer","police"],"female-police-officer":["cop","officer","police","woman"],sleuth_or_spy:["sleuth","spy"],"male-detective":["detective","man","sleuth","spy"],"female-detective":["detective","sleuth","spy","woman"],"male-guard":["guard","man"],"female-guard":["guard","woman"],construction_worker:["construction","hat","worker","person","people","face"],"male-construction-worker":["construction","man","worker"],"female-construction-worker":["construction","woman","worker"],princess:["fairy tale","fantasy","face","crown","people","person","woman"],man_with_turban:["turban","person","people","face"],"man-wearing-turban":["man","turban"],"woman-wearing-turban":["turban","woman"],man_with_gua_pi_mao:["gua pi mao","hat","man","person","people","face"],person_with_headscarf:["headscarf","hijab","mantilla","tichel"],bearded_person:["beard"],person_with_blond_hair:["blond","face","person","people"],"blond-haired-man":["blond","man"],"blond-haired-woman":["blonde","woman"],man_in_tuxedo:["groom","man","tuxedo"],bride_with_veil:["bride","veil","wedding","person","people","face","woman","marriage"],pregnant_woman:["pregnant","woman"],"breast-feeding":["baby","breast","nursing"],angel:["angel","baby","face","fairy tale","fantasy","heaven","saint","people","person"],santa:["celebration","Christmas","claus","father","santa","christmas","holidays"],mrs_claus:["celebration","Christmas","claus","mother","Mrs."],mage:["sorcerer","sorceress","witch","wizard"],female_mage:["sorceress","witch"],male_mage:["sorcerer","wizard"],fairy:["Oberon","Puck","Titania"],female_fairy:["Titania"],male_fairy:["Oberon","Puck"],vampire:["Dracula","undead"],female_vampire:["undead"],male_vampire:["Dracula","undead"],merperson:["mermaid","merman","merwoman"],mermaid:["merwoman"],merman:["Triton"],elf:["magical"],female_elf:["magical"],male_elf:["magical"],genie:["djinn"],female_genie:["djinn"],male_genie:["djinn"],zombie:["undead","walking dead"],female_zombie:["undead","walking dead"],male_zombie:["undead","walking dead"],person_frowning:["frown","gesture","face","person","people","sad"],"man-frowning":["frowning","gesture","man"],"woman-frowning":["frowning","gesture","woman"],person_with_pouting_face:["gesture","pouting","face","person","people"],"man-pouting":["gesture","man","pouting"],"woman-pouting":["gesture","pouting","woman"],no_good:["forbidden","gesture","hand","no","not","prohibited","person","people","becky"],"man-gesturing-no":["forbidden","gesture","hand","man","no","prohibited"],"woman-gesturing-no":["forbidden","gesture","hand","no","prohibited","woman"],ok_woman:["gesture","hand","OK","woman","people","person","becky"],"man-gesturing-ok":["gesture","hand","man","OK"],"woman-gesturing-ok":["gesture","hand","OK","woman"],information_desk_person:["hand","help","information","sassy","tipping","helpdesk","desk","person","people","becky"],"man-tipping-hand":["man","sassy","tipping hand"],"woman-tipping-hand":["sassy","tipping hand","woman"],raising_hand:["gesture","hand","happy","raised","people","person","becky"],"man-raising-hand":["gesture","man","raising hand"],"woman-raising-hand":["gesture","raising hand","woman"],bow:["apology","bow","gesture","sorry","person","people"],"man-bowing":["apology","bowing","favor","gesture","man","sorry"],"woman-bowing":["apology","bowing","favor","gesture","sorry","woman"],face_palm:["disbelief","exasperation","face","palm"],"man-facepalming":["disbelief","exasperation","facepalm","man"],"woman-facepalming":["disbelief","exasperation","facepalm","woman"],shrug:["doubt","ignorance","indifference","shrug"],"man-shrugging":["doubt","ignorance","indifference","man","shrug"],"woman-shrugging":["doubt","ignorance","indifference","shrug","woman"],massage:["face","massage","salon","relax","becky"],"man-getting-massage":["face","man","massage"],"woman-getting-massage":["face","massage","woman"],haircut:["barber","beauty","haircut","parlor","face","people","person","salon"],"man-getting-haircut":["haircut","man"],"woman-getting-haircut":["haircut","woman"],walking:["hike","walk","walking","person","people"],"man-walking":["hike","man","walk"],"woman-walking":["hike","walk","woman"],runner:["marathon","running","run","sport"],"man-running":["man","marathon","racing","running"],"woman-running":["marathon","racing","running","woman"],dancer:["dancing","woman","person","people"],man_dancing:["dance","man"],dancers:["bunny ear","dancer","partying","people","person"],"man-with-bunny-ears-partying":["bunny ear","dancer","men","partying"],"woman-with-bunny-ears-partying":["bunny ear","dancer","partying","women"],person_in_steamy_room:["sauna","steam room"],woman_in_steamy_room:["sauna","steam room"],man_in_steamy_room:["sauna","steam room"],person_climbing:["climber"],woman_climbing:["climber"],man_climbing:["climber"],person_in_lotus_position:["meditation","yoga"],woman_in_lotus_position:["meditation","yoga"],man_in_lotus_position:["meditation","yoga"],bath:["bath","bathtub","washroom","restroom"],sleeping_accommodation:["hotel","sleep"],man_in_business_suit_levitating:["business","man","suit"],speaking_head_in_silhouette:["face","head","silhouette","speak","speaking"],bust_in_silhouette:["bust","silhouette","person","people"],busts_in_silhouette:["bust","silhouette","person","people"],fencer:["fencer","fencing","sword"],horse_racing:["horse","jockey","racehorse","racing","animal"],skier:["ski","snow"],snowboarder:["ski","snow","snowboard","sport"],golfer:["ball","golf"],"man-golfing":["golf","man"],"woman-golfing":["golf","woman"],surfer:["surfing","sport"],"man-surfing":["man","surfing"],"woman-surfing":["surfing","woman"],rowboat:["boat","rowboat"],"man-rowing-boat":["boat","man","rowboat"],"woman-rowing-boat":["boat","rowboat","woman"],swimmer:["swim","sport"],"man-swimming":["man","swim"],"woman-swimming":["swim","woman"],person_with_ball:["ball"],"man-bouncing-ball":["ball","man"],"woman-bouncing-ball":["ball","woman"],weight_lifter:["lifter","weight"],"man-lifting-weights":["man","weight lifter"],"woman-lifting-weights":["weight lifter","woman"],bicyclist:["bicycle","biking","cyclist","bike","sport"],"man-biking":["bicycle","biking","cyclist","man"],"woman-biking":["bicycle","biking","cyclist","woman"],mountain_bicyclist:["bicycle","bicyclist","bike","cyclist","mountain","sport"],"man-mountain-biking":["bicycle","bike","cyclist","man","mountain"],"woman-mountain-biking":["bicycle","bike","biking","cyclist","mountain","woman"],racing_car:["car","racing"],racing_motorcycle:["racing"],person_doing_cartwheel:["cartwheel","gymnastics"],"man-cartwheeling":["cartwheel","gymnastics","man"],"woman-cartwheeling":["cartwheel","gymnastics","woman"],wrestlers:["wrestle","wrestler"],"man-wrestling":["men","wrestle"],"woman-wrestling":["women","wrestle"],water_polo:["polo","water"],"man-playing-water-polo":["man","water polo"],"woman-playing-water-polo":["water polo","woman"],handball:["ball","handball"],"man-playing-handball":["handball","man"],"woman-playing-handball":["handball","woman"],juggling:["balance","juggle","multitask","skill"],"man-juggling":["juggling","man","multitask"],"woman-juggling":["juggling","multitask","woman"],couple:["couple","hand","hold","man","woman","people"],two_men_holding_hands:["couple","Gemini","hand","hold","man","twins","zodiac","person","people"],two_women_holding_hands:["couple","hand","hold","woman","person","people"],couplekiss:["couple","man","woman","kiss","people"],couple_with_heart:["couple","love","man","heart","woman","people"],selfie:["camera","phone"],muscle:["biceps","comic","flex","muscle","bicep","arm","person","people"],point_left:["backhand","finger","hand","index","point","person","people"],point_right:["backhand","finger","hand","index","point","person","people"],point_up:["finger","hand","index","point","up","person","people"],point_up_2:["backhand","finger","hand","index","point","up","person","people"],middle_finger:["finger","hand"],point_down:["backhand","down","finger","hand","index","point","person","people"],v:["hand","v","victory","peace","people","person"],crossed_fingers:["cross","finger","hand","luck"],"spock-hand":["finger","hand","spock","vulcan"],the_horns:["finger","hand","horns","rock-on"],call_me_hand:["call","hand"],raised_hand_with_fingers_splayed:["finger","hand","splayed"],hand:["hand","people","person"],ok_hand:["hand","OK","people","person"],"+1":["+1","hand","thumb","up","thumbsup","y","yes","people","person"],"-1":["-1","down","hand","thumb","thumbsdown","n","no","people","person"],fist:["clenched","fist","hand","punch","facepunch","fistbump","person","people"],facepunch:["clenched","fist","hand","punch","fistbump","person","people"],"left-facing_fist":["fist","leftwards"],"right-facing_fist":["fist","rightwards"],raised_back_of_hand:["backhand","raised"],wave:["hand","wave","waving","people","person"],i_love_you_hand_sign:["hand","ILY"],writing_hand:["hand","write"],clap:["clap","hand","hands","people","person"],open_hands:["hand","open","hands","people","person"],raised_hands:["celebration","gesture","hand","hooray","raised","people","person"],palms_up_together:["prayer"],pray:["ask","bow","folded","gesture","hand","please","pray","thanks","bless","people","person"],handshake:["agreement","hand","meeting","shake"],nail_care:["care","cosmetics","manicure","nail","polish","hand","people","person"],ear:["body","person","people","head"],nose:["body","face","people","person"],footprints:["clothing","footprint","print","feet","foot"],eyes:["eye","face","person","people"],eye:["body"],"eye-in-speech-bubble":["eye","speech bubble","witness"],brain:["intelligent"],tongue:["body","face","person","people"],lips:["lips","mouth","face","person","people"],kiss:["kiss","lips","love","mouth","face"],cupid:["arrow","cupid","heart"],heart:["heart"],heartbeat:["beating","heartbeat","pulsating","heart"],broken_heart:["break","broken","heartbreak","heart"],two_hearts:["love","heart"],sparkling_heart:["excited","sparkle","heart","sparkling","glitter","shine"],heartpulse:["excited","growing","nervous","pulse"],blue_heart:["blue","heart"],green_heart:["green","heart"],yellow_heart:["yellow","heart"],orange_heart:["orange"],purple_heart:["purple","heart"],black_heart:["black","evil","wicked"],gift_heart:["ribbon","valentine","present","heart"],revolving_hearts:["revolving","heart"],heart_decoration:["heart"],heavy_heart_exclamation_mark_ornament:["exclamation","mark","punctuation"],love_letter:["heart","letter","love","mail"],zzz:["comic","sleep","snore","snooze"],anger:["angry","comic","mad","face","people","person"],bomb:["comic"],boom:["boom","comic","bang","explosion","collision","bomb"],sweat_drops:["comic","splashing","sweat","water","spray"],dash:["comic","dash","running","gust","whoosh","wind","fart"],dizzy:["comic","star","shooting"],speech_balloon:["balloon","bubble","comic","dialog","speech","talk"],left_speech_bubble:["dialog","speech"],right_anger_bubble:["angry","balloon","bubble","mad"],thought_balloon:["balloon","bubble","comic","thought"],eyeglasses:["clothing","eye","eyeglasses","eyewear","glasses","spectacles"],dark_sunglasses:["dark","eye","eyewear","glasses"],necktie:["clothing"],shirt:["clothing","shirt","tshirt"],jeans:["clothing","pants","trousers"],scarf:["neck"],gloves:["hand"],coat:["jacket"],socks:["stocking"],dress:["clothing"],kimono:["clothing"],bikini:["clothing","swim","swimsuit","clothes"],womans_clothes:["clothing","woman","clothes"],purse:["clothing","coin","handbag","bag"],handbag:["bag","clothing","purse"],pouch:["bag","clothing","pouch","clutch"],shopping_bags:["bag","hotel","shopping"],school_satchel:["bag","satchel","school"],mans_shoe:["clothing","man","shoe"],athletic_shoe:["athletic","clothing","shoe","sneaker","runner"],high_heel:["clothing","heel","shoe","woman","stiletto"],sandal:["clothing","sandal","shoe","woman"],boot:["boot","clothing","shoe","woman","clothes"],crown:["clothing","king","queen","hat"],womans_hat:["clothing","hat","woman"],tophat:["clothing","hat","top","tophat"],mortar_board:["cap","celebration","clothing","graduation","hat"],billed_cap:["baseball cap"],helmet_with_white_cross:["aid","cross","face","hat","helmet"],prayer_beads:["beads","clothing","necklace","prayer","religion"],lipstick:["cosmetics","makeup"],ring:["diamond"],gem:["diamond","gem","jewel"],monkey_face:["face","monkey","animal"],dog:["dog","face","pet","animal"],dog2:["pet","animal"],poodle:["dog","animal"],wolf:["face","wolf","animal"],fox_face:["face","fox"],cat:["cat","face","pet","animal"],cat2:["pet","animal"],lion_face:["face","Leo","lion","zodiac"],tiger:["face","tiger","animal","cat"],horse:["face","horse","animal"],racehorse:["equestrian","racehorse","racing","animal"],unicorn_face:["face","unicorn"],zebra_face:["stripe"],cow:["cow","face","animal"],ox:["bull","Taurus","zodiac","animal"],water_buffalo:["buffalo","water","animal"],pig:["face","pig","animal"],pig2:["sow","animal"],boar:["pig","animal"],pig_nose:["face","nose","pig","animal"],ram:["Aries","male","sheep","zodiac","animal"],sheep:["female","sheep","animal"],goat:["Capricorn","zodiac","animal"],dromedary_camel:["dromedary","hump","animal","camel"],camel:["bactrian","camel","hump","animal"],giraffe_face:["spots"],mouse:["face","mouse","animal"],hamster:["face","hamster","pet","animal"],rabbit:["bunny","face","pet","rabbit","animal"],rabbit2:["bunny","pet","animal"],hedgehog:["spiny"],bat:["vampire"],bear:["bear","face","animal"],koala:["bear","animal"],panda_face:["face","panda","bear"],feet:["feet","paw","print","prints","paws"],turkey:["bird"],chicken:["bird","animal"],rooster:["bird","animal"],hatching_chick:["baby","bird","chick","hatching","animal"],baby_chick:["baby","bird","chick","animal"],hatched_chick:["baby","bird","chick","animal"],penguin:["bird","animal"],dove_of_peace:["bird","fly","peace"],eagle:["bird"],duck:["bird"],owl:["bird","wise"],frog:["face","frog","toad","animal"],turtle:["terrapin","tortoise","animal"],lizard:["reptile"],snake:["bearer","Ophiuchus","serpent","zodiac","animal"],dragon_face:["dragon","face","fairy tale","animal"],dragon:["fairy tale","animal"],sauropod:["brachiosaurus","brontosaurus","diplodocus"],"t-rex":["Tyrannosaurus Rex"],whale:["face","spouting","whale","animal","fish"],dolphin:["flipper","animal","fish"],fish:["Pisces","zodiac","animal"],tropical_fish:["fish","tropical","animal"],blowfish:["fish","animal"],shark:["fish"],shell:["shell","spiral","beach"],crab:["Cancer","zodiac"],shrimp:["food","shellfish","small"],squid:["food","molusc"],butterfly:["insect","pretty"],bug:["insect","caterpillar"],ant:["insect","bug"],bee:["bee","insect","honeybee","bug"],beetle:["beetle","insect","ladybird","ladybug","bug"],cricket:["grasshopper"],spider:["insect"],spider_web:["spider","web"],scorpion:["scorpio","Scorpio","zodiac"],bouquet:["flower","plant"],cherry_blossom:["blossom","cherry","flower","sakura"],white_flower:["flower","plant"],rosette:["plant"],rose:["flower","plant"],wilted_flower:["flower","wilted"],hibiscus:["flower","plant"],sunflower:["flower","sun","plant"],blossom:["flower","plant"],tulip:["flower","plant"],seedling:["young","plant"],evergreen_tree:["tree","evergreen","plant"],deciduous_tree:["deciduous","shedding","tree","plant"],palm_tree:["palm","tree","plant"],cactus:["plant"],ear_of_rice:["ear","grain","rice","food"],herb:["leaf","plant"],shamrock:["plant"],four_leaf_clover:["4","clover","four","leaf","plant"],maple_leaf:["falling","leaf","maple","plant"],fallen_leaf:["falling","leaf","leaves","brown","plant"],leaves:["blow","flutter","leaf","wind","plant"],grapes:["fruit","grape","food"],melon:["fruit","food"],watermelon:["fruit","food"],tangerine:["fruit","orange","food"],lemon:["citrus","fruit","food"],banana:["fruit","food"],pineapple:["fruit","food"],apple:["apple","fruit","red","food"],green_apple:["apple","fruit","green","food"],pear:["fruit","food"],peach:["fruit","food"],cherries:["berries","cherry","fruit","red","food"],strawberry:["berry","fruit","food"],kiwifruit:["food","fruit","kiwi"],tomato:["fruit","vegetable","food"],coconut:["palm","pi\xf1a colada"],avocado:["food","fruit"],eggplant:["aubergine","vegetable","food"],potato:["food","vegetable"],carrot:["food","vegetable"],corn:["corn","ear","maize","maze","vegetable","food"],hot_pepper:["hot","pepper"],cucumber:["food","pickle","vegetable"],broccoli:["wild cabbage"],mushroom:["toadstool","food"],peanuts:["food","nut","peanut","vegetable"],chestnut:["plant","food"],bread:["loaf"],croissant:["bread","crescent roll","food","french"],baguette_bread:["baguette","bread","food","french"],pretzel:["twisted"],pancakes:["cr\xeape","food","hotcake","pancake"],cheese_wedge:["cheese"],meat_on_bone:["bone","meat","food"],poultry_leg:["bone","chicken","leg","poultry","drumstick","meat","food"],cut_of_meat:["chop","lambchop","porkchop","steak"],bacon:["food","meat"],hamburger:["burger","cheeseburger","food"],fries:["french","fries","food"],pizza:["cheese","slice","food"],hotdog:["frankfurter","hotdog","sausage"],sandwich:["bread"],taco:["mexican"],burrito:["mexican","wrap"],stuffed_flatbread:["falafel","flatbread","food","gyro","kebab","stuffed"],egg:["food"],fried_egg:["egg","frying","pan","food"],shallow_pan_of_food:["casserole","food","paella","pan","shallow"],stew:["pot","stew","food"],bowl_with_spoon:["breakfast","cereal","congee"],green_salad:["food","green","salad"],canned_food:["can"],bento:["bento","box","food"],rice_cracker:["cracker","rice","food"],rice_ball:["ball","Japanese","rice","food"],rice:["cooked","rice","food"],curry:["curry","rice","food"],ramen:["bowl","noodle","ramen","steaming","noodles","food"],spaghetti:["pasta","food"],sweet_potato:["potato","roasted","sweet","yam","vegetable","food"],oden:["kebab","seafood","skewer","stick","food"],fried_shrimp:["fried","prawn","shrimp","tempura","food"],fish_cake:["cake","fish","pastry","swirl","food"],dango:["dessert","Japanese","skewer","stick","sweet","food"],dumpling:["empanada","gy\u014dza","jiaozi","pierogi","potsticker"],fortune_cookie:["prophecy"],takeout_box:["oyster pail"],icecream:["cream","dessert","ice","icecream","soft","sweet","food"],shaved_ice:["dessert","ice","shaved","sweet","snow","cone","food"],ice_cream:["cream","dessert","ice","sweet","icecream","food"],doughnut:["dessert","donut","sweet","food"],cookie:["dessert","sweet","food"],birthday:["birthday","cake","celebration","dessert","pastry","sweet","food"],cake:["cake","dessert","pastry","slice","sweet","birthday","food"],pie:["filling","pastry"],chocolate_bar:["bar","chocolate","dessert","sweet","candy","candybar","food"],candy:["dessert","sweet","food"],lollipop:["candy","dessert","sweet","food"],custard:["dessert","pudding","sweet","food"],honey_pot:["honey","honeypot","pot","sweet","food"],baby_bottle:["baby","bottle","drink","milk","infant"],glass_of_milk:["drink","glass","milk"],coffee:["beverage","coffee","drink","hot","steaming","tea","food"],tea:["beverage","cup","drink","tea","teacup","food"],sake:["bar","beverage","bottle","cup","drink","food"],champagne:["bar","bottle","cork","drink","popping"],wine_glass:["bar","beverage","drink","glass","wine","food"],cocktail:["bar","cocktail","drink","glass","martini","food"],tropical_drink:["bar","drink","tropical","food"],beer:["bar","beer","drink","mug","ale","food"],beers:["bar","beer","clink","drink","mug","ale","food"],clinking_glasses:["celebrate","clink","drink","glass"],tumbler_glass:["glass","liquor","shot","tumbler","whisky"],cup_with_straw:["juice","soda"],chopsticks:["hashi"],knife_fork_plate:["cooking","fork","knife","plate"],fork_and_knife:["cooking","fork","knife","cutlery","silverware","food"],spoon:["tableware"],hocho:["cooking","hocho","knife","tool","weapon"],amphora:["Aquarius","cooking","drink","jug","tool","weapon","zodiac"],earth_africa:["Africa","earth","Europe","globe","world"],earth_americas:["Americas","earth","globe","world"],earth_asia:["Asia","Australia","earth","globe","world"],globe_with_meridians:["earth","globe","meridians","world"],world_map:["map","world"],japan:["Japan","map"],snow_capped_mountain:["cold","mountain","snow"],volcano:["eruption","mountain"],mount_fuji:["fuji","mountain"],beach_with_umbrella:["beach","umbrella"],desert_island:["desert","island"],national_park:["park"],classical_building:["classical"],building_construction:["construction"],cityscape:["city"],derelict_house_building:["derelict","house"],house:["home","building"],house_with_garden:["garden","home","house","building"],office:["building"],post_office:["Japanese","post","building"],european_post_office:["European","post","building"],hospital:["doctor","medicine","building"],bank:["building"],hotel:["building"],love_hotel:["hotel","love","building"],convenience_store:["convenience","store","building"],school:["building"],department_store:["department","store","building"],factory:["building"],japanese_castle:["castle","Japanese","building"],european_castle:["European","castle"],wedding:["chapel","romance","marriage"],tokyo_tower:["Tokyo","tower","building"],statue_of_liberty:["liberty","statue"],church:["Christian","cross","religion","building"],mosque:["islam","Muslim","religion"],synagogue:["Jew","Jewish","religion","temple"],shinto_shrine:["religion","shinto","shrine"],kaaba:["islam","Muslim","religion"],tent:["camping"],foggy:["fog"],night_with_stars:["night","star","sky"],sunrise_over_mountains:["morning","mountain","sun","sunrise"],sunrise:["morning","sun"],city_sunset:["city","dusk","evening","landscape","sun","sunset"],city_sunrise:["dusk","sun"],bridge_at_night:["bridge","night"],hotsprings:["hot","hotsprings","springs","steaming","symbol"],milky_way:["space","galaxy"],carousel_horse:["carousel","horse","carnival"],ferris_wheel:["amusement park","ferris","wheel","carnival"],roller_coaster:["amusement park","coaster","roller","ride","carnival"],barber:["barber","haircut","pole"],circus_tent:["circus","tent","big","top"],performing_arts:["art","mask","performing","theater","theatre","comedy","tragedy","tragicomedy"],frame_with_picture:["art","frame","museum","painting","picture"],art:["art","museum","painting","palette","paint"],slot_machine:["game","slot","gambling","casino"],steam_locomotive:["engine","railway","steam","train","transport"],railway_car:["car","electric","railway","train","tram","trolleybus","transport"],bullettrain_side:["railway","shinkansen","speed","train","transport"],bullettrain_front:["bullet","railway","shinkansen","speed","train","transport"],train2:["railway","vehicle","transport"],metro:["subway","symbol"],light_rail:["railway","transport","train"],station:["railway","train","building"],tram:["trolleybus","vehicle","transport","train"],monorail:["vehicle","train","transport"],mountain_railway:["car","mountain","railway","train"],train:["car","tram","trolleybus","transport"],bus:["vehicle","automobile","transport"],oncoming_bus:["bus","oncoming","front","vehicle","automobile","transport"],trolleybus:["bus","tram","trolley","vehicle","automobile"],minibus:["bus","vehicle","transport","automobile"],ambulance:["vehicle","paramedic"],fire_engine:["engine","fire","truck","vehicle","automobile"],police_car:["car","patrol","police","cop","automobile","vehicle","transport"],oncoming_police_car:["car","oncoming","police","front","cop","vehicle","automobile","transport"],taxi:["vehicle","cab","car","automobile","transport"],oncoming_taxi:["oncoming","taxi","fron","cab","car","vehicle","automobile","transport"],car:["car","vehicle","automobile","transport"],oncoming_automobile:["automobile","car","oncoming","front","vehicle","transport"],blue_car:["recreational","sport utility","car","automobile","transport"],truck:["delivery","truck","vehicle","automobile","transport"],articulated_lorry:["lorry","semi","truck","automobile","vehicle","transport"],tractor:["vehicle","farm"],bike:["bike","bicycle","cycle","sport","cyclist"],scooter:["kick","scooter"],motor_scooter:["motor","scooter"],busstop:["bus","busstop","stop"],motorway:["highway","road"],railway_track:["railway","train"],fuelpump:["fuel","fuelpump","gas","pump","station"],rotating_light:["beacon","car","light","police","revolving","siren"],traffic_light:["light","signal","traffic"],vertical_traffic_light:["light","signal","traffic"],construction:["barrier"],octagonal_sign:["octagonal","sign","stop"],anchor:["ship","tool"],boat:["boat","resort","sea","yacht"],canoe:["boat"],speedboat:["boat"],passenger_ship:["passenger","ship"],ferry:["boat","passenger"],motor_boat:["boat","motorboat"],ship:["boat","passenger"],airplane:["aeroplane","plane","travel","fly","transport"],small_airplane:["aeroplane","airplane"],airplane_departure:["aeroplane","airplane","check-in","departure","departures"],airplane_arriving:["aeroplane","airplane","arrivals","arriving","landing"],seat:["chair","airplane","seat"],helicopter:["vehicle","chopper","fly"],suspension_railway:["railway","suspension","train","transport"],mountain_cableway:["cable","gondola","mountain","transport"],aerial_tramway:["aerial","cable","car","gondola","tramway","transport"],satellite:["space"],rocket:["space","spaceship"],flying_saucer:["UFO"],bellhop_bell:["bell","bellhop","hotel"],bed:["hotel","sleep"],couch_and_lamp:["couch","hotel","lamp"],shower:["water","bathroom","restroom","washroom"],bathtub:["bath","washroom","restroom"],hourglass:["sand","timer"],hourglass_flowing_sand:["hourglass","sand","timer"],watch:["clock","time"],alarm_clock:["alarm","clock"],stopwatch:["clock"],timer_clock:["clock","timer"],mantelpiece_clock:["clock"],clock12:["00","12","12:00","clock","o\u2019clock","twelve","time"],clock1230:["12","12:30","30","clock","thirty","twelve","time"],clock1:["00","1","1:00","clock","o\u2019clock","one","time"],clock130:["1","1:30","30","clock","one","thirty","time"],clock2:["00","2","2:00","clock","o\u2019clock","two","time"],clock230:["2","2:30","30","clock","thirty","two","time"],clock3:["00","3","3:00","clock","o\u2019clock","three","time"],clock330:["3","3:30","30","clock","thirty","three","time"],clock4:["00","4","4:00","clock","four","o\u2019clock","time"],clock430:["30","4","4:30","clock","four","thirty","time"],clock5:["00","5","5:00","clock","five","o\u2019clock","time"],clock530:["30","5","5:30","clock","five","thirty","time"],clock6:["00","6","6:00","clock","o\u2019clock","six","time"],clock630:["30","6","6:30","clock","six","thirty","time"],clock7:["00","7","7:00","clock","o\u2019clock","seven","time"],clock730:["30","7","7:30","clock","seven","thirty","time"],clock8:["00","8","8:00","clock","eight","o\u2019clock","time"],clock830:["30","8","8:30","clock","eight","thirty","time"],clock9:["00","9","9:00","clock","nine","o\u2019clock","time"],clock930:["30","9","9:30","clock","nine","thirty","time"],clock10:["00","10","10:00","clock","o\u2019clock","ten","time"],clock1030:["10","10:30","30","clock","ten","thirty","time"],clock11:["00","11","11:00","clock","eleven","o\u2019clock","time"],clock1130:["11","11:30","30","clock","eleven","thirty","time"],new_moon:["dark","moon","new"],waxing_crescent_moon:["crescent","moon","waxing"],first_quarter_moon:["moon","quarter","first"],moon:["gibbous","moon","waxing"],full_moon:["full","moon"],waning_gibbous_moon:["gibbous","moon","waning"],last_quarter_moon:["moon","quarter","last"],waning_crescent_moon:["crescent","moon","waning"],crescent_moon:["crescent","moon"],new_moon_with_face:["face","moon","new","with"],first_quarter_moon_with_face:["face","moon","quarter","moon_first","with"],last_quarter_moon_with_face:["face","moon","quarter","last","with"],thermometer:["weather"],sunny:["bright","rays","sunny","sun","weather"],full_moon_with_face:["bright","face","full","moon","with"],sun_with_face:["bright","face","sun","weather"],star:["star"],star2:["glittery","glow","shining","sparkle","star"],stars:["falling","shooting","star"],cloud:["weather","sky"],partly_sunny:["cloud","sun","clouds"],thunder_cloud_and_rain:["cloud","rain","thunder"],mostly_sunny:["cloud","sun"],barely_sunny:["cloud","sun"],partly_sunny_rain:["cloud","rain","sun"],rain_cloud:["cloud","rain"],snow_cloud:["cloud","cold","snow"],lightning:["cloud","lightning"],tornado:["cloud","whirlwind"],fog:["cloud"],wind_blowing_face:["blow","cloud","face","wind"],cyclone:["dizzy","twister","typhoon","symbol"],rainbow:["rain"],closed_umbrella:["clothing","rain","umbrella"],umbrella:["clothing","rain"],umbrella_with_rain_drops:["clothing","drop","rain","umbrella"],umbrella_on_ground:["rain","sun","umbrella"],zap:["danger","electric","electricity","lightning","voltage","zap","bolt","shock","weather"],snowflake:["cold","snow","weather"],snowman:["cold","snow"],snowman_without_snow:["cold","snow","snowman"],comet:["space"],fire:["flame","tool","flames","burn"],droplet:["cold","comic","drop","sweat","water","tear","cry"],ocean:["ocean","water","wave","tidal"],jack_o_lantern:["celebration","halloween","jack","lantern","pumpkin","scary"],christmas_tree:["celebration","Christmas","tree","plant"],fireworks:["celebration","explosions","celebrate"],sparkler:["celebration","fireworks","sparkle"],sparkles:["sparkle","star","glitter","shine"],balloon:["celebration"],tada:["celebration","party","popper","tada","celebrate","fan","fare","confetti"],confetti_ball:["ball","celebration","confetti","party","celebrate"],tanabata_tree:["banner","celebration","Japanese","tree","plant"],bamboo:["bamboo","celebration","Japanese","pine","plants"],dolls:["celebration","doll","festival","Japanese"],flags:["carp","celebration","streamer","flag"],wind_chime:["bell","celebration","chime","wind"],rice_scene:["celebration","ceremony","moon"],ribbon:["celebration","bow","present","gift"],gift:["box","celebration","gift","present","wrapped"],reminder_ribbon:["celebration","reminder","ribbon"],admission_tickets:["admission","ticket"],ticket:["admission"],medal:["celebration","medal","military"],trophy:["prize"],sports_medal:["medal"],first_place_medal:["first","gold","medal"],second_place_medal:["medal","second","silver"],third_place_medal:["bronze","medal","third"],soccer:["ball","football","soccer","sport"],baseball:["ball","sports"],basketball:["ball","hoop","sports"],volleyball:["ball","game"],football:["american","ball","football","sport"],rugby_football:["ball","football","rugby","sport"],tennis:["ball","racquet","sport"],"8ball":["8","8 ball","ball","billiard","eight","game","eightball"],bowling:["ball","game","sport"],cricket_bat_and_ball:["ball","bat","game"],field_hockey_stick_and_ball:["ball","field","game","hockey","stick"],ice_hockey_stick_and_puck:["game","hockey","ice","puck","stick"],table_tennis_paddle_and_ball:["ball","bat","game","paddle","table tennis"],badminton_racquet_and_shuttlecock:["birdie","game","racquet","shuttlecock"],boxing_glove:["boxing","glove"],martial_arts_uniform:["judo","karate","martial arts","taekwondo","uniform"],goal_net:["goal","net"],dart:["bull","bullseye","dart","eye","game","hit","target"],golf:["golf","hole","sport"],ice_skate:["ice","skate"],fishing_pole_and_fish:["fish","pole","fishing","rod"],running_shirt_with_sash:["athletics","running","sash","shirt","clothing"],ski:["ski","snow","sport"],sled:["sledge","sleigh"],curling_stone:["game","rock"],video_game:["controller","game"],joystick:["game","video game"],game_die:["dice","die","game"],spades:["card","game","symbol"],hearts:["card","game","heart"],diamonds:["card","game","symbol"],clubs:["card","game","symbol"],black_joker:["card","game","wildcard","symbol"],mahjong:["game","mahjong","red"],flower_playing_cards:["card","flower","game","Japanese","playing"],mute:["mute","quiet","silent","speaker","sound","volume"],speaker:["soft","volume","sound"],sound:["medium","speaker"],loud_sound:["loud","sound","speaker"],loudspeaker:["loud","public address","speaker"],mega:["cheering","sound","speaker"],postal_horn:["horn","post","postal"],no_bell:["bell","forbidden","mute","no","not","prohibited","quiet","silent"],musical_score:["music","score"],musical_note:["music","note"],notes:["music","note","notes"],studio_microphone:["mic","microphone","music","studio"],level_slider:["level","music","slider"],control_knobs:["control","knobs","music"],microphone:["karaoke","mic","music","instrument"],headphones:["earbud","music"],radio:["video","stereo"],saxophone:["instrument","music","sax"],guitar:["instrument","music"],musical_keyboard:["instrument","keyboard","music","piano"],trumpet:["instrument","music","horn"],violin:["instrument","music"],drum_with_drumsticks:["drumsticks","music"],iphone:["cell","mobile","phone","telephone","ios"],calling:["arrow","call","cell","mobile","phone","receive","telephone"],phone:["phone","telephone"],telephone_receiver:["phone","receiver","telephone"],fax:["fax","work"],electric_plug:["electric","electricity","plug","cord"],computer:["computer","pc","personal","desktop","work"],desktop_computer:["computer","desktop"],printer:["computer"],keyboard:["computer"],three_button_mouse:["computer"],trackball:["computer"],minidisc:["computer","disk","minidisk","optical"],floppy_disk:["computer","disk","floppy"],cd:["cd","computer","disk","optical"],dvd:["blu-ray","computer","disk","optical","cd","disc"],movie_camera:["camera","cinema","movie","film"],film_frames:["cinema","film","frames","movie"],film_projector:["cinema","film","movie","projector","video"],clapper:["clapper","movie","cinema"],tv:["tv","video","television"],camera:["video"],camera_with_flash:["camera","flash","video"],video_camera:["camera","video"],vhs:["tape","vhs","video"],mag:["glass","magnifying","search","tool","zoom"],mag_right:["glass","magnifying","search","tool","zoom"],microscope:["science","tool"],telescope:["science","tool"],satellite_antenna:["antenna","dish","satellite","tv"],candle:["light"],bulb:["bulb","comic","electric","idea","light"],flashlight:["electric","light","tool","torch"],izakaya_lantern:["bar","lantern","light","red"],notebook_with_decorative_cover:["book","cover","decorated","notebook"],closed_book:["book","closed"],book:["book","open"],green_book:["book","green"],blue_book:["blue","book"],orange_book:["book","orange"],books:["book"],ledger:["notebook","book"],page_with_curl:["curl","document","page","paper"],scroll:["paper"],page_facing_up:["document","page","paper"],newspaper:["news","paper"],rolled_up_newspaper:["news","newspaper","paper","rolled"],bookmark_tabs:["bookmark","mark","marker","tabs"],bookmark:["mark"],moneybag:["bag","dollar","money","moneybag","cash"],yen:["bank","banknote","bill","currency","money","note","yen","cash"],dollar:["bank","banknote","bill","currency","dollar","money","note","cash"],euro:["bank","banknote","bill","currency","euro","money","note","cash"],pound:["bank","banknote","bill","currency","money","note","pound","cash"],money_with_wings:["bank","banknote","bill","dollar","fly","money","note","wings","cash"],credit_card:["bank","card","credit","money"],chart:["bank","chart","currency","graph","growth","market","money","rise","trend","upward","yen"],currency_exchange:["bank","currency","exchange","money","symbol"],heavy_dollar_sign:["currency","dollar","money","symbol"],email:["email","letter","mail","envelope"],"e-mail":["email","letter","mail","envelope"],incoming_envelope:["e-mail","email","envelope","incoming","letter","mail","receive","work"],envelope_with_arrow:["arrow","down","e-mail","email","envelope","letter","mail","outgoing","sent"],outbox_tray:["box","letter","mail","outbox","sent","tray"],inbox_tray:["box","inbox","letter","mail","receive","tray","email","work"],package:["box","parcel","shipping"],mailbox:["closed","mail","mailbox","postbox","post"],mailbox_closed:["closed","lowered","mail","mailbox","postbox","post"],mailbox_with_mail:["mail","mailbox","open","postbox","post"],mailbox_with_no_mail:["lowered","mail","mailbox","open","postbox","post"],postbox:["mail","mailbox","post"],ballot_box_with_ballot:["ballot","box"],black_nib:["nib","pen","symbol"],lower_left_fountain_pen:["fountain","pen"],lower_left_ballpoint_pen:["ballpoint"],lower_left_paintbrush:["painting"],memo:["pencil","note","work"],file_folder:["file","folder","work"],open_file_folder:["file","folder","open","work"],card_index_dividers:["card","dividers","index"],date:["date","calendar"],calendar:["calendar","work","date"],spiral_note_pad:["note","pad","spiral"],spiral_calendar_pad:["calendar","pad","spiral"],card_index:["card","index","rolodex"],chart_with_upwards_trend:["chart","graph","growth","trend","upward","with","upwards"],chart_with_downwards_trend:["chart","down","graph","trend","with","downwards"],bar_chart:["bar","chart","graph"],pushpin:["pin","thumbtack"],round_pushpin:["pin","pushpin","map"],linked_paperclips:["link","paperclip"],straight_ruler:["ruler","straight edge"],triangular_ruler:["ruler","set","triangle"],scissors:["cutting","tool"],card_file_box:["box","card","file"],file_cabinet:["cabinet","file","filing"],lock:["closed"],unlock:["lock","open","unlock","security"],lock_with_ink_pen:["ink","lock","nib","pen","privacy","security"],closed_lock_with_key:["closed","key","lock","secure"],key:["lock","password"],old_key:["clue","key","lock","old"],hammer:["tool"],pick:["mining","tool"],hammer_and_pick:["hammer","pick","tool"],hammer_and_wrench:["hammer","spanner","tool","wrench"],dagger_knife:["knife","weapon"],crossed_swords:["crossed","swords","weapon"],gun:["gun","handgun","revolver","tool","weapon","bullet","shoot"],bow_and_arrow:["archer","archery","arrow","bow","Sagittarius","tool","weapon","zodiac"],shield:["weapon"],wrench:["spanner","tool"],nut_and_bolt:["bolt","nut","tool"],gear:["tool"],compression:["compress","tool","vice"],alembic:["chemistry","tool"],scales:["balance","justice","Libra","scales","tool","weight","zodiac"],chains:["chain"],syringe:["doctor","medicine","needle","shot","sick","tool"],pill:["doctor","medicine","sick","drugs"],smoking:["smoking","cigarette"],coffin:["death"],funeral_urn:["ashes","death","funeral","urn"],moyai:["face","moyai","statue","easter","island","head"],oil_drum:["drum","oil"],crystal_ball:["ball","crystal","fairy tale","fantasy","fortune","tool","future"],shopping_trolley:["cart","shopping","trolley"],atm:["atm","automated","bank","teller","symbols"],put_litter_in_its_place:["litter","litter bin","symbol","garbage"],potable_water:["drinking","potable","water","symbol"],wheelchair:["access","symbol"],mens:["lavatory","man","restroom","wc","symbol"],womens:["lavatory","restroom","wc","woman","symbol"],restroom:["lavatory","WC","symbol"],baby_symbol:["baby","changing","symbol"],wc:["closet","lavatory","restroom","water","wc","symbol"],passport_control:["control","passport","symbol"],baggage_claim:["baggage","claim","symbol"],left_luggage:["baggage","locker","luggage","symbol"],children_crossing:["child","crossing","pedestrian","traffic","symbol"],no_entry:["entry","forbidden","no","not","prohibited","traffic","symbol"],no_entry_sign:["entry","forbidden","no","not","symbol"],no_bicycles:["bicycle","bike","forbidden","no","not","prohibited","symbol"],no_smoking:["forbidden","no","not","prohibited","smoking","symbol"],do_not_litter:["forbidden","litter","no","not","prohibited","symbol"],"non-potable_water":["non-drinking","non-potable","water","symbol"],no_pedestrians:["forbidden","no","not","pedestrian","prohibited","symbol"],no_mobile_phones:["cell","forbidden","mobile","no","not","phone","prohibited","telephone","symbol"],underage:["18","age restriction","eighteen","forbidden","no","not","prohibited","underage","symbol"],radioactive_sign:["sign"],biohazard_sign:["sign"],arrow_up:["arrow","cardinal","direction","north","symbol"],arrow_upper_right:["arrow","direction","intercardinal","northeast","symbol"],arrow_right:["arrow","cardinal","direction","east","symbol"],arrow_lower_right:["arrow","direction","intercardinal","southeast","symbol"],arrow_down:["arrow","cardinal","direction","down","south","symbol"],arrow_lower_left:["arrow","direction","intercardinal","southwest","symbol"],arrow_left:["arrow","cardinal","direction","west","symbol"],arrow_upper_left:["arrow","direction","intercardinal","northwest","symbol"],arrow_up_down:["arrow","symbol"],left_right_arrow:["arrow","symbol"],leftwards_arrow_with_hook:["arrow","symbol"],arrow_right_hook:["arrow","symbol"],arrow_heading_up:["arrow","symbol"],arrow_heading_down:["arrow","down","symbol"],arrows_clockwise:["arrow","clockwise","reload","symbol"],arrows_counterclockwise:["anticlockwise","arrow","counterclockwise","withershins","symbol"],back:["arrow","back","symbol"],end:["arrow","end","symbol"],on:["arrow","mark","on","symbol"],soon:["arrow","soon","symbol"],top:["arrow","top","up","symbol"],place_of_worship:["religion","worship"],atom_symbol:["atheist","atom"],om_symbol:["Hindu","religion"],star_of_david:["David","Jew","Jewish","religion","star"],wheel_of_dharma:["Buddhist","dharma","religion","wheel"],yin_yang:["religion","tao","taoist","yang","yin"],latin_cross:["Christian","cross","religion"],orthodox_cross:["Christian","cross","religion"],star_and_crescent:["islam","Muslim","religion"],peace_symbol:["peace"],menorah_with_nine_branches:["candelabrum","candlestick","religion"],six_pointed_star:["fortune","star","symbol"],aries:["ram","zodiac","horoscope","astrology"],taurus:["bull","ox","zodiac","horoscope","astrology"],gemini:["twins","zodiac","horoscope","astrology"],cancer:["crab","zodiac","horoscope","astrology"],leo:["lion","zodiac","horoscope","astrology"],virgo:["zodiac","horoscope","astrology"],libra:["balance","justice","scales","zodiac","horoscope","astrology"],scorpius:["scorpion","scorpius","zodiac","horoscope","astrology"],sagittarius:["archer","zodiac","horoscope","astrology"],capricorn:["goat","zodiac","horoscope","astrology"],aquarius:["bearer","water","zodiac","horoscope","astrology"],pisces:["fish","zodiac","horoscope","astrology"],ophiuchus:["bearer","serpent","snake","zodiac","symbol"],twisted_rightwards_arrows:["arrow","crossed","symbol"],repeat:["arrow","clockwise","repeat","symbol"],repeat_one:["arrow","clockwise","once","symbol"],arrow_forward:["arrow","play","right","triangle","symbol"],fast_forward:["arrow","double","fast","forward","symbol"],black_right_pointing_double_triangle_with_vertical_bar:["arrow","next scene","next track","triangle"],black_right_pointing_triangle_with_double_vertical_bar:["arrow","pause","play","right","triangle"],arrow_backward:["arrow","left","reverse","triangle","symbol"],rewind:["arrow","double","rewind","symbol"],black_left_pointing_double_triangle_with_vertical_bar:["arrow","previous scene","previous track","triangle"],arrow_up_small:["arrow","button","red","symbol"],arrow_double_up:["arrow","double","symbol"],arrow_down_small:["arrow","button","down","red","symbol"],arrow_double_down:["arrow","double","down","symbol"],double_vertical_bar:["bar","double","pause","vertical"],black_square_for_stop:["square","stop"],black_circle_for_record:["circle","record"],eject:["eject"],cinema:["camera","film","movie","symbol"],low_brightness:["brightness","dim","low","symbol"],high_brightness:["bright","brightness","symbol"],signal_strength:["antenna","bar","cell","mobile","phone","signal","telephone","symbol"],vibration_mode:["cell","mobile","mode","phone","telephone","vibration","symbol"],mobile_phone_off:["cell","mobile","off","phone","telephone"],female_sign:["woman"],male_sign:["man"],medical_symbol:["aesculapius","medicine","staff"],recycle:["recycle","symbol"],trident:["anchor","emblem","ship","tool","trident"],name_badge:["badge","name"],beginner:["beginner","chevron","green","Japanese","leaf","tool","yellow","symbol"],o:["circle","o","symbol","letter"],white_check_mark:["check","mark","green"],ballot_box_with_check:["ballot","box","check","black"],heavy_check_mark:["check","mark","symbol"],heavy_multiplication_x:["cancel","multiplication","multiply","x","symbol"],x:["cancel","mark","multiplication","multiply","x","letter","cross","symbol"],negative_squared_cross_mark:["mark","square","cross","green","x"],heavy_plus_sign:["math","plus","symbol","+"],heavy_minus_sign:["math","minus","symbol","-"],heavy_division_sign:["division","math","symbol"],curly_loop:["curl","loop","symbol"],loop:["curl","double","loop","symbol"],part_alternation_mark:["mark","part","symbol"],eight_spoked_asterisk:["asterisk","symbol"],eight_pointed_black_star:["star","symbol"],bangbang:["bangbang","exclamation","mark","punctuation","symbols","!"],interrobang:["exclamation","interrobang","mark","punctuation","question","symbol","!","?"],question:["mark","punctuation","question","symbol","?"],grey_question:["mark","outlined","punctuation","question","symbol","?"],grey_exclamation:["exclamation","mark","outlined","punctuation","symbol","!"],exclamation:["exclamation","mark","punctuation","symbol","!"],wavy_dash:["dash","punctuation","wavy","symbol"],tm:["mark","tm","trademark","symbol"],capital_abcd:["ABCD","input","latin","letters","uppercase"],abcd:["abcd","input","latin","letters","lowercase"],symbols:["\u3012\u266a&%","input"],abc:["abc","alphabet","input","latin","letters"],a:["a","blood type","letters"],ab:["ab","blood type","letters"],b:["b","blood type","symbols"],cl:["cl"],cool:["cool","symbol"],free:["free","symbol"],information_source:["i","symbol"],id:["id","identity"],m:["circle","m"],new:["new"],ng:["ng"],o2:["blood type","o","symbol"],ok:["OK","letters","symbol"],parking:["parking","symbol"],sos:["help","sos","symbol"],up:["mark","up","symbol"],vs:["versus","vs"],koko:["\u201chere\u201d","Japanese","katakana","\u30b3\u30b3","symbol"],sa:["\u201cservice charge\u201d","Japanese","katakana","\u30b5"],u6708:["\u201cmonthly amount\u201d","ideograph","Japanese","\u6708"],u6709:["\u201cnot free of charge\u201d","ideograph","Japanese","\u6709"],u6307:["\u201creserved\u201d","ideograph","Japanese","\u6307"],ideograph_advantage:["\u201cbargain\u201d","ideograph","Japanese","\u5f97","symbol"],u5272:["\u201cdiscount\u201d","ideograph","Japanese","\u5272"],u7121:["\u201cfree of charge\u201d","ideograph","Japanese","\u7121"],u7981:["\u201cprohibited\u201d","ideograph","Japanese","\u7981"],accept:["\u201cacceptable\u201d","ideograph","Japanese","\u53ef"],u7533:["\u201capplication\u201d","ideograph","Japanese","\u7533"],u5408:["\u201cpassing grade\u201d","ideograph","Japanese","\u5408"],u7a7a:["\u201cvacancy\u201d","ideograph","Japanese","\u7a7a"],congratulations:["\u201ccongratulations\u201d","ideograph","Japanese","\u795d","symbol"],secret:["\u201csecret\u201d","ideograph","Japanese","\u79d8","symbol"],u55b6:["\u201copen for business\u201d","ideograph","Japanese","\u55b6"],u6e80:["\u201cno vacancy\u201d","ideograph","Japanese","\u6e80"],black_small_square:["geometric","square","symbol"],white_small_square:["geometric","square","symbol"],white_medium_square:["geometric","square","symbol"],black_medium_square:["geometric","square","symbol"],white_medium_small_square:["geometric","square","symbol"],black_medium_small_square:["geometric","square","symbol"],black_large_square:["geometric","square","symbol"],white_large_square:["geometric","square","symbol"],large_orange_diamond:["diamond","geometric","orange","symbol"],large_blue_diamond:["blue","diamond","geometric","symbol"],small_orange_diamond:["diamond","geometric","orange","symbol"],small_blue_diamond:["blue","diamond","geometric","symbol"],small_red_triangle:["geometric","red","symbol"],small_red_triangle_down:["down","geometric","red","symbol"],diamond_shape_with_a_dot_inside:["comic","diamond","geometric","inside","gem"],radio_button:["button","geometric","radio"],black_square_button:["button","geometric","square","symbol"],white_square_button:["button","geometric","outlined","square","symbol"],white_circle:["circle","geometric","symbol"],black_circle:["circle","geometric","symbol"],red_circle:["circle","geometric","red","symbol"],large_blue_circle:["blue","circle","geometric","symbol"],checkered_flag:["checkered","chequered","racing","finish","line","race"],triangular_flag_on_post:["post","flag"],crossed_flags:["celebration","cross","crossed","Japanese","flag"],waving_black_flag:["waving"],waving_white_flag:["waving"],"rainbow-flag":["rainbow"],sparkle:["symbol"],copyright:["symbol"],registered:["symbol"],warning:["symbol"],fountain:[],pencil2:[],sushi:["food"],rat:["animal"],mouse2:["animal"],cow2:["animal"],tiger2:["animal","cat"],leopard:["cat","animal"],crocodile:["alligator","animal"],whale2:["animal","fish"],snail:["bug","insect"],monkey:["animal"],elephant:["animal"],octopus:["animal","fish"],bird:["animal"],man:["person","people","face"],woman:["lady","face","person","people"],family:["man","woman","boy","people","person"],guardsman:["face","people","person"],briefcase:["work"],clipboard:["work"],paperclip:["work"],notebook:["book"],pager:[],battery:[],bell:[],link:["symbol"],keycap_ten:["number","10"],door:[],toilet:["bathroom","washroom","restroom"],customs:["symbol"],hash:["symbol"],zero:["number","0"],one:["number","1"],two:["number","2"],three:["number","3"],four:["number","4"],five:["number","5"],six:["number","6"],seven:["number","7"],eight:["number","8"],nine:["number","9"],"flag-ae":["flag"],"flag-at":["flag"],"flag-au":["flag"],"flag-be":["flag"],"flag-br":["flag"],"flag-ca":["flag"],"flag-ch":["flag"],"flag-cl":["flag"],cn:["flag"],"flag-co":["flag"],de:["flag"],"flag-dk":["flag"],es:["flag"],"flag-fi":["flag"],fr:["flag"],gb:["flag"],"flag-hk":["flag"],"flag-id":["flag"],"flag-ie":["flag"],"flag-il":["flag"],"flag-in":["flag"],it:["flag"],jp:["flag"],kr:["flag"],"flag-mo":["flag"],"flag-mx":["flag"],"flag-my":["flag"],"flag-nl":["flag"],"flag-no":["flag"],"flag-nz":["flag"],"flag-ph":["flag"],"flag-pl":["flag"],"flag-pr":["flag"],"flag-pt":["flag"],ru:["flag"],"flag-sa":["flag"],"flag-se":["flag"],"flag-sg":["flag"],"flag-tr":["flag"],us:["flag"],"flag-vn":["flag"],"flag-za":["flag"],"man-man-boy":["person","people","family"],"man-man-boy-boy":["person","people","family"],"man-man-girl":["person","people","family"],"man-man-girl-boy":["person","people","family"],"man-man-girl-girl":["person","people","family"],"man-woman-boy-boy":["person","people","family"],"man-woman-girl":["person","people","family"],"man-woman-girl-boy":["person","people","family"],"man-woman-girl-girl":["person","people","family"],"man-heart-man":["person","people","couple"],"man-kiss-man":["person","people","couple"],"woman-woman-boy":["family","people","person","woman"],"woman-woman-boy-boy":["family","people","person","woman"],"woman-woman-girl":["family","people","person","woman"],"woman-woman-girl-boy":["family","people","person","woman"],"woman-woman-girl-girl":["family","people","person","woman"],"woman-heart-woman":["couple","people","person","woman"],"woman-kiss-woman":["couple","people","person","woman"]}},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(67);var c=a.n(l);var u=a(3);var d=a.n(u);var p=a(5);var f=a.n(p);var m=a(7);var h=a.n(m);var v=a(6);var g=a.n(v);var b=a(8);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(2086);var w=a(2);var E=a(206);var C=a(122);var j=a(78);var S=a(44);var I=a(11);var T=a(650);var N=a(69);var A=a(712);var R=a(428);var M=a(165);var x=a(3406);var P=a(207);var D=a(63);var F=a(167);var L=a(10);var B=a(17);var U=a(884);var q=250;var G={oldest:k.a.string,latest:k.a.string,timestamps:k.a.arrayOf(k.a.string).isRequired,listRenderer:k.a.func.isRequired,startTs:k.a.string,highlightKey:k.a.string,requestHistory:k.a.func,reachedStart:k.a.bool,reachedEnd:k.a.bool,layout:k.a.object};var H={oldest:void 0,latest:void 0,startTs:void 0,highlightKey:void 0,requestHistory:w["noop"],reachedStart:true,reachedEnd:true,layout:void 0};var W=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.loadAround=a.loadAround.bind(a);a.loadPre=a.loadPre.bind(a);a.loadPost=a.loadPost.bind(a);a.list=null;a.layout=e.layout||new U["a"];a.layout.setAnchor(e.startTs||false);a.layout.setStickToBottom(e.reachedEnd);a.state={isLoading:false};return a}g()(t,[{key:"componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");(t.startTs!==this.props.startTs||t.highlightKey&&t.highlightKey!==this.props.highlightKey)&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true}):this.layout.setAnchor(t.startTs));this.layout.setStickToBottom(t.reachedEnd)}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false)}},{key:"onScroll",value:function e(){this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,n=a.oldest,r=a.latest,i=a.reachedStart,o=a.reachedEnd,s=a.timestamps,l=a.startTs;if(o)return this.loadPre();if(i)return this.loadPost();var c=r||Object(w["first"])(s)||l;var u=n||Object(w["last"])(s)||l;var d=this.props.requestHistory({latest:c,oldest:u});if(d){d.finally(function(){return Promise.delay(q)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return d}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,n=a.oldest,r=a.reachedStart,i=a.timestamps,o=a.startTs;if(r)return false;var s=n||Object(w["first"])(i)||o;var l=this.props.requestHistory({latest:s});if(l){l.finally(function(){return Promise.delay(q)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,n=a.latest,r=a.reachedEnd,i=a.timestamps,o=a.startTs;if(r)return false;this.isLoading=true;var s=n||Object(w["last"])(i)||o;var l=this.props.requestHistory({oldest:s});if(l){l.finally(function(){return Promise.delay(q)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"render",value:function e(){var t=this.props,a=t.reachedStart,n=t.reachedEnd,r=t.timestamps;return this.props.listRenderer({reachedStart:a,reachedEnd:n,keys:r,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(n["PureComponent"]);W.displayName="MessageList";var V=W;W.defaultProps=H;var z=a(673);var Q=a(666);var K=a(265);var Y=a(24);var J=a.n(Y);var Z=a(15);var X=a.n(Z);var $=a(21);var ee=a(346);var te=a(1439);var ae=a(258);var ne=a(3318);var re=a(1436);var ie=a(3326);var oe={MESSAGE_PANE:"message_pane",THREAD:"thread"};var se={location:k.a.oneOf(Object(w["values"])(oe)).isRequired,children:k.a.node,channelId:k.a.string.isRequired,threadTs:k.a.string,className:k.a.string,disableFileUploadsPref:k.a.string,userCanPostInChannel:k.a.bool,isEditing:k.a.bool,openFileUploadDialog:k.a.func};var le={children:void 0,threadTs:void 0,className:void 0,disableFileUploadsPref:void 0,userCanPostInChannel:true,isEditing:false,openFileUploadDialog:w["noop"]};var ce=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={dragging:false};a.activeElements=new Set;a.containerRef=r.a.createRef();a.onDrop=a.onDrop.bind(a);return a}g()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.containerRef.current;a.addEventListener("dragenter",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault();t.activeElements.add(e.target);1===t.activeElements.size&&t.setState(function(e){return d()({},e,{dragging:true})})});a.addEventListener("dragleave",function(e){e.preventDefault();t.activeElements.delete(e.target);0===t.activeElements.size&&t.setState(function(e){return d()({},e,{dragging:false})})});a.addEventListener("dragover",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault()});a.addEventListener("dragend",function(){t.setState(function(e){return d()({},e,{dragging:false})});t.activeElements.clear()});a.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function e(t){var a=this.props,n=a.channelId,r=a.threadTs;t.preventDefault();this.setState(function(e){return d()({},e,{dragging:false})});this.activeElements.clear();var i=t.dataTransfer.files;this.props.openFileUploadDialog({files:[].concat(J()(i)),threadTs:r,initialChannelId:n})}},{key:"shouldPreventDrag",value:function e(t){var a=this.props,n=a.disableFileUploadsPref,r=a.userCanPostInChannel,i=a.isEditing;var o=Object(w["get"])(t,"dataTransfer.types");if(!Object(w["includes"])(o.map(function(e){return e.toLowerCase()}),"files"))return true;if("disable_all"===n)return true;if(!r)return true;if(i)return true;return false}},{key:"maybeRenderOverlay",value:function e(){if(!this.state.dragging)return null;var t=this.props.channelId;switch(this.props.location){case oe.MESSAGE_PANE:return r.a.createElement(ne["a"],{channelId:t});case oe.THREAD:return r.a.createElement(re["a"],null);default:return null}}},{key:"render",value:function e(){var t=this.props,a=t.children,n=t.className;return r.a.createElement("div",{className:X()("p-file_drag_drop__container",n),ref:this.containerRef},a,this.maybeRenderOverlay())}}]);return t}(n["Component"]);ce.displayName="FileDragDrop";ce.defaultProps=le;var ue=function e(t,a){var n=a.channelId,r=a.viewContext;return{disableFileUploadsPref:Object($["getTeamPref"])(t,"disable_file_uploads"),userCanPostInChannel:Object(ae["h"])(t,n),isEditing:!!Object(ee["getEditingTimestamps"])(t,{channelId:n,viewContext:r}).length}};var de=function e(t){return{openFileUploadDialog:function e(){return t(te["a"].apply(void 0,arguments))}}};var pe=Object(Q["b"])(Object(i["connect"])(ue,de)(ce));var fe=a(70);var me=a(860);var he=a(861);var ve=a(862);var ge=a(863);var be=a(370);var _e=a(345);var ye=a(226);var ke=a(228);var Oe=a(613);var we=a(786);var Ee=a(1428);var Ce=a(682);var je={msg:k.a.object.isRequired,attachment:k.a.object.isRequired,className:k.a.string};var Se={className:void 0};var Ie=function(e){_()(t,e);function t(){f()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.attachment;var i=X()("c-message_kit__attachment",this.props.className);var o=n.bot_id||a.bot_id;return r.a.createElement(Ce["a"],d()({className:i,messageTs:a.ts,service:o,activeChannelId:a.channel},Object(ye["b"])(n)))}}]);return t}(n["PureComponent"]);Ie.displayName="MessageKitAttachment";var Te=Ie;Ie.defaultProps=Se;var Ne=20;var Ae={msg:k.a.object.isRequired,className:k.a.string,expandInlineImgsPref:k.a.bool,expandNonMediaAttachmentsPref:k.a.bool,viewContext:k.a.string};var Re={expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,className:void 0,viewContext:void 0};var Me=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.shouldShowAttachment=a.shouldShowAttachment.bind(a);return a}g()(t,[{key:"getAttachmentsBelow",value:function e(){var t=this;var a=this.props.msg;var n=a.attachments;var r=a.text;return Object(w["chain"])(n).filter(this.shouldShowAttachment).map(ye["b"]).filter(function(e){return!t.isInlineImage(e,r)}).value()}},{key:"shouldShowAttachment",value:function e(t){var a=this.props,n=a.msg,r=a.expandInlineImgsPref,i=a.expandNonMediaAttachmentsPref;var o=n.text;var s=n.subtype;return Object(be["d"])({attachment:t,messageText:o,messageSubtype:s,expandInlineImgsPref:r,expandNonMediaAttachmentsPref:i})}},{key:"isInlineImage",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.msg.text;return a&&-1!==Object(w["unescape"])(a).indexOf(t.fromUrl)&&Object(ke["k"])(t)}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t){if(!t.length)return null;var a=this.props.viewContext;var n={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(_e["a"])("attachmentsOverLimit",this.props.msg.ts,{limit:Ne,viewContext:a})};return r.a.createElement("div",null,r.a.createElement(Oe["a"],n,t),r.a.createElement(we["a"],d()({},n,{render:function e(a,n){return r.a.createElement(Ee["a"],{isExpanded:a.isExpanded,onClick:n,attachmentsOverLimitCount:t.length})}})))}},{key:"render",value:function e(){var t=this.props.msg;if(!t||!t.attachments||!t.attachments.length)return null;var a=this.getAttachmentsBelow();if(!a||!a.length)return null;var n=Object(w["map"])(a,function(e,a){var n=e.id||a+1;return r.a.createElement(Te,{msg:t,attachment:e,key:n})});var i=n.splice(Ne);var o=X()("c-message_kit__attachment",this.props.className);return r.a.createElement("div",{className:o},n,this.renderAttachmentsOverLimitMaybe(i))}}]);return t}(n["PureComponent"]);Me.displayName="MessageKitAttachments";Me.defaultProps=Re;var xe=function e(t){var a=Object($["getUserPref"])(t,"expand_inline_imgs");var n=Object($["getUserPref"])(t,"expand_non_media_attachments");return{expandInlineImgsPref:a,expandNonMediaAttachmentsPref:n}};var Pe=Object(Q["b"])(Object(i["connect"])(xe)(Me));var De=a(1107);var Fe=a(975);var Le=a(792);var Be=a(865);var Ue=a(1170);var qe=a(19);var Ge=a(279);var He=a(116);var We=a(36);var Ve=a(12);var ze=a(1395);var Qe=a(1426);var Ke=a(1433);var Ye=a(18);var Je=a(65);var Ze=a(926);var Xe=a(1434);var $e=a(348);var et=a(2261);var tt={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"};var at={msg:k.a.object.isRequired,className:k.a.string,children:k.a.node,showPinned:k.a.bool,showStarred:k.a.bool,showBroadcast:k.a.bool,theme:k.a.oneOf(["light","dense"]),sliHighlight:k.a.object,currentUserId:k.a.string,primaryView:k.a.string,isSelfIm:k.a.bool,isSlackbotIm:k.a.bool,dispatch:k.a.func,setBackground:k.a.func};var nt={className:void 0,children:void 0,showPinned:true,showStarred:true,showBroadcast:false,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:false,isSlackbotIm:false,dispatch:w["noop"],setBackground:w["noop"]};var rt=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBroadcastClick=a.onBroadcastClick.bind(a);a.renderHighlight=a.renderHighlight.bind(a);a.renderStarButton=a.renderStarButton.bind(a);a.renderBroadcast=a.renderBroadcast.bind(a);a.labelText=null;a.primaryLabelType=null;return a}g()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"onStarClick",value:function e(){Object($e["c"])("stars")}},{key:"onBroadcastClick",value:function e(t){var a=this.props,n=a.dispatch,r=a.msg,i=a.primaryView;t.preventDefault();if(i===r.channel){n(Object(He["jumpToTimestamp"])({ts:r.ts,highlight:true}));return}n(Object(N["setPrimaryView"])({id:r.channel,startTs:r.ts}))}},{key:"setBackground",value:function e(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function e(){var t=this.props,a=t.msg,n=t.sliHighlight,r=t.showPinned,i=t.showStarred,o=t.showBroadcast;var s=Object(We["getMessagePinnedInfo"])(a);return Object(ze["a"])({isPinned:r&&!!s,isEphemeral:Object(We["isEphemeral"])(a),isStarred:i&&Object(We["isStarred"])(a),isBroadcast:o&&Object(We["isThreadBroadcast"])(a),subtype:a.subtype,sliHighlight:!!n})}},{key:"renderPinnedBy",value:function e(t){return r.a.createElement(Ze["a"],{className:"c-message_kit__labels__link",id:t})}},{key:"renderStarButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return r.a.createElement(Je["a"],{onClick:this.onStarClick,className:"c-message_kit__labels__link"},a)}},{key:"renderBroadcast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return r.a.createElement(Je["a"],{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},a)}},{key:"renderLabelText",value:function e(t){var a=this.props,n=a.msg,i=a.currentUserId,o=a.isSelfIm,s=a.isSlackbotIm;var l=Object(We["getMessagePinnedInfo"])(n);var c=l&&l.pinnedBy;var u=Object(Ke["a"])(d()({},t,{isSelfIm:o,isSlackbotIm:s,currentUserId:i,pinnedBy:c,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:true}));if(!u)return null;return r.a.createElement("span",{className:"c-message_kit__labels__text"},u)}},{key:"renderLabelIcon",value:function e(t){var a=tt[t];if(!a)return null;return r.a.createElement("div",{className:"c-message_kit__labels__icon"},r.a.createElement(Ye["b"],{type:a,size:"inherit"}))}},{key:"renderHighlight",value:function e(){var t=this.props,a=t.msg,n=t.sliHighlight;var i=a.channel,o=a.ts;if(!Object(Ge["shouldShowHighlightsLabel"])(n))return null;return r.a.createElement(Xe["a"],{sliHighlight:n,channelId:i,ts:o})}},{key:"render",value:function e(){var t=this.props,a=t.children,n=t.theme;var i=this.getLabelTypes();var o=Object(Qe["a"])(i);var s=this.renderLabelIcon(o);var l=this.renderLabelText(i);this.labelText=l;this.primaryLabelType=o;if(!l)return a;var c=X()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+o,"c-message_kit__labels--"+n);return r.a.createElement("div",{className:c},r.a.createElement("div",{className:"c-message_kit__labels__label"},s,l),a)}}]);return t}(n["PureComponent"]);rt.displayName="MessageLabels";rt.defaultProps=nt;var it=function e(t,a){var n=a.msg;if(!n)return null;var r=n.channel,i=n.ts;var o=Object(I["getCurrentUserId"])(t);var s=Object(qe["getChannelById"])(t,r);var l=Object(N["getPrimaryView"])(t);var c=Object(Ge["getMessageMetaData"])(t,{channelId:r,ts:i}),u=c.sliHighlight;var d=Object(Ve["isSlackbot"])(s);var p=Object(Ve["isYou"])(o,s);return{theme:Object($["getUserMessagesTheme"])(t),currentUserId:o,primaryView:l,sliHighlight:u,isSlackbotIm:d,isSelfIm:p}};var ot=Object(Le["b"])(Object(i["connect"])(it)(rt));var st=a(864);var lt=a(977);var ct=a(1432);var ut=a(2263);var dt={msg:k.a.object.isRequired,className:k.a.string,children:k.a.node,isEditing:k.a.bool,setBackground:k.a.func};var pt={className:void 0,replyBar:void 0,children:void 0,isEditing:false,setBackground:w["noop"]};var ft=function(e){_()(t,e);function t(){f()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"setBackground",value:function e(){var t=this.props,a=t.isEditing,e=t.setBackground;e({editing:a})}},{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.isEditing,i=t.children;if(!n)return i;var o=a.channel,s=a.ts;var l=X()(this.props.className,"c-message_kit__edit");return r.a.createElement("div",{className:l},r.a.createElement(ct["a"],{channelId:o,ts:s}))}}]);return t}(n["PureComponent"]);ft.displayName="MessageEdit";ft.defaultProps=pt;var mt=function e(t,a){var n=a.msg,r=a.viewContext;var i=n.channel,o=n.ts;var s=Object(ee["getMessageEditData"])(t,{channelId:i,ts:o,viewContext:r}),l=s.isEditing;return{isEditing:l}};var ht=Object(Le["b"])(Object(Q["b"])(Object(i["connect"])(mt)(ft)));var vt=a(3272);var gt={children:k.a.node,className:k.a.string,theme:k.a.oneOf(["light","dense"])};var bt={className:void 0,children:void 0,theme:"light"};var _t=function(e){_()(t,e);function t(){f()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,n=t.theme;if("light"===n)return a;var i=X()("c-message_kit__indent",this.props.className);return r.a.createElement("div",{className:i},a)}}]);return t}(n["Component"]);_t.displayName="MessageIndent";_t.defaultProps=bt;var yt=Object(i["connect"])(function(e){return{theme:Object($["getUserMessagesTheme"])(e)}})(_t);var kt=a(1321);var Ot=a(2078);var wt=new L["b"]("message_kit");var Et={msg:k.a.object.isRequired,className:k.a.string,highlight:k.a.bool,clearHighlight:k.a.func,focused:k.a.bool};var Ct={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false};var jt=function(e){_()(t,e);function t(){f()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.highlight,i=t.clearHighlight,o=t.focused;var s=X()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return r.a.createElement(Le["a"],{msg:a,className:s,highlight:n,clearHighlight:i},r.a.createElement(Be["a"],{hovered:o},r.a.createElement(Ue["a"],{msg:a,showComment:false,showShare:false,showJump:true,messageContainerType:fe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,position:"inside"},r.a.createElement(lt["a"],{msg:a},r.a.createElement(ot,{msg:a},r.a.createElement(st["a"],{light:r.a.createElement(me["a"],{msg:a})},r.a.createElement(ht,{msg:a},r.a.createElement(he["a"],{msg:a}),"\xa0\xa0",r.a.createElement(ve["a"],{msg:a,full:true,clickable:true},wt.t("Open in channel")),r.a.createElement("br",null),r.a.createElement(yt,null,r.a.createElement(ge["a"],{msg:a}),r.a.createElement(De["a"],{msg:a}),r.a.createElement(Pe,{msg:a}),r.a.createElement(Fe["a"],{msg:a})))))))))}}]);return t}(n["PureComponent"]);jt.displayName="ThreadRootMessage";var St=jt;jt.defaultProps=Ct;var It=a(1425);var Tt=a(371);var Nt=a(713);var At=a(2266);var Rt=new L["b"]("message");var Mt={msg:k.a.object.isRequired,className:k.a.string,children:k.a.node,dispatch:k.a.func};var xt={className:void 0,children:void 0,dispatch:w["noop"]};var Pt=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.resend=a.resend.bind(a);a.cancel=a.cancel.bind(a);return a}g()(t,[{key:"resend",value:function e(){var t=this.props,a=t.msg,n=t.dispatch;var r=a.ts,i=a.channel;n(Object(It["a"])(i,r))}},{key:"cancel",value:function e(){var t=this.props,a=t.msg,n=t.dispatch;var r=a.ts,i=a.channel;n(Object(Tt["a"])({channelId:i,ts:r}))}},{key:"renderFooter",value:function e(){var t=this.props.msg,a=t.showResend,n=t.showCancel;var i=a&&r.a.createElement(Nt["a"],{className:"c-message_kit__resend__resend",onClick:this.resend},Rt.t("Try again"));var o=n&&r.a.createElement(Nt["a"],{className:"c-message_kit__resend__cancel",onClick:this.cancel},Rt.t("Cancel"));var s=i&&o&&r.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return r.a.createElement("div",{className:"c-message_kit__resend__footer"},r.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),r.a.createElement("div",null,Rt.t("Slack couldn\u2019t send this message"),"\u2002",i,s,o))}},{key:"render",value:function e(){var t=this.props.msg,a=t.showResend,n=t.showCancel;if(!a&&!n)return this.props.children;var i=X()("c-message_kit__resend",this.props.className);return r.a.createElement("div",{className:i},this.props.children,this.renderFooter())}}]);return t}(n["PureComponent"]);Pt.displayName="MessageResend";Pt.defaultProps=xt;var Dt=Object(i["connect"])()(Pt);var Ft={msg:k.a.object.isRequired,className:k.a.string,highlight:k.a.bool,clearHighlight:k.a.func,focused:k.a.bool};var Lt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false};var Bt=function(e){_()(t,e);function t(){f()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}g()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,n=t.highlight,i=t.clearHighlight,o=t.focused;var s=X()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return r.a.createElement(Le["a"],{msg:a,className:s,highlight:n,clearHighlight:i},r.a.createElement(Be["a"],{hovered:o},r.a.createElement(Ue["a"],{msg:a,showComment:false,showShare:false,messageContainerType:fe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE},r.a.createElement(ot,{msg:a,showBroadcast:true},r.a.createElement(st["a"],{light:r.a.createElement(me["a"],{msg:a})},r.a.createElement(ht,{msg:a},r.a.createElement(he["a"],{msg:a}),"\xa0\xa0",r.a.createElement(ve["a"],{msg:a,relative:true}),r.a.createElement("br",null),r.a.createElement(yt,null,r.a.createElement(Dt,{msg:a},r.a.createElement(ge["a"],{msg:a}),r.a.createElement(De["a"],{msg:a}),r.a.createElement(Pe,{msg:a})),r.a.createElement(Fe["a"],{msg:a}))))))))}}]);return t}(n["PureComponent"]);Bt.displayName="ThreadReplyMessage";var Ut=Bt;Bt.defaultProps=Lt;var qt=a(3417);var Gt=a(1421);var Ht=a(1173);var Wt=a(159);var Vt=a(2268);var zt=new L["b"]("flexpane");var Qt={featureReactThreads:k.a.bool};var Kt={featureReactThreads:false};function Yt(e){var t=e.featureReactThreads;if(!t)return null;var a=cdn_url+"/9c217/img/loading_hash_animation_@2x.gif";var n=cdn_url+"/9c217/img/loading_hash_animation.gif";var i=zt.t("loading\u2026");var o=n+" 1x, "+a+" 2x";return r.a.createElement("div",{className:"p-flexpane_loading"},r.a.createElement("img",{className:"p-flexpane_loading__spinner",src:a,alt:i,srcSet:o}),r.a.createElement("br",null),i)}Yt.displayName="FlexpaneLoading";Yt.defaultProps=Kt;var Jt=Object(Wt["a"])("feature_react_threads")(Yt);var Zt=a(151);var Xt=a(1424);var $t=a(715);var ea=a(41);var ta=a(2270);var aa=new L["b"]("threads");var na={channelId:k.a.string,threadTs:k.a.string,isMpim:k.a.bool,numMpimMembers:k.a.number,mpimName:k.a.string};var ra={channelId:void 0,threadTs:void 0,isMpim:false,numMpimMembers:0,mpimName:void 0};function ia(e){var t=e.channelId,a=e.threadTs,n=e.isMpim,i=e.numMpimMembers,o=e.mpimName;var s=void 0;s=n?r.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},r.a.createElement(ea["d"],{tip:o},r.a.createElement("span",null,aa.t("Direct message with {count} others",{count:i})))):r.a.createElement(Zt["a"],{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:true,iconProps:{inherit:true}});return r.a.createElement($t["a"],{className:"p-threads_flexpane__header"},r.a.createElement(Xt["a"],{size:"medium",className:"p-threads_flexpane__header_back"}),r.a.createElement("div",null,aa.t("Thread"),t&&a&&r.a.createElement(Je["a"],{className:"p-threads_flexpane__header_permalink",href:Object(We["constructMsgPermalink"])(t,a)},s)))}ia.displayName="Header";ia.defaultProps=ra;function oa(e,t){var a=t.channelId;var n=Object(qe["getChannelById"])(e,a);var r={};if(n&&"mpim"===Object(Ve["getChannelType"])(n)){r.isMpim=true;var i=Object(Ve["getMemberIdsFromMpim"])(n)||[];r.numMpimMembers=i.length-1;r.mpimName=Object(Ve["getDisplayNameForChannel"])(e,n)}return r}var sa=Object(i["connect"])(oa)(ia);var la=a(213);var ca=a(20);var ua=a(179);var da=a.n(ua);var pa=a(3419);var fa=a(683);var ma=a(4);var ha=Object(ma["e"])("Start editing the last message in a given channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.threadTs,i=a.viewContext;var o=t();var s=Object(ee["getLastEditableMessageInChannel"])(o,{channelId:n,threadTs:r});if(!s)return false;e(Object(ee["maybeStartEditingMessage"])({channelId:n,ts:s.ts,viewContext:i,scroll:true}));return true});ha.propTypes={channelId:k.a.string.isRequired,threadTs:k.a.string,viewContext:k.a.string};var va=ha;var ga=a(227);var ba=a(88);var _a=a(321);var ya=a(430);var ka=a(900);var Oa=a(1094);var wa=a(657);var Ea=a(2272);var Ca=function e(t){if(!t)return"";var a=document.createElement("span");a.innerHTML=t;return a.textContent.trim()};var ja={channelId:k.a.string,legacyChannel:k.a.object,threadTs:k.a.string,placeholder:k.a.string,sendMessage:k.a.func,className:k.a.string,enableEmojiButton:k.a.bool,enableMentionButton:k.a.bool,enableBroadcastKeywords:k.a.bool,enableJumbomoji:k.a.bool,forwardedRef:k.a.object.isRequired,useSendButton:k.a.bool,isDisabled:k.a.bool,maxLines:k.a.number,useLegacyCreate:k.a.bool,focusOnMount:k.a.bool,draft:k.a.arrayOf(k.a.object),draftDelay:k.a.number,range:k.a.object,setChannelDraft:k.a.func,clearChannelDraft:k.a.func,setChannelCursor:k.a.func,clearChannelCursor:k.a.func,editLastMessage:k.a.func,debug:k.a.func.isRequired,onTextChange:k.a.func,onFocus:k.a.func,onBlur:k.a.func};var Sa={channelId:void 0,legacyChannel:void 0,threadTs:void 0,placeholder:void 0,sendMessage:function e(){return Promise.resolve()},className:void 0,enableEmojiButton:false,enableMentionButton:false,enableBroadcastKeywords:true,enableJumbomoji:false,useSendButton:false,isDisabled:false,maxLines:void 0,useLegacyCreate:false,focusOnMount:false,draft:void 0,draftDelay:1e3,range:void 0,setChannelDraft:w["noop"],clearChannelDraft:w["noop"],setChannelCursor:w["noop"],clearChannelCursor:w["noop"],editLastMessage:w["noop"],onTextChange:w["noop"],onFocus:w["noop"],onBlur:w["noop"],onSend:w["noop"]};var Ia=function(e){_()(t,e);function t(){f()(this,t);var e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onEnter=e.onEnter.bind(e);e.onUpArrow=e.onUpArrow.bind(e);e.onTextChange=e.onTextChange.bind(e);e.renderInput=e.renderInput.bind(e);return e}g()(t,[{key:"componentDidMount",value:function e(){this.handlePropChanges()}},{key:"componentDidUpdate",value:function e(t){this.handlePropChanges(t)}},{key:"onEnter",value:function e(t){var a=this.props.sendMessage;if(!this.shouldSendMessage(t))return true;this.updateDraftThrottled.cancel();a();return false}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.getInputRef();if(!a)return;if(t)return;if(!a.isEmpty())return;this.props.editLastMessage()}},{key:"onTextChange",value:function e(){var t=this.props,e=t.onTextChange,a=t.useLegacyCreate;var n=this.getInputRef();a||this.updateOrClearDraft({inputRef:n});e(n.value())}},{key:"getInputRef",value:function e(){var t=this.props.forwardedRef;return t.current.getWrappedInstance?t.current.getWrappedInstance():t.current}},{key:"shouldSendMessage",value:function e(t){var a=t.metaKey,n=t.shiftKey,r=t.altKey,i=t.ctrlKey;var o=this.props.useSendButton;if(!a&&(n||r||i))return false;if(o&&!a)return false;var s=this.getInputRef();if(s.isEmpty({doIgnoreWhitespace:true}))return false;return true}},{key:"handlePropChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,n=a.channelId,r=a.threadTs,i=a.draft,o=a.draftDelay,s=a.focusOnMount,l=a.range,c=a.debug,u=a.useLegacyCreate;if(u)return;t.draftDelay!==o&&(this.updateDraftThrottled=Object(w["debounce"])(this.updateDraft,o));if(!r&&t.channelId!==n){this.updateDraftThrottled.flush();var d=this.getInputRef();if(t.channelId){var p=d.getSelection();if(p)if(d.getLength()){c("DRAFT","Updating cursor position for "+t.channelId);this.props.setChannelCursor({channelId:t.channelId,range:p})}else{c("DRAFT","Clearing cursor position for "+t.channelId);this.props.clearChannelCursor({channelId:t.channelId})}}d.clearHistory();if(n){if(i){c("DRAFT","Restoring draft to "+n);d.value(Object(Oa["a"])({contents:i}))}else{c("DRAFT","No draft, clearing input for "+n);d.clear()}s&&(l?d.setCursor(l.index,l.length):d.setCursorAtEnd())}}}},{key:"updateOrClearDraft",value:function e(t){var a=t.inputRef;var n=this.props,r=n.channelId,i=n.threadTs,o=n.debug;if(!r||!a||i)return;var s=a.getContents();if(a.getLength()&&Object(w["trim"])(Object(Oa["a"])(s)).length){var l=new da.a(s.contents);o("DRAFT","Updating draft in "+r);this.updateDraftThrottled({channelId:r,delta:l})}else{o("DRAFT","Clearing draft for "+r);this.updateDraftThrottled({channelId:r})}}},{key:"updateDraft",value:function e(t){var a=t.channelId,n=t.delta;n?this.props.setChannelDraft({channelId:a,delta:n}):this.props.clearChannelDraft({channelId:a})}},{key:"renderInput",value:function e(t){var a=t.modules,n=t.isOpen,i=t.legacyTextyClassName;var o=this.props,s=o.placeholder,l=o.channelId,c=o.enableEmojiButton,u=o.enableMentionButton,d=o.enableBroadcastKeywords,p=o.useLegacyCreate,f=o.onFocus,m=o.onBlur,h=o.forwardedRef,v=o.enableJumbomoji,g=o.isDisabled,b=o.maxLines;var _=Ca(s);return r.a.createElement(ya["g"],{legacyTextyClassName:i,channelId:l,className:"p-message_input_field",ariaLabel:_,placeholder:s,onEnter:this.onEnter,onUpArrow:this.onUpArrow,"data-qa":"message_input",ref:h,useLegacyCreate:p,maxLines:b,modules:a,isAutocompleteOpen:n,isDisabled:g,enableEmojiButton:c,enableMentionButton:u,enableBroadcastKeywords:d,enableJumbomoji:v,onTextChange:this.onTextChange,onFocus:f,onBlur:m})}},{key:"renderLegacyAutocomplete",value:function e(){var t=this.props,a=t.legacyChannel,n=t.threadTs,r=t.forwardedRef;var i={tabcomplete:{searchOptions:{model_ob:a,in_thread:!!n},positionMenu:function e(t){var a=r.current.getWrappedInstance?r.current.getWrappedInstance():r.current;t.style.width=a.container.offsetWidth+"px";Object(wa["a"])(t,a.container)}}};return this.renderInput({modules:i,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function e(){return r.a.createElement(ka["a"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,completeOnEmoji:true,channelId:this.props.channelId,renderInput:this.renderInput,shouldCompleteOnTab:!this.props.useSendButton})}},{key:"render",value:function e(){var t=this.props,a=t.className,n=t.useLegacyCreate,i=t.channelId,o=t.threadTs;var s=X()(a,"p-message_input");return r.a.createElement("div",{className:s},n?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),r.a.createElement(hn,{channelId:i,threadTs:o}))}}]);return t}(n["Component"]);Ia.displayName="MessageInput";Ia.defaultProps=Sa;function Ta(e,t){var a=t.channelId;return{legacyChannel:Object(D["a"])()?null:Object(qe["getChannelById"])(e,a),enableJumbomoji:!Object(_a["i"])(e)&&Object($["getUserPref"])(e,"jumbomoji")&&"dense"!==Object($["getUserPref"])(e,"theme"),draft:Object(pa["getChannelDraft"])(e,{channelId:a}),range:Object(pa["getChannelCursor"])(e,{channelId:a}),debug:Object(B["a"])({state:e}).debug}}var Na={setChannelDraft:pa["setChannelDraft"],clearChannelDraft:pa["clearChannelDraft"],setChannelCursor:pa["setChannelCursor"],clearChannelCursor:pa["clearChannelCursor"]};var Aa=Object(i["connect"])(Ta,Na)(Ia);var Ra=r.a.forwardRef(function(e,t){return r.a.createElement(Aa,d()({},e,{forwardedRef:t||r.a.createRef()}))});var Ma=a(164);var xa=a(54);var Pa=a(351);var Da=a(1420);var Fa=a(160);var La=a(3477);var Ba=Object(ma["e"])("Opens the docs Gantry app in a new window",function(e,t){var a=t();var n=Object(N["getPrimaryView"])(a);if(!Object(Fa["a"])(n))return;e(Object(La["a"])({appName:"docs",viewId:""}))});Ba.propTypes=k.a.object;var Ua=new L["b"]("menu_file");var qa={channelId:k.a.string.isRequired,threadTs:k.a.string,disableFileUploadsPref:k.a.string,menuProps:k.a.object,featureReactThreads:k.a.bool,featureModernFileUpload:k.a.bool,featureDocs:k.a.bool,hiddenFileInputRef:k.a.object,clogger:k.a.object.isRequired,createDocPost:k.a.func};var Ga={threadTs:void 0,disableFileUploadsPref:void 0,menuProps:{},featureReactThreads:false,featureModernFileUpload:false,featureDocs:false,hiddenFileInputRef:void 0,createDocPost:w["noop"]};var Ha=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.selectFileFromComputer=a.selectFileFromComputer.bind(a);a.createDoc=a.createDoc.bind(a);return a}g()(t,[{key:"selectFileFromComputer",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs,r=t.hiddenFileInputRef,i=t.clogger,o=t.featureModernFileUpload;if(o){r&&r.current&&r.current.click();i.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})}else Object(Da["b"])(a,n)}},{key:"createDoc",value:function e(){this.props.createDocPost()}},{key:"render",value:function e(){var t=this.props,a=t.disableFileUploadsPref,n=t.menuProps,i=t.featureReactThreads,o=t.featureDocs;if(!i)return null;var s="disable_all"!==a;var l="disable_all_except_images"===a;return r.a.createElement(xa["f"],n,o&&r.a.createElement(xa["c"],{label:Ua.t("New\u2026")}),o&&r.a.createElement(xa["b"],{label:"Post",icon:r.a.createElement(Ye["b"],{type:"create-post"}),onSelected:this.createDoc}),r.a.createElement(xa["c"],{label:l?Ua.t("Add an image from\u2026"):Ua.t("Add a file from\u2026")}),s&&r.a.createElement(xa["b"],{label:Ua.t("Your computer"),icon:r.a.createElement(Ye["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]);return t}(n["Component"]);Ha.displayName="NewFileMenu";Ha.defaultProps=Ga;var Wa={createDocPost:Ba};function Va(e){return{disableFileUploadsPref:Object($["getTeamPref"])(e,"disable_file_uploads"),featureReactThreads:Object(I["isFeatureEnabled"])(e,"feature_react_threads"),featureModernFileUpload:Object(I["isFeatureEnabled"])(e,"feature_modern_file_upload"),featureDocs:Object(I["isFeatureEnabled"])(e,"feature_docs")&&"friends"===Object(Pa["getGroupForUser"])(e,"friends_of_docs"),clogger:Object(Ma["a"])({state:e})}}var za=Object(i["connect"])(Va,Wa)(Ha);var Qa=za;var Ka=a(31);var Ya=a(77);var Ja=a(188);function Za(){var e={top:0,left:0,bottom:0,right:0};return r.a.createElement(Ja["a"],{ariaRole:"dialog",isOpen:true,targetBounds:e,position:"top-left",allowanceX:0,allowanceY:0},r.a.createElement("div",{style:{color:"red"}},"Hello world"))}Za.displayName="OverFileLimitsModal";var Xa=Object(Ka["b"])("Opens the over-file-limits modal",function(e,t,a){e(Object(Ya["openModal"])({element:r.a.createElement(Za,a)}))});Xa.propTypes={};var $a=Xa;var en=a(2276);var tn={channelId:k.a.string,threadTs:k.a.string,disableFileUploadsPref:k.a.string,forwardedRef:k.a.object,openFileUploadDialog:k.a.func,openOverFileLimitsModal:k.a.func,enforceFileLimits:k.a.bool};var an={channelId:void 0,threadTs:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:w["noop"],openOverFileLimitsModal:w["noop"],enforceFileLimits:false};var nn=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onFilesSelected=a.onFilesSelected.bind(a);a.onClick=a.onClick.bind(a);return a}g()(t,[{key:"onClick",value:function e(t){if(this.props.enforceFileLimits){t.preventDefault();this.props.openOverFileLimitsModal()}}},{key:"onFilesSelected",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs,r=t.forwardedRef;var i=r.current.files;var o=Object(w["map"])(i);this.props.openFileUploadDialog({files:o,initialChannelId:a,threadTs:n});r.current.value=""}},{key:"render",value:function e(){var t=this.props,a=t.disableFileUploadsPref,n=t.forwardedRef;var i="disable_all_except_images"===a;var o={};i&&(o.accept="image/*");return r.a.createElement("input",d()({type:"file",className:"p-hidden_file_input",multiple:true,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},o,{ref:n,onClick:this.onClick,onChange:this.onFilesSelected}))}}]);return t}(n["Component"]);nn.displayName="HiddenFileInput";nn.defaultProps=an;function rn(e){return{disableFileUploadsPref:Object($["getTeamPref"])(e,"disable_file_uploads")}}var on={openFileUploadDialog:te["a"],openOverFileLimitsModal:$a};var sn=Object(i["connect"])(rn,on)(nn);var ln=r.a.forwardRef(function(e,t){return r.a.createElement(sn,d()({},e,{forwardedRef:t}))});var cn=a(3493);var un=new L["b"]("message_input_plus_button");var dn={channelId:k.a.string,threadTs:k.a.string,featureModernFileUpload:k.a.bool,featureOfflineMode:k.a.bool,clogger:k.a.object.isRequired};var pn={channelId:void 0,threadTs:void 0,featureModernFileUpload:false,featureOfflineMode:false};var fn=function(e){_()(t,e);function t(){f()(this,t);var e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderMenu=e.renderMenu.bind(e);e.onMenuOpen=e.onMenuOpen.bind(e);e.onMenuClose=e.onMenuClose.bind(e);e.state={isOpen:false};e.hiddenFileInputRef=r.a.createRef();return e}g()(t,[{key:"onMenuOpen",value:function e(){this.setState(function(){return{isOpen:true}});var t=this.props.clogger;var a={contexts:{growth:{action:"click",trigger:"plus_menu_button"}}};t.track("PFP_ACTION",a)}},{key:"onMenuClose",value:function e(){this.setState(function(){return{isOpen:false}})}},{key:"renderMenu",value:function e(t){var a=this.props,n=a.channelId,i=a.threadTs;if(!n)return null;return r.a.createElement(Qa,{menuProps:t,channelId:n,threadTs:i,hiddenFileInputRef:this.hiddenFileInputRef})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,i=t.threadTs,o=t.featureModernFileUpload,s=t.featureOfflineMode;var l=X()("p-message_input_plus",{"p-message_input_plus--active":this.state.isOpen});var c=r.a.createElement(ca["c"],{className:l},r.a.createElement(Ye["b"],{className:"p-message_input_plus_icon",type:"plus-thick"}),o&&r.a.createElement(ln,{ref:this.hiddenFileInputRef,channelId:a,threadTs:i}));var u=r.a.createElement(xa["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:this.onMenuOpen,onClose:this.onMenuClose},c);if(s){var d=r.a.createElement(n["Fragment"],null,un.t("File menu"),r.a.createElement("br",null),r.a.createElement("span",{className:"sk_light_gray"},r.a.createElement(Ye["b"],{type:"cloud-offline-small",className:"margin_right_25 float_left micro"}),un.t("No network connection")));return r.a.createElement(n["Fragment"],null,r.a.createElement(cn["b"],null,u),r.a.createElement(cn["a"],null,r.a.createElement(xa["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:this.onMenuOpen,onClose:this.onMenuClose},r.a.createElement(ea["d"],{tip:d,position:"top"},c))))}return u}}]);return t}(n["Component"]);fn.displayName="MessageInputPlusButton";fn.defaultProps=pn;function mn(e){return{featureModernFileUpload:Object(I["isFeatureEnabled"])(e,"feature_modern_file_upload"),featureOfflineMode:Object(I["isFeatureEnabled"])(e,"feature_offline_mode"),clogger:Object(Ma["a"])({state:e})}}var hn=Object(i["connect"])(mn)(fn);var vn=a(626);var gn=a(27);var bn=new L["b"]("msg_input");var _n={sendMessage:k.a.func.isRequired,isDisabled:k.a.bool,isOffline:k.a.bool,className:k.a.string,tabIndex:k.a.number,featureOfflineMode:k.a.bool,buttonSize:k.a.string,buttonType:k.a.string};var yn={isDisabled:false,isOffline:false,className:void 0,tabIndex:-1,featureOfflineMode:false,buttonSize:void 0,buttonType:void 0};var kn=function e(t){var a=t.isDisabled,i=t.isOffline,o=t.className,s=t.sendMessage,l=t.featureOfflineMode,c=t.tabIndex,u=t.buttonSize,d=t.buttonType;var p=bn.t("Send");var f=gn["isMac"]?bn.t("\u2318Enter"):bn.t("Ctrl+Enter");var m="top";var h=r.a.createElement(ca["d"],{className:o,pillarClassName:"p-message_input__send",disabled:a||i,tabIndex:c,onClick:s,size:u,type:d},p);if(l&&i){h=r.a.createElement("div",{style:{marginLeft:"auto"}},h);m="top-right";f=r.a.createElement(n["Fragment"],null,p,r.a.createElement("br",null),r.a.createElement("span",{className:"sk_light_gray"},r.a.createElement(Ye["b"],{type:"cloud-offline-small",className:"margin_right_25"}),bn.t("No network connection")))}if(a&&!l)return h;return r.a.createElement(ea["d"],{tip:f,position:m},h)};kn.displayName="MessageInputSendButton";kn.defaultProps=yn;var On=function e(t){return{isOffline:!Object(vn["isOnline"])(t),featureOfflineMode:Object(I["isFeatureEnabled"])(t,"feature_offline_mode")}};var wn=Object(i["connect"])(On)(kn);var En=Ra;var Cn=a(981);var jn=a(628);var Sn=a(2278);var In=new L["b"]("threads");var Tn={channelId:k.a.string.isRequired,threadTs:k.a.string.isRequired,channelType:k.a.string,prepareAndSendMessage:k.a.func,legacySendSlashCommand:k.a.func,setThreadDraft:k.a.func,clearThreadDraft:k.a.func,editLastMessageInChannel:k.a.func,debug:k.a.func,draft:k.a.arrayOf(k.a.object),useSendButton:k.a.bool,featureReactThreads:k.a.bool};var Nn={channelType:"channel",prepareAndSendMessage:function e(){return Promise.resolve()},legacySendSlashCommand:w["noop"],setThreadDraft:w["noop"],clearThreadDraft:w["noop"],editLastMessageInChannel:w["noop"],debug:w["noop"],draft:void 0,useSendButton:false,featureReactThreads:true};var An=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.inputRef=r.a.createRef();a.state={hasEnteredText:false,hasFocus:false,broadcast:false};Object(w["bindAll"])(a,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage"]);return a}g()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs,r=t.draft,i=t.debug;if(Object(D["a"])()&&this.inputRef.current){if(r){var o=this.getInputRef();i("DRAFT","Restoring thread draft to "+a+" ("+n+")");o.value(Object(Oa["a"])({contents:r}))}}else if(this.inputRef.current){var s=Object(jn["c"])(a,n);this.inputRef.current.getWrappedInstance().value(s)}}},{key:"onBroadcastChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{broadcast:!!a}});this.state.hasEnteredText||this.inputRef.current.getWrappedInstance().focus()}},{key:"onBroadcastControlsMouseDown",value:function e(t){t.preventDefault()}},{key:"onTextChange",value:function e(t){this.setState(function(){return{hasEnteredText:!!t}});var a=this.props,n=a.channelId,r=a.threadTs,i=a.debug;if(Object(D["a"])()){var o=this.getInputRef();var s=o.getContents();if(o.getLength()&&Object(w["trim"])(Object(Oa["a"])(s)).length){var l=new da.a(s.contents);i("DRAFT","Updating thread draft in "+n+" ("+r+")");this.props.setThreadDraft({channelId:n,threadTs:r,delta:l})}else{i("DRAFT","Clearing thread draft for "+n+" ("+r+")");this.props.clearThreadDraft({channelId:n,threadTs:r})}}else Object(jn["f"])(n,r,t)}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){this.setState(function(){return{hasFocus:false}})}},{key:"getInputRef",value:function e(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:"threads_flexpane"})}},{key:"sendMessage",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs;var r=this.state.broadcast;this.setState(function(){return{broadcast:false}});var i=this.getInputRef();var o=i.value();if(!Object(D["a"])()&&Object(Cn["a"])(o)){this.props.legacySendSlashCommand(a,n,o);return Promise.resolve()}var s=i.getContents();i.clear();return this.props.prepareAndSendMessage({channelId:a,text:o,replyToTs:n,shouldBroadcast:r}).catch(function(){i.isEmpty()&&i.setContents(s)})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs,i=t.channelType,o=t.useSendButton,s=t.featureReactThreads;var l=this.state,c=l.broadcast,u=l.hasEnteredText,d=l.hasFocus;if(!s)return null;var p=X()("p-threads_flexpane__broadcast_controls",{"p-threads_flexpane__broadcast_controls--visible":u||d});var f="";f="mpim"===i?In.t("Also send to the group"):"im"===i?In.t("Also send as direct message"):In.rt("Also send to <span></span>",null,function(){return r.a.createElement(Zt["a"],{channelId:a,inline:true,className:"p-threads_flexpane__broadcast_channel"})});var m="";m="mpim"===i||"im"===i?In.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):In.t("Choose this if you\u2019d like your reply to post in the channel, too");return r.a.createElement("div",{className:"p-threads_flexpane__input_container"},r.a.createElement(En,{className:"p-threads_flexpane__input",channelId:a,threadTs:n,placeholder:In.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true,enableBroadcastKeywords:false,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!Object(D["a"])(),maxLines:8,useSendButton:o}),r.a.createElement("div",{className:p,onMouseDown:this.onBroadcastControlsMouseDown},r.a.createElement(ba["a"],{className:"p-threads_flexpane__broadcast_label",text:f,htmlFor:"p-thread_flexpane__broadcast_checkbox",type:"inline"},r.a.createElement(ga["a"],{className:"p-threads_flexpane__broadcast_checkbox",id:"p-thread_flexpane__broadcast_checkbox",checked:c,onChange:this.onBroadcastChange})),r.a.createElement(ea["d"],{tip:m},r.a.createElement(Ye["b"],{className:"p-threads_flexpane__info_tooltip",type:"question_circle",inline:true,size:"inherit"})),r.a.createElement(wn,{isDisabled:!u,className:"p-threads_flexpane__send_button",sendMessage:this.sendMessage,buttonType:"outline",buttonSize:"small"})))}}]);return t}(n["Component"]);An.displayName="InputContainer";An.defaultProps=Nn;function Rn(e,t){var a=t.channelId,n=t.threadTs;var r=Object(qe["getChannelById"])(e,a);return{channelType:Object(Ve["getChannelType"])(r),draft:Object(pa["getThreadDraft"])(e,{channelId:a,threadTs:n}),featureReactThreads:Object(I["isFeatureEnabled"])(e,"feature_react_threads"),debug:Object(B["a"])({state:e}).debug,useSendButton:Object($["getUserPref"])(e,"msg_input_send_btn")}}var Mn={prepareAndSendMessage:fa["b"],setThreadDraft:pa["setThreadDraft"],clearThreadDraft:pa["clearThreadDraft"],editLastMessageInChannel:va,legacySendSlashCommand:function e(t,a,n){return function(e,r){var i=r();var o=Object(qe["getChannelById"])(i,t);var s=Object(S["getMessageByTimestamp"])(i,t,a);if(!o||!s)return;Object(M["k"])(o,n,s)}}};var xn=Object(i["connect"])(Rn,Mn)(An);var Pn=a(2280);var Dn=new L["b"]("threads");var Fn={channelId:k.a.string.isRequired,threadTs:k.a.string.isRequired,unknown:k.a.bool,archived:k.a.bool,imWithDeletedMember:k.a.bool,cannotReply:k.a.bool,nonMember:k.a.bool,canJoin:k.a.bool,joinConversationApi:k.a.func,featureReactThreads:k.a.bool};var Ln={unknown:false,archived:false,imWithDeletedMember:false,cannotReply:false,nonMember:false,canJoin:false,joinConversationApi:w["noop"],featureReactThreads:false};var Bn=function(e){_()(t,e);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.joinChannel=a.joinChannel.bind(a);return a}g()(t,[{key:"joinChannel",value:function e(){var t=this.props.channelId;this.props.joinConversationApi({channelId:t})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs,i=t.unknown,o=t.archived,s=t.imWithDeletedMember,l=t.cannotReply,c=t.nonMember,u=t.canJoin,d=t.featureReactThreads;if(!d)return null;if(i||s)return null;if(o)return r.a.createElement(la["a"],{level:"default",type:"inline",align:"center",className:"p-threads_flexpane__footer_alert p-threads_flexpane__footer_alert--archived"},Dn.t("You are viewing a thread from an archived channel"));if(l)return r.a.createElement(la["a"],{level:"default",type:"inline",align:"center",className:"p-threads_flexpane__footer_alert p-threads_flexpane__footer_alert--no_reply"},Dn.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return r.a.createElement(Zt["a"],{channelId:a,inline:true,iconProps:{inherit:true}})}));if(c){if(!u)return null;return r.a.createElement("div",{className:"p-threads_flexpane__footer_join_container"},r.a.createElement(ca["d"],{type:"primary",size:"medium",onClick:this.joinChannel},Dn.t("Join Channel")),r.a.createElement("p",{className:"p-threads_flexpane__footer_join_label"},Dn.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return r.a.createElement(Zt["a"],{channelId:a,inline:true,iconProps:{inherit:true}})})))}return r.a.createElement(xn,{channelId:a,threadTs:n,key:Object(P["getThreadKey"])(a,n)})}}]);return t}(n["Component"]);Bn.displayName="Footer";Bn.defaultProps=Ln;function Un(e,t){var a=t.channelId;var n=Object(qe["getChannelById"])(e,a);return{unknown:Object(Ve["isUnknownOrNonExistent"])(n),archived:Object(Ve["isArchived"])(n),imWithDeletedMember:Object(Ve["isImWithDeletedMember"])(e,n),cannotReply:!Object(Ve["canThread"])(n),nonMember:Object(Ve["isPublicChannel"])(n)&&!Object(Ve["isMemberOfChannel"])(n),canJoin:Object(ae["d"])(e,a),featureReactThreads:Object(I["isFeatureEnabled"])(e,"feature_react_threads")}}var qn=Object(i["connect"])(Un,{joinConversationApi:qe["joinConversationApi"]})(Bn);var Gn=a(2282);var Hn=new L["b"]("threads");var Wn={replyCount:k.a.number};var Vn={replyCount:0};function zn(e){var t=e.replyCount;var a=Hn.t("{count, plural, =1 {# reply} other {# replies}}",{count:t,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return r.a.createElement("div",{className:"p-threads_flexpane__separator"},r.a.createElement("span",{className:"p-threads_flexpane__separator_count"},a),r.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}zn.displayName="Separator";zn.defaultProps=Vn;function Qn(e,t){var a=t.channelId,n=t.threadTs;var r=Object(S["getMessageByTimestamp"])(e,a,n);return{replyCount:Object(We["getReplyCount"])(r)}}var Kn=Object(i["connect"])(Qn)(zn);function Yn(e,t,a){var n=Object(S["getMessageByTimestamp"])(e,t,a);return n&&!Object(We["isTempMsg"])(n)&&!Object(We["isEphemeral"])(n)}function Jn(e,t,a){return Object(w["max"])(Object(w["filter"])(a,function(a){return Yn(e,t,a)}))}var Zn=a(2284);var Xn=new L["b"]("threads");var $n=Object(qt["a"])(St);var er=Object(qt["a"])(Ut);var tr={threadTs:k.a.string,channelId:k.a.string,subscribed:k.a.bool,lastRead:k.a.string,maxMarkableTs:k.a.string,oldest:k.a.string,latest:k.a.string,timestamps:k.a.arrayOf(k.a.string),reachedStart:k.a.bool,reachedEnd:k.a.bool,fileId:k.a.string,comments:k.a.array,startTs:k.a.string,highlightTs:k.a.string,highlightKey:k.a.string,showDragOverlay:k.a.bool,requestHistory:k.a.func,clearHighlight:k.a.func,markThread:k.a.func,useGlobalNav:k.a.bool,windowFocused:k.a.bool,userAttention:k.a.string,featureReactThreads:k.a.bool,logInfo:k.a.func};var ar={threadTs:void 0,channelId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:false,reachedEnd:false,fileId:void 0,comments:[],startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:false,requestHistory:w["noop"],clearHighlight:w["noop"],markThread:w["noop"],useGlobalNav:false,windowFocused:false,userAttention:"",featureReactThreads:true,logInfo:w["noop"]};var nr="THREAD-FLEXPANE";var rr=function(e){_()(t,e);g()(t,null,[{key:"getRowsAndKeys",value:function e(t,a){var n=t.threadTs,r=t.reachedStart,i=t.reachedEnd,o=t.timestamps,s=t.comments;var l=a.commentsExpanded;var c=[];var u=[];if(Object(w["isEmpty"])(o))return{rows:u,keys:c};var d=Object(w["first"])(o)===n;var p=Object(w["without"])(o,n);if(!r){c.push("loading-start");u.push({type:"loading"})}if(d){c.push(n);u.push({type:"root",ts:n});if(!Object(w["isEmpty"])(s)){c.push("comments-toggle");u.push({type:"comments-toggle"});l&&s.forEach(function(e){c.push(e.id);u.push({type:"comment",comment:e})})}if(p.length){c.push("separator");u.push({type:"separator"})}}p.forEach(function(e,t){c.push(e);u.push({type:"reply",ts:e,prevTs:p[t-1]})});if(i){c.push("input");u.push({type:"input"})}else{c.push("loading-end");u.push({type:"loading"})}return{rows:u,keys:c}}}]);function t(e){f()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.requestHistory=a.requestHistory.bind(a);a.renderRow=a.renderRow.bind(a);a.renderList=a.renderList.bind(a);a.toggleComments=a.toggleComments.bind(a);a.shouldFocusNextItem=a.shouldFocusNextItem.bind(a);a.keys=null;a.rows=null;a.state={commentsExpanded:false};return a}g()(t,[{key:"componentDidMount",value:function e(){this.checkUnreads()}},{key:"componentDidUpdate",value:function e(){this.checkUnreads()}},{key:"checkUnreads",value:function e(){var t=this.props,a=t.channelId,n=t.threadTs,r=t.subscribed,i=t.lastRead,o=t.reachedEnd,s=t.maxMarkableTs,l=t.userAttention,c=t.logInfo;if(!r||!o||!s)return;if(!i||i<s){if(Object(D["a"])()){if(l!==x["a"].MESSAGE_PANE){c(nr,"Not marking "+Object(P["getThreadKey"])(a,n)+" to "+s+" because "+l);return}}else if(!Object(M["f"])()){c(nr,"Not marking "+Object(P["getThreadKey"])(a,n)+" to "+s+" because "+Object(M["c"])());return}c(nr,"Marking "+Object(P["getThreadKey"])(a,n)+": "+s);this.props.markThread({channelId:a,ts:n,lastRead:s})}}},{key:"requestHistory",value:function e(t){var a=t.oldest,n=t.latest;var r=this.props,i=r.channelId,o=r.threadTs,e=r.requestHistory;return e({oldest:a,latest:n,channelId:i,threadTs:o})}},{key:"toggleComments",value:function e(){var t=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!t}})}},{key:"shouldFocusNextItem",value:function e(t){var a=t.index;var n=this.rows[a];if(!n)return false;return"loading"!==n.type}},{key:"renderRow",value:function e(t,a){var n=a.hasFocus;var i=this.props,o=i.channelId,s=i.highlightTs,l=i.threadTs,c=i.comments,u=i.fileId,d=i.featureReactThreads;if(!d)return null;var p=this.state.commentsExpanded;var f=this.rows[t];if(!f)return null;switch(f.type){case"separator":return r.a.createElement(Kn,{channelId:o,threadTs:l});case"root":return r.a.createElement($n,{channelId:o,ts:f.ts,highlight:f.ts===s,clearHighlight:this.props.clearHighlight,focused:n});case"reply":return r.a.createElement(er,{channelId:o,ts:f.ts,highlight:f.ts===s,clearHighlight:this.props.clearHighlight,focused:n});case"input":return r.a.createElement(qn,{channelId:o,threadTs:l});case"comments-toggle":return r.a.createElement(Gt["a"],{commentCount:c.length,expanded:p,toggleList:this.toggleComments});case"comment":return r.a.createElement(Ht["a"],{comment:f.comment,fileId:u});case"loading":return r.a.createElement("div",{className:"p-threads_flexpane__loading"},Xn.t("Loading messages..."));default:return null}}},{key:"renderList",value:function e(a){var n=this;var i=t.getRowsAndKeys(this.props,this.state),o=i.rows,s=i.keys;this.rows=o;this.keys=s;return r.a.createElement("div",{style:{flex:1}},r.a.createElement(O["a"],null,function(e){var t=e.width,i=e.height;return r.a.createElement(z["a"],d()({},a,{keys:s,width:t,height:i,rowRenderer:n.renderRow,shouldFocusNextItem:n.shouldFocusNextItem}))}))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,i=t.threadTs,o=t.oldest,s=t.latest,l=t.timestamps,c=t.startTs,u=t.highlightTs,p=t.highlightKey,f=t.reachedStart,m=t.reachedEnd,h=t.comments,v=t.showDragOverlay;if(!a||!i)return null;var g=this.state.commentsExpanded;var b={comments:h,commentsExpanded:g,highlightTs:u,highlightKey:p};var _=r.a.createElement(n["Fragment"],null,!this.props.useGlobalNav&&r.a.createElement(sa,{channelId:a,threadTs:i}),r.a.createElement(V,d()({oldest:o,latest:s,timestamps:l,listRenderer:this.renderList,startTs:c,highlightKey:p,requestHistory:this.requestHistory,reachedStart:f,reachedEnd:m},b,{key:Object(P["getThreadKey"])(a,i)})),Object(w["isEmpty"])(l)&&r.a.createElement(Jt,null),v&&r.a.createElement(re["a"],null));return Object(D["a"])()?r.a.createElement(Q["a"],{id:"threads_flexpane"},r.a.createElement(pe,{location:oe.THREAD,channelId:a,threadTs:i,className:"p-threads_flexpane"},_)):r.a.createElement(Q["a"],{id:"threads_flexpane"},r.a.createElement("div",{className:"p-threads_flexpane"},_))}}]);return t}(n["PureComponent"]);rr.displayName="ThreadsFlexpane";rr.defaultProps=ar;var ir=function e(t,a){var n=void 0;n=Object(I["isFeatureEnabled"])(t,"feature_remove_flexpane_store")?Object(N["getFlexParams"])(t)[0]:Object(T["getFlexpaneState"])(t).flexExtra;var r=(n||"").split("-"),i=c()(r,2),o=i[0],s=i[1];var l=a.threadTs||s;var u=a.channelId||o;var p=Object(A["getStartTs"])(t)||l;var f=Object(A["getHighlight"])(t),m=f.highlightTs,h=f.highlightKey;var v=Object(P["getThreadKey"])(u,l);var g=Object(C["getTimestampsByChannelId"])(t,v,p),b=g.start,_=g.end,y=g.timestamps,k=g.reachedStart,O=g.reachedEnd;var w=Object(R["getSubscriptionState"])(t,{channelId:u,ts:l});var M=void 0;var L=void 0;var U=Object(S["getMessageByTimestamp"])(t,u,l);if(U&&U.files&&1===U.files.length){L=U.files[0];var q=Object(j["getFileById"])(t,L);q&&(M=q.comments)}var G={};Object(D["a"])()?G.userAttention=Object(x["b"])(t):G.windowFocused=Object(E["isWindowFocused"])(t);var H=Object(B["a"])({state:t});return d()({threadTs:l,channelId:u,subscribed:w&&w.subscribed,lastRead:w&&w.lastRead,maxMarkableTs:Jn(t,u,y),oldest:b,latest:_,timestamps:y,reachedStart:k,reachedEnd:O,fileId:L,comments:M,startTs:p,highlightTs:m,highlightKey:h,showDragOverlay:Object(A["getShowDragOverlay"])(t),useGlobalNav:Object(F["b"])(t)},G,{featureReactThreads:Object(I["isFeatureEnabled"])(t,"feature_react_threads"),logInfo:H.info})};var or=Object(K["e"])(rr,{alwaysFetchOnMount:true});var sr=Object(i["connect"])(ir,{requestHistory:A["requestReplies"],clearHighlight:A["clearHighlight"],markThread:R["markThread"]})(or);var lr=sr;var cr=function e(t,a){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(lr,null)),a)};var ur=cr;var dr=a(51);Object(dr["a"])("interop.mountThreadsFlexpane",ur)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(3318);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var n=Object(c["d"])(e);Object(l["a"])(r.a.createElement(s["Provider"],{store:n},r.a.createElement(u["a"],a)),t)}function p(e){o.a.unmountComponentAtNode(e)}var f=a(51);Object(f["a"])("interop.mountMessagePaneDragOverlay",d);Object(f["a"])("interop.unmountMessagePaneDragOverlay",p)},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(104);var o=a.n(i);var s=a(14);var l=a(33);var c=a(51);var u=a(3);var d=a.n(u);var p=a(5);var f=a.n(p);var m=a(6);var h=a.n(m);var v=a(7);var g=a.n(v);var b=a(8);var _=a.n(b);var y=a(0);var k=a.n(y);var O=a(15);var w=a.n(O);var E=a(10);var C=a(701);var j=a(2);var S=a(159);var I=a(18);var T={action:k.a.node.isRequired};var N=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return r.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(n["PureComponent"]);N.displayName="AppProfileHeaderActionItem";var A=N;var R=a(2103);var M={appName:k.a.string.isRequired,appImageSrc:k.a.string.isRequired,appByline:k.a.string,headerActions:k.a.array,actions:k.a.object.isRequired,dispatch:k.a.func.isRequired};var x={appByline:"",headerActions:[]};var P=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);return a}h()(t,[{key:"onBackClick",value:function e(){var t=this.props,a=t.actions,n=t.dispatch;n(a.router.navigateTo("/organization/apps"));n(a.apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(j["map"])(t,function(e,t){return r.a.createElement(A,{key:t,action:e})});return a}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.appName,i=a.appImageSrc,o=a.appByline;return r.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},r.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},r.a.createElement(I["a"],{onClick:function e(){return t.onBackClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),r.a.createElement("img",{className:"p-app_profile_header__app_image margin_right_100 margin_left_100",src:i,alt:n}),r.a.createElement("div",{className:"display_flex flex_direction_column"},r.a.createElement("h3",{className:"black"},n),r.a.createElement("span",{className:"p-app_profile_header__app_byline sk_dark_grey"},o))),r.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(n["PureComponent"]);P.displayName="AppProfileHeader";P.defaultProps=x;var D=P;var F=D;var L=a(67);var B=a.n(L);var U=a(77);var q=a(20);var G=a(54);var H=a(872);var W=a(325);var V=a(88);var z=a(338);var Q=new E["b"]("enterprise_dashboard");var K={appIcon:k.a.string.isRequired,appName:k.a.string.isRequired,channelScopeInfo:k.a.arrayOf(W["a"]),featureWtaOrgLevelApps:k.a.bool,installOnAllWorkspaces:k.a.bool,onCancel:k.a.func,onGo:k.a.func.isRequired,workspaceName:k.a.string,workspaceScopeInfo:k.a.arrayOf(W["a"]).isRequired,workspacesToInstallOnCount:k.a.number};var Y={channelScopeInfo:[],featureWtaOrgLevelApps:false,installOnAllWorkspaces:false,onCancel:j["noop"],workspaceName:void 0,workspacesToInstallOnCount:1};var J=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={step:0,wildcardEnabled:true};Object(j["bindAll"])(a,["handleGoClick","handleRadioButtonChange"]);return a}h()(t,[{key:"handleGoClick",value:function e(){var t=this.state.wildcardEnabled;if(this.shouldGoToNextStep()){this.setState(function(){return{step:1}});return}this.props.onGo({wildcardEnabled:t})}},{key:"handleRadioButtonChange",value:function e(){this.setState(function(e){var t=e.wildcardEnabled;return{wildcardEnabled:!t}})}},{key:"shouldGoToNextStep",value:function e(){return 0===this.state.step&&this.props.channelScopeInfo.length>0}},{key:"renderScopeInfo",value:function e(){var t=this.props,a=t.channelScopeInfo,n=t.workspaceScopeInfo;if(1===this.state.step)return a;return n}},{key:"renderTitle",value:function e(){var t=this.props,a=t.appName,n=t.featureWtaOrgLevelApps,r=t.installOnAllWorkspaces,i=t.workspaceName,o=t.workspacesToInstallOnCount;if(!n)return"";if(1===this.state.step)return Q.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:a});if(r)return Q.t("On all workspaces, {appName} would like to:",{appName:Object(E["m"])(a)});if(o>1)return Q.t("On {workspacesToInstallOnCount} workspaces, {appName} would like to:",{appName:Object(E["m"])(a),workspacesToInstallOnCount:o});return Q.t("On {workspaceName}, {appName} would like to:",{appName:Object(E["m"])(a),workspaceName:Object(E["m"])(i)})}},{key:"renderGoButtonText",value:function e(){if(!this.props.featureWtaOrgLevelApps)return"";return this.shouldGoToNextStep()?"Continue":"Install"}},{key:"renderRadioButtons",value:function e(){var t=this.props,a=t.featureWtaOrgLevelApps,n=t.appName,i=t.installOnAllWorkspaces,o=t.workspaceName,s=t.workspacesToInstallOnCount;var l=this.state,c=l.step,u=l.wildcardEnabled;if(!a||0===c)return null;var d=void 0;d=i?Q.t("Any channel accessible to full members on all workspaces."):s>1?Q.t("Any channel accessible to full members on {workspacesToInstallOnCount} workspaces.",{workspacesToInstallOnCount:s}):Q.t("Any channel accessible to full members on {workspaceName}.",{workspaceName:Object(E["m"])(o)});return r.a.createElement("div",{className:"large_top_margin"},r.a.createElement("p",{className:"bold"},Q.t("Select channels")),r.a.createElement("div",{className:"margin_bottom_100"},r.a.createElement(V["a"],{text:Q.t("All Public Channels"),htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},r.a.createElement(z["a"],{name:"channels",id:"all-channels",checked:u,onChange:this.handleRadioButtonChange}))),r.a.createElement("div",{className:"margin_bottom_100"},r.a.createElement(V["a"],{text:Q.t("No channels"),htmlFor:"no-channels",type:"inline",subtext:Q.t("{app_name} will still be able to access a private conversation with you.",{app_name:Object(E["m"])(n)}),cursor:"pointer"},r.a.createElement(z["a"],{name:"channels",id:"no-channels",checked:!u,onChange:this.handleRadioButtonChange}))))}},{key:"render",value:function e(){var t=this.props,a=t.appIcon,n=t.onCancel;return r.a.createElement(H["b"],{appIcon:a,goButtonText:this.renderGoButtonText(),onDismiss:n,onAuthorize:this.handleGoClick,scopeInfo:this.renderScopeInfo(),shouldCloseOnGo:!this.shouldGoToNextStep(),title:this.renderTitle()},this.renderRadioButtons())}}]);return t}(n["PureComponent"]);J.displayName="OrgAppInstallDialog";J.defaultProps=Y;var Z=J;var X=Object(S["a"])("feature_wta_org_level_apps")(J);var $=X;var ee=a(1152);var te=new E["b"]("enterprise_dashboard");var ae={appName:k.a.string.isRequired,appIcon:k.a.string.isRequired,featureWtaOrgLevelApps:k.a.bool,onCancel:k.a.func,onGo:k.a.func.isRequired,uninstallFromAllWorkspaces:k.a.bool,workspaceName:k.a.string,workspacesToUninstallFromCount:k.a.number};var ne={featureWtaOrgLevelApps:false,onCancel:j["noop"],uninstallFromAllWorkspaces:false,workspaceName:void 0,workspacesToUninstallFromCount:1};var re=function e(t){var a=t.appName,n=t.appIcon,i=t.featureWtaOrgLevelApps,o=t.onCancel,s=t.onGo,l=t.uninstallFromAllWorkspaces,c=t.workspaceName,u=t.workspacesToUninstallFromCount;var d=void 0;var p=void 0;var f=void 0;if(i)if(l){d=te.t("Uninstall {appName} from all workspaces?",{appName:Object(E["m"])(a)});p=te.rt("I understand that members of <strong>all workspaces</strong> will no longer be able to use {appName}.",{appName:a});f=te.rt("I understand that {appName} will lose <strong>all access</strong> to all workspaces, including access to channels.",{appName:a})}else if(u>1){d=te.t("Uninstall {appName} from {workspacesToUninstallFromCount} workspaces?",{appName:Object(E["m"])(a),workspacesToUninstallFromCount:u});p=te.rt("I understand that members of <strong>{workspacesToUninstallFromCount} workspaces</strong> will no longer be able to use {appName}.",{appName:a,workspacesToUninstallFromCount:u});f=te.rt("I understand that {appName} will lose <strong>all access</strong> to {workspacesToUninstallFromCount} workspaces, including access to channels.",{appName:a,workspacesToUninstallFromCount:u})}else f=te.rt("I understand that {appName} will lose <strong>all access</strong> to {workspaceName}, including access to channels.",{appName:a,workspaceName:c});var m={appName:a,appIcon:n,workspaceName:c,title:d,workspaceAccessCheckboxText:p,channelAccessCheckboxText:f,onGo:s,onCancel:o};return r.a.createElement(ee["a"],m)};re.displayName="OrgAppUninstallDialog";re.defaultProps=ne;var ie=re;var oe=Object(S["a"])("feature_wta_org_level_apps")(re);var se=oe;var le=new E["b"]("enterprise_dashboard");var ce={appIcon:k.a.string.isRequired,appName:k.a.string.isRequired,featureWtaOrgLevelApps:k.a.bool,isInstalledEverywhere:k.a.bool,openModal:k.a.func,scopes:k.a.arrayOf(k.a.object)};var ue={featureWtaOrgLevelApps:false,isInstalledEverywhere:false,openModal:j["noop"],scopes:[]};var de=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(a,["showInstallDialog","showUninstallDialog","renderMenu"]);return a}h()(t,[{key:"showInstallDialog",value:function e(){var t=this.props,a=t.appIcon,n=t.appName,i=t.scopes;var o=Object(j["partition"])(i.map(function(e){return d()({},e,{scopes:[e.scope]})}),["is_channel_scope",true]),s=B()(o,2),l=s[0],c=s[1];var u={appIcon:a,appName:n,channelScopeInfo:l,installOnAllWorkspaces:true,onGo:j["noop"],workspaceScopeInfo:c};this.props.openModal({element:r.a.createElement($,u)})}},{key:"showUninstallDialog",value:function e(){var t=this.props,a=t.appIcon,n=t.appName;var i={appIcon:a,appName:n,onGo:j["noop"],uninstallFromAllWorkspaces:true};this.props.openModal({element:r.a.createElement(se,i)})}},{key:"renderMenu",value:function e(t){var a=this.props,n=a.isInstalledEverywhere,i=a.featureWtaOrgLevelApps;if(!i)return null;return r.a.createElement(G["f"],t,!n&&r.a.createElement(G["b"],{"data-qa":"ent_app_profile_install_everywhere",onSelected:this.showInstallDialog,label:le.t("Install on all workspaces")}),r.a.createElement(G["b"],{"data-qa":"ent_app_profile_uninstall_everywhere",onSelected:this.showUninstallDialog,danger:true,label:le.t("Uninstall on all workspaces")}))}},{key:"render",value:function e(){var t=this.props,a=t.isInstalledEverywhere,n=t.featureWtaOrgLevelApps;if(!n)return null;return r.a.createElement("div",{className:"p-app_profile_header__install_menu"},!a&&r.a.createElement(q["d"],{"data-qa":"ent_app_profile_install",className:"margin_right_75",type:"outline",onClick:j["noop"]},le.t("Install")),r.a.createElement(G["e"],{renderMenu:this.renderMenu,position:"bottom-right"},r.a.createElement(q["d"],{"data-qa":"ent_app_profile_install_menu",className:"p-app_profile_header__install_menu_trigger",type:"outline",icon:"ellipsis"})))}}]);return t}(n["PureComponent"]);de.displayName="AppProfileHeaderInstallMenu";de.defaultProps=ue;var pe=de;var fe={openModal:U["openModal"]};var me=Object(s["connect"])(null,fe)(de);var he=a(32);var ve=a.n(he);var ge=a(1399);var be=a(714);var _e=a(9);var ye=a.n(_e);var ke=a(24);var Oe=a.n(ke);var we=a(227);var Ee=a(65);var Ce=a(11);var je=a(820);var Se=a(775);var Ie=a(479);var Te=a(3269);var Ne=a(695);var Ae=a(855);var Re=a(3447);var Me=k.a.shape({selectionElementId:k.a.string,previewText:k.a.string,isSelected:k.a.bool});var xe=k.a.shape({id:k.a.string.isRequired,label:k.a.node.isRequired,isPrimary:k.a.bool,isDanger:k.a.bool,disabled:k.a.bool,appliesToCount:k.a.number});var Pe={availableCount:k.a.number.isRequired,selectedCount:k.a.number.isRequired,items:k.a.arrayOf(Me).isRequired,featureI18nSelectionBar:k.a.bool,actions:k.a.arrayOf(xe).isRequired,titleFormatter:k.a.func,showingSelection:k.a.bool,onToggleShowingSelection:k.a.func,onToggleSelect:k.a.func,onAction:k.a.func,"data-qa":k.a.string,position:k.a.string};var De={featureI18nSelectionBar:false,showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",position:void 0};var Fe=76;var Le=3;var Be=new E["b"]("selection_bar");var Ue=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCheckboxChange=a.onCheckboxChange.bind(a);a.onShowClick=a.onShowClick.bind(a);a.renderActionMenu=a.renderActionMenu.bind(a);a.getDefaultTitle=a.getDefaultTitle.bind(a);return a}h()(t,[{key:"onCheckboxChange",value:function e(){var t=this.props,a=t.selectedCount,n=t.availableCount,r=t.onToggleSelect;r(n!==a)}},{key:"onShowClick",value:function e(){var t=this.props,a=t.showingSelection,n=t.onToggleShowingSelection;n(!a)}},{key:"getDataQAAttr",value:function e(t){return this.props["data-qa"]+"_"+t}},{key:"getDefaultTitle",value:function e(t){if(!this.props.featureI18nSelectionBar)return null;return Be.t("{selectedCount, plural,=1 {# item selected} other {# items selected}}",{selectedCount:t})}},{key:"getPreviewText",value:function e(t,a){if(!this.props.featureI18nSelectionBar)return null;var n=null;(t.length>0||a>0)&&(n=a>0?Be.t("{previewSelectionItems}{ moreItemsCount, plural,=1 {, and # more} other {, and # more}}.",{previewSelectionItems:Object(E["f"])(t,{noConj:true}).join(""),moreItemsCount:a}):Be.t("{previewSelectionItems}.",{previewSelectionItems:Object(E["f"])(t).join("")}));return n}},{key:"getItemListProps",value:function e(t,a){return Object(j["reduce"])(t,function(e,t,a){var n=0===a?"":" ";e.ariaControls+=""+n+t.selectionElementId;if(t.isSelected&&e.previewItems.length<Le){e.previewItems.push(t.previewText);e.moreItemsCount-=1}return e},{ariaControls:"",previewItems:[],moreItemsCount:a})}},{key:"getActionProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=void 0;var n=Object(j["findIndex"])(t,{isPrimary:true});n=-1!==n?n:0;var r=d()({},t[n],{isPrimary:true});var i=t.length>=3;if(t.length<=1)a={primaryAction:r,isMenu:i};else if(2===t.length){var o=0===n?t[1]:t[0];a={primaryAction:r,secondaryAction:o,isMenu:i}}else{var s=[].concat(Oe()(t.slice(0,n)),Oe()(t.slice(n+1)));a={primaryAction:r,menuActions:s,isMenu:i}}return a}},{key:"renderActionLabel",value:function e(t){var a=t.label,n=t.appliesToCount;if(!this.props.featureI18nSelectionBar)return null;return n&&n>0?Be.t("{action} ({count})",{action:a,count:n}):a}},{key:"renderActionButton",value:function e(t){var a=this;var n=t.id,i=t.isPrimary,o=t.isDanger,s=t.disabled;var l=je["a"].outline;o?l=je["a"].danger:i&&(l=je["a"].primary);return r.a.createElement(je["b"],{key:n,type:l,className:i?void 0:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_"+n),disabled:s,onClick:function e(){return a.props.onAction(n)}},this.renderActionLabel(t))}},{key:"renderActionMenuButton",value:function e(){if(!this.props.featureI18nSelectionBar)return null;var t=Be.rt("More {chevronDownIcon}",{chevronDownIcon:r.a.createElement(Ae["a"],{type:"chevron-down",inline:true})});return r.a.createElement(Se["a"],{renderMenu:this.renderActionMenu,position:"top-right",offsetY:-8},r.a.createElement(je["b"],{className:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_menu"),type:je["a"].outline},t))}},{key:"renderActionMenu",value:function e(t){var a=this;var n=this.getActionProps(this.props.actions),i=n.menuActions;if(!i||0===i.length)return null;return r.a.createElement(Ne["a"],t,i.map(function(e){return r.a.createElement(Ie["a"],{key:e.id,label:a.renderActionLabel(e),disabled:e.disabled,"data-qa":a.getDataQAAttr("action_menu_item_"+e.id),onSelected:function t(){return a.props.onAction(e.id)},danger:true===e.isDanger})}))}},{key:"render",value:function e(){var t;var a=this.props,n=a.availableCount,i=a.selectedCount,o=a.items,s=a.titleFormatter,l=a.showingSelection,c=a.actions,u=a.featureI18nSelectionBar,d=a.position;var p=n===i;var f=!p&&i>0;var m=this.getItemListProps(o,i),h=m.ariaControls,v=m.previewItems,g=m.moreItemsCount;var b=this.getPreviewText(v,g);var _=s||this.getDefaultTitle;var y=this.getActionProps(c),k=y.primaryAction,O=y.secondaryAction,E=y.isMenu;var C="c-selection_bar--position_"+d;var j=(t={},ye()(t,C,!!d),ye()(t,"c-selection_bar--position_relative","relative"===d),ye()(t,"c-selection_bar--slide_up",i>0),t);var S=null;var I=null;if(u){S=f||0===i?Be.t("Select all"):Be.t("Deselect all");I=l?Be.t("Show all"):Be.t("Show selection")}return r.a.createElement("div",{className:w()("c-selection_bar",j)},r.a.createElement("div",{className:"c-selection_bar__checkbox"},r.a.createElement(Te["c"],{tip:S},r.a.createElement("div",null,r.a.createElement(we["a"],{className:"c-selection_bar__checkbox_input","aria-label":b,"data-qa":this.getDataQAAttr("checkbox"),checked:p,indeterminate:f,"aria-controls":h,onChange:this.onCheckboxChange})))),r.a.createElement("div",{className:"c-selection_bar__body"},r.a.createElement("div",{className:"c-selection_bar__selected_count","data-qa":this.getDataQAAttr("title")},_(i)),r.a.createElement("div",null,r.a.createElement("span",{className:"c-selection_bar__selected_preview","data-qa":this.getDataQAAttr("preview")},b),r.a.createElement(Ee["a"],{className:"c-selection_bar__show_link",onClick:this.onShowClick,"data-qa":this.getDataQAAttr("show_link")},I))),r.a.createElement("div",{className:"c-selection_bar__actions"},E&&this.renderActionMenuButton(),O&&this.renderActionButton(O),k&&this.renderActionButton(k)))}}]);return t}(n["PureComponent"]);Ue.displayName="CoreSelectionBar";Ue.defaultProps=De;var qe=function e(t){return{featureI18nSelectionBar:Object(Ce["isFeatureEnabled"])(t,"feature_i18n_selection_bar")}};var Ge=Object(s["connect"])(qe)(Ue);var He=new E["b"]("enterprise_dashboard");var We={appId:k.a.string,workspacesByApp:k.a.array,workspacesByAppApiCursor:k.a.string,workspacesByAppApiTotal:k.a.number,workspacesByAppLoading:k.a.bool,headerItemOnClick:k.a.func,pageSize:k.a.number,sortBy:k.a.string,sortDir:k.a.string,searchQuery:k.a.string,rowHeaderItemClassName:k.a.string,rowClassName:k.a.string,columns:k.a.array.isRequired,actions:k.a.object.isRequired,isSelectionBarShowing:k.a.bool};var Ve={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:j["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",isSelectionBarShowing:false};var ze="asc";var Qe="desc";var Ke="caret_down";var Ye="caret_up";var Je={};Je[ze]=Ke;Je[Qe]=Ye;var Ze=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=a.props,i=n.sortBy,o=n.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:o,offset:0,height:null,paddingBottom:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var n=He.rt("No workspaces were found matching <b>{query}</b>",{query:a});return r.a.createElement("div",{className:"align_center"},n)}}]};return a}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.workspacesByApp,n=t.sortBy,r=t.actions;var i=this.state.offset;a.length?this.updateRowListItemsData(i):r.setWorkspacesByAppLoading(true);r.setWorkspacesByAppSortBy(n)}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){t.isSelectionBarShowing!==this.props.isSelectionBarShowing&&this.refreshTableHeightPolitely();this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,n=a.workspacesByApp,r=a.workspacesByAppApiTotal;if(r&&n.length>=r)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props,n=a.appId,r=a.workspacesByAppLoading;var i=r&&!t.workspacesByAppLoading;var o=n&&n!==t.appId;n&&(i||o)&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props,n=a.searchQuery,r=a.actions;if(t.searchQuery!==n){this.resetWorkspacesByAppsState();r.setWorkspacesByAppLoading(true)}}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var n=this.props,r=n.searchQuery,i=n.workspacesByApp,o=n.workspacesByAppLoading,s=n.columns;t.workspacesByApp===i&&t.searchQuery===r&&t.workspacesByAppLoading===o&&t.columns===s||this.updateRowListItemsData(a)}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,n=t.sortDir;var r=this.props,i=r.appId,o=r.pageSize,s=r.searchQuery,l=r.workspacesByAppApiCursor,c=r.actions;if(!i)return;var u={limit:o,app:i};a&&(u.sort=a);n&&(u.sort_dir=n);null!==s&&void 0!==s&&Object(j["trim"])(s).length&&(u.query=s);l&&(u.cursor=l);c.getWorkspacesByApp(u)}},{key:"headerItemOnClick",value:function e(t){var a=this;var n=this.state,r=n.sortBy,i=n.sortDir;var o=this.props,e=o.headerItemOnClick,s=o.actions;var l=r;var c=i;if(t.id===r){c=i&&i!==ze?ze:Qe;s.setWorkspacesByAppSortDir(c)}else{l=t.id;c=t.defaultSortType?t.defaultSortType===ze?Qe:ze:Qe;s.setWorkspacesByAppSortDir(c);s.setWorkspacesByAppSortBy(l)}var u={sortBy:l,sortDir:c};this.setState(function(){return u},function(){a.resetWorkspacesByAppsState();e&&e(t);s.setWorkspacesByAppLoading(true)})}},{key:"resetWorkspacesByAppsState",value:function e(){var t=this.props.actions;t.setWorkspacesByApp([]);t.setWorkspacesByAppApiCursor(null);t.setWorkspacesByAppLoading(false);t.setWorkspacesByAppApiTotal(null)}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var n=a.getBoundingClientRect();var r=this.props.isSelectionBarShowing?Fe:1;var i=t-(n&&n.top);var o=64;var s=Math.max(o,i-r);var l={height:s+"px",paddingBottom:r};this.setState(l)}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.header.value,className:t.header.className,"data-qa":t.header["data-qa"]};if(t.header.sortable){a.iconType=this.determineSortState(a.id,t.header);a.onClick=this.headerItemOnClick;t.header.defaultSortType&&(a.defaultSortType=t.header.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;return t.map(function(e){return a.makeHeader(e)})}},{key:"determineSortState",value:function e(t,a){var n=this.state,r=n.sortBy,i=n.sortDir;var o=a.defaultSortType||ze;var s=Je[o];if(!r||r!==t)return s;var l=void 0;l=i?i===ze?Ke:Ye:Je[o];return l}},{key:"updateRowListItemsData",value:function e(){var t=this.props,a=t.workspacesByApp,n=t.workspacesByAppLoading,r=t.columns;var i=[];if(a&&a.length)i=a.map(function(e){var t=e.team_id;return{id:"row_"+t,items:r.map(function(a){return{id:"row_"+t+"_col_"+a.id,value:a.rowTemplate.value(e),className:a.rowTemplate.className}})}});else if(!n){var o=this.props.searchQuery;if(null===o||void 0===o||!o.length){this.setState(function(){return{rowListItems:i}});return}i=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value({searchQuery:o})}]}]}this.setState(function(){return{rowListItems:i}})}},{key:"render",value:function e(){var t=this;var a=this.state,n=a.sortBy,i=a.sortDir,o=a.height,s=a.rowListItems,l=a.offset,c=a.paddingBottom;var u=this.props,d=u.rowHeaderItemClassName,p=u.rowClassName,f=u.workspacesByAppLoading,m=u.columns;var h=this.makeHeaders(m);return r.a.createElement("div",{style:{paddingBottom:c}},r.a.createElement(be["a"],{rows:s,headers:h,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:n,sortDir:i,height:o,isLoading:f,newQuery:!l,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(n["PureComponent"]);Ze.displayName="WorkspacesByAppList";Ze.defaultProps=Ve;var Xe=Ze;var $e=a(118);var et=a(1089);var tt=a(1145);var at={items:k.a.arrayOf(Me).isRequired,itemMapper:k.a.func,actions:k.a.arrayOf(xe).isRequired,titleFormatter:k.a.func,showingSelection:k.a.bool,onToggleShowingSelection:k.a.func,onToggleSelect:k.a.func,onAction:k.a.func,"data-qa":k.a.string,position:k.a.string};var nt={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",itemMapper:null,position:void 0};var rt=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"getBaseSelectionBarProps",value:function e(t){var a=this.props.itemMapper;var n=a?t.map(a):t;var r=Object(j["reduce"])(n,function(e,t){return e+(t.isSelected?1:0)},0);return{items:n,availableCount:t.length,selectedCount:r}}},{key:"render",value:function e(){var t=this.props,a=t.items,n=ve()(t,["items"]);return r.a.createElement(Ge,d()({},this.getBaseSelectionBarProps(a),n))}}]);return t}(n["PureComponent"]);rt.displayName="SelectionBar";rt.defaultProps=nt;var it=rt;var ot=it;var st=a(2066);var lt=new E["b"]("enterprise_dashboard");var ct={orgName:k.a.string};var ut={orgName:""};var dt=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.orgName;var a=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var n=lt.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return r.a.createElement("div",{className:"p-app_profile_empty_state_container"},r.a.createElement("img",{src:a,alt:"",className:"auto_width margin_bottom_100"}),r.a.createElement("h3",{className:"black margin_bottom_75"},n))}}]);return t}(n["PureComponent"]);dt.displayName="AppProfileInstallationsEmptyState";dt.defaultProps=ut;var pt=dt;var ft=new E["b"]("enterprise_dashboard");var mt={orgName:k.a.string,appId:k.a.string,workspacesByApp:k.a.array,workspacesByAppFullCount:k.a.number,workspacesByAppApiCursor:k.a.string,workspacesByAppApiTotal:k.a.number,workspacesByAppLoading:k.a.bool,workspacesByAppSortBy:k.a.string,workspacesByAppSortDir:k.a.string,searchQuery:k.a.string,selectCount:k.a.number,undoSearchSelectionState:k.a.object,columns:k.a.array.isRequired,actions:k.a.object.isRequired,featureWtaOrgLevelApps:k.a.bool,toggleAllWorkspacesByApp:k.a.func};var ht={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:void 0,workspacesByAppApiTotal:void 0,workspacesByAppLoading:void 0,workspacesByAppSortBy:void 0,workspacesByAppSortDir:void 0,selectCount:0,undoSearchSelectionState:void 0,searchQuery:"",featureWtaOrgLevelApps:false,toggleAllWorkspacesByApp:void 0};var vt=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.undoFilterAndSelection=a.undoFilterAndSelection.bind(a);return a}h()(t,[{key:"getWorkspacesByAppListProps",value:function e(){var t=this.props,a=t.columns,n=t.appId,r=t.workspacesByApp,i=t.workspacesByAppApiCursor,o=t.workspacesByAppApiTotal,s=t.workspacesByAppLoading,l=t.searchQuery,c=t.actions,u=t.selectCount;return{columns:a,appId:n,workspacesByApp:r,workspacesByAppApiCursor:i,workspacesByAppApiTotal:o,workspacesByAppLoading:s,searchQuery:l,actions:c,isSelectionBarShowing:u>0}}},{key:"undoFilterAndSelection",value:function e(){var t=this.props,a=t.actions,n=t.undoSearchSelectionState;n&&a.undoWorkspacesByAppSearchSelection(n)}},{key:"renderAppFilterInput",value:function e(){var t=this.props,a=t.searchQuery,n=t.workspacesByAppLoading,i=t.actions;var o=ft.t("Filter by name...");var s=!!(a&&n);return r.a.createElement(et["a"],{placeholder:o,icon:"search",autoFocus:false,isLoading:s,onChange:i.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,"data-qa":"ent-app-profile-installations-filter"})}},{key:"renderUndoFilterAndSelectionAlert",value:function e(t,a){if(null===a)return null;var n=void 0;if(t){var i=a.workspaces_by_app_search_query;n=i?ft.t('Restore previous selection for filter "{filter}".',{filter:i}):ft.t("Restore previous selection and clear filter.")}return r.a.createElement($e["d"],{className:"p-app_management_workspaces_by_app_alert",level:"warning"},r.a.createElement(tt["a"],{onClick:this.undoFilterAndSelection},n))}},{key:"renderSelectionBar",value:function e(t){var a=t.featureWtaOrgLevelApps,n=t.workspacesByApp,i=t.workspacesByAppFullCount,o=t.selectCount,s=t.toggleAllWorkspacesByApp;if(!a)return null;var l=[{id:"uninstall",label:ft.t("Uninstall"),disabled:0===o,isDanger:true}];return r.a.createElement(Ge,{position:"absolute",availableCount:i,selectedCount:o,items:n,actions:l,onToggleSelect:s,onToggleShowingSelection:j["noop"],onAction:j["noop"]})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var a=this.props,n=a.orgName,i=a.searchQuery,o=a.workspacesByAppApiTotal,s=a.workspacesByAppLoading,l=a.workspacesByAppApiCursor,c=a.undoSearchSelectionState,u=a.featureWtaOrgLevelApps;var d=this.getWorkspacesByAppListProps();var p=null===o||isNaN(o)?null:parseInt(o,10);var f=ft.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:p});if(0===o&&!i&&!s&&l)return r.a.createElement("div",null,r.a.createElement(ge["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:f,actions:t}),r.a.createElement("div",{className:"c-app_management_indent_half"},r.a.createElement(pt,{orgName:n})));return r.a.createElement("div",{className:"c-selection_bar_container c-selection_bar_container--position_relative"},r.a.createElement(ge["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:f,actions:t}),this.renderUndoFilterAndSelectionAlert(u,c),r.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspaces_by_app_list"},r.a.createElement(Xe,d)),this.renderSelectionBar(this.props))}}]);return t}(n["PureComponent"]);vt.displayName="AppManageWorkspaces";vt.defaultProps=ht;var gt=vt;var bt=a(324);var _t=new E["b"]("enterprise_dashboard");function yt(e){var t=e.toggleAllWorkspacesByApp,a=e.toggleWorkspacesByApp,n=e.onWorkspaceNameClick,r=e.workspacesByApp,i=e.selectionState,o=e.showOrgLevelAppsUI;var s=[wt({onWorkspaceNameClick:n}),Et()];var l=o?[Ot({selectionState:i,workspacesByApp:r,toggleAllWorkspacesByApp:t,toggleWorkspacesByApp:a})].concat(s):s.concat(Ct());return{columns:l,toggleAllWorkspacesByApp:t}}function kt(e,t){var a=t.actions,n=t.dispatch;var r=a.apps;var i=333;var o=Object(bt["bindActionCreators"])(r[e],n);var s=Object(j["debounce"])(function(e){var t=null!==e&&void 0!==e&&e.length?e:"";o.setWorkspacesByAppSearchQuery(t);o.resetWorkspacesByAppApiCursor()},i,{trailing:true});function l(e){var t=e.target.value;s(t)}return d()({},o,{onSearchInputChange:l})}function Ot(e){var t=e.selectionState,a=e.workspacesByApp,n=void 0===a?[]:a,i=e.toggleAllWorkspacesByApp,o=e.toggleWorkspacesByApp;var s=function e(){return i("NONE"===t||"SOME"===t)};var l=function e(t){return o(!!t.target.checked,t.target.value)};var c=n.map(function(e){return e.team_id}).join(" ");return{id:"checkbox",header:{value:r.a.createElement(we["a"],{checked:"ALL"===t,indeterminate:"SOME"===t,"aria-controls":c,onChange:s,className:"p-app_management_workspaces_by_app_checkbox"}),sortable:false,"data-qa":"ent-app-profile-installations-header-name",className:"p-app_management_workspaces_by_app_checkbox_col"},rowTemplate:{value:function e(t){return r.a.createElement(we["a"],{id:t.team_id,checked:!!t.isSelected,value:t.team_id,onChange:l,className:"p-app_management_workspaces_by_app_checkbox"})},className:"p-app_management_workspaces_by_app_checkbox_col"}}}function wt(e){var t=e.onWorkspaceNameClick;return{id:"team_name",header:{value:_t.t("Workspace"),sortable:true,"data-qa":"ent-app-profile-installations-header-name"},rowTemplate:{value:function e(a){var n=a&&a.icons&&a.icons.image_68;return r.a.createElement("button",{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(a.team_id)}},n&&r.a.createElement("img",{src:n,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:a.name}),r.a.createElement("span",{className:"bold"},a.team_name))}}}}function Et(){return{id:"installed_on",header:{value:_t.t("Installed On"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_on"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var n=new Date(1e3*a).toLocaleDateString();return r.a.createElement("div",null,n)}}}}function Ct(){return{id:"installed_by",header:{value:_t.t("Installed By"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_by"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by.count||1;var n=_t.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:a});return r.a.createElement("div",null,n)}}}}var jt={orgName:k.a.string,appId:k.a.string,workspacesByApp:k.a.array,workspacesByAppFullCount:k.a.number,workspacesByAppApiCursor:k.a.string,workspacesByAppApiTotal:k.a.number,workspacesByAppLoading:k.a.bool,workspacesByAppSortBy:k.a.string,workspacesByAppSortDir:k.a.string,searchQuery:k.a.string,selectionState:k.a.string,selectCount:k.a.number,actions:k.a.object.isRequired,dispatch:k.a.func.isRequired,featureWtaOrgLevelApps:k.a.bool,showOrgLevelAppsUI:k.a.bool,undoSearchSelectionState:k.a.object};var St={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,featureWtaOrgLevelApps:false,showOrgLevelAppsUI:false,undoSearchSelectionState:null};var It=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=e.actions,r=e.dispatch;a.actions=kt("installations",{actions:n,dispatch:r});a.generateAppsCSV=a.generateAppsCSV.bind(a);a.onWorkspaceNameClick=a.onWorkspaceNameClick.bind(a);a.toggleAllWorkspacesByApp=a.toggleAllWorkspacesByApp.bind(a);a.toggleWorkspacesByApp=a.toggleWorkspacesByApp.bind(a);return a}h()(t,[{key:"onWorkspaceNameClick",value:function e(t){var a=this.props,n=a.actions,r=a.dispatch;return r(n.router.navigateTo("/organization/teams/"+t))}},{key:"toggleAllWorkspacesByApp",value:function e(t){var a=this.props,n=a.workspacesByAppApiTotal,r=a.searchQuery;this.actions.toggleAllWorkspacesByApp({select:t,searchQuery:r,count:n})}},{key:"toggleWorkspacesByApp",value:function e(t,a){this.actions.toggleWorkspacesByApp({select:t,workspaces:[a]})}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.searchQuery,n=t.workspacesByAppSortBy,r=t.workspacesByAppSortDir,i=t.appId,o=t.actions,s=t.dispatch;var l={type:"teams_by_app",app_id:i};a&&(l.query=a);if(n){l.sort_prefix=n;r&&(l.sort_dir=r)}s(o.apps.generateAppsCSVForSlackbotDM(l))}},{key:"render",value:function e(){var t=this.props,a=t.actions,n=t.dispatch,i=t.showOrgLevelAppsUI,o=ve()(t,["actions","dispatch","showOrgLevelAppsUI"]);var s=yt({selectionState:o.selectionState,workspacesByApp:o.workspacesByApp,toggleAllWorkspacesByApp:this.toggleAllWorkspacesByApp,toggleWorkspacesByApp:this.toggleWorkspacesByApp,onWorkspaceNameClick:this.onWorkspaceNameClick,showOrgLevelAppsUI:i});return r.a.createElement(gt,d()({},s,o,{actions:this.actions}))}}]);return t}(n["PureComponent"]);It.displayName="AppProfileInstallations";It.defaultProps=St;var Tt=It;var Nt=a(500);var At=new E["b"]("enterprise_dashboard");var Rt=function e(){var t=cdn_url+"/7bba7/img/enterprise/empty_apps_state_restricted.png";var a=At.t("Permissions can\u2019t be shown for this app");var n=At.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=At.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return r.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},r.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),r.a.createElement("h3",{className:"black margin_bottom_75"},a),r.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},n),r.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},i))};Rt.displayName="AppProfilePermissionsEmptyState";var Mt=Rt;var xt=new E["b"]("enterprise_dashboard");var Pt={permissionsItems:k.a.array,isDirectoryPublished:k.a.bool,isXoxaApp:k.a.bool,appId:k.a.string};var Dt={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var Ft=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={permissions:[],channelScopePermissions:[]};a.formatPermissions=a.formatPermissions.bind(a);return a}h()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var a=0;function n(){a+=1;return"scope_"+a+"_row"}var r=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=n();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):r.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var o={permissions:r,channelScopePermissions:i};this.setState(o)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var a=this.state,n=a.channelScopePermissions,i=a.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return r.a.createElement(Mt,null);var o=void 0;o=t?xt.t("On workspaces, this app will be able to:"):xt.t("This app will be able to:");var s=xt.t("When added to a channel, this app will also be able to:");if(n.length)return r.a.createElement("div",{className:"p-app_profile_permission"},r.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},o),r.a.createElement(Nt["a"],{scopeInfo:i,key:"permissions"}),r.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},s),r.a.createElement(Nt["a"],{scopeInfo:n,key:"channelScopePermissions"}));return r.a.createElement("div",{className:"p-app_profile_permission"},r.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},o),r.a.createElement(Nt["a"],{scopeInfo:i}))}}]);return t}(n["PureComponent"]);Ft.displayName="AppProfilePermissions";Ft.defaultProps=Dt;var Lt=Ft;var Bt=a(1443);var Ut=a(76);var qt=a(103);var Gt=new E["b"]("enterprise_dashboard");var Ht={appName:k.a.string.isRequired,appIcon:k.a.string.isRequired,featureWtaOrgLevelApps:k.a.bool,onDisable:k.a.func,onEnable:k.a.func,orgName:k.a.string.isRequired};var Wt={onDisable:j["noop"],onEnable:j["noop"],featureWtaOrgLevelApps:false};var Vt=function e(t){var a=t.appIcon,n=t.appName,i=t.featureWtaOrgLevelApps,o=t.onEnable,s=t.onDisable,l=t.orgName;if(!i)return null;var c=Gt.t("Automatically install {appName} on new workspaces?",{appName:Object(E["m"])(n)});var u=Gt.t("{appName} will be automatically installed on newly created workspaces and workspaces that are migrated into {orgName}. You can change this policy later",{appName:Object(E["m"])(n),orgName:Object(E["m"])(l)});return r.a.createElement(qt["a"],{cancelText:Gt.t("No"),contentLabel:c,"data-qa":"app_automatic_install_dialog",goButtonText:Gt.t("Yes"),onCancel:s,onGo:o,showCancelButton:true,title:c,titleImage:a,truncateTitle:false},u)};Vt.displayName="AppAutomaticInstallDialog";Vt.defaultProps=Wt;var zt=Object(Ut["pure"])(Vt);var Qt=new E["b"]("enterprise_dashboard");var Kt={appIcon:k.a.string.isRequired,appName:k.a.string.isRequired,automaticInstallEnabled:k.a.bool,featureWtaOrgLevelApps:k.a.bool,orgName:k.a.string.isRequired,openModal:k.a.func};var Yt={automaticInstallEnabled:false,featureWtaOrgLevelApps:false,openModal:j["noop"]};var Jt=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.showAutomaticInstallDialog=a.showAutomaticInstallDialog.bind(a);return a}h()(t,[{key:"showAutomaticInstallDialog",value:function e(){var t=this.props,a=t.appIcon,n=t.appName,i=t.featureWtaOrgLevelApps,o=t.orgName;var s={appIcon:a,appName:n,featureWtaOrgLevelApps:i,orgName:o};this.props.openModal({element:r.a.createElement(zt,s)})}},{key:"render",value:function e(){var t=this.props,a=t.appName,n=t.automaticInstallEnabled,i=t.featureWtaOrgLevelApps,o=t.orgName;if(!i)return null;var s={className:"no_border",control:{editOnly:true,onEdit:this.showAutomaticInstallDialog,type:"button"},description:Qt.t("Set whether {appName} will be automatically installed on newly created workspaces and any workspaces migrated into {orgName}.",{appName:Object(E["m"])(a),orgName:Object(E["m"])(o)}),label:Qt.t("Automatic Installation"),onClick:this.showAutomaticInstallDialog,state:n?Qt.t("Enabled"):Qt.t("Disabled")};return r.a.createElement("div",{className:"c-app_management_indent_half border_top"},r.a.createElement(Bt["a"],s))}}]);return t}(n["PureComponent"]);Jt.displayName="AppProfilePolicies";Jt.defaultProps=Yt;var Zt=Jt;var Xt={openModal:U["openModal"]};var $t=Object(s["connect"])(null,Xt)(Jt);var ea=new E["b"]("enterprise_dashboard");var ta=k.a.shape({workspacesByApp:k.a.array,workspacesByAppFullCount:k.a.number,workspacesByAppApiCursor:k.a.string,workspacesByAppApiTotal:k.a.number,workspacesByAppLoading:k.a.bool,workspacesByAppSortBy:k.a.string,workspacesByAppSortDir:k.a.string,searchQuery:k.a.string,selectionState:k.a.string,selectCount:k.a.number,undoSearchSelectionState:k.a.object});var aa={appName:k.a.string.isRequired,appId:k.a.string,appImageSrc:k.a.string.isRequired,appImageSrcLarge:k.a.string,appByline:k.a.string,appScope:k.a.oneOfType([k.a.object,k.a.string,k.a.array]),automaticInstallEnabled:k.a.bool,userIsCreationTeamMember:k.a.bool,headerActions:k.a.array,isOpen:k.a.bool,isDirectoryPublished:k.a.bool,isInstalledEverywhere:k.a.bool,isSlackIntegration:k.a.bool,orgName:k.a.string,installations:ta,appsDetailViewSelectedTab:k.a.string,appsDetailViewWorkspaceContext:k.a.string,appsDetailViewWorkspaceDomain:k.a.string,currentUserTeams:k.a.array,rootURL:k.a.string.isRequired,isXoxaApp:k.a.bool,isDistributedApp:k.a.bool,orgTeams:k.a.array,actions:k.a.object.isRequired,dispatch:k.a.func.isRequired,featureWtaOrgLevelApps:k.a.bool};var na={appId:"",appByline:"",appImageSrcLarge:void 0,appScope:[],automaticInstallEnabled:false,userIsCreationTeamMember:false,headerActions:[],isOpen:true,isDirectoryPublished:false,isInstalledEverywhere:false,isSlackIntegration:false,orgName:"",installations:{workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,undoSearchSelectionState:null},appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null,featureWtaOrgLevelApps:false};var ra=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.navigateToProfileTab=a.navigateToProfileTab.bind(a);a.navigateToAppDirectory=a.navigateToAppDirectory.bind(a);return a}h()(t,[{key:"navigateToProfileTab",value:function e(t){var a=this.props,n=a.actions,r=a.dispatch;return r(n.router.navigateTo("/organization/apps/profile/"+this.props.appId+"/"+t))}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,a=t.appsDetailViewWorkspaceContext,n=t.appsDetailViewWorkspaceDomain,r=t.userIsCreationTeamMember,i=t.currentUserTeams,o=t.rootURL,s=t.orgTeams;var l=void 0;if(a&&i&&Object(j["includes"])(i,a)){var c="https://"+(n||"my")+"."+o.replace(/(http:\/\/|https:\/\/)/,"");l=c+"apps/"+this.props.appId+"?from_org_dashboard=1"}else if(r)l=o+"apps/"+this.props.appId+"?from_org_dashboard=1";else if(i&&i.length){var u=Object(j["find"])(s,function(e){return e.id===i[0]});l="https://"+u.domain+"."+o.replace(/(http:\/\/|https:\/\/)/,"")+"apps/"+this.props.appId+"?from_org_dashboard=1"}else l=o+"apps/"+this.props.appId+"?from_org_dashboard=1";window.open(l,"_blank")}},{key:"renderInstallationsContent",value:function e(){var t=this.props,a=t.installations,n=t.orgName,i=t.appId,o=t.isXoxaApp,s=t.actions,l=t.dispatch,c=t.featureWtaOrgLevelApps;return r.a.createElement(Tt,d()({},a,{orgName:n,appId:i,actions:s,dispatch:l,featureWtaOrgLevelApps:c,showOrgLevelAppsUI:o&&c}))}},{key:"renderPermissionsContent",value:function e(){return r.a.createElement(Lt,{permissionsItems:this.props.appScope,isDirectoryPublished:this.props.isDirectoryPublished,isXoxaApp:this.props.isXoxaApp,appId:this.props.appId})}},{key:"renderPoliciesContent",value:function e(){var t=this.props,a=t.appImageSrc,n=t.appName,i=t.automaticInstallEnabled,o=t.featureWtaOrgLevelApps,s=t.orgName;return r.a.createElement($t,{appIcon:a,appName:n,automaticInstallEnabled:i,featureWtaOrgLevelApps:o,orgName:s})}},{key:"renderHeaderActions",value:function e(){var t=this.props,a=t.appImageSrcLarge,n=t.appName,i=t.appScope,o=t.featureWtaOrgLevelApps,s=t.headerActions,l=t.isInstalledEverywhere,c=t.isXoxaApp;return o&&c?s.concat(r.a.createElement(me,{appName:n,appIcon:a,featureWtaOrgLevelApps:o,isInstalledEverywhere:l,scopes:i})):s}},{key:"render",value:function e(){var t=this.props,a=t.actions,n=t.appByline,i=t.appImageSrc,o=t.appName,s=t.currentUserTeams,l=t.dispatch,c=t.featureWtaOrgLevelApps,u=t.isDistributedApp,d=t.isOpen,p=t.isSlackIntegration,f=t.isXoxaApp,m=t.userIsCreationTeamMember;var h=u&&s&&s.length||m;var v=[{title:ea.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];p||v.push({title:ea.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});c&&f&&v.push({title:ea.t("Policies"),id:"policies",content:this.renderPoliciesContent(),onClick:this.navigateToProfileTab});h&&v.push({title:ea.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var g={actions:a,appByline:n,appImageSrc:i,appName:o,dispatch:l,headerActions:this.renderHeaderActions(),isOpen:d};return r.a.createElement("div",{className:"p-app_profile","data-qa":"ent-app-profile"},r.a.createElement(F,g),r.a.createElement(C["a"],{tabs:v,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(n["PureComponent"]);ra.displayName="BaseAppProfile";ra.defaultProps=na;var ia=Object(S["a"])("feature_wta_org_level_apps")(ra);var oa=new E["b"]("enterprise_dashboard");var sa=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=oa.t("Apps");return r.a.createElement("div",{className:"c-app_management_indent"},r.a.createElement("h1",null,t))}}]);return t}(n["Component"]);sa.displayName="AppManagementHeader";var la=sa;var ca=a(140);var ua=a(1155);var da=a(344);var pa=a(2067);var fa={isOpen:k.a.bool.isRequired,title:k.a.string.isRequired,subtext:k.a.string.isRequired,contextButtonLabel:k.a.string.isRequired,onDownloadClick:k.a.func,contextCaption:k.a.string,onContextBlur:k.a.func};var ma={onDownloadClick:j["noop"],contextCaption:"",onContextBlur:j["noop"]};var ha=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleOnContextUnfocus=a.handleOnContextUnfocus.bind(a);return a}h()(t,[{key:"componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.isOpen,i=a.title,o=a.subtext,s=a.contextButtonLabel,l=a.onDownloadClick,c=a.contextCaption;var u=w()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!n});return r.a.createElement("div",{className:u,ref:function e(a){t.node=a}},r.a.createElement("div",{className:"p-export_csv_context_subtext"},r.a.createElement("h4",{className:"black"},i),r.a.createElement("p",{className:"break_word"},o),r.a.createElement(q["d"],{onClick:l,className:"p-export_csv_context_button"},s)),c&&r.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(n["PureComponent"]);ha.displayName="ExportContext";ha.defaultProps=ma;var va=ha;var ga=new E["b"]("enterprise_dashboard");var ba={title:k.a.string.isRequired,subtext:k.a.string.isRequired,contextButtonLabel:k.a.string.isRequired,onDownloadClick:k.a.func,contextCaption:k.a.string,buttonSize:k.a.string};var _a={onDownloadClick:j["noop"],contextCaption:"",buttonSize:"medium"};var ya=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onButtonClick=a.onButtonClick.bind(a);a.onDownloadButtonClick=a.onDownloadButtonClick.bind(a);a.onContextBlur=a.onContextBlur.bind(a);a.state={contextIsOpen:false};return a}h()(t,[{key:"onButtonClick",value:function e(){var t=this;this.setState(function(){return{contextIsOpen:!t.state.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,a){a.contains(t.target)||this.state.contextIsOpen&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,a=t.title,n=t.subtext,i=t.contextButtonLabel,o=t.contextCaption,s=t.buttonSize;var l=ga.t("Export CSV");return r.a.createElement("div",null,r.a.createElement(q["d"],{type:"outline",onClick:this.onButtonClick,size:s,className:"p-export_csv_button"},l,r.a.createElement(I["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),r.a.createElement(va,{isOpen:this.state.contextIsOpen,title:a,subtext:n,contextButtonLabel:i,onDownloadClick:this.onDownloadButtonClick,contextCaption:o,onContextBlur:this.onContextBlur}))}}]);return t}(n["PureComponent"]);ya.displayName="ExportCSVButton";ya.defaultProps=_a;var ka=ya;var Oa=ka;var wa=new E["b"]("enterprise_dashboard");var Ea={title:k.a.string.isRequired,onDownloadClick:k.a.func,buttonSize:k.a.string};var Ca={onDownloadClick:j["noop"],buttonSize:"small"};var ja=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var a=wa.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var n=wa.t("Includes everything");var i=wa.t("Generate CSV");return r.a.createElement(Oa,{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:n,contextButtonLabel:i,contextCaption:a,buttonSize:t})}}]);return t}(n["PureComponent"]);ja.displayName="AppManagementCSVPopup";ja.defaultProps=Ca;var Sa=ja;var Ia=Sa;var Ta=new E["b"]("enterprise_dashboard");var Na={orgName:k.a.string};var Aa={orgName:""};var Ra=function(e){_()(t,e);function t(){f()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=Object(E["m"])(this.props.orgName);var n=Ta.t("{orgName} has no apps installed.",{orgName:a});return r.a.createElement("div",{className:"p-app_management_empty_state_container"},r.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),r.a.createElement("h3",{className:"black margin_bottom_75"},n))}}]);return t}(n["PureComponent"]);Ra.displayName="InstalledAppsEmptyState";Ra.defaultProps=Aa;var Ma=Ra;var xa=a(41);var Pa=a(17);var Da=new E["b"]("enterprise_dashboard");var Fa={orgApps:k.a.array,orgAppsApiCursor:k.a.string,orgAppsLoading:k.a.bool,orgAppsApiTotal:k.a.number,headerItemOnClick:k.a.func,pageSize:k.a.number,sortBy:k.a.string,sortDir:k.a.string,searchQuery:k.a.string,rowHeaderItemClassName:k.a.string,rowClassName:k.a.string,featureEntAppManagementRestriction:k.a.bool,featureWtaOrgLevelApps:k.a.bool};var La={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,headerItemOnClick:j["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureEntAppManagementRestriction:false,featureWtaOrgLevelApps:false};var Ba="asc";var Ua="desc";var qa="caret_down";var Ga="caret_up";var Ha={};Ha[Ba]=qa;Ha[Ua]=Ga;var Wa=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=a.props,i=n.sortBy,o=n.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:o,offset:0,height:null,activeMenuForAppId:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onToggleMenuClick=a.onToggleMenuClick.bind(a);a.maybeHideMenu=a.maybeHideMenu.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);a.nodeHasClass=a.nodeHasClass.bind(a);a.nodeIsChildOfClassName=a.nodeIsChildOfClassName.bind(a);a.appSources={internal:Da.t("Internal"),"app directory":Da.t("App Directory"),unknown:Da.t("Unknown")};a.sourceTooltipStrings={"app directory":Da.t("This app has been installed from the Slack App Directory."),internal:Da.t("This app was created by someone within your organization."),unknown:Da.t("This app was installed from an unknown external source.")};a.rowTemplate={items:[{value:function e(t){var n=t&&t.icons&&t.icons.image_72;return r.a.createElement("button",{className:"p-app_management_table_view_app_name","data-qa":"ent-apps-installed-row-name",onClick:function e(){return a.onAppNameClick(t.id)}},n&&r.a.createElement("img",{src:n,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var a=t.teams_installed_on&&t.teams_installed_on.count||0;return Da.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:a})}},{value:function e(t){var n=a.sourceTooltipStrings[t.source];var i=a.appSources[t.source]||a.appSources.unknown;return r.a.createElement("div",null,r.a.createElement(xa["d"],{tip:n,position:"top"},r.a.createElement("span",null,i)))},className:"c-table_view_row_item_source"}]};a.props.featureWtaOrgLevelApps&&a.rowTemplate.items.push({value:function e(t){return t.automatic_install_enabled?Da.t("Yes"):Da.t("No")}});a.props.featureEntAppManagementRestriction&&a.rowTemplate.items.push({value:function e(t){var n=a.state.activeMenuForAppId;var i={width:"15rem",kbNavActive:true,stripTerminalSeparators:true};var o=void 0;if(n&&n===t.id){var s=r.a.createElement("span",null,"Restrict this app...");var l=r.a.createElement("span",null,"View in App Directory ",r.a.createElement(I["b"],{type:"external-link",size:"inherit"}));o=r.a.createElement("div",{className:"c-app_management_menu_container"},r.a.createElement(G["f"],i,r.a.createElement(G["b"],{key:"org_app_menu_1",label:s,onSelected:function e(){a.onRestrictAppClick(t.id)}}),r.a.createElement(G["d"],{key:"org_app_menu_separator"}),r.a.createElement(G["b"],{key:"org_app_menu_2",label:l,href:"https://example.com",target:"_blank"})))}return r.a.createElement("div",null,r.a.createElement("button",{className:"c-app_management_menu_trigger",onClick:a.onToggleMenuClick,"data-app-id":t.id},"..."),o)},className:"p-app_management_table_menu"});a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var n=Da.rt("No apps were found matching <b>{query}</b>",{query:a});return r.a.createElement("div",{className:"align_center"},n)}}]};a.headerData=[{id:"name",value:Da.t("Name"),sortable:true,className:"p-app_management_table_header_name"},{id:"num_installed",value:Da.t("Installed On"),sortable:true,className:"p-app_management_table_header_installed_on"},{id:"source",value:Da.t("Source"),sortable:true,className:"p-app_management_table_header_source"}];a.props.featureWtaOrgLevelApps&&a.headerData.push({id:"automatic_install_enabled",value:Da.t("Automatic Install"),sortable:true});a.props.featureEntAppManagementRestriction&&a.headerData.push({id:"menu",value:"",noHover:true,className:"p-app_management_table_header_menu"});return a}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.orgApps,n=t.sortBy;var r=this.state.offset;if(a.length){this.updateRowListItemsData(r);Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsLoading(false))}else Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsLoading(true));Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsSortBy(n))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely);this.props.featureEntAppManagementRestriction&&window.addEventListener("click",this.maybeHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeUpdateListRowItems(t,a);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely);window.removeEventListener("click",this.maybeHideMenu)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,n=a.orgApps,r=a.orgAppsApiTotal;if(r&&n.length>=r)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onRestrictAppClick",value:function e(t){Object(Pa["b"])().warn("onRestrictAppClick",t);this.hideMenu()}},{key:"onAppNameClick",value:function e(t){return Object(ca["b"])(Object(ca["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onToggleMenuClick",value:function e(t){var a=t.target.getAttribute("data-app-id");var n=this.state.activeMenuForAppId;var r=a===n?null:a;var i={activeMenuForAppId:r};this.setState(i)}},{key:"maybeHideMenu",value:function e(t){if(!t)return false;var a=this.state.activeMenuForAppId;if(!a)return false;var n=t&&t.target;if(!n)return false;var r=this.nodeIsChildOfClassName(n,"c-app_management_menu_trigger")||this.nodeIsChildOfClassName(n,"c-menu");if(r)return false;this.hideMenu();return true}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"nodeHasClass",value:function e(t,a){if(!t||void 0===a||!a.length)return false;if(t&&t.classList&&t.classList.contains)return t.classList.contains(a);return!!(t.className&&t.className.length&&t.className.split(" ").includes(a))}},{key:"nodeIsChildOfClassName",value:function e(t,a){var n=t;if(!n||!a)return false;if(this.nodeHasClass(n,a))return true;if(!n.parentNode)return false;while(!this.nodeHasClass(n,a)&&n.parentNode)n=n.parentNode;return this.nodeHasClass(n,a)}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.orgAppsLoading;a&&!t.orgAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsSearchQuery(t.searchQuery));this.resetOrgAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t,a){var n=this.state,r=n.offset,i=n.activeMenuForAppId;var o=this.props,s=o.searchQuery,l=o.orgApps,c=o.orgAppsLoading;t.orgApps===l&&t.searchQuery===s&&t.orgAppsLoading===c&&a.activeMenuForAppId===i||this.updateRowListItemsData(r)}},{key:"headerItemOnClick",value:function e(t){var a=this;var n=this.state,r=n.sortBy,i=n.sortDir;var e=this.props.headerItemOnClick;var o=r;var s=i;if(t.id===r){s=i&&i!==Ba?Ba:Ua;Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsSortDir(s))}else{o=t.id;s=t.defaultSortType?t.defaultSortType===Ba?Ua:Ba:Ua;Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsSortDir(s));Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsSortBy(o))}var l={sortBy:o,sortDir:s};this.setState(function(){return l},function(){a.resetOrgAppsState();e&&e(t)})}},{key:"resetOrgAppsState",value:function e(){Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsApiTotal(null));Object(ca["b"])(Object(ca["a"])().apps.resetOrgAppsApiCursor());Object(ca["b"])(Object(ca["a"])().apps.resetOrgApps());Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsLoading(true))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var n=a.getBoundingClientRect();var r=0;var i=t-(n&&n.top);var o=64;var s=Math.max(o,i-r);var l={height:s+"px"};this.setState(l)}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var n=[];t.forEach(function(e){n.push(a.makeHeader(e))});return n}},{key:"determineSortState",value:function e(t,a){var n=this.state,r=n.sortBy,i=n.sortDir;var o=a.defaultSortType||Ba;var s=Ha[o];if(!r||r!==t)return s;var l=void 0;l=i?i===Ba?qa:Ga:Ha[o];return l}},{key:"resetAPICursorMark",value:function e(){Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,n=t.sortDir;var r=this.props,i=r.pageSize,o=r.searchQuery,s=r.orgAppsApiCursor;var l={limit:i};a&&(l.sort=a);n&&(l.sort_dir=n);null!==o&&void 0!==o&&Object(j["trim"])(o).length&&(l.query=o);s&&(l.cursor=s);Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsLoading(true));Object(ca["b"])(Object(ca["a"])().apps.getOrgApps(l))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var n=[];var r=t||0;var i=0;var o=this.props,s=o.orgApps,l=o.orgAppsLoading;var c={rowListItems:n};function u(){i+=1;return"row_"+r+"_item"+i}function d(e,t){var a={id:"row_"+r,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var n={value:t.value(e),id:u()};t.className&&(n.className=t.className);a.items.push(n)});r+=1;return a}if(s&&s.length)s.forEach(function(e){n.push(d(e,a.rowTemplate))});else if(!l){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var f=[{searchQuery:p}];f.forEach(function(e){n.push(d(e,a.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var a=this.state,n=a.sortBy,i=a.sortDir,o=a.height,s=a.rowListItems,l=a.offset;var c=this.props,u=c.orgAppsLoading,d=c.searchQuery,p=c.rowHeaderItemClassName,f=c.rowClassName;var m=this.makeHeaders(this.headerData);return r.a.createElement("div",null,r.a.createElement(be["a"],{rows:s,headers:m,rowHeaderItemClassName:p,rowClassName:f,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:n,sortDir:i,searchQuery:d,height:o,isLoading:u,newQuery:!l,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(n["PureComponent"]);Wa.displayName="OrgAppsList";Wa.defaultProps=La;var Va=Object(S["a"])("feature_wta_org_level_apps")(Wa);var za=a(1754);var Qa=new E["b"]("enterprise_dashboard");var Ka=333;var Ya={orgName:k.a.string.isRequired,orgApps:k.a.array,orgAppsApiCursor:k.a.string,orgAppsApiTotal:k.a.number,orgAppsLoading:k.a.bool,orgAppsSortDir:k.a.string,orgAppsSortBy:k.a.string,searchQuery:k.a.string,featureEntAppManagementRestriction:k.a.bool};var Ja={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false};var Za=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSearchInputChange=a.onSearchInputChange.bind(a);a.onSearchInputChangeDelayed=Object(j["debounce"])(a.onSearchInputChangeDelayed,Ka,{trailing:true}).bind(a);a.generateAppsCSV=a.generateAppsCSV.bind(a);return a}h()(t,[{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.onSearchInputChangeDelayed(a)}},{key:"onSearchInputChangeDelayed",value:function e(t){var a=null!==t&&void 0!==t&&t.length?t:null;Object(ca["b"])(Object(ca["a"])().apps.setOrgAppsSearchQuery(a));Object(ca["b"])(Object(ca["a"])().apps.resetOrgAppsApiCursor())}},{key:"getOrgAppsListProps",value:function e(){var t={orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"formatTitleString",value:function e(t){if(null!==t&&!isNaN(t)&&t>0)return Qa.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return Qa.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.orgAppsSortDir,n=t.orgAppsSortBy,r=t.searchQuery;var i={type:"apps"};r&&(i.query=r);if(n){i.sort_prefix=n;a&&(i.sort_dir=a)}Object(ca["b"])(Object(ca["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var a=Qa.t("Installed Apps");if(!t)return null;return r.a.createElement(Ia,{title:a,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderAppFilterInput",value:function e(){var t=Qa.t("Filter by name...");return r.a.createElement("div",null,r.a.createElement(da["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,size:"small"}))}},{key:"render",value:function e(){var t=this.props,a=t.orgAppsApiTotal,n=t.orgAppsLoading,i=t.searchQuery,o=t.orgAppsApiCursor;var s=[this.renderExportButton(),this.renderAppFilterInput()];var l=this.getOrgAppsListProps();if(0===a&&!i&&!n&&o)return r.a.createElement("div",{className:"p-app_management_installed_apps"},r.a.createElement(ua["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(a),actions:s}),r.a.createElement(Ma,{orgName:this.props.orgName}));return r.a.createElement("div",{className:"p-app_management_installed_apps"},r.a.createElement(ua["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(a),actions:s}),r.a.createElement("div",{className:"c-app_management_indent_half"},r.a.createElement(Va,l)))}}]);return t}(n["PureComponent"]);Za.displayName="AppManagementInstalledApps";Za.defaultProps=Ja;var Xa=Za;var $a=Xa;var en=a(1158);var tn={};var an=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={};return a}h()(t,[{key:"render",value:function e(){var t="This data set is large, so your CSV will take some time to generate. We'll send it to you in Slack as soon as it's ready.";return r.a.createElement(Oa,{title:"Restricted Apps",subtext:"Includes everything",contextButtonLabel:"Generate CSV",contextCaption:t,buttonSize:"small"})}}]);return t}(n["PureComponent"]);an.displayName="RestrictedAppsExportCSV";var nn=an;var rn="desc";var on=[{id:"name",value:"Name",sortable:true},{id:"restricted_on",value:"Restricted On",sortable:true,defaultSortType:rn},{id:"restricted_by",value:"Restricted By"},{id:"exceptions",value:"Exceptions"},{id:"existing",value:"Existing Installations"}];function sn(e){var t=new Date(e||parseInt(Math.random()*(new Date).getTime(),10));return t.toDateString()}var ln={items:[{value:function e(t){var a=void 0;t.profile?a=t.profile.image_48:t.icon&&(a=t.icon.image_34);if(a)return r.a.createElement("span",null,r.a.createElement("img",{src:a,style:{width:"24px",height:"24px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),r.a.createElement("b",null,t.name));return r.a.createElement("b",null,t.name)}},{value:function e(t){return sn(1e3*t.updated)}},{value:function e(t){return t.name}},{value:function e(){var t=parseInt(10*Math.random(),10);var a=void 0;a=0===t?"None":t+" "+(1===t?"exception":"exceptions");return a}},{value:function e(){var t=parseInt(1024*Math.random(),10);var a=1===t?"workspace":"workspaces";return t+" "+a}}]};var cn=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onIconClick=a.onIconClick.bind(a);a.onCoachmarkSkip=a.onCoachmarkSkip.bind(a);a.onCoachmarkContinue=a.onCoachmarkContinue.bind(a);a.onSearchInputChange=a.onSearchInputChange.bind(a);a.state={showCoachmark:true,isSearching:false};return a}h()(t,[{key:"onIconClick",value:function e(){this.setState(function(){return{showCoachmark:true}})}},{key:"onCoachmarkSkip",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onCoachmarkContinue",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onSearchInputChange",value:function e(t){var a={searchQuery:t.target.value};this.setState(function(){return a})}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,a=t.sortBy,n=t.sortDir,r=t.searchQuery;var i={headerData:on,rowTemplate:ln,sortBy:a,sortDir:n,searchQuery:r};return i}},{key:"renderExportButton",value:function e(){return r.a.createElement(nn,null)}},{key:"renderRestrictionButton",value:function e(){return r.a.createElement(q["d"],{size:"small",type:"outline"},"Export")}},{key:"renderAppFilterInput",value:function e(){return r.a.createElement(da["a"],{placeholder:"Filter by name...",icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",size:"small"})}},{key:"renderRestrictedTitle",value:function e(){var t=w()("p-app_management_restricted_apps__info_icon","margin_left_50",{"p-app_management_restricted_apps__info_icon--active":this.state.showCoachmark});return r.a.createElement("div",{className:"display_flex align_items_center"},r.a.createElement("span",null,"Restricted Apps"),r.a.createElement(en["a"],{hasCloseButton:true,content:"By restricting an app for the organization, members will no longer be allowed to install them on any workspace. Existing installations will not be automatically removed. To learn more about restricted apps, visit out help center.",shouldShow:this.state.showCoachmark,position:"right",onSkip:this.onCoachmarkSkip,hasSkipLink:false,onContinue:this.onCoachmarkContinue},r.a.createElement(I["a"],{type:"question_circle",onClick:this.onIconClick,className:t})))}},{key:"render",value:function e(){var t=[this.renderExportButton(),this.renderRestrictionButton(),this.renderAppFilterInput()];var a=this.getOrgAppsListProps();return r.a.createElement("div",{className:"p-app_management_restricted_apps"},r.a.createElement(ua["a"],{title:this.renderRestrictedTitle(),actions:t}),r.a.createElement("div",{className:"c-app_management_indent_half"},r.a.createElement(Va,a)))}}]);return t}(n["PureComponent"]);cn.displayName="AppManagementRestrictedApps";var un=cn;var dn=un;var pn=new E["b"]("enterprise_dashboard");var fn={orgName:k.a.string.isRequired,actions:k.a.object.isRequired,defaultTabId:k.a.string,profileIsOpen:k.a.bool,orgApps:k.a.array,orgAppsApiCursor:k.a.string,orgAppsApiTotal:k.a.number,orgAppsSortDir:k.a.string,orgAppsSortBy:k.a.string,orgAppsLoading:k.a.bool,searchQuery:k.a.string,featureEntAppManagementRestriction:k.a.bool,appProfile:k.a.object};var mn={defaultTabId:"",profileIsOpen:false,orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false,appProfile:null};var hn=function(e){_()(t,e);function t(e){f()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.tabActionOnClick=function(t){return e.actions.router.navigateTo("/organization/apps/"+t)};return a}h()(t,[{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"renderInstalledAppsContent",value:function e(){var t=this.getAppProps();return r.a.createElement("div",null,r.a.createElement($a,t))}},{key:"renderRestrictedAppsContent",value:function e(){return r.a.createElement(dn,null)}},{key:"render",value:function e(){var t=this.tabActionOnClick;var a=this.props,n=a.defaultTabId,i=a.appProfile,o=a.actions;var s=[{title:pn.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:t}];this.props.featureEntAppManagementRestriction&&s.push({title:pn.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:t});var l=w()("p-app-panel",{open:this.props.profileIsOpen});return r.a.createElement("div",{className:"p-app_management padding_top_200"},r.a.createElement(la,null),r.a.createElement(C["a"],{tabs:s,defaultTabId:n}),r.a.createElement("div",{className:l},i?r.a.createElement(ia,d()({},i,{actions:o})):null))}}]);return t}(n["PureComponent"]);hn.displayName="AppManagement";hn.defaultProps=mn;var vn=hn;var gn=vn;Object(c["a"])("interop.appManagement",{render:function e(t,a,n){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(l["d"])(t);o.a.render(r.a.createElement(s["Provider"],{store:i},r.a.createElement(gn,n)),a)},stop:function e(t){o.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(37);var i=a(180);var o=a(3306);var s=a(455);var l=a(2247);var c=a(1);var u=a.n(c);var d=a(104);var p=a.n(d);var f=a(14);var m=a(2);var h=a(139);var v=a(33);var g=a(3481);var b=function e(){return document.getElementById("search_popover_container")};var _=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(h["a"])(u.a.createElement(f["Provider"],{store:Object(v["d"])(t)},u.a.createElement(g["a"],{onClickRefreshSearch:m["noop"]})),a)};var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();p.a.unmountComponentAtNode(t)};var k={mountPrimarySearch:_};var O=a(3267);var w=a(3475);var E=function e(t){return function(){return TS.redux.dispatch(t.apply(void 0,arguments))}};Object(n["a"])("interop.searchUi",{getVisible:function e(){return Object(r["getVisible"])(TS.redux.getState())}});Object(n["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(i["getSearchInputBoxDisplayQuery"])(TS.redux.getState())},getInFilterTextyString:function e(t){return Object(o["a"])(TS.redux.getState(),t)}});Object(n["a"])("interop.searchActions",{close:E(s["a"]),setFocusedViaTabKey:E(r["setFocusedViaTabKey"]),openFromCmdF:E(l["b"]),openFromCmdG:E(l["c"]),openFromQuickSwitcherCmd:E(l["f"]),openFromClick:E(l["a"]),openFromSlashCommand:E(l["g"]),openFromKeyDown:E(l["e"]),openFromFilesMenu:E(l["d"])});Object(n["a"])("interop.mountPrimarySearch",_);Object(n["a"])("interop.unmountPrimarySearch",y);Object(n["a"])("interop.usePrimarySearch",function(){return Object(O["a"])(TS.redux.getState())});Object(n["a"])("interop.isExperimentAnyOmniSwitcher",function(){return Object(w["a"])(TS.redux.getState())});Object(n["a"])("interop.isExperimentOmniSwitcher",function(){return Object(w["b"])(TS.redux.getState())});Object(n["a"])("interop.isExperimentSearchSwitcher",function(){return Object(w["c"])(TS.redux.getState())})},,,function(e,t,a){"use strict";var n=a(3);var r=a.n(n);var i=a(5);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(2);var u=a(368);var d=a(33);var p=a(499);var f=a(1);var m=a.n(f);var h=a(31);var v=a(77);var g=a(0);var b=a.n(g);var _=a(14);var y=a(10);var k=a(11);var O=a(103);var w=new y["b"]("file-upload");var E={onGo:b.a.func,onCancel:b.a.func,featureModernFileUpload:b.a.bool};var C={onGo:c["noop"],onCancel:c["noop"],featureModernFileUpload:false};var j=function e(t){var a=t.onGo,n=t.onCancel,r=t.featureModernFileUpload;if(!r)return null;return m.a.createElement(O["a"],{className:"p-file_upload_error_dialog",title:w.t("Upload failed"),goButtonText:w.t("Yes, try again"),cancelText:w.t("No, cancel"),onGo:a,onCancel:n},w.t("Hmm, it looks like your file failed to upload. Want to try again?"))};j.displayName="FileUploadErrorDialog";j.defaultProps=C;function S(e){return{featureModernFileUpload:Object(k["isFeatureEnabled"])(e,"feature_modern_file_upload")}}var I=Object(_["connect"])(S)(j);var T=Object(h["b"])("Opens the File Upload Error Dialog",function(e,t,a){e(Object(v["openModal"])({element:m.a.createElement(I,a)}))});T.propTypes=null;var N=T;var A=a(311);var R=a(17);var M=a(310);var x=a(3055);a.d(t,"a",function(){return H});var P={};var D=x["a"].TIMEOUT,F=x["a"].ABORTED,L=x["a"].UNKNOWN;var B="UPLOAD-QUEUE";var U="File upload failed!";var q=function(){function e(t){o()(this,e);if(!t)throw new Error("UploadQueue requires a teamId");this._teamId=t;this._store=Object(d["d"])(t);this._queue=[];this._activeJob=null;this._logger=Object(R["a"])({teamId:t});this._log=this._log.bind(this);this._throttledLog=Object(c["throttle"])(this._log,5e3,{leading:false});Object(u["a"])(this)}l()(e,[{key:"uploadFile",value:function e(t){var a=t.file,n=t.shareData;var r={file:a,shareData:n,cancelable:true};this._queue.push(r);this._go()}},{key:"uploadExternal",value:function e(t){var a=t.file,n=t.shareData;var r={file:a,shareData:n,cancelable:false};this._queue.push(r);throw new Error("not implemented")}},{key:"cancelCurrentUpload",value:function e(){if(this._activeJob&&this._activeJob.xhr){this._activeJob.xhr.abort();this._log("Upload was cancelled by the user");this._store.dispatch(Object(p["uploadCanceled"])());this._activeJob=null;this._go()}}},{key:"_setupJob",value:function e(){this._activeJob.numRetries=this._activeJob.numRetries||0;this._activeJob.fileId=void 0;this._activeJob.promise=void 0;this._activeJob.xhr=new XMLHttpRequest;this._activeJob.xhr.addEventListener("timeout",this._onTimeout.bind(this));this._activeJob.xhr.addEventListener("abort",this._onAbort.bind(this));this._activeJob.xhr.addEventListener("error",this._onError.bind(this));this._activeJob.xhr.addEventListener("load",this._onLoad.bind(this));this._activeJob.xhr.upload&&this._activeJob.xhr.upload.addEventListener("progress",this._onUploadProgress.bind(this))}},{key:"_go",value:function e(){if(this._activeJob){this._log("Job in progress, queuing");return}if(!this._queue.length){this._log("Upload queue empty");this._store.dispatch(Object(p["uploadQueueEmptied"])());return}this._log("Starting an upload");this._activeJob=this._queue.shift();this._actuallyUpload(this._activeJob)}},{key:"_actuallyUpload",value:function e(t){var a=this;var n=t.file,r=t.shareData;this._setupJob();this._store.dispatch(Object(p["uploadStarting"])({fileName:r.title||n.name,isRetry:!!r.num_retry,cancelable:this._activeJob.cancelable}));this._store.dispatch(Object(A["f"])({fileName:n.name,fileSize:n.size})).then(function(e){var t=e.file,r=e.upload_url;a._log("Got upload URL and ID "+t);a._activeJob.fileId=t;a._activeJob.xhr.promise=new Promise(function(){var e=new FormData;e.append("file",n);a._activeJob.xhr.open("POST",r);a._activeJob.xhr.send(e)});return a._promise}).catch(function(e){a._onError("Error during upload: "+e);a._uploadOver()})}},{key:"_onUploadProgress",value:function e(t){var a="";if(t.lengthComputable){var n=Math.floor(100*t.loaded/t.total,10);this._store.dispatch(Object(p["progressUpdate"])({percentComplete:n}));a="Uploading "+this._activeJob.fileId+" - "+n+"% complete"}else a="Uploading "+this._activeJob.fileId+" - Upload percentage not computable";this._throttledLog(a)}},{key:"_log",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.level,r=void 0===n?"info":n;this._logger[r](B,t)}},{key:"_uploadOver",value:function e(){this._activeJob=null;this._go()}},{key:"_onLoad",value:function e(){var t=this;var a=this._activeJob.shareData;this._log(this._activeJob.fileId+" Finished POST-ing data");this._store.dispatch(Object(p["progressUpdate"])({percentComplete:100}));this._store.dispatch(Object(A["a"])(r()({fileId:this._activeJob.fileId},a,{introMessage:Object(M["a"])(this._store.getState(),a.introMessage)}))).then(function(){t._store.dispatch(Object(p["uploadComplete"])());t._uploadOver()}).catch(this._onError)}},{key:"_onTimeout",value:function e(){this._onError("File upload timed out!",{status:D})}},{key:"_onAbort",value:function e(){this._onError("File upload aborted!",{status:F})}},{key:"_onError",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._activeJob.xhr,r=n.status,i=void 0===r?L:r,o=n.response,s=void 0===o?null:o;var l=new Error(a);l.status=i;l.response=s;this._log(a,{level:i===F?"warn":"error"});if(0===this._activeJob.numRetries){this._activeJob.numRetries+=1;this._actuallyUpload(this._activeJob)}else this._store.dispatch(N({onGo:function e(){t._activeJob.numRetries+=1;t._actuallyUpload(t._activeJob)},onCancel:function e(){t._uploadOver()}}))}}]);return e}();var G=q;function H(e){if(P[e])return P[e];P[e]=new q(e);return P[e]}},,,,function(e,t,a){"use strict";a.r(t);var n=a(3);var r=a.n(n);var i=a(1);var o=a.n(i);var s=a(14);var l=a(139);var c=a(33);var u=a(62);var d=a(188);var p=a(3456);var f=function e(t,a,n,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var f="react_emoji_menu_render";Object(u["e"])(f+"_mark");Object(l["a"])(o.a.createElement(s["Provider"],{store:Object(c["d"])(t)},o.a.createElement(d["a"],r()({shouldFade:false},i),o.a.createElement(p["a"],n))),a,function(){return Object(u["g"])(f,f+"_mark")})};var m=f;var h=a(51);Object(h["a"])("interop.mountEmojiPicker",m)},,,function(e,t,a){"use strict";var n=a(2);var r=a.n(n);var i=a(26);var o=a(19);var s=a(123);var l=a(21);var c=a(681);var u=a(11);var d=a(850);var p=a(108);var f=a(16);var m=a(12);var h=a(321);var v=a(365);var g=a(474);var b=a(985);var _=a(707);var y=a(943);var k=a(802);var O=a(107);var w=a(117);var E=function e(t,a){if(!a)return"";switch(a.type){case"command":var r=a.data;if(!r)return"";var l=r.type;if("subteam"===l){var c=Object(s["getUserGroupById"])(t,r.id);var u=Object(y["a"])({userGroupHandle:c&&c.handle,fallbackHandle:r.label,isUnknown:Object(p["d"])(c),isNonExistent:Object(p["c"])(c)});return"<@"+r.id+"|"+u+">"}if(Object(n["includes"])(["here","channel","everyone","group"],l))return Object(_["a"])({type:l,tsfMode:"EDIT"});return"";case"member":var d=a.id;if(!d)return"";var h=Object(i["getMemberById"])(t,d);var v="<@"+d+"|@"+d+">";if(Object(p["e"])(h))return v;var g=Object(f["getMemberMentionName"])(h);if(!g)return v;return"<@"+d+"|@"+g+">";case"channel":var b=a.id;if(!b)return"";var O=Object(o["getChannelById"])(t,b);var w=Object(m["getDisplayName"])(O);var E=(a.text||"").replace(/^#/,"");var C=Object(m["isPrivateChannel"])(O);var j=Object(p["d"])(O);var S=Object(p["c"])(O);return Object(k["a"])({channelName:w,fallbackName:E,isPrivate:C,isUnknown:j,isNonExistent:S});default:if(a.text)return Object(n["unescape"])(a.text);if(a.content)return a.content;if(a.token)return a.token;if(a.name)return a.name;if(a.id)return a.id;return""}};var C=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.text,i=a.tsfMode,o=void 0===i?"EDIT":i;var s=Object(g["b"])(r,o);var p=Object(b["a"])(s);var f=p.map(function(e){return E(t,e)});var m=f.join("");return Object(v["b"])(m,{highlightWords:Object(l["getUserHighlightWords"])(t),shouldRenderEmojiAsText:Object(h["i"])(t),emojiNames:Object(u["isFeatureEnabled"])(t,"feature_sonic_emoji")?Object(c["getAllEmojiNames"])(t):Object(n["map"])(Object(w["b"])(),"name"),useSonicEmoji:Object(u["isFeatureEnabled"])(t,"feature_sonic_emoji")||Object(O["a"])(),locale:Object(d["getLocale"])(t)})};t["a"]=C},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(10);var p=a(0);var f=a.n(p);var m=a(1);var h=a.n(m);var v=a(430);var g=a(14);var b=a(2);var _=a(18);var y=a(20);var k=a(180);var O=a(170);var w=a(50);var E=a(48);var C=a(268);var j=a(978);var S=a(63);var I=a(3475);function T(e){var t=new RegExp("<@([A-Z0-9a-z]+)\\|([^>]+)>","g");return e.replace(t,function(e,t,a){var n=Object(b["unescape"])(a);return"<@"+t+"|"+n+">"})}var N=a(3267);var A=a(1928);var R=a(1444);var M=new d["b"]("search");var x=new d["b"]("quick_switcher");var P={usePrimarySearch:f.a.bool.isRequired,isSearchAutocompleteOpen:f.a.bool.isRequired,autoFocus:f.a.bool,isSonic:f.a.bool.isRequired,displayQuery:f.a.string.isRequired,onBlur:f.a.func,onEnter:f.a.func,onEscape:f.a.func,onFocus:f.a.func,searchInputChanged:f.a.func.isRequired,clearSearchInput:f.a.func.isRequired,orgName:f.a.string.isRequired,teamName:f.a.string.isRequired,autocompleteSelectedIndex:f.a.number,searchAutocompleteMode:f.a.string,isExperimentAnyOmniSwitcher:f.a.bool};var D={autoFocus:false,onBlur:b["noop"],onEnter:b["noop"],onEscape:b["noop"],onFocus:b["noop"],autocompleteSelectedIndex:void 0,searchAutocompleteMode:void 0,isExperimentAnyOmniSwitcher:false};var F=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.texty=null;Object(b["bindAll"])(a,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]);return a}o()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.autoFocus,n=t.usePrimarySearch,r=t.isSearchAutocompleteOpen;(a||n&&r)&&this.texty.setCursorAtEnd()}},{key:"shouldComponentUpdate",value:function e(t){var a=this.props.usePrimarySearch&&t.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen;return a||this.props.displayQuery!==t.displayQuery||this.props.autocompleteSelectedIndex!==t.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function e(t){this.texty&&this.props.usePrimarySearch&&!t.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus();t.displayQuery!==this.props.displayQuery&&this.updateDisplayQuery()}},{key:"onUserQueryChange",value:function e(){this.props.searchInputChanged({textyString:this.getTextyString()})}},{key:"onEnter",value:function e(){this.props.onEnter()}},{key:"onClickClear",value:function e(){this.props.clearSearchInput();this.texty&&this.texty.focus()}},{key:"setTextyRef",value:function e(t){var a=!!(t&&t.getWrappedInstance);this.texty=a?t.getWrappedInstance():t}},{key:"getTextyString",value:function e(){if(!this.texty)return this.props.displayQuery;return T(this.texty.value())}},{key:"updateDisplayQuery",value:function e(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function e(){var t=this.props,a=t.orgName,n=t.teamName;var r=M.t("Search");var i={tabcomplete:{completers:[]},keyboard:{useFormattingCommands:false}};var o=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden";var s="number"===typeof this.props.autocompleteSelectedIndex?Object(R["b"])(this.props.autocompleteSelectedIndex):void 0;var l={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:true,activedescendant:s};var c=M.t("Search {teamName}",{teamName:a||n||""});this.props.isExperimentAnyOmniSwitcher&&this.props.searchAutocompleteMode===C["searchAutocompleteModes"].NAVIGATION&&(c=x.t("Jump to..."));return h.a.createElement("div",{className:"c-search__input_box"},h.a.createElement(_["b"],{type:"search-medium",className:"c-search__input_box__icon"}),h.a.createElement(v["g"],{className:"c-search__input_box__input",modules:i,ref:this.setTextyRef,ariaLabel:r,unsafeAriaProps:l,initialText:this.props.displayQuery,placeholder:c,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:true,focusOnMount:false,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:false,showMentionTooltips:false,enableBroadcastKeywords:false}),h.a.createElement(y["c"],{className:o,onClick:this.onClickClear,label:M.t("Clear")},M.t("Clear")))}}]);return t}(m["Component"]);F.displayName="SearchInputBox";F.defaultProps=D;var L=function e(t){return{usePrimarySearch:Object(N["a"])(t),isSearchAutocompleteOpen:Object(C["isSearchAutocompleteOpen"])(t),displayQuery:Object(k["getSearchInputBoxDisplayQuery"])(t),orgName:Object(O["getEnterpriseOrgName"])(t)||"",teamName:Object(E["getTeamDisplayName"])(Object(w["getCurrentTeam"])(t)),autocompleteSelectedIndex:Object(C["getSearchAutocompleteSelectedIndex"])(t),isSonic:Object(S["a"])(t),searchAutocompleteMode:Object(C["getSearchAutocompleteMode"])(t),isExperimentAnyOmniSwitcher:Object(I["a"])(t)}};var B={searchInputChanged:k["searchInputChanged"],clearSearchInput:j["a"]};var U=t["a"]=Object(g["connect"])(L,B)(F)},function(e,t,a){"use strict";var n=a(4);var r=a(268);var i=a(117);var o=a(0);var s=a.n(o);var l=a(2);var c=a(164);var u=a(699);var d=a(180);var p=a(37);var f=a(670);var m=a(3475);var h=Object(n["e"])("Clog clicks on a message or file using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.suggestion;var i=t();var o=e(Object(u["getSearchSessionId"])());var s=e(Object(u["getQuerySessionId"])());var h=Object(r["getSearchAutocompleteSuggestions"])(i);var v=Object(r["getSearchAutocompleteSelectedIndex"])(i)-1;var g=Object(l["tail"])(h).map(function(e){return e.featureVector});if(Object(m["a"])(i)){v+=1;g=h.map(function(e){return e.featureVector})}var b=Object(c["a"])({state:i});var _=Object(d["getSearchInputBoxUserQuery"])(i);var y=_?_.length:0;var k=Object(p["getLastOpenMethod"])(i);-1===v?b.track("SEARCH_AUTOCOMPLETE_REJECT",{feature_vector_list:g,request_id:Object(f["a"])(i),search_session_id:o,client_request_id:s,query_length:y,open_method:k}):b.track("SEARCH_AUTOCOMPLETE_ACCEPT",{accept_module_name:"results_unified",accept_module_length:h.length,accept_item_offset:v,feature_vector_list:g,suggestion_type:n.type,is_navigational:n.is_type_navigational,navigation_model_id:n.id,request_id:Object(f["a"])(i),search_session_id:o,client_request_id:s,query_length:y,open_method:k})});h.propTypes={suggestion:s.a.object.isRequired};var v=h;var g=a(90);var b=a(150);var _=a(278);var y=a(455);var k=a(17);var O=a(609);var w=a(174);var E=a(3267);var C=a(165);var j=a(31);var S=a(473);var I=a(75);var T=a(50);var N=a(27);var A=a(147);var R=a(84);var M=a(326);var x=Object(j["b"])("Opens app profile card",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.channelId,r=a.teamId;var i=t();if(Object(N["isSSBAndAtLeastVersion"])("2.6")){var o=Object(l["includes"])(Object(I["getSignedInTeamIds"])(i),r);var s=o?Promise.resolve():Object(M["g"])(r);var c=function e(){return new Promise(function(e){return window.requestAnimationFrame(e)})};return s.then(c).then(function(){var e=document.createElement("iframe");var t=Object(R["b"])({team:r,id:n});e.src="slack://channel"+t;document.body.appendChild(e);setTimeout(function(){return e.remove()},1e3)})}var u=Object(T["getTeamById"])(i,r);var d=Object(l["get"])(u,"domain");var p=Object(S["b"])(i,d)+"/messages/"+n;Object(A["g"])(p,r);return Promise.resolve()});x.propTypes={channelId:s.a.string.isRequired,teamId:s.a.string.isRequired};var P=x;var D=a(12);a.d(t,"a",function(){return L});var F="IMPROVED_SEARCH";var L=Object(n["e"])("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){Object(k["a"])({getState:t}).info(F,"Accepted search query");var a=t();var n=Object(r["getSearchAutocompleteSelectedIndex"])(a);if(void 0===n||null===n)return;var o=Object(r["getSearchAutocompleteSuggestions"])(a)[n||0];if(!o)return;e(v({suggestion:o}));if(o.is_type_query_completion){var s=Object(i["h"])(o.suggestion_replacement);var l=Object(i["h"])(o.suggestion_replacement_for_request);Object(k["a"])({getState:t}).info(F,"Accepting query suggestion");e(Object(g["setEditableRequestQueryThenRequest"])({query:l}));e(Object(d["setSearchInputBoxDisplayQuery"])({displayQuery:s}));if(Object(E["a"])(a)){e(Object(r["closeSearchAutocomplete"])());Object(C["n"])("Vsearch")}else e(Object(p["setInterfaceMode"])({interfaceMode:p["interfaceModes"].SEARCH_RESULTS}))}else if(o.is_type_navigational){if(o.is_type_file){Object(k["a"])({getState:t}).info(F,"Navigating to file. file: "+o.file.id);e(Object(b["c"])({fileId:o.file.id}))}else{Object(k["a"])({getState:t}).info(F,"Navigating to model: id: "+o.id);if(Object(O["a"])(o.id))Object(w["o"])(o.id);else if(o.channel&&Object(D["isFromAnotherTeam"])(o.channel)){var c=Object(D["teamIdForChannelFromAnotherTeam"])(a,o.channel);e(P({teamId:c,channelId:o.channel.id}))}else o.channel&&Object(D["legacyIsFromAnotherTeam"])(a,o.channel)?e(P({teamId:o.channel.team_id,channelId:o.channel.id})):e(Object(_["a"])({id:o.id}))}e(Object(d["setSearchInputBoxUserQuery"])({textyString:""}));e(Object(y["a"])());e(Object(r["closeSearchAutocomplete"])())}});L.propTypes={}},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(2);var v=a(14);var g=a(484);var b=a(10);var _=a(180);var y=a(268);var k=a(280);var O=a(106);var w=a.n(O);var E=a(27);var C=a(446);var j=a(47);var S=a(747);var I=a(23);var T=a(3475);var N=a(1444);var A=new b["b"]("search");var R=function e(){return m.a.createElement("footer",null,m.a.createElement("span",{className:"c-search_autocomplete__footer_navigation_help"},m.a.createElement("strong",null,"\u2191")," ",m.a.createElement("strong",null,"\u2193"),"\xa0",A.t("to navigate"),m.a.createElement("strong",{className:"margin_left_100","aria-label":A.t("Return")},"\u21b5"),"\xa0",A.t("to select"),m.a.createElement("strong",{className:"margin_left_100","aria-label":A.t("Escape Character")},m.a.createElement("kbd",null,"esc")),"\xa0",A.t("to dismiss")))};R.displayName="Footer";var M=R;var x=a(1926);var P=new b["b"]("search");var D={displayQuery:p.a.string,userQuery:p.a.string,suggestions:p.a.array.isRequired,selectedIndex:p.a.number,onAccept:p.a.func,onSelectedIndexChange:p.a.func,fetchSearchAutocompleteSuggestions:p.a.func.isRequired,setSearchAutocompleteSelection:p.a.func.isRequired,setSearchAutocompleteSuggestions:p.a.func.isRequired,isExperimentAnyOmniSwitcher:p.a.bool,teamId:p.a.string.isRequired};var F={selectedIndex:null,onAccept:h["noop"],onSelectedIndexChange:h["noop"],displayQuery:null,userQuery:null,isExperimentAnyOmniSwitcher:false};var L=function e(t,a){return(t%a+a)%a};var B=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(a,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected"]);a.searchAutocompleteSuggestionsPromise=void 0;a.markAutocompleteRenderStart=Object(h["throttle"])(C["b"],2e3,{leading:true});return a}o()(t,[{key:"componentDidMount",value:function e(){document.body.addEventListener("keydown",this.onKeydown);this.onUserQueryChange();Object(S["d"])(this.props.teamId)}},{key:"shouldComponentUpdate",value:function e(t){return t.selectedIndex!==this.props.selectedIndex||t.suggestions!==this.props.suggestions}},{key:"componentDidUpdate",value:function e(t){t.userQuery!==this.props.userQuery&&this.onUserQueryChange()}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onKeydown",value:function e(t){var a=function e(){t.preventDefault();t.stopPropagation();return false};var n=t.shiftKey;var r=t.which;var i=g["codes"].up,o=g["codes"].tab,s=g["codes"].down;if(!n&&r===i||n&&r===o){this.decrementSelectedIndex();return a()}if(!n&&r===s||r===o){this.incrementSelectedIndex();return a()}return true}},{key:"onUserQueryChange",value:function e(){Object(C["a"])();this.searchAutocompleteSuggestionsPromise&&this.searchAutocompleteSuggestionsPromise.cancel();this.searchAutocompleteSuggestionsPromise=this.props.fetchSearchAutocompleteSuggestions({query:this.props.userQuery})}},{key:"onSuggestionDelete",value:function e(t){this.props.setSearchAutocompleteSuggestions({suggestions:Object(h["filter"])(this.props.suggestions,function(e){return t.key!==e.key})})}},{key:"onSuggestionSelected",value:function e(t,a){this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!a})}},{key:"onSuggestionAccept",value:function e(){this.props.onAccept()}},{key:"incrementSelectedIndex",value:function e(){if(this.props.isExperimentAnyOmniSwitcher){var t=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(t&&t.type===j["b"].QUERY&&t.suggestion_replacement!==this.props.displayQuery){this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:true});return}}this.props.setSearchAutocompleteSelection({selectedIndex:L((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length),setText:true})}},{key:"decrementSelectedIndex",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:L(this.props.selectedIndex-1,this.props.suggestions.length),setText:true})}},{key:"propsForSuggestion",value:function e(t,a){return{index:t,suggestion:a,key:a.key,isSelected:t===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,showUnreadCount:this.props.isExperimentAnyOmniSwitcher}}},{key:"renderScreenReaderWorkaround",value:function e(){var t=this;if(!(w.a.chrome&&w.a.version<67)||!Object(E["isSSB"])())return null;var a=this.props.selectedIndex;var n=Object(h["last"])(this.props.suggestions.map(function(e,n){return e.is_type_navigational&&n===a?m.a.createElement(N["a"],t.propsForSuggestion(n,e)):null}).filter(function(e){return e}));return m.a.createElement("div",{"aria-live":"polite",className:"offscreen"},n)}},{key:"render",value:function e(){var t=this;this.props.userQuery&&this.markAutocompleteRenderStart();var a=Object(h["reduce"])(this.props.suggestions,function(e,t){return e||!t.is_type_query_history},false);var n=m.a.createElement("header",null,m.a.createElement("span",{className:"c-search_autocomplete__header_label"},m.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},P.t("Recent searches"))));var r=this.renderScreenReaderWorkaround();return m.a.createElement("div",{className:"c-search_autocomplete"},a||!this.props.suggestions.length||n,r,m.a.createElement("ol",{className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list"},this.props.suggestions.map(function(e,a){return m.a.createElement(N["a"],t.propsForSuggestion(a,e))})),m.a.createElement(M,null))}}]);return t}(f["Component"]);B.displayName="SearchAutocomplete";B.defaultProps=F;var U=function e(t){return{suggestions:Object(y["getSearchAutocompleteSuggestions"])(t),selectedIndex:Object(y["getSearchAutocompleteSelectedIndex"])(t),userQuery:Object(_["getSearchInputBoxUserQuery"])(t),displayQuery:Object(_["getSearchInputBoxDisplayQuery"])(t),isExperimentAnyOmniSwitcher:Object(T["a"])(t),teamId:Object(I["getTeamId"])(t)}};var q={setSearchAutocompleteSelection:y["setSearchAutocompleteSelection"],setSearchAutocompleteSuggestions:y["setSearchAutocompleteSuggestions"],fetchSearchAutocompleteSuggestions:k["b"]};var G=t["a"]=Object(v["connect"])(U,q)(B)},function(e,t,a){"use strict";var n={calculator:"calculator",form:"form",review:"review",success:"success"};t["a"]=n},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(7);var o=a.n(i);var s=a(6);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a(0);var f=a.n(p);var m=a(17);var h={store:f.a.shape({getState:f.a.func.isRequired,subscribeImmediate:f.a.func,subscribe:f.a.func.isRequired}).isRequired,render:f.a.func.isRequired};var v=function(e){u()(t,e);l()(t,null,[{key:"getDerivedStateFromProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.store;return a.getState()}}]);function t(e){r()(this,t);var a=o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var n=e.store;a.state=n.getState();a.logger=Object(m["a"])({getState:n.getState,label:"CONNECT-IMMEDIATE"});a.unsubscribe=null;a.update=a.update.bind(a);return a}l()(t,[{key:"componentDidMount",value:function e(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function e(t){if(this.props.store!==t.store){this.unsubscribeFromStore();this.subscribeToStore()}}},{key:"componentWillUnmount",value:function e(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function e(){var t=this.props.store;var a=t.subscribeImmediate;if(!a){this.logger.warn("subscribeImmediate not found on store");a=t.subscribe}this.unsubscribe=a(this.update)}},{key:"unsubscribeFromStore",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function e(){var t=this;this.setState(function(){return t.props.store.getState()})}},{key:"render",value:function e(){return this.props.render(this.state)}}]);return t}(d["PureComponent"]);v.displayName="ConnectImmediate";var g=v;var b=t["a"]=g},function(e,t,a){"use strict";var n=a(1);var r=a.n(n);var i=a(0);var o=a.n(i);var s=a(14);var l=a(15);var c=a.n(l);var u=a(18);var d=a(20);var p=a(11);var f=a(1417);var m=a(10);var h=new m["b"]("global_nav");var v={featureGlobalNav:o.a.bool,featureGlobalNavLayout:o.a.bool};var g={featureGlobalNav:false,featureGlobalNavLayout:false};var b=function e(t){var a=t.featureGlobalNav,n=t.featureGlobalNavLayout;if(!a)return null;var i=r.a.createElement(d["c"],{className:"p-global_nav__sidebar_jumper",onClick:f["b"]},r.a.createElement(u["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),h.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var o=c()("p-global_nav__sidebar",{"p-global_nav__sidebar--relayout":n});return r.a.createElement("div",{className:o},i)};b.displayName="SidebarHeader";b.defaultProps=g;var _=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(p["isFeatureEnabled"])(t,"feature_global_nav_layout")}};t["a"]=Object(s["connect"])(_)(b)},,,,function(e,t,a){"use strict";a.r(t);var n=a(2781);var r=a(51);Object(r["a"])("interop.api_unauthed",{callSlackApiUnauthed:n["a"]})},,,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(0);var g=a.n(v);var b=a(3465);var _=a(2);var y=a(17);var k=a(269);var O={href:g.a.string.isRequired,sizes:g.a.string,type:g.a.string,logger:g.a.object.isRequired};var w={sizes:"16x16 32x32 48x48",type:"image/png"};var E=0;var C=function(e){h()(t,e);function t(e){c()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.originalFavicon=a.findFavicon();return a}d()(t,[{key:"componentDidMount",value:function e(){E&&this.props.logger.error("Multiple Favicons mounted");E+=1;this.updateFavicon()}},{key:"componentDidUpdate",value:function e(t){Object(k["a"])(this.getFaviconProps(t),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function e(){E-=1;this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function e(t){return{rel:"shortcut icon",href:t.href,sizes:t.sizes,type:t.type}}},{key:"setOrRemoveFavicon",value:function e(t){var a=document.querySelector("head");if(!a){this.logger.error("<head> not found");return}var n=this.findFavicon();n?t?a.replaceChild(t,n):n.remove():t&&a.appendChild(t)}},{key:"findFavicon",value:function e(){var t=document.querySelectorAll("head > link");return Object(_["find"])(t,function(e){var t=e.getAttribute("rel");if(t&&t.split(" ").includes("icon"))return true;return false})}},{key:"updateFavicon",value:function e(){var t=document.createElement("link");Object(_["forEach"])(this.getFaviconProps(this.props),function(e,a){t.setAttribute(a,e)});this.setOrRemoveFavicon(t)}},{key:"render",value:function e(){return null}}]);return t}(n["PureComponent"]);C.displayName="Favicon";C.defaultProps=w;var j=function e(t){return{logger:Object(y["a"])({state:t})}};var S=Object(i["connect"])(j)(C);var I=S;var T=a(626);var N=a(79);var A=a(3437);var R={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lJREFUeNqMVk1vGkEMndmu4MLmkOWQoCqkh0APqAdUVNpKiXLux/+tFKlSDlEitcm15RI4BBBiucCFjdDUs571eL1L1EEC450d28/P9ujvH7+qbBljFFtaa9SgAN9ij9Xnb/LNdBrKIUn0rNKGKi1vvkpPQqi0syYiIBvlN7lt2kM7C6ErE2gr6BfcpCXO4mg4AURlCg6ZHCIrGuk1Kckp/q20P13u1NknW4E7VMkAreE8ONTLEA0Lpep0jDvgSReZIGRQbkSNuBnT0+ggOowP0X3uB0cC1qvu6453Te8lT3/Qv7i8SLfpbDrDN4efh4MPg91ut1gsMBprqYSEY1EledA1fNo+bcN3kiS0HzVgz7pMwGrJhRBs5glS+EuVQbkDZKIoAmHyOEEP2m/s6WmaJsnKRZ5XoijJkIrAWtKG8sP5dNw6ds46Puhmswni+HFsmclKnZe9M0BmiXD4uFavdbod3ERC713PRZDhA2GhJlkmmBuOj0vkt+EXbhl5BnY6bzvDT0P1f+v25nb0Z8SZ6rikMwO51gcGf8G7xkEDNtRqtfPLc1Be/7zebreYkv77PghXP65g5ypZWT3RP3ufjIWeOb6A7LPNZrNerymfIE/GE4wSKgAZNX2aenIrhwF5jzZCOpg3Ly4jf1bIlozsWF+zpxmxQ+liN81UWBaBMrIjOhpoZwkpBGl0hW0U1vNmvXGFooycHMbHFJY7OO4jwqAB6BOkieMYM9GrW818Oge4CuzUDCIqcW4GDsU00iKm0jrrnqFw/+t+uVxyHhZA9jRlZuAvOg5wgyXI8N3NHb55cnoCxgCxh98P6A1gBR/uIkc7LGQ4xx0WFA4lAEAAwuA76Ph85jR82ogJmje7whD37RBfOGodYYaJ4GgSMKFZW25BHiiVzwMaOx47KLF6DfPpupAxkFioO99Eiye6GhYRFEZYcdi2Wi0sMYCYJwYCek6fOdC+GRt5zQmlC8wSdGNgiG3RxlX46O8ITfojlBHDkuLwzU7cscr1LLqhd5y3hfK8Iogq7lLZ8jZK9zU+9co3KK4P+LnCca9nG8T9RedLXBL8tUUMIGwvojXtc99dthiqLnoWViADNHvvAGL2uROVFtcykZjwhZdFcAJc6TjbwTEM3QAq3lP40VSThRxU3U0rgf0nwADpJQebhAz3/AAAAABJRU5ErkJggg==",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4JJREFUeNqMVj1MFEEUntlsx1FzQgmXnI13JGA0XIWJmvgTEzAxBhXbw0Rjg4VWamFLIjWGUkwgFoIFNkAhJN5VHGEpMVBz1OPbfW/evJldyc1d9t7Nzrzf7/3o+9fvqmwZY5RYWmvcQQKewZl0396Uh5kb0jFT/K5QhsotJ75on4lYaZIWWMAy8jelbD7DJz3TlYl0SugL1OQV8JLeIAJIZTyFjHVRSppQa95kpeRTacc9PKmzT7YiYqpCA1PB1jjcD000wpQi7mh3JIMeRII9k8eYp4oyUg/pCVix5zJdAFAg+kp98x/f1Mbr3bPu45uPkN3aznd4tndb716+ZT+z7nw3QhTltaMLGa+JGw3gjuzw/JWxGp7s6y+lKiM7Gwp2XWoByLQBUvjLmcEXRqojyK4FArIzvNPea1G8tZZ3WemYzUklaWejxFNtrE7sMgvg05hskMjfLSVSXaY9CQhcJiMGXAYGB4AoD5VxZ2KygRYPWwtGqpVKtQI735ZXgiyhQN67dkdKplAbNf3k4dPmM9XbSjrJ6+evJFIJSzrLA7trI5N5CXXvcW1vbiltPSrSIs0VsCBwnKEkpUjMzb+49eA2EIufPq+v/oBjUzPTaNyXxSXwDOqbL7pUTW0KK1m8JM3uTg4SxG5tnDB6+veUqoBWQT5hqOAZKRNWRFIkMxlSjBGZ7B8i2J3IziGKDDsHwT79G+crOPG9XIG/jnsnwVwr9Zfgi5vloUvwPeokkOEeOrVIWOhoaIvMZ+D1fuFDjxHm+uFSSjg5MlzDtSvUAO3eIXRyfBIEkksnJZos8Sh8ZfkrhBSI2eYsehwAc3RwBMTUzBT6CvDT3mvDmfOzrqxCxu+Asd/EDQOitftHxnNjdb3bPYdLzfk5wv6vrWQ/8Qq1bNS2vsZeERWRAHq4OsxOAEdjhMuDZQuqpKCRcA5bvMZeC/ObbX181CuZWtevjrqq52tNrHMZF8ms81ouVIuhAcYoZjjXD6jbdIUbgHEhlO06LmxhqALwPTleAv9AqcFXP9c20Hs7m9uyqJFOHGqR2Ronu8KZR3g21bZwCAumIzEREPqjoDbJHHH7/3EjR5hfSYy4RPPGN+VyJGh+8qScnaQRqB/PWPA3Cg00xTOAlOFxVDoYyyRS0yBfcDkwzjk3531vBDZezYjxV1nMkY2y//DMI2NQNJsWOvafAAMAxE3MJSrFyPAAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABExJREFUeNqkVktsG0UYnpl9OF6/4JDYaWirNrFIgTbvNEilByS4FHogQeJQoCcOidQjiF6LBGcEnIs4cABBKZeUQw+IQkUicFDVJo0TJ0gtSW2paWLHr90d/t2ZnZ11TBubie3Mzu7+3//9b3z2xdeQuyilKLhMy6yb8KmVq+VLPT0j0RhqfakgF2MMO/YrlnfOYa098PsFQJjLamBA3SVQdyyrPQCCHdWbMJCx4PtPrdYmA64+osgjIJA4MMKEkFy10iYDLgv5QoWtYA+i4Qc+i+Xy/wJgPBo9QZ0PcWHyprVU3m3LyZJXGQ0B46huExAfiUSmzk2VCg/R3VzrDHCTDGBsYKMQomAyOjH63InnN48e3ia4nSjypLJ48fHYLeDR198XiUY6nk5cteotA/iJxv48T7gWc6yvEGVodCgWi8UT8av37y+36AlVeJgpDtEqwvTUy6e6urtM0zx45NDWw61EIv7C8MB3j7YvVMwwwi07WbiXZcTU22++M/0uXAFAtVI1IkY8kXjjrcnNjc3fF7On/7qD6b4BuPpSPgNG8kCSPQEm0jTNMAxAqtfr8M2nj96s1k4urZJ9FCj8+sQZBiAsQxHnz4w2/f7MK2dfrdVqn3/y2eyPs6ZVP/nSxND4sLq6NvLHrfiTbEXEA9Rb2NszQn3H0uBqILGeW9cUVVXUkfGRzmQnerbv43plfmf7SSZyFRYkRBF1vI0wRCfEKJwAxtrdHPyqSD0+fBxMpev631vbF/P5gXD4vVR3Omw8LorkngPSHbnH0nAJ0tlJdjE7MDYIJx1GONWdKpV29ZD+zKGDncmulbX1mdzqoGGMRaKnE08ldT3gA+hoTFk5n0HWpU8/aqza7rJtm8VVpVIpl3aLpVLhQeHihQ/h3LJNeKBH06KKciQUUjGGa5XLxTzT2GW6P90kHljxUBSnymKiqqquaaFwR2Gz0KGHbGpblgYK5Kn9wLRzZpnFixpoyJ4zvv3qm+xSFjbnp8/3ulb68ovLK0srsJk8N3lidABr+MrX3y/ML0DfLj7a0VTNIUdseMB2Mwl7MtVAlrm2YpeZuT9BASYd1rUrs8ViCV6a/mCGUbn582/Lt5eZQhBaTEvgwaIGds4tTIOZLHkC9r39vWy/cW+juFOETTQWTR1IcbffyTIkpylRN/wwJRD3DIBwk6h+FdozXgyODbHNwnyGnQ+OeydzGT/tRfOgvPo6ogi/RURoikcFiWQPrxYQo8xjon5k5jKiqPDXpXxiZvZ94LewIBuQu3HvMtjnxvVf2K2ffrjGrPfr9RtckNxCvNEBS/UDs8lOToK9eIiPYLTpfNYwi3gFjY8pBAXflPu+f/4fZhSjgrjV0A0DHU0gixdkiXIUyPpSRGUSckfhg08jQdp8BpAxAhIRlj0n93Ze7B7zcgM537h7rO8mqTxp+jZU2X/kxZxcsQPAXq/2WneAVmDUDBr2XwEGADZFpKJDFtSPAAAAAElFTkSuQmCC",trouble:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6VJREFUeNp8Vr1PVEEQn3m+Ais+TOQ4TCCeARMxRyESC6EwkUIDpf530kqnJVZqZayMFBI5wpGAYMEdDZzR3Dqzszs7b+9gL7k3b97sfP5mdnH9yUvwyzkHZiGicISg/0yG+XGnFVZtQpdK6behNmBgJfPD+EqUgMFaFoHaGNxpbauMSlZCB1cgE3iNm7oyXTYbgSASXMUhF1PEpMu9VqY6Zf8Bk/ZcEv3PryIohTxANhyDE34eojOhDNMucRe26FklNDNCj4/CdC3pnxjD+mRw3/phM0HrxvydueQaXgmetVX3eqPf60GrLRtxY63/4pn7+w8Oj1CiYUsDmQgoGgoecU2+Lswz/+gEVN5zcL/tXdbEYo6FkmzGAoE8tTO0dpSZ8TEmdnaDgwvz/HrZg6NT3ib67F51ukiNJr9YCV+usO7OsHTrAAMeEKdrrHfnB2uCak9k+SjVrAJO7N0cgaVmwPXjZqjP02XnI+5LxibGiMM5o9S12i7rkliDgdkgSh/eh+erfUi5w8asa8yC0ML3HH59t42ttnE0ZpuI0uAXbXl/HsCbLepzDuXVOou/fV9cXPKueo1AxbY3tyjD8Os3Xlya5mKkpimZIsDUQPytew6drov1xE6XKyw+3hpn/vEJ7h3ITielCc0EaVzQW6mKhxaKaI8f59ESwD51m01STsIkT3Mg6vEsaYtCuzzlR3CFYf89zjtSGQO0XOjns25sFHD5yRFgH1OUTXCRW1kmMU50w2N0YhQJQiJWr3EE9RqujPAm6u3jU9M9Jt2cIm1xa6YxQxBysSK8lhbB5NZzmoIx2P5YUHzqfna6lGn2IqiZ/UPc3GL21CRPoU6XgSguPphzS4sM/A+fCu8NnJ1DVkjbz2WlwjHvtChwHwqDYq/NgJE9j5reg8ixp012gsqnonqIm1ntaSnA8Yk0ecien3pOz1oFSLDHuEpIKSqdbCpBNLVYnQGDFIG4RPi5yYXloa2TMY0A6eEsgsGjVZ3yAKUCQOc88L37VADs/al4nVS7VG3Ba5m7YEpE05gQ8n03jnGAr99YA5lMZQSXHZZqLA277I6lNqiMYRjET+T45y8QnDNDLUQfzw/b2eXgzUejSSAZuK/ZsTh4g7L8wurNBlHiG4Hs/hLPJMwuCenaUmnxeOBko+kq98Nlq4oOPVGEU+QBuivvANnZFzQCZtcywMpMKa/ZnAWXJTd33EjYHJbyhOo9xarWu2WlBsPupkMT+1+AAQCmPwV2bobFnwAAAABJRU5ErkJggg==",troubleUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1hJREFUeNqMVr1PFUEQn9lcIc+ORylHB9gBNpLY+dEISKWhNHYWdhb+FRaa+CeYWJnYKVoJdAiVQMc7Oh90go1vnX2zOzs7dxj2JXfz9mbne36zuLa8AuPlvQe1EJF3mKCn4Qn76aRmFmlMV0LJt04d0FpZfde+EBVg1GY8EB3tk1q38Ahn4Tp4h4HA/5gpy8jS0YgEkeALg3wKUSC9tVo2xSj9BMzSLSeOf+PlolCwDgbFyTnety565UqXdPbb6aSbTEhk2jVWmAJe26EjQasqQoYdBUrExDX/7Kmfnx2dX8DLV47FvX39l54HR/jmHUqcxXY5G6uos3jYNPq6tEjSA8/BITL/3Gzk7PUCH4g3aGuhohMpQcBv6QzJ3fR0FHd4FHnqaZ92MOYbUZ8Vo11uNP6lTIwjFhebLx7QztJiVPnzIJtv+oNXZUKmM3ZrwU9Ohs2pfuReXGDOUX0jSqlrmKmDNV++2i5JOWgVBoflwT14tDIyuVlf9QCFgetjnsEJkoJsaIo2EU7Vb9TMldDvdyDHZWv3B3Do2Expi9Arq7cfarwELgpV+xtP/J3lQLz/4L5vh2P373p27uMnMhzZ3jboxipKLQydiSJaCqY5ifg1l3J+dparw/QTFyc9XXZHyp8NGbtMLSb5PB5E/BKVx01UaSdHLPvwt2ojeJRbh78ia9AgN9f1nu9NRGOpuqb6vmmQOlwHWRwKGaWJxr7o+iVZL56PrphhwQ+pIh1k5wXDMQP1TH31CoLhEE0iBTpzHwjEs/LPmxQT0g3razEHVDDNSThAJcSNTfVDSEc8FxcZVPQEtY2m4XAMk+GYZHhrG8//BJzbeJxqfx8HA3HaFqjgqys6WWWC6Dph3PA0BJpOU3qnUgOSdCNRAL/woBhh5bCdn4PkTdy/OV+CqAZOhodWxznddcXIhWxs08QOZ+wLIHqYZ0YeZJinZpGD9ghjEwYN/Bri6Sns7kUM396hkI6I3tsvQC3aJKlWkaraNx8J6NaOS+5Hnt/nfvObM1OvfYPS+85gk+6RvH9JGKXe5ZOuETvRRLMcMMNPc+q7k0ZGPVF4x1kH/aV3ADP7ZHiYa1meNiYH7cPGORNca7ji0DGs+A3lPaWYP3Ln0Tnoupt2BvafAAMA603M1k3efM4AAAAASUVORK5CYII=",troubleMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABBhJREFUeNqkVk1vG0UYfudj/bExbWo3kJLaKRWO3aaooIoKOMCBDwlBI06F/oEeQOIHcIU7N34CEieQekMIkBDtBaEgDk1aRIgdRGiSpqSpN1nvzPDOzuzurO2SxozX69lZz/vM836ThRffhngopSA/IhH1I7zCYD/4eGbmQuUxOPzgKJcQgjNzT0eybmHFEPyjAgCxsgYYqHikqPeFGA+AEn30EQxcLPz+FYZjMrDHBwUJgRTJAgOhlK7s743JwMqCTGiqK5yjaLzhtRQE/wvA8Bi0hNIXjWE2IrEc9MYHsFaN1ZTC6KPjl1K/RBbepJv1u2MBkBERYNjghFHKCD13lj59mv4xtf0PhON4USLV+EuGZ14hh0ad+WVWrNAvg/VDA2SBZj6JJTRMrH1G2ZkWmZjglQq/dmfn9iEtwVon54adx0wuPAfzZ+WpWTh/DqRUeG3dVUti5yI95hF6aIBMdHx74zW4clm256DVNHrT+ntyWvnV/hrsNnePZbo90Ivs8RMMs7NWs4QoBY+TcolVfH7kiDc5Wdid3vt2alXAI2UncumFtwxAqhllOVhrv/eueumi7Efy8y/ghxtRJPrPzIft5r7/d/GVtVNHqXewm7rZTSMlc0Noto4kCOd0fZ16jHPG59terVoIZ8JPdn/76f7OQdk0PnBKIk2iqHNcLpdU46TGYpSs/YlOhRt4q6n6EXge6T4QH213zpfLV6dPNMv+QwAcx09PreU29GOjblZgtUNacwhPSyU1VeO9PVLw6InHRXWS3V7vf7Dy+7O+//xE5eWjk08UCjkbYEUzh3XjuTUHH74vB7N2/F5IJSIVhnI/FMGe7AXR9rb49DN0YilkhEJmPK/C2FPFIicEn7mVS2ykmcfZxih/0ElF64pwncEZJx6XxQK9d0+VCjpOhPCUkhtK3onkShQYf+G5gpwY4+tvoNPFIId3FrQN8M1X10h3TfvD668qjAw0+3ffw81lJoR80FOIhLsk1aRlnDRJIpO7Cc7oyjwu3dIHMNJx/HidoN5x05XLlsrir3R1Fd1B64AzaU6JPIzX4EwLJIrnlOBYAuf1up1vbkEvZuyX4XjNmr3TsZGvi5KK3Y8oin5vAKhVCU+z0HB70W5Bwsaun2lbyOVb2T+z4qFs9tWiqH1FU9dM/5qSOJ5ki27XRni1alduLidbkhrlxpNRc2aDrITl2XS6sLFJtrbg50Wbw6/fwNwlcb74SyLILSFJ6+DmQWI6OzcIhvHAtmBqZH82kOSThGbbFAr5nW5hyNYfosa0VUhfDVTDXEVLkdMNrkTXC9zzKlAuCZvNwGl8Bgmq0T2Ai5GTCMS1nFvbbbL7j80D5DLlDmk/DlK308x0yM0vJD7nZuwcMKicDfK0cq1mXrH/CjAAfjaCPa5V5tYAAAAASUVORK5CYII=",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2pJREFUeNp8Vr13EzEMly5uQl+nlKnpRrtRNsp7DO1Ilz5W/gZW/iG6MrLCyMhIN9JsKVvDlH7dRdiWLcu6K27fxaeTrY/fT7Lx/dtziIOIQA1EZAlP/NPoBHleqZVlN547mcm3QRvQG8X8kFwmDjBZMxGIjf5KbVt0RLMKHajBMMH/uCnD7KWzkSZ+ClQ5RDlFYUrWaxGKU/oJWHa3mhj/4mjSpmADDIZzcCy3IZIKZWh3jrvRoBskJDM8nzawPyr7745w1iT3tR86E3401XZAg+Txr2fP4NMOHbmy8t2EPu7Aybj4J1mWHPiRWDRIHnaNv/LWyw2IPksWm6AHkli0XHA+Xxkg4F+pDMFu38E0hnr5mDw42grPW4JlF5bxfnqtOO2kCIIlJMFH8+lFzPVVK3zACAYFewFV1NVa/GMDJYNUIbaNcDxOlt6Mk7bPOGtyfnYbOJkE7WXnzZOpklzJvd7AaXm1FWDUXw9c+AdVSlESXr/e4VUEVZiatDAayFLU8P5u6fM6ZMOH8mE7qH+5xXV0ajbCs2j7Yh3w+7PB9UYVV2BqYWOJAEsBhW9/CVatnxLjudrAZcsJx+cR8OsO5i1DRQxNKiYVo39zsrFuXno+jQgHgub+tRcNeMyFHYB1N42iACf4QiPbERMNMK0/jNW7bHNhU6rnm00uFCB7ciTa5xSZDs56p5MUx4EQJnNpFg3MHJ5yKB36dFXsRJUidoGtiRm/qaHQ8dh28uOtpPDtHpctifvmdHGl9yKImUWHF+sg3hvR2SQg7InIfrx05I154n+/T3y7iRQyXUiy7SqEc9798IHHUAIp5h3Ocx29jqEsskTaWGmU9Qno6kOchBC84GAUntctpQLzJhnzjuSs7begkiigpqpkhQSXGOM575JLnj/bmDgqnbG0ACLL19BN9RFWH7aHMT8egFWmMrcKD8Bd7AZV4+QCI3vNcdYFZcl3Y8+QX4+pnfvHz4egsiKVE31GCU2wxsDcscSGh3HeVn3wDvHHAx+uoJtaCiKfH7qyXf/mI9EUOvfua7ot9m9QWt7ofU0jKnKlYO4vmIe5JJRrizmAuL2Y1vSU++mypTqjPlFY0tgA6ck7gDn70o6A5loGul9rDPqLTXAmudZxpaFz6PgX6nuK3lpqssJg6G46mNh/AgwA1LYLPz5hMyUAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzFJREFUeNqMVr1zUzEMlxyHtincsdDOyUo6Aytz6Qoz3HVk5y/gr6ATQ2dgBWZYKWvDDAsDaZvmJUZ+smVZ77UXp5e4sqyPn76MR08OoV0hBFALEZnCG/o2PJGeb2pmkcZ7Lzs569UBnVXU99Fl4wGTNuOB6Oje1LqFRzgr1yE4jBu8xUxZRpZGI21oC6EyKGSI4jZYq4UoRulvwCLdcmL7aZdLQsE6GBVn55huXQzKlT7p7LfTQTeREGS6OVaZAkHboZGg5SvIsCdBaTOC8PoeTH2YBzj+mwx/fz8enS3h7RwEZ7Fd7qYs6k0eNo1OH90h6cDimH86TJy7LvKBeIM2FzzpzAEC/pXKkNiNs59nTeIZDxSF442o74rRrhQaf3IkWsTSmoqC1gOikE+KUtWEwcMbyHTEHg/hgYvEvZQKQHLZY/FgPMDJIHr18SqYKskx6CQGw3K0jc93bGxe7ABAqCnx39mKFChDM9q0cSp/k2bOBLZ9w/XtOkHHZkpZxEou5pcCimcnl/DuIjK+GsHTrUg/ucDPi2jjsy1g504vo+FsrzRdVD62dYC2l5lGNvZpTzhwsj/MVv1ZR2mqL5R64lDRtyvuSPpzXrUuj1Q8z5sUIMna81WqLzs5UtrHf323g7Pcia+yhczn4trF+Mdr3+G+oyOc6+pRcEfEaKKxLzp/Sdabu5tGWPqHZJEG2QXp4Vga9WSAm6fQ7zWYQErrLHUgLZ6Vf7gK5DhppsRnlChhfq3ihcPtwIVN+fOziTzzdWkqeoLaQtPtkNaPpo1nBurLAubtpZejnPtLmDWCe9WCClCQ54GMnZKggBJhAoGAptsUXmkbswaMRGn4lQfVCKuH7cEwFU1qmYgHQzCUaoKGquL4yOlpXo1c6haDUBmr+gc1UZkZZZBhmZpVDLojjE0guaeriA+1Gj76ep1K9/sSdFNLNkmoFVK++/IRQElcdj/x/FuHTws0U6/7gtJ0p+WaRlToN8Ao+S5HOkfsRBPNcsEMP82p3066M+qJwhRnHQw3vgHM7JPhYZ5lgNVM8rdcNs4ZcK3hikNj6PkX6neKFl3ePDoGfW/TXmD/CzAAcryyBfjeu1oAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+pJREFUeNqkVktvHEUQ7q7unp19xAkHJ6BFAhshgeI8pAgpuSAO3OLkCJw5cOEXwBX4F/yAiBMCxA1yyQWUG4kEIsoGoyiWDYg4jsc7091F9XRPT8/YkeNlPLvunUd99X1V1VX8+pV1Vh+IyLqHNrrSdJbFvPhsOr00OcGOf0iyyzmnlf+OR3M9wJoD8M8LwHiw1WOA9RFRnxizGABw5/ohDFIs+jwqywUZBPcZsoZARArAjAPAbL6/IINgi7VGo1a0JtP0ReevRfG/ADyPfiTQnVDDbGvzW7G3OECIai1ThHGu0wdgzPl7Y3i8+89CAPyQCvBsaCEABIeLA/FGJh7uPd6pykWyqLHq86XF87eIw0oGIyEHnH+9vXlsgLbQ/F8TCQdTqy9AnM/ERIolJb/9d+f3Y0YCYoR9CFK5Liu2PsCrOZ9KGAt5Qqo3c/HVo43iOEUne9LHUF/P+ftDx0IjKw1JJJakvDZWW/Py1ubs3elrrbZHMgjuN/Xs31yGQEWQFwBDQSrJk0q9oFSh57c2N55zd+LXLl/1ALGAkQXfvFwfjtg7GVbWfrmLPxSVNtUlVq6xciAHV868siTV0Wma7m4OqVl7QqvS1RqReIighJRCns+z5UFmTPnFg3u3n+wcFYPa4UgibqIUCbo8Yrgi3COE8YdllFSSybNDXmmmOGzMq0//3LgwHH704kuvD0fPDHLMnOg12V2VDoOs+wqZGbaWETzkyE4rXnCeAbyci2Wp71XVx7P7F0ejt8aTt0+eOpNlnRhQR/POpgm6ptgnk0N2bTotokYsjd23hvJ1z5i/KvP5jrHWGkt3cKrURIiVwUByykCUwS4PleZ/roqmrFNffFLVyeDKD7gCyEH8zU2eWYvWGIVot9FuaTvThfdJdhpyE4xv9nFmnEQfDJlX6UbBHhgHsZ7jWemS+fsC71ag0ewaUJKIoQXLaoq1JMGm7FRZrZX/+Yt2BbfSCPXjnD2tHaGs9U/c1vy+pnSQ9JwU1ntJPHzW0MoZ5Nit5CQStH5VhPWWZU/dEsecnYYm7Dq0PNeUsE4/jkB57wEgSCLj7n9wvDinQiTu6EDxnGK9K23ugXPYL5wpCLcgpmZ8NJJYbhjMdMiiuH/cqZpXmh6V1pMXsY1B28K6bMjuDeP0+akMt26WjhPZ+bliwVDaQprRId0HZTqtpDDeXJNd4Zldi9/NOzNHHEb6c1tzHVK7vamivf4MGeOoEG/1umGno0Xk+EJqMc2C1F9kmI45aUcJg0+fIB4+A6QYHYuMp5FLe3s/Bgdf7pHridt3vDNpthpK/581EUt37A4ww04MurQ6o2ZX2P8EGAAu1YEi4TmT9gAAAABJRU5ErkJggg=="};var M={store:g.a.shape({getState:g.a.func.isRequired,subscribeImmediate:g.a.func,subscribe:g.a.func.isRequired}).isRequired};var x=function(e){h()(t,e);function t(e){c()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderWithState=a.renderWithState.bind(a);return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(N["isHavingTroubleReconnecting"])(t);var n=Object(T["isOnline"])(t);var i=!!Object(A["getTotalUnreadHighlights"])(t);var o=Object(A["hasUnreads"])(t);var s=void 0;if(a)s=i?R.troubleMentions:o?R.troubleUnreads:R.trouble;else if(n)s=i?R.onlineMentions:o?R.onlineUnreads:R.online;else{s=R.offline;s=i?R.offlineMentions:o?R.offlineUnreads:R.offline}return r.a.createElement(I,{href:s})}},{key:"render",value:function e(){return r.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(n["Component"]);x.displayName="WorkspaceFavicon";var P=x;var D=P;var F=function e(t,a){if(!t)throw new Error("mountFavicon must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(D,{store:n})),a)};var L=F;var B=a(51);Object(B["a"])("interop.mountFavicon",L)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(0);var g=a.n(v);var b=a(3465);var _=a(17);var y=a(10);var k=new y["b"]("view");var O={title:g.a.string.isRequired,logger:g.a.object.isRequired};var w={};var E=0;var C=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){E&&this.props.logger.error("Multiple DocumentTitles mounted");E+=1;this.originalTitle=document.title;this.updateTitle()}},{key:"componentDidUpdate",value:function e(t){t.title!==this.props.title&&this.updateTitle()}},{key:"componentWillUnmount",value:function e(){E-=1;document.title=this.originalTitle}},{key:"updateTitle",value:function e(){document.title=this.props.title||k.t("Slack",{fallbackHash:"430b38bf6daa7f9164b164b2ffd540b5a3afe2fd",fallbackHashNs:"migration_status_page"})}},{key:"render",value:function e(){return null}}]);return t}(n["PureComponent"]);C.displayName="DocumentTitle";C.defaultProps=w;var j=function e(t){return{logger:Object(_["a"])({state:t})}};var S=Object(i["connect"])(j)(C);var I=S;var T=a(19);var N=a(50);var A=a(3437);var R=a(69);var M=a(12);var x=a(3454);var P=new y["b"]("view");var D={store:g.a.shape({getState:g.a.func.isRequired,subscribeImmediate:g.a.func,subscribe:g.a.func.isRequired}).isRequired};var F=function(e){h()(t,e);function t(e){c()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderWithState=a.renderWithState.bind(a);return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(R["getPrimaryView"])(t);var n=Object(T["getChannelById"])(t,a);var i=Object(N["getCurrentTeam"])(t);var o=!!Object(A["getTotalUnreadHighlights"])(t);var s=Object(A["hasUnreads"])(t);var l="";if(i&&i.name){var c="";a===x["a"].allUnreads?c=P.t("Unread Messages"):a===x["a"].allThreads?c=P.t("Threads"):n&&(c=Object(M["getDisplayName"])(n));l=c?c+" | "+i.name:i.name}o?l="! "+l:s&&(l="* "+l);return r.a.createElement(I,{title:l})}},{key:"render",value:function e(){return r.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(n["Component"]);F.displayName="WorkspaceDocumentTitle";var L=F;var B=L;var U=function e(t,a){if(!t)throw new Error("mountDocumentTitle must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(B,{store:n})),a)};var q=U;var G=a(51);Object(G["a"])("interop.mountDocumentTitle",q)},function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"c",function(){return i});a.d(t,"b",function(){return o});var n=a(351);function r(e){return i(e)||o(e)}function i(e){return"search_switcher"===Object(n["getGroupForUser"])(e,"sli_omni_switcher")||"search_switcher"===Object(n["getGroupForUser"])(e,"sli_search_switcher")}function o(e){return"omni_switcher"===Object(n["getGroupForUser"])(e,"sli_omni_switcher")}},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(14);var v=a(2);var g=a(90);var b=a(17);var _=a(15);var y=a.n(_);var k=a(37);var O=a(180);var w=a(188);var E=a(455);var C=a(18);var j=a(121);var S=a(75);var I=a(10);var T=a(280);var N=a(217);var A=a(13);var R=Object(A["c"])("TS.client.channel_header.calculateNoDragRegions");var M=a(3462);var x=a(54);var P=a(446);var D=Object(A["c"])("TS.view.resize_sig.add",v["noop"],true);var F=Object(A["c"])("TS.view.resize_sig.remove",v["noop"],true);var L=a(268);var B=a(3463);var U=a(3461);var q=a(3481);var G=new I["b"]("search");var H=new I["b"]("jumper");var W={close:m.a.func.isRequired,interfaceMode:m.a.string.isRequired,displayQuery:m.a.string,searchAutocompleteSuggestionAccept:m.a.func.isRequired,searchPrecache:m.a.func.isRequired,setRequestFromEditableRequest:m.a.func.isRequired,setSearchInputBoxUserQuery:m.a.func.isRequired,userQuery:m.a.string.isRequired,visible:m.a.bool.isRequired,searchAutocompleteMode:m.a.oneOf(Object(v["values"])(L["searchAutocompleteModes"])).isRequired};var V={displayQuery:""};var z=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(v["bindAll"])(a,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchInputBoxEscape","onClickRefreshSearch"]);a.state={appBannerHeightPx:a.getBannerHeight()};a.onSearchInputBoxFocus=Object(v["throttle"])(function(){return a.props.searchPrecache()},6e4);a.onResize=Object(v["throttle"])(a.onResize.bind(a),50);D(a.onResize);return a}o()(t,[{key:"componentDidMount",value:function e(){Object(N["a"])()&&Object(S["areDragRegionsRequired"])()&&Object(v["get"])(window,"desktop.app.updateDragRegion")&&window.desktop.app.updateDragRegion([])}},{key:"componentWillUnmount",value:function e(){Object(N["a"])()&&Object(S["areDragRegionsRequired"])()&&R();F(this.onResize)}},{key:"onResize",value:function e(){var t=this;this.setState(function(){return{appBannerHeightPx:t.getBannerHeight()}})}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(P["e"])();this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchInputBoxEscape",value:function e(){this.onSearchClose();return true}},{key:"onSearchClose",value:function e(){Object(x["g"])()||this.props.close()}},{key:"onClickRefreshSearch",value:function e(){this.props.setRequestFromEditableRequest({fetchSuggestions:true})}},{key:"getBannerHeight",value:function e(){var t=window.$&&window.$("#banner");return t&&t.height()||0}},{key:"clear",value:function e(){this.props.setSearchInputBoxUserQuery({textyString:""})}},{key:"renderMode",value:function e(){switch(this.props.interfaceMode){case k["interfaceModes"].SEARCH_RESULTS:return this.renderSearchResults();case k["interfaceModes"].EDIT:default:return this.renderQueryEdit()}}},{key:"renderSearchResults",value:function e(){return p.a.createElement(q["a"],{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"renderQueryEdit",value:function e(){return p.a.createElement("div",{className:"c-search-autocomplete"},p.a.createElement(B["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))}},{key:"render",value:function e(){var t={top:0,left:0,bottom:0,right:0};var a=y()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===k["interfaceModes"].EDIT});var n=G.t("Search");this.props.searchAutocompleteMode===L["searchAutocompleteModes"].NAVIGATION&&(n=H.t("Jump to a conversation. Up arrow and down arrow navigates results, return selects, escape closes."));return p.a.createElement(w["a"],{ariaRole:"dialog",ariaLabel:n,isOpen:this.props.visible,position:"top-left",targetBounds:t,onClose:this.onSearchClose,shouldFade:false,overlayClassName:a,allowanceX:0,allowanceY:0,shouldFocusAfterRender:true,shouldReturnFocusAfterClose:false,contentStyle:{marginTop:this.state.appBannerHeightPx}},p.a.createElement("div",{className:"c-search__input_and_close"},p.a.createElement(U["a"],{autoFocus:true,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus}),p.a.createElement(j["a"],{className:"c-search__input_and_close__close",onClick:this.props.close,ariaLabel:G.t("Cancel")},p.a.createElement(C["b"],{type:"times"}))),this.renderMode())}}]);return t}(d["PureComponent"]);z.displayName="Search";z.defaultProps=V;var Q=function e(t){return{interfaceMode:Object(k["getInterfaceMode"])(t),displayQuery:Object(O["getSearchInputBoxDisplayQuery"])(t),userQuery:Object(O["getSearchInputBoxUserQuery"])(t),visible:Object(k["getVisible"])(t),searchAutocompleteMode:Object(L["getSearchAutocompleteMode"])(t)}};var K={searchAutocompleteSuggestionAccept:M["a"],searchPrecache:T["h"],setRequestFromEditableRequest:g["setRequestFromEditableRequest"],setSearchInputBoxUserQuery:O["setSearchInputBoxUserQuery"],close:function e(){return E["a"].apply(void 0,arguments)}};var Y=Object(h["connect"])(Q,K)(z);var J="IMPROVED_SEARCH";var Z={logger:m.a.object.isRequired,resetSearchAfterUnknownUIError:m.a.func.isRequired};var X=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={hasError:false};a.retryRender=Object(v["throttle"])(a.retryRender.bind(a),100,{leading:false});return a}o()(t,[{key:"componentDidUpdate",value:function e(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function e(t,a){this.props.logger.error(J,"Error caught by ProtectedSearch "+a.componentStack);this.setState(function(){return{hasError:true}});this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function e(){this.setState(function(){return{hasError:false}})}},{key:"render",value:function e(){if(this.state.hasError)return null;return p.a.createElement(Y,null)}}]);return t}(d["PureComponent"]);X.displayName="ProtectedSearch";var $=function e(t){return{logger:Object(b["a"])({state:t})}};var ee={resetSearchAfterUnknownUIError:g["resetSearchAfterUnknownUIError"]};var te=Object(h["connect"])($,ee)(X);var ae=t["a"]=te},,,function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a(24);var r=a.n(n);var i=a(27);var o=a(185);var s=a(17);var l=(void 0,function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n["throw"](e))}catch(e){i(e)}}function l(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})});var c=function e(t){throw new Error("Inconceivable!")};function u(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var a="";for(var n=0;n<e;n++){var r=Math.floor(Math.random()*t.length);a+=t.substring(r,r+1)}return a}function d(){var e=void 0;var t=void 0;var a=new Promise(function(a,n){e=a;t=n});a.resolve=e;a.reject=t;return a}function p(e,t){var a=void 0;if("boolean"===typeof e){var n=e;if(n)return true;a=t}else a=e;a||(a="Generic error.");if(i["isDev"]||i["isQa"]||o["a"])throw Error("Failed debugCheck in dev: "+a);Object(s["b"])({label:"CHECK"}).error("Silently continuing after failed debugCheck in prod: "+a);return false}function f(e){return JSON.stringify(e,void 0,2)}function m(e,t){var a=this;var n=false;var i=void 0;var o=void 0;var s=function s(){for(var c=arguments.length,u=Array(c),p=0;p<c;p++)u[p]=arguments[p];return l(a,void 0,void 0,regeneratorRuntime.mark(function a(){var l;return regeneratorRuntime.wrap(function a(c){while(1)switch(c.prev=c.next){case 0:if(!n){c.next=4;break}i=u;o=d();return c.abrupt("return",o);case 4:i=void 0;n=true;c.next=8;return t.call.apply(t,[e].concat(u));case 8:l=c.sent;n=false;i&&o&&s.apply(void 0,r()(i)).then(o.resolve).catch(o.reject);return c.abrupt("return",l);case 12:case"end":return c.stop()}},a,this)}))};return s}},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(0);var p=a.n(d);var f=a(1);var m=a.n(f);var h=a(14);var v=a(15);var g=a.n(v);var b=a(3267);var _=a(37);var y=a(1135);var k=a(11);var O=a(63);var w=a(10);var E=a(1352);var C=a.n(E);var j=new w["b"]("search");var S={tab:p.a.string.isRequired,setTab:p.a.func.isRequired,usePrimarySearch:p.a.bool,featureSliChannelSearch:p.a.bool,featureSliUserSearch:p.a.bool};var I={usePrimarySearch:false,featureSliChannelSearch:false,featureSliUserSearch:false};var T=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSwitchItem=a.renderSwitchItem.bind(a);return a}o()(t,[{key:"renderSwitchItem",value:function e(t){var a=this;var n=t.name,r=t.id;return m.a.createElement("button",{key:r,className:g()("c-search__tab c-tabs__tab",{"c-tabs__tab--active":this.props.tab===r}),onClick:function e(){return a.props.setTab({tab:r})},"aria-selected":this.props.tab===r,role:"tab"},n)}},{key:"render",value:function e(){var t=this;var a=[{id:"messages",name:j.t("Messages")},{id:"files",name:j.t("Files")}];this.props.featureSliChannelSearch&&a.push({id:"channels",name:"Channels"});this.props.featureSliUserSearch&&a.push({id:"users",name:"People"});return m.a.createElement("div",{role:"tablist",className:g()("c-search__tabs","c-tabs__tab_menu",{"c-search__tabs--primary_search_legacy":this.props.usePrimarySearch&&!Object(O["a"])(),"c-search__tabs--primary_search_sonic":this.props.usePrimarySearch&&Object(O["a"])()})},a.map(function(e){return t.renderSwitchItem(e)}))}}]);return t}(f["PureComponent"]);T.displayName="SearchTypeSwitch";T.defaultProps=I;var N=function e(t){return{tab:Object(_["getTab"])(t),featureSliChannelSearch:Object(k["isFeatureEnabled"])(t,"feature_sli_channel_search"),featureSliUserSearch:Object(k["isFeatureEnabled"])(t,"feature_sli_user_search"),usePrimarySearch:Object(b["a"])(t)}};var A={setTab:y["a"]};t["a"]=Object(h["connect"])(N,A)(T)},function(e,t,a){"use strict";var n=a(5);var r=a.n(n);var i=a(6);var o=a.n(i);var s=a(7);var l=a.n(s);var c=a(8);var u=a.n(c);var d=a(1);var p=a.n(d);var f=a(0);var m=a.n(f);var h=a(15);var v=a.n(h);var g=a(14);var b=a(37);var _=a(3267);var y=a(63);var k=a(3);var O=a.n(k);var w=a(2);var E=a.n(w);var C=a(17);var j=a(186);var S=a(50);var I=a(90);var T=a(280);var N=a(278);var A=a(455);var R=a(150);var M=a(4);var x=a(164);var P=a(699);var D=a(795);var F=a(670);var L=Object(M["e"])("Clog clicks on a message or file using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.iid,r=a.type,i=a.ts,o=a.channelId,s=a.userId,l=a.botId,c=a.extraArguments,u=void 0===c?{}:c;var d=t();var p=e(Object(P["getSearchSessionId"])());var f=e(Object(P["getQuerySessionId"])());var m=Object(S["getCurrentTeam"])(d).id;var h=Object(x["a"])({state:d});h.track("SEARCH_CLICK",O()({click_iid:n,click_target_type:r,click_user_id:s,click_bot_id:l,click_channel_id:o,click_team_id:m,click_timestamp:i},Object(D["a"])(d),{request_id:Object(F["a"])(d),search_session_id:p,client_request_id:f},u))});L.propTypes={type:m.a.string.isRequired,ts:m.a.string,channelId:m.a.string,userId:m.a.string,botId:m.a.string};var B=L;var U=a(10);var q=a(92);var G=a(54);var H=a(20);var W=a(18);var V=a(444);var z=a(138);var Q=a(361);var K=a(446);var Y=a(1118);var J=a(171);function Z(e,t){var a=e[0]&&e[0].ts;if(!a)return"";var n=Object(J["j"])(a,{returnMoment:true});return Object(J["g"])(n,{shortenMonth:t,excludeYear:Object(J["f"])(a)})}var X=a(605);var $=a(873);var ee=a(21);var te=a(144);var ae=a(48);var ne=a(609);var re=a(12);var ie=a(19);function oe(e,t){if("string"===typeof t)return Object(ie["getChannelById"])(e,t,true);if(Object(re["isMpim"])(t))return Object(ie["getChannelById"])(e,t.id,true);t&&t.id&&Object(ie["getChannelById"])(e,t.id,true);return t}var se=new U["b"]("search");var le=/[\ue000\ue001]/g;function ce(e,t){if(!t)return null;var a=t.team;var n=oe(e,t.channel);var r=t.messages||[];var i=Object(S["getCurrentTeam"])(e);var o=null;if(a&&Object(ne["a"])(a)&&i.id!==a){var s=Object(S["getTeamById"])(e,a||i.id);o=Object(ae["getTeamDisplayName"])(s)}var l=void 0;var c=Object(re["getDisplayNameForChannel"])(e,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var u=Z(r);var d=r.length;var p=n&&n.is_im;var f=n&&n.is_mpim;var m=n.is_ext_shared;var h=i&&i.id!==a&&Object(ne["a"])(a);var v=n&&n.is_shared;l=p?se.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):f?se.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):m?se.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):h?se.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:c,date:u,count:d,workspaceName:o}):v?se.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):se.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:c,date:u,count:d});l=Object(w["unescape"])(l);var g=r.map(function(t){return Object(Y["a"])({day:{ts:t.ts,isFirstDay:false,isLastDay:false},name:Object(X["a"])(e,{userId:t.user}),time:Object(te["a"])(t.ts,{do24hrTime:Object(ee["getUserPref"])(e,"time24"),includeSeconds:false}),text:Object($["c"])(e,t.text.replace(le,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:false,isFirstMsgForDay:false,isLastMsgForDay:false,isFirstUnreadMsg:false})});var b=g.join(". ");return l+" "+b+"."}var ue=a(651);var de=a(286);var pe=a(31);var fe=a(23);var me=a(11);var he=a(675);var ve=a(33);var ge=a(147);var be=Object(pe["b"])("Jump to message by permalink either in this or another workspace",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.permalink;var r=Object(fe["getTeamId"])(t());var i=Object(S["getTeamById"])(t(),r);var o=i&&i.domain;var s=Object(me["pageNeedsEnterprise"])(t());var l=Object(de["e"])(n);var c=l.team;var u=c;if(r&&Object(de["d"])(r,n))return Promise.resolve();if(s&&o&&u!==o){var d=Object(de["c"])(n);if(!r)return Promise.reject();var p=Object(ve["c"])(r);var f=Object(de["b"])(p,d);if(!f||Object(re["isNonExistent"])(f)||Object(re["isFromAnotherTeam"])(f)){var m=Object(S["getTeamByDomain"])(p,u);if(!m||!m.discoverable)return e(Object(S["ensureEnterpriseTeamIsKnown"])({additionalOptions:{domain:u}})).then(function(e){if(!e){if(Object(de["d"])(r,n))return Promise.resolve();Object(ge["g"])(n,"blank");return Promise.resolve()}Object(he["b"])(c,n);return Promise.resolve()});Object(he["b"])(m,n);return Promise.resolve()}if(Object(de["d"])(r,n))return Promise.resolve();return Promise.reject()}return Promise.reject()});be.propTypes={permalink:m.a.string.isRequired};var _e=be;var ye=a(69);var ke=a(32);var Oe=a.n(ke);var we=a(173);var Ee=a(665);var Ce=a(1930);var je=new U["b"]("search");var Se={featureTinyspeck:m.a.bool,theme:m.a.string};var Ie={featureTinyspeck:false,theme:"light"};function Te(e){var t=e.theme,a=e.featureTinyspeck;if(a)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-message_group"},p.a.createElement("div",{className:"c-search_message c-search_message--"+t},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(we["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Ee["a"],{userId:"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},je.t("There was an error displaying this message.")))))}Te.displayName="ErrorSearchMessage";Te.defaultProps=Ie;var Ne=function e(t){var a="";var n=false;try{a=Object(ee["getUserMessagesTheme"])(t);n=Object(me["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:a,featureTinyspeck:n}};var Ae=Object(g["connect"])(Ne)(Te);var Re=a(65);var Me=a(151);var xe=new U["b"]("search");var Pe={featureTinyspeck:m.a.bool,ts:m.a.string,channel:m.a.object,user:m.a.string,theme:m.a.string};var De={featureTinyspeck:false,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};function Fe(e){var t=e.user,a=e.theme,n=e.ts,r=e.channel,i=e.featureTinyspeck;if(i)return p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message ",n," in ",r.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return p.a.createElement("div",{className:"c-search_message c-search_message--"+a},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(we["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Ee["a"],{userId:t||"",isInteractive:true})),p.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},xe.t("There was an error displaying this message."))))}Fe.displayName="ErrorSearchMessage";Fe.defaultProps=De;var Le=function e(t){var a="";var n=false;try{a=Object(ee["getUserMessagesTheme"])(t);n=Object(me["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:a,featureTinyspeck:n}};var Be=Object(g["connect"])(Le)(Fe);var Ue=a(791);var qe=a(81);var Ge=a(1123);var He=function e(t,a){var n=a.bot_id,r=a.bot_profile,i=a.thread_ts,o=a.teamId,s=a.ts,l=a.channel,c=a.replies,u=a.permalink;var d=Object(ee["getUserMessagesTheme"])(t);var p=Object(S["getCurrentTeam"])(t);var f=void 0;p&&(f=p.domain);var m=E.a.some(a.extracts,function(e){return e.truncated_head||e.truncated_tail});var h=a.text.length>200;var v=!!(a.attachments&&a.attachments.length);var g=!!a.text;var b=m&&h||v&&g;var _=Object(S["getCurrentTeam"])(t).id!==o;var y="";if(c&&c.length){var k=c[0].ts;var O=Object(qe["parseUrl"])(u),w=O.hostname;y="https://"+w+Object(de["a"])({channelId:l.id,ts:k,threadTs:s})}return{logger:Object(C["a"])({state:t}),hasText:g,isCrossWorkspace:_,botId:n,botProfile:r,threadTs:i,theme:d,permalinkToMessageThread:y,hasAdHocSender:Object(Ue["a"])(a),featureTinyspeck:Object(me["isFeatureEnabled"])(t,"feature_tinyspeck"),canBeTruncated:b,teamDomain:f,channelName:Object(re["getDisplayNameForChannel"])(t,l)}};var We=null;var Ve=Object(g["connect"])(He,We)(Ge["a"]);var ze="IMPROVED_SEARCH";var Qe={logger:m.a.object.isRequired};var Ke=function(e){u()(t,e);function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}o()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.logger.error(ze,"Error caught by ProtectedSearchMessage "+a.componentStack);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return p.a.createElement(Be,this.props);return p.a.createElement(Ve,this.props)}}]);return t}(d["PureComponent"]);Ke.displayName="ProtectedSearchMessage";var Ye=function e(t){return{logger:Object(C["a"])({state:t})}};var Je=Object(g["connect"])(Ye)(Ke);var Ze=Je;var Xe=a(1935);var $e=new U["b"]("search");var et={close:m.a.func.isRequired,messages:m.a.arrayOf(m.a.shape({iid:m.a.string.isRequired,user:m.a.string.isRequired,ts:m.a.string.isRequired,extracts:m.a.array})).isRequired,channel:m.a.shape({id:m.a.string.isRequired,name:m.a.string.isRequired}).isRequired,team:m.a.string.isRequired,workspaceName:m.a.string,currentTeam:m.a.object.isRequired,isEnterpriseOrg:m.a.bool.isRequired,onMessageJump:m.a.func.isRequired,onFileJump:m.a.func.isRequired,onRepliesClick:m.a.func.isRequired,clogSearchClick:m.a.func};var tt={workspaceName:"",clogSearchClick:E.a.noop};var at=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isExpanded:false,isHoveringOnExpandLinks:false};Object(w["bindAll"])(a,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]);return a}o()(t,[{key:"onChannelClick",value:function e(){var t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();t[0]&&this.onMessageJump({iid:t[0].iid,permalink:t[0].permalink,ts:t[0].ts,channelId:this.props.channel.id,userId:t[0].user,botId:t[0].botId})}},{key:"onLinkClick",value:function e(t){this.props.clogSearchClick(O()({},t));"channel"===t.type&&this.props.close()}},{key:"onMessageJump",value:function e(t){var a=t.iid,n=t.permalink,r=t.ts,i=t.channelId,o=t.userId,s=t.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:n});this.props.clogSearchClick({type:"message_jump",iid:a,ts:r,channelId:i,userId:o,botId:s})}},{key:"onFileJump",value:function e(t,a){var n=a.file,r=a.iid,i=a.ts,o=a.channelId,s=a.userId,l=a.botId;this.props.onFileJump(t,{file:n,iid:r,ts:i,channelId:o,userId:s,botId:l})}},{key:"onRepliesClick",value:function e(t){this.props.onRepliesClick(t);this.props.clogSearchClick(t)}},{key:"onExpandHoverStart",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:true}})}},{key:"onExpandHoverEnd",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:false}})}},{key:"getCondensedMessageArray",value:function e(){var t=this.props.messages;return E.a.reduce(t,function(e,t){var a=e.length&&e[e.length-1].collapsedStub;t.stub&&(!t.text||t.text.length>200||a)?a?e[e.length-1].count+=1:e.push({collapsedStub:true,count:1}):e.push(t);return e},[])}},{key:"expand",value:function e(t){var a=t.iid,n=t.ts,r=t.channelId,i=t.userId,o=t.botId;this.setState(function(){return{isExpanded:true}});this.props.clogSearchClick({type:"expand",iid:a,ts:n,channelId:r,userId:i,botId:o})}},{key:"formatHeaderDate",value:function e(){return Z(this.props.messages,true)}},{key:"renderHeader",value:function e(){var t=this.props.channel;if(!t)return null;var a=this.formatHeaderDate();return p.a.createElement(Re["a"],{className:"c-message_group__header",onClick:this.onChannelClick},p.a.createElement(Me["a"],{channel:t,teamIconSize:"14",showPresence:true,inline:true,showTeamIconForXwsChannels:true}),p.a.createElement("span",null,"\u2013"),p.a.createElement("span",{className:"c-message_group__header_date"},a),p.a.createElement("span",{className:"c-message_group__header_view_label"},$e.t("View in channel")))}},{key:"renderMessages",value:function e(){var t=this;var a=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return E.a.map(a,function(e,a){if(e.collapsedStub&&!t.state.isExpanded)return p.a.createElement("button",{key:a,className:"c-message_group__divider",onClick:t.expand},p.a.createElement("hr",{className:"c-message_group__divider_rule"}),p.a.createElement("div",{className:"c-message_group__divider_text"},$e.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count})));return p.a.createElement(Ze,O()({key:e.ts},e,{teamId:t.props.team,channel:t.props.channel,expanded:t.state.isExpanded,onExpand:t.expand,onClick:t.onMessageJump,onLinkClick:t.onLinkClick,onFileClick:t.onFileJump,onRepliesClick:t.onRepliesClick,onExpandHoverStart:t.onExpandHoverStart,onExpandHoverEnd:t.onExpandHoverEnd}))})}},{key:"render",value:function e(){var t=v()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return p.a.createElement("div",{className:t},this.renderHeader(),this.renderMessages())}}]);return t}(d["PureComponent"]);at.displayName="SearchMessageGroup";at.defaultProps=tt;var nt=function e(t,a){var n=a.channel,r=a.team;var i=Object(S["getCurrentTeam"])(t);var o=Object(S["getTeamById"])(t,r||i.id);var s=Object(ae["getTeamDisplayName"])(o);var l=oe(t,n);return{channel:O()({},l,{team_id:r}),isEnterpriseOrg:!!(i&&i.enterprise_id),workspaceName:s,currentTeam:i}};var rt={clogSearchClick:B,close:function e(){return A["a"].apply(void 0,arguments)}};var it=Object(g["connect"])(nt,rt)(at);var ot="IMPROVED_SEARCH";var st={logger:m.a.object.isRequired};var lt=function(e){u()(t,e);function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}o()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.logger.error(ot,"Error caught by ProtectedMessageGroup "+a.componentStack);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){var t=this.props,a=t.logger,n=Oe()(t,["logger"]);if(this.state.hasError)return p.a.createElement(Ae,n);return p.a.createElement(it,n)}}]);return t}(d["PureComponent"]);lt.displayName="ProtectedMessageGroup";var ct=function e(t){return{logger:Object(C["a"])({state:t})}};var ut=Object(g["connect"])(ct)(lt);var dt={visible:m.a.bool,currentPageOffset:m.a.number.isRequired,totalPageCount:m.a.number.isRequired,itemType:m.a.oneOf(["message","file"]).isRequired,onBack:m.a.func.isRequired,onForward:m.a.func.isRequired};var pt={visible:true};var ft=new U["b"]("search");function mt(e){var t=e.visible,a=e.currentPageOffset,n=e.totalPageCount,r=e.itemType,i=e.onBack,o=e.onForward;if(!t)return null;var s=1===a;var l=a===n;var c="";var u={currentPageOffset:Object(z["a"])(a),totalPageCount:Object(z["a"])(n)};"message"===r?c=ft.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"}):"file"===r&&(c=ft.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"}));var d=p.a.createElement(Re["a"],{className:"c-search__pager__button_forward",onClick:o,disabled:l},s&&ft.t("See more")||ft.t("Next"),p.a.createElement(W["b"],{type:"chevron-medium-right",size:"inherit"}));var f=p.a.createElement(Re["a"],{className:"c-search__pager__button__back",onClick:i,disabled:s},p.a.createElement(W["b"],{type:"chevron-medium-left",size:"inherit"}),ft.t("Previous"));return p.a.createElement("div",{className:"c-search__pager"},s||f,p.a.createElement("span",{className:"c-search__pager__details"},c),l||d)}mt.displayName="Pager";mt.defaultProps=pt;var ht=mt;var vt=a(9);var gt=a.n(vt);var bt=a(26);var _t=a(170);var yt=a(240);var kt=a(351);var Ot=a(201);var wt=a(160);var Et=a(885);var Ct=a(263);var jt=a(797);function St(e){if(!e||Object(w["isEmpty"])(e))return true;if(e.in&&e.in.length)return false;if(e.from&&e.from.length)return false;if(e.to&&e.to.length)return false;if(e.before||e.after)return false;if(e.has_star||e.has_pin||e.has_link||e.has_rxn)return false;return true}var It=a(16);var Tt=a(347);var Nt=a(1115);var At=a(121);var Rt=a(372);var Mt=a(35);var xt=a.n(Mt);var Pt=a(624);var Dt=a(188);var Ft=a(472);var Lt={onDateChange:m.a.func.isRequired,isDateDisabled:m.a.func.isRequired,date:m.a.string,disableDatesAfter:m.a.string,disableDatesBefore:m.a.string,dateLabel:m.a.string.isRequired,dateAriaLabel:m.a.string.isRequired,removeAriaLabel:m.a.string.isRequired};var Bt={date:null,disableDatesBefore:null,disableDatesAfter:null};var Ut=-364;var qt=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["onClearDateChange"]);return a}o()(t,[{key:"onClearDateChange",value:function e(){this.props.onDateChange(null)}},{key:"render",value:function e(){var t=this.props,a=t.onDateChange,n=t.date,r=t.isDateDisabled,i=t.disableDatesBefore,o=t.disableDatesAfter,s=t.dateLabel,l=t.dateAriaLabel,c=t.removeAriaLabel;var u="";u="es"===xt.a.locale()?n?xt()(n,"YYYY-MM-DD").format("DD/MM/YYYY"):"":n?Object(J["g"])(xt()(n,"YYYY-MM-DD")):"";var d=v()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!n});return p.a.createElement("div",{className:"p-search_filter__date"},p.a.createElement(Dt["b"],{ariaHasPopup:true,position:"bottom",offsetY:Ut,renderPopover:function e(t){return p.a.createElement(Dt["a"],t,p.a.createElement("div",{className:"p-block_kit_date_picker_calendar_wrapper"},p.a.createElement(Ft["a"],{showInput:false,selectedDate:n,onDateChange:function e(n){var r=n.selectedDate;t.onClose();a(r)},isDateDisabled:r,disableDatesBefore:i,disableDatesAfter:o})))}},p.a.createElement(At["a"],{className:d,ariaLabel:n?void 0:l},p.a.createElement("div",{className:"p-search_filter__date_label"},s),p.a.createElement("div",{className:"p-search_filter__date_readout"},u),n?null:p.a.createElement(W["b"],{type:"calendar",className:"p-search_filter__calendar_icon"}))),n?p.a.createElement(At["a"],{ariaLabel:c,className:"p-search_filter__date_close",onClick:this.onClearDateChange},p.a.createElement(W["b"],{type:" c-icon--times-small"})):null)}}]);return t}(d["PureComponent"]);qt.displayName="DateSelector";qt.defaultProps=Bt;var Gt=qt;var Ht=new U["b"]("search");var Wt={onStartDateChange:m.a.func.isRequired,onEndDateChange:m.a.func.isRequired,startDate:m.a.string,endDate:m.a.string};var Vt={startDate:null,endDate:null};var zt=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["isDateDisabledStart","isDateDisabledEnd"]);return a}o()(t,[{key:"isDateDisabledStart",value:function e(t){var a=this.props.endDate;if(a)return t.isAfter(a)||t.isAfter(xt()());return t.isAfter(xt()())}},{key:"isDateDisabledEnd",value:function e(t){var a=this.props.startDate;if(a)return t.isBefore(a)||t.isAfter(xt()());return t.isAfter(xt()())}},{key:"render",value:function e(){var t=this.props,a=t.onStartDateChange,n=t.onEndDateChange,r=t.endDate,i=t.startDate;return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},Ht.t("Date"))),p.a.createElement("div",{className:"p-search_filter__dates"},p.a.createElement(Gt,{date:i,onDateChange:function e(t){a(t?xt()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:r||xt()().format("YYYY-MM-DD"),dateLabel:Ht.t("Starting"),dateAriaLabel:Ht.t("Starting date"),removeAriaLabel:Ht.t("Remove starting date")}),p.a.createElement(Gt,{date:r,onDateChange:function e(t){n(t?xt()(t):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:i,disableDatesAfter:xt()().format("YYYY-MM-DD"),dateLabel:Ht.t("Ending"),dateAriaLabel:Ht.t("Ending date"),removeAriaLabel:Ht.t("Remove ending date")})))}}]);return t}(d["PureComponent"]);zt.displayName="DateRangeFilter";zt.defaultProps=Vt;var Qt=zt;var Kt={variation:m.a.number.isRequired,includeAvatar:m.a.bool};var Yt={includeAvatar:false};function Jt(e){var t=e.variation,a=e.includeAvatar;return p.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},a?p.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,p.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}Jt.displayName="PlaceholderSuggestion";Jt.defaultProps=Yt;var Zt=Jt;var Xt=a(1937);var $t=new U["b"]("search");var ea="IMPROVED_SEARCH";var ta={showOnlyActiveFilters:m.a.bool,showFileFilters:m.a.bool,filters:m.a.object.isRequired,suggestions:m.a.object.isRequired,toggleEditableRequestQueryFilterFromItem:m.a.func.isRequired,toggleEditableRequestQueryFilterInItem:m.a.func.isRequired,isEnterpriseOrg:m.a.bool.isRequired,orgName:m.a.string,setEditableRequestQueryFilterAfter:m.a.func.isRequired,setEditableRequestQueryFilterBefore:m.a.func.isRequired,setEditableRequestQueryFilterFileType:m.a.func.isRequired,searchPrefs:m.a.shape({searchOnlyCurrentTeam:m.a.bool.isRequired,searchExcludeBots:m.a.bool.isRequired,searchOnlyMyChannels:m.a.bool.isRequired}).isRequired,setUserPrefByApi:m.a.func.isRequired,setEditableRequestChannelObjects:m.a.func.isRequired,channelObjects:m.a.object.isRequired,imToUserMap:m.a.object.isRequired,loading:m.a.bool.isRequired,logInfo:m.a.func,teamId:m.a.string.isRequired,useModernSearcher:m.a.bool.isRequired,modernSearch:m.a.func.isRequired,showDebugOption:m.a.bool.isRequired,isDebugInfoVisible:m.a.bool.isRequired,toggleDebugInfoVisible:m.a.func.isRequired};var aa={showOnlyActiveFilters:false,showFileFilters:false,orgName:"",logInfo:w["noop"]};var na=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={channelSelectIsVisible:false,memberSelectIsVisible:false};Object(w["bindAll"])(a,["onChannelSelect","onChannelQuery","onMemberQuery","onMemberSelect","showChannelSelect","hideChannelSelect","showMemberSelect","hideMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange"]);a.itemsFromChannelSearch={};a.onStartDateSelect=a.onStartDateSelect.bind(a);a.onEndDateSelect=a.onEndDateSelect.bind(a);return a}o()(t,[{key:"onChannelQuery",value:function e(t){var a=this;if(!t)return Promise.resolve({options:[]});var n=this.props.useModernSearcher;var r=void 0;r=n?this.props.modernSearch({query:t,options:{limit:150,entities:{channels:{includeArchived:true,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:true,includeMpims:true},members:{includeSelf:true,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeTeambot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:true}}}}).then(function(e){return e.map(function(e){return{model_ob:e}})}):Object(Ct["a"])(t,{limit:150,channels:{include_archived:true,only_if_member:this.props.searchPrefs.searchOnlyMyChannels},members:{include_self:true,include_org:true,include_slackbot:!this.props.searchPrefs.searchExcludeBots,include_bots:!this.props.searchPrefs.searchExcludeBots,include_deleted:true},mpims:true,groups:true,enterprise_channels:!this.props.searchPrefs.searchOnlyCurrentTeam});return r.then(function(e){var t=e.map(function(e){var t=e.model_ob;if(!Object(It["isMember"])(t))return a._buildChannelObjectWithTeamIdIfMissing(t);return t});a.props.searchPrefs.searchOnlyMyChannels&&(t=Object(w["filter"])(t,function(e){if(Object(re["isPublicChannel"])(e))return Object(re["isMemberOfChannel"])(e);return true}));t=t.filter(function(e){var t=Object(w["findIndex"])(a.props.suggestions.in,function(t){return t.id===e.id});return-1===t});a.itemsFromChannelSearch=Object(w["keyBy"])(t,"id");var n={};a.props.suggestions.in.forEach(function(e){n[e.name]=(n[e.name]||0)+1});t.forEach(function(e){n[e.name]=(n[e.name]||0)+1});return{options:t.map(function(e){return{label:Object(It["isMember"])(e)?p.a.createElement(Rt["a"],{id:e.id}):p.a.createElement(Me["a"],{channel:e,showTeamIconForLocalChannels:n[e.name]>1,showTeamIconForXwsChannels:true}),value:e.id}})}})}},{key:"onMemberQuery",value:function e(t){var a=this;if(!t)return Promise.resolve({options:[]});var n=this.props.useModernSearcher;var r=void 0;r=n?this.props.modernSearch({query:t,options:{entities:{members:{includeSelf:true,includeSlackbot:true,includeTeambot:true,includeBots:true,includeDeleted:true}}}}).then(function(e){return e.map(function(e){return{model_ob:e}})}):Object(Ct["a"])(t,{members:{include_self:true,include_slackbot:!this.props.searchPrefs.searchExcludeBots,include_bots:!this.props.searchPrefs.searchExcludeBots,include_deleted:true}});return r.then(function(e){return{options:e.filter(function(e){return-1===a.props.suggestions.from.indexOf(e.model_ob.id)}).map(function(e){return{label:p.a.createElement("span",{className:"p-search_filter__option p-search_filter__option--suggestion"},p.a.createElement(we["b"],{userId:e.model_ob.id,size:18,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement(Rt["a"],{id:e.model_ob.id})),value:e.model_ob.id}})}})}},{key:"onChannelSelect",value:function e(t,a){if(!t)return;this.itemsFromChannelSearch[t]&&this.props.setEditableRequestChannelObjects({channels:O()({},this.props.channelObjects,gt()({},t,this.itemsFromChannelSearch[t]))});var n=t;this.props.imToUserMap[t]&&(n=this.props.imToUserMap[t]);this.props.toggleEditableRequestQueryFilterInItem({channelId:n});this.itemsFromChannelSearch={};true!==a&&this.hideChannelSelect()}},{key:"onMemberSelect",value:function e(t,a){if(!t)return;this.props.toggleEditableRequestQueryFilterFromItem({memberId:t});true!==a&&this.hideMemberSelect()}},{key:"onEndDateSelect",value:function e(t){var a=t&&t.add(1,"days").format(Pt["a"]);this.props.setEditableRequestQueryFilterBefore({dateString:a})}},{key:"onStartDateSelect",value:function e(t){var a=t&&t.subtract(1,"days").format(Pt["a"]);this.props.setEditableRequestQueryFilterAfter({dateString:a})}},{key:"onSearchPrefChange",value:function e(t){var a=this.props.searchPrefs,n=a.searchOnlyCurrentTeam,r=a.searchExcludeBots,i=a.searchOnlyMyChannels;this.props.logInfo(ea,"Changing search pref. pref: "+t);switch(t){case"search_only_current_team":this.props.setUserPrefByApi({pref:"search_only_current_team",value:!n});break;case"search_exclude_bots":this.props.setUserPrefByApi({pref:"search_exclude_bots",value:!r});break;case"search_only_my_channels":this.props.setUserPrefByApi({pref:"search_only_my_channels",value:!i});break;default:break}}},{key:"onFileTypeChange",value:function e(t){this.props.setEditableRequestQueryFilterFileType({fileType:t})}},{key:"_buildChannelObjectWithTeamIdIfMissing",value:function e(t){if(!t.team_id){if(t.teams&&1===t.teams.length)return O()({},t,{team_id:t.teams[0]});return O()({},t,{team_id:this.props.teamId})}return t}},{key:"showChannelSelect",value:function e(){this.setState(function(){return{channelSelectIsVisible:true}})}},{key:"hideChannelSelect",value:function e(){this.setState(function(){return{channelSelectIsVisible:false}})}},{key:"showMemberSelect",value:function e(){this.setState(function(){return{memberSelectIsVisible:true}})}},{key:"hideMemberSelect",value:function e(){this.setState(function(){return{memberSelectIsVisible:false}})}},{key:"shouldRenderDateFilter",value:function e(){var t=this.props,a=t.filters,n=t.showOnlyActiveFilters;if(St(a)&&n)return false;return!n||a.before&&a.after}},{key:"renderInFilter",value:function e(){var t=this;var a=this.props,n=a.filters,r=a.suggestions,i=a.loading;var o=this.state.channelSelectIsVisible;if(i)return this.renderInPlaceholder();var s=r.in.map(function(e){if(!Object(It["isMember"])(e))return t._buildChannelObjectWithTeamIdIfMissing(e);return e});var l={};s.forEach(function(e){l[e.name]=(l[e.name]||0)+1});Object.keys(this.itemsFromChannelSearch).forEach(function(e){var a=t.itemsFromChannelSearch[e];l[a.name]=(l[a.name]||0)+1});return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},$t.t("Channels & direct messages"))),p.a.createElement("div",{className:"p-search_filter__controls"},s.map(function(e){return p.a.createElement("label",{key:e.id,htmlFor:"universal-search-channel-filter-"+e.id,className:"p-search_filter__option "+(-1===n.in.indexOf(e.id)?"p-search_filter__option--suggestion":"")},p.a.createElement(Me["a"],{channel:e,showTeamIconForLocalChannels:l[e.name]>1,showTeamIconForXwsChannels:true}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",tabIndex:"0",id:"universal-search-channel-filter-"+e.id,checked:n.in.indexOf(e.id)>-1,onChange:function a(){return t.onChannelSelect(e.id)},"data-qa":"in-filter-checkbox"}))}),!o&&p.a.createElement(At["a"],{className:"p-search_filter__more_link",onClick:this.showChannelSelect,ariaLabel:$t.t("More channels or direct messages to filter by")},$t.t("More\u2026")),o&&p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Tt["a"],{id:"channel-select",name:"channel-select",optionsFetcher:this.onChannelQuery,onChange:this.onChannelSelect,minQueryLength:2,value:null,useFullWidthOptions:true,placeholder:$t.t("e.g. #general"),selectPlaceholder:$t.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true}),p.a.createElement(At["a"],{ariaLabel:$t.t("Hide channel filter selector"),className:"p-search_filter__close",onClick:this.hideChannelSelect},p.a.createElement(W["b"],{type:"times-small"})))))}},{key:"renderInPlaceholder",value:function e(){return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},$t.t("Channels & direct messages"))),p.a.createElement("div",{className:"p-search_filter__controls"},p.a.createElement(Zt,{variation:0}),p.a.createElement(Zt,{variation:1}),p.a.createElement(At["a"],{className:"p-search_filter__more_link",disabled:true,ariaLabel:$t.t("More channels or direct messages to filter by")},$t.t("More\u2026"))))}},{key:"renderFromFilter",value:function e(){var t=this;var a=this.props,n=a.filters,r=a.suggestions,i=a.loading;var o=this.state.memberSelectIsVisible;if(i)return this.renderFromPlaceholder();return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},$t.t("People"))),p.a.createElement("div",{className:"p-search_filter__controls"},r.from.map(function(e){return p.a.createElement("label",{key:e,htmlFor:"universal-search-member-filter-"+e,className:"p-search_filter__option "+(-1===n.from.indexOf(e)?"p-search_filter__option--suggestion":"")},p.a.createElement(we["b"],{userId:e,size:18,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement(Rt["a"],{id:e}),p.a.createElement("input",{id:"universal-search-member-filter-"+e,className:"flex_shrink_none",tabIndex:"0",type:"checkbox",checked:n.from.indexOf(e)>-1,onChange:function a(){return t.onMemberSelect(e,true)},"data-qa":"from-filter-checkbox"}))}),!o&&p.a.createElement(At["a"],{className:"p-search_filter__more_link",onClick:this.showMemberSelect,ariaLabel:$t.t("More people to filter by")},$t.t("More\u2026")),o&&p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Tt["a"],{id:"member-select",name:"member-select",optionsFetcher:this.onMemberQuery,onChange:this.onMemberSelect,minQueryLength:2,value:null,useFullWidthOptions:true,placeholder:$t.t("e.g. Shannon"),selectPlaceholder:$t.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true}),p.a.createElement(At["a"],{ariaLabel:$t.t("Hide member filter selector"),className:"p-search_filter__close",onClick:this.hideMemberSelect},p.a.createElement(W["b"],{type:"times-small"})))))}},{key:"renderFromPlaceholder",value:function e(){return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},$t.t("People"))),p.a.createElement("div",{className:"p-search_filter__controls"},p.a.createElement(Zt,{includeAvatar:true,variation:0}),p.a.createElement(Zt,{includeAvatar:true,variation:1}),p.a.createElement(At["a"],{className:"p-search_filter__more_link",disabled:true,ariaLabel:$t.t("More people to filter by")},$t.t("More\u2026"))))}},{key:"renderFileTypeFilter",value:function e(){var t=this.props,a=t.filters,n=t.showOnlyActiveFilters,r=t.showFileFilters;if(!r||n&&!a.fileType)return null;return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},$t.t("File type"))),p.a.createElement(Nt["a"],{filetype:a.fileType,onChange:this.onFileTypeChange}))}},{key:"renderPrefs",value:function e(){var t=this;var a=this.props,n=a.showOnlyActiveFilters,r=a.isEnterpriseOrg,i=a.orgName,o=a.showDebugOption,s=a.isDebugInfoVisible;var l=this.props.searchPrefs,c=l.searchOnlyCurrentTeam,u=l.searchExcludeBots,d=l.searchOnlyMyChannels;if(n)return null;return p.a.createElement("div",{className:"p-search_filter"},p.a.createElement("div",{className:"p-search_filter__title"},p.a.createElement("h3",{className:"p-search_filter__title_text"},$t.t("Include results from\u2026"))),p.a.createElement("div",{className:"p-search_filter__controls"},r&&p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!c}),htmlFor:"search_only_current_team"},$t.t("Other {orgName} workspaces",{orgName:i})," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:!c,onChange:function e(){return t.onSearchPrefChange("search_only_current_team")}})),p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!u}),htmlFor:"search_exclude_bots"},$t.t("Apps and bots")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:!u,onChange:function e(){return t.onSearchPrefChange("search_exclude_bots")}})),p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!d}),htmlFor:"search_only_my_channels"},$t.t("Channels I\u2019m not a member of")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:!d,onChange:function e(){return t.onSearchPrefChange("search_only_my_channels")}})),o&&p.a.createElement("label",{className:v()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":s}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:s,onChange:function e(){return t.props.toggleDebugInfoVisible()}}))))}},{key:"render",value:function e(){var t=this.props.filters.after&&xt()(this.props.filters.after,Pt["a"]).add(1,"days").format(Pt["a"]);var a=this.props.filters.before&&xt()(this.props.filters.before,Pt["a"]).subtract(1,"days").format(Pt["a"]);return p.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),p.a.createElement(Qt,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:t,endDate:a}),this.renderPrefs())}}]);return t}(d["PureComponent"]);na.displayName="MessagesFilterUI";na.defaultProps=aa;var ra=function e(t){var a=Object(I["getEditableRequestQueryFilter"])(t)||{};var n=Object(I["getEditableRequestChannelObjects"])(t)||{};var r=Object(I["getFilterSuggestions"])(t)||{};var i=Object(me["getCurrentUserId"])(t);var o=Object(S["getCurrentTeam"])(t);var s=!!o.enterprise_id;var l=s?Object(_t["getEnterpriseOrgName"])(t):"";var c=oa(t,a.in);var u=Object(b["getModuleState"])(t,"suggestions")||{};var d=u.loading;var p=Object(y["a"])()||"modern_searcher"===Object(kt["getGroupForUser"])(t,"sli_search_modern_searcher");var f="solr_rank_debug"===Object(kt["getGroupForUser"])(t,"solr_rank_debug");return{suggestions:{in:(r.in||[]).map(function(e){return n[e]||ia(t,e)}).filter(function(e){return!!e}),from:r.from||[]},isEnterpriseOrg:s,orgName:l,myUserId:i,filters:{in:a.in||[],from:a.from||[],before:a.before,after:a.after,fileType:a.fileType},channelObjects:n,imToUserMap:c,searchPrefs:{searchOnlyCurrentTeam:Object(ee["getUserPref"])(t,"search_only_current_team"),searchExcludeBots:Object(ee["getUserPref"])(t,"search_exclude_bots"),searchOnlyMyChannels:Object(ee["getUserPref"])(t,"search_only_my_channels")},loading:d,logInfo:Object(C["a"])({state:t}).info,teamId:Object(fe["getTeamId"])(t),useModernSearcher:p,isDebugInfoVisible:Object(b["getIsDebugInfoVisible"])(t),showDebugOption:f}};function ia(e,t){if(Object(wt["a"])(t)){var a=Object(Et["a"])(e,t)||Object(ie["getChannelById"])(e,t);if(a.isUnknown||a.isNonExistent)return null;return a}if(Object(Ot["a"])(t))return Object(bt["getMemberById"])(e,t);return null}function oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,a){if(Object(Ot["a"])(a)){var n=Object(ie["getImIdByMemberId"])(e,a);n&&(t[n]=a)}return t},{})}var sa={setEditableRequestQueryFilterAfter:I["setEditableRequestQueryFilterAfter"],setEditableRequestQueryFilterBefore:I["setEditableRequestQueryFilterBefore"],setEditableRequestChannelObjects:I["setEditableRequestChannelObjects"],setEditableRequestQueryFilterFileType:I["setEditableRequestQueryFilterFileType"],setUserPrefByApi:yt["c"],toggleEditableRequestQueryFilterFromItem:I["toggleEditableRequestQueryFilterFromItem"],toggleEditableRequestQueryFilterInItem:I["toggleEditableRequestQueryFilterInItem"],modernSearch:jt["a"],toggleDebugInfoVisible:b["toggleDebugInfoVisible"]};var la=Object(g["connect"])(ra,sa)(na);var ca=a(1135);var ua=Object(M["e"])("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.uiElement,r=a.uiAction;var i=Object(x["a"])({state:t()});i.track("GROWTH_PRICING",{contexts:{ui_context:{step:"search_pane",action:r,ui_element:n}}})});ua.propTypes={uiElement:m.a.string.isRequired};var da=ua;var pa=a(1939);var fa=new U["b"]("search");var ma={type:m.a.oneOf(["messages","files"]).isRequired,reason:m.a.oneOf(["messages","storage"]).isRequired,teamPlan:m.a.string.isRequired,teamMessagesCount:m.a.number.isRequired,clogLimitBannerInteraction:m.a.func.isRequired};var ha={};var va=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogLinkClick=a.clogLinkClick.bind(a);return a}o()(t,[{key:"componentDidMount",value:function e(){if(this.isVisible())switch(this.props.reason){case"messages":this.props.clogLimitBannerInteraction({uiAction:"impression",uiElement:"message_search_link_top"});break;case"storage":this.props.clogLimitBannerInteraction({uiAction:"impression",uiElement:"file_search_pricing_link"});break;default:break}}},{key:"isVisible",value:function e(){return!this.props.teamPlan&&this.props.teamMessagesCount>=10100}},{key:"clogLinkClick",value:function e(){this.props.clogLimitBannerInteraction({uiAction:"click",uiElement:"messages"===this.props.reason?"message_search_link_top":"file_search_pricing_link"})}},{key:"render",value:function e(){var t=this.props,a=t.type,n=t.reason;if(this.isVisible()){var r=void 0;r="messages"===a&&"messages"===n?fa.t("Some older messages may not be shown because your workspace has over 10,000 messages."):"files"===a&&"messages"===n?fa.t("Some older files may not be shown because your workspace has over 10,000 messages."):fa.t("Your workspace is over its storage limit.");return p.a.createElement("div",{className:"p-message_limit_banner"},p.a.createElement("div",{className:"p-message_limit_banner__graphic"},p.a.createElement(W["b"],{type:"eye-closed"})),p.a.createElement("div",{className:"p-message_limit_banner__content"},r,p.a.createElement("br",null),p.a.createElement(Re["a"],{href:"/pricing?ui_step=43&ui_element="+("messages"===n?2:3),onClick:this.clogLinkClick,target:"new"},"messages"===n?fa.t("Learn more"):fa.t("Please upgrade to a paid plan"))))}return null}}]);return t}(d["PureComponent"]);va.displayName="MessageLimitBanner";va.defaultProps=ha;var ga=function e(t){var a=Object(S["getCurrentTeam"])(t);var n=Object(ae["isOverStorageLimit"])(a);return{teamPlan:a.plan,teamMessagesCount:a.messages_count,reason:n?"storage":"messages"}};var ba={clogLimitBannerInteraction:da};var _a=Object(g["connect"])(ga,ba)(va);var ya=a(1941);var ka=new U["b"]("search");var Oa={type:m.a.oneOf(["messages","files"]).isRequired,numOfFileResults:m.a.number,numOfMessageResults:m.a.number,setTab:m.a.func.isRequired};var wa={numOfFileResults:void 0,numOfMessageResults:void 0};var Ea=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["setTab"]);return a}o()(t,[{key:"setTab",value:function e(){this.props.setTab({tab:"messages"===this.props.type?"files":"messages"})}},{key:"renderMessage",value:function e(){var t=this.props,a=t.numOfFileResults,n=t.numOfMessageResults;if("messages"===this.props.type&&Object(w["isNumber"])(a)&&a>0)return p.a.createElement("p",null,ka.t("However, there {numOfFileResults, plural, =1 {is one file} other {are several files}} related to your search.",{numOfFileResults:a}),"\xa0",p.a.createElement(Re["a"],{className:"c-search_no_results__tab_link",onClick:this.setTab},ka.t("See files")));if("files"===this.props.type&&Object(w["isNumber"])(n)&&n>0)return p.a.createElement("p",null,ka.t("However, there {numOfMessageResults, plural, =1 {is one message} other {are several messages}} related to your search.",{numOfMessageResults:n}),"\xa0",p.a.createElement(Re["a"],{className:"c-search_no_results__tab_link",onClick:this.setTab},ka.t("See messages")));return p.a.createElement("p",null,ka.t("Slack couldn\u2019t find any results related to your search."))}},{key:"render",value:function e(){return p.a.createElement("div",{className:"c-search_no_results"},p.a.createElement("h2",{className:"c-search__section_header"},"messages"===this.props.type?ka.t("No message results"):ka.t("No file results")),p.a.createElement(_a,{type:this.props.type}),this.renderMessage())}}]);return t}(d["PureComponent"]);Ea.displayName="NoResults";Ea.defaultProps=wa;var Ca={setTab:ca["a"]};var ja=Object(g["connect"])(null,Ca)(Ea);var Sa={errorType:m.a.string.isRequired,onClickRefreshSearch:m.a.func.isRequired};var Ia={};var Ta=new U["b"]("search");function Na(e){var t=e.errorType,a=e.onClickRefreshSearch;if(t===b["MODULE_ERROR_STATE"].None)return null;var n=void 0;var r=void 0;var i=void 0;switch(t){case b["MODULE_ERROR_STATE"].NoQuery:n=Ta.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"});r=Ta.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"});i=false;break;default:n=Ta.t("Something went wrong");r=Ta.t("For some reason, Slack wasn\u2019t able to complete your search.");i=true}return p.a.createElement("div",{className:"c-search_no_results"},p.a.createElement("h2",{className:"c-search__section_header"},n),p.a.createElement("p",null,r,"\xa0",i&&p.a.createElement(Re["a"],{onClick:a},Ta.t("Try again"))))}Na.displayName="Error";Na.defaultProps=Ia;var Aa=Na;var Ra=new U["b"]("search");var Ma={onClick:m.a.func.isRequired};function xa(e){return p.a.createElement("div",{className:"c-search__back_to_filters"},p.a.createElement(H["d"],{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},p.a.createElement(W["b"],{type:"arrow-up-medium"}),"\xa0",Ra.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}xa.displayName="BackToFiltersButton";var Pa=xa;var Da=a(255);var Fa=a(177);var La=a(484);var Ba={id:m.a.any.isRequired,focused:m.a.bool.isRequired,onFocusEnter:m.a.func.isRequired,onFocusLeave:m.a.func.isRequired,onSelect:m.a.func.isRequired,ariaLabel:m.a.string.isRequired,children:m.a.any.isRequired};var Ua=function(e){u()(t,e);function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(w["bindAll"])(e,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]);e.focusedAfterUpdate=false;return e}o()(t,[{key:"componentDidUpdate",value:function e(t){if(!t.focused&&this.props.focused&&this.container){this.focusedAfterUpdate=true;this.container.focus()}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;if(a&&"mousedown"===a.type)return;this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate});this.focusedAfterUpdate&&(this.focusedAfterUpdate=false)}},{key:"onFocusLeave",value:function e(){this.props.onFocusLeave({id:this.props.id})}},{key:"onKeyDown",value:function e(t){t.keyCode===La["codes"].enter&&t.target===this.container&&this.props.onSelect(t,this.props.id)}},{key:"setContainerRef",value:function e(t){this.container=t}},{key:"render",value:function e(){var t=this.props,a=t.ariaLabel,n=t.focused,r=t.children;return p.a.createElement(Da["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},p.a.createElement("div",{tabIndex:"-1",className:v()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":n}),ref:this.setContainerRef,role:"listitem","aria-label":a,onKeyDown:this.onKeyDown},r))}}]);return t}(d["PureComponent"]);Ua.displayName="FocusManagedListItem";var qa=Ua;function Ga(e,t,a,n){if(0===e.length)return null;if(null===t&&null!==a)return a;var r=e.indexOf(t);var i=r+n;i>=e.length?i=e.length-1:-1===r&&n<0?i=e.length-1:i<0&&(i=0);return e[i]}var Ha=a(1943);var Wa={ids:m.a.array.isRequired,renderItem:m.a.func.isRequired,itemAriaLabel:m.a.func.isRequired,onSelectItem:m.a.func};var Va={onSelectItem:w["noop"]};var za=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]);a.state={activeItem:null};a.inferredActiveItem=null;a.containerRef=null;a.keyCommands=null;return a}o()(t,[{key:"onArrowKeyDown",value:function e(t){var a=this;t.preventDefault();var n=0;t.keyCode===La["codes"].up&&(n=-1);t.keyCode===La["codes"].down&&(n=1);0!==n&&this.setState(function(){return{activeItem:Ga(a.props.ids,a.state.activeItem,a.inferredActiveItem,n)}})}},{key:"onItemFocusEnter",value:function e(t){var a=t.id,n=t.isLifeCycleUpdate;if(n)return;this.inferredActiveItem=a;this.setState(function(){return{activeItem:null}})}},{key:"onItemFocusLeave",value:function e(t){var a=t.id;this.setState(function(e){var t=e.activeItem;return{activeItem:t===a?null:t}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:null}});this.inferredActiveItem=null}},{key:"setContainerRef",value:function e(t){this.containerRef=t;if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}if(this.containerRef){var a=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:true}];this.keyCommands=new Fa["a"](this.containerRef);this.keyCommands.bindAll(a)}}},{key:"focus",value:function e(){this.containerRef&&this.containerRef.focus()}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.ids,r=a.itemAriaLabel,i=a.renderItem,o=a.onSelectItem;return p.a.createElement(Da["a"],{onFocusLeave:this.onFocusLeave},p.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},n.map(function(e){return p.a.createElement(qa,{key:e,id:e,ariaLabel:r(e),focused:t.state.activeItem===e,onFocusEnter:t.onItemFocusEnter,onFocusLeave:t.onItemFocusLeave,onSelect:o},i(e))})))}}]);return t}(d["PureComponent"]);za.displayName="FocusManagedList";za.defaultProps=Va;var Qa=za;var Ka=Qa;var Ya=new U["b"]("search");var Ja="IMPROVED_SEARCH";var Za={close:m.a.func.isRequired,clogSearchClick:m.a.func.isRequired,getMessageResultSummary:m.a.func.isRequired,previewFile:m.a.func.isRequired,currentTeam:m.a.object.isRequired,isScrolledTop:m.a.bool.isRequired,requestQuery:m.a.string.isRequired,relevantResults:m.a.object,recentResults:m.a.object,relevantState:m.a.object,recentState:m.a.object,setPageForModule:m.a.func.isRequired,fetchSearchResultsByModule:m.a.func.isRequired,displayModelOrViewById:m.a.func.isRequired,messageSort:m.a.string.isRequired,setMessageSort:m.a.func.isRequired,setScrollPosition:m.a.func.isRequired,showThread:m.a.func.isRequired,startWithScrollPosition:m.a.number.isRequired,onClickRefreshSearch:m.a.func.isRequired,numOfFileResults:m.a.number,logInfo:m.a.func,jumpToPermalink:m.a.func.isRequired,isDebugInfoVisible:m.a.bool.isRequired,usePrimarySearch:m.a.bool.isRequired,secondaryView:m.a.string.isRequired};var Xa={relevantResults:{},recentResults:{},relevantState:{},recentState:{},numOfFileResults:void 0,logInfo:w["noop"]};var $a=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["setCurrentFilter","pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","setWrapperRef","setListRef","reportScrollPosition","renderSortToggleMenu","handleTopScrollElementRef","scrollTop"]);a.markSearchModuleRenderStart=Object(w["throttle"])(function(){var e=a.getVisibleResults();Object(K["f"])("messages",a.props.messageSort,e&&e.pagination&&e.pagination.page||1)},2e3,{leading:true});return a}o()(t,[{key:"componentDidMount",value:function e(){this.props.startWithScrollPosition&&(this.wrapperEl.scrollTop=this.props.startWithScrollPosition)}},{key:"onRepliesClick",value:function e(t){var a=t.channelId,n=t.ts;this.props.logInfo(Ja,"Jumping to message replies. channel: "+a+" ts: "+n);this.props.showThread({channelId:a,threadTs:n});this.props.close()}},{key:"onSelectItem",value:function e(t,a){var n=this.getVisibleMessages()[a];if(n&&n.messages&&n.messages.length){var r=n.messages[0];this.jumpToMessage({permalink:r.permalink,teamId:this.props.currentTeam.id})}}},{key:"getVisibleResults",value:function e(){return this.props.messageSort===j["a"].recentMessages?this.props.recentResults:this.props.relevantResults}},{key:"getVisibleMessages",value:function e(){return this.getVisibleResults().items[this.getVisibleUIState().page]}},{key:"getVisibleUIState",value:function e(){return this.props.messageSort===j["a"].recentMessages?this.props.recentState:this.props.relevantState}},{key:"setWrapperRef",value:function e(t){this.wrapperEl=t}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setCurrentFilter",value:function e(t){this.props.setMessageSort({messageSort:t})}},{key:"reportScrollPosition",value:function e(){this.props.setScrollPosition(this.wrapperEl.scrollTop)}},{key:"handleTopScrollElementRef",value:function e(t){this.topScrollElementRef=t}},{key:"scrollTop",value:function e(){this.props.logInfo(Ja,"Scrolling to top of results page");if(this.topScrollElementRef){this.props.setScrollPosition(0);this.topScrollElementRef.scrollIntoView()}}},{key:"jumpToMessage",value:function e(t){var a=this;var n=t.teamId,r=t.permalink;this.props.logInfo(Ja,"Jumping to message. team: "+n+" permalink: "+r);this.props.jumpToPermalink({permalink:r}).then(function(){return a.props.close()}).catch(function(){return a.props.logInfo(Ja,"FAILED:(")})}},{key:"jumpToFile",value:function e(t,a){var n=a.file,r=a.iid,i=a.ts,o=a.channelId,s=a.userId,l=a.botId;this.props.logInfo(Ja,"Jumping to file. file: "+n.id);this.props.clogSearchClick({type:"file",iid:r,ts:i,channelId:o,userId:s,botId:l,extraArguments:{click_file_id:n.id}});this.props.previewFile({fileId:n.id});this.props.close()}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(Ja,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(Ja,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var a=this.getVisibleResults();var n=this.getVisibleUIState();var r=Math.max(n.page+t,1);if(a.items[r])this.props.setPageForModule({moduleType:this.props.messageSort,page:r});else{this.props.logInfo(Ja,"Fetching more results to display on next page");this.props.fetchSearchResultsByModule({module:this.props.messageSort,apiModule:"messages",sort:this.props.messageSort===j["a"].recentMessages?"timestamp":"score",query:this.props.requestQuery,page:r})}}},{key:"renderLoading",value:function e(){var t=this.getVisibleUIState();if(t.loading)return p.a.createElement(q["a"],{size:"large"});return null}},{key:"renderError",value:function e(){var t=this.getVisibleUIState();if(t.error===b["MODULE_ERROR_STATE"].None)return null;return p.a.createElement(Aa,{errorType:t.error,onClickRefreshSearch:this.props.onClickRefreshSearch})}},{key:"renderResults",value:function e(){var t=this;var a=this.getVisibleUIState();var n=[];var r=[];if(!a.loading){n=this.getVisibleMessages();r=Object(w["map"])(n,function(e,t){return t})||[]}return p.a.createElement(Ka,{ref:this.setListRef,ids:r,onSelectItem:this.onSelectItem,itemAriaLabel:function e(a){return t.props.getMessageResultSummary(n[a])},renderItem:function e(a){return p.a.createElement(ut,O()({key:n[a].iid},n[a],{onMessageJump:t.jumpToMessage,onFileJump:t.jumpToFile,onRepliesClick:t.onRepliesClick}))}})}},{key:"renderSortToggleMenu",value:function e(t){var a=this;return p.a.createElement(G["f"],t,p.a.createElement(G["b"],{key:"recent",label:Ya.t("Most recent"),onSelected:function e(){return a.props.setMessageSort({messageSort:j["a"].recentMessages})}}),p.a.createElement(G["b"],{key:"relevant",label:Ya.t("Most relevant"),onSelected:function e(){return a.props.setMessageSort({messageSort:j["a"].relevantMessages})}}))}},{key:"renderSortToggle",value:function e(){var t=this.props.messageSort;var a=t===j["a"].recentMessages?Ya.t("Most recent"):Ya.t("Most relevant");return p.a.createElement("div",{className:"c-search__section_more_link"},p.a.createElement(G["e"],{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement(H["c"],null,a," ",p.a.createElement(W["b"],{type:"chevron-down",inline:true}))))}},{key:"renderMessageLimitBanner",value:function e(){var t=this.getVisibleUIState();if(t.loading)return null;return p.a.createElement(_a,{type:"messages"})}},{key:"renderDebug",value:function e(){var t=this.props.isDebugInfoVisible;var a=this.getVisibleResults();var n=t&&a.debug;var r=n&&JSON.stringify(a.debug,null,2);return n&&p.a.createElement("div",{className:"c-search__debug"},p.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),p.a.createElement("pre",{className:"c-search__debug_json"},r),p.a.createElement(H["d"],{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function e(){return Object(Q["writeText"])(r)}},"Copy to clipboard"))}},{key:"renderSearchResults",value:function e(){var t=this.props.messageSort===j["a"].recentMessages?this.props.recentState:this.props.relevantState;var a=this.getVisibleResults();var n=a&&a.pagination&&a.pagination.total_count||0;var r=this.getVisibleUIState();var i=a&&a.pagination&&a.pagination.page_count||0;var o=i>1&&!r.loading;var s=t.page||1;var l=a&&a.pagination&&a.pagination.per_page||0;var c=a&&a.items&&a.pagination&&a.pagination.page&&a.items[a.pagination.page]&&a.items[a.pagination.page].length||0;var u="message";var d=n?Ya.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:n,totalItemCountStr:n>=1e4?Object(V["a"])(n,{decimal_places:0,lowercase:true}):Object(z["a"])(n)}):null;return p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},d,this.renderSortToggle()),this.renderDebug(),this.renderMessageLimitBanner(),this.renderResults(),this.renderLoading(),p.a.createElement(ht,{visible:o,currentPageOffset:s,totalPageCount:i,maxPerPageItemCount:l,pageItemCount:c,totalItemCount:n,itemType:u,onForward:this.pageForward,onBack:this.pageBack}))}},{key:"renderNoResults",value:function e(){return p.a.createElement("div",{className:"c-search__section c-search__main"},this.renderDebug(),p.a.createElement(ja,{query:this.props.requestQuery,type:"messages",numOfFileResults:this.props.numOfFileResults}))}},{key:"renderState",value:function e(){var t=this.getVisibleUIState();if(t.error!==b["MODULE_ERROR_STATE"].None)return this.renderError();var a=this.getVisibleResults();var n=a&&a.pagination&&a.pagination.total_count||0;if(0===n&&!t.loading)return this.renderNoResults();return this.renderSearchResults()}},{key:"render",value:function e(){var t=this.getVisibleUIState();t.loading||this.markSearchModuleRenderStart();var a=this.props.isScrolledTop;var n=!this.props.usePrimarySearch||!this.props.secondaryView;return p.a.createElement("div",{className:v()("c-search__view",{"c-search__view--hide_filters":!n}),id:"c-search__tab__messages",onScroll:this.reportScrollPosition,ref:this.setWrapperRef,role:"tabpanel"},this.renderState(),n&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"c-search__extras",ref:this.handleTopScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},Ya.t("Filter by")),p.a.createElement(la,null))),!a&&p.a.createElement(Pa,{onClick:this.scrollTop})))}}]);return t}(d["PureComponent"]);$a.displayName="MessageView";$a.defaultProps=Xa;var en=function e(t){var a=Object(S["getCurrentTeam"])(t);var n=Object(I["getRequestQuery"])(t);var r=Object(I["getResponseModule"])(t,{module:j["a"].relevantMessages})||{items:{}};var i=Object(I["getResponseModule"])(t,{module:j["a"].recentMessages})||{items:{}};var o=Object(b["getModuleState"])(t,j["a"].relevantMessages);var s=Object(b["getModuleState"])(t,j["a"].recentMessages);var l=Object(j["b"])(t);var c=Object(I["getResponseModule"])(t,{module:"files"})||{items:{}};var u=c.pagination&&c.pagination.total_count;var d=Object(ue["isScreenReaderEnabled"])(t);var p=function e(a){if(!d)return null;return ce(t,a)};return{requestQuery:n,relevantResults:r,recentResults:i,relevantState:o,recentState:s,messageSort:l,currentTeam:a,numOfFileResults:u,getMessageResultSummary:p,logInfo:Object(C["a"])({state:t}).info,isDebugInfoVisible:Object(b["getIsDebugInfoVisible"])(t),usePrimarySearch:Object(_["a"])(t),secondaryView:Object(ye["getSecondaryView"])(t)}};var tn={clogSearchClick:B,jumpToPermalink:_e,previewFile:R["c"],displayModelOrViewById:N["a"],fetchSearchResultsByModule:T["c"],setMessageSort:j["c"],setPageForModule:b["setPageForModule"],showThread:R["g"],close:function e(){return A["a"].apply(void 0,arguments)}};var an=Object(g["connect"])(en,tn)($a);var nn=a(980);var rn=new U["b"]("search");var on=/[\ue000\ue001]/g;function sn(e,t){if(!t)return null;var a=t.pretty_type,n=t.name,r=t.timestamp,i=t.user;var o=Object(J["g"])(Object(J["j"])(r,{returnMoment:true}),{shortenMonth:false,excludeYear:Object(J["f"])(r)});return Object(w["unescape"])(rn.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:a,fileName:n.replace(on,""),user:Object(X["a"])(e,{userId:i}),date:o}))}var ln=new U["b"]("search");var cn="IMPROVED_SEARCH";var un={close:m.a.func.isRequired,isScrolledTop:m.a.bool.isRequired,previewFile:m.a.func.isRequired,getFileResultSummary:m.a.func.isRequired,loading:m.a.bool,error:m.a.string.isRequired,fileResults:m.a.object,fileState:m.a.object,fetchSearchResultsByModule:m.a.func.isRequired,setPageForModule:m.a.func.isRequired,requestQuery:m.a.string,setScrollPosition:m.a.func.isRequired,startWithScrollPosition:m.a.number.isRequired,clogSearchClick:m.a.func,onClickRefreshSearch:m.a.func.isRequired,numOfMessageResults:m.a.number,logInfo:m.a.func,usePrimarySearch:m.a.bool.isRequired,secondaryView:m.a.string.isRequired};var dn={loading:false,fileResults:{},fileState:{},requestQuery:"",clogSearchClick:w["noop"],numOfMessageResults:void 0,logInfo:w["noop"]};var pn=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["pageForward","pageBack","pageSearchResults","setWrapperRef","setListRef","reportScrollPosition","onFileClick","onSelectItem","handleTopScrollElementRef","scrollTop"]);a.markSearchModuleRenderStart=Object(w["throttle"])(function(){var e=a.props.fileResults;Object(K["f"])("files","score",e&&e.pagination&&e.pagination.page||1)},2e3,{leading:true});return a}o()(t,[{key:"componentDidMount",value:function e(){this.props.startWithScrollPosition&&(this.wrapperEl.scrollTop=this.props.startWithScrollPosition)}},{key:"onFileClick",value:function e(t,a){var n=a.file,r=a.index;this.props.logInfo(cn,"Jumping to file. file: "+n.id);this.props.clogSearchClick({type:"file",iid:n.iid,userId:n.user,extraArguments:{click_file_id:n.id,click_position:r}});this.props.previewFile({fileId:n.id});this.props.close()}},{key:"onSelectItem",value:function e(t,a){var n=this.getVisibleFiles()[a];this.onFileClick(t,{file:n,index:a})}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setWrapperRef",value:function e(t){this.wrapperEl=t}},{key:"getVisibleFiles",value:function e(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"pageForward",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(cn,"Page forwards in search results");this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.listEl&&this.listEl.focus();this.scrollTop();this.props.logInfo(cn,"Page backwards in search results");this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,n=a.fileState,r=a.fileResults;var i=Math.max(n.page+t,1);r.items[i]?this.props.setPageForModule({moduleType:"files",page:i}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",query:this.props.requestQuery,page:i})}},{key:"reportScrollPosition",value:function e(){this.props.setScrollPosition(this.wrapperEl.scrollTop)}},{key:"handleTopScrollElementRef",value:function e(t){this.topScrollElementRef=t}},{key:"scrollTop",value:function e(){this.props.logInfo(cn,"Scrolling to top of results page");if(this.topScrollElementRef){this.props.setScrollPosition(0);this.topScrollElementRef.scrollIntoView()}}},{key:"renderLoading",value:function e(){if(this.props.loading)return p.a.createElement(q["a"],{size:"large"});return null}},{key:"renderMessageLimitBanner",value:function e(){if(this.props.loading)return null;return p.a.createElement(_a,{type:"files"})}},{key:"renderFiles",value:function e(){var t=this;var a=this.props,n=a.fileState,r=a.fileResults;var i=[];var o=[];if(r.items[n.page||1]){this.markSearchModuleRenderStart();i=this.getVisibleFiles();o=i.map(function(e,t){return t})}return p.a.createElement(Ka,{ref:this.setListRef,ids:o,onSelectItem:this.onSelectItem,renderItem:function e(a){return p.a.createElement(nn["a"],{key:i[a].id,index:a,file:i[a],onClick:t.onFileClick})},itemAriaLabel:function e(a){return t.props.getFileResultSummary(i[a])}})}},{key:"renderSearchResults",value:function e(){var t=this.props,a=t.fileState,n=t.fileResults;var r=n&&n.pagination&&n.pagination.total_count||0;var i=n&&n.pagination&&n.pagination.page_count||0;var o=i>1&&!this.props.loading;var s=a.page||1;var l=n&&n.pagination&&n.pagination.per_page||0;var c=n&&n.items&&n.pagination&&n.pagination.page&&n.items[n.pagination.page]&&n.items[n.pagination.page].length||0;var u="file";var d=r?ln.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:r,totalItemCountStr:r>=1e4?Object(V["a"])(r,{decimal_places:0,lowercase:true}):Object(z["a"])(r)}):null;return p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},d),this.renderMessageLimitBanner(),this.renderFiles(),this.renderLoading(),p.a.createElement(ht,{visible:o,currentPageOffset:s,totalPageCount:i,maxPerPageItemCount:l,pageItemCount:c,totalItemCount:r,itemType:u,onForward:this.pageForward,onBack:this.pageBack}))}},{key:"renderNoResults",value:function e(){return p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement(ja,{query:this.props.requestQuery,type:"files",numOfMessageResults:this.props.numOfMessageResults}))}},{key:"renderError",value:function e(){if(this.props.error===b["MODULE_ERROR_STATE"].None)return null;return p.a.createElement(Aa,{errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch})}},{key:"renderState",value:function e(){var t=this.props.fileResults;if(this.props.error!==b["MODULE_ERROR_STATE"].None)return this.renderError();var a=t&&t.pagination&&t.pagination.total_count||0;if(0===a&&!this.props.loading)return this.renderNoResults();return this.renderSearchResults()}},{key:"render",value:function e(){this.props.loading||this.markSearchModuleRenderStart();var t=this.props.isScrolledTop;var a=!this.props.usePrimarySearch||!this.props.secondaryView;return p.a.createElement("div",{className:v()("c-search__view",{"c-search__view--hide_filters":!a}),id:"c-search__tab_file",onScroll:this.reportScrollPosition,ref:this.setWrapperRef,role:"tabpanel"},this.renderState(),a&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"c-search__extras",ref:this.handleTopScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},ln.t("Filter by")),p.a.createElement(la,{showFileFilters:true}))),!t&&p.a.createElement(Pa,{onClick:this.scrollTop})))}}]);return t}(d["PureComponent"]);pn.displayName="FileView";pn.defaultProps=dn;var fn=function e(t){var a=Object(I["getRequestQuery"])(t);var n=Object(I["getResponseModule"])(t,{module:"files"})||{items:[]};var r=Object(b["getModuleState"])(t,"files");var i=Object(I["getResponseModule"])(t,{module:"relevantMessages"})||{items:{}};var o=i.pagination&&i.pagination.total_count;var s=Object(ue["isScreenReaderEnabled"])(t);var l=function e(a){if(!s)return null;return sn(t,a)};return{requestQuery:a,fileResults:n,fileState:r,numOfMessageResults:o,getFileResultSummary:l,loading:r&&r.loading,error:r&&r.error,logInfo:Object(C["a"])({state:t}).info,usePrimarySearch:Object(_["a"])(t),secondaryView:Object(ye["getSecondaryView"])(t)}};var mn={setPageForModule:b["setPageForModule"],fetchSearchResultsByModule:T["c"],clogSearchClick:B,previewFile:R["c"],close:function e(){return A["a"].apply(void 0,arguments)}};var hn=Object(g["connect"])(fn,mn)(pn);var vn=a(3480);var gn=a(751);var bn=a(22);var _n=a(25);var yn=Object(bn["a"])("A search endpoint for the Channel Discovery SLI prototype",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.query,r=void 0===n?"":n;e(Object(_n["a"])({method:"search.modules",args:{module:"channels",query:r}})).then(function(t){e(Object(gn["setChannels"])({channels:t.items}))})});yn.propTypes={query:m.a.string};var kn=a(1946);var On={channels:m.a.arrayOf(m.a.object),requestQuery:m.a.string,searchChannels:m.a.func.isRequired};var wn={channels:[],requestQuery:""};var En=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"componentDidMount",value:function e(){this.props.searchChannels({query:this.props.requestQuery})}},{key:"renderResults",value:function e(){var t=this.props.channels;if(!t)return null;return p.a.createElement("div",{className:"p-channel_search__channels"},E.a.map(t,this.renderChannel))}},{key:"renderChannel",value:function e(t){var a=t.name,n=t.id;return p.a.createElement("div",{key:n,className:"p-channel_search__channel"},a)}},{key:"render",value:function e(){return p.a.createElement("div",{className:"p-channel_search"},this.renderResults())}}]);return t}(d["PureComponent"]);En.displayName="ChannelViewPrototype";En.defaultProps=wn;var Cn=function e(t){return{requestQuery:Object(I["getRequestQuery"])(t),featureSliChannelSearch:Object(me["isFeatureEnabled"])(t,"feature_sli_channel_search"),channels:Object(gn["getChannels"])(t)}};var jn={searchChannels:yn};var Sn=Object(g["connect"])(Cn,jn)(En);var In=a(1948);var Tn={};var Nn={};var An=function(e){u()(t,e);function t(){r()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o()(t,[{key:"render",value:function e(){return p.a.createElement("div",{className:"p-user_search"},"This is the user search result page.")}}]);return t}(d["PureComponent"]);An.displayName="UserViewPrototype";An.defaultProps=Nn;var Rn=function e(t){return{featureSliUserSearch:Object(me["isFeatureEnabled"])(t,"feature_sli_user_search")}};var Mn=Object(g["connect"])(Rn)(An);var xn=a(1352);var Pn={tab:m.a.string.isRequired,scrollPosition:m.a.object.isRequired,setScrollPosition:m.a.func.isRequired,onClickRefreshSearch:m.a.func.isRequired,featureSliChannelSearch:m.a.bool,featureSliUserSearch:m.a.bool,usePrimarySearch:m.a.bool};var Dn={featureSliChannelSearch:false,featureSliUserSearch:false,usePrimarySearch:false};var Fn=300;var Ln=function(e){u()(t,e);function t(e){r()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={messagesScrolledTop:e.scrollPosition.messages<Fn,filesScrolledTop:e.scrollPosition.files<Fn};a.setMessageScrollPosition=a.setScrollPosition.bind(a,"messages");a.setFileScrollPosition=a.setScrollPosition.bind(a,"files");a.scrollPosition=e.scrollPosition;return a}o()(t,[{key:"componentWillUnmount",value:function e(){this.props.setScrollPosition({scrollPosition:this.scrollPosition})}},{key:"setScrollPosition",value:function e(t,a){this.scrollPosition[t]=a;var n="messages"===t&&(a<Fn||true===this.state.messagesScrolledTop);n&&this.setState(function(){return{messagesScrolledTop:a<Fn}});var r="files"===t&&(a<Fn||true===this.state.filesScrolledTop);r&&this.setState(function(){return{filesScrolledTop:a<Fn}})}},{key:"renderCurrentView",value:function e(){if(this.props.featureSliChannelSearch&&"channels"===this.props.tab)return p.a.createElement(Sn,null);if(this.props.featureSliUserSearch&&"users"===this.props.tab)return p.a.createElement(Mn,null);switch(this.props.tab){case"messages":return p.a.createElement(an,{isScrolledTop:this.state.messagesScrolledTop,setScrollPosition:this.setMessageScrollPosition,startWithScrollPosition:this.scrollPosition.messages,onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return p.a.createElement(hn,{isScrolledTop:this.state.filesScrolledTop,setScrollPosition:this.setFileScrollPosition,startWithScrollPosition:this.scrollPosition.files,onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function e(){var t=v()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(y["a"])(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(y["a"])()});return p.a.createElement("div",{className:t},p.a.createElement("div",{className:"c-search"},!this.props.usePrimarySearch&&p.a.createElement(vn["a"],null),this.renderCurrentView()))}}]);return t}(d["PureComponent"]);Ln.displayName="SearchView";Ln.defaultProps=Dn;var Bn=function e(t){return{tab:Object(b["getTab"])(t),visible:Object(b["getVisible"])(t),scrollPosition:Object(b["getScrollPosition"])(t),usePrimarySearch:Object(_["a"])(t)}};var Un={setScrollPosition:b["setScrollPosition"]};var qn=t["a"]=Object(g["connect"])(Bn,Un)(Ln)},function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(0);var c=a.n(l);var u=a(11);var d=a(1418);var p=a(15);var f=a.n(p);var m=a(21);var h=a(10);var v=a(27);var g=a(63);var b=a(3);var _=a.n(b);var y=a(5);var k=a.n(y);var O=a(6);var w=a.n(O);var E=a(7);var C=a.n(E);var j=a(8);var S=a.n(j);var I=a(2);var T=a(18);var N=a(54);var A=a(366);var R=a(717);var M=a(509);var x=a(23);var P=a(17);var D=a(164);var F=a(177);var L=a(75);var B=a(819);var U=a(897);var q=a(20);var G=a(41);var H=300;var W={children:c.a.node,className:c.a.string,disabled:c.a.bool,tooltip:c.a.oneOfType([c.a.string,c.a.func]),"aria-label":c.a.string.isRequired,onClick:c.a.func.isRequired,onTrigger:c.a.func};var V={children:null,className:void 0,disabled:false,tooltip:void 0,onTrigger:I["noop"]};var z=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseDown=a.onMouseDown.bind(a);a.onMouseUp=a.onMouseUp.bind(a);a.pressTimer=void 0;return a}w()(t,[{key:"componentWillUnmount",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function e(t){var a=this;if(this.props.disabled)return;if(0!==t.button)return;t.persist();this.pressTimer=setTimeout(function(){return a.props.onTrigger(t)},H);window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function e(){var t=this.props,a=t.disabled,n=t.tooltip,i=t["aria-label"];var o=f()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":a});var s=function e(t){var n=t.tip,i=t.children;if(a||!n)return i;return r.a.createElement(G["d"],{tip:n,delay:800,position:"bottom",offsetY:ur,tipClassName:"p-global_nav__top_history_tip"},i)};return r.a.createElement(s,{tip:n},r.a.createElement(q["c"],{className:o,disabled:a,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":i},this.props.children))}}]);return t}(n["PureComponent"]);z.displayName="HistoryButton";z.defaultProps=V;var Q=z;var K=a(151);var Y=new h["b"]("global_nav");var J={viewId:c.a.string,viewName:c.a.string,teamId:c.a.string,teamName:c.a.string,teamIcon:c.a.string,currentTeamId:c.a.string,featureGlobalNav:c.a.bool,featureThreadsCopyChange:c.a.bool};var Z={viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:false,featureThreadsCopyChange:false};var X=function(e){S()(t,e);function t(){k()(this,t);return C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}w()(t,[{key:"renderTeamIcon",value:function e(){var t=this.props,a=t.teamIcon,n=t.teamName;return r.a.createElement(G["d"],{tip:n,position:"bottom",zIndex:"above_fs"},r.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+a+")"}}))}},{key:"renderThreads",value:function e(){var t=this.props,a=t.teamId,i=t.currentTeamId,o=t.featureGlobalNav,s=t.featureThreadsCopyChange;if(!o)return null;var l=a===i?r.a.createElement(T["b"],{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var c=s?Y.t("Threads"):Y.t("All Threads");return r.a.createElement(n["Fragment"],null,l,c)}},{key:"renderUnreads",value:function e(){var t=this.props,a=t.teamId,i=t.currentTeamId,o=t.featureGlobalNav;if(!o)return null;var s=a===i?r.a.createElement(T["b"],{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Y.t("All Unreads");return r.a.createElement(n["Fragment"],null,s,l)}},{key:"render",value:function e(){var t=this.props,a=t.viewId,i=t.viewName,o=t.teamId,s=t.currentTeamId;if("Vall_threads"===a)return this.renderThreads();if("Vall_unreads"===a)return this.renderUnreads();if(o===s)return r.a.createElement(K["a"],{channelId:a,className:"p-global_nav__top_history_item_channel_name"});return r.a.createElement(n["Fragment"],null,this.renderTeamIcon(),i)}}]);return t}(n["Component"]);X.displayName="HistoryItem";X.defaultProps=Z;var $=function e(t){return{currentTeamId:Object(x["getTeamId"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),featureThreadsCopyChange:Object(u["isFeatureEnabled"])(t,"feature_threads_copy_change")}};var ee=Object(i["connect"])($)(X);var te=new h["b"]("global_nav");var ae={history:c.a.object.isRequired,currentTeamId:c.a.string,back:c.a.func,forward:c.a.func,index:c.a.func,sync:c.a.func,action:c.a.func,featureGlobalNav:c.a.bool,featureThreadsCopyChange:c.a.bool,clogger:c.a.object.isRequired};var ne={currentTeamId:void 0,back:I["noop"],forward:I["noop"],index:I["noop"],sync:I["noop"],action:c.a.func,featureGlobalNav:false,featureThreadsCopyChange:false};var re=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);a.onForwardClick=a.onForwardClick.bind(a);a.renderBackMenu=a.renderBackMenu.bind(a);a.renderForwardMenu=a.renderForwardMenu.bind(a);a.renderBackTooltip=a.renderBackTooltip.bind(a);a.renderForwardTooltip=a.renderForwardTooltip.bind(a);return a}w()(t,[{key:"componentDidMount",value:function e(){var t=this;window.requestIdleCallback&&window.requestIdleCallback(function(){return t.props.sync()});var a=Object(v["isWindows"])();var n=[{keys:a?"alt+left":["command+[","command+left"],handler:function e(a){if(t.shouldPreventShortcut(a))return;a.preventDefault();t.props.action("GLOBAL-NAV","Navigating back in history with key command");t.props.back();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}})}},{keys:a?"alt+right":["command+]","command+right"],handler:function e(a){if(t.shouldPreventShortcut(a))return;a.preventDefault();t.props.action("GLOBAL-NAV","Navigating forward in history with key command");t.props.forward();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}})}}];if(L["isDesktop"]){this.keyCommands||(this.keyCommands=new F["a"]);this.keyCommands.bindAll(n)}}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function e(){this.props.back();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function e(){this.props.forward();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function e(t){if(t.metaKey&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){var a=Object(B["a"])()&&Object(U["b"])(document.activeElement)||document.activeElement===document.body;if(!a)return true}return false}},{key:"renderStackMenu",value:function e(t,a){var n=this;var i=function e(t){return t.viewId+":"+t.teamId};var o=Object(I["uniqBy"])(t,i);var s=o.map(function(e){return{label:r.a.createElement(ee,e),key:i(e),click:function t(){n.props.index({target:e.index});n.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return r.a.createElement(N["a"],_()({},a,{template:s}))}},{key:"renderBackMenu",value:function e(t){var a=Object(M["a"])(this.props.history);if(!a)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}});return this.renderStackMenu(a.reverse(),t)}},{key:"renderForwardMenu",value:function e(t){var a=Object(M["b"])(this.props.history);if(!a)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}});return this.renderStackMenu(a,t)}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(v["isMac"])()?"\u2318[":te.t("Alt+Left Arrow");return r.a.createElement(n["Fragment"],null,te.t("Go back"),r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(v["isMac"])()?"\u2318]":"Alt+Right Arrow";return r.a.createElement(n["Fragment"],null,te.t("Go forward"),r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"render",value:function e(){var t=this.props,a=t.history,i=t.featureGlobalNav;if(!i)return null;if(!L["isDesktop"])return null;var o=!Object(M["a"])(a)||!Object(M["a"])(a).length;var s=!Object(M["b"])(a)||!Object(M["b"])(a).length;var l={position:"bottom-left",offsetX:-12,offsetY:dr,customTrigger:true};return r.a.createElement(n["Fragment"],null,r.a.createElement(N["e"],_()({renderMenu:this.renderBackMenu},l),r.a.createElement(Q,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:o,tooltip:this.renderBackTooltip,"aria-label":te.t("Go back")},r.a.createElement(T["b"],{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),r.a.createElement(N["e"],_()({renderMenu:this.renderForwardMenu},l),r.a.createElement(Q,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:s,tooltip:this.renderForwardTooltip,"aria-label":te.t("Go forward")},r.a.createElement(T["b"],{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]);return t}(n["Component"]);re.displayName="History";re.defaultProps=ne;var ie=function e(t){return{history:Object(A["getNavigationHistory"])(t),currentTeamId:Object(x["getTeamId"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),featureThreadsCopyChange:Object(u["isFeatureEnabled"])(t,"feature_threads_copy_change"),action:Object(P["a"])({state:t}).action,clogger:Object(D["a"])({state:t})}};var oe={back:R["a"],forward:R["b"],index:R["c"],sync:R["f"]};var se=Object(i["connect"])(ie,oe)(re);var le=a(50);var ce=a(48);var ue=a(3493);var de=a(32);var pe=a.n(de);var fe=a(22);var me=a(25);var he={},ve=he.refetchAuth;var ge=Object(fe["a"])("Sign out of the current session",function(e,t){return e(Object(me["a"])({method:"auth.signout",args:{}})).then(function(){if(Object(g["a"])()){ve();return}window.location.reload()}).catch(function(e){Object(P["a"])({getState:t}).error("got error when trying to sign out: "+e);throw e})});var be=a(821);var _e=a(13);var ye=Object(_e["c"])("TS.ui.enterprise_shared_channels_invites.start");var ke=a(1097);var Oe=Object(_e["c"])("TS.ui.prefs_dialog.start",function(){return null});var we={start:Oe};var Ee=Object(_e["c"])("TS.ui.workspaces.start");var Ce=Object(_e["c"])("TS.help_modal.start");var je=a(763);var Se=Object(_e["c"])("TS.magic_login.execute");var Ie={name:c.a.string.isRequired,org:c.a.string,icon:c.a.string,url:c.a.string};var Te={org:void 0,icon:void 0,url:void 0};var Ne=function e(t){var a=t.name,n=t.icon,i=t.org,o=t.url;return r.a.createElement("div",{className:"p-global_nav__top_menu_header"},r.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:n&&"url("+n+")"}}),r.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},r.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),r.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||o)))};Ne.displayName="TeamHeader";Ne.defaultProps=Te;var Ae=function e(t){var a=Object(le["getCurrentTeam"])(t);return{name:Object(ce["getTeamDisplayName"])(a),org:a.enterprise_name,icon:a.icon&&a.icon.image_88||void 0,url:a.domain+".slack.com"}};var Re=Object(i["connect"])(Ae)(Ne);var Me=a(26);var xe=a(1398);var Pe=new h["b"]("global_nav");var De={menuProps:c.a.object,teamId:c.a.string.isRequired,isEnterprise:c.a.bool,enterpriseURL:c.a.string,isAppmin:c.a.bool,featureGlobalNav:c.a.bool};var Fe={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,featureGlobalNav:false};var Le=function e(t){var a=t.featureGlobalNav,n=t.teamId,i=t.isEnterprise,o=t.enterpriseURL,s=t.isAppmin,l=t.menuProps;if(!a)return null;var c=[{label:Pe.t("Manage members"),href:"/admin"},{label:Pe.t("Workspace settings"),href:"/admin/settings"},{label:Pe.t("Organization settings"),href:"https://"+o+"/manage",hide:!i},{label:Pe.t("Manage apps"),href:"/apps/manage",hide:i||!s},{label:Pe.t("Manage shared channels"),click:function e(){return Object(xe["a"])(n)},hide:i}].filter(function(e){return!e.hide});return r.a.createElement(N["a"],_()({},l,{template:c}))};Le.displayName="TeamAdminSubmenu";Le.defaultProps=Fe;var Be=function e(t){var a=Object(le["getCurrentTeam"])(t);return{teamId:a.id,isEnterprise:Object(ce["isEnterpriseTeam"])(a),enterpriseURL:Object(u["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(Me["isAppmin"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var Ue=Object(i["connect"])(Be)(Le);var qe=a(24);var Ge=a.n(qe);var He=a(473);var We=a(719);var Ve=Object(_e["c"])("TS.ui.enterprise_teams_dialog.show");var ze=function e(){return Ve(TS.model.user)};var Qe=new h["b"]("global_nav");var Ke=3;var Ye={menuProps:c.a.object,enterprises:c.a.arrayOf(c.a.shape({id:c.a.string,name:c.a.string,teams:c.a.arrayOf(c.a.object)})),others:c.a.arrayOf(c.a.shape({id:c.a.string,name:c.a.string,url:c.a.string})),currentEnterpriseId:c.a.string,signinURL:c.a.string,logoutURL:c.a.string,featureGlobalNav:c.a.bool};var Je={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,signinURL:void 0,logoutURL:void 0,featureGlobalNav:false};var Ze=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getTeamItem=a.getTeamItem.bind(a);a.getLogoutItem=a.getLogoutItem.bind(a);a.getEnterpriseItems=a.getEnterpriseItems.bind(a);a.getOtherItems=a.getOtherItems.bind(a);return a}w()(t,[{key:"getTeamItem",value:function e(t){var a=this.props.featureGlobalNav;if(!a)return null;if(!t.url)return null;var i=t.url+("/"===t.url.substr(-1)?"messages":"/messages");return{label:r.a.createElement(n["Fragment"],null,r.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+Object(I["get"])(t,"icons.image_44")+")"}}),r.a.createElement("strong",null,t.name)),href:i,target:"_self"}}},{key:"getLogoutItem",value:function e(t){var a=this.props,n=a.logoutURL,r=a.featureGlobalNav;if(!r)return null;return{label:Qe.rt("Sign out of <strong>{enterpriseName}</strong>",{enterpriseName:t.name}),href:Object(We["a"])(t.id,n),target:"_self"}}},{key:"getEnterpriseItems",value:function e(){var t=this;var a=this.props,n=a.enterprises,r=a.currentEnterpriseId,i=a.featureGlobalNav;if(!i)return[];return Object(I["flatten"])(n.map(function(e){var a=e.teams.map(t.getTeamItem);var n=e.id===r&&e.overLimit?{label:Qe.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:function e(){return ze()}}:null;return[{type:"header",label:e.name}].concat(Ge()(a),[n,{type:"separator"}])}))}},{key:"getOtherItems",value:function e(){var t=this;var a=this.props,n=a.others,r=a.featureGlobalNav;if(!r)return[];var i=n.map(function(e){return t.getTeamItem(e)});return[{type:"header",label:Qe.t("Your other workspaces")}].concat(Ge()(i))}},{key:"render",value:function e(){var t=this.props,a=t.signinURL,n=t.featureGlobalNav,i=t.menuProps;if(!n)return null;var o=a&&[{type:"separator"},{label:Qe.t("Sign in to another workspace"),href:a}];var s=[].concat(Ge()(this.getEnterpriseItems()),Ge()(this.getOtherItems()),Ge()(o||[]));return r.a.createElement(N["a"],_()({},i,{template:s}))}}]);return t}(n["Component"]);Ze.displayName="SwitchWorkspacesSubmenu";Ze.defaultProps=Je;var Xe=function e(t){var a=[];Object.values(Object(u["getFromBootData"])(t,"other_accounts")||{}).forEach(function(e){a.push({id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon})});var n=Object(Me["getCurrentMember"])(t);(Object(I["get"])(n,"enterprise_user.teams")||[]).map(function(e){return Object(le["getTeamById"])(t,e)}).forEach(function(e){a.push({id:e.id,enterpriseId:Object(I["get"])(n,"enterprise_user.enterprise_id")||e.enterprise_id,url:Object(He["b"])(t,e.domain),name:Object(ce["getTeamDisplayName"])(e),enterpriseName:Object(I["get"])(n,"enterprise_user.enterprise_name")||e.enterprise_name,icons:e.icon,isUnknown:Object(ce["isUnknown"])(e)})});var r=Object(le["getCurrentTeam"])(t);var i=r.enterprise_id;a=a.sort(function(e,t){if(i){if(e.enterpriseId===i&&t.enterpriseId!==i)return-1;if(t.enterpriseId===i&&e.enterpriseId!==i)return 1}if(!e.isUnknown&&t.isUnknown)return-1;if(!t.isUnknown&&e.isUnknown)return 1;return Object(h["n"])(e.name,t.name)});var o=r.id;a=a.filter(function(e){return e.id!==o});return Object(I["uniqBy"])(a,"id")};var $e=function e(t){var a={};t.filter(function(e){return e.enterpriseId}).forEach(function(e){var t=e.enterpriseId;a[t]?a[t].teams.length<Ke?a[t].teams.push(e):a[t].overLimit=true:a[t]={id:t,name:e.enterpriseName,teams:[e]}});return Object.values(a)};var et=function e(t){var a=Xe(t);var n=$e(a);var r=a.filter(function(e){return!e.enterpriseId});var i=Object(le["getCurrentTeam"])(t).enterprise_id;var o=Object(u["getFromBootData"])(t,"signin_url");var s=Object(u["getFromBootData"])(t,"logout_url");return{enterprises:n,others:r,currentEnterpriseId:i,signinURL:o,logoutURL:s,featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var tt=Object(i["connect"])(et)(Ze);var at=a(247);var nt=a(16);var rt=a(618);function it(e){var t=Object(Me["getCurrentMember"])(e);var a=Object(le["getCurrentTeam"])(e);var n=Object(nt["isAdmin"])(t);var r=Object(nt["isOwner"])(t);var i=Object(nt["isRestricted"])(t);var o=Object(u["pageNeedsEnterprise"])(e);var s=Object(ce["isPaidTeam"])(a);var l=n;var c=Object(rt["i"])();var d=n||!i&&(!Object(m["getTeamPref"])(e,"emoji_only_admins")||!Object(m["getTeamPref"])(e,"slackbot_responses_only_admins")||!Object(m["getTeamPref"])(e,"loading_only_admins"));var p=o&&Object(at["isAppSpaceEnabled"])(e)&&Object(Me["isAppmin"])(e);var f=n||!Object(m["getTeamPref"])(e,"stats_only_admins")&&!i;var h=r||Object(m["getUserPref"])(e,"purchaser")||Object(m["getTeamPref"])(e,"all_users_can_purchase");var g=h&&s;var b=!s&&!Object(L["isAppStoreBuild"])();var _=o&&!Object(nt["isRestricted"])(t);var y=Object(rt["f"])();var k=Object(u["getFromBootData"])(e,"help_url");var O=Object(u["isFeatureEnabled"])(e,"feature_tinyspeck")||v["isDev"];var w=o&&!i;var E=Object(I["size"])(Object(u["getFromBootData"])(e,"other_accounts"))+(Object(I["get"])(t,"enterprise_user.teams.length",1)-1);var C=E>=1&&!L["isDesktop"];var j=!C&&!!Object(u["getFromBootData"])(e,"signin_url");return{administration:l,invite:c,customize:d,manageApps:p,analytics:f,billing:g,plans:b,orgShared:_,externalShared:y,help:k,version:O,findWorkspaces:w,switchWorkspaces:C,signin:j}}var ot=new h["b"]("global_nav");var st={actions:c.a.object,teamId:c.a.string.isRequired,signOut:c.a.func,signoutName:c.a.string.isRequired,signoutURL:c.a.string,signinURL:c.a.string,renderSonicMenu:c.a.func,featureGlobalNav:c.a.bool};var lt={actions:{},signOut:I["noop"],signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var ct=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSigninClick=a.onSigninClick.bind(a);a.onOpenAppClick=a.onOpenAppClick.bind(a);a.renderAdminSubmenu=a.renderAdminSubmenu.bind(a);a.renderWorkspacesSubmenu=a.renderWorkspacesSubmenu.bind(a);return a}w()(t,[{key:"onSigninClick",value:function e(t){if(L["isDesktop"]){t.preventDefault();Object(L["signInTeam"])()}}},{key:"onOpenAppClick",value:function e(t){t.preventDefault();Se({fallback_to_browser:true,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function e(t){return r.a.createElement(Ue,{menuProps:t})}},{key:"renderWorkspacesSubmenu",value:function e(t){return r.a.createElement(tt,{menuProps:t})}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.actions,i=a.renderSonicMenu,o=a.featureGlobalNav,s=a.signoutName,l=a.signoutURL,c=a.signinURL,u=pe()(a,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL"]);if(!o)return null;var d=[{type:"submenu",label:"Sonic",renderSubmenu:i,hide:!i},{type:"separator"},{type:"custom",children:r.a.createElement(Re,{key:"team-header"})},{type:"separator"},{label:ot.t("Preferences"),shortcut:Object(v["isMac"])()&&L["isDesktop"]&&"\u2318,",click:function e(){return Oe()}},{type:"separator"},{type:"submenu",label:ot.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!n.administration},{label:ot.t("Analytics"),hide:!n.analytics,href:"/stats"},{label:ot.t("Billing"),hide:!n.billing,href:"/admin/billing"},{label:ot.t("See paid plans"),hide:!n.plans,href:"/pricing"},{label:ot.t("Customize Slack"),hide:!n.customize,href:"/customize",target:"_blank"},{type:"separator"},{label:ot.t("Invite people"),hide:!n.invite,click:function e(){return Object(be["a"])()}},{label:ot.t("Manage apps"),hide:!n.manageApps,href:"/apps/manage"},{label:ot.t("Shared channels"),hide:!n.orgShared,click:function e(){return ye()}},{label:ot.t("Shared channels (beta)"),hide:!n.externalShared,click:function e(){return Object(ke["a"])()}},{type:"separator"},{label:ot.t("Help & feedback"),hide:!n.help,click:Ce},{label:"Version info (TS only)",hide:!n.version,click:je["c"]},{type:"separator"},{label:ot.t("Find more workspaces"),hide:!n.findWorkspaces,click:function e(){return Ee()}},{type:"submenu",label:ot.t("Switch workspaces"),hide:Object(g["a"])()||!n.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:ot.t("Sign in to another workspace"),hide:!n.signin,href:c,click:this.onSigninClick},{label:ot.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:s}),hide:!Object(g["a"])(),click:function e(){return t.props.signOut()},dataQa:"logout"},{label:ot.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:s}),hide:Object(g["a"])(),href:l,target:"_self",dataQa:"logout"},{type:"separator"},{label:ot.rt("Open the Slack App"),hide:L["isDesktop"],href:"/ssb/open",click:this.onOpenAppClick}].filter(function(e){return!e.hide});return r.a.createElement(N["a"],_()({},u,{template:d,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(n["Component"]);ct.displayName="TeamMenu";ct.defaultProps=lt;var ut=function e(t){return{signOut:function e(){return t(ge.apply(void 0,arguments))}}};var dt=function e(t){var a=Object(le["getCurrentTeam"])(t);return{actions:it(t),teamId:a.id,signoutName:a.enterprise_name||Object(ce["getTeamDisplayName"])(a),signoutURL:Object(ce["isEnterpriseTeam"])(a)?Object(u["getFromBootData"])(t,"enterprise_logout_url"):Object(u["getFromBootData"])(t,"logout_url"),signinURL:Object(u["getFromBootData"])(t,"signin_url"),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var pt=Object(i["connect"])(dt,ut)(ct);var ft=pt;var mt=new h["b"]("global_nav");var ht={name:c.a.string,featureGlobalNav:c.a.bool,featureOfflineMode:c.a.bool,clogger:c.a.object.isRequired,renderSonicMenu:c.a.func};var vt={name:void 0,featureGlobalNav:false,featureOfflineMode:false,renderSonicMenu:void 0};var gt=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.renderMenu=a.renderMenu.bind(a);a.renderIcon=a.renderIcon.bind(a);return a}w()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function e(t){return r.a.createElement(ft,_()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function e(){if(this.props.featureOfflineMode)return r.a.createElement(n["Fragment"],null,r.a.createElement(ue["b"],null,r.a.createElement(T["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})),r.a.createElement(ue["a"],null,r.a.createElement(G["d"],{tip:mt.t("No network connection"),position:"bottom"},r.a.createElement(T["b"],{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"}))));return r.a.createElement(T["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function e(){var t=this.props,a=t.name,n=t.featureGlobalNav;if(!a||!n)return null;return r.a.createElement(N["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},r.a.createElement(q["c"],{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":mt.t("Team menu")},r.a.createElement("div",{className:"overflow_ellipsis"},a),this.renderIcon()))}}]);return t}(n["Component"]);gt.displayName="Name";gt.defaultProps=vt;var bt=function e(t){var a=Object(le["getCurrentTeam"])(t);return{name:a?Object(ce["getTeamDisplayName"])(a):void 0,featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),featureOfflineMode:Object(u["isFeatureEnabled"])(t,"feature_offline_mode"),clogger:Object(D["a"])({state:t})}};var _t=Object(i["connect"])(bt)(gt);var yt=a(1167);var kt=a(173);var Ot=a(482);var wt=a(416);var Et=a(1011);var Ct=a(760);var jt=a(3344);var St=a(312);var It=a(69);var Tt=a(19);var Nt=a(493);var At=a(165);var Rt=a(1410);var Mt={name:c.a.string,secondary:c.a.string,userId:c.a.string,inDnd:c.a.bool,inDndBySnooze:c.a.bool};var xt={name:void 0,secondary:void 0,userId:void 0,inDnd:false,inDndBySnooze:false};var Pt=function e(t){var a=t.name,n=t.secondary,i=t.userId,o=t.inDnd,s=t.inDndBySnooze;var l=n?r.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},n):null;var c=f()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":o&&s,"p-global_nav__top_menu_schedule_background":o&&!s});return r.a.createElement("div",{className:c},r.a.createElement(kt["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),r.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},r.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),l))};Pt.displayName="UserHeader";Pt.defaultProps=xt;var Dt=function e(t){var a=Object(Me["getCurrentMember"])(t);var n=Object(Nt["getSnoozeScheduleForCurrentUser"])(t),r=n.snoozeEnabled;return{name:Object(nt["getPrefCompliantMemberName"])(t,a),secondary:Object(nt["getMemberSecondaryName"])(t,a),userId:a.id,inDnd:!!Object(Nt["getDndByMemberId"])(t,a.id),inDndBySnooze:r}};var Ft=Object(i["connect"])(Dt)(Pt);var Lt=a(1001);var Bt=a(1750);var Ut=new h["b"]("do_not_disturb");var qt={inDndBySnooze:c.a.bool.isRequired,snoozeEndTs:c.a.number,dndEndTs:c.a.number,do24hrTime:c.a.bool,featureBetterSnooze:c.a.bool,featureGlobalNav:c.a.bool};var Gt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,featureBetterSnooze:false,featureGlobalNav:false};var Ht=function(e){S()(t,e);function t(){k()(this,t);return C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}w()(t,[{key:"render",value:function e(){var t=this.props,a=t.inDndBySnooze,n=t.snoozeEndTs,i=t.dndEndTs,o=t.do24hrTime,s=t.featureBetterSnooze,l=t.featureGlobalNav;if(!s&&!l)return null;var c=f()("p-dnd_header",{"p-dnd_header__snooze_background":a,"p-dnd_header__schedule_background":!a});var u=a?n:i;var d=Object(Lt["b"])(u,{do24hrTime:o,featureBetterSnooze:s,featureGlobalNav:l});return r.a.createElement("div",{className:c},r.a.createElement("div",{className:"p-dnd_header__status"},r.a.createElement("div",null,r.a.createElement("strong",null,Ut.t("Do Not Disturb: On"))),r.a.createElement("div",{className:"p-dnd_header__sub_text"},d)))}}]);return t}(n["PureComponent"]);Ht.displayName="DndHeader";Ht.defaultProps=Gt;var Wt=function e(t){var a=Object(u["getCurrentUserId"])(t);var n=Object(Nt["getDndScheduleByMemberId"])(t,a),r=n.nextDndEndTs;var i=Object(Nt["getSnoozeScheduleForCurrentUser"])(t),o=i.snoozeEnabled,s=i.snoozeEndTs;return{inDndBySnooze:o,snoozeEndTs:s,dndEndTs:r,do24hrTime:Object(m["getUserPref"])(t,"time24"),featureBetterSnooze:Object(u["isFeatureEnabled"])(t,"feature_better_snooze"),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var Vt=Object(i["connect"])(Wt)(Ht);function zt(e){var t=Object(u["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(u["getFromBootData"])(e,"help_url"),version:t||v["isDev"]}}var Qt=new h["b"]("global_nav");var Kt={actions:c.a.object,currentMember:c.a.object,currentPresence:c.a.string,onTriggerClose:c.a.func,openCustomStatusDialog:c.a.func,currentChannel:c.a.object,inDnd:c.a.bool,inDndBySnooze:c.a.bool,endDndSnooze:c.a.func,endDndSchedule:c.a.func,featureGlobalNav:c.a.bool,toggleUserPresence:c.a.func,updateCurrentMemberProfile:c.a.func};var Yt={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:I["noop"],openCustomStatusDialog:I["noop"],currentChannel:void 0,inDnd:false,inDndBySnooze:false,endDndSnooze:I["noop"],endDndSchedule:I["noop"],featureGlobalNav:false,toggleUserPresence:I["noop"],updateCurrentMemberProfile:I["noop"]};var Jt=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderDndMenu=a.renderDndMenu.bind(a);a.renderPresenceLabel=a.renderPresenceLabel.bind(a);return a}w()(t,[{key:"renderDndMenu",value:function e(t){var a=this.props.currentChannel;return r.a.createElement(Rt["a"],{currentChannel:a,menuProps:t,featureSonicDnd:true,useGlobalNav:true})}},{key:"renderPresenceLabel",value:function e(){var t=this.props,a=t.currentPresence,n=t.featureGlobalNav;if(!n)return null;switch(a){case"active":return Qt.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,a=e.key;return r.a.createElement("strong",{key:a},t)});case"away":return Qt.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,a=e.text,n=e.key;switch(t){case"status":return r.a.createElement("strong",{className:"half_opacity",key:n},a);case"strong":return r.a.createElement("strong",{key:n},a);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.actions,i=a.currentMember,o=a.inDnd,s=a.inDndBySnooze,l=a.featureGlobalNav,c=pe()(a,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!l)return null;var u=[{type:"custom",children:r.a.createElement(Ft,{key:"user-header"})},{type:"custom",children:r.a.createElement(Vt,{key:"dnd-header"}),hide:!o},{type:"submenu",label:Qt.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:o},{label:Qt.t("Resume notifications now"),key:"turn-off-dnd",hide:!o,click:s?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:Qt.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!o||o&&!s},{label:Qt.t("Adjust schedule \u2026"),key:"adjust-dnd-schedule",hide:!o||o&&s,click:function e(){return Object(Ct["a"])("notifications","#prefs_dnd")}},{type:"separator",key:"dnd-separator",hide:!o},{label:Qt.t("Clear status"),hide:!Object(nt["hasCustomStatusSet"])(i),click:function e(){t.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(nt["hasCustomStatusSet"])(i)?Qt.t("Edit status"):Qt.t("Set a status"),shortcut:Object(v["isMac"])()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:Qt.t("Profile & account"),click:function e(){return Object(At["h"])(i.id)}},{label:Qt.rt("Notification preferences"),key:"notification-preferences",click:function e(){return Object(Ct["a"])("notifications")}},{type:"custom",children:r.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide});var d=f()({"p-global_nav__top_user_menu":true,"p-global_nav__top_user_menu--dnd":o});return r.a.createElement(N["a"],_()({},c,{template:u,menuClassNames:d,noMargin:true}))}}]);return t}(n["Component"]);Jt.displayName="UserMenu";Jt.defaultProps=Yt;var Zt=function e(t){var a=Object(Me["getCurrentMember"])(t);var n=Object(It["getPrimaryView"])(t);var r=Object(Nt["getSnoozeScheduleForCurrentUser"])(t),i=r.snoozeEnabled;return{actions:zt(t),currentMember:a,currentPresence:Object(St["getCurrentMemberPresence"])(t),currentChannel:Object(Tt["getChannelById"])(t,n,false)||void 0,inDnd:!!Object(Nt["getDndByMemberId"])(t,a.id),inDndBySnooze:i,featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var Xt={openCustomStatusDialog:yt["a"],toggleUserPresence:St["toggleUserPresence"],updateCurrentMemberProfile:jt["a"],endDndSnooze:Et["b"],endDndSchedule:Et["a"]};var $t=Object(i["connect"])(Zt,Xt)(Jt);var ea=$t;var ta=new h["b"]("global_nav");var aa={userId:c.a.string,hasCustomStatus:c.a.bool,openCustomStatusDialog:c.a.func,featureGlobalNav:c.a.bool,clogger:c.a.object.isRequired};var na={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:I["noop"],featureGlobalNav:false};var ra=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUserClick=a.onUserClick.bind(a);a.onStatusClick=a.onStatusClick.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}w()(t,[{key:"onUserClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function e(){this.props.openCustomStatusDialog();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function e(t){return r.a.createElement(ea,t)}},{key:"render",value:function e(){var t=this.props,a=t.userId,n=t.hasCustomStatus,i=t.featureGlobalNav;if(!a||!i)return null;var o=n&&r.a.createElement(q["c"],{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":ta.t("Edit status")},r.a.createElement(Ot["a"],{memberId:a,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),r.a.createElement(T["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return r.a.createElement("div",{className:"p-global_nav__top_user"},o,r.a.createElement(N["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},r.a.createElement(q["c"],{"aria-label":ta.t("User menu")},r.a.createElement(kt["b"],{userId:a,size:32,showBadge:false,isInteractive:false,className:f()({"p-global_nav__top_user_avatar":true,"p-global_nav__top_user_avatar--beside-status":n}),tabIndex:"-1"}),r.a.createElement(wt["a"],{memberId:a,className:"p-global_nav__top_user_presence",inline:false}))))}}]);return t}(n["Component"]);ra.displayName="User";ra.defaultProps=na;var ia=function e(t){return{userId:Object(u["getCurrentUserId"])(t),hasCustomStatus:Object(nt["hasCustomStatusSet"])(Object(Me["getCurrentMember"])(t)),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var oa={openCustomStatusDialog:yt["a"]};var sa=Object(i["connect"])(ia,oa)(ra);var la=a(106);var ca=a.n(la);var ua=a(815);var da=a(3458);var pa=a(145);var fa=a(150);var ma=a(348);var ha={icon:c.a.string.isRequired,pane:c.a.string.isRequired,tooltip:c.a.node.isRequired,"aria-label":c.a.string.isRequired,active:c.a.bool,children:c.a.node,className:c.a.string,showStarredItemsList:c.a.func.isRequired,closeFlexpane:c.a.func.isRequired,clogger:c.a.object.isRequired};var va={active:false,children:void 0,className:void 0};var ga=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}w()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.pane,n=t.active,r=t.clogger;"team"===a?Object(At["m"])():"starred_items"===a&&Object(g["a"])()?n?this.props.closeFlexpane():this.props.showStarredItemsList():Object(ma["d"])(a);"mentions"===a?r.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===a&&r.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function e(){var t=this.props,a=t.icon,n=t.tooltip,i=t.pane,o=t.active,s=t.children,l=t["aria-label"];var c=f()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+i,o&&"p-global_nav__top_flex--active",this.props.className);return r.a.createElement(G["d"],{tip:n,delay:G["a"],position:"bottom",offsetY:ur},r.a.createElement(q["c"],{className:c,onClick:this.onClick,"aria-label":l},r.a.createElement(T["b"],{type:a,className:"p-global_nav__top_button_icon"}),s))}}]);return t}(n["PureComponent"]);ga.displayName="FlexButton";ga.defaultProps=va;var ba=function e(t,a){var n=a.pane;return{active:Object(It["getSecondaryView"])(t)===n,clogger:Object(D["a"])({state:t})}};var _a=function e(t){return{showStarredItemsList:function e(){return t(Object(fa["f"])())},closeFlexpane:function e(){return t(Object(fa["a"])())}}};var ya=Object(i["connect"])(ba,_a)(ga);var ka=new h["b"]("global_nav");var Oa={reactionToast:c.a.shape({emoji:c.a.string,memberName:c.a.string,channelName:c.a.string}),noAnimation:c.a.bool,featureGlobalNav:c.a.bool};var wa={reactionToast:void 0,noAnimation:false,featureGlobalNav:false};var Ea=function e(t){var a=t.reactionToast,i=t.noAnimation,o=t.featureGlobalNav;if(!o)return null;var s=a&&r.a.createElement(pa["b"],{text:":"+a.emoji+":",emojiSize:pa["a"].LARGE,className:"p-global_nav__top_activity_toast"});var l=ca.a.chrome&&!L["isDesktop"];var c=!l&&r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(v["isMac"])()?"\u2318\u21e7M":"Ctrl+Shift+M");var u=a?r.a.createElement(n["Fragment"],null,Object(da["a"])(a.memberName),r.a.createElement("br",null),r.a.createElement("span",{className:"sk_light_gray"},Object(da["a"])(a.channelName))):r.a.createElement(n["Fragment"],null,ka.t("Activity"),c);var d=f()({"p-global_nav__top_activity":true,"p-global_nav__top_activity--no-animation":i,"p-global_nav__top_activity--toasting":a});return r.a.createElement("div",{className:d},r.a.createElement(ya,{icon:"mentions",pane:"mentions",tooltip:u,"aria-label":ka.t("Activity")}),s)};Ea.displayName="ActivityButton";Ea.defaultProps=wa;var Ca=function e(t){return{reactionToast:Object(ua["getReactionToast"])(t),noAnimation:!Object(m["getUserPref"])(t,"a11y_animations"),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var ja=Object(i["connect"])(Ca)(Ea);var Sa=a(31);var Ia=a(77);var Ta=Object(fe["a"])("Fetch help issues",function(e,t,a){return e(Object(me["a"])({method:"help.issues.list",args:a})).catch(function(e){Object(P["a"])("Failed to get list of issues for a user");throw e})});var Na=Object(fe["a"])("Fetch help articles",function(e,t,a){return e(Object(me["a"])({method:"helpdesk.get",args:a})).catch(function(e){Object(P["a"])("Failed to get list of articles for a user");throw e})});Ta.propTypes={};Na.propTypes={locale:c.a.string};var Aa=function e(t,a){var n=Math.min(a||5e5,5e5);if(t.length>n)return Object(I["escapeRegExp"])(t.slice(0,n));return Object(I["escapeRegExp"])(t)};var Ra=function e(){return"sid=zdev-hc-token"};var Ma=function e(t){var a=Ra()||"";if(-1!==t.indexOf("sid="))return t;var n=-1!==t.indexOf("?")?t+"&"+a:t+"?"+a;var r=t.indexOf("#");return-1===r?n:""+n+t.substring(r)};var xa=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.articleId,n=t.sectionId,r=t.categoryId,i=t.query,o=t.zdLocale;var s="https://get.slack.help/hc";o&&(s=s+"/"+o);i?s=s+"/search?utf8=\u2713&commit=Search&query="+i:a?s=s+"/articles/"+a:n?s=s+"/sections/"+n:r&&(s=s+"/categories/"+r);return Ma(s)};var Pa=a(39);var Da=a(2086);var Fa=a(408);var La=a(344);var Ba=new h["b"]("help");var Ua={tickets:c.a.shape({open:c.a.number,closed:c.a.number,unread:c.a.number})};var qa={tickets:{open:0,closed:0,unread:0}};var Ga="HELP_MODAL_ACTION";var Ha="/help";var Wa=function e(){var t={action:"view_request_history",trigger:"click_view_request_history"};Object(D["a"])().track(Ga,t);window.open(Ma(Ha))};var Va=function e(){var t={action:"view_new_replies",trigger:"click_view_new_replies"};Object(D["a"])().track(Ga,t);window.open(Ma(Ha))};var za=function e(){var t={action:"view_open_requests",trigger:"click_view_open_requests"};Object(D["a"])().track(Ga,t);window.open(Ma(Ha))};var Qa=function e(t){if(t>0)return r.a.createElement("div",null,r.a.createElement("span",null,Ba.t("No pending requests.")),r.a.createElement("span",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:Wa},r.a.createElement("span",{className:"p-help_modal__requests__message bold"},Ba.t("View your help request history"),".")));return null};var Ka=function e(t){if(t>0){var a=t>1?Ba.t("You have new replies to your help requests."):Ba.t("You have a new reply to your help request.");return r.a.createElement("div",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:Va},r.a.createElement("span",{className:"p-help_modal__requests_badge unread"},t),r.a.createElement("span",{className:"p-help_modal__requests__message bold"},a))}return null};var Ya=function e(t){if(t>0){var a=t>1?Ba.t("You have open help requests."):Ba.t("You have an open help request.");return r.a.createElement("div",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:za},r.a.createElement("span",{className:"p-help_modal__requests_badge read"},t),r.a.createElement("span",{className:"p-help_modal__requests__message read bold"},a))}return null};var Ja=function e(t){return r.a.createElement("div",{className:"display_flex flex_direction_column"},Qa(t.tickets.closed),r.a.createElement("div",{className:t.tickets.unread>0?"padding_top_50":""},Ka(t.tickets.unread)),r.a.createElement("div",{className:t.tickets.closed>0||t.tickets.unread>0?"padding_top_50":""},Ya(t.tickets.open)))};Ja.displayName="TicketsStatus";Ja.defaultProps=qa;var Za=Ja;var Xa=a(744);var $a=a(820);var en=a(92);var tn=function e(t){return r.a.createElement("div",{className:"padding_right_75"},r.a.createElement("div",{role:"link",tabIndex:"0",className:"p-help_modal__list__item display_flex align_items_center justify_content_between "+(t.isFocus?"p-help_modal__list__item__focus":""),key:t.article.id+"-list-item",onClick:function e(){t.onClickArticle(t.article.url)},onKeyDown:function e(a){13===a.keyCode&&t.onClickArticle(t.article.url)}},r.a.createElement("div",{className:"p-help_modal__list__item__title"},t.article.title),r.a.createElement(T["b"],{type:"enter",className:"p-help_modal__list__icon"})))};tn.displayName="Article";tn.defaultProps={article:{},isFocus:false,onClickArticle:I["noop"]};var an=tn;var nn=a(2202);var rn=new h["b"]("help");var on={query:c.a.string,articles:c.a.arrayOf(c.a.shape({id:c.a.number,images:c.a.array,label_names:c.a.array,title:c.a.string,url:c.a.string})),tickets:c.a.shape({open:c.a.number,closed:c.a.number,unread:c.a.number}),onQueryChange:c.a.func,showKeyboardShortcuts:c.a.func,isLoading:c.a.bool,trigger:c.a.string.isRequired,clogger:c.a.object.isRequired};var sn={query:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:I["noop"],showKeyboardShortcuts:I["noop"],isLoading:false};var ln=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={query:a.props.query,articles:a.props.articles,isModalOpen:true,focusFirstResult:true,isLoading:a.props.isLoading};a.zdLocale=Object(Pa["a"])();Object(I["bindAll"])(a,["onSearchInputChange","onSearchInputSubmit","onSearchInputBlur","onListMouseEnter","onClickArticle","onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","renderArticles"]);return a}w()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.trigger,n=t.clogger;n.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:a})}},{key:"componentWillReceiveProps",value:function e(t){t.articles!==this.state.articles&&this.setState(function(){return{articles:t.articles,isLoading:t.isLoading}})}},{key:"onListMouseEnter",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{query:a,focusFirstResult:true}});this.props.onQueryChange(a)}},{key:"onSearchInputSubmit",value:function e(){this.state.articles.length&&this.openLinkInNewWindow(Ma(this.state.articles[0].url))}},{key:"onClickArticle",value:function e(t){this.openLinkInNewWindow(Ma(t))}},{key:"onClickBrowseLink",value:function e(){var t=this.state.query;var a=this.props.clogger;var n=xa({zdLocale:this.zdLocale,query:t});t&&a.track("HELP_MODAL_SEARCH",{search_terms:t});a.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"});window.open(n)}},{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var a=this.props.clogger;var n="HELP_MODAL_ACTION";var r={action:"submit_new_request",trigger:"click_submit_new_request"};a.track(n,r);window.open(Ma(t))}},{key:"onClickShortcutsButton",value:function e(){var t=this.props.clogger;var a="HELP_MODAL_ACTION";var n={action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"};this.setState(function(){return{isModalOpen:false}});t.track(a,n);this.props.showKeyboardShortcuts()}},{key:"onSearchInputBlur",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"openLinkInNewWindow",value:function e(t){var a=this.props.clogger;this.state.query&&a.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale});a.track("HELP_MODAL_ZD_HIT",{zd_article_url:t});window.open(Ma(t))}},{key:"renderArticles",value:function e(t){var a=this.state.articles;var n=a[t];return r.a.createElement(an,{article:n,isFocus:this.state.focusFirstResult&&0===t,onClickArticle:this.onClickArticle})}},{key:"render",value:function e(){var t=this;var a=this.state,n=a.query,i=a.articles,o=a.isModalOpen;var s=this.props.tickets;this.keys=Object(I["map"])(i,"id").map(function(e){return e.toString()});return r.a.createElement(Fa["a"],{isOpen:o,showCancelButton:false,showGoButton:false,modalClasses:"p-help_modal",contentLabel:"help-modal"},r.a.createElement("div",null,r.a.createElement($a["b"],{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},r.a.createElement(T["b"],{type:"keyboard",className:"small_right_margin"}),r.a.createElement("strong",null,rn.t("Keyboard shortcuts"))),r.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},r.a.createElement("h1",{className:"p-help_modal_title"},rn.t("How can we help?")),r.a.createElement("div",{tabIndex:0,role:"link",className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink},r.a.createElement("span",{className:"p-help_modal__browse__text"},rn.t("Browse all answers")),r.a.createElement(T["b"],{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),r.a.createElement(La["a"],{placeholder:rn.t("Search the Help Center"),value:n,icon:"search",autoFocus:true,hasResetButton:true,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:true,className:"margin_top_200 margin_bottom_100",size:"large",onBlur:this.onSearchInputBlur}),n?null:r.a.createElement("div",{className:"p-help_modal__popular_topics padding_bottom_100 bold"},rn.t("Popular help topics")),r.a.createElement("div",{role:"list",className:"p-help_modal__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?r.a.createElement(en["a"],{size:"large",color:"blue",noMargin:true}):r.a.createElement("div",{className:"full_height"},r.a.createElement(Da["a"],null,function(e){var a=e.width,n=e.height;return r.a.createElement(Xa["a"],{width:a,height:n,keys:t.keys,rowRenderer:t.renderArticles})}))),r.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},r.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},r.a.createElement(Za,{tickets:s})),r.a.createElement("div",{className:"p-help_modal__footer_contact"},r.a.createElement("div",null,r.a.createElement("span",{className:"p-help_modal__contact_us__message"},rn.t("Can\u2019t find what you need, or have some feedback?")),r.a.createElement($a["b"],{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton},rn.t("Contact Us")))))))}}]);return t}(n["Component"]);ln.displayName="HelpModal";ln.defaultProps=sn;var cn=function e(t){return{clogger:Object(D["a"])({state:t})}};var un=Object(i["connect"])(cn)(ln);var dn=new h["b"]("help");var pn={query:c.a.string,fetchHelpIssues:c.a.func,fetchHelpArticles:c.a.func,showKeyboardShortcuts:c.a.func,trigger:c.a.string.isRequired};var fn={query:"",fetchHelpIssues:I["noop"],fetchHelpArticles:I["noop"],showKeyboardShortcuts:I["noop"]};var mn=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={query:a.props.query,articles:[],tickets:{open:0,closed:0,unread:0},isLoading:true};a.allArticles=[];a.onQueryChange=a.onQueryChange.bind(a);a.zdLocale=Object(Pa["a"])();return a}w()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpIssues();this.fetchHelpArticles()}},{key:"onQueryChange",value:function e(t){var a=t?this.filterArticlesByQuery(t):this.popularArticles;if(t&&a.length<7){var n=xa({query:t,zdLocale:this.zdLocale});a.push({id:-99999,images:[],label_names:[],title:dn.t('Search for "{query}" on the Help Center',{query:t}),url:n})}this.setState(function(){return{query:t,articles:a}})}},{key:"filterPopularArticles",value:function e(t){var a=[];t.forEach(function(e){e.popular&&a.push(e)});a.sort(function(e,t){if(void 0===e.order)return 1;if(void 0===t.order)return-1;return e.order-t.order});return a}},{key:"filterArticlesByQuery",value:function e(t){var a=Aa(t);var n=new RegExp(a,"i");var r=-1;var i=this.allArticles.filter(function(e,t){if(e.title.toLowerCase()===a.toLowerCase()){r=t;return false}return e.title.match(n)});-1!==r&&i.unshift(this.allArticles[r]);return i}},{key:"fetchHelpIssues",value:function e(){var t=this;this.props.fetchHelpIssues().then(function(e){var a=e.ok,n=e.issues;if(a&&n){var r={open:0,closed:0,unread:0};n.forEach(function(e){"unread"===e.state?r.unread+=1:"open"===e.state?r.open+=1:(e.is_resolved||e.is_closed)&&(r.closed+=1)});t.setState(function(){return{tickets:r}})}})}},{key:"fetchHelpArticles",value:function e(){var t=this;this.props.fetchHelpArticles({locale:this.zdLocale}).then(function(e){t.allArticles=JSON.parse(e.articles).articles;t.popularArticles=t.filterPopularArticles(t.allArticles);t.state.query?t.setState(function(){return{articles:t.filterArticlesByQuery(t.props.query),isLoading:false}}):t.setState(function(){return{articles:t.popularArticles,isLoading:false}})})}},{key:"render",value:function e(){var t=this.state,a=t.articles,n=t.query,i=t.tickets,o=t.isLoading;var s=this.props.trigger;return r.a.createElement(un,{articles:a,query:n,tickets:i,onQueryChange:this.onQueryChange,showKeyboardShortcuts:this.props.showKeyboardShortcuts,isLoading:o,trigger:s})}}]);return t}(n["Component"]);mn.displayName="HelpModalContainer";mn.defaultProps=fn;var hn=function e(){return{}};var vn={fetchHelpIssues:Ta,fetchHelpArticles:Na,showKeyboardShortcuts:fa["e"]};var gn=Object(i["connect"])(hn,vn)(mn);var bn=gn;var _n=Object(Sa["b"])("Opens the help modal",function(e,t,a){e(Object(Ia["openModal"])({element:r.a.createElement(bn,a)}))});_n.propTypes={trigger:c.a.string.isRequired};var yn=new h["b"]("global_nav");var kn={isUserRestricted:c.a.bool,isPaid:c.a.bool,isEnterprise:c.a.bool,userId:c.a.string,showFileList:c.a.func,showKeyboardShortcuts:c.a.func,showWhatsNew:c.a.func,showUserGroupList:c.a.func,featureGlobalNav:c.a.bool,featureSonicUserGroups:c.a.bool,featureModernizeHelpModal:c.a.bool,openHelpModal:c.a.func,clogger:c.a.object.isRequired};var On={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:I["noop"],showKeyboardShortcuts:I["noop"],showWhatsNew:I["noop"],showUserGroupList:I["noop"],featureGlobalNav:false,featureSonicUserGroups:false,featureModernizeHelpModal:false,openHelpModal:I["noop"]};var wn=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onTriggerClick=a.onTriggerClick.bind(a);a.clogItem=a.clogItem.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}w()(t,[{key:"onTriggerClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function e(t){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:t})}},{key:"renderMenu",value:function e(t){var a=this;var n=this.props,i=n.featureGlobalNav,o=n.featureSonicUserGroups,s=n.isUserRestricted,l=n.isPaid,c=n.isEnterprise,u=n.userId;if(!i)return null;var d=[{label:yn.t("Files"),icon:r.a.createElement(T["b"],{type:"all-files-alt"}),click:function e(){a.props.showFileList({user:u});a.clogItem("files_user")}},{label:yn.t("Downloads"),icon:r.a.createElement(T["b"],{type:"cloud-download"}),click:function e(){Object(ma["c"])("downloads");a.clogItem("downloads")},hide:!(window.desktop&&window.desktop.downloads)},{type:"separator"},{label:c?yn.t("Organization Directory"):yn.t("Workspace Directory"),icon:r.a.createElement(T["b"],{type:"team-directory"}),shortcut:!ca.a.firefox&&(Object(v["isMac"])()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function e(){Object(At["m"])();a.clogItem("team")}},{label:yn.t("User Groups"),icon:r.a.createElement(T["b"],{type:"user-groups"}),click:function e(){o?a.props.showUserGroupList():Object(At["l"])();a.clogItem("groups")},hide:s||!l},{type:"separator"},{label:yn.t("What\u2019s New"),icon:r.a.createElement(T["b"],{type:"emoji-celebration"}),click:function e(){a.props.showWhatsNew();a.clogItem("whats_new")}},{label:yn.t("Keyboard Shortcuts"),icon:r.a.createElement(T["b"],{type:"keyboard"}),shortcut:Object(v["isMac"])()?"\u2318/":"Ctrl+/",click:function e(){a.props.showKeyboardShortcuts();a.clogItem("shortcuts")}},{label:yn.t("Help"),icon:r.a.createElement(T["b"],{type:"question-circle"}),click:function e(){a.props.featureModernizeHelpModal?a.props.openHelpModal({trigger:"flex_menu"}):Ce();a.clogItem("help")}}].filter(function(e){return!e.hide});return r.a.createElement(N["a"],_()({},t,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:true,width:Object(v["isMac"])()?void 0:360}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return r.a.createElement(N["e"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:dr,onClick:this.onTriggerClick},r.a.createElement(G["d"],{tip:yn.t("More options"),position:"bottom",delay:G["a"],offsetY:ur},r.a.createElement(q["c"],{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":yn.t("More options")},r.a.createElement(T["b"],{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"}))))}}]);return t}(n["PureComponent"]);wn.displayName="FlexpanesMenu";wn.defaultProps=On;var En=function e(t){return{isUserRestricted:Object(nt["isRestricted"])(Object(Me["getCurrentMember"])(t)),isPaid:Object(ce["isPaidTeam"])(Object(le["getCurrentTeam"])(t)),isEnterprise:Object(u["pageNeedsEnterprise"])(t),userId:Object(u["getCurrentUserId"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(u["isFeatureEnabled"])(t,"feature_sonic_user_groups"),featureModernizeHelpModal:Object(u["isFeatureEnabled"])(t,"feature_modern_help_modal"),clogger:Object(D["a"])({state:t})}};var Cn={showFileList:fa["d"],showKeyboardShortcuts:fa["e"],showWhatsNew:fa["j"],showUserGroupList:fa["i"],openHelpModal:_n};var jn=Object(i["connect"])(En,Cn)(wn);var Sn=a(180);var In=a(978);var Tn=a(170);var Nn=a(3476);var An=a(104);var Rn=a(188);var Mn=a(268);var xn=a(161);var Pn=a(446);var Dn=a(3462);var Fn=a(3463);var Ln=a(280);var Bn=a(3461);var Un={autocompleteIsOpen:c.a.bool.isRequired,openSearchAutocomplete:c.a.func.isRequired,closeSearchAutocomplete:c.a.func.isRequired,searchAutocompleteSuggestionAccept:c.a.func.isRequired,searchPrecache:c.a.func.isRequired,displayQuery:c.a.string};var qn={displayQuery:""};var Gn=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]);a.precacheSearch=Object(I["throttle"])(a.precacheSearch.bind(a),6e4);return a}w()(t,[{key:"onClick",value:function e(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function e(){this.props.openSearchAutocomplete();this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function e(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Pn["e"])();this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function e(){this.props.searchPrecache()}},{key:"render",value:function e(){var t=f()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!L["isDesktop"],"p-global_nav__top_search--primarysearch":true,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return r.a.createElement(xn["a"],{enabled:["feature_primary_search"]},r.a.createElement(q["c"],{className:t,onClick:this.onClick},r.a.createElement(Bn["a"],{autoFocus:false,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]);return t}(n["PureComponent"]);Gn.displayName="AutocompleteInputInPrimarySearch";Gn.defaultProps=qn;var Hn=function e(t){return{autocompleteIsOpen:Object(Mn["isSearchAutocompleteOpen"])(t),displayQuery:Object(Sn["getSearchInputBoxDisplayQuery"])(t)}};var Wn={searchPrecache:Ln["h"],openSearchAutocomplete:Mn["openSearchAutocomplete"],closeSearchAutocomplete:Mn["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Dn["a"]};var Vn=Object(i["connect"])(Hn,Wn)(Gn);var zn={isOpen:c.a.bool.isRequired,userQuery:c.a.string.isRequired,closeAutocomplete:c.a.func.isRequired,searchAutocompleteSuggestionAccept:c.a.func.isRequired};var Qn=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]);a.calculatePopoverConstraints=Object(I["throttle"])(a.calculatePopoverConstraints.bind(a),1e3);a.searchHeaderBackdrop=Object(n["createRef"])();a.state={hasCalculatedConstraints:false,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}};a.autocompleteInputRef=null;return a}w()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Pn["e"])();this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function e(){if(!this.autocompleteInputRef)return;var t=Object(An["findDOMNode"])(this.autocompleteInputRef);var a=t.getBoundingClientRect();var n=t.parentElement.getBoundingClientRect();var r=10;this.setState(function(){return{hasCalculatedConstraints:true,overlayStyle:{marginTop:n.bottom},contentStyle:{top:0,left:a.left-r,width:a.width+2*r}}})}},{key:"handleAutocompleteRef",value:function e(t){this.autocompleteInputRef=t;t&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function e(t){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===t.target&&this.props.closeAutocomplete()}},{key:"render",value:function e(){var t=this.props,a=t.isOpen,n=t.closeAutocomplete;var i="c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch";var o=a&&this.state.hasCalculatedConstraints;return r.a.createElement(xn["a"],{enabled:["feature_primary_search"]},o&&r.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),r.a.createElement(Vn,{ref:this.handleAutocompleteRef}),r.a.createElement(Rn["a"],{ariaRole:"dialog",ariaLabel:"Search",isOpen:o,position:"bottom-right",onClose:n,shouldFade:false,overlayClassName:i,allowanceX:20,allowanceY:0,shouldFocusAfterRender:false,shouldReturnFocusAfterClose:false,onResize:this.calculatePopoverConstraints,shouldObserveResize:true,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},a&&r.a.createElement("div",{className:"c-search-autocomplete"},r.a.createElement(Fn["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]);return t}(n["PureComponent"]);Qn.displayName="AutocompleteInPrimarySearch";var Kn=function e(t){return{userQuery:Object(Sn["getSearchInputBoxUserQuery"])(t),isOpen:Object(Mn["isSearchAutocompleteOpen"])(t)}};var Yn={closeAutocomplete:Mn["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Dn["a"]};var Jn=Object(i["connect"])(Kn,Yn)(Qn);var Zn=a(87);var Xn=a(2247);var $n=a(3267);function er(e){return"Vsearch"===Object(It["getPrimaryView"])(e)}var tr=new h["b"]("search");var ar={displayQuery:c.a.string,clearSearchInputField:c.a.func,orgName:c.a.string,teamName:c.a.string,clogger:c.a.object.isRequired,openFromClick:c.a.func,openSearchAutocomplete:c.a.func.isRequired,isPrimarySearchFeatureEnabled:c.a.bool.isRequired,showSearchAsActive:c.a.bool.isRequired};var nr={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:I["noop"],clearSearchInputField:I["noop"]};var rr=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.onClearClick=a.onClearClick.bind(a);return a}w()(t,[{key:"onClick",value:function e(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"render",value:function e(){var t=this.props,a=t.displayQuery,i=t.orgName,o=t.teamName,s=t.isPrimarySearchFeatureEnabled,l=t.showSearchAsActive;var c=a?r.a.createElement(n["Fragment"],null,r.a.createElement(Zn["a"],{text:a,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),r.a.createElement(q["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:tr.t("Clear")},r.a.createElement(T["b"],{type:"times-small"}))):r.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},tr.rt("Search {teamName}",{teamName:i||o||""}));var u=f()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!L["isDesktop"]});var d=!s||!l;return r.a.createElement(n["Fragment"],null,d&&r.a.createElement(q["c"],{className:u,onClick:this.onClick},r.a.createElement(T["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),c),!s&&r.a.createElement(Nn["a"],null),!d&&r.a.createElement(Jn,null))}}]);return t}(n["Component"]);rr.displayName="SearchPlaceholderInput";rr.defaultProps=nr;var ir=function e(t){return{displayQuery:Object(Sn["getSearchInputBoxDisplayQuery"])(t),orgName:Object(Tn["getEnterpriseOrgName"])(t)||"",teamName:Object(ce["getTeamDisplayName"])(Object(le["getCurrentTeam"])(t)),clogger:Object(D["a"])({state:t}),isPrimarySearchFeatureEnabled:Object($n["a"])(t),showSearchAsActive:er(t)||Object(Mn["isSearchAutocompleteOpen"])(t)}};var or={openSearchAutocomplete:Mn["openSearchAutocomplete"],openFromClick:Xn["a"],clearSearchInputField:In["a"]};var sr=Object(i["connect"])(ir,or)(rr);var lr=a(2073);var cr=new h["b"]("global_nav");var ur=-12;var dr=-4;var pr={theme:c.a.string,renderSonicMenu:c.a.func,featureGlobalNav:c.a.bool};var fr={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var mr=function e(t){var a=t.theme,i=t.renderSonicMenu,o=t.featureGlobalNav;if(!o)return null;var s=f()("p-global_nav__top",a&&"p-global_nav__top--theme-"+a);return r.a.createElement("div",{className:s},r.a.createElement(_t,{renderSonicMenu:i}),r.a.createElement(se,null),r.a.createElement("div",{className:"p-global_nav__top_spacer"}),r.a.createElement(sr,null),r.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),r.a.createElement(ja,null),r.a.createElement(ya,{icon:"star-o",pane:Object(g["a"])()?"starred_items":"stars",tooltip:r.a.createElement(n["Fragment"],null,cr.t("Starred items"),r.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(v["isMac"])()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":cr.t("Starred items")}),r.a.createElement(jn,null),r.a.createElement("div",{className:"p-global_nav__top_spacer"}),r.a.createElement(sa,null))};mr.displayName="TopNav";mr.defaultProps=fr;var hr=function e(t){return{theme:Object(m["getUserPref"])(t,"sidebar_theme"),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var vr=Object(i["connect"])(hr)(mr);var gr=a(3480);var br=a(12);var _r=a(372);var yr=a(992);var kr=a(374);var Or=a(1438);var wr=a(1423);var Er=Object(_e["c"])("TS.ui.edit_member_profile.start");var Cr=a(902);var jr=Object(_e["c"])("TS.ui.channel_prefs_dialog.start");var Sr=a(1086);var Ir=Object(_e["c"])("TS.ui.mpim_conversion_modal.startMpimConversionModal");var Tr=Object(_e["c"])("TS.ui.im_browser.startWithMpim");var Nr=Object(_e["c"])("TS.ui.apps_browser.startAddApps");var Ar=a(708);var Rr=a(214);var Mr=a(35);var xr=a.n(Mr);var Pr=a(472);var Dr=new h["b"]("global_nav");var Fr={channelId:c.a.string.isRequired,channel:c.a.object,close:c.a.func,back:c.a.func,featureGlobalNav:c.a.bool};var Lr={channel:void 0,close:I["noop"],back:I["noop"],featureGlobalNav:false};var Br=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onDateChange=a.onDateChange.bind(a);return a}w()(t,[{key:"onDateChange",value:function e(t){var a=t.selectedDate;var n=this.props,r=n.channelId,i=n.close;var o=xr()(a,"YYYY-MM-DD").format("X");Object(At["p"])(r,o);i()}},{key:"render",value:function e(){var t=this.props,a=t.channel,n=t.back,i=t.featureGlobalNav;if(!i)return null;var o=a.created?xr()(a.created,"X").format("YYYY-MM-DD"):void 0;return r.a.createElement(N["f"],_()({},this.props,{width:325}),r.a.createElement(Pr["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:o,disableDatesAfter:xr()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),r.a.createElement(q["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back",onClick:n},Dr.t("Back to menu")))}}]);return t}(n["Component"]);Br.displayName="JumpToDate";Br.defaultProps=Lr;var Ur=function e(t,a){var n=a.channelId;return{channel:Object(Tt["getChannelById"])(t,n),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var qr=Object(i["connect"])(Ur)(Br);var Gr=a(697);function Hr(e,t){var a=Object(Tt["isChannelExistent"])(e,t)&&Object(Tt["getChannelById"])(e,t);var n=Object(Me["getMemberById"])(e,Object(br["getMemberIdFromIm"])(a));if(!a)return false;if(Object(u["pageNeedsEnterprise"])(e)&&(Object(br["isExternallySharedChannel"])(a)||Object(br["isOrgDefaultChannel"])(a)))return false;if(!Object(br["isIm"])(a)&&!Wr(e))return Vr(e);if(n&&Object(nt["isBotUser"])(n))return false;if(n&&Object(nt["isSelf"])(n))return false;return true}function Wr(e){var t=Object(le["getCurrentTeam"])(e);return Object(Gr["b"])()&&Object(ce["isPaidTeam"])(t)}function Vr(e){var t=Object(m["getTeamPref"])(e,"calling_app_name");return!!(t&&"Slack"!==t)}var zr=a(1091);var Qr=a(677);function Kr(e,t){var a=Object(Tt["getChannelById"])(e,t);if(!e||!a)return null;var n=Object(Me["getMemberById"])(e,Object(br["getMemberIdFromIm"])(a));var r=Object(Me["getCurrentMember"])(e);var i=Object(br["getChannelType"])(a);var o="im"===i;var s="mpim"===i;var l="channel"===i;var c="private"===i;var d=l||c;var p=Object(br["isYou"])(r.id,a);var f=Hr(e,t);var h=true;var v=!o&&!Object(nt["isUltraRestricted"])(r);var g=p;var b=o&&!p;var _=o&&!p&&!Object(br["isSlackbotOrTeambot"])(a,true)&&!Object(nt["isUltraRestricted"])(r)&&!Object(nt["isUltraRestricted"])(n)&&!Object(nt["isDeleted"])(n)&&!Object(nt["isExternal"])(n);var y=true;var k=d&&!Object(nt["isUltraRestricted"])(r)&&!Object(nt["isRestricted"])(r)&&Object(br["isMemberOfChannel"])(a)&&(!Object(br["isRequired"])(a)||Object(rt["g"])(a))&&(!Object(u["pageNeedsEnterprise"])(e)||!(Object(br["isOrgShared"])(a)&&!Object(rt["c"])()));var O=Object(zr["b"])(a);var w=s&&Object(rt["d"])()&&!Object(br["isExternallySharedChannel"])(a);var E=!o&&(s||Object(br["isMemberOfChannel"])(a)&&!Object(br["isArchived"])(a));var C=E;var j=Object(Qr["a"])()||d&&!(Object(u["pageNeedsEnterprise"])(e)&&Object(br["isOrgShared"])(a));var S=Object(m["getTeamPref"])(e,"allow_email_ingestion");var I=d&&Object(br["isMemberOfChannel"])(a)&&!Object(br["isArchived"])(a)&&!Object(br["isRequired"])(a)&&!Object(nt["isUltraRestricted"])(r)&&!Object(nt["isRestricted"])(r);var T=d&&!Object(br["isMemberOfChannel"])(a)&&!Object(br["isArchived"])(a)&&!Object(nt["isUltraRestricted"])(r)&&!Object(nt["isRestricted"])(r);var N=!l&&Object(rt["e"])(a);var A=Object(br["isArchived"])(a)&&!Object(br["getIsChannelMoved"])(a);var R=Object(br["isArchived"])(a)&&Object(nt["isAdmin"])(r)&&l&&!Object(br["isRequired"])(a);return{call:f,jump:h,invite:v,editProfile:g,viewProfile:b,addMember:_,details:y,options:k,retention:O,convertToPrivate:w,notifications:E,mute:C,apps:j,email:S,leave:I,join:T,exportHistory:N,unarchive:A,delete:R}}var Yr=a(135);var Jr=a(761);var Zr=new h["b"]("global_nav");var Xr=Object(Sa["b"])("Un-archive a channel",function(e,t,a){var n=a.channelId;if(!Object(u["isFeatureEnabled"])(t(),"feature_global_nav"))return;e(Object(Yr["J"])({channelId:n})).catch(function(a){Object(P["a"])({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",a);var n=Object(I["get"])(a,"data.error");var i="restricted_action"===n?Zr.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Zr.t("Sorry, something went wrong. Try again in a moment.");e(Object(Ia["openModal"])({element:r.a.createElement(Jr["a"],{title:Zr.t("Un-archive failed")},i)}))})});Xr.propTypes={channelId:c.a.string.isRequired};var $r=Xr;var ei=new h["b"]("global_nav");var ti={channelId:c.a.string.isRequired,channel:c.a.object.isRequired,onMenuItemSelected:c.a.func,actions:c.a.object,displayName:c.a.string,isMuted:c.a.bool,joinChannel:c.a.func,unarchiveChannel:c.a.func,gantryStartCall:c.a.func,featureGlobalNav:c.a.bool};var ai={onMenuItemSelected:I["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:I["noop"],unarchiveChannel:I["noop"],gantryStartCall:I["noop"],featureGlobalNav:false};var ni=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMenuItemSelected=a.onMenuItemSelected.bind(a);a.getMuteLabel=a.getMuteLabel.bind(a);a.getItems=a.getItems.bind(a);a.preventClose=false;a.state={mode:"menu"};return a}w()(t,[{key:"onMenuItemSelected",value:function e(t,a){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,a)}},{key:"getMuteLabel",value:function e(){var t=this.props,a=t.isMuted,n=t.channel,r=t.displayName,i=t.featureGlobalNav;var o="mpim"===Object(br["getChannelType"])(n);if(!i)return null;if(a&&o)return ei.t("Unmute this conversation");if(a&&!o)return ei.t("Unmute {channelName}",{channelName:r});if(!a&&o)return ei.t("Mute this conversation");if(!a&&!o)return ei.t("Mute {channelName}",{channelName:r});return null}},{key:"getItems",value:function e(){var t=this;var a=this.props,n=a.channelId,r=a.channel,i=a.actions,o=a.displayName,s=a.joinChannel,l=a.featureGlobalNav;var c=Object(br["getChannelType"])(r);var u=Object(br["getMemberIdFromIm"])(r);if(!i||!c||!l)return[];var d="mpim"===c;var p="channel"===c;var f="private"===c;var m=p||f;var v=[{label:ei.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:d?ei.t("Invite another member\u2026"):ei.t("Invite new members to join\u2026"),show:i.invite,key:"invite",click:function e(){return d?Tr(r):Object(wr["a"])(n)}},{label:ei.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return Er()}},{label:ei.t("View {userPossesive} profile",{userPossesive:Object(h["c"])(o)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(At["h"])(u)}},{label:ei.t("Add {userName} to a channel\u2026",{userName:o}),show:i.addMember,key:"addMember",click:function e(){return Object(Sr["a"])(u)}},{label:m?ei.t("View channel details"):ei.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(ma["c"])("details")}},{label:ei.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return Object(Cr["a"])(n)}},{label:ei.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return Ir(r)}},{label:ei.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return Object(Cr["a"])(n,"retention")}},{type:"separator",key:"separator-1"},{label:ei.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return jr(n)}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return Object(Ar["c"])(n)}},{type:"separator",key:"separator-2"},{label:ei.t("Add an app"),show:i.apps,key:"apps",click:function e(){return Nr()}},{label:d?ei.t("Send email to this conversation\u2026"):ei.t("Send email to {channelName}\u2026",{channelName:o}),show:i.email,key:"email",href:"/services/new/email",target:"_blank"},{type:"separator",key:"separator-3"},{label:ei.t("Leave {channelName}",{channelName:o}),show:i.leave,key:"leave",click:function e(){return Object(Rr["o"])(n)}},{label:ei.t("Join {channelName}",{channelName:o}),show:i.join,key:"join",click:function e(){return s({channelId:n})}},{type:"separator",key:"separator-4"},{label:ei.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return Object(Cr["a"])(n,"export")}},{type:"separator",key:"separator-5"},{label:ei.t("Un-archive {channelName}",{channelName:o}),show:i.unarchive,key:"unarchive",click:function e(){return t.props.unarchiveChannel({channelId:n})}},{label:ei.t("Delete {channelName}",{channelName:o}),show:i.delete,key:"unarchive",click:function e(){return Object(Cr["a"])(n,"delete")}}];return v.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return r.a.createElement(N["a"],_()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return r.a.createElement(qr,_()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(n["Component"]);ni.displayName="Menu";ni.defaultProps=ai;var ri=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);return{channel:r,actions:Kr(t,n),displayName:Object(br["getDisplayNameForChannel"])(t,r,{imIncludeAtSign:false}),isMuted:Object(kr["isChannelMutedById"])(t,n),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var ii={joinChannel:Tt["joinConversationApi"],unarchiveChannel:$r,gantryStartCall:Or["b"]};var oi=Object(i["connect"])(ri,ii)(ni);var si=new h["b"]("channel_header");var li={channelId:c.a.string,name:c.a.string,type:c.a.string.isRequired,userId:c.a.string,members:c.a.oneOfType([c.a.array,c.a.bool]),presences:c.a.oneOfType([c.a.object,c.a.bool]),currentUser:c.a.string.isRequired,isMuted:c.a.bool,isOrgShared:c.a.bool.isRequired,isExternallyShared:c.a.bool.isRequired,isPendingExternallyShared:c.a.bool.isRequired,sharedTeamIds:c.a.arrayOf(c.a.string),className:c.a.string,featureGlobalNav:c.a.bool,clogger:c.a.object.isRequired};var ci={channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var ui=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderChannel=a.renderChannel.bind(a);a.renderPrivate=a.renderPrivate.bind(a);a.renderIM=a.renderIM.bind(a);a.renderMPIM=a.renderMPIM.bind(a);a.renderMenu=a.renderMenu.bind(a);a.onClick=a.onClick.bind(a);return a}w()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function e(t){var a="#"+this.props.name;return r.a.createElement(t,null,a)}},{key:"renderPrivate",value:function e(t){return r.a.createElement(n["Fragment"],null,r.a.createElement(T["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),r.a.createElement(t,null,this.props.name))}},{key:"renderIM",value:function e(t){var a=this.props.userId;return r.a.createElement(n["Fragment"],null,r.a.createElement(t,null,r.a.createElement(_r["a"],{id:a,key:"name"})),r.a.createElement(wt["a"],{memberId:a,className:"p-global_nav__channel_name_presence",key:"presence"}),r.a.createElement(Ot["a"],{memberId:a,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var a=this;var i=this.props,o=i.members,s=i.presences;var l=Object(I["flatMap"])(Object(I["filter"])(o,function(e){return e!==a.props.currentUser}),function(e,t){var a=s[e]===St["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return r.a.createElement(n["Fragment"],{key:e},t>0?", ":null,r.a.createElement(_r["a"],{id:e,className:a}),r.a.createElement(Ot["a"],{memberId:e,tooltip:false,noText:true}))});return r.a.createElement(t,null,l)}},{key:"renderShared",value:function e(){var t=this.props,a=t.isOrgShared,n=t.isExternallyShared,i=t.isPendingExternallyShared,o=t.sharedTeamIds;if(a)return r.a.createElement(G["d"],{tip:si.t("Shared channel"),position:"bottom"},r.a.createElement(T["b"],{type:"shared-channel",inline:true,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}));if(n)return r.a.createElement(yr["a"],{sharedTeamIds:o,pending:i,inline:true,tooltip:true,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"});return null}},{key:"renderMenu",value:function e(t){return r.a.createElement(oi,_()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){var t=this;var a=this.props,n=a.type,i=a.className,o=a.isMuted,s=a.featureGlobalNav;if(!s)return null;var l=function e(a){var n=a.children;return r.a.createElement(N["e"],{renderMenu:t.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:t.onClick},r.a.createElement(q["c"],{className:"p-global_nav__channel_name_name"},n))};var c=void 0;switch(n){case"channel":c=this.renderChannel(l);break;case"private":c=this.renderPrivate(l);break;case"im":c=this.renderIM(l);break;case"mpim":c=this.renderMPIM(l);break;default:break}var u=f()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+n,o&&"p-global_nav__channel_name--muted",i);return r.a.createElement("div",{className:u,"data-qa":"channel_name"},c,this.renderShared())}}]);return t}(n["Component"]);ui.displayName="Name";ui.defaultProps=ci;var di=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);var i=Object(br["getMemberIdsFromMpim"])(r);var o=i&&Object(I["mapValues"])(Object(I["keyBy"])(i),function(e){return Object(St["getPresenceByMemberId"])(t,e)});return{channelId:n,name:Object(br["getDisplayName"])(r),type:Object(br["getChannelType"])(r),userId:Object(br["getMemberIdFromIm"])(r)||r.user_id,currentUser:Object(u["getCurrentUserId"])(t),isMuted:Object(kr["isChannelMutedById"])(t,n),members:i,presences:o,isOrgShared:Object(br["isOrgSharedPublicOrPrivateChannel"])(r),isExternallyShared:Object(br["isExternallySharedChannel"])(r),isPendingExternallyShared:Object(br["isPendingExternallySharedChannel"])(r),sharedTeamIds:Object(br["getMaybePendingSharedTeamIds"])(r),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var pi=Object(i["connect"])(di)(ui);var fi=a(258);var mi=Object(_e["c"])("TS.ui.channel_topic_dialog.start");var hi={start:mi};var vi=new h["b"]("global_nav");var gi={topic:c.a.string,isChannel:c.a.bool.isRequired,canEdit:c.a.bool,featureGlobalNav:c.a.bool.isRequired};var bi={topic:void 0,canEdit:true};var _i=function e(t){if(t.target&&"A"===t.target.tagName)return;mi()};var yi=function e(t){var a=t.topic,i=t.isChannel,o=t.canEdit,s=t.featureGlobalNav;if(!s||!i)return null;var l=void 0;if(a){var c=r.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},vi.t("edit"));l=r.a.createElement(n["Fragment"],null,r.a.createElement("div",{className:"p-global_nav__channel_topic_text"},r.a.createElement(Zn["a"],{text:a,className:"p-global_nav__channel_topic_content",noJumbomoji:true,noHighlights:true})),o&&c)}else l=o?r.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},vi.t("Add a topic\u2026")):null;var u=f()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!a});return r.a.createElement(q["c"],{className:u,onClick:_i},l)};yi.displayName="Topic";yi.defaultProps=bi;var ki=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);return{topic:r&&r.topic&&r.topic.value,isChannel:!!(Object(br["isPublicChannel"])(r)||Object(br["isPrivateChannel"])(r)),canEdit:Object(fi["j"])(t,n),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var Oi=Object(i["connect"])(ki)(yi);var wi=a(787);var Ei=new h["b"]("global_nav");var Ci={channelId:c.a.string.isRequired,type:c.a.oneOf(["channel","private","im","mpim"]),starred:c.a.bool.isRequired,show:c.a.bool.isRequired,updateStar:c.a.func.isRequired,featureGlobalNav:c.a.bool.isRequired,clogger:c.a.object.isRequired};var ji={type:"channel",starred:false};var Si=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}w()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,n=t.starred,r=t.clogger;this.props.updateStar(!n,{channel:a});r.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function e(){var t=this.props,a=t.type,n=t.starred,r=t.featureGlobalNav;if(!r)return null;if("im"===a||"mpim"===a)return n?Ei.t("Unstar this conversation"):Ei.t("Star this conversation");return n?Ei.t("Unstar this channel"):Ei.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,a=t.starred,n=t.show;if(!n)return null;return r.a.createElement(G["d"],{position:"bottom",tip:this.getTip()},r.a.createElement(q["c"],{className:f()("p-global_nav__channel_star",a&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},r.a.createElement(T["b"],{type:a?"star":"star-o",size:"inherit"})))}}]);return t}(n["Component"]);Si.displayName="Star";Si.defaultProps=ji;var Ii=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);return{type:Object(br["getChannelType"])(r),show:Object(br["canStarOrUnstarChannel"])(r),starred:Object(br["isStarred"])(r),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var Ti={updateStar:wi["a"]};var Ni=Object(i["connect"])(Ii,Ti)(Si);var Ai=new h["b"]("global_nav");var Ri={count:c.a.number,isChannel:c.a.bool,featureGlobalNav:c.a.bool,clogger:c.a.object.isRequired};var Mi={count:void 0,isChannel:true,featureGlobalNav:false};var xi=function e(t){var a=t.count,i=t.isChannel,o=t.clogger,s=t.featureGlobalNav;if(!s)return null;if(!a&&!i)return null;var l=function e(t){var a=t.key,i=t.text;return r.a.createElement(n["Fragment"],{key:a},r.a.createElement("span",{className:"bold"},i),"\xa0")};var c=Object(I["isNumber"])(a)?Ai.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:a},l):Ai.rt("<span>\u2013</span>Pins",{count:a},l);var u=Object(I["isNumber"])(a)?Ai.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:a},l):Ai.t("View pinned items");var d=function e(){Object(ma["f"])();o.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})};return r.a.createElement(G["d"],{position:"bottom",tip:Ai.t("View pinned items"),offsetY:-4,delay:G["a"]},r.a.createElement(q["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:d,"aria-label":u},c))};xi.displayName="Pins";xi.defaultProps=Mi;var Pi=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);return{count:r&&r.pinned_items_count,isChannel:Object(br["isPublicChannel"])(r)||Object(br["isPrivateChannel"])(r),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var Di=Object(i["connect"])(Pi)(xi);var Fi=a(203);var Li=new h["b"]("global_nav");var Bi={count:c.a.number,featureGlobalNav:c.a.bool,clogger:c.a.object.isRequired};var Ui={count:void 0,featureGlobalNav:false};var qi=function e(t){var a=t.count,i=t.clogger,o=t.featureGlobalNav;if(!o)return null;var s=function e(t){var a=t.key,i=t.text;return r.a.createElement(n["Fragment"],{key:a},r.a.createElement("span",{className:"bold"},i),"\xa0")};var l=Object(I["isNumber"])(a)?Li.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:a},s):Li.rt("<span>\u2013</span>Members",{count:a},s);var c=Object(I["isNumber"])(a)?Li.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:a},s):Li.t("View member list");var u=function e(){Object(ma["e"])();i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})};return r.a.createElement(G["d"],{position:"bottom",tip:Li.t("View member list"),offsetY:-4,delay:G["a"]},r.a.createElement(q["c"],{className:"p-global_nav__channel_info_item",onClick:u,"aria-label":c},l))};qi.displayName="Members";qi.defaultProps=Ui;var Gi=function e(t,a){var n=a.channelId;var r=Object(Fi["getMemberCounts"])(t,n);return{count:r&&r.counts&&r.counts.member_count,featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var Hi=Object(i["connect"])(Gi)(qi);var Wi=new h["b"]("channel_header");var Vi={channelId:c.a.string.isRequired,featureGlobalNav:c.a.bool,clogger:c.a.object.isRequired};var zi={featureGlobalNav:false};var Qi=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}w()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function e(t){return r.a.createElement(oi,_()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return r.a.createElement(N["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},r.a.createElement(G["d"],{position:"bottom-right",tip:Wi.t("Channel settings"),offsetY:-4},r.a.createElement(q["c"],{className:"p-global_nav__channel_info_item","aria-label":Wi.t("Channel settings")},r.a.createElement(T["b"],{type:"cog-o"}))))}}]);return t}(n["Component"]);Qi.displayName="Actions";Qi.defaultProps=zi;var Ki=function e(t){return{featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var Yi=Object(i["connect"])(Ki)(Qi);var Ji=a(754);var Zi=new h["b"]("global_nav");var Xi={isBot:c.a.bool,activeTab:c.a.oneOf(["messages","about"]),featureGlobalNav:c.a.bool};var $i={isBot:false,activeTab:"messages",featureGlobalNav:false};var eo=function e(t){var a=t.isBot,i=t.activeTab,o=t.featureGlobalNav;if(!o||!a)return null;return r.a.createElement(n["Fragment"],null,r.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},r.a.createElement(q["c"],{className:f()("p-global_nav__channel_bot_tab","messages"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(Ji["a"])("messages")},"data-qa":"global_nav_channel_bot_tabs_messages"},Zi.t("Messages")),r.a.createElement(q["c"],{className:f()("p-global_nav__channel_bot_tab","about"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(Ji["a"])("about")},"data-qa":"global_nav_channel_bot_tabs_about"},Zi.t("About"))),r.a.createElement("div",{className:"p-global_nav__channel_divider"}))};eo.displayName="BotTabs";eo.defaultProps=$i;var to=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);var i=Object(br["getMemberIdFromIm"])(r);if(!i)return{};var o=Object(Me["getMemberById"])(t,i);return{isBot:Object(nt["isAppOrBot"])(o),activeTab:Object(ua["getActiveAppTab"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var ao=Object(i["connect"])(to)(eo);var no=new h["b"]("global_nav");var ro={show:c.a.bool,channel:c.a.object,featureGlobalNav:c.a.bool,createOrJoinGantryCall:c.a.func};var io={show:false,channel:void 0,featureGlobalNav:false,createOrJoinGantryCall:I["noop"]};var oo=function e(t){var a=t.show,n=t.channel,i=t.featureGlobalNav,o=t.createOrJoinGantryCall;if(!a||!n||!i)return null;return r.a.createElement(G["d"],{position:"bottom",tip:no.t("Start a call"),offsetY:-4},r.a.createElement(q["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(g["a"])()?o():Object(Gr["d"])(n)},"aria-label":no.t("Start a call")},r.a.createElement(T["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};oo.displayName="CallButton";oo.defaultProps=io;var so=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);if(!r)return null;return{show:Hr(t,n),channel:r,featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var lo={createOrJoinGantryCall:Or["b"]};var co=Object(i["connect"])(so,lo)(oo);var uo=new h["b"]("channel_header");var po={isChannel:c.a.bool,active:c.a.bool,featureGlobalNav:c.a.bool,clogger:c.a.object.isRequired};var fo={isChannel:true,active:false,featureGlobalNav:false};var mo=function e(t){var a=t.isChannel,n=t.active,i=t.clogger,o=t.featureGlobalNav;if(!o)return null;var s=void 0;a&&n&&(s=uo.t("Hide channel details"));a&&!n&&(s=uo.t("View channel details"));!a&&n&&(s=uo.t("Hide conversation details"));a||n||(s=uo.t("View conversation details"));var l=f()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":n});var c=function e(){Object(ma["d"])("details");i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})};return r.a.createElement(G["d"],{position:"bottom-right",tip:s,offsetY:-4,delay:G["a"]},r.a.createElement(q["c"],{className:l,onClick:c},uo.t("Details")))};mo.displayName="Details";mo.defaultProps=fo;var ho=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);if(!r)return null;return{isChannel:Object(br["isPublicChannel"])(r)||Object(br["isPrivateChannel"])(r),active:"details"===Object(It["getSecondaryView"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(D["a"])({state:t})}};var vo=Object(i["connect"])(ho)(mo);var go={channelId:c.a.string.isRequired,channelType:c.a.oneOf(["channel","private","mpim","im"]),featureGlobalNavLayout:c.a.bool};var bo={channelType:void 0,featureGlobalNavLayout:false};var _o=function e(t){var a=t.channelId,n=t.channelType,i=t.featureGlobalNavLayout;if(!a||!n)return null;var o=f()("p-global_nav__channel",{"p-global_nav__channel--relayout":i});return r.a.createElement("div",{className:o},r.a.createElement(Ni,{channelId:a}),r.a.createElement(pi,{channelId:a}),r.a.createElement(Oi,{channelId:a}),r.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),r.a.createElement(ao,{channelId:a}),"im"!==n&&r.a.createElement(Hi,{channelId:a}),r.a.createElement(Di,{channelId:a}),r.a.createElement(vo,{channelId:a}),r.a.createElement("div",{className:"p-global_nav__channel_divider"}),r.a.createElement(co,{channelId:a}),r.a.createElement(Yi,{channelId:a}))};_o.displayName="ModelHeader";_o.defaultProps=bo;var yo=function e(t,a){var n=a.channelId;var r=Object(Tt["getChannelById"])(t,n);if(!r)return{};return{channelType:Object(br["getChannelType"])(r),featureGlobalNavLayout:Object(u["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var ko=Object(i["connect"])(yo)(_o);var Oo=a(159);var wo=new h["b"]("global_nav");var Eo={featureGlobalNav:c.a.bool,featureGlobalNavLayout:c.a.bool,featureThreadsCopyChange:c.a.bool};var Co={featureGlobalNav:false,featureGlobalNavLayout:false,featureThreadsCopyChange:false};var jo=function e(t){var a=t.featureGlobalNav,n=t.featureGlobalNavLayout,i=t.featureThreadsCopyChange;if(!a)return null;var o=i?wo.t("Threads"):wo.t("All Threads");var s="p-global_nav__channel_name p-global_nav__channel_name--synthetic";var l=f()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":n});return r.a.createElement("div",{className:l,"data-qa":"channel_name"},r.a.createElement("div",{className:s},o))};jo.displayName="AllThreadsHeader";jo.defaultProps=Co;var So=Object(Oo["a"])("feature_global_nav","feature_global_nav_layout","feature_threads_copy_change")(jo);var Io=a(240);function To(e){var t=Object(m["getUserPref"])(e,"all_unreads_sort_order");if(t)return t;return Object(ce["isPaidTeam"])(Object(le["getCurrentTeam"])(e))?"priority":"alphabetical"}var No=a(480);var Ao=a(1007);var Ro=new h["b"]("global_nav");var Mo={hasUnreads:c.a.bool,sortOrder:c.a.string,newUnreads:c.a.number,setUserPrefByApi:c.a.func,featureGlobalNav:c.a.bool,featureGlobalNavLayout:c.a.bool};var xo={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:I["noop"],featureGlobalNav:false,featureGlobalNavLayout:false};var Po=function(e){S()(t,e);function t(e){k()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSortButton=a.renderSortButton.bind(a);a.renderSortMenu=a.renderSortMenu.bind(a);return a}w()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(Ao["b"])()}},{key:"renderSortMenu",value:function e(t){var a=this;if(!this.props.featureGlobalNav)return null;var n=[{label:Ro.t("Alphabetically"),click:function e(){return a.changeSort("alphabetical")}},{label:Ro.t("Scientifically"),click:function e(){return a.changeSort("priority")}},{label:Ro.t("Newest channel"),click:function e(){return a.changeSort("newest")}},{label:Ro.t("Oldest channel"),click:function e(){return a.changeSort("oldest")}}];return r.a.createElement(N["a"],_()({},t,{template:n}))}},{key:"renderSortButton",value:function e(){var t=this.props,a=t.hasUnreads,n=t.sortOrder,i=t.featureGlobalNav;if(!i)return null;if(!a)return null;var o={alphabetical:Ro.rt("<strong>Sort:</strong> Alphabetically"),priority:Ro.rt("<strong>Sort:</strong> Scientifically"),oldest:Ro.rt("<strong>Sort:</strong> Oldest channel"),newest:Ro.rt("<strong>Sort:</strong> Newest channel")};var s=o[n];return r.a.createElement(N["e"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},r.a.createElement(q["c"],{className:"p-global_nav__unread_sort"},s,r.a.createElement(T["b"],{type:"chevron-down",inline:true})))}},{key:"renderRefreshButton",value:function e(){var t=this.props,a=t.newUnreads,n=t.featureGlobalNav;if(!n||!a)return null;var i=Ro.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:a});return r.a.createElement(q["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:Ao["c"]},r.a.createElement(T["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),i)}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;var t=f()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":this.props.featureGlobalNavLayout});return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},Ro.t("All Unreads")),this.renderRefreshButton(),r.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(n["Component"]);Po.displayName="AllUnreadsHeader";Po.defaultProps=xo;var Do=function e(t){return{hasUnreads:Object(No["hasUnreads"])(t),sortOrder:To(t),newUnreads:Object(ua["getNewUnreads"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(u["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Fo={setUserPrefByApi:Io["c"]};var Lo=Object(i["connect"])(Do,Fo)(Po);var Bo={id:c.a.string};var Uo={id:void 0};var qo=function e(t){var a=t.id;if(!a)return null;if("Vall_threads"===a)return r.a.createElement(So,null);if("Vall_unreads"===a)return r.a.createElement(Lo,null);if("Vsearch"===a)return r.a.createElement(gr["a"],null);return r.a.createElement(ko,{channelId:a})};qo.displayName="ChannelHeader";qo.defaultProps=Uo;var Go=function e(t){return{id:Object(It["getPrimaryView"])(t)}};var Ho=Object(i["connect"])(Go)(qo);var Wo=a(3466);var Vo=a(9);var zo=a.n(Vo);var Qo={closeFlexpane:c.a.func};var Ko={closeFlexpane:I["noop"]};var Yo=function e(t){return r.a.createElement(q["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},r.a.createElement(T["b"],{type:"times"}))};Yo.displayName="FlexClose";Yo.defaultProps=Ko;var Jo=Object(i["connect"])(null,{closeFlexpane:fa["a"]})(Yo);var Zo=a(1424);var Xo=a(65);var $o=a(207);var es=a(36);var ts=new h["b"]("global_nav");var as=function e(t){var a=t.channelId,n=t.threadTs,i=t.name,o=t.isChannel,s=t.featureGlobalNav;if(!s)return null;var l=Object(es["constructMsgPermalink"])(a,n);var c=void 0;if(i){var u=r.a.createElement(Xo["a"],{href:l,className:"p-global_nav__flex_thread_permalink"},i);c=o?ts.rt("Thread in {channelName}",{channelName:u}):ts.rt("Thread with {displayName}",{displayName:u})}else c=ts.t("Thread");return r.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},c)};as.displayName="ThreadHeader";as.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:true,featureGlobalNav:false};var ns=function e(t){var a=Object(It["getFlexParams"])(t)[0];var n=Object($o["decodeThreadKey"])(a),r=n.channelId,i=n.threadTs;var o=Object(Tt["getChannelById"])(t,r);if(!o)return null;return{channelId:r,threadTs:i,name:Object(br["getDisplayNameForChannel"])(t,o),isChannel:Object(br["isPublicChannel"])(o)||Object(br["isPrivateChannel"])(o),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var rs=Object(i["connect"])(ns)(as);var is=new h["b"]("global_nav");var os=function e(t){var a=t.name,n=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return n&&a?r.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},is.t("About {channelName}",{channelName:a})):r.a.createElement("h2",{className:"p-global_nav__flex_title"},is.t("About this conversation"))};os.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var ss=function e(t){var a=Object(It["getPrimaryView"])(t);var n=Object(Tt["getChannelById"])(t,a);if(!n)return null;return{name:Object(br["getDisplayNameForChannel"])(t,n),isChannel:Object(br["isPrivateChannel"])(n)||Object(br["isPublicChannel"])(n),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var ls=Object(i["connect"])(ss)(os);var cs=new h["b"]("global_nav");var us={isAdminUser:c.a.bool,isEnterprise:c.a.bool,isDetailPane:c.a.bool,featureGlobalNav:c.a.bool};var ds={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var ps=function e(t){var a=t.isAdminUser,i=t.isEnterprise,o=t.isDetailPane,s=t.featureGlobalNav;if(!s)return null;var l=i?cs.t("Organization Directory"):cs.t("Workspace Directory");var c=a&&!o&&r.a.createElement(n["Fragment"],null,r.a.createElement(G["d"],{tip:cs.t("Manage members"),position:"bottom-right"},r.a.createElement(q["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},r.a.createElement(T["b"],{type:"cog-o"}))),r.a.createElement("div",{className:"p-global_nav__flex_divider"}));return r.a.createElement(n["Fragment"],null,r.a.createElement("h2",{className:"p-global_nav__flex_title"},l),c)};ps.displayName="DirectoryHeader";ps.defaultProps=ds;var fs=function e(t){return{isAdminUser:Object(nt["isAdmin"])(Object(Me["getCurrentMember"])(t)),isEnterprise:Object(ce["isEnterpriseTeam"])(Object(le["getCurrentTeam"])(t)),isDetailPane:!Object(I["isEmpty"])(Object(It["getFlexParams"])(t)),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var ms=Object(i["connect"])(fs)(ps);var hs=a(896);var vs=new h["b"]("global_nav");var gs={numDownloads:c.a.number,featureGlobalNav:c.a.bool};var bs={numDownloads:0,featureGlobalNav:false};var _s=function e(t){var a=t.numDownloads,i=t.featureGlobalNav;if(!i)return null;var o=a>1&&r.a.createElement(n["Fragment"],null,r.a.createElement(q["c"],{onClick:L["clearDownloads"],className:"p-global_nav__flex_btn"},vs.t("Clear all")),r.a.createElement("div",{className:"p-global_nav__flex_divider"}));return r.a.createElement(n["Fragment"],null,r.a.createElement("h2",{className:"p-global_nav__flex_title"},vs.t("Downloads")),o)};_s.displayName="DownloadsHeader";_s.defaultProps=bs;var ys=function e(t){return{numDownloads:(Object(hs["getDownloads"])(t)||[]).length,featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};var ks=Object(i["connect"])(ys)(_s);var Os=new h["b"]("global_nav");var ws={flexName:c.a.string,featureGlobalNav:c.a.bool,featureGlobalNavLayout:c.a.bool};var Es={flexName:void 0,featureGlobalNav:void 0,featureGlobalNavLayout:void 0};var Cs=function(e){S()(t,e);function t(){k()(this,t);return C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}w()(t,[{key:"renderTitle",value:function e(){var t=this.props,a=t.flexName,n=t.featureGlobalNav;if(!n)return null;var i="p-global_nav__flex_title";switch(a){case"convo":case"thread":return r.a.createElement(rs,null);case"files":return r.a.createElement("h2",{className:i},Os.t("Files"));case"stars":case"starred_items":return r.a.createElement("h2",{className:i},Os.t("Starred Items"));case"mentions":return r.a.createElement("h2",{className:i},Os.t("Activity"));case"team":return r.a.createElement(ms,null);case"whats_new":return r.a.createElement("h2",{className:i},Os.t("What\u2019s New"));case"groups":case"user_groups":return r.a.createElement("h2",{className:i},Os.t("User Groups"));case"shortcuts":return r.a.createElement("h2",{className:i},Os.t("Keyboard Shortcuts"));case"downloads":return r.a.createElement(ks,null);case"details":return r.a.createElement(ls,null);case"apps":return r.a.createElement("h2",{className:i},Os.t("About this app"));default:return r.a.createElement("h2",{className:i},"Unimplemented: ",a)}}},{key:"render",value:function e(){var t=this.props,a=t.flexName,n=t.featureGlobalNavLayout;if(!a)return null;var i=f()(zo()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(g["a"])(),"p-global_nav__flex--legacy":!Object(g["a"])(),"p-global_nav__flex--relayout":n},"p-global_nav__flex--"+a,true));return r.a.createElement("div",{className:i},r.a.createElement(Zo["a"],null),this.renderTitle(),r.a.createElement(Jo,null))}}]);return t}(n["Component"]);Cs.displayName="FlexHeader";Cs.defaultProps=Es;var js=function e(t){return{flexName:Object(It["getSecondaryView"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(u["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Ss=Object(i["connect"])(js)(Cs);var Is=function e(t){var a=t.featureGlobalNavLayout;return a?r.a.createElement(n["Fragment"],null,r.a.createElement(d["a"],null),r.a.createElement("div",{className:"p-global_nav p-global_nav--top_only"},r.a.createElement(vr,null))):r.a.createElement(n["Fragment"],null,r.a.createElement(d["a"],null),r.a.createElement("div",{className:"p-global_nav"},r.a.createElement(vr,null),r.a.createElement("div",{className:"p-global_nav__bottom"},r.a.createElement(Wo["a"],null),r.a.createElement(Ho,null),r.a.createElement(Ss,null))))};Is.defaultProps={featureGlobalNavLayout:false};var Ts=function e(t){return{featureGlobalNavLayout:Object(u["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Ns=Object(i["connect"])(Ts)(Is);var As=function e(t,a){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(Ns,null)),a)};var Rs=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(Ho,null)),a)};var Ms=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(Ss,null)),a)};var xs=a(51);Object(xs["a"])("interop.globalNav",{mountGlobalNav:As,mountGlobalNavChannel:Rs,mountGlobalNavFlex:Ms})},,function(e,t,a){"use strict";var n=a(626);var r=a(312);var i=a(79);var o=a(31);var s=a(336);var l=a(26);var c=a(16);var u=a(17);var d=2e4;var p=Object(o["b"])("Ping the message server if necessary",function(e,t){var a=t();var o=Object(l["getCurrentMember"])(a);if(!o){Object(u["a"])({state:a}).error("Skipping tickle because no user exists");return}if(!Object(i["isConnected"])(a))return;if(Object(c["getMemberManualPresence"])(o)===r["PRESENCE_AWAY"])return;var p=Date.now()-Object(n["timeOfLastSocketActivity"])(a);if(p<d)return;e(Object(s["send"])({type:"tickle"}))});t["a"]=p},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(1438);var i=a(2963);Object(n["a"])("interop.calls",{startOrJoinCall:r["b"],handleCallInvite:i["b"]})},function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1);var r=a.n(n);var i=a(14);var o=a(139);var s=a(33);var l=a(5);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var f=a.n(p);var m=a(8);var h=a.n(m);var v=a(2);var g=a(10);var b=a(26);var _=a(50);var y=a(11);var k=a(16);var O=a(48);var w=a(703);var E=a(337);var C=a(20);var j=a(18);var S=a(3479);var I=a(2963);var T=a(271);var N=a(3486);var A=new g["b"]("incoming_call_window");var R=function(e){h()(t,e);function t(){c()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getSrcSetAttribute",value:function e(t){if(!t)return"";return t+" 2x"}},{key:"maybeRenderGuestBadge",value:function e(){if(this.props.isUltraRestricted)return r.a.createElement(j["b"],{type:"single-channel-guest",inline:true});if(this.props.isRestricted)return r.a.createElement(j["b"],{type:"restricted-user",inline:true});return null}},{key:"renderUserImage",value:function e(){var t=this.props.avatarUrls,a=t.imageUrl,n=t.imageUrl2x;if(a||n)return r.a.createElement("img",{className:"p-incoming_call__member_image",src:a||n,srcSet:this.getSrcSetAttribute(n),alt:""});return null}},{key:"renderExternalTeamLabel",value:function e(){return r.a.createElement("div",{className:"p-incoming_call__external_team_banner"},r.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),r.a.createElement(E["b"],{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function e(){return r.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},r.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function e(){var t=this.props.featureSpockCalls?A.t("is calling you"):"";return r.a.createElement("div",{className:"p-incoming_call__user_caption"},t)}},{key:"renderCallButtons",value:function e(){var t=this;return r.a.createElement("div",{className:"p-incoming_call__button_container"},r.a.createElement(C["d"],{type:"danger",size:"medium",onClick:function e(){return t.props.onDeclineCall()},className:"p-incoming_call__button"},r.a.createElement(j["b"],{type:"times"})),r.a.createElement(C["d"],{type:"primary",size:"medium",onClick:function e(){return t.props.onAcceptCall()},className:"p-incoming_call__button"},r.a.createElement(j["b"],{type:"phone"})))}},{key:"render",value:function e(){return r.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),r.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]);return t}(n["PureComponent"]);R.displayName="IncomingCall";var M=function e(t,a){var n=Object(T["d"])(t,a.callId);var r=n.inviterUserId;Object(S["a"])(!!r);var i=Object(b["getMemberById"])(t,r);var o=Object(k["getMemberTeamId"])(i);var s=Object(_["getTeamById"])(t,o);var l=Object(k["isExternal"])(i);var c=Object(k["getPrefCompliantMemberName"])(t,i);var u=Object(O["getTeamDisplayName"])(s);var d=Object(v["get"])(i,"profile.avatar_hash");var p=Object(w["a"])({size:200,teamId:o,memberId:r,avatarHash:d});return{avatarUrls:p,prefCompliantMemberName:c,memberTeamId:o,externalTeamName:u,isRestricted:Object(k["isRestricted"])(i),isUltraRestricted:Object(k["isUltraRestricted"])(i),isExternal:l,featureSpockCalls:Object(y["isFeatureEnabled"])(t,"feature_spock_calls")}};var x={mapStateToProps:M};Object.defineProperty(x,"mapStateToProps",{get:function e(){return M},set:function e(t){M=t}});var P={onAcceptCall:I["a"],onDeclineCall:I["c"]};var D=Object(i["connect"])(M,P)(R);var F=a(866);var L=a(17);var B=a(1134);var U=a(3488);var q=function e(t){var a=t.invitingCall;Object(F["a"])()&&Object(L["b"])().error("BrowserIncomingCall should only be instantiated in a browser.");if(!a)return null;return r.a.createElement("div",{className:"p-browser_incoming_call--shroud"},r.a.createElement("div",{className:"p-browser_incoming_call"},r.a.createElement(D,{callId:a})))};var G=function e(t){var a=Object(T["c"])(t);var n=a&&a.invitationStatus===B["a"].pending?a.id:void 0;return{invitingCall:n}};var H=Object(i["connect"])(G)(q);var W=function e(t,a){if(!t)throw new Error("mountIncomingCall must be called with a teamId parameter");var n=Object(s["d"])(t);Object(o["a"])(r.a.createElement(i["Provider"],{store:n},r.a.createElement(H,null)),a)};var V=W;var z=a(51);Object(z["a"])("interop.mountBrowserIncomingCall",V)},,,function(e,t,a){"use strict";var n=a(0);var r=a.n(n);var i=a(14);var o=a(626);var s={children:r.a.node,isOnline:r.a.bool};var l={children:null,isOnline:null};var c=function e(t){var a=t.isOnline,n=t.children;return a?n:null};c.propTypes=s;c.defaultProps=l;var u=function e(t){return{isOnline:Object(o["isClientOnline"])(t)}};var d=Object(i["connect"])(u)(c);var p={children:r.a.node,isOnline:r.a.bool};var f={children:null,isOnline:null};var m=function e(t){var a=t.isOnline,n=t.children;return a?null:n};m.propTypes=p;m.defaultProps=f;var h=function e(t){return{isOnline:Object(o["isClientOnline"])(t)}};var v=Object(i["connect"])(h)(m);var g=a(79);var b={children:r.a.node,isDegradedMode:r.a.bool};var _={children:null,isDegradedMode:null};var y=function e(t){var a=t.isDegradedMode,n=t.children;return a?n:null};y.propTypes=b;y.defaultProps=_;var k=function e(t){return{isDegradedMode:Object(g["isHavingTroubleReconnecting"])(t)}};var O=Object(i["connect"])(k)(y);a.d(t,"b",function(){return d});a.d(t,"a",function(){return v});a.d(t,false,function(){return})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(160);var i=a(201);var o=a(609);var s=a(1156);var l=a(676);var c=a(362);var u=a(1085);var d=a(332);var p=a(777);var f=a(997);var m=a(892);var h=a(501);var v=a(1108);var g=a(1109);var b=a(1110);var _=a(1111);var y=a(615);function k(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}var O=a(1099);var w=a(1157);var E=a(54);var C=a(103);var j=a(457);var S=a(408);var I=a(420);var T=a(949);var N=a(994);var A=a(314);var R=a(659);var M=a(444);var x=a(352);var P=a(167);var D=a(1106);var F=function(e){if(!e)return false;var t=e.getAttribute("data-contenteditable-override");if(t)return"true"===t;return"true"===e.contentEditable};var L=function(e){if(!e)return false;if("INPUT"===e.nodeName)return true;if("SELECT"===e.nodeName)return true;if("TEXTAREA"===e.nodeName)return true;return F(e)};var B=a(811);function U(e){if(!e)return Promise.resolve();return new Promise(function(t,a){e.then(t).catch(a)})}Object(n["a"])("interop.utility",{addJitter:R["a"],looksLikeChannelId:r["a"],looksLikeMemberId:i["a"],looksLikeTeamId:o["a"],looksLikeFileId:s["a"],looksLikeGlobalActionFrecencyId:N["c"],extractAllBotIds:v["a"],extractAllMemberIds:g["a"],extractAllModelObIds:b["a"],extractAllTeamIds:_["a"],formatThemeColorsArray:function e(t){return Object(D["a"])(TS.redux.getState(),t)},getGlobalNavTheme:P["a"],getStringLength:l["a"],getIconSizeToFit:c["a"],getInitials:u["a"],getBotIdFromUrl:d["a"],looksLikeBotId:p["a"],isVisible:f["a"],ipsum:k,isFileSubtype:j["b"],inTabFlow:m["a"],firstFocusableChild:h["b"],lastFocusableChild:h["c"],snakeCaseKeys:y["a"],isModelObjectExternal:O["a"],isMenuVisible:E["g"],isDialogVisible:C["b"],isFSModalVisible:S["b"],normalize:w["a"],convertFilesize:I["a"],getSystemTextPreferences:T["a"],decodeGlobalActionFrecencyId:N["a"],getGlobalActionForFrecency:N["b"],FILE_SUBTYPES:j["a"],uuidv4:A["a"],formatNumberWithAbbreviation:M["a"],isCmdKey:x["a"],getEmoticonsRx:B["b"],isInputElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return L(a)},isContentEditableElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return F(a)},makeSafeForTimeout:U})},function(e,t,a){"use strict";var n=a(1383);var r=a.n(n);var i=a(238);var o=a(903);var s=a(2);var l=a.n(s);var c=a(187);var u=a(74);var d=Object(c["b"])("Handle side effects",function(e,t,a){var n=u["c"][a.type];n&&Promise.resolve().then(function(){n.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.sideEffect,r=void 0===n?l.a.noop:n,i=t.reasons,o=void 0===i?[]:i;if(o.length){var s=a&&a.payload&&a.payload.reason;if(!l.a.includes(o,s))return}r(a,e.dispatch,e.getState)})});return t(a)});var p=d;var f=a(17);var m=a(27);var h=a(130);var v=[];var g=Object(f["b"])();var b=Object(c["b"])("Allows devs to get console logging or trigger breakpoints when state they care about changes",function(e,t,a){var n=[];var r=e.getState();v.forEach(function(e){n.push(e(r))});var i=t(a);var o=e.getState();v.forEach(function(e,t){var r=e(o);if(n[t]!==r){g.info("redux watcher","watcher value has changed! \nAction: ",a,"\nBefore: ",n[t],"\nAfter:  ",r);m["isDev"]||m["isJsPath"]}});return i});var _=b;function y(e){if(!l.a.isFunction(e)){g.error("watcherFn passed in to addWatcher must be a function");return}v.push(e)}function k(){v=[]}Object(h["exportToGlobalDebugger"])("reduxWatcher",{addWatcher:y,clearAllWatchers:k});var O=a(1140);var w=["memberCounts","slashCommand","channelHistory"];var E=[];var C=Object(c["b"])("In dev, warns when store state is unserializable",function(e,t,a){var n=m["isDev"]||m["isJsPath"];if(!n)return t(a);var r=e.getState();var i=t(a);var o=e.getState();o&&Object.keys(o).forEach(function(e){if(o[e]===r[e])return;if(!Object(O["a"])(o[e])){if(w.includes(e))return;if(E.includes(e))return;Object(f["b"])().error("Redux store "+e+" has unserializable state!\nFix this by ensuring that the store contains no functions or promises.\nAre you not working on the "+e+" store? Were you just minding your own business when this error popped up out of nowhere?\nPlease DM @drew this error message and he'll look into it.");E.push(e)}});return i});var j=C;var S={knownOffenders:w,resetLoggedOffenders:function e(){E=[]}};var I=a(336);var T=a(869);var N=[i["b"],r.a,p,I["default"],_,j,T["a"]];"undefined"!==typeof window.__karma__&&N.unshift(o["b"]);var A=t["a"]=N},,function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(2);var i=a.n(r);var o=a(23);var s=a(11);var l=a(1965);var c=a(164);var u=a(3496);var d=0;var p=6e4;var f=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function m(e){if(!Object(s["isFeatureEnabled"])(e(),"feature_track_time_spent"))return i.a.noop;var t={capture:true,passive:true};var a=function t(){return v(e)};var n=setInterval(a,p);var r=i.a.debounce(function(){document.hasFocus&&document.hasFocus()&&Object(u["d"])(Object(o["getTeamId"])(e()))},5e3,{leading:true,trailing:true});f.forEach(function(e){window.addEventListener(e,r,t)});var l=function e(){f.forEach(function(e){window.removeEventListener(e,r,t)});clearInterval(n)};return l}function h(e){return{uid:e.id,timestamp_start:Object(l["a"])(e.startTime),timestamp_refresh:Object(l["a"])(e.lastActivity),version:d}}function v(e){var t=e();var a=Object(o["getTeamId"])(t);var n=Object(u["a"])(a);var r=Object(c["a"])({state:t});i.a.each(n,function(e){null===e.lastLogged?r.track("SESSION_START",{client_session:h(e)}):e.isActive&&e.needsRefresh&&r.track("SESSION_REFRESH",{client_session:h(e)});e.isActive||r.track("SESSION_END",{client_session:h(e)})})}Object(n["a"])("interop.activity_session",{listenForUserEvents:function e(){return m(TS.redux.getState)},recordUserActivity:u["d"]})},function(e,t,a){"use strict";var n={};a.r(n);a.d(n,"accessibility",function(){return rd["default"]});a.d(n,"allUnreads",function(){return tl["default"]});a.d(n,"bootData",function(){return le["default"]});a.d(n,"channelSidebarFolders",function(){return id["default"]});a.d(n,"channelSidebar",function(){return ke["default"]});a.d(n,"checkoutFlow",function(){return od["default"]});a.d(n,"customEmoji",function(){return sd["default"]});a.d(n,"deletedMessages",function(){return ld["default"]});a.d(n,"desktop",function(){return ua["default"]});a.d(n,"dnd",function(){return Vt["default"]});a.d(n,"downloads",function(){return cd["default"]});a.d(n,"drafts",function(){return ud["default"]});a.d(n,"emojiTranslation",function(){return dd["default"]});a.d(n,"ephemeralMessages",function(){return pd["default"]});a.d(n,"expandables",function(){return $t["default"]});a.d(n,"experiments",function(){return fd["default"]});a.d(n,"fileRefresh",function(){return aa["default"]});a.d(n,"fileUpload",function(){return md["default"]});a.d(n,"filesFlexpane",function(){return hd["default"]});a.d(n,"userGroupsFlexpane",function(){return vd["default"]});a.d(n,"flexpane",function(){return gd["default"]});a.d(n,"globalNav",function(){return bd["default"]});a.d(n,"i18n",function(){return _d["default"]});a.d(n,"imports",function(){return yd["default"]});a.d(n,"incrementalBoot",function(){return xe["default"]});a.d(n,"inlineFilePreviews",function(){return kd["default"]});a.d(n,"messageEdit",function(){return un["default"]});a.d(n,"messagePaneBanner",function(){return Od["default"]});a.d(n,"messagePane",function(){return ce["default"]});a.d(n,"modal",function(){return et["default"]});a.d(n,"navigationHistory",function(){return Nn["default"]});a.d(n,"noop",function(){return wd["default"]});a.d(n,"pendingOpenChannel",function(){return Ed["default"]});a.d(n,"prefs",function(){return Oe["default"]});a.d(n,"presence",function(){return Yl["default"]});a.d(n,"pricingPlans",function(){return Cd["default"]});a.d(n,"searchAutocomplete",function(){return jd["default"]});a.d(n,"searchChannelsUsers",function(){return Sd["default"]});a.d(n,"searchInputBox",function(){return Id["default"]});a.d(n,"searchResults",function(){return Lc["default"]});a.d(n,"searchSession",function(){return Gc["default"]});a.d(n,"searchUi",function(){return Bc["default"]});a.d(n,"slashCommand",function(){return Go["default"]});a.d(n,"socket",function(){return ae["default"]});a.d(n,"threadSub",function(){return el["default"]});a.d(n,"threadsFlexpane",function(){return Td["default"]});a.d(n,"toast",function(){return $e["default"]});a.d(n,"typing",function(){return Ss["default"]});a.d(n,"uiSerialization",function(){return G["default"]});a.d(n,"unreadCounts",function(){return mu["default"]});a.d(n,"usersCounts",function(){return Nd["default"]});a.d(n,"workspace",function(){return ue["default"]});a.d(n,"stars",function(){return lc["default"]});a.d(n,"connectivity",function(){return Dn["default"]});a.d(n,"memberDirectoryFlexpane",function(){return Ad["default"]});a.d(n,"adminMembers",function(){return Rd["default"]});a.d(n,"appActions",function(){return er["default"]});a.d(n,"appPermissions",function(){return zi["default"]});a.d(n,"appProfiles",function(){return ro["default"]});a.d(n,"apps",function(){return br["default"]});a.d(n,"blocks",function(){return Md["default"]});a.d(n,"bots",function(){return mo["default"]});a.d(n,"calls",function(){return Zn["b"]});a.d(n,"canvases",function(){return _o["default"]});a.d(n,"channelHistory",function(){return Ae["default"]});a.d(n,"channels",function(){return te["default"]});a.d(n,"channelsMeta",function(){return Ud});a.d(n,"currentMemberUserGroupRegexp",function(){return Ic["default"]});a.d(n,"customizeEmoji",function(){return qd["default"]});a.d(n,"developerActions",function(){return Gd["default"]});a.d(n,"emoji",function(){return Jo["default"]});a.d(n,"enterprise",function(){return Hd["default"]});a.d(n,"environment",function(){return Wd["default"]});a.d(n,"files",function(){return na["default"]});a.d(n,"idpGroups",function(){return Vd["default"]});a.d(n,"lastNetworkSend",function(){return zd["default"]});a.d(n,"memberCounts",function(){return Ba["default"]});a.d(n,"members",function(){return de["default"]});a.d(n,"membership",function(){return Ya["default"]});a.d(n,"messages",function(){return Me["default"]});a.d(n,"messagesMeta",function(){return Hc["default"]});a.d(n,"notifications",function(){return Qd["default"]});a.d(n,"reactions",function(){return tc["default"]});a.d(n,"teamId",function(){return z["default"]});a.d(n,"teams",function(){return An["default"]});a.d(n,"userGroups",function(){return Sc["default"]});a.d(n,"userGroupMembership",function(){return Nc["default"]});a.d(n,"window",function(){return Re["default"]});var r=a(3);var i=a.n(r);var o=a(2);var s=a.n(o);var l=a(324);var c="persist:";var u="persist/FLUSH";var d="persist/REHYDRATE";var p="persist/PAUSE";var f="persist/PERSIST";var m="persist/PURGE";var h="persist/REGISTER";var v=-1;var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function _(e,t,a,n){var r=n.debug;var i=b({},a);e&&"object"===("undefined"===typeof e?"undefined":g(e))&&Object.keys(e).forEach(function(n){if("_persist"===n)return;if(t[n]!==a[n]){false;return}i[n]=e[n]});false;return i}function y(e){var t=e.blacklist||null;var a=e.whitelist||null;var n=e.transforms||[];var r=e.synchronousWrites||false;var i=e.throttle||0;var o=""+(void 0!==e.keyPrefix?e.keyPrefix:c)+e.key;var s=e.storage;var l=false===e.serialize?function(e){return e}:k;var u={};var d={};var p=[];var f=null;var m=null;var h=function e(t){Object.keys(t).forEach(function(e){if(!b(e))return;if(u[e]===t[e])return;if(-1!==p.indexOf(e))return;p.push(e)});Object.keys(u).forEach(function(e){void 0===t[e]&&p.push(e)});u=t;r?v(r):null===f&&(f=setInterval(v,i))};function v(e){if(0===p.length){f&&clearInterval(f);f=null;return}var t=p.shift();var a=n.reduce(function(e,a){return a.in(e,t,u)},u[t]);if(void 0!==a)try{d[t]=l(a)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete d[t];0===p.length&&g();e&&v(e)}function g(){Object.keys(d).forEach(function(e){void 0===u[e]&&delete d[e]});m=s.setItem(o,l(d)).catch(_)}function b(e){if(a&&-1===a.indexOf(e)&&"_persist"!==e)return false;if(t&&-1!==t.indexOf(e))return false;return true}function _(e){e&&false}var y=function e(){while(0!==p.length)v(r);return m||Promise.resolve()};return{update:h,flush:y}}function k(e){return JSON.stringify(e)}function O(e){var t=e.transforms||[];var a=""+(void 0!==e.keyPrefix?e.keyPrefix:c)+e.key;var n=e.storage;var r=e.debug;var i=false===e.serialize?function(e){return e}:w;return n.getItem(a).then(function(e){if(!e)return;try{var a={};var n=i(e);Object.keys(n).forEach(function(e){a[e]=t.reduceRight(function(t,a){return a.out(t,e,n)},i(n[e]))});return a}catch(e){false;throw e}})}function w(e){return JSON.parse(e)}function E(e){var t=e.storage;var a=""+(void 0!==e.keyPrefix?e.keyPrefix:c)+e.key;return t.removeItem(a,C)}function C(e){e&&false}var j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function S(e,t){var a={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;a[n]=e[n]}return a}var I=5e3;function T(e,t){false;var a=void 0!==e.version?e.version:v;var n=e.debug||false;var r=void 0===e.stateReconciler?_:e.stateReconciler;var i=e.getStoredState||O;var o=void 0!==e.timeout?e.timeout:I;var s=null;var l=false;var c=true;var h=function e(t){t._persist.rehydrated&&s&&!c&&s.update(t);return t};return function(n,v){var g=n||{},b=g._persist,_=S(g,["_persist"]);var k=_;if(v.type===f){var O=false;var w=function t(a,n){false;if(!O){v.rehydrate(e.key,a,n);O=true}};o&&setTimeout(function(){!O&&w(void 0,new Error('redux-persist: persist timed out for persist key "'+e.key+'"'))},o);c=false;s||(s=y(e));if(b)return n;if("function"!==typeof v.rehydrate||"function"!==typeof v.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");v.register(e.key);i(e).then(function(t){var n=e.migrate||function(e,t){return Promise.resolve(e)};n(t,a).then(function(e){w(e)},function(e){false;w(void 0,e)})},function(e){w(void 0,e)});return j({},t(k,v),{_persist:{version:a,rehydrated:false}})}if(v.type===m){l=true;v.result(E(e));return j({},t(k,v),{_persist:b})}if(v.type===u){v.result(s&&s.flush());return j({},t(k,v),{_persist:b})}if(v.type===p)c=true;else if(v.type===d){if(l)return j({},k,{_persist:j({},b,{rehydrated:true})});if(v.key===e.key){var C=t(k,v);var I=v.payload;var T=false!==r&&void 0!==I?r(I,n,C,e):C;var N=j({},T,{_persist:j({},b,{rehydrated:true})});return h(N)}}if(!b)return t(n,v);var A=t(k,v);if(A===k)return n;A._persist=b;return h(A)}}var N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function R(e,t,a,n){var r=n.debug;var i=A({},a);e&&"object"===("undefined"===typeof e?"undefined":N(e))&&Object.keys(e).forEach(function(n){if("_persist"===n)return;if(t[n]!==a[n]){false;return}if(M(a[n])){i[n]=A({},i[n],e[n]);return}i[n]=e[n]});false;return i}function M(e){return null!==e&&!Array.isArray(e)&&"object"===("undefined"===typeof e?"undefined":N(e))}function x(e,t){e.stateReconciler=void 0===e.stateReconciler?R:e.stateReconciler;return T(e,Object(l["combineReducers"])(t))}var P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function D(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var F={registry:[],bootstrapped:false};var L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;var a=arguments[1];switch(a.type){case h:return P({},t,{registry:[].concat(D(t.registry),[a.key])});case d:var n=t.registry.indexOf(a.key);var r=[].concat(D(t.registry));r.splice(n,1);return P({},t,{registry:r,bootstrapped:0===r.length});default:return t}};function B(e,t,a){var n,r;false;var i=a||false;var o=Object(l["createStore"])(L,F,t?t.enhancer:void 0);var s=function e(t){o.dispatch({type:h,key:t})};var c=function t(a,n,r){var s={type:d,payload:n,err:r,key:a};e.dispatch(s);o.dispatch(s);if(i&&v.getState().bootstrapped){i();i=false}};var v=P({},o,{purge:function t(){var a=[];e.dispatch({type:m,result:function e(t){a.push(t)}});return Promise.all(a)},flush:function t(){var a=[];e.dispatch({type:u,result:function e(t){a.push(t)}});return Promise.all(a)},pause:function t(){e.dispatch({type:p})},persist:function t(){e.dispatch({type:f,register:s,rehydrate:c})}});v.persist();return v}function U(e,t){var a=t||{},n=a.debug;return function(t,a){if(!t){false;return Promise.resolve(void 0)}var n=t._persist&&void 0!==t._persist.version?t._persist.version:v;if(n===a){false;return Promise.resolve(t)}if(n>a){false;return Promise.resolve(t)}var r=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return a>=e&&e>n}).sort(function(e,t){return e-t});false;try{var i=r.reduce(function(t,a){false;return e[a](t)},t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}}function q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=a.whitelist||null;var r=a.blacklist||null;function i(e){if(n&&-1===n.indexOf(e))return true;if(r&&-1!==r.indexOf(e))return true;return false}return{in:function t(a,n,r){return!i(n)&&e?e(a,n,r):a},out:function e(a,n,r){return!i(n)&&t?t(a,n,r):a}}}var G=a(818);var H=a(3436);var W=a(130);var V=a(17);var z=a(23);var Q=a(33);var K=a(63);var Y=a(218);var J=a(62);var Z=a(24);var X=a.n(Z);var $=a(1113);var ee=a(107);var te=a(19);var ae=a(79);var ne=function e(t){switch(t.type){case te["addOrReplaceChannels"].getType():return i()({},t,{payload:"Channel bulk add payload is too big to output to redux devtools"});case ae["socketMessageReceived"].getType():return i()({},t,{payload:"View raw WebSocket frames for details, but this was a "+(t.payload.subtype?[t.payload.type,t.payload.subtype].join("."):t.payload.type)+" message"});default:return t}};var re=Object(ee["a"])()?void 0:function(){return{apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}};var ie={autoPause:true,actionSanitizer:ne,stateSanitizer:re,maxAge:1e3,features:{pause:true}};var oe=ie;function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,a=e.customEnhancers,n=e.middlewares;var r=void 0;var s=window.TS&&Object(o["get"])(window,"TS.boot_data.feature_redux_dev_tools",false);if(s)r=l["compose"].apply(void 0,[l["applyMiddleware"].apply(void 0,X()(n))].concat(X()(a),[$["a"].instrument()]));else{var c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(i()({},oe,{name:"Slack-"+t})):l["compose"];r=c.apply(void 0,[l["applyMiddleware"].apply(void 0,X()(n))].concat(X()(a)))}return r}var le=a(11);var ce=a(116);var ue=a(69);var de=a(26);var pe=a(12);var fe=a(675);var me=a(74);function he(e,t){if(!Object(pe["isIm"])(e))return false;var a=Object(de["getMemberById"])(t(),Object(pe["getMemberIdFromIm"])(e));return a&&a.deleted}function ve(e){return Object(pe["isPublicChannel"])(e)&&!Object(pe["isMemberOfChannel"])(e)}function ge(e,t){Object(fe["c"])();(ve(e)||Object(pe["isArchived"])(e)||he(e,t))&&Object(fe["a"])(e)}function be(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=Object(ue["getPrimaryView"])(n);var i=Object(te["getChannelById"])(n,r);if(!i)return;ge(i,a)}function _e(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=Object(ue["getPrimaryView"])(n);var i=false;var o=e&&e.payload&&e.payload.channels;if(!o||!o.length)return;o.forEach(function(e){e&&e.id===r&&(i=true)});if(!i)return;var s=Object(te["getChannelById"])(n,r);if(!s)return;ge(s,a)}function ye(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=e.payload;var i=Object(ue["getPrimaryView"])(n);var o=Object(te["getChannelById"])(n,i);var s=Object(pe["getMemberIdFromIm"])(o);if(!o||!Object(pe["isIm"])(o)||!s)return;s===r.id&&ge(o,a)}Object(me["b"])({actions:[ce["setActiveChannel"]],sideEffect:be});Object(me["b"])({actions:[de["addMember"]],sideEffect:ye});Object(me["b"])({actions:[te["addOrReplaceChannels"]],sideEffect:_e,reasons:[te["CHANNEL_ACTION_REASONS"].ADD_CHANNEL,te["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL,te["CHANNEL_ACTION_REASONS"].UNARCHIVE_CHANNEL,te["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL,te["CHANNEL_ACTION_REASONS"].UPSERT_CHANNEL,te["CHANNEL_ACTION_REASONS"].BULK_ADD_CHANNELS,te["CHANNEL_ACTION_REASONS"].BULK_UPDATE_CHANNELS]});var ke=a(729);var Oe=a(21);var we=a(240);var Ee=a(13);var Ce=Object(Ee["c"])("TS.onboarding.inOnboarding");var je=a(167);var Se=a(102);var Ie=10;var Te=5;function Ne(e,t,a){var n=a();if(Object(Oe["getUserPref"])(n,"show_sidebar_quickswitcher_button"))return;if(Object(Oe["getUserPref"])(n,"k_key_omnibox_auto_hide_count")===Te)return;if(void 0===Object(Oe["getUserPref"])(n,"k_key_omnibox_auto_hide_count"))return;if(Object(je["b"])(n))return;if(Ce())return;if(Object(te["getCountOfOpenChannels"])(n)>=Ie){Object(Se["a"])({show_sidebar_quickswitcher_button:JSON.stringify(Object(Oe["getUserPref"])(n,"show_sidebar_quickswitcher_button")),k_key_omnibox_auto_hide_count:JSON.stringify(Object(Oe["getUserPref"])(n,"k_key_omnibox_auto_hide_count")),count_of_open_channels:Object(te["getCountOfOpenChannels"])(n)},"show_sidebar_quickswitcher_button automatically set to true","show_sidebar_quickswitcher_button_true");t(Object(we["c"])({pref:"show_sidebar_quickswitcher_button",value:true}));t(Object(ke["setJumperCoachmarkState"])("SHOW_BUTTON"))}}Object(me["b"])({actions:[te["addOrReplaceChannels"]],sideEffect:Ne,reasons:[te["CHANNEL_ACTION_REASONS"].ADD_CHANNEL,te["CHANNEL_ACTION_REASONS"].UPSERT_CHANNEL]});var Ae=a(122);var Re=a(206);var Me=a(44);var xe=a(752);var Pe=a(3406);var De=a(70);var Fe=a(160);var Le=a(471);var Be=a(165);function Ue(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var r=a();if(!Object(xe["isFullyBooted"])(r)){Ye({getState:a},"Not marking "+e+" because not fully booted");return}var i=Object(ue["getPrimaryView"])(r);if(i!==e){Object(Se["d"])(2005)&&Ye({getState:a},"Not marking because "+e+" is not active");return}if(Object(ce["didUserSetUnreadPoint"])(r)){Ye({getState:a},"Not marking "+e+" because unread point was set manually");return}if(Object(Le["b"])()){Ye({getState:a},"Not marking "+e+" because active channel is hidden");return}if(Object(K["a"])()){if(!Object(Pe["c"])(r)){Ye({getState:a},"Not marking "+e+" because attention not on chat ("+Object(Pe["b"])(r)+")");n||t(Object(ce["setGhostLastRead"])(null));return}}else if(!Object(Be["f"])()){Ye({getState:a},"Not marking "+e+" because attention not on chat ("+Object(Be["c"])()+")");n||t(Object(ce["setGhostLastRead"])(null));return}var o=Object(te["getChannelById"])(r,e);var s=Object(Ae["getTimestampsByChannelId"])(r,e),l=s.timestamps;var c=Object(pe["getLatestTs"])(o,l);var u=Object(pe["isRead"])(o);if(Object(pe["getLastReadTs"])(o)>=c&&u){Ye({getState:a},"Not marking "+e+" because last_read >= latest && channel is read");return}var d=qe(r);var p=Object(ce["isUnreadLineVisible"])(r);var f=Object(pe["getLastReadTs"])(o)>=c;var m=Object(Me["getMessageByTimestamp"])(r,e,c);var h=Object(le["getCurrentUserId"])(r);var v=m&&m.user===h;if(d||p||f||u&&v){Ye({getState:a},d?"Marking "+e+" because mark_msgs_read_immediately pref":p?"Marking "+e+" because unread line is visible":f?"Marking "+e+" because last_read >= latest":"Marking "+e+" because channel is read and last message is from self");t(Object(te["markMostRecentMsgRead"])({channelId:e,saveGhost:n&&!u,reason:De["MARKED_REASONS"].VIEWED}))}else if(!d){Ye({getState:a},"Not marking "+e+", clearing ghost last_read");t(Object(ce["setGhostLastRead"])(null))}}function qe(e){return Object(Oe["getUserPref"])(e,"mark_msgs_read_immediately")&&!Object(Oe["getUserPref"])(e,"start_scroll_at_oldest")}var Ge=s.a.debounce(function(e,t,a){var n=a();var r=Object(te["getChannelById"])(n,e);if(qe(n)||!Object(pe["isRead"])(r)){Ye({getState:a},"Checking unreads after debounced channel change to "+e);Ue(e,t,a)}},500);function He(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=e.payload.channelId;if(!r)return;Ge(r,t,a)}function We(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=Object(ue["getPrimaryView"])(n);if(!Object(Fe["a"])(r))return;var i=Object(Re["isWindowFocused"])(n);var o=!Object(K["a"])()||Object(ue["isWorkspaceFocused"])(n);i&&o&&requestAnimationFrame(function(){Ye({getState:a},"Checking unreads after window became focused");Ue(r,t,a)})}function Ve(e,t,a){var n=a();var r=Object(ue["getPrimaryView"])(n);if(!Object(Fe["a"])(r))return;Object(ue["isWorkspaceFocused"])(n)&&requestAnimationFrame(function(){Ye({getState:a},"Checking unreads after workspace became focused");Ue(r,t,a)})}var ze=s.a.debounce(function(e,t,a){var n=Object(ce["isUnreadLineVisible"])(a());if(n){Ye({getState:a},"Checking unreads after unread line became visible");Ue(e,t,a)}},350);function Qe(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=Object(ue["getPrimaryView"])(n);if(!Object(Fe["a"])(r))return;if(qe(n))return;ze(r,t,a)}function Ke(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=Object(ue["getPrimaryView"])(n);if(!Object(Fe["a"])(r))return;s.a.defer(function(){Ye({getState:a},"Checking unreads after fully booted");Ue(r,t,a)})}Object(me["b"])({actions:[ce["setActiveChannel"]],sideEffect:He});Object(me["b"])({actions:[Re["updateFocus"],Re["setWindow"]],sideEffect:We});Object(me["b"])({actions:[ue["toggleWorkspaceFocus"]],sideEffect:Ve});Object(me["b"])({actions:[ce["setUnreadLineVisibility"]],sideEffect:Qe});Object(me["b"])({actions:[xe["setFullyBooted"]],sideEffect:Ke});function Ye(e,t){Object(V["a"])(e).info("CHECK-UNREADS",t)}var Je=a(1);var Ze=a.n(Je);var Xe=a(4);var $e=a(212);var et=a(77);var tt=a(27);var at=a(81);function nt(e){if(Object(at["urlQueryStringParse"])(window.location).deprecation_is_deprecated_ssb)return true;var t=e();if(!Object(tt["isSSB"])())return false;if(Object(le["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation")&&!Object(tt["isSSBAndAtLeastVersion"])("3.0.0"))return true;return false}function rt(){if(window.process&&window.process.mas)return"macappstore://itunes.apple.com/app/slack/id803453959";if(window.process&&window.process.windowsStore)return"ms-windows-store://pdp/?ProductId=9wzdncrdk3wp";var e=false;var t="";if(Object(tt["isMac"])())e="osx";else if(Object(tt["isWindows"])()){e="windows";t=Object(tt["isWin64"])()?"windows_64":"windows"}else Object(tt["isLinux"])()&&(e=false);if(!e)return"https://slack.com/downloads";var a="https://slack.com/downloads/instructions/"+e;a=Object(at["setUrlQueryStringValue"])(a,"os",e);t&&(a=Object(at["setUrlQueryStringValue"])(a,"build_architecture",t));return a}var it=a(171);var ot=a(5);var st=a.n(ot);var lt=a(6);var ct=a.n(lt);var ut=a(7);var dt=a.n(ut);var pt=a(8);var ft=a.n(pt);var mt=a(0);var ht=a.n(mt);var vt=a(14);var gt=a(10);var bt=a(283);var _t=a(65);var yt=new gt["b"]("deprecation");var kt={featureSsbQ218Deprecation:ht.a.bool,onCloseComplete:ht.a.func};var Ot={featureSsbQ218Deprecation:false,onCloseComplete:o["noop"]};var wt=function(e){ft()(t,e);function t(e){st()(this,t);var a=dt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLinkClick=a.onLinkClick.bind(a);a.ref=Ze.a.createRef();return a}ct()(t,[{key:"onLinkClick",value:function e(){Object(J["c"])("deprecation_toast_click_ssb");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureSsbQ218Deprecation)return null;return Ze.a.createElement(bt["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Ze.a.createElement("div",null,Ze.a.createElement("strong",null,yt.t("This is an out-of-date version of Slack.",{fallbackHash:"50ebb2ef5c811360b7496e2bec13c28583af12e8"})),Ze.a.createElement("br",null),Ze.a.createElement(_t["a"],{href:rt(),onClick:this.onLinkClick},yt.t("Update now"))))}}]);return t}(Je["Component"]);wt.displayName="SSBDeprecationToast";wt.defaultProps=Ot;var Et=function e(t){return{featureSsbQ218Deprecation:Object(le["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation")}};var Ct=Object(vt["connect"])(Et)(wt);var jt=a(103);var St=new gt["b"]("deprecation");var It={featureSsbQ218DeprecationModal:ht.a.bool};var Tt={featureSsbQ218DeprecationModal:false,featureSsbQ218DeprecationBlock:false};var Nt=function(e){ft()(t,e);function t(){st()(this,t);return dt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}ct()(t,[{key:"onGo",value:function e(){Object(J["c"])("deprecation_modal_click_ssb");window.open(rt())}},{key:"render",value:function e(){if(!this.props.featureSsbQ218DeprecationModal)return null;return Ze.a.createElement(jt["a"],{title:St.t("This is an out-of-date version of Slack"),cancelText:St.t("Skip for Now"),goButtonText:St.t("Update the App"),onGo:this.onGo},Ze.a.createElement("div",null,Ze.a.createElement("p",null,St.t("We\u2019ve released a new version of Slack with an assortment of bug fixes and an all-around smoother experience.")),Ze.a.createElement("p",null,St.rt("To continue using Slack, please update your version of the app immediately. Feel free to <a>contact us</a> if you have any questions.",{fallbackHash:"c9631f01ab6b932241f68aa1de3b1f179c33aceb"},function(e){var t=e.text;return Ze.a.createElement(_t["a"],{href:"https://my.slack.com/help/requests/new"},t)}))))}}]);return t}(Je["Component"]);Nt.displayName="SSBDeprecationModal";Nt.defaultProps=Tt;var At=function e(t){return{featureSsbQ218DeprecationModal:Object(le["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal")}};var Rt=Object(vt["connect"])(At)(Nt);var Mt=604800;var xt=86400;function Pt(e){if(Object(at["urlQueryStringParse"])(window.location).deprecation_show_ssb_toast)return true;if(!nt(e))return false;var t=e();if(Object(le["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal"))return false;var a=Object(it["c"])();var n=Object(Oe["getUserPref"])(t,"deprecation_toast_last_seen");if(a-n<Mt)return false;if(Object(it["j"])(a).getHours()<12)return false;return true}function Dt(e){if(Object(at["urlQueryStringParse"])(window.location).deprecation_show_ssb_modal)return true;if(!nt(e))return false;var t=e();if(!Object(le["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal"))return false;var a=Object(it["c"])();var n=Object(Oe["getUserPref"])(t,"deprecation_modal_last_seen");if(a-n<xt)return false;if(Object(it["j"])(a).getHours()<12)return false;return true}function Ft(e,t){if(Dt(t)){e(Object(we["c"])({pref:"deprecation_modal_last_seen",value:Object(it["c"])()}));e(Object(et["openModal"])({element:Ze.a.createElement(Rt,null)}));Object(J["c"])("deprecation_modal_ssb");return true}return false}function Lt(e,t){if(Pt(t)){e(Object(we["c"])({pref:"deprecation_toast_last_seen",value:Object(it["c"])()}));e(Object($e["enqueueToast"])({element:Ze.a.createElement(Ct,null)}));Object(J["c"])("deprecation_toast_ssb");return true}return false}var Bt=Object(Xe["e"])("shows a deprecation warning if and when appropriate",function(e,t){if(Ft(e,t))return true;if(Lt(e,t))return true;return false});function Ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];var r=n();if(t)return;if(!Object(ae["isFirstConnection"])(r))return;if(!Object(Re["isWindowFocused"])(r))return;a(Bt())}function qt(e,t,a){var n=a();if(!Object(Re["isWindowFocused"])(n))return;if(!Object(ae["wasPreviouslyConnected"])(n))return;t(Bt())}Object(me["b"])({actions:[ae["connected"]],sideEffect:Ut});Object(me["b"])({actions:[Re["updateFocus"]],sideEffect:qt});var Gt=a(53);function Ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];Object(Gt["g"])(t,a,n)}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];Object(Gt["f"])(t,a,n)}Object(me["a"])([{actions:[ae["socketErrorMessageReceived"]],sideEffect:Ht},{actions:[ae["socketMessageReceived"]],sideEffect:Wt}]);var Vt=a(493);var zt=a(429);var Qt="DND";var Kt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.payload;var n=arguments[1];var r=arguments[2];var i=r();if(!Object(le["isFeatureEnabled"])(i,"feature_sonic_dnd_manager"))return;if(a)return;var s=Object(o["keys"])(Object(Vt["getAllDndSchedules"])(i));if(Object(o["isEmpty"])(s))return;Object(V["a"])({getState:r}).info(Qt,"Flushing and fetching fresh DND times for the following members after connecting to the websocket: "+s);n(Object(Vt["removeDndSchedule"])({memberIds:s}));n(Object(zt["c"])())};Object(me["b"])({actions:[ae["connected"]],sideEffect:Kt});var Yt=a(827);function Jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];Object(Yt["c"])(n,t)}function Zt(e,t,a){Object(Yt["d"])(a)}function Xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];Object(Yt["e"])(n,t)}Object(me["a"])([{actions:[ae["connected"]],sideEffect:Jt},{actions:[ae["disconnected"]],sideEffect:Zt},{actions:[ae["socketMessageReceived"]],sideEffect:Xt}]);var $t=a(202);var ea=a(628);function ta(e,t,a){var n=a();Object(ea["e"])(Object($t["getExpandables"])(n))}Object(me["b"])({actions:[$t["setExpanded"],$t["bulkSetExpanded"]],sideEffect:ta});var aa=a(260);var na=a(78);var ra=a(958);function ia(e,t,a){var n=a();var r=e.payload.id;var i=Object(aa["getFileRefreshState"])(n,r);if(i!==aa["STATE"].REFRESHING)return;var o=Object(aa["getFileRefreshTimeout"])(n,r);o&&clearTimeout(o);var s=setTimeout(function(){return t(Object(aa["refreshReset"])({fileId:r,timeout:s}))},ra["a"]);t(Object(aa["refreshDone"])({fileId:r}))}Object(me["b"])({actions:[na["addFile"]],sideEffect:ia});var oa=a(131);function sa(e,t,a){var n=a();e.forEach(function(e){var t=Object(na["getFileById"])(n,e);Object(oa["c"])(t)})}function la(e,t,a){var n=e.payload;if(!n)return;sa([n.id],t,a)}function ca(e,t,a){var n=e.payload;if(!n)return;sa(n.map(function(e){return e.id}),t,a)}Object(me["b"])({actions:[na["addFile"]],sideEffect:la});Object(me["b"])({actions:[na["bulkAddFiles"]],sideEffect:ca});var ua=a(450);var da=a(1106);var pa=a(75);function fa(e,t,a){var n=a();if(!Object(je["b"])(n))return;if(!Object(o["get"])(window,"desktop.app.updateDragRegion"))return;var r=Object(z["getTeamId"])(n);var i=e.payload;if(r!==i)return;Object(V["a"])({getState:a}).info("GLOBAL-NAV","Resetting SSB drag region");window.desktop.app.updateDragRegion([])}function ma(e,t,a){var n="isTitleBarForcedByUser";if(!Object(pa["hasPreference"])(n))return;var r=a();if(!Object(je["b"])(r)){if(Object(le["isFeatureEnabled"])(r,"feature_global_nav_rollback")){if(false===Object(pa["getPreference"])(n))return;Object(pa["setPreference"])({name:n,value:false});Object(V["a"])({getState:a}).info("GLOBAL-NAV","Resetting Desktop Nav SSB frame changes")}return}if(true===Object(pa["getPreference"])(n))return;Object(pa["setPreference"])({name:n,value:true});Object(V["a"])({getState:a}).info("GLOBAL-NAV","Enabling desktop UI frame changes for next boot")}function ha(e,t,a){var n=a();var r=Object(V["a"])({getState:a});if(!Object(je["b"])(n))return false;if(!Object(xe["isFullyBooted"])(n))return false;var i=Object(Oe["getUserPref"])(n,"sidebar_theme");if("custom_theme"===i)return false;var o=null;try{o=JSON.parse(Object(Oe["getUserPref"])(n,"sidebar_theme_custom_values"))}catch(e){return false}var s=Object(da["b"])(i,null,{useGlobalNav:true});if(!o.column_bg||!s.column_bg)return false;if(o.column_bg.toUpperCase()!==s.column_bg.toUpperCase()){r.info("GLOBAL-NAV","Sidebar theme values don't match expected values; fixing the pref");t(Object(we["c"])({pref:"sidebar_theme_custom_values",value:JSON.stringify(s)}));return true}return false}Object(me["b"])({actions:[ua["setActiveTeam"]],sideEffect:fa});Object(me["b"])({actions:[xe["setFullyBooted"]],sideEffect:ma});Object(me["b"])({actions:[xe["setFullyBooted"]],sideEffect:ha});var va=a(214);function ga(e,t,a){var n=a();var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var a=Object(te["getChannelById"])(n,t);Object(va["a"])(a)})}function ba(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];var r=n();var i=Object(te["getChannelById"])(r,t.id);Object(va["f"])(i)}function _a(e,t,a){var n=a();var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(pe["isPrivateChannel"])(e))Object(va["g"])(i()({},e,{is_member:false}));else{var t=Object(te["getChannelById"])(n,e.id);Object(va["g"])(t)}})}function ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=t.ids;if(!a||!a.length)return;a.forEach(function(e){Object(va["e"])(e)})}function ka(e){var t=e&&e.payload&&e.payload.channels;if(!t||!t.length)return;t.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(va["k"])(e)})}function Oa(e,t,a){var n=a();var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(te["getChannelById"])(n,e.id);Object(va["j"])(t,e.purpose.creator,e.purpose.value)})}function wa(e,t,a){var n=a();var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(te["getChannelById"])(n,e.id);Object(va["l"])(t,e.topic.userId,e.topic.value)})}function Ea(e,t,a){var n=a();var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(te["getChannelById"])(n,e.id);Object(va["m"])(t)})}Object(me["a"])([{actions:[te["addOrReplaceChannels"]],sideEffect:ga,reasons:[te["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL]},{actions:[te["joinChannel"]],sideEffect:ba},{actions:[te["addOrReplaceChannels"]],sideEffect:_a,reasons:[te["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]},{actions:[te["removeChannels"]],sideEffect:ya},{actions:[te["addOrReplaceChannels"]],sideEffect:ka,reasons:[te["CHANNEL_ACTION_REASONS"].RENAME_CHANNEL]},{actions:[te["addOrReplaceChannels"]],sideEffect:Oa,reasons:[te["CHANNEL_ACTION_REASONS"].SET_PURPOSE]},{actions:[te["addOrReplaceChannels"]],sideEffect:wa,reasons:[te["CHANNEL_ACTION_REASONS"].SET_TOPIC]},{actions:[te["addOrReplaceChannels"]],sideEffect:Ea,reasons:[te["CHANNEL_ACTION_REASONS"].UNARCHIVE_CHANNEL]}]);var Ca=Object(Ee["c"])("TS.redux.socket.connectedSig.dispatch");var ja=Object(Ee["c"])("TS.redux.socket.disconnectedSig.dispatch");var Sa=Object(Ee["c"])("TS.redux.socket.provisionallyConnectedSig.dispatch");var Ia=Object(Ee["c"])("TS.redux.socket.socketErrorMessageReceivedSig.dispatch");var Ta=Object(Ee["c"])("TS.redux.socket.socketMessageReceivedSig.dispatch");var Na=Object(Ee["c"])("TS.redux.socket.troubleConnectingSig.dispatch");var Aa=Object(Ee["c"])("TS.redux.socket.waitingForRateLimitSig.dispatch");function Ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Ca(t)}function Ma(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Sa(t)}function xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Ia(t)}function Pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Ta(t)}function Da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Aa(t)}function Fa(){ja.apply(void 0,arguments)}function La(){Na.apply(void 0,arguments)}Object(me["a"])([{actions:[ae["connected"]],sideEffect:Ra},{actions:[ae["disconnected"]],sideEffect:Fa},{actions:[ae["provisionallyConnected"]],sideEffect:Ma},{actions:[ae["socketErrorMessageReceived"]],sideEffect:xa},{actions:[ae["socketMessageReceived"]],sideEffect:Pa},{actions:[ae["troubleConnecting"]],sideEffect:La},{actions:[ae["waitingForRateLimit"]],sideEffect:Da}]);var Ba=a(203);var Ua=Object(Ee["c"])("TS.membership.membership_counts_need_refetch_sig.dispatch");var qa=a(16);function Ga(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var r=n();var i=false;var o=Object(te["getChannelById"])(r,t.prevChannelId,i);!Object(pe["isMemberOfChannel"])(o)&&Object(pe["isPublicChannel"])(o)&&a(Object(Ba["clearMemberCounts"])(t.prevChannelId))}function Ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];if(t)return;var r=n();var o=Object(ue["getPrimaryView"])(r);var s=Object(Ba["getCachedMemberCounts"])(r,o);a(Object(Ba["clearAllMemberCounts"])());o&&s&&a(Object(Ba["addOrReplaceMemberCounts"])({channelId:o,countInfo:i()({},s,{should_refetch:true})}));Ua()}function Wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];var r=n();a(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:t.id,memberCountDelta:1,restrictedMemberCountDelta:Object(qa["isRestricted"])(Object(de["getCurrentMember"])(r))?1:0,appCountDelta:0}))}function Va(e,t){var a=e&&e.payload&&e.payload.channels;if(!a||!a.length)return;a.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Ba["clearMemberCounts"])(e.id))})}Object(me["a"])([{actions:[ce["setActiveChannel"]],sideEffect:Ga},{actions:[ae["connected"]],sideEffect:Ha},{actions:[te["joinChannel"]],sideEffect:Wa},{actions:[te["addOrReplaceChannels"]],sideEffect:Va,reasons:[te["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}]);function za(e,t,a){var n=a();var r=void 0;if(e.type===te["addOrReplaceChannels"].getType()){r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return}else e.type===te["joinChannel"].getType()&&(r=[e&&e.payload]);r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object(pe["isExternallySharedChannel"])(e)||Object(qa["isAdmin"])(Object(de["getCurrentMember"])(n)))return;var a=Object(pe["getSharedTeamIds"])(e).reduce(function(e,t){return e.concat(s.a.filter(Object(de["getAllMembers"])(n),{team_id:t}))},[]);a.length&&t(Object(de["bulkRemoveMembers"])(a))})}Object(me["a"])([{actions:[te["joinChannel"]],sideEffect:za},{actions:[te["addOrReplaceChannels"]],sideEffect:za,reasons:[te["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}]);var Qa=a(9);var Ka=a.n(Qa);var Ya=a(264);function Ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var r=n();var i=false;var o=Object(te["getChannelById"])(r,t.prevChannelId,i);!Object(pe["isMemberOfChannel"])(o)&&Object(pe["isPublicChannel"])(o)&&a(Object(Ya["clearChannelMembershipInfo"])(t.prevChannelId))}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];t||a(Object(Ya["clearAllMembershipInfo"])())}function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];a(Object(Ya["clearChannelMembershipInfo"])(t.id));var r=Object(le["isFeatureEnabled"])(n(),"feature_dont_set_channel_membership_twice");r||a(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:t.id,membershipInfo:Ka()({},Object(le["getCurrentUserId"])(n()),true)}))}function $a(e,t){var a=e&&e.payload&&e.payload.channels;if(!a||!a.length)return;a.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Ya["clearChannelMembershipInfo"])(e.id))})}Object(me["a"])([{actions:[ce["setActiveChannel"]],sideEffect:Ja},{actions:[ae["connected"]],sideEffect:Za},{actions:[te["joinChannel"]],sideEffect:Xa},{actions:[te["addOrReplaceChannels"]],sideEffect:$a,reasons:[te["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}]);var en=a(353);var tn=a(135);var an=a(207);var nn=a(883);function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var n=arguments[2];var r=n();if(!Object(le["useReactMessages"])(r))return;if(t)return;if(Object(K["a"])()&&false===navigator.onLine)return;a(Object(Ae["resetReachedEnd"])())}function on(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=e.payload,i=r.channelId,o=r.append;var s=Object(ue["getPrimaryView"])(n);var l=Object(le["isFeatureEnabled"])(n,"feature_react_threads")&&Object(an["getCurrentThreadKey"])(n);if(!o)return;i!==s&&i!==l&&t(Object(Ae["truncateChannelHistory"])({channelId:i}))}function sn(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=e.payload.prevChannelId;if(!r)return;var i=Object(ue["getPrimaryView"])(n);if(i===r)return;var o=Object(te["getChannelById"])(n,r);if(!o)return;var s=Object(te["getChannelById"])(n,i);if(s&&Object(pe["isPublicChannel"])(s)&&!Object(pe["isMemberOfChannel"])(s)){var l=[i];t(Object(tn["e"])({ids:l})).then(function(){return Object(nn["b"])()})}else if(s&&Object(pe["isPublicChannel"])(s)&&!Object(pe["isMemberOfChannel"])(s)){var c="message-history/onChannelChange";t(Object(tn["h"])({channelId:i,noMembers:true,reason:c})).then(function(e){if(!e||!e.channel)return;t(Object(en["G"])({channel:e.channel}));Object(nn["b"])()})}Object(pe["isArchived"])(o)||Object(pe["isPublicChannel"])(o)&&!Object(pe["isMemberOfChannel"])(o)?t(Object(Ae["removeAllTimestamps"])({channelId:r})):t(Object(Ae["truncateChannelHistory"])({channelId:r}))}function ln(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n))return;var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(e){if(!e)return;t(Object(Ae["removeAllTimestamps"])({channelId:e.id,includeThreads:Object(le["isFeatureEnabled"])(n,"feature_react_threads")}))})}function cn(e,t,a){var n=void 0;e.type===te["removeChannels"].getType()?n=e&&e.payload&&e.payload.ids:e.type===en["o"].getType()&&(n=[e&&e.payload&&e.payload.id]);if(!n||!n.length)return;var r=a();if(!Object(le["useReactMessages"])(r))return;n.forEach(function(e){if(!e)return;t(Object(Ae["removeAllTimestamps"])({channelId:e,includeThreads:Object(le["isFeatureEnabled"])(r,"feature_react_threads")}));t(Object(Me["removeAllMessages"])({channelId:e}))})}Object(me["b"])({actions:[Ae["addTimestamps"]],sideEffect:on});Object(me["b"])({actions:[ce["setActiveChannel"]],sideEffect:sn});Object(me["b"])({actions:[te["addOrReplaceChannels"]],sideEffect:ln,reasons:[te["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL,te["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]});Object(me["b"])({actions:[te["removeChannels"],en["o"]],sideEffect:cn});Object(me["b"])({actions:[ae["connected"]],sideEffect:rn});var un=a(346);var dn=a(755);function pn(){Object(dn["a"])()}Object(me["b"])({actions:[un["stopEditingMessage"]],sideEffect:pn});var fn=a(336);var mn=a(659);var hn=a(31);var vn=a(25);var gn=a(22);var bn=Object(gn["a"])("Check to see whether we need to reload",function(e,t,a){var n=t();if(tt["isJsPath"])return Promise.resolve(new Error("Cannot check whether to reload when using js_path"));var r=Object(le["getFromBootData"])(n,"version_ts");var i=a.reason||"unknown";return e(Object(vn["a"])({method:"rtm.shouldReload",args:{version_ts:r,reason:i}}))});bn.propTypes={reason:ht.a.string};var _n=a(459);var yn=void 0;function kn(){"undefined"===typeof yn&&(yn=Object(Y["a"])(100));return yn}var On={};var wn={};var En=false;var Cn=27e5;var jn=2e4;var Sn="MIN-VERSION";var In=Object(hn["b"])("Calls rtm.shouldReload and possibly reloads",function(e,t){if(En)return;var a=t();var n=Object(z["getTeamId"])(a);wn[n]=Date.now();Object(V["a"])({getState:t}).info(Sn,"checking to see if we should reload");kn()&&Object(J["c"])("mvp_m_check");e(bn({reason:"polling"})).then(function(e){if(!e||!e.should_reload){Object(V["a"])({getState:t}).info(Sn,"no need to reload");return}if(En)return;En=true;if(!document.hasFocus()){kn()&&Object(J["c"])("mvp_m_shouldreload_immediate");var a="rtm.shouldReload told us to reload, and the window is not currently focused";Object(V["a"])({getState:t}).info(Sn,a);Object(_n["b"])({reason:a});return}kn()&&Object(J["c"])("mvp_m_shouldreload_will_defer");Object(V["a"])({getState:t}).info(Sn,"rtm.shouldReload told us to reload; will reload next time the window loses focus");var n=false;var r=void 0;var i=false;window.addEventListener("blur",function(){if(n)return;r&&clearTimeout(r);r=setTimeout(function(){if(document.hasFocus())return;n=true;kn()&&Object(J["c"])("mvp_m_shouldreload_did_defer");var e="rtm.shouldReload told us to reload earlier, and the window lost focus";Object(V["a"])({getState:t}).info(Sn,e);Object(_n["b"])({reason:e})},jn)},i)}).catch(function(){Object(V["a"])({getState:t}).warn(Sn,"rtm.shouldReload check failed; ignoring since we will try again later")})});function Tn(e,t,a){var n=a();var r=Object(z["getTeamId"])(n);if(!On[r]){var i=Object(mn["a"])(Cn,.8,1.2);On[r]=setInterval(function(){t(In())},i);Object(W["exportToTeamDebugger"])(r,"minVersionPoll",{checkNow:function e(){return t(In())},getLastPollTime:function e(){return wn[r]},getShouldReloadOnBlur:function e(){return En},timer:On[r]})}}Object(me["b"])({actions:[fn["start"]],sideEffect:Tn});var Nn=a(366);var An=a(50);var Rn=a(717);var Mn=a(48);function xn(e,t,a){var n=a();if(!Object(je["b"])(n))return;var r=e.payload&&e.payload.history;if(!r)return;window.desktop&&window.desktop.deviceStorage&&window.desktop.deviceStorage.setItem("navigation-history",JSON.stringify(r))}function Pn(e,t,a){var n=a();if(!Object(je["b"])(n))return;if(!Object(ee["a"])()&&e.type===ue["toggleWorkspaceFocus"].getType())return;var r=Object(ue["getPrimaryView"])(n);var i=Object(An["getCurrentTeam"])(n);var s=e.type===ue["toggleWorkspaceFocus"].getType()?e.payload.isFocused:i.id===e.payload;if(!i||!s){t(Object(Nn["setLoaded"])(false));return}t(Object(Rn["f"])()).then(function(){t(Object(Rn["e"])({viewId:r,viewName:Object(pe["getDisplayName"])(Object(te["getChannelById"])(n,r)),teamId:i.id,teamName:Object(Mn["getTeamDisplayName"])(i),teamIcon:Object(o["get"])(i,"icon.image_44")}))})}Object(me["b"])({actions:[Nn["updateNavigationHistory"]],sideEffect:xn});Object(me["b"])({actions:[ua["setActiveTeam"]],sideEffect:Pn});Object(me["b"])({actions:[ue["toggleWorkspaceFocus"]],sideEffect:Pn});var Dn=a(626);var Fn=a(464);var Ln=a(159);var Bn=new gt["b"]("offline_mode");function Un(e){var t=e.clientLastOnline,a=e.channelHasHistory,n=e.onCloseComplete,r=e.featureOfflineMode;if(!r)return null;var i=70;var o=14;var s=a?Bn.t("No connection. Last updated {clientLastOnline}.",{clientLastOnline:Object(gt["m"])(Object(Fn["a"])(t))}):Bn.t("No connection. Go online to get the latest messages.");return Ze.a.createElement(bt["b"],{ariaAssertive:true,position:"top-right",offsetY:i,offsetX:o,toastClasses:"c-toast--inverted",onCloseComplete:n},s)}Un.displayName="OfflineChannelToast";var qn=Object(Ln["a"])("feature_offline_mode")(Un);var Gn=Object(Xe["e"])("shows a toast indicating when the client was last connected",function(e,t,a){var n=a.channelId;var r=t();var i=Object(Dn["whenWasClientLastOnline"])(r);var o=Object(Ae["channelHasAnyHistory"])(r,n);var s=Ze.a.createElement(qn,{clientLastOnline:i,channelHasHistory:o});e(Object($e["enqueueToast"])({element:s}))});Gn.propTypes={channelId:ht.a.string.isRequired};var Hn=qn;function Wn(e,t,a){var n=a();if(!Object(le["isFeatureEnabled"])(n,"feature_offline_mode"))return;if(!Object(K["a"])())return;if(Object(Dn["isClientOnline"])(n))return;var r=Object(ue["getPrimaryView"])(n);if(!Object(Fe["a"])(r))return;t(Gn({channelId:r}))}Object(me["b"])({actions:[ce["setActiveChannel"]],sideEffect:Wn});var Vn=a(933);var zn=a(716);var Qn="PRESENCE-MANAGER";var Kn=function e(t,a,n){if(!Object(ee["a"])()&&!Object(le["isFeatureEnabled"])(n(),"feature_sonic_presence_manager"))return;var r=Object(z["getTeamId"])(n());var i=Object(zn["b"])(r);if(!i||Object(o["isEmpty"])(i))return;Object(V["a"])({getState:n}).debug(Qn,"Sending the presence subscription after establishing a websocket connection");a(Object(zn["d"])())};Object(me["b"])({actions:[ae["connected"]],sideEffect:Kn});var Yn=a(313);function Jn(){Object(Yn["f"])()}Object(me["b"])({actions:[ae["unexpectedSocketClosure"]],sideEffect:Jn});var Zn=a(271);var Xn=a(2963);function $n(e,t){t(Object(Zn["h"])(Object(Zn["a"])(e.room)))}Object(Gt["b"])("sh_room_join",$n);Object(Gt["b"])("sh_room_leave",$n);Object(Gt["b"])("sh_room_update",$n);Object(Gt["b"])("screenhero_invite",function(e,t){if(!Object(ee["a"])())return;t(Object(Xn["b"])(e))});var er=a(315);function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_uninstall,a=e.app_id;var n=arguments[1];var r=arguments[2];if(!a)return;Object(le["isFeatureEnabled"])(r(),"feature_app_actions_fe_refactor")?n(t?Object(er["removeActionsForAppIds"])([a]):Object(er["markAsStale"])([a])):n(t&&a?Object(er["uninstallAppActions"])([a]):Object(er["deprecatedMarkAsStale"])())}Object(Gt["b"])("app_actions_updated",tr);var ar=a(29);var nr=a(663);var rr=a(177);var ir=a(888);var or=a(226);var sr=function e(){st()(this,e);var t={};t.promise=new Promise(function(e,a){t.resolve=e;t.reject=a});return t};var lr=sr;var cr=a(615);var ur={invalidSubmission:"invalid_submission"};var dr=Object(gn["a"])("fetch a dialog that has been pushed by an app",function(e,t,a){var n=e(Object(vn["a"])({method:"dialog.get",args:{dialog_id:a}})).then(function(e){var t=e.dialog,a=void 0===t?{}:t;return Object(or["b"])(a)});return hr(n)});dr.propTypes=ht.a.string;var pr=Object(gn["a"])("submit and app generated dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.dialogId,r=a.submission;var i={dialog_id:n,submission:JSON.stringify(r)};var o=e(Object(vn["a"])({method:"dialog.submit",args:i})).catch(function(e){var t=e.data||{};var a=new Error(e.message);a.data={error:t.error,dialogErrors:t.dialog_errors};throw a});return hr(o)});pr.propTypes={dialogId:ht.a.string,submission:ht.a.object};var fr=Object(gn["a"])("notify an app that the dialog it generated has been canceled",function(e,t,a){return e(Object(vn["a"])({method:"dialog.notifyCancel",args:{dialog_id:a}}))});fr.propTypes=ht.a.string;var mr=Object(gn["a"])("fetch select options from a third party app based on a search query",function(e,t,a){var n=a.dialogId,r=a.inputName,i=a.value;return e(Object(vn["a"])({method:"dialog.selectSuggestion",args:Object(cr["a"])({dialogId:n,name:r,value:i})})).then(function(e){var t=e.option_groups,a=e.options;if(t)return{optionGroups:t};if(a)return{options:a};return{options:[]}})});mr.propTypes={dialogId:ht.a.string.isRequired,inputName:ht.a.string.isRequired,value:ht.a.string.isRequired};function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;var a=new lr;e.then(a.resolve,a.reject);setTimeout(function(){if(e.isPending()){e.cancel();var n=new Error("Maximum timeout ("+t+"ms) exceeded.");a.reject(n)}},t);return a.promise}var vr=a(108);var gr=a(877);var br=a(247);var _r=a(164);var yr=a(421);function kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reduce(function(e,t){return i()({},e,Ka()({},t.name,t.error))},{})}var Or={formatErrors:kr};var wr=a(15);var Er=a.n(wr);var Cr=a(104);var jr=a(92);var Sr=a(76);var Ir=a(118);var Tr={align:ht.a.oneOf(Object(o["values"])(Ir["a"])),message:ht.a.node.isRequired,type:ht.a.oneOf(Object(o["values"])(Ir["c"]))};var Nr={align:Ir["a"].left,type:Ir["c"].boxed};function Ar(e){var t=e.align,a=e.message,n=e.type;return Ze.a.createElement(Ir["d"],{type:n,align:t,level:Ir["b"].error},a)}Ar.displayName="AppDialogError";Ar.defaultProps=Nr;var Rr=Object(Sr["pure"])(Ar);var Mr=a(88);var xr=a(785);function Pr(e,t){return e+"_"+t.name}function Dr(e,t,a){return e+"_"+t.name+"_"+a}function Fr(e,t,a){return Pr(e,t)+"_"+a.value}var Lr={dialogId:ht.a.string.isRequired,error:ht.a.string,input:ht.a.object.isRequired,isSubmitting:ht.a.bool,onBlur:ht.a.func.isRequired,onChange:ht.a.func.isRequired,onFocus:ht.a.func.isRequired,fetchSelectSuggestionDialog:ht.a.func.isRequired,value:ht.a.string,featureBotsNotMembers:ht.a.bool};var Br={error:null,isSubmitting:false,value:"",featureBotsNotMembers:false};var Ur=function(e){ft()(t,e);function t(e){st()(this,t);var a=dt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.optionsFetcher=a.optionsFetcher.bind(a);return a}ct()(t,[{key:"getLabelId",value:function e(){var t=this.props,a=t.dialogId,n=t.input;return Dr(a,n,"label")}},{key:"optionsFetcher",value:function e(t){var a=this.props,n=a.dialogId,r=a.input;return this.props.fetchSelectSuggestionDialog({dialogId:n,inputName:r.name,value:t})}},{key:"renderSelect",value:function e(){var t=this.props,a=t.dialogId,n=t.error,r=t.featureBotsNotMembers,i=t.input,o=t.isSubmitting,s=t.onBlur,l=t.onChange,c=t.onFocus,u=t.value;var d=Pr(a,i);var p=this.getLabelId();var f={id:d,isSubmitting:o,labelId:p,onBlur:s,onChange:l,onFocus:c,value:u,dialogId:a,dataSource:i.data_source,includeApps:!r,minQueryLength:i.min_query_length,optionsFetcher:this.optionsFetcher,options:i.options,optionGroups:i.option_groups,isDisabled:i.is_disabled,isRequired:i.is_required,hintText:i.hint,errorText:n,name:i.name,placeholder:i.placeholder,ref:this.setRef,selectedOptions:i.selected_options};return Ze.a.createElement(xr["a"],f)}},{key:"render",value:function e(){var t=this.props,a=t.dialogId,n=t.input,r=t.isSubmitting;var i=Pr(a,n);var o=this.getLabelId();var s=Er()({"c-label--disabled":n.disabled||r});return Ze.a.createElement(Mr["a"],{className:s,htmlFor:i,id:o,key:n.name,text:n.label,optional:!!n.optional},this.renderSelect())}}]);return t}(Ze.a.Component);Ur.displayName="AppDialogInputSelect";var qr=function e(t){return{featureBotsNotMembers:Object(le["isFeatureEnabled"])(t,"feature_bots_not_members")}};var Gr={fetchSelectSuggestionDialog:mr};Ur.defaultProps=Br;var Hr=Object(vt["connect"])(qr,Gr,null,{withRef:true})(Ur);var Wr=a(190);var Vr={error:ht.a.string,dialogId:ht.a.string.isRequired,input:ht.a.object.isRequired,isSubmitting:ht.a.bool,onBlur:ht.a.func.isRequired,onChange:ht.a.func.isRequired,onFocus:ht.a.func.isRequired,value:ht.a.string};var zr={error:null,isSubmitting:false,value:""};var Qr=function(e){ft()(t,e);function t(){st()(this,t);return dt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}ct()(t,[{key:"render",value:function e(){var t=this.props,a=t.error,n=t.dialogId,r=t.input,i=t.isSubmitting,o=t.onBlur,s=t.onChange,l=t.onFocus,c=t.value;var u=Pr(n,r);var d=Dr(n,r,"label");var p=Er()({"c-label--disabled":r.disabled||i});return Ze.a.createElement(Mr["a"],{className:p,htmlFor:u,id:d,key:r.name,text:r.label,optional:!!r.optional},Ze.a.createElement(Wr["a"],{autoComplete:"off",labelId:d,isDisabled:r.disabled||i,errorText:a,hintText:r.hint,id:u,isRequired:!r.optional,name:r.name,onBlur:o,onChange:s,onFocus:l,placeholder:r.placeholder,type:"text",value:c}))}}]);return t}(Ze.a.Component);Qr.displayName="AppDialogInputText";var Kr=Qr;Qr.defaultProps=zr;var Yr=a(799);var Jr={dialogId:ht.a.string.isRequired,error:ht.a.string,input:ht.a.object.isRequired,isSubmitting:ht.a.bool,onBlur:ht.a.func.isRequired,onChange:ht.a.func.isRequired,onFocus:ht.a.func.isRequired,value:ht.a.string};var Zr={error:null,isSubmitting:false,value:""};function Xr(e){var t=e.dialogId,a=e.error,n=e.input,r=e.isSubmitting,i=e.onBlur,o=e.onChange,s=e.onFocus,l=e.value;var c=Pr(t,n);var u=Dr(t,n,"label");var d=Er()({"c-label--disabled":n.disabled||r});return Ze.a.createElement(Mr["a"],{className:d,htmlFor:c,key:n.name,id:u,text:n.label,optional:!!n.optional},Ze.a.createElement(Yr["a"],{autoComplete:"off",labelId:u,isDisabled:n.disabled||r,errorText:a,hintText:n.hint,id:c,isRequired:!n.optional,name:n.name,maxCharacterLimit:n.max_length,onBlur:i,onChange:o,onFocus:s,placeholder:n.placeholder,value:l}))}Xr.displayName="AppDialogInputTextarea";Xr.defaultProps=Zr;var $r={select:"select",text:"text",textarea:"textarea"};var ei={error:ht.a.string,dialogId:ht.a.string.isRequired,input:ht.a.object.isRequired,isSubmitting:ht.a.bool,onBlur:ht.a.func.isRequired,onChange:ht.a.func.isRequired,onFocus:ht.a.func.isRequired,value:ht.a.string};var ti={error:null,isSubmitting:false,value:""};var ai=function(e){ft()(t,e);function t(){st()(this,t);return dt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}ct()(t,[{key:"render",value:function e(){var t=this.props,a=t.error,n=t.dialogId,r=t.input,i=t.isSubmitting,o=t.onBlur,s=t.onChange,l=t.onFocus,c=t.value;var u={error:a,dialogId:n,input:r,isSubmitting:i,onBlur:o,onChange:s,onFocus:l,value:c};switch(r.type){case $r.select:return Ze.a.createElement(Hr,u);case $r.text:return Ze.a.createElement(Kr,u);case $r.textarea:return Ze.a.createElement(Xr,u);default:return}}}]);return t}(Ze.a.Component);ai.displayName="AppDialogInput";var ni=ai;ai.defaultProps=ti;var ri;var ii=new gt["b"]("app_dialog");var oi=(ri={},Ka()(ri,$r.text,150),Ka()(ri,$r.textarea,3e3),ri);var si={maxLength:"maxLength",minLength:"minLength",required:"required"};function li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case si.maxLength:return ii.t("You can't enter more than {maxLength, plural, =1 {# character} other {# characters}}.",t);case si.minLength:return ii.t("You must enter at least {minLength, plural, =1 {# character} other {# characters}}.",t);case si.required:return ii.t("This field is required.");default:break}return null}function ci(e){var t=e.elements,a=e.lastActiveElementName,n=e.touchedElements,r=e.values;return t.reduce(function(e,t){var s=r[t.name];var l=a===t.name;var c=!t.optional&&!s&&!l;var u=Object(o["includes"])([$r.text,$r.textarea],t.type);var d=Math.max(t.min_length,0);var p=Object(o["isNumber"])(d)&&Object(o["get"])(s,"length",0)<d;var f=!s&&l;var m=!s&&t.optional;var h=u&&p&&!f&&!m;var v=Math.min(t.max_length,oi[t.type]);var g=v&&Object(o["get"])(s,"length")>v;var b=u&&g;if(!n[t.name])return e;if(c)return i()({},e,Ka()({},t.name,li(si.required)));if(h)return i()({},e,Ka()({},t.name,li(si.minLength,{minLength:d})));if(b)return i()({},e,Ka()({},t.name,li(si.maxLength,{maxLength:v})));return e},{})}var ui={validate:ci};var di=a(1956);var pi=new gt["b"]("app_dialog");var fi={id:ht.a.string.isRequired,elements:ht.a.array,isLoading:ht.a.bool,isSubmitting:ht.a.bool,loadingFailed:ht.a.bool,serverErrors:ht.a.object,submittingFailed:ht.a.bool,onLoadRetried:ht.a.func.isRequired,onSubmit:ht.a.func.isRequired,onSubmitRetried:ht.a.func.isRequired};var mi={elements:[],serverErrors:{},isLoading:false,isSubmitting:false,loadingFailed:false,submittingFailed:false};var hi=300;var vi=3;var gi=function(e){ft()(t,e);function t(e){st()(this,t);var a=dt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={errors:{},lastActiveElementName:null,touchedElements:{},values:{}};Object(o["bindAll"])(a,["onInputBlurred","onInputChanged","onInputFocused","setFirstElementRef","submit","updateErrors"]);a.updateErrors=Object(o["debounce"])(a.updateErrors,hi);return a}ct()(t,[{key:"componentWillReceiveProps",value:function e(t){var a=!t.isLoading&&this.props.isLoading;if(a){var n=t.elements.reduce(function(e,t){return i()({},e,Ka()({},t.name,t.value))},{});this.setState(function(){return{values:Object(o["omitBy"])(n,o["isUndefined"])}})}}},{key:"componentDidUpdate",value:function e(t){var a=!this.props.isLoading&&t.isLoading;var n=!this.props.isSubmitting&&t.isSubmitting;if(this.firstElement&&(a||n)){var r=Object(Cr["findDOMNode"])(this.firstElement);r&&r.focus()}}},{key:"onInputBlurred",value:function e(){this.setState(function(){return{lastActiveElementName:null}})}},{key:"onInputFocused",value:function e(){var t=this;this.setState(function(e){return{errors:ci({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"onInputChanged",value:function e(t,a){var n=this;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.setTouched,s=void 0===o||o;this.setState(function(e){var r=t;var o=i()({},e.touchedElements,Ka()({},t,s));var l=i()({},e.values,Ka()({},t,a));var c=ci({elements:n.props.elements,lastActiveElementName:r,touchedElements:o,values:l});var u={lastActiveElementName:r,touchedElements:o,values:l};return c[t]?u:i()({},u,{errors:c})});this.updateErrors()}},{key:"getElementError",value:function e(t){var a=!this.state.touchedElements[t]&&this.props.serverErrors[t];return a||this.state.errors[t]||null}},{key:"getGeneralError",value:function e(t){return pi.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var a=e.text;return Ze.a.createElement("button",{className:"c-deprecated_button--link",onClick:t},a)})}},{key:"getShouldShowSpeedBump",value:function e(t){var a=this.state,n=a.touchedElements,r=a.values;if("go"!==t)return Object(o["some"])(this.props.elements,function(e){var t=e.name,a=e.type;if(!n[t])return false;var i=r[t];if(a===$r.text||a===$r.textarea)return Object(o["get"])(i,"length",0)>=vi;return!!i});return false}},{key:"setFirstElementRef",value:function e(t){this.firstElement=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"bindArgs",value:function e(t){for(var a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return t.bind.apply(t,[this].concat(n))}},{key:"updateErrors",value:function e(){var t=this;this.setState(function(e){return{errors:ci({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"maybeRenderGeneralError",value:function e(){if(this.props.submittingFailed)return Ze.a.createElement(Rr,{message:this.getGeneralError(this.props.onSubmitRetried)});return null}},{key:"submit",value:function e(){var t=this;var a=null;var n=this.props.elements.reduce(function(e,t){return i()({},e,Ka()({},t.name,true))},{});var r=ci({elements:this.props.elements,lastActiveElementName:a,touchedElements:n,values:this.state.values});this.setState(function(){return{errors:r,lastActiveElementName:a,touchedElements:n}});if(!Object(o["isEmpty"])(r)){var s=new Error("Validation failed.");return Promise.reject(s)}return this.props.onSubmit(this.props.id,this.state.values).finally(function(){return t.setState(function(){return{touchedElements:{}}})})}},{key:"renderDialogElements",value:function e(){var t=this;return Ze.a.createElement("form",{onSubmit:function e(t){t.preventDefault()}},this.props.elements.map(function(e,a){return Ze.a.createElement(ni,{error:t.getElementError(e.name),dialogId:t.props.id,input:e,isSubmitting:t.props.isSubmitting,key:e.name,onBlur:t.onInputBlurred,onChange:t.bindArgs(t.onInputChanged,e.name),onFocus:t.onInputFocused,ref:0===a?t.setFirstElementRef:null,value:t.state.values[e.name]})}))}},{key:"render",value:function e(){var t=this.props,a=t.isLoading,n=t.isSubmitting,r=t.loadingFailed,i=t.onLoadRetried;var o=Er()("p-app_dialog_elements",{"p-app_dialog_elements--empty":a||r},{"p-app_dialog_elements--submitting":n});var s=void 0;s=a?Ze.a.createElement(jr["a"],{size:"jumbo"}):r?Ze.a.createElement(Rr,{message:this.getGeneralError(i),align:"center"}):this.renderDialogElements();return Ze.a.createElement("div",{className:o},this.maybeRenderGeneralError(),s)}}]);return t}(Je["Component"]);gi.displayName="BaseAppDialogElements";gi.defaultProps=mi;var bi=Object(nr["a"])(gi);var _i=bi;var yi={fetcher:ht.a.func.isRequired,id:ht.a.string.isRequired,onFetchRejected:ht.a.func,onFetchResolved:ht.a.func,onSubmitRetried:ht.a.func,submitter:ht.a.func.isRequired};var ki={onFetchRejected:o["noop"],onFetchResolved:o["noop"],onSubmitRetried:o["noop"]};var Oi=function(e){ft()(t,e);function t(e){st()(this,t);var a=dt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={errors:{},isLoading:true};Object(o["bindAll"])(a,["onFetchRejected","onFetchResolved","onSubmit","onSubmitRejected","onSubmitResolved","retryLoad","setDialogElementsRef"]);return a}ct()(t,[{key:"componentDidMount",value:function e(){this.state.isLoading&&this.load()}},{key:"onFetchRejected",value:function e(){this.setState(function(){return{isLoading:false,loadingFailed:true}},this.props.onFetchRejected)}},{key:"onFetchResolved",value:function e(t){var a=this;this.setState(function(){return{elements:t.elements,isLoading:false,loadingFailed:false}},function(){a.props.onFetchResolved(t)})}},{key:"onSubmitRejected",value:function e(t){var a=t.data||{};var n={isSubmitting:false};a.error===ur.invalidSubmission?n.errors=kr(a.dialogErrors):n.submittingFailed=true;this.setState(function(){return n});throw t}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{errors:{},isSubmitting:false,submittingFailed:false}})}},{key:"onSubmit",value:function e(t,a){this.setState(function(){return{isSubmitting:true}});return this.props.submitter({dialogId:t,submission:a}).then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.dialogElements&&this.dialogElements.getShouldShowSpeedBump())}},{key:"setDialogElementsRef",value:function e(t){this.dialogElements=t;this.dialogElements&&this.dialogElements.getWrappedInstance&&(this.dialogElements=this.dialogElements.getWrappedInstance())}},{key:"load",value:function e(){this.props.fetcher(this.props.id).then(this.onFetchResolved).catch(this.onFetchRejected)}},{key:"retryLoad",value:function e(){this.setState(function(){return{isLoading:true}},this.load)}},{key:"submit",value:function e(){return this.dialogElements.submit()}},{key:"render",value:function e(){return Ze.a.createElement(_i,{id:this.props.id,serializationKey:"app-dialog-elements",elements:this.state.elements,serverErrors:this.state.errors,isLoading:this.state.isLoading,isSubmitting:this.state.isSubmitting,loadingFailed:this.state.loadingFailed,onLoadRetried:this.retryLoad,onSubmitRetried:this.props.onSubmitRetried,onSubmit:this.onSubmit,ref:this.setDialogElementsRef,submittingFailed:this.state.submittingFailed})}}]);return t}(Je["Component"]);Oi.displayName="AppDialogElementsContainer";var wi=function e(t,a){var n=a.fetcher,r=a.submitter;return{fetcher:n||function(e){return t(dr(e))},submitter:r||function(e){return t(pr(e))}}};Oi.defaultProps=ki;var Ei=Object(nr["a"])(Oi);var Ci=Object(vt["connect"])(null,wi,null,{withRef:true})(Ei);var ji=Ci;var Si=a(1958);var Ii=new gt["b"]("app_dialog");var Ti={appId:ht.a.string.isRequired,app:ht.a.object,featureAppDialogsNotifyOnCancel:ht.a.bool,fetcher:ht.a.func,id:ht.a.string.isRequired,notifyCancel:ht.a.func.isRequired,onClose:ht.a.func,submitLabel:ht.a.string,submitter:ht.a.func,title:ht.a.string.isRequired,clogger:ht.a.object.isRequired};var Ni={app:{isNonExistent:true},featureAppDialogsNotifyOnCancel:false,fetcher:null,onClose:o["noop"],submitLabel:Ii.t("Submit"),submitter:null};var Ai=function(e){ft()(t,e);function t(e){st()(this,t);var a=dt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={goButtonIsDisabled:true,goButtonIsPending:false,shouldNotifyOnCancel:false};Object(o["bindAll"])(a,["getShouldShowSpeedBump","onFetchResolved","onSubmitRejected","onSubmitResolved","onClose","onGo","onKeyPressedCmdEnter","renderTitle","setElementsContainerRef"]);return a}ct()(t,[{key:"componentDidMount",value:function e(){this.track("opened");this.keyCommands=new rr["a"];this.keyCommands.bindAll([{keys:["command+enter"],handler:this.onKeyPressedCmdEnter}])}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset()}},{key:"onFetchResolved",value:function e(t){var a=t.notifyOnCancel;this.setState(function(){return{goButtonIsDisabled:false,shouldNotifyOnCancel:a}})}},{key:"onSubmitRejected",value:function e(){this.setState(function(){return{goButtonIsPending:false}})}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{goButtonIsPending:false}},this.props.onClose)}},{key:"onClose",value:function e(){var t=this.props,e=t.onClose,a=t.id,n=t.featureAppDialogsNotifyOnCancel,r=t.notifyCancel;var i=this.state.shouldNotifyOnCancel;i&&n&&r(a);this.track("cancelled");Object(o["defer"])(e)}},{key:"onKeyPressedCmdEnter",value:function e(){this.onGo()}},{key:"onGo",value:function e(){this.setState(function(){return{goButtonIsPending:true}});this.elementsContainer.submit().then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.elementsContainer&&this.elementsContainer.getShouldShowSpeedBump())}},{key:"setElementsContainerRef",value:function e(t){this.elementsContainer=t&&t.getWrappedInstance();this.elementsContainer&&this.elementsContainer.getWrappedInstance&&(this.elementsContainer=this.elementsContainer.getWrappedInstance())}},{key:"track",value:function e(t){var a=this.props,n=a.appId,r=a.id,i=a.clogger;i.track("APP_DIALOG_"+t.toUpperCase(),{app_id:n,dialog_id:r,contexts:{core:{app_id:n}}})}},{key:"renderTitle",value:function e(){var t=this.props.app;var a=Object(yr["a"])(t,72);var n=Ii.t("Header Icon");return Ze.a.createElement("div",{className:"p-app_dialog__title"},Ze.a.createElement("img",{alt:n,className:"p-app_dialog__title_icon",src:a}),Ze.a.createElement("div",{className:"p-app_dialog__title_text"},this.props.title))}},{key:"render",value:function e(){var t=this.props,a=t.appId,n=t.app;var r="/apps/"+a;var i=void 0;i=Object(vr["b"])(n)?n.name:Object(vr["d"])(n)?Ze.a.createElement(ir["a"],{type:"unknown"}):Ze.a.createElement(ir["a"],{type:"non-existent"});var o=Ii.rt("Learn more about {appName}",{appName:i});var s=this.props,l=s.fetcher,c=s.id,u=s.submitLabel,d=s.submitter,p=s.title;var f=this.state,m=f.goButtonIsDisabled,h=f.goButtonIsPending;return Ze.a.createElement(jt["a"],{contentLabel:p,className:"p-app_dialog",footerIcon:"question-circle",footerLink:r,footerText:o,getShouldShowSpeedBump:this.getShouldShowSpeedBump,goButtonIsDisabled:h||m,goButtonIsPending:h,goButtonText:u,goOnEnterPressed:false,onClose:this.onClose,onGo:this.onGo,shouldCloseOnGo:false,title:this.renderTitle()},Ze.a.createElement(ji,{fetcher:l,id:c,serializationKey:"app-dialog-elements-container-"+c,onFetchResolved:this.onFetchResolved,onSubmitRetried:this.onGo,ref:this.setElementsContainerRef,submitter:d}))}}]);return t}(Je["Component"]);Ai.displayName="AppDialog";Ai.defaultProps=Ni;var Ri=function e(t,a){if(Object(le["isFeatureEnabled"])(t,"feature_apps_store_m11n"))return Object(br["getAppById"])(t,a);return Object(gr["a"])(a)};var Mi=function e(t,a){var n=a.appId;return{app:Ri(t,n),featureAppDialogsNotifyOnCancel:Object(le["isFeatureEnabled"])(t,"feature_app_dialogs_notify_on_cancel"),clogger:Object(_r["a"])({state:t})}};var xi={notifyCancel:fr};var Pi=Ai;var Di=Object(nr["a"])(Ai);var Fi=Object(vt["connect"])(Mi,xi)(Di);var Li=Fi;var Bi=Object(hn["b"])("Opens app dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=Ze.a.createElement(Li,i()({},a,{serializationKey:"app-dialog",onClose:function t(){return e(Object(et["closeModal"])())}}));e(Object(et["openModal"])({element:n}))});Bi.propTypes={appId:ht.a.string.isRequired,id:ht.a.string.isRequired,submitLabel:ht.a.string,title:ht.a.string.isRequired};var Ui=Bi;var qi=a(419);var Gi=function e(t,a){var n=t.app_id,r=t.client_token,i=t.dialog_id,o=t.dialog_submit_label,s=t.dialog_title,l=t.timeout_range;if(!qi["a"].check(r))return;var c=qi["a"].getTimeDelta(r),u=c.delta,d=c.nowTs,p=c.tokenTs;Object(_r["a"])().track(ar["h"].APP_DIALOG_OPEN_ATTEMPTED,{app_id:n,dialog_id:i,dialog_client_token_ts:p,dialog_ms_event_received_ts:d});if(u>=l)return;a(Ui({appId:n,id:i,submitLabel:o,title:s}))};Object(Gt["b"])("dialog_opened",Gi);var Hi=a(677);var Wi=Object(Ee["c"])("TS.client.channel_page.handleAppChannelMembershipChange");var Vi=Object(Ee["c"])("TS.client.channel_page.handleAppWildcardChange");var zi=a(243);var Qi=a(872);var Ki=a(3407);var Yi="app_wildcard_added";var Ji="app_wildcard_removed";var Zi="app_permission_request";var Xi="app_permission_user_request";var $i="app_conversation_invite_request";var eo="channel";function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,a=e.type;var n=arguments[1];var r=arguments[2];var s=r();var l=a===Yi;var c=Object(ue["getPrimaryView"])(s);var u=Object(Fe["a"])(c)&&c;var d=Object(te["isChannelExistent"])(s,u)&&Object(te["getChannelById"])(s,u);var p=Object(o["cloneDeep"])(Object(Ba["getCachedMemberCounts"])(s,u));var f=Object(Ya["getChannelMembershipInfoForUser"])(s,u,t);var m=Object(pe["isPublicChannel"])(d)&&f.isKnown&&l!==f.isMember;n(Object(Ya["clearAllMembershipInfoForUser"])(t));n(Object(Ba["clearAllMemberCounts"])());if(m&&p&&p.counts){var h=Object(o["get"])(p,"counts.app_count",0);var v=h+(l?1:-1);p.counts.app_count=v;n(Object(Ba["addOrReplaceMemberCounts"])({channelId:u,countInfo:i()({},p,{should_refetch:true})}))}Ua();n(Object(zi["maybeUpdateAppPermissionsAfterWildcardChange"])({appUserId:t,wildcardEnabled:l}));Object(le["isFeatureEnabled"])(s,"feature_wta_add_remove_m11n")?Vi(l):Object(Hi["c"])(l)}function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,a=e.client_token,n=e.request_approval,r=e.scope_info,i=e.scope_type,o=e.timeout_range,s=e.trigger_id,l=e.type;var c=arguments[1];var u=arguments[2];var d=u();if(!(Object(le["isFeatureEnabled"])(d,"feature_remote_files_api")&&"web-link-shared"===a)){if(!qi["a"].check(a))return;var p=qi["a"].getTimeDelta(a),f=p.delta;if(f>=o)return}var m={appUserId:t,hasChannelScopes:i===eo,isUserRequest:l===Xi,requestApproval:n,scopeInfo:r,scopeType:i,triggerId:s};var h=Ze.a.createElement(Qi["a"],m);c(Object(et["openModal"])({element:h}))}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,a=e.channel_id,n=e.client_token,r=e.invite_message_ts,i=e.scope_info,o=e.timeout_range;var s=arguments[1];var l=arguments[2];if(!Object(le["isFeatureEnabled"])(l(),"feature_wta_add_remove_m11n"))return;if(!qi["a"].check(n))return;var c=qi["a"].getTimeDelta(n),u=c.delta;if(u>=o)return;s(Object(Ki["a"])({appUserId:t,channelId:a,inviteMessageTs:r,referringEventId:"MSG_LINK_CLICKED",scopeInfo:i}))}Object(Gt["b"])(Yi,to);Object(Gt["b"])(Ji,to);Object(Gt["b"])(Zi,ao);Object(Gt["b"])(Xi,ao);Object(Gt["b"])($i,no);var ro=a(426);function io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app;var a=arguments[1];var n=arguments[2];if(!Object(le["isFeatureEnabled"])(n(),"feature_apps_store_m11n"))return;t&&a(Object(br["bulkUpsertAppsAndMarkAsFresh"])([t]))}function oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_id;var a=arguments[1];var n=arguments[2];so(t,a,n);lo(t,a)}function so(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_apps_store_m11n"))return;e&&t(Object(br["bulkRmApps"])([e]))}function lo(e,t){t(Object(ro["markAppProfilesForAppAsStale"])(e))}Object(Gt["b"])("apps_installed",io);Object(Gt["b"])("apps_changed",io);Object(Gt["b"])("apps_uninstalled",oo);var co=Object(gn["a"])("Runs a benchmark on a RTM event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.method,r=a.identifier,i=a.loadtest,s=a.args;return e(Object(vn["a"])({method:"api.benchmark",args:{m:n,id:r,lt:i,a:s},DO_NOT_RETRY:true})).catch(o["noop"])});co.propTypes={method:ht.a.string,identifier:ht.a.string,loadtest:ht.a.any,args:ht.a.any};function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var a=e.m,n=e.pct,r=e.lt,i=e.a,o=e.id;Math.floor(100*Math.random())<n&&t(co({method:a,loadtest:r,args:i,id:o}))}Object(Gt["b"])("benchmark",uo);var po=Object(Ee["c"])("TS.bots.ensureBotsArePresent");var fo=Object(Ee["c"])("TS.bots.legacyBatchUpsertAndSignal");var mo=a(162);function ho(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var a=arguments[1];var n=arguments[2];vo(t,a,n);go(t,a)}function vo(e,t,a){Object(le["useReactMessages"])(a())?t(Object(mo["upsertBot"])(e)):fo([e])}function go(e,t){t(Object(ro["markAppProfileAsStale"])(e.id))}Object(Gt["b"])("bot_added",vo);Object(Gt["b"])("bot_changed",ho);var bo=a(1960);var _o=a(625);function yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas_id;var a=arguments[1];var n=arguments[2];var r=n();if(!Object(le["isFeatureEnabled"])(r,"feature_canvases"))return;a(Object(_o["mountModal"])({canvasId:t}))}function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas_id;var a=arguments[1];var n=arguments[2];var r=n();if(!Object(le["isFeatureEnabled"])(r,"feature_canvases"))return;a(Object(_o["getCanvasContent"])({canvasId:t}))}Object(Gt["b"])("canvas_mounted",yo);Object(Gt["b"])("canvas_changed",ko);var Oo=a(57);var wo=a(743);var Eo=a(278);var Co=a(445);var jo=a(326);var So="CHANNEL-STATUS";function Io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.is_moved;var n=arguments[1];var r=arguments[2];var i=r();var o=Object(te["isChannelExistent"])(i,t)&&Object(te["getChannelById"])(i,t);if(!o){Object(V["a"])({getState:r}).warn("Received archive event for an unknown channel: "+t);return}if(Object(pe["isArchived"])(o))return;Object(V["a"])({getState:r}).info(So,"Archived channel "+t);var s=void 0;if(Object(pe["isPublicChannel"])(o)){var l=Object(de["getCurrentMember"])(i);s=!Object(qa["isRestricted"])(l)&&Object(pe["isMemberOfChannel"])(o)}else Object(pe["isPrivateChannel"])(o)&&(s=!!Object(pe["isOpen"])(o));n(Object(te["archiveChannel"])({id:t,isMoved:!!a,wasArchivedThisSession:s}))}function To(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var n=arguments[2];if(Object(pe["isIm"])(t)){a(Object(te["upsertChannel"])({channel:t}));Object(jo["d"])();a(Object(te["updateOneKeyForChannel"])({id:t.id,opened_this_session:true}));return}if(Object(qa["isRestricted"])(Object(de["getCurrentMember"])(n())))return;Object(V["a"])({getState:n}).info(So,"Created channel "+t.id);var r=a(Object(te["upsertChannel"])({channel:t}));Object(va["d"])(r)}var No=function(){var e=Object(Oo["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.user;var n=arguments[1];n(Object(te["setConversationOpen"])({channel:t,user:a}))});return function t(a,n){return e.apply(this,arguments)}}();function Ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.converted_to;var n=arguments[1];var r=arguments[2];var i=r();var o=Object(te["isChannelExistent"])(i,t)&&Object(te["getChannelById"])(i,t);if(!o){Object(V["a"])({getState:r}).error("Unknown channel "+t);return}n(Object(te["updateOneKeyForChannel"])({id:t,is_open:false}));var s=void 0;if(a){n(Object(te["updateOneKeyForChannel"])({id:t,latest:null}));s=a}if(t===Object(ue["getPrimaryView"])(r())){var l=Object(le["isClientApp"])(r());if(Object(ee["a"])()||l&&s){s=s||Object(ce["getPrevChannelIdWithFallback"])(r());n(Object(Eo["a"])({id:s}))}else l&&Object(Le["a"])()}Object(pe["isIm"])(o)&&Object(Co["a"])(Object(te["getChannelById"])(r(),t))}function Ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var n=arguments[2];var r=n();var i=Object(te["isChannelExistent"])(r,t)&&Object(te["getChannelById"])(r,t);if(!i){Object(V["a"])({getState:n}).warn("Received deleted event for an unknown channel: "+t);return}Object(V["a"])({getState:n}).info(So,"Deleted channel "+t);a(Object(te["removeChannels"])({ids:[t]}))}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var n=arguments[2];Object(V["a"])({getState:n}).info(So,"You joined channel "+t.id);if((Object(pe["isMpim"])(t)||Object(pe["isPrivateChannel"])(t))&&!Object(pe["isExternallySharedChannel"])(t)){var r=n();var o=Object(te["isChannelExistent"])(r,t.id)&&Object(te["getChannelById"])(r,t.id);o&&Object(V["a"])({getState:n}).warn("Received join event for an mpim or group we already know about ("+t.id+"); ignoring it.")}var s=i()({},t,{is_member:true});var l=a(Object(te["upsertChannel"])({channel:s}));a(Object(te["joinChannel"])(l))}function xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var n=arguments[2];Object(V["a"])({getState:n}).info(So,"You left channel "+t);var r=n();var i=Object(te["isChannelExistent"])(r,t)&&Object(te["getChannelById"])(r,t);if(!i){Object(va["n"])(t)||Object(V["a"])({getState:n}).warn("Received left event for a channel we don't know about ("+t+"); ignoring it.");return}a(Object(te["leaveChannel"])(i));Object(pe["isPrivateChannel"])(i)&&a(Object(te["removeChannels"])({ids:[i.id]}))}function Po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var n=arguments[2];var r=n();var i=Object(te["isChannelExistent"])(r,t.id)&&Object(te["getChannelById"])(r,t.id);if(!i){Object(V["a"])({getState:n}).warn("Received rename event for an unknown channel: "+t.id);return}Object(V["a"])({getState:n}).info(So,"Renamed channel "+t.id);a(Object(te["renameChannel"])({id:t.id,name:t.name,name_normalized:t.name_normalized,_name_lc:t.name.toLowerCase()}))}function Do(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.user,n=e.ts,r=e.purpose;var i=arguments[1];var o=arguments[2];var s=o();var l=Object(te["isChannelExistent"])(s,t)&&Object(te["getChannelById"])(s,t);if(!l){Object(V["a"])({getState:o}).warn("Received channel purpose change event for an unknown channel: "+t);return}Object(V["a"])({getState:o}).info(So,a+" changed purpose for channel "+t);var c={creator:a,last_set:n,value:r};i(Object(te["setChannelPurpose"])({id:t,purpose:c}))}function Fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.is_moved;var n=arguments[1];var r=arguments[2];var i=r();var o=Object(te["isChannelExistent"])(i,t)&&Object(te["getChannelById"])(i,t);if(!o){Object(V["a"])({getState:r}).warn("Received unarchive event for an unknown channel: "+t);return}if(!Object(pe["isArchived"])(o))return;Object(V["a"])({getState:r}).info(So,"Unarchived channel "+t);Object(pe["isPublicChannel"])(o)&&o.was_archived_this_session&&n(Object(te["joinConversationApi"])({channelId:t,inBackground:true}));n(Object(te["unarchiveChannel"])({id:t,isMoved:!!a}))}function Lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.user,n=e.ts,r=e.topic;var i=arguments[1];var o=arguments[2];var s=o();var l=Object(te["isChannelExistent"])(s,t)&&Object(te["getChannelById"])(s,t);if(!l){Object(V["a"])({getState:o}).warn("Received topic change event for an unknown channel: "+t);return}Object(V["a"])({getState:o}).info(So,a+" changed topic for "+t);var c={creator:a,last_set:n,value:r};i(Object(te["setChannelTopic"])({id:t,topic:c}))}function Bo(e,t,a){var n=e.channel,r=e.ts,i=e.type;var o=a();var s=Object(te["isChannelExistent"])(o,n)&&Object(te["getChannelById"])(o,n);if("group_marked"===i&&Object(pe["isMpim"])(s))return;if(!s){Object(V["a"])({getState:a}).error("The channel model object was not found for the channel id ("+n+") we received in the "+i+" event");return}t(Object(wo["c"])({id:n,ts:r}))}function Uo(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_channel_converted_to_shared_rtm_handler"))return;var n=e&&e.channel&&e.channel.id;if(!n){Object(V["a"])({getState:a}).warn("RTM channel_converted_to_shared: message missing channel ID.");return}var r=a();var i=Object(te["isChannelExistent"])(r,n)&&Object(te["getChannelById"])(a(),n);if(!i){Object(V["a"])({getState:a}).warn("Received channel_converted_to_shared for an unknown channel: "+n);return}if(!Object(pe["isOrgShared"])(e.channel)&&!Object(pe["isOrgGlobalSharedPublicOrPrivateChannel"])(e.channel)){Object(V["a"])({getState:a}).warn("Ignoring channel_converted_to_shared for a non-org-shared, non-global-shared channel: "+n);return}Object(V["a"])({getState:a}).info(So,"Received channel_converted_to_shared for "+n);t(Object(te["convertToShared"])({channel:e.channel}))}function qo(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_history_changed_modern_rtm_handlers"))return;var n=e&&e.type;var r=e&&e.channel;if(!r){Object(V["a"])({getState:a}).warn("Received "+n+" without a 'channel' id.");return}var i=a();var o=Object(te["isChannelExistent"])(i,r)&&Object(te["getChannelById"])(i,r);if(!o){Object(V["a"])({getState:a}).warn("Received "+n+" for an unknown channel: "+r);return}t(Object(Ae["removeAllTimestamps"])({channelId:r,includeThreads:Object(le["isFeatureEnabled"])(i,"feature_react_threads")}))}Object(Gt["b"])("channel_archive",Io);Object(Gt["b"])("channel_created",To);Object(Gt["b"])("channel_deleted",Ro);Object(Gt["b"])("channel_joined",Mo);Object(Gt["b"])("channel_left",xo);Object(Gt["b"])("channel_rename",Po);Object(Gt["b"])("channel_unarchive",Fo);Object(Gt["b"])("group_archive",Io);Object(Gt["b"])("group_deleted",Ro);Object(Gt["b"])("group_joined",Mo);Object(Gt["b"])("group_left",xo);Object(Gt["b"])("group_rename",Po);Object(Gt["b"])("group_unarchive",Fo);Object(Gt["b"])("mpim_joined",Mo);Object(Gt["b"])("mpim_open",No);Object(Gt["b"])("im_created",To);Object(Gt["b"])("im_open",No);Object(Gt["b"])("mpim_close",Ao);Object(Gt["b"])("im_close",Ao);Object(Gt["b"])("channel_marked",Bo);Object(Gt["b"])("group_marked",Bo);Object(Gt["b"])("mpim_marked",Bo);Object(Gt["b"])("im_marked",Bo);Object(Gt["b"])("channel_converted_to_shared",Uo);Object(Gt["b"])("channel_history_changed",qo);Object(Gt["b"])("im_history_changed",qo);Object(Gt["b"])("mpim_history_changed",qo);Object(Gt["b"])("group_history_changed",qo);var Go=a(653);var Ho=a(3343);var Wo=void 0;function Vo(e){Wo||(Wo=Object(o["throttle"])(function(){return e(Object(Ho["a"])({resetPreviousCommands:true}))},1e3,{leading:false,trailing:true}));return Wo}function zo(e,t,a){var n=Object(le["isFeatureEnabled"])(a(),"feature_commands_changed_rtm_handler");if(!n)return;var r=e.commands_removed,i=e.commands_updated;if(r||i){Object(o["forEach"])(r,function(e){return t(Object(Go["removeCommand"])({commandName:e.name}))});t(Object(Go["bulkAddServerCommands"])({commands:i}))}else Vo(t)()}Object(Gt["b"])("commands_changed",zo);var Qo="DND";function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,a=e.type,n=e.user;var r=arguments[1];var i=arguments[2];var o=i();if(!Object(le["isFeatureEnabled"])(o,"feature_sonic_dnd_rtm")&&!Object(ee["a"])())return;if(!Object(Vt["getDndScheduleByMemberId"])(o,n))return;Object(V["a"])({getState:i}).info(Qo,"Received a "+a+" event for the current member ("+n+") with updated DND times");var s=t.next_dnd_start_ts,l=t.next_dnd_end_ts,c=t.snooze_enabled,u=t.snooze_endtime;r(Object(zt["d"])({nextDndStartTs:s,nextDndEndTs:l,snoozeEnabled:c,snoozeEndTs:u}));r(Object(zt["a"])({fetchDndTimes:false}))}function Yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,a=e.type,n=e.user;var r=arguments[1];var i=arguments[2];var o=i();if(!Object(le["isFeatureEnabled"])(o,"feature_sonic_dnd_rtm")&&!Object(ee["a"])())return;if(n===Object(le["getCurrentUserId"])(o))return;if(!Object(Vt["getDndScheduleByMemberId"])(o,n))return;Object(V["a"])({getState:i}).info(Qo,"Received a "+a+" event for the following member with updated DND times: "+n);var s=t.next_dnd_start_ts,l=t.next_dnd_end_ts;r(Object(Vt["updateDndSchedule"])({memberId:n,nextDndStartTs:s,nextDndEndTs:l}));r(Object(zt["a"])({fetchDndTimes:false}))}Object(Gt["b"])("dnd_updated",Ko);Object(Gt["b"])("dnd_updated_user",Yo);var Jo=a(681);var Zo=a(811);var Xo=function e(t,a,n){if(!t||!Object(ee["a"])())return;var r=t.name,i=t.names,o=t.subtype,s=t.value,l=t.old_name,c=t.new_name,u=t.event_ts;var d=n();var p=Object(z["getTeamId"])(d);var f=Object(V["a"])({teamId:p});if(!u){f.warn("RTM","emoji_changed: missing event_ts");return}if("add"===o){if(r&&s){var m=Object(Zo["e"])(Ka()({},r,s)),h=m.emojis,v=m.aliases;a(Object(Jo["bulkAddCustomEmoji"])({teamId:p,cacheTs:u,emojis:h,aliases:v}))}else f.warn("RTM",'emoji_changed: "add" subtype missing "name" or "value"');return}if("remove"===o){Array.isArray(i)?a(Object(Jo["bulkRemoveCustomEmoji"])({teamId:p,cacheTs:u,names:i})):f.warn("RTM",'emoji_changed: "remove" subtype missing "names"');return}if("rename"===o){l&&c?a(Object(Jo["renameCustomEmoji"])({teamId:p,cacheTs:u,prevName:l,nextName:c})):f.warn("RTM",'emoji_changed: "rename" subtype missing "old_name" or "new_name"');return}f.warn("RTM","emoji_changed: unknown or missing subtype")};Object(Gt["b"])("emoji_changed",Xo);var $o={handleEmojiChanged:Xo};var es=a(719);var ts=a(601);function as(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;Object(es["e"])(t);Object(es["f"])(t)}function ns(e){if(!e.team)return;Object(ts["e"])(e.team)}Object(Gt["b"])("enterprise_rename",as);Object(Gt["b"])("enterprise_team_added",ns);var rs=Object(Ee["c"])("TS.maybeShowRateLimitedDialog");var is={},os=is.refetchAuth;function ss(e,t,a){var n=a();var r=Object(An["getCurrentTeam"])(n);Object(V["a"])({getState:a}).warn("You have been removed from the "+Object(Mn["getTeamDisplayName"])(r)+" workspace.");Object(Le["e"])(r.id)}function ls(e,t,a){Object(pa["invalidateAuth"])();if(Object(ee["a"])()){Object(V["a"])({getState:a}).info("Re-fetching auth due to invalid_auth error");os()}else Object(_n["b"])({reason:"Reloading due to error "+e})}function cs(){Object(_n["b"])({noCache:true,reason:"Reloading because Flannel told us to"})}function us(e){if(Object(ee["a"])()){Object(_n["a"])();return}var t=true;Object(ea["d"])(t);Object(_n["b"])({reason:"Flushing storage and reloading due to '"+e+"' error"})}function ds(){rs()}Object(Gt["a"])("user_removed_from_team",ss);Object(Gt["a"])("account_inactive",ls);Object(Gt["a"])("team_disabled",ls);Object(Gt["a"])("invalid_auth",ls);Object(Gt["a"])("force_reload",cs);Object(Gt["a"])("clear_cache",us);Object(Gt["a"])("org_login_required",us);Object(Gt["a"])("team_added_to_org",us);Object(Gt["a"])("ratelimited",ds);var ps=a(730);function fs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id;var a=arguments[1];var n=arguments[2];if(!t)return;var r=n();if(!Object(na["hasFileWithId"])(r,t))return;var i=Object(z["getTeamId"])(r);if(!Object(na["isObjectFresh"])(i,t))return;var o=Object(na["getFileById"])(r,t);Object(ps["n"])(i,[t]);Object(oa["c"])(o)}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id,a=e.file_ids;var n=a||[t];n.forEach(function(e){return Object(oa["o"])(e)})}function hs(e,t,a){var n=Object(le["isFeatureEnabled"])(a(),"feature_file_comment_deleted_rtm_handler");if(!n)return;var r=e.file_id,i=e.comment;null!==Object(ps["h"])(a(),r,i)&&t(Object(ps["o"])({fileId:r,commentId:i}))}Object(Gt["b"])("file_public",fs);Object(Gt["b"])("file_private",fs);Object(Gt["b"])("file_change",fs);Object(Gt["b"])("file_shared",fs);Object(Gt["b"])("file_unshared",fs);Object(Gt["b"])("file_deleted",ms);Object(Gt["b"])("file_comment_deleted",hs);var vs=a(821);function gs(e,t,a){if(!Object(K["a"])()&&"client"!==Object(le["getFromBootData"])(a(),"app"))return;Object(vs["b"])()}Object(Gt["b"])("shared_invite_code_created",gs);Object(Gt["b"])("shared_invite_code_disabled",gs);var bs=a(1963);var _s=Object(Ee["c"])("TS.lessons.channel_created_sig.dispatch");var ys=Object(Ee["c"])("TS.lessons.file_uploaded_sig.dispatch");var ks=Object(Ee["c"])("TS.lessons.lesson_assigned_sig.dispatch");var Os=Object(Ee["c"])("TS.lessons.message_sent_sig.dispatch");function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=t.user_lessons;ks(a)}function Es(e,t,a){var n=e.user_event;switch(e.user_event){case"channel_created":_s(e);break;case"message_sent":Os(e);break;case"file_share":ys(e);break;default:Object(V["a"])({getState:a}).info("Received lesson_user_action event with an user_event value of '"+n+"'; ignoring it")}}Object(Gt["b"])("lesson_assigned",ws);Object(Gt["b"])("lesson_user_action",Es);var Cs=a(704);var js=a(806);var Ss=a(451);var Is=Object(Ee["c"])("TS.groups.member_left_sig.dispatch");var Ts=Object(Ee["c"])("TS.groups.member_joined_sig.dispatch");var Ns=s.a.memoize(function(e){var t=1;var a=Object(le["isFeatureEnabled"])(Object(Q["c"])(e),"feature_member_events")&&Object(Y["a"])(t);return{count:a?function(){return Object(J["c"])("member_event_received")}:s.a.noop}});function As(e,t,a){var n=e.channel_type,r=e.user,i=e.channel,o=e.inviter;var l=a();var c=Object(de["isMemberExistent"])(l,r)&&Object(de["getMemberById"])(l,r);var u=Object(te["isChannelExistent"])(l,i)&&Object(te["getChannelById"])(l,i);var d=Object(de["getCurrentMember"])(l);var p=true;var f=Object(V["a"])({state:l});Ns(Object(z["getTeamId"])(l)).count();if(Object(le["isFeatureEnabled"])(l,"feature_less_preprocess_fetching")){var m=t(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:i,membershipInfo:Ka()({},r,p)}));if(m){t(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:i}));t(Object(zi["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:r,channelId:i}));(Object(le["isFeatureEnabled"])(l,"feature_bots_not_members")?Object(qa["isAppOrBot"])(c):Object(qa["isAppUser"])(c))&&(Object(le["isFeatureEnabled"])(l,"feature_wta_add_remove_m11n")?Wi(u):Object(Hi["b"])(u,p))}if(u&&!Object(pe["isIm"])(u)&&!Object(pe["isMpim"])(u)){if(!Object(pe["isMemberOfChannel"])(u)){f.info(r+" joined channel "+i+" but we are not a member; ignoring");return}f.info(r+" joined channel "+i);o&&r===d.id&&t(Object(js["addInviter"])({channelId:i,inviter:o}));if(m){if("C"===n){Object(va["h"])(u,r);Object(qa["isAdmin"])(d)||Object(qa["isExternal"])(c)&&Object(qa["isStranger"])(c)&&t(Object(de["removeMember"])(c))}if("G"===n){c&&Object(jo["d"])();Ts(u,r)}}}return}if(Object(le["isFeatureEnabled"])(l,"feature_bots_not_members")?Object(qa["isAppOrBot"])(c):Object(qa["isAppUser"])(c)){var h=t(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:i,membershipInfo:Ka()({},r,p)}));if(h){t(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:i,memberCountDelta:0,restrictedMemberCountDelta:0,appCountDelta:1}));t(Object(zi["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:c.id,channelId:i}))}Object(le["isFeatureEnabled"])(l,"feature_wta_add_remove_m11n")?Wi(u):Object(Hi["b"])(u,p)}else if(u&&!Object(pe["isIm"])(u)&&!Object(pe["isMpim"])(u)){if(!Object(pe["isMemberOfChannel"])(u)){f.info(r+" joined channel "+i+" but we are not a member; ignoring");return}f.info(r+" joined channel "+i);o&&r===d.id&&t(Object(js["addInviter"])({channelId:i,inviter:o}));if("G"===n){var v=u.members||[];s.a.includes(v,r)||t(Object(te["updateOneKeyForChannel"])({id:u.id,members:v.concat(r)}))}var g=t(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:i,membershipInfo:Ka()({},r,p)}));if(c&&g){t(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:i,memberCountDelta:1,restrictedMemberCountDelta:Object(qa["isRestricted"])(c)?1:0,appCountDelta:0}));if("C"===n){Object(va["h"])(u,r);Object(qa["isAdmin"])(d)||Object(qa["isExternal"])(c)&&Object(qa["isStranger"])(c)&&t(Object(de["removeMember"])(c))}if("G"===n){Object(jo["d"])();Ts(u,r)}}}}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_type,a=e.user,n=e.channel;var r=arguments[1];var i=arguments[2];var o=i();var l=Object(de["isMemberExistent"])(o,a)&&Object(de["getMemberById"])(o,a);var c=Object(te["isChannelExistent"])(o,n)&&Object(te["getChannelById"])(o,n);var u=false;var d=Object(V["a"])({state:o});Ns(Object(z["getTeamId"])(o)).count();if(Object(le["isFeatureEnabled"])(o,"feature_less_preprocess_fetching")){var p=r(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:n,membershipInfo:Ka()({},a,u)}));if(p){r(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:n}));r(Object(zi["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:a,channelId:n}));(Object(le["isFeatureEnabled"])(o,"feature_bots_not_members")?Object(qa["isAppOrBot"])(l):Object(qa["isAppUser"])(l))&&(Object(le["isFeatureEnabled"])(o,"feature_wta_add_remove_m11n")?Wi(c):Object(Hi["b"])(c,u))}if(c&&!Object(pe["isIm"])(c)&&!Object(pe["isMpim"])(c)){if(!Object(pe["isMemberOfChannel"])(c)){d.info(a+" left channel "+n+" but we are not a member; ignoring");return}d.info(a+" left channel "+n);if(p){if("C"===t){Object(va["i"])(c,a);Object(qa["isAdmin"])(Object(de["getCurrentMember"])(o))||Object(qa["isExternal"])(l)&&!Object(qa["isStranger"])(l)&&r(Object(de["removeMember"])(l))}if("G"===t){l&&Object(jo["d"])();Is(c,a)}}}return}if(Object(le["isFeatureEnabled"])(o,"feature_bots_not_members")?Object(qa["isAppOrBot"])(l):Object(qa["isAppUser"])(l)){r(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:n,membershipInfo:Ka()({},a,u)}));r(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:n,memberCountDelta:0,restrictedMemberCountDelta:0,appCountDelta:-1}));r(Object(zi["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:l.id,channelId:n}));Object(le["isFeatureEnabled"])(o,"feature_wta_add_remove_m11n")?Wi(c):Object(Hi["b"])(c,u)}else if(c&&!Object(pe["isIm"])(c)&&!Object(pe["isMpim"])(c)){if(!Object(pe["isMemberOfChannel"])(c)){d.info(a+" left channel "+n+" but we are not a member; ignoring");return}d.info(a+" left channel "+n);if("G"===t){var f=c.members||[];s.a.includes(f,a)&&r(Object(te["updateOneKeyForChannel"])({id:c.id,members:s.a.reject(function(e){return e.id===a})}))}var m=r(Object(Ya["setChannelMembershipInfoForUsers"])({channelId:n,membershipInfo:Ka()({},a,u)}));if(l&&m){r(Object(Ba["updateAndInvalidateMemberCounts"])({channelId:n,memberCountDelta:-1,restrictedMemberCountDelta:Object(qa["isRestricted"])(l)?-1:0,appCountDelta:0}));if("C"===t){Object(va["i"])(c,a);Object(qa["isAdmin"])(Object(de["getCurrentMember"])(o))||Object(qa["isExternal"])(l)&&!Object(qa["isStranger"])(l)&&r(Object(de["removeMember"])(l))}if("G"===t){Object(jo["d"])();Is(c,a)}}}}function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user;var a=arguments[1];var n=arguments[2];var r=n();Ns(Object(z["getTeamId"])(r)).count();if(!t)return;var i=Object(de["isMemberExistent"])(r,t.id)&&Object(de["getMemberById"])(r,t.id);if(!i)return;if(!Object(le["isFeatureEnabled"])(r,"feature_degraded_send")&&i.id===Object(le["getCurrentUserId"])(r)&&t.profile&&!t.profile.email&&!Object(Oe["getTeamPref"])(r,"display_email_addresses")){var o=i.profile&&i.profile.email;if(o){Object(V["a"])({state:r}).info("user_change: email hidden via team pref. appending email from model for local user, so it is not lost in upsert.");t.profile.email=o}}Object(ee["a"])()?a(Object(Cs["a"])({members:[t]})):Object(jo["f"])(t)}function xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,a=e.channel;var n=arguments[1];var r=arguments[2];var i=r();var o=Object(de["isMemberExistent"])(i,t)&&Object(de["getMemberById"])(i,t);Ns(Object(z["getTeamId"])(i)).count();if(!o){Object(V["a"])({state:i}).info("user_typing event from user ("+t+") not in model; ignoring");return}var s=Object(te["isChannelExistent"])(i,a)&&Object(te["getChannelById"])(i,a);if(!s){Object(V["a"])({state:i}).error("user_typing event for channel ("+a+") not in model; ignoring");return}n(Object(Ss["memberStartedTyping"])({channelId:a,memberId:t}))}Object(Gt["b"])("member_joined_channel",As);Object(Gt["b"])("member_left_channel",Rs);Object(Gt["b"])("user_change",Ms);Object(Gt["b"])("user_typing",xs);var Ps={getMemberEventReceivedRecorder:Ns};var Ds=a(94);var Fs=a(683);var Ls=a(36);var Bs=a(962);var Us=a(963);var qs=a(189);var Gs=a(662);var Hs=a(870);function Ws(e,t){var a=t.channel,n=t.timestamp,r=t.description;var i={channel:a,msg_ts:n,desc:r};Object.keys(i).forEach(function(t){Vs(e).recordMetric(t,i[t])})}function Vs(e){return Object(Hs["a"])("notifs",function(t){var a=tt["isDev"]?"/beacon/notifs":"https://slack.com/beacon/notifs";t.setUser(Object(le["getCurrentUserId"])(e)).setTeam(Object(z["getTeamId"])(e)).setVersionTs(Object(le["getFromBootData"])(e,"version_ts")).setEndpointUrl(a)})}var zs=a(350);var Qs=a(153);var Ks=a(807);var Ys=new Set;function Js(e,t,a){var n=a();if(!Object(le["isClientApp"])(n))return;var r=Object(Ds["v"])(n,e.channel)&&Object(Ds["f"])(n,e.channel);var i=Xs(e);var o=void 0;o="desktop_notification"===e.type?Object(zs["j"])(n,e):Object(pe["isIm"])(r)?Object(zs["k"])(n,e,r):Object(zs["i"])(n,e,r);o===Qs["a"].NONE&&Ys.has(i)&&(o=Qs["a"].ALREADY_SHOWN);if(Object(K["a"])()&&o===Qs["a"].PERMISSION_DENIED)Object(Ks["b"])(t,function(n){n&&Js(e,t,a)});else if(o!==Qs["a"].NONE){var s=Object(Qs["b"])(o,r&&r.id,e.ts);if(s){Object(V["a"])({getState:a}).warn("Notification ("+e.type+") suppressed because:\n"+s);Ws(n,{channel:r.id,timestamp:e.ts||e.msg,description:s})}}else{t(Object(Ks["c"])({message:e,modelObject:r,options:"desktop_notification"===e.type?{skip_formatting:true,launch_uri:e.launchUri,image_uri:e.imageUri,avatar_image:e.avatarImage}:{}}));Ys.add(i);Ws(n,{channel:r.id,timestamp:e.ts||e.msg,description:"Notification shown"})}}function Zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.timestamp;var n=arguments[1];var r=arguments[2];var o=r();var s=Object(Me["getMessageByTimestamp"])(o,t,a);if(!s)return;if(s._ignore_dnd)return;n(Object(Me["addMessages"])([i()({},s,{_ignore_dnd:true})]));var l=Object(Me["getMessageByTimestamp"])(r(),t,a);Js(l,n,r)}function Xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.msg,n=e.ts;return t&&(n||a)?t+":"+(n||a):Date.now().toString()}Object(Gt["b"])("desktop_notification",Js);Object(Gt["b"])("dnd_override",Zs);var $s=a(422);var el=a(428);var tl=a(480);var al="RTM-THREADS";var nl=function e(t,a,n){var r=n();var i=t.channel,o=t.message;var l=Object(te["isChannelExistent"])(r,i)&&Object(te["getChannelById"])(r,i);var c=Object(Me["getMessageByTimestamp"])(r,i,o.ts);var u=void 0;o&&o.latest_reply?u=o.latest_reply:o&&o.replies&&o.replies.length&&(u=s.a.maxBy(o.replies,"ts").ts);if(c&&c.reply_count){var d=void 0;c&&c.latest_reply?d=c.latest_reply:c&&c.replies&&c.replies.length&&(d=s.a.maxBy(c.replies,"ts").ts);if(u<d){Object(V["a"])({getState:n}).info(al,"Not processing an older message_replied event, "+u+" < "+d+", in "+i);return}}Object(qs["h"])(t);var p=a(Object($s["a"])({imsgs:[o],channelId:i}));a(Object(Me["addMessages"])(p));Object(qs["j"])(l,o,true,false)};function rl(e,t,a){var n=e.subscription||{},r=n.channel,i=n.thread_ts,o=n.last_read;if(!r||!i)return;Object(V["a"])({getState:a}).info(al,"thread_subscribed "+r+" "+i);t(Object(el["upsertSubscriptionAndMarkAsFresh"])({channelId:r,ts:i,subscribed:true,lastRead:o}))}function il(e,t,a){var n=e.subscription||{},r=n.channel,i=n.thread_ts,o=n.last_read;if(!r||!i)return;Object(V["a"])({getState:a}).info(al,"thread_unsubscribed "+r+" "+i);t(Object(el["upsertSubscriptionAndMarkAsFresh"])({channelId:r,ts:i,subscribed:false,lastRead:o}))}function ol(e,t){var a=e.subscription||{},n=a.channel,r=a.thread_ts,i=a.last_read;if(!n||!r)return;t(Object(el["setSubscription"])({channelId:n,ts:r,lastRead:i}))}function sl(e,t,a){var n=Object(le["isFeatureEnabled"])(a(),"feature_react_threads");if(!n)return;var r=e.has_unreads,i=e.timestamp,o=e.mention_count,l=e.mention_count_by_channel;Object(V["a"])({getState:a}).info(al,"update_thread_state has_unreads:"+r+" mention_count:"+o+" ts:"+i);t(Object(tl["updateUnreadThreads"])({hasUnreads:r,mentionCountByChannel:s.a.isArray(l)?{}:l}))}Object(Gt["b"])("thread_subscribed",rl);Object(Gt["b"])("thread_unsubscribed",il);Object(Gt["b"])("thread_marked",ol);Object(Gt["b"])("update_thread_state",sl);function ll(e,t,a){if(!e)return;switch(e.subtype){case"message_changed":ul(e,t,a);return;case"message_deleted":dl(e,t,a);return;case"message_replied":nl(e,t,a);return;case"channel_history_changed":case"group_history_changed":case"im_history_changed":case"mpim_history_changed":return;case"channel_purpose":case"group_purpose":Do(e,t,a);break;case"channel_topic":case"group_topic":Lo(e,t,a);break;default:break}cl(e,t,a);Js(e,t,a);pl(e,t,a)}function cl(e,t,a){if(!Object(K["a"])())return;if(!e||!e.channel)return;var n=a();var r=t(Object(Bs["a"])(e));var i=Object(le["isFeatureEnabled"])(n,"feature_http_sendmsg");i&&Object(Fs["d"])(a,t,r,e)}function ul(e,t,a){var n=a();var r=Object(V["a"])({state:n});var i=e.message,o=e.channel,s=e._from_evt_log;var l=Object(Ds["v"])(n,o)&&Object(Ds["f"])(n,o);if(!i){r.error("no message?");return}if(!i.ts){r.error("no message ts?");return}if(!l&&!Object(le["isFeatureEnabled"])(a(),"feature_message_blocks")){r.error("unknown msg.channel:"+o);return}Object(qs["h"])(e);t(Object(Us["a"])({message:i,channelId:o,fromEventLog:s}))}function dl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleted_ts,a=e.channel,n=e._from_evt_log;var r=arguments[1];r(Object(Me["setMessageDeleted"])({deleted_ts:t,channel:a,_from_evt_log:n}))}function pl(e,t,a){var n=a();var r=Object(le["getCurrentUserId"])(n);if(!Object(le["isFeatureEnabled"])(n,"feature_ally_sounds"))return;if(!Object(Re["isWindowFocused"])(n))return;if(!Object(pa["isScreenReaderEnabled"])())return;if(Object(Ls["isFromCurrentUser"])(e,r))return;if(Object(Ls["isReply"])(e))return;if(!Object(Ls["isFromChannel"])(e,Object(ue["getPrimaryView"])(n)))return;var i=Object(Ls["containsMention"])(e,r,Object(Oe["getUserHighlightWords"])(n),Object(z["getTeamId"])(n));Object(Gs["b"])(i)}Object(Gt["b"])("message",ll);var fl=a(764);Object(Gt["b"])("slackbot_continue",fl["c"]);Object(Gt["b"])("slackbot_response_sent",fl["d"]);Object(Gt["b"])("slackbot_skip_or_stop",fl["e"]);var ml=a(1964);function hl(e,t,a){var n=t.pinned_to,r=void 0===n?[]:n;var o=[].concat(X()(r));var s=o.indexOf(a);e?-1===s&&o.push(a):-1!==s&&o.splice(s,1);return i()({},t,{pinned_to:o})}var vl=hl;var gl=Object(Xe["e"])("Upserts a message after a change in pinned status and returns the new message event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.item,r=a.pinned,o=a.channelId,s=a.pinnedInfo;var l=n.message;var c=vl(r,l,o);var u=Object(Ls["extendMessageWithPinnedInfo"])(c,s);e(Object(Bs["a"])(i()({},u,{channel:o})));return i()({},n,{message:c})});gl.propTypes={channelId:ht.a.string.isRequired,item:ht.a.object.isRequired,pinned:ht.a.bool.isRequired,pinnedInfo:ht.a.object};var bl=gl;var _l=a(373);var yl=a(61);var kl=Object(Xe["e"])("Upserts a file after a change in the pinned status and returns the new message event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.item,r=a.pinned,o=a.channelId,s=a.pinnedInfo;var l=n.file;var c=Object(yl["extendFileWithPinnedInfo"])(l,o,s);var u=vl(r,c,o);e(Object(_l["a"])({files:[u]}));return i()({},n,{file:u})});kl.propTypes={channelId:ht.a.string.isRequired,item:ht.a.object.isRequired,pinned:ht.a.bool.isRequired,pinnedInfo:ht.a.object};var Ol=kl;var wl=a(986);var El=Object(Xe["e"])("Upserts a file after a change in a file comment pinned status and returns the new message event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.item,r=a.pinned,s=a.channelId;var l=n.file,c=n.comment;var u=Object(o["findIndex"])(l.comments,function(e){return e.id===c.id});var d=i()({},l);var p=void 0;if(u>-1){var f=vl(r,l.comments[u],s);p=i()({},f);d.comments[u]=i()({},f)}else{p=c;d=Object(wl["a"])(c,l)}e(Object(_l["a"])({files:[d]}));return i()({},n,{comment:p})});El.propTypes={channelId:ht.a.string.isRequired,item:ht.a.object.isRequired,pinned:ht.a.bool.isRequired};var Cl=El;var jl=a(610);var Sl=a(272);var Il={message:"message",file_comment:"file_comment",file:"file"};var Tl=Il;var Nl=function e(t,a){var n=a.type;if(n!==t.type)return false;switch(n){case Tl.message:return t.message.ts===a.message.ts;case Tl.file:return t.file.id===a.file.id;case Tl.file_comment:return t.comment.id===a.comment.id;default:return false}};var Al=function e(t,a){var n=function e(t){return Nl(t,a)};return Object(o["findIndex"])(t,n)};var Rl=function e(t,a){var n=function e(t){return Nl(t,a)};return Object(o["reject"])(t,n)};var Ml=Nl;var xl=Object(Xe["e"])("Update the pinned_items field for a channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.pinned,r=a.item,o=a.channelId,s=a.count;var l=Object(V["a"])({getState:t,label:"UPDATE_CHANNEL_PINNED_ITEMS"});var c=false;var u=Object(Ds["f"])(t(),o,c);if(!u){l.warn("Channel matching "+o+" not found.");return}var d=i()({},u,{pinned_items:u.pinned_items||[],pinned_items_count:u.pinned_items_count||0});if(!Object(Sl["b"])(d)){e(Object(jl["updatePinCount"])({channelId:o,count:s}));return}if(n){var p=Al(d.pinned_items,r);if(-1===p){d.pinned_items=[r].concat(X()(d.pinned_items));Object(Sl["i"])(d,s);e(Object(en["b"])({channel:d}));Object(Sl["d"])(d,r,n)}}else{d.pinned_items=Rl(d.pinned_items,r);Object(Sl["i"])(d,s);e(Object(en["b"])({channel:d}));Object(Sl["d"])(d,r,n)}});xl.propTypes={channelId:ht.a.string.isRequired,item:ht.a.object.isRequired,pinned:ht.a.bool.isRequired,count:ht.a.number.isRequired};var Pl=xl;var Dl=Object(Xe["e"])("Updates local state when pin status on a channel has changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.pinned,r=a.item,i=a.channelId,o=a.pinCount,s=a.pinnedInfo;var l={};if(n&&s){l.pinnedBy=s.pinned_by;l.pinnedTs=s.pinned_ts}var c=r.type;var u=void 0;switch(c){case Tl.message:u=e(bl({pinned:n,item:r,channelId:i,pinnedInfo:l}));break;case Tl.file_comment:u=e(Cl({pinned:n,item:r,channelId:i}));break;case Tl.file:u=e(Ol({pinned:n,item:r,channelId:i,pinnedInfo:l}));break;default:}e(Pl({pinned:n,item:u,channelId:i,count:o}))});Dl.propTypes={pinned:ht.a.bool.isRequired,item:ht.a.object.isRequired,channelId:ht.a.string.isRequired,maybeCount:ht.a.number,pinnedInfo:ht.a.object};var Fl=Dl;var Ll=Fl;function Bl(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_rtm_pins"))return;var n=Object(V["a"])({getState:a,label:"PIN_ADDED_RTM"});if(!e||!e.channel_id){n.warn("RTM event missing, or missing channel_id.");return}var r=false;var i=a();var o=e.channel_id;var s=Object(te["getChannelById"])(i,o,r);if(!s){n.warn("Channel matching "+o+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=true;t(Ll({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}))}function Ul(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_rtm_pins"))return;var n=Object(V["a"])({getState:a,label:"PIN_REMOVED_RTM"});if(!e||!e.channel_id){n.warn("RTM event missing, or missing channel_id.");return}var r=false;var i=a();var o=e.channel_id;var s=Object(te["getChannelById"])(i,o,r);if(!s){n.warn("Channel matching "+o+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=false;t(Ll({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}))}Object(Gt["b"])("pin_added",Bl);Object(Gt["b"])("pin_removed",Ul);var ql=a(805);var Gl=new Set(["sidebar_theme_custom_values","muted_channels","emoji_use","graphic_emoticons","emoji_mode","preferred_skin_tone"]);var Hl=new Set(["who_can_post_general"]);var Wl=new Set(["search_only_my_channels","search_only_current_team","search_exclude_bots"]);function Vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.value;var n=arguments[1];var r=arguments[2];var i=r();if(Wl.has(t)){n(Object(Oe["setSearchPref"])({pref:t,value:a}));return}if(!Object(le["isFeatureEnabled"])(i,"feature_prefs_modernization"))return;if(Gl.has(t))Object(ql["b"])({name:t,value:a});else{n(Object(Oe["setUserPref"])({pref:t,value:a}));Object(ql["d"])({name:t,value:a})}}function zl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.value;var n=arguments[1];var r=arguments[2];var i=r();if(!Object(le["isFeatureEnabled"])(i,"feature_team_prefs_modernization"))return;if(Hl.has(t))Object(ql["c"])({name:t,value:a});else{n(Object(Oe["setTeamPref"])({pref:t,value:a}));Object(ql["e"])({name:t,value:a})}}Object(Gt["b"])("pref_change",Vl);Object(Gt["b"])("team_pref_change",zl);var Ql={PREFS_WITH_LEGACY_LOGIC:Gl,TEAM_PREFS_WITH_LEGACY_LOGIC:Hl,UNIVERSAL_SEARCH_PREFS:Wl,onPrefChangedEvent:Vl,onTeamPrefChangedEvent:zl};var Kl=a(257);var Yl=a(312);var Jl=a(2802);var Zl="PRESENCE";function Xl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,a=e.type;var n=arguments[1];var r=arguments[2];if("away"!==t&&"active"!==t){Object(V["a"])({getState:r}).error(Zl,"An unknown presence was received in the '"+a+"' event: '"+t+"'");return}n(Object(Jl["a"])({presence:t}))}function $l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,a=e.type,n=e.users;var r=arguments[1];var s=arguments[2];var l=s();var c=Object(V["a"])({getState:s});if("away"!==t&&"active"!==t){c.error(Zl,"An unknown presence was received in the '"+a+"' event: '"+t+"'");return}if(Object(o["isEmpty"])(n)){c.error(Zl,"The '"+a+"' event did not contain an array of users to update the presence for");return}var u=n.filter(function(e){return Object(de["isMemberExistent"])(l,e)&&Object(Yl["getPresenceByMemberId"])(l,e)!==t}).map(function(e){return i()({},Object(de["getRawMemberById"])(l,e),{presence:t})});if(Object(o["isEmpty"])(u))return;Object(Kl["i"])(r,u);u.forEach(function(e){Object(jo["a"])(e)})}Object(Gt["b"])("manual_presence_change",Xl);Object(Gt["b"])("presence_change",$l);var ec=a(674);var tc=a(322);var ac=a(323);function nc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.ts,n=e.file,r=e.comment;switch(t){case"message":return!!a;case"file":return"string"===typeof n;case"file_comment":return"string"===typeof n&&!!r;default:return false}}function rc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.ts,r=t.channel,i=t.file,o=t.comment;switch(a){case"message":return Object(Me["getMessageByTimestamp"])(e,r,n)||Object(qs["d"])(n,r)||void 0;case"file":return Object(na["getFileById"])(e,i)||void 0;case"file_comment":return Object(na["getFileCommentById"])(e,i,o)||void 0;default:return}}function ic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.reaction,n=e.user,r=e.url,i=e._from_evt_log,s=e.event_ts;var l=arguments[1];var c=arguments[2];if(!Object(o["isObject"])(t)){Object(V["a"])({getState:c}).error("reaction_added has no item");return}if(!nc(t))return;var u=rc(c(),t);if(!u)return;var d=t.channel,p=t.type,f=t.ts,m=t.file,h=t.comment;var v=f||h||m;var g=Object(ac["d"])(p,v,d);var b=Object(le["getCurrentUserId"])(c());var _=l(Object(tc["addReaction"])({key:g,name:a,userId:n,url:r}));if(b!==n&&b===u.user){var y=true;var k=!i&&"message"===p;Object(ec["a"])({adding:y,name:a,key:g,userId:n,eventTs:s,shouldAlert:k,channelId:d,url:r})}if(_){var O=i||n!==Object(le["getCurrentUserId"])(c());Object(ec["b"])({key:g,name:a,userId:n,type:p,shouldThrottle:O})}}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.reaction,n=e.user,r=e.url,i=e._from_evt_log,s=e.event_ts;var l=arguments[1];var c=arguments[2];if(!Object(o["isObject"])(t)){Object(V["a"])({getState:c}).error("reaction_removed has no item");return}if(!nc(t))return;var u=rc(c(),t);if(!u)return;var d=t.channel,p=t.type,f=t.ts,m=t.file,h=t.comment;var v=f||h||m;var g=Object(ac["d"])(p,v,d);var b=Object(le["getCurrentUserId"])(c());var _=l(Object(tc["removeReaction"])({key:g,name:a,userId:n,url:r}));if(b!==n&&b===u.user){var y=false;var k=!i&&"message"===p;Object(ec["a"])({adding:y,name:a,key:g,userId:n,eventTs:s,shouldAlert:k,channelId:d,url:r})}if(_){var O=i||n!==b;Object(ec["b"])({key:g,name:a,userId:n,type:p,shouldThrottle:O})}}Object(Gt["b"])("reaction_added",ic);Object(Gt["b"])("reaction_removed",oc);var sc=a(1966);var lc=a(611);var cc="RTM-STARS";var uc={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var dc=function e(t,a,n){if(!Object(le["isFeatureEnabled"])(n(),"feature_modern_starred_items"))return;if(!t)return;if(!t.item){Object(V["a"])({getState:n}).info(cc,'imsg type "'+t.type+'" has no item');return}a(Object(lc["addStarredItem"])(t.item));if(t.item.type===uc.MESSAGE){var r=a(Object($s["a"])({imsgs:[t.item.message],channelId:t.item.channel}));a(Object(Me["addMessages"])(r))}else t.item.type===uc.FILE&&a(Object(_l["a"])({files:[t.item.file]}));Object(V["a"])({getState:n}).info(cc,"star_added")};var pc=function e(t,a,n){if(!Object(le["isFeatureEnabled"])(n(),"feature_modern_starred_items"))return;if(!t&&!t.item){Object(V["a"])({getState:n}).info(cc,t.type+" has no item");return}a(Object(lc["removeStarredItem"])(t.item));Object(V["a"])({getState:n}).info(cc,"star_removed")};Object(Gt["b"])("star_added",dc);Object(Gt["b"])("star_removed",pc);var fc=a(668);var mc=a(72);function hc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.existingFields,a=void 0===t?[]:t,n=e.fields,r=void 0===n?[]:n;var i=Object(o["keyBy"])(a,"id");return Object(o["filter"])(r,function(e){return e.possible_values&&void 0!==i[e.id]&&"options_list"===i[e.id].type&&Object(o["some"])(i[e.id].possible_values,function(t){return-1===e.possible_values.indexOf(t)})})}var vc=Object(hn["b"])("Update profile fields in a team and its members if necessary",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.teamId,r=a.fields,i=void 0===r?[]:r;var o=t();var s=n||Object(z["getTeamId"])(o);var l=false;var c=Object(An["getTeamById"])(o,s,l);if(c&&c.profile&&c.profile.fields){e(Object(An["updateTeamProfileFields"])({teamId:s,fields:i}));var u=hc({existingFields:c.profile.fields,fields:i});u.length>0&&e(Object(fc["d"])({fields:u}))}});vc.propTypes=ht.a.shape({teamId:ht.a.number,fields:ht.a.arrayOf(mc["a"].TeamProfileField).isRequired});var gc=vc;var bc=Object(hn["b"])("delete profile fields from a team and its members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.teamId,r=a.fieldsToDelete,i=void 0===r?[]:r;var o=t();var s=n||Object(z["getTeamId"])(o);e(Object(An["deleteTeamProfileFields"])({teamId:s,fieldsToDelete:i}));e(Object(fc["e"])({fieldsToDelete:i}))});bc.propTypes=ht.a.shape({teamId:ht.a.number,fieldsToDelete:ht.a.arrayOf(ht.a.string).isRequired});var _c=bc;function yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var a=arguments[1];var n=arguments[2];Object(V["a"])({getState:n}).info("User was added to team "+t);Object(jo["g"])(t)}function kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var a=arguments[1];var n=arguments[2];Object(V["a"])({getState:n}).info("User was removed from team "+t);Object(jo["h"])(t)}function Oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,a=e.name;var n=arguments[1];var r=arguments[2];var i=r();if(!Object(le["isFeatureEnabled"])(i,"feature_team_rename_m11n"))return;n(Object(An["renameTeam"])({teamId:t,name:a}));Object(pa["teamNameChanged"])(a)}function wc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,a=e.icon;var n=arguments[1];var r=arguments[2];var i=r();if(!Object(le["isFeatureEnabled"])(i,"feature_team_icon_m11n"))return;n(Object(An["updateTeamIcon"])({teamId:t,icon:a}))}function Ec(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var a=arguments[1];var n=arguments[2];var r=n();if(!Object(le["isFeatureEnabled"])(r,"feature_team_profile_rtm_handlers"))return;a(gc({fields:t.fields}))}function Cc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var a=arguments[1];var n=arguments[2];var r=n();if(!Object(le["isFeatureEnabled"])(r,"feature_team_profile_rtm_handlers"))return;a(Object(An["reorderTeamProfileFields"])({fields:t.fields}))}function jc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var a=arguments[1];var n=arguments[2];var r=n();if(!Object(le["isFeatureEnabled"])(r,"feature_team_profile_rtm_handlers"))return;var i=t.fields;a(_c({fieldsToDelete:i}))}Object(Gt["b"])("user_added_to_team",yc);Object(Gt["b"])("user_removed_from_team",kc);Object(Gt["b"])("team_plan_change",ts["d"]);Object(Gt["b"])("team_rename",Oc);Object(Gt["b"])("team_icon_change",wc);Object(Gt["b"])("team_profile_reorder",Cc);Object(Gt["b"])("team_profile_change",Ec);Object(Gt["b"])("team_profile_delete",jc);var Sc=a(123);var Ic=a(259);var Tc=a(105);var Nc=a(417);var Ac=a(762);function Rc(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam||!e.subteam.id)return;var n=e.subteam;var r=e.subteam.id;var o=Object(Sc["getUserGroupById"])(a(),r);if(!o||Object(Tc["p"])(o)){Object(V["a"])({getState:a}).warn("subteam_updated: User group "+r+" not in model.");return}var s=i()({},n,{users:o.users});t(Object(Sc["upsertUserGroups"])({userGroups:[s]}));Object(le["isFeatureEnabled"])(a(),"feature_sonic_user_groups")||Object(Ac["b"])(r)}function Mc(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam_id)return;var n=e.subteam_id;var r=Object(Sc["getUserGroupById"])(a(),n);if(!r||Object(Tc["p"])(r)){Object(V["a"])({getState:a}).warn("subteam_members_changed: User group "+n+" not in model.");return}var i=r.users,s=void 0===i?[]:i;var l=e.added_users,c=void 0===l?[]:l,u=e.removed_users,d=void 0===u?[]:u;var p=s;c.length&&(p=Object(o["union"])(p,c));d.length&&(p=Object(o["difference"])(p,d));t(Object(Sc["bulkAddMembersToGroup"])({groupId:r.id,users:p}));if(!Object(le["isFeatureEnabled"])(a(),"feature_lazy_user_groups")){var f=Object(le["getCurrentUserId"])(a());var m=!!Object(Ic["getCurrentMemberUserGroupRegExps"])(a())[n];m&&!Object(o["includes"])(p,f)?t(Object(Ic["removeCurrentMemberUserGroupRegexp"])(n)):!m&&Object(o["includes"])(p,f)&&t(Object(Ic["addCurrentMemberUserGroupRegexp"])(r))}}function xc(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam)return;t(Object(Sc["upsertUserGroups"])({userGroups:[e.subteam]}));Object(le["isFeatureEnabled"])(a(),"feature_sonic_user_groups")||Object(Ac["b"])(e.subteam.id)}function Pc(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam)return;var n=e.subteam.id;t(Object(Sc["removeGroup"])(n));Object(le["isFeatureEnabled"])(a(),"feature_sonic_user_groups")||Object(Ac["b"])(n)}function Dc(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam_id)return;var n=Object(le["getCurrentUserId"])(a());var r=Object(Sc["getUserGroupById"])(a(),e.subteam_id);var i={groupId:e.subteam_id,memberId:n};t(Object(Sc["addMemberToGroup"])(i));Object(le["isFeatureEnabled"])(a(),"feature_lazy_user_groups")?t(Object(Nc["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:true})):t(Object(Ic["addCurrentMemberUserGroupRegexp"])(r))}function Fc(e,t,a){if(!Object(le["isFeatureEnabled"])(a(),"feature_modern_user_groups_rtm"))return;if(!e||!e.subteam_id)return;var n=Object(le["getCurrentUserId"])(a());if(!n)return;var r={groupId:e.subteam_id,memberId:n};t(Object(Sc["removeMemberFromGroup"])(r));Object(le["isFeatureEnabled"])(a(),"feature_lazy_user_groups")?t(Object(Nc["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:false})):t(Object(Ic["removeCurrentMemberUserGroupRegexp"])(e.subteam_id))}Object(Gt["b"])("subteam_updated",Rc);Object(Gt["b"])("subteam_members_changed",Mc);Object(Gt["b"])("subteam_created",xc);Object(Gt["b"])("subteam_deleted",Pc);Object(Gt["b"])("subteam_self_added",Dc);Object(Gt["b"])("subteam_self_removed",Fc);var Lc=a(90);var Bc=a(37);var Uc=a(280);var qc=a(455);var Gc=a(699);Object(me["b"])({actions:[Oe["setSearchPref"]],sideEffect:function e(t,a,n){var r=n();if(!Object(Bc["getVisible"])(r))return;var i=Object(Lc["getRequest"])(r),o=i.query;a(Object(Lc["clearResponse"])());a(Object(Uc["a"])({query:o,fetchSuggestions:true}));o&&a(Object(Uc["i"])({query:o}))}});Object(me["b"])({actions:[Oe["setSearchPref"]],sideEffect:function e(t,a){a(Object(Lc["setRequestFromEditableRequest"])({fetchSuggestions:true}));a(Object(Gc["startQuerySession"])())}});Object(me["b"])({actions:[ce["setActiveChannel"],Eo["a"]],sideEffect:function e(t,a,n){var r=n();Object(Bc["getVisible"])(r)&&a(Object(qc["a"])())}});var Hc=a(279);var Wc=a(793);var Vc=Object(Ee["c"])("TS.highlights_briefing.handleFeedback",function(){return false});function zc(e,t){Vc(e.payload);t(Object(Wc["b"])(e.payload))}function Qc(e,t,a){if(!e.payload.prevChannelId||e.payload.channelId===e.payload.prevChannelId)return;var n=a();if(!Object(le["useReactMessages"])(n))return;var r=false;var i=Object(te["getChannelById"])(n,e.payload.prevChannelId,r);if(!i||!i.last_read)return;var o=Object(Hc["getHighlightedTimestampsPriorToTimestamp"])(n,{channelId:e.payload.prevChannelId,beforeTs:i.last_read});if(!o.length)return;var l=s.a.reduce(o,function(e,t){e[t]={sliHighlight:{isHighlight:false}};return e},{});t(Object(Hc["setHighlightsForMessages"])(Ka()({},e.payload.prevChannelId,l)))}Object(me["b"])({actions:[Hc["setFeedbackForHighlight"]],sideEffect:zc});Object(me["b"])({actions:[ce["setActiveChannel"]],sideEffect:Qc});var Kc=10;var Yc=9e5;var Jc=void 0;var Zc={};var Xc={};var $c={};function eu(){void 0===Jc&&(Jc=Object(Y["a"])(Kc));return Jc}var tu="asleep";var au="connecting";var nu="connected";var ru="wait_connectivity";var iu="wait_rate_limit";function ou(e){if(Object(ae["isAsleep"])(e))return tu;if(Object(ae["isConnecting"])(e))return au;if(Object(ae["isConnected"])(e))return nu;if(Object(ae["isWaitingForConnectivity"])(e))return ru;if(Object(ae["isWaitingForRateLimit"])(e))return iu;return"disconnected"}function su(e,t,a){if(!eu())return;var n=a();var r=Object(z["getTeamId"])(n);var i=ou(n);if(Xc[r]!==i){Xc[r]=i;Zc[r]=Zc[r]||[];Zc[r].push({status:i,ts:window.performance.now()})}}function lu(e,t,a){if(!eu())return;var n=a();var r=Object(z["getTeamId"])(n);if($c[r])return;$c[r]=performance.now();var i=Object(mn["a"])(Yc,.8,1.2);setInterval(function(){if(!Zc[r])return;var e={};Zc[r].forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.status,n=t.ts;var i=arguments[1];var o=Zc[r][i+1];var s=o?o.ts:performance.now();var l=s-n;e[a]=e[a]||0;e[a]+=l});Object.keys(e).forEach(function(t){var a=e[t];Object(J["c"])("ws_tis_"+t,a)});var t=performance.now()-$c[r];var a=e[tu]||0;Object(J["c"])("ws_tis_duration",t);Object(J["c"])("ws_tis_duration_awake",t-a);$c[r]=performance.now();Zc[r]=[{status:Xc[r],ts:window.performance.now()}]},i)}Object(me["a"])([{actions:[ae["stateChanged"]],sideEffect:su},{actions:[fn["start"]],sideEffect:lu}]);function cu(e,t){if(!Object(K["a"])())return;t(Object(fn["finalizeProvisionalConnection"])())}Object(me["b"])({actions:[ae["provisionallyConnected"]],sideEffect:cu});var uu={};function du(e,t,a){var n=a();var r=Object(z["getTeamId"])(n);if(uu[r])return;uu[r]=setInterval(function(){t(Object(Ss["checkTypingMap"])())},1e3)}function pu(e,t,a){var n=a();var r=Object(z["getTeamId"])(n);if(!uu[r])return;clearInterval(uu[r]);delete uu[r]}Object(me["b"])({actions:[Ss["updateTyping"]],sideEffect:du});Object(me["b"])({actions:[Ss["clearTypingCleanupInterval"]],sideEffect:pu});var fu=a(706);var mu=a(3437);var hu=a(1962);var vu=a(368);var gu="POLLING";var bu=1e3;var _u=function(){function e(){st()(this,e);this._pollTimers={};this._jobs={};this._ticks={};Object(vu["a"])(this)}ct()(e,[{key:"poll",value:function e(t,a,n){var r=this._tick(t)+n;var i={interval:n,callback:a,cancelled:false};this._addJob(t,r,i);this._startPoll(t);return{cancel:function e(){i.cancelled=true}}}},{key:"_tick",value:function e(t,a){this._ticks[t]||(this._ticks[t]=0);a&&(this._ticks[t]+=1);return this._ticks[t]}},{key:"_addJob",value:function e(t,a,n){this._jobs[t]||(this._jobs[t]={});this._jobs[t][a]||(this._jobs[t][a]=[]);this._jobs[t][a].push(n)}},{key:"_startPoll",value:function e(t){var a=this;if(this._pollTimers[t])return;this._pollTimers[t]=setInterval(function(){var e=Object(Q["c"])(t);if(!Object(Dn["isServiceOnline"])(e))return;var n=true;var r=a._tick(t,n);var i=a._jobs[t][r];if(!i)return;Object(V["a"])({teamId:t}).debug(gu,"Executing up to "+i.length+" scheduled jobs");i.forEach(function(e){if(e.cancelled)return;Promise.resolve(e.callback()).then(function(n){var r=n&&n>0?n:e.interval;var i=a._tick(t)+r;a._addJob(t,i,e);a._startPoll(t)})});delete a._jobs[t][r];if(!Object.keys(a._jobs[t]).length){clearInterval(a._pollTimers[t]);delete a._pollTimers[t]}},bu)}}]);return e}();var yu=Object(o["memoize"])(function(){return new _u});function ku(e,t,a){if(!e)throw new Error("PollingManager must be passed a `teamId`");if(!(t instanceof Function))throw new Error("PollingManager must be passed a `callback` function");if(!a||a<=0)throw new Error("PollingManager must be passed an `interval` greater than 0");return yu().poll(e,t,a)}var Ou={};Object.defineProperty(Ou,"getPollingManager",{get:function e(){return yu}});Object.defineProperty(Ou,"resetPollingManager",{get:function e(){return function(){return yu.cache.set(void 0,new _u)}}});var wu={};var Eu=function e(){var t=Date.now();var a=t;var n=0;return function(){var e=Date.now();var r=e-t;var i=e-a;n+=1;a=e;Object(J["h"])("poll_client_unreads_since_start",r,{in_seconds:true});Object(J["h"])("poll_client_unreads_since_most_recent",i,{in_seconds:true});Object(J["c"])("poll_client_unreads_interval_"+n)}};var Cu=function e(){var t=[60,600,3600];var a=0;return function(){var e=t[a];a<t.length-1&&(a+=1);return e}};function ju(e){wu[e]&&wu[e].cancel();var t=Cu();var a=Eu();wu[e]=ku(e,function(){a();return Object(mn["a"])(t(),-.2,.2)},Object(mn["a"])(t(),-.2,.2))}var Su=Object(hn["b"])("Poll client unreads API",function(e,t){return Object(le["isFeatureEnabled"])(t(),"feature_degraded_sidebar")&&ju(Object(z["getTeamId"])(t()))});Su.propTypes=null;var Iu={clientUnreadsPollByTeam:wu,makeIntervalFactory:Cu,makeMetricsFactory:Eu};var Tu=Su;var Nu=a(2092);var Au=a(503);var Ru="UNREAD-COUNTS";var Mu={};function xu(e){Mu[e]||Pu(e);return Mu[e]}function Pu(e){Mu[e]={}}var Du={};function Fu(e){Du[e]||(Du[e]={});return Du[e]}function Lu(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unread-counts/fetchHistoryForCounting";var i=a();var o=Object(z["getTeamId"])(i);var l=xu(o);var c=Object(V["a"])({state:i});if(l[e.id]){c.warn("Ignoring new unread counting history request for "+e.id);return}var u=Fu(o);var d=u[e.id];if(d){if(!n||!s.a.isNumber(d)){c.info(Ru,"Dropping unread history request for "+e.id+" since there is already one pending");return}c.info(Ru,"Cancelling timer and making history request for "+e.id+" now");clearTimeout(u[e.id])}var p=n?0:s.a.random(2500,1e4);c.info(Ru,"Fetching history for unread counting: "+e.id+", waiting "+p+" ms");u[e.id]=setTimeout(function(){var a=!n&&t(Object(hu["b"])({channelId:e.id}));if(a){delete u[e.id];return}c.info("HISTORY-FETCH","Fetching history for unread counting: "+e.id);u[e.id]=t(Object(Au["b"])({channelId:e.id,type:Object(pe["getChannelType"])(e),oldest:null,latest:null,reason:r})).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.msgs,r=a.hasMore,i=a.pinCount,o=a.deleted;l[e.id]=true;var c=s.a.map(n,"ts");t(Object(fu["a"])({msgs:n,channelId:e.id,latest:s.a.max(c),oldest:s.a.min(c),hasMore:{hasMoreStart:r,hasMoreEnd:false},forceUnreadCount:true,deleted:o}));s.a.isNumber(i)&&t(Object(jl["updatePinCount"])({channelId:e.id,count:i}))}).finally(function(){delete u[e.id]})},p)}var Bu={};function Uu(e){Bu[e]||(Bu[e]={});return Bu[e]}function qu(e,t,a){var n=e.id;var r=Object(V["a"])({getState:a});var i=Uu(Object(z["getTeamId"])(a()));if(i[n]){r.info(Ru,"Ignoring redundant initial count sync request for "+e.id);return}i[n]=true;var o=s.a.random(2500,1e4);r.info(Ru,"Syncing initial counts for "+e.id+" in "+o+" ms");setTimeout(function(){t(Object(tn["g"])({channelId:n})).then(function(a){var r=a.has_unreads?1:0;var i=s.a.isNumber(a.mention_count)?a.mention_count:0;var o=Object(pe["isIm"])(e)||Object(pe["isMpim"])(e)?i:r;t(Object(mu["setInitialUnreadCountsForChannel"])({id:n,unreadCnt:o,unreadHighlightCnt:i}))}).finally(function(){delete i[n]})},o)}function Gu(e,t,a){var n=a();if(Object(K["a"])()||!Object(le["isFeatureEnabled"])(n,"feature_degraded_boot")||!Object(le["useReactMessages"])(n)||!Object(le["isClientApp"])(n))return;Hu(e,t,a)}function Hu(e,t,a){var n=a();if(!Object(le["useReactMessages"])(n)||!Object(le["isClientApp"])(n))return;var r=Object(ae["wasLastConnectFast"])(n);if(r)return;var i=Object(z["getTeamId"])(a());Pu(i);if((Object(K["a"])()||Object(le["isFeatureEnabled"])(n,"feature_degraded_boot"))&&Object(ae["isFirstConnection"])(n)){t(Tu());return}t(Object(mu["setInitialUnreadCounts"])({}));t(Object(Nu["a"])()).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(hu["a"])(e));if(Object(le["isFeatureEnabled"])(n,"feature_degraded_boot")){var a=s.a.compact(s.a.concat(e.channels,e.groups));t(Object(te["reconcileChannelAccess"])({channels:a}))}}).finally(function(){return t(Tu())})}function Wu(e,t,a){var n=a();var r=Object(V["a"])({state:n});if(!Object(le["useReactMessages"])(n))return;var i=e.payload,o=i.channelId,l=i.timestamps,c=i.forceUnreadCount,u=i.append,d=i.fromEvtLog;if(s.a.isEmpty(l))return;if(d)return;var p=false;var f=Object(te["getChannelById"])(n,o,p);if(!f)return;var m=Object(pe["getLastReadTs"])(f);var h=Object(pe["isRead"])(f);var v=s.a.some(l,function(e){return e>=m});if(!v&&!c)return;var g=o===Object(ue["getPrimaryView"])(n);g&&r.info(Ru,"Counting unreads in "+o+" because ("+l.length+") timestamps added");var b=t(Object(hu["b"])({channelId:o}));if(!b){var _=false;var y="unread-counts/onAddTimestamps";Vu(a,f,l)&&Lu(f,t,a,_,y)}if(l&&l.length>1&&h){var k=Object(te["getChannelById"])(a(),o);Object(pe["isUnread"])(k)&&Object(Se["a"])({id:o,initial:Object(mu["getInitialUnreadCountsByChannelId"])(a(),o)},"unexpected_unread_after_loading_history",null,true)}if(l&&1===l.length&&l[0]>m){var O=!u;g&&r.info(Ru,"Checking unreads in "+o+" after a new message");Ue(o,t,a,O)}}function Vu(e,t,a){if(Object(pe["isIm"])(t)||Object(pe["isMpim"])(t))return true;var n=e();var r=s.a.map(a||[],function(e){return Object(Me["getMessageByTimestamp"])(n,t.id,e)});return s.a.some(r,function(e){if(!e)return false;var t=Object(qs["f"])(e);return t.non_channel_mentions})}function zu(e,t,a){var n=a();var r=Object(V["a"])({state:n});if(!Object(le["useReactMessages"])(n))return;var i=e.payload,o=i.channelId,s=i.timestamp,l=i.forceUnreadCount,c=i.fromEvtLog;if(c)return;if(!s)return;var u=false;var d=Object(te["getChannelById"])(n,o,u);if(!d)return;var p=Object(pe["getLastReadTs"])(d);if(s<p&&!l)return;r.info(Ru,"Counting unreads in "+o+" because message removed");var f=t(Object(hu["b"])({channelId:o}));f||Qu({dispatch:t,getState:a,channel:d,timestamp:s})&&qu(d,t,a)}function Qu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getState,a=e.channel,n=e.timestamp;var r=Object(Ae["getTimestampsByChannelId"])(t(),a.id,null),i=r.timestamps,o=r.start;var s=Object(pe["getLatestTs"])(a,i);var l=o||s+1e-6;return n<l}function Ku(e,t,a){if(!e.payload.last_read)return;var n=a();var r=Object(V["a"])({state:n});if(!Object(le["useReactMessages"])(n))return;var i=e.payload.id;var o=false;var s=Object(te["getChannelById"])(n,i,o);if(!s)return;if(Object(pe["isFromAnotherTeam"])(s))return;r.info(Ru,"Counting unreads in "+i+" because last_read changed to "+e.payload.last_read);var l=t(Object(hu["b"])({channelId:i}));if(!l){var c=true;var u="unread-counts/onLastReadUpdated";Lu(s,t,a,c,u)}}function Yu(e,t,a){var n=a();var r=Object(V["a"])({state:n});if(!Object(le["useReactMessages"])(n))return;var i=e.payload,o=i.id,s=i.unreadCnt,l=i.unreadHighlightCnt;var c=false;var u=Object(te["getChannelById"])(n,o,c);if(!u)return;r.info(Ru,"Counting unreads in "+o+" because initial counts updated to {"+s+", "+l+"}");t(Object(hu["b"])({channelId:o}))}Object(me["b"])({actions:[fn["start"]],sideEffect:Gu});Object(me["b"])({actions:[ae["connected"]],sideEffect:Hu});Object(me["b"])({actions:[Ae["addTimestamps"]],sideEffect:Wu});Object(me["b"])({actions:[Ae["removeTimestamp"]],sideEffect:zu});Object(me["b"])({actions:[te["lastReadUpdated"]],sideEffect:Ku});Object(me["b"])({actions:[mu["setInitialUnreadCountsForChannel"]],sideEffect:Yu});var Ju={shouldFetchHistoryAfterTimestampsAdded:Vu,shouldFetchHistoryAfterTimestampRemoved:Qu,syncInitialCounts:qu};var Zu="USER_GROUP_MEMBERSHIP";var Xu=Object(gn["a"])("Fetch user groups by id",function(e,t){return e(Object(vn["a"])({method:"subteams.membership"})).then(function(e){return e.subteams}).catch(function(e){if(e.data&&"user_is_restricted"===e.data.error){Object(V["a"])({getState:t}).warn(Zu,"subteams.membership failed with user_is_restricted: Guests are not allowed to have user groups");return[]}Object(V["a"])({getState:t}).error(Zu,"failed to fetch user group membership");throw e})});Xu.propTypes=null;function $u(e,t,a){var n=a();var r=Object(V["a"])({state:n});if(!Object(le["isFeatureEnabled"])(n,"feature_lazy_user_groups")||!Object(le["isClientApp"])(n))return Promise.resolve();var i=Object(ae["wasLastConnectFast"])(n);if(i)return Promise.resolve();if((Object(K["a"])()||Object(le["isFeatureEnabled"])(n,"feature_degraded_boot"))&&Object(ae["isFirstConnection"])(n))return Promise.resolve();t(Object(Nc["clearAllUserGroupMembership"])());return t(Xu()).then(function(e){if(!e)return;t(Object(Nc["bulkAddUserGroupMembership"])({userGroups:e,isMember:true}));r.info(Zu,"Completed subteams.membership processing")})}Object(me["b"])({actions:[ae["connected"]],sideEffect:$u});var ed={updateUserGroups:$u};function td(e,t,a){Object(V["a"])({getState:a}).info("WINDOW-UNLOADING","workspace handling window unloading event")}Object(me["b"])({actions:[Re["setUnloading"]],sideEffect:td});var ad=a(772);function nd(e,t,a){var n=e&&e.payload&&e.payload.isFocused;Object(V["a"])({getState:a}).info("WORKSPACE-FOCUS","workspace focus state changed to "+n)}Object(me["b"])({actions:[ad["k"]],sideEffect:nd});var rd=a(651);var id=a(685);var od=a(219);var sd=a(894);var ld=a(750);var cd=a(896);var ud=a(3419);var dd=a(3492);var pd=a(507);var fd=a(351);var md=a(499);var hd=a(627);var vd=a(616);var gd=a(650);var bd=a(815);var _d=a(850);var yd=a(166);var kd=a(235);var Od=a(711);var wd=a(1163);var Ed=a(680);var Cd=a(142);var jd=a(268);var Sd=a(751);var Id=a(180);var Td=a(712);var Nd=a(508);var Ad=a(3303);var Rd=a(128);var Md=a(814);var xd=a(1130);var Pd=a(374);var Dd=a(1131);var Fd=a(741);var Ld=a(602);var Bd=Object(l["combineReducers"])({channelNamesToIds:xd["default"],inviters:js["default"],mutedChannels:Pd["default"],needsApiMarking:Dd["default"],needsCreatedMessage:Fd["default"],prqMetrics:Ld["default"]});var Ud=Bd;var qd=a(432);var Gd=a(502);var Hd=a(170);var Wd=a(816);var Vd=a(679);var zd=a(893);var Qd=a(895);var Kd=a(3495);var Yd=a(1132);var Jd=a(354);var Zd=a(356);var Xd=a(355);var $d=a(187);a.d(t,"a",function(){return sp});var ep={},tp=ep.PERSIST_WRITE_FREQUENCY,ap=ep.PERSIST_METRICS_LABEL,np=ep.persistLogPrefix;var rp={},ip=rp.getPersistConfigForTeam;var op=Object(Y["a"])(100);function sp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,a=e.reducers,r=void 0===a?n:a,s=e.middlewares,c=void 0===s?Kd["a"]:s,u=e.customEnhancers,d=void 0===u?Yd["a"]:u,p=e.initialState,f=void 0===p?{}:p;if(!t)throw new Error("configureStore must be called with a teamId parameter");var m=se({teamId:t,customEnhancers:d,middlewares:c});var h=void 0!==ip;var v=Object(l["combineReducers"])(r);var g=void 0;var b=void 0;if(h&&Object(K["a"])()){var _=ip(t);v=T(_,v);g=y(_);b=y(i()({},_,{synchronousWrites:true}))}var k=Object(l["createStore"])(v,f,m);if(h&&Object(K["a"])()){var O=function e(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(V["a"])({teamId:t}).info(np,"Persisting state to storage");op&&Object(J["e"])(ap+"_persistence_write_mark");var n=void 0;a?b.update(k.getState()):g.update(k.getState());if(op){n=Object(J["g"])(ap,ap+"_persistence_write_mark");Object(V["a"])({teamId:t}).info(np,"Persisted state"+(n?": "+n.toFixed(1)+"ms":""))}};k.subscribe(Object(o["throttle"])(O,tp));window.addEventListener("beforeunload",function(){k.dispatch(Object(G["clearSerializedData"])());Object(H["c"])();Object(V["a"])({teamId:t}).info(np,"Persisting state to storage because the window is about to unload");var e=true;O(e)})}k._initStore=function e(){k.dispatch(Object(z["setTeamId"])(t))};k._initStore();Object(Q["e"])(t,k);Object(W["exportToTeamDebugger"])(t,"redux",k);return k}var lp=void 0;Object(W["exportToGlobalDebuggerWithGetter"])("redux",function(){if(lp)return lp;var e=function e(t,a){var n=t.replace("@slack/redux/","").replace(/\.js$/,"").replace(/-middleware$/,"").replace(/\//,"_");return Object(o["camelCase"])(n+"_"+a)};var t=function t(a){var n={};Object.values(a).forEach(function(t){n[e(t.meta.file,t.meta.name)]=t});return n};var a=function e(t){var a={};Object.values(t).forEach(function(e){a[e.meta.name]=e});return a};lp={actions:t(Object(Jd["a"])()),middlewares:a(Object($d["a"])()),reducers:t(Object(Xd["a"])()),selectors:t(Object(Zd["a"])()),thunks:t(Object(hn["a"])())};return lp})},function(e,t,a){"use strict";a.r(t);var n=a(51);var r=a(278);var i=a(743);var o=a(3418);var s=a(2);var l=a(31);var c=a(11);var u=a(23);var d=a(33);var p=a(19);var f=a(122);var m=a(69);var h=a(2092);var v=a(1962);var g=a(63);var b=a(17);var _=6e4;var y=function e(t){var a=Object(d["c"])(t);if(Object(g["a"])()&&!Object(m["isWorkspaceFocused"])(a))return Promise.resolve();return Object(d["a"])(t,Object(h["a"])({reason:"requestOfflineCounts"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d["a"])(t,Object(f["resetReachedEnd"])());Object(d["a"])(t,Object(v["a"])(e));var a=Object(s["compact"])(Object(s["concat"])(e.channels,e.groups));Object(d["a"])(t,Object(p["reconcileChannelAccess"])({channels:a}))}).catch(function(e){Object(b["a"])({state:a}).error("Failed to fetch offline users counts for "+t+": "+e)})};var k=Object(s["throttle"])(y,_,{trailing:false});var O=Object(l["b"])("Request offline users counts",function(e,t){return Object(c["isFeatureEnabled"])(t(),"feature_degraded_send")&&k(Object(u["getTeamId"])(t()))});O.propTypes={};var w=O;var E={fetchOfflineUsersCounts:y};Object(n["a"])("interop.actions",{displayModelOrViewById:r["a"],setLastRead:i["c"],markLastRead:i["b"],markDelayedWithAPI:i["a"],requestOfflineHistory:o["a"],requestOfflineCounts:w})}]),[[3266,0,1]]]);